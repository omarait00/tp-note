(window.advancedSettings_bundle_jsonpfunction=window.advancedSettings_bundle_jsonpfunction||[]).push([[1,2],Array(22).concat([function(e,t,n){e.exports=n(12)(3)},function(e,t,n){"use strict";var a,s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function r(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function o(e,t){for(var n={},a=[],s=0;s<e.length;s++){var o=e[s],l=t.base?o[0]+t.base:o[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var u=r(c),g={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(i[u].references++,i[u].updater(g)):i.push({identifier:c,updater:m(g,t),references:1}),a.push(c)}return a}function l(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var i=n.nc;i&&(a.nonce=i)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=s(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var d,c=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function u(e,t,n,a){var s=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=c(t,s);else{var i=document.createTextNode(s),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function g(e,t,n){var a=n.css,s=n.media,i=n.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var h=null,p=0;function m(e,t){var n,a,s;if(t.singleton){var i=p++;n=h||(h=l(t)),a=u.bind(null,n,i,!1),s=u.bind(null,n,i,!0)}else n=l(t),a=g.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var n=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<n.length;a++){var s=r(n[a]);i[s].references--}for(var l=o(e,t),d=0;d<n.length;d++){var c=r(n[d]);0===i[c].references&&(i[c].updater(),i.splice(c,1))}n=l}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,a,s,i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var o=(n=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(s," */")),l=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[i].concat(l).concat([o]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(a)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(s[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);a&&s[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t,n){"use strict";n.r(t),n.d(t,"Field",(function(){return field_Field})),n.d(t,"getEditableValue",(function(){return j})),n.d(t,"default",(function(){return field_Field}));var a=n(22),s=n.n(a),i=n(2),r=n.n(i),o=n(4),l=n.n(o),d=n(17),c=n.n(d),u=n(1),g=n(0),h=n(9),p=n(18),m=n(16),f=n(3);const v=({value:e,onChange:t,type:n,isReadOnly:a,a11yProps:i,name:r})=>{const l=Object(o.useCallback)((e=>{var t;const n=e.getDomNode();if(!n)return;const a=e.getOption(p.monaco.editor.EditorOption.lineHeight);let s=(null===(t=e.getModel())||void 0===t?void 0:t.getLineCount())||6;s<6?s=6:s>30&&(s=30);const i=a*s;n.id=r,n.style.height=`${i}px`,e.layout()}),[r]),d=Object(o.useCallback)((e=>{const t=e.getModel();if(!t)return;const n=t.getValue().trim();t.setValue(n)}),[]),c=Object(o.useCallback)((e=>{l(e),e.onDidChangeModelContent((()=>{l(e)})),e.onDidBlurEditorWidget((()=>{d(e)}))}),[l,d]);return Object(f.jsx)(m.CodeEditor,s()({},i,{languageId:"json"===n?p.XJsonLang.ID:m.MarkdownLang,value:e,onChange:t,editorDidMount:c,width:"100%",options:{readOnly:a,lineNumbers:"off",scrollBeyondLastLine:!1,automaticLayout:!0,folding:!1,tabSize:2,scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"on",wrappingIndent:"indent"}}))};var b=n(10);const j=(e,t,n)=>{const a=null==t?n:t;switch(e){case"array":return a.join(", ");case"boolean":return!!a;case"number":return Number(a);case"image":return a;default:return a||""}};class field_Field extends o.PureComponent{constructor(...e){super(...e),r()(this,"changeImageForm",l.a.createRef()),r()(this,"handleChange",(e=>{this.props.handleChange(this.props.setting.name,e)})),r()(this,"resetField",(()=>{const{type:e,defVal:t}=this.props.setting;return"image"===e?(this.cancelChangeImage(),this.handleChange({value:j(e,t,t),changeImage:!0})):this.handleChange({value:j(e,t)})})),r()(this,"onCodeEditorChange",(e=>{const{defVal:t,type:n}=this.props.setting;let a,s={};if("json"===n){const n=Array.isArray(JSON.parse(t||"{}"));a=e||(n?"[]":"{}");try{JSON.parse(a)}catch(e){s={error:g.i18n.translate("advancedSettings.field.codeEditorSyntaxErrorMessage",{defaultMessage:"Invalid JSON syntax"}),isInvalid:!0}}}else a=e;this.handleChange({value:a,...s})})),r()(this,"onFieldChangeSwitch",(e=>this.onFieldChange(e.target.checked))),r()(this,"onFieldChangeEvent",(e=>this.onFieldChange(e.target.value))),r()(this,"onFieldChange",(e=>{const{type:t,value:n,defVal:a,options:s}=this.props.setting;let i;switch(t){case"boolean":const{unsavedChanges:r}=this.props;i=!(r?r.value:j(t,n,a));break;case"number":i=Number(e);break;case"select":i="number"==typeof(null==s?void 0:s[0])?Number(e):e;break;default:i=e}this.handleChange({value:i})})),r()(this,"onImageChange",(async e=>{if(null==e)return;if(!e.length)return void this.setState({unsavedValue:null});const t=e[0];try{let e="";t instanceof File&&(e=await this.getImageAsBase64(t)),this.handleChange({changeImage:!0,value:e})}catch(e){this.props.toasts.addDanger(g.i18n.translate("advancedSettings.field.imageChangeErrorMessage",{defaultMessage:"Image could not be saved"})),this.cancelChangeImage()}})),r()(this,"changeImage",(()=>{this.handleChange({value:null,changeImage:!0})})),r()(this,"cancelChangeImage",(()=>{var e;null!==(e=this.changeImageForm.current)&&void 0!==e&&e.fileInput&&(this.changeImageForm.current.fileInput.value="",this.changeImageForm.current.handleChange()),this.props.clearChange&&this.props.clearChange(this.props.setting.name)}))}getDisplayedDefaultValue(e,t,n={}){if(null==t||""===t)return"null";switch(e){case"array":return t.join(", ");case"select":return n.hasOwnProperty(String(t))?n[String(t)]:String(t);default:return String(t)}}componentDidUpdate(e){var t,n;"image"!==e.setting.type||null===(t=e.unsavedChanges)||void 0===t||!t.value||null!==(n=this.props.unsavedChanges)&&void 0!==n&&n.value||this.cancelChangeImage()}async getImageAsBase64(e){const t=new FileReader;return t.readAsDataURL(e),new Promise(((e,n)=>{t.onload=()=>{e(t.result)},t.onerror=e=>{n(e)}}))}renderField(e,t){const{enableSaving:n,unsavedChanges:a,loading:i}=this.props,{name:r,value:o,type:l,options:d,optionLabels:c={},isOverridden:g,defVal:p,ariaName:m}=e,y=t?{"aria-label":m,"aria-describedby":t}:{"aria-label":m},x=a?a.value:j(l,o,p);switch(l){case"boolean":return Object(f.jsx)(u.EuiSwitch,s()({label:x?Object(f.jsx)(h.FormattedMessage,{id:"advancedSettings.field.onLabel",defaultMessage:"On"}):Object(f.jsx)(h.FormattedMessage,{id:"advancedSettings.field.offLabel",defaultMessage:"Off"}),checked:!!x,onChange:this.onFieldChangeSwitch,disabled:i||g||!n,"data-test-subj":`advancedSetting-editField-${r}`},y));case"markdown":case"json":return Object(f.jsx)("div",{"data-test-subj":`advancedSetting-editField-${r}`},Object(f.jsx)(v,{value:x,onChange:this.onCodeEditorChange,type:l,isReadOnly:g||!n,a11yProps:y,name:`advancedSetting-editField-${r}-editor`}));case"image":const t=null==a?void 0:a.changeImage;return Object(b.e)(e)||t?Object(f.jsx)(u.EuiFilePicker,{disabled:i||g||!n,onChange:this.onImageChange,accept:".jpg,.jpeg,.png",ref:this.changeImageForm,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`,"aria-label":r}):Object(f.jsx)(u.EuiImage,s()({},y,{allowFullScreen:!0,url:o,alt:r}));case"select":return Object(f.jsx)(u.EuiSelect,s()({},y,{value:x,options:d.map((e=>({text:c.hasOwnProperty(e)?c[e]:e,value:e}))),onChange:this.onFieldChangeEvent,isLoading:i,disabled:i||g||!n,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`}));case"number":return Object(f.jsx)(u.EuiFieldNumber,s()({},y,{value:x,onChange:this.onFieldChangeEvent,isLoading:i,disabled:i||g||!n,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`}));case"color":return Object(f.jsx)(u.EuiColorPicker,s()({},y,{color:x,onChange:this.onFieldChange,disabled:i||g||!n,format:"hex","data-test-subj":`advancedSetting-editField-${r}`}));default:return Object(f.jsx)(u.EuiFieldText,s()({},y,{value:x,onChange:this.onFieldChangeEvent,isLoading:i,disabled:i||g||!n,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`}))}}renderLabel(e){return e.name}renderHelpText(e){if(e.isOverridden)return Object(f.jsx)(u.EuiText,{size:"xs"},Object(f.jsx)(h.FormattedMessage,{id:"advancedSettings.field.helpText",defaultMessage:"This setting is overridden by the Kibana server and can not be changed."}));const t=this.props.enableSaving,n=this.renderResetToDefaultLink(e),a=this.renderChangeImageLink(e);return t&&(n||a)?Object(f.jsx)("span",null,n,a):null}renderTitle(e){const{unsavedChanges:t}=this.props,n=null==t?void 0:t.isInvalid,a=t?n?g.i18n.translate("advancedSettings.field.invalidIconLabel",{defaultMessage:"Invalid"}):g.i18n.translate("advancedSettings.field.unsavedIconLabel",{defaultMessage:"Unsaved"}):void 0;return Object(f.jsx)("h3",null,Object(f.jsx)("span",{className:"mgtAdvancedSettings__fieldTitle"},e.displayName||e.name),e.isCustom?Object(f.jsx)(u.EuiIconTip,{type:"asterisk",color:"primary","aria-label":g.i18n.translate("advancedSettings.field.customSettingAriaLabel",{defaultMessage:"Custom setting"}),content:Object(f.jsx)(h.FormattedMessage,{id:"advancedSettings.field.customSettingTooltip",defaultMessage:"Custom setting"})}):"",t?Object(f.jsx)(u.EuiIconTip,{anchorClassName:"mgtAdvancedSettings__fieldTitleUnsavedIcon",type:n?"alert":"dot",color:n?"danger":"warning","aria-label":a,content:a}):"")}renderDescription(e){let t,n;if(e.deprecation){const t=this.props.docLinks;n=Object(f.jsx)(l.a.Fragment,null,Object(f.jsx)(u.EuiToolTip,{content:e.deprecation.message},Object(f.jsx)(u.EuiBadge,{color:"warning",onClick:()=>{window.open(t.management[e.deprecation.docLinksKey],"_blank")},onClickAriaLabel:g.i18n.translate("advancedSettings.field.deprecationClickAreaLabel",{defaultMessage:"Click to view deprecation documentation for {settingName}.",values:{settingName:e.name}})},"Deprecated")),Object(f.jsx)(u.EuiSpacer,{size:"s"}))}return t=l.a.isValidElement(e.description)?e.description:Object(f.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description||""}}),Object(f.jsx)(o.Fragment,null,n,t,this.renderDefaultValue(e))}renderDefaultValue(e){const{type:t,defVal:n,optionLabels:a}=e;if(!Object(b.e)(e))return Object(f.jsx)(o.Fragment,null,Object(f.jsx)(u.EuiSpacer,{size:"s"}),Object(f.jsx)(u.EuiText,{size:"xs"},"json"===t?Object(f.jsx)(o.Fragment,null,Object(f.jsx)(h.FormattedMessage,{id:"advancedSettings.field.defaultValueTypeJsonText",defaultMessage:"Default: {value}",values:{value:Object(f.jsx)(u.EuiCodeBlock,{language:"json",paddingSize:"s",overflowHeight:n.length>=500?300:void 0},this.getDisplayedDefaultValue(t,n))}})):Object(f.jsx)(o.Fragment,null,Object(f.jsx)(h.FormattedMessage,{id:"advancedSettings.field.defaultValueText",defaultMessage:"Default: {value}",values:{value:Object(f.jsx)(u.EuiCode,null,this.getDisplayedDefaultValue(t,n,a))}}))))}renderResetToDefaultLink(e){var t;const{defVal:n,ariaName:a,name:s}=e;if(n!==(null===(t=this.props.unsavedChanges)||void 0===t?void 0:t.value)&&!Object(b.e)(e)&&!this.props.loading)return Object(f.jsx)("span",null,Object(f.jsx)(u.EuiLink,{"aria-label":g.i18n.translate("advancedSettings.field.resetToDefaultLinkAriaLabel",{defaultMessage:"Reset {ariaName} to default",values:{ariaName:a}}),onClick:this.resetField,"data-test-subj":`advancedSetting-resetField-${s}`},Object(f.jsx)(h.FormattedMessage,{id:"advancedSettings.field.resetToDefaultLinkText",defaultMessage:"Reset to default"})),"   ")}renderChangeImageLink(e){var t;const n=null===(t=this.props.unsavedChanges)||void 0===t?void 0:t.changeImage,{type:a,value:s,ariaName:i,name:r}=e;if("image"===a&&s&&!n)return Object(f.jsx)("span",null,Object(f.jsx)(u.EuiLink,{"aria-label":g.i18n.translate("advancedSettings.field.changeImageLinkAriaLabel",{defaultMessage:"Change {ariaName}",values:{ariaName:i}}),onClick:this.changeImage,"data-test-subj":`advancedSetting-changeImage-${r}`},Object(f.jsx)(h.FormattedMessage,{id:"advancedSettings.field.changeImageLinkText",defaultMessage:"Change image"})))}render(){const{setting:e,unsavedChanges:t}=this.props,n=null==t?void 0:t.error,a=null==t?void 0:t.isInvalid,s=c()("mgtAdvancedSettings__field",{"mgtAdvancedSettings__field--unsaved":t,"mgtAdvancedSettings__field--invalid":a}),i=`${e.name}-group`,r=`${e.name}-unsaved`;return Object(f.jsx)(u.EuiDescribedFormGroup,{id:i,className:s,title:this.renderTitle(e),description:this.renderDescription(e),fullWidth:!0},Object(f.jsx)(u.EuiFormRow,{isInvalid:a,error:n,label:this.renderLabel(e),helpText:this.renderHelpText(e),className:"mgtAdvancedSettings__fieldRow",hasChildLabel:"boolean"!==e.type,fullWidth:!0},Object(f.jsx)(l.a.Fragment,null,this.renderField(e,t?`${i} ${r}`:void 0),t&&Object(f.jsx)(u.EuiScreenReaderOnly,null,Object(f.jsx)("p",{id:`${r}`},t.error?t.error:g.i18n.translate("advancedSettings.field.settingIsUnsaved",{defaultMessage:"Setting is currently not saved."}))))))}}},function(e,t,n){"use strict";const a=n(27),s=n(28),i=n(29);function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?a(e):encodeURIComponent(e):e}function l(e,t){return t.decode?s(e):e}function d(e){return Array.isArray(e)?e.sort():"object"==typeof e?d(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function g(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function h(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,a)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===a[e]&&(a[e]={}),a[e][t[1]]=n):a[e]=n};case"bracket":return(e,n,a)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==a[e]?a[e]=[].concat(a[e],n):a[e]=[n]:a[e]=n};case"comma":case"separator":return(t,n,a)=>{const s="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===n?n:l(n,e);a[t]=s};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),a=Object.create(null);if("string"!=typeof e)return a;if(!(e=e.trim().replace(/^[?#&]/,"")))return a;for(const s of e.split("&")){let[e,r]=i(t.decode?s.replace(/\+/g," "):s,"=");r=void 0===r?null:["comma","separator"].includes(t.arrayFormat)?r:l(r,t),n(l(e,t),r,a)}for(const e of Object.keys(a)){const n=a[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=g(n[e],t);else a[e]=g(n,t)}return!1===t.sort?a:(!0===t.sort?Object.keys(a).sort():Object.keys(a).sort(t.sort)).reduce(((e,t)=>{const n=a[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=d(n):e[t]=n,e}),Object.create(null))}t.extract=u,t.parse=h,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],a=function(e){switch(e.arrayFormat){case"index":return t=>(n,a)=>{const s=n.length;return void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?n:null===a?[...n,[o(t,e),"[",s,"]"].join("")]:[...n,[o(t,e),"[",o(s,e),"]=",o(a,e)].join("")]};case"bracket":return t=>(n,a)=>void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?n:null===a?[...n,[o(t,e),"[]"].join("")]:[...n,[o(t,e),"[]=",o(a,e)].join("")];case"comma":case"separator":return t=>(n,a)=>null==a||0===a.length?n:0===n.length?[[o(t,e),"=",o(a,e)].join("")]:[[n,o(a,e)].join(e.arrayFormatSeparator)];default:return t=>(n,a)=>void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?n:null===a?[...n,o(t,e)]:[...n,[o(t,e),"=",o(a,e)].join("")]}}(t),s={};for(const t of Object.keys(e))n(t)||(s[t]=e[t]);const i=Object.keys(s);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const s=e[n];return void 0===s?"":null===s?o(n,t):Array.isArray(s)?s.reduce(a(n),[]).join("&"):o(n,t)+"="+o(s,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,a]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:h(u(e),t)},t&&t.parseFragmentIdentifier&&a?{fragmentIdentifier:l(a,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const a=c(e.url).split("?")[0]||"",s=t.extract(e.url),i=t.parse(s,{sort:!1}),r=Object.assign(i,e.query);let l=t.stringify(r,n);l&&(l=`?${l}`);let d=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(d=`#${o(e.fragmentIdentifier,n)}`),`${a}${l}${d}`}},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,n){"use strict";var a="%[a-f0-9]{2}",s=new RegExp(a,"gi"),i=new RegExp("("+a+")+","gi");function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),a=e.slice(t);return Array.prototype.concat.call([],r(n),r(a))}function o(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(s),n=1;n<t.length;n++)t=(e=r(t,n).join("")).match(s);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var a=o(n[0]);a!==n[0]&&(t[n[0]]=a)}n=i.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),r=0;r<s.length;r++){var l=s[r];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(31);case"v8light":return n(33)}},function(e,t,n){var a=n(23),s=n(32);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);a(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){(t=n(24)(!1)).push([e.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{margin-left:-8px;padding-left:8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #f3d371}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #f86b63}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width:574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #f3d371;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}",""]),e.exports=t},function(e,t,n){var a=n(23),s=n(34);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);a(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){(t=n(24)(!1)).push([e.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{margin-left:-8px;padding-left:8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #fec514}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #bd271e}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width:574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #fec514;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t),n.d(t,"mountManagementSection",(function(){return _}));var a=n(4),s=n.n(a),i=n(20),r=n.n(i),o=n(21),l=n(0),d=n(9),c=n(16),u=n(19),g=n(2),h=n.n(g),p=n(26),m=n(1),f=n(3);const v=()=>Object(f.jsx)("div",null,Object(f.jsx)(m.EuiCallOut,{title:Object(f.jsx)(d.FormattedMessage,{id:"advancedSettings.callOutCautionTitle",defaultMessage:"Caution: You can break stuff here"}),color:"warning",iconType:"bolt"},Object(f.jsx)("p",null,Object(f.jsx)(d.FormattedMessage,{id:"advancedSettings.callOutCautionDescription",defaultMessage:"Be careful in here, these settings are for very advanced users only. Tweaks you make here can break large portions of Kibana. Some of these settings may be undocumented, unsupported or in technical preview. If a field has a default value, blanking the field will reset it to its default which may be unacceptable given other configuration directives. Deleting a custom setting will permanently remove it from Kibana's config."}))));var b=n(5),j=n(11),y=n(10),x=n(25);class form_Form extends a.PureComponent{constructor(...e){super(...e),h()(this,"state",{unsavedChanges:{},loading:!1}),h()(this,"getSettingByKey",(e=>Object.values(this.props.settings).flat().find((t=>t.name===e)))),h()(this,"getCountOfUnsavedChanges",(()=>Object.keys(this.state.unsavedChanges).length)),h()(this,"getCountOfHiddenUnsavedChanges",(()=>{const e=Object.values(this.props.visibleSettings).flat().map((e=>e.name));return Object.keys(this.state.unsavedChanges).filter((t=>!e.includes(t))).length})),h()(this,"areChangesInvalid",(()=>{const{unsavedChanges:e}=this.state;return Object.values(e).some((({isInvalid:e})=>e))})),h()(this,"handleChange",((e,t)=>{const n=this.getSettingByKey(e);if(!n)return;const{type:a,defVal:s,value:i}=n,r=Object(x.getEditableValue)(a,i,s);if(t.value===r)return this.clearChange(e);this.setState({unsavedChanges:{...this.state.unsavedChanges,[e]:t}})})),h()(this,"clearChange",(e=>{if(!this.state.unsavedChanges[e])return;const t={...this.state.unsavedChanges};delete t[e],this.setState({unsavedChanges:t})})),h()(this,"clearAllUnsaved",(()=>{this.setState({unsavedChanges:{}})})),h()(this,"saveAll",(async()=>{this.setLoading(!0);const{unsavedChanges:e}=this.state;if(Object(j.isEmpty)(e))return;const t={};let n=!1;Object.entries(e).forEach((([e,{value:a}])=>{const s=this.getSettingByKey(e);if(!s)return;const{defVal:i,type:r,requiresPageReload:o,metric:l}=s;let d=a,c=!1;switch(r){case"array":d=d.trim(),d=""===d?[]:d.split(",").map((e=>e.trim())),c=d.join(",")===i.join(",");break;case"json":const e=Array.isArray(JSON.parse(i||"{}"));d=d.trim(),d=d||(e?"[]":"{}");case"boolean":if(l&&this.props.trackUiMetric){const e=d?`${l.name}_on`:`${l.name}_off`;this.props.trackUiMetric(l.type,e)}default:c=d===i}o&&(n=!0),t[e]=c?null:d}));try{await this.props.save(t),this.clearAllUnsaved(),n&&this.renderPageReloadToast()}catch(e){this.props.toasts.addDanger(l.i18n.translate("advancedSettings.form.saveErrorMessage",{defaultMessage:"Unable to save"}))}this.setLoading(!1)})),h()(this,"renderPageReloadToast",(()=>{this.props.toasts.add({title:l.i18n.translate("advancedSettings.form.requiresPageReloadToastDescription",{defaultMessage:"One or more settings require you to reload the page to take effect."}),text:Object(c.toMountPoint)(Object(f.jsx)(c.KibanaThemeProvider,{theme$:this.props.theme},Object(f.jsx)(m.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(f.jsx)(m.EuiFlexItem,{grow:!1},Object(f.jsx)(m.EuiButton,{size:"s",onClick:()=>window.location.reload(),"data-test-subj":"windowReloadButton"},l.i18n.translate("advancedSettings.form.requiresPageReloadToastButtonLabel",{defaultMessage:"Reload page"})))))),color:"success"})})),h()(this,"renderCountOfUnsaved",(()=>{const e=this.getCountOfUnsavedChanges(),t=this.getCountOfHiddenUnsavedChanges();return Object(f.jsx)(m.EuiTextColor,{className:"mgtAdvancedSettingsForm__unsavedCountMessage",color:"ghost"},Object(f.jsx)(d.FormattedMessage,{id:"advancedSettings.form.countOfSettingsChanged",defaultMessage:"{unsavedCount} unsaved {unsavedCount, plural, one {setting} other {settings} }{hiddenCount, plural, =0 {} other {, # hidden} }",values:{unsavedCount:e,hiddenCount:t}}))})),h()(this,"renderBottomBar",(()=>{const e=this.areChangesInvalid();return Object(f.jsx)(m.EuiBottomBar,{"data-test-subj":"advancedSetting-bottomBar"},Object(f.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",responsive:!1,gutterSize:"s"},Object(f.jsx)(m.EuiFlexItem,{grow:!1,className:"mgtAdvancedSettingsForm__unsavedCount"},Object(f.jsx)("p",{id:"aria-describedby.countOfUnsavedSettings"},this.renderCountOfUnsaved())),Object(f.jsx)(m.EuiFlexItem,null),Object(f.jsx)(m.EuiFlexItem,{grow:!1},Object(f.jsx)(m.EuiButtonEmpty,{color:"ghost",size:"s",iconType:"cross",onClick:this.clearAllUnsaved,"aria-describedby":"aria-describedby.countOfUnsavedSettings","data-test-subj":"advancedSetting-cancelButton"},l.i18n.translate("advancedSettings.form.cancelButtonLabel",{defaultMessage:"Cancel changes"}))),Object(f.jsx)(m.EuiFlexItem,{grow:!1},Object(f.jsx)(m.EuiToolTip,{content:e&&l.i18n.translate("advancedSettings.form.saveButtonTooltipWithInvalidChanges",{defaultMessage:"Fix invalid settings before saving."})},Object(f.jsx)(m.EuiButton,{className:"mgtAdvancedSettingsForm__button",disabled:e,color:"success",fill:!0,size:"s",iconType:"check",onClick:this.saveAll,"aria-describedby":"aria-describedby.countOfUnsavedSettings",isLoading:this.state.loading,"data-test-subj":"advancedSetting-saveButton"},l.i18n.translate("advancedSettings.form.saveButtonLabel",{defaultMessage:"Save changes"}))))))}))}setLoading(e){this.setState({loading:e})}renderClearQueryLink(e,t){const{clearQuery:n}=this.props;return e!==t?Object(f.jsx)(m.EuiFlexItem,{grow:!1},Object(f.jsx)("em",null,Object(f.jsx)(d.FormattedMessage,{id:"advancedSettings.form.searchResultText",defaultMessage:"Search terms are hiding {settingsCount} settings {clearSearch}",values:{settingsCount:e-t,clearSearch:Object(f.jsx)(m.EuiLink,{onClick:n},Object(f.jsx)("em",null,Object(f.jsx)(d.FormattedMessage,{id:"advancedSettings.form.clearSearchResultText",defaultMessage:"(clear search)"})))}}))):null}renderCategory(e,t,n){return Object(f.jsx)(a.Fragment,{key:e},Object(f.jsx)(m.EuiSplitPanel.Outer,{hasBorder:!0},Object(f.jsx)(m.EuiSplitPanel.Inner,{color:"subdued"},Object(f.jsx)(m.EuiFlexGroup,{alignItems:"baseline"},Object(f.jsx)(m.EuiFlexItem,{grow:!1},Object(f.jsx)(m.EuiTitle,null,Object(f.jsx)("h2",null,Object(y.d)(e)))),this.renderClearQueryLink(n,t.length))),Object(f.jsx)(m.EuiSplitPanel.Inner,null,t.map((e=>Object(f.jsx)(x.Field,{key:e.name,setting:e,handleChange:this.handleChange,unsavedChanges:this.state.unsavedChanges[e.name],clearChange:this.clearChange,enableSaving:this.props.enableSaving,docLinks:this.props.docLinks,toasts:this.props.toasts}))))),Object(f.jsx)(m.EuiSpacer,{size:"l"}))}maybeRenderNoSettings(e){return this.props.showNoResultsMessage?Object(f.jsx)(m.EuiCallOut,{color:"danger",title:Object(f.jsx)(s.a.Fragment,null,Object(f.jsx)(d.FormattedMessage,{id:"advancedSettings.form.noSearchResultText",defaultMessage:"No settings found for {queryText} {clearSearch}",values:{clearSearch:Object(f.jsx)(m.EuiLink,{onClick:e},Object(f.jsx)(d.FormattedMessage,{id:"advancedSettings.form.clearNoSearchResultText",defaultMessage:"(clear search)"})),queryText:Object(f.jsx)("strong",null,this.props.queryText)}}))}):null}render(){const{unsavedChanges:e}=this.state,{visibleSettings:t,categories:n,categoryCounts:s,clearQuery:i}=this.props,r=[],o=!Object(j.isEmpty)(e);return o?document.body.classList.add("kbnBody--mgtAdvancedSettingsHasBottomBar"):document.body.classList.remove("kbnBody--mgtAdvancedSettingsHasBottomBar"),n.forEach((e=>{t[e]&&t[e].length&&r.push(e)})),Object(f.jsx)(a.Fragment,null,Object(f.jsx)("div",null,r.length?r.map((e=>this.renderCategory(e,t[e],s[e]))):this.maybeRenderNoSettings(i)),o&&this.renderBottomBar())}}class advanced_settings_voice_announcement_AdvancedSettingsVoiceAnnouncement extends a.Component{constructor(...e){super(...e),h()(this,"shouldComponentUpdate",(e=>e.queryText!==this.props.queryText))}render(){const e=Object.values(this.props.settings).map((e=>e.map((e=>e.ariaName)))),t=[...e];return Object(f.jsx)(m.EuiScreenReaderOnly,null,Object(f.jsx)("div",{role:"region","aria-live":"polite","aria-label":l.i18n.translate("advancedSettings.voiceAnnouncement.ariaLabel",{defaultMessage:"Advanced Settings results info"})},Object(f.jsx)(m.EuiDelayRender,null,this.props.queryText?Object(f.jsx)(d.FormattedMessage,{id:"advancedSettings.voiceAnnouncement.searchResultScreenReaderMessage",defaultMessage:"You searched for {query}. There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{query:this.props.queryText,sectionLenght:e.length,optionLenght:t.length}}):Object(f.jsx)(d.FormattedMessage,{id:"advancedSettings.voiceAnnouncement.noSearchResultScreenReaderMessage",defaultMessage:"There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{sectionLenght:e.length,optionLenght:t.length}}))))}}const S="query";class advanced_settings_AdvancedSettings extends a.Component{constructor(e){super(e),h()(this,"settings",void 0),h()(this,"groupedSettings",void 0),h()(this,"categoryCounts",void 0),h()(this,"categories",[]),h()(this,"uiSettingsSubscription",void 0),h()(this,"unregister",void 0),h()(this,"initSettings",this.mapConfig),h()(this,"initGroupedSettings",this.mapSettings),h()(this,"onQueryChange",(({query:e})=>{this.setUrlQuery(e.text)})),h()(this,"clearQuery",(()=>{this.setUrlQuery("")})),h()(this,"onFooterQueryMatchChange",(e=>{this.setState({footerQueryMatched:e})})),h()(this,"saveConfig",(async e=>{const t=Object.entries(e).map((([e,t])=>this.props.uiSettings.set(e,t)));return Promise.all(t)})),this.settings=this.initSettings(this.props.uiSettings),this.groupedSettings=this.initGroupedSettings(this.settings),this.categories=this.initCategories(this.groupedSettings),this.categoryCounts=this.initCategoryCounts(this.groupedSettings),this.state=this.getQueryState(void 0,!0),this.unregister=this.props.history.listen((({search:e})=>{this.setState(this.getQueryState(e))}))}init(e){this.settings=this.initSettings(e),this.groupedSettings=this.initGroupedSettings(this.settings),this.categories=this.initCategories(this.groupedSettings),this.categoryCounts=this.initCategoryCounts(this.groupedSettings)}initCategories(e){return Object.keys(e).sort(((e,t)=>e===y.a?-1:t===y.a||e>t?1:e===t?0:-1))}initCategoryCounts(e){return Object.keys(e).reduce(((t,n)=>(t[n]=e[n].length,t)),{})}componentDidMount(){this.uiSettingsSubscription=this.props.uiSettings.getUpdate$().subscribe((()=>{const{query:e}=this.state;this.init(this.props.uiSettings),this.setState({filteredSettings:this.mapSettings(m.Query.execute(e,this.settings))})}));const{hash:e}=window.location;""!==e&&setTimeout((()=>{var t;const n=e.replace("#",""),a=document.getElementById(n);let s=0;const i=null===(t=document.getElementById("globalHeaderBars"))||void 0===t?void 0:t.getElementsByClassName("euiHeader");i&&Array.from(i).forEach((e=>{s+=e.offsetHeight})),a&&(a.scrollIntoView(),window.scrollBy(0,-s))}),0)}componentWillUnmount(){var e,t,n;null===(e=this.uiSettingsSubscription)||void 0===e||null===(t=e.unsubscribe)||void 0===t||t.call(e),null===(n=this.unregister)||void 0===n||n.call(this)}getQuery(e,t=!1){try{const n=t?Object(y.c)(e):null!=e?e:"";return m.Query.parse(n)}catch({message:e}){return this.props.toasts.addWarning({title:b.c,text:e}),m.Query.parse("")}}getQueryText(e){var t,n;return null!==(n=(null!==(t=Object(p.parse)(null!=e?e:window.location.search))&&void 0!==t?t:{}).query)&&void 0!==n?n:""}getQueryState(e,t=!1){const n=this.getQueryText(e),a=this.getQuery(n,t),s=this.mapSettings(m.Query.execute(a,this.settings));return{query:a,filteredSettings:s,footerQueryMatched:Object.keys(s).length>0}}setUrlQuery(e=""){const t=u.url.addQueryParam(window.location.search,S,e);this.props.history.push({pathname:"",search:t})}mapConfig(e){const t=e.getAll();return Object.entries(t).map((([t,n])=>Object(y.f)({def:n,name:t,value:n.userValue,isCustom:e.isCustom(t),isOverridden:e.isOverridden(t)}))).filter((e=>!e.readOnly)).filter((e=>!e.isCustom)).sort(y.b)}mapSettings(e){return e.reduce(((e,t)=>{const n=t.category[0];return(e[n]=e[n]||[]).push(t),e}),{})}render(){const{filteredSettings:e,query:t,footerQueryMatched:n}=this.state,a=this.props.componentRegistry,s=a.get(a.componentType.PAGE_TITLE_COMPONENT),i=a.get(a.componentType.PAGE_SUBTITLE_COMPONENT),r=a.get(a.componentType.PAGE_FOOTER_COMPONENT);return Object(f.jsx)("div",null,Object(f.jsx)(m.EuiFlexGroup,{gutterSize:"none"},Object(f.jsx)(m.EuiFlexItem,null,Object(f.jsx)(s,null)),Object(f.jsx)(m.EuiFlexItem,null,Object(f.jsx)(b.b,{query:t,categories:this.categories,onQueryChange:this.onQueryChange}))),Object(f.jsx)(i,null),Object(f.jsx)(m.EuiSpacer,{size:"m"}),Object(f.jsx)(v,null),Object(f.jsx)(m.EuiSpacer,{size:"m"}),Object(f.jsx)(advanced_settings_voice_announcement_AdvancedSettingsVoiceAnnouncement,{queryText:t.text,settings:e}),Object(f.jsx)(c.KibanaContextProvider,{services:{uiSettings:this.props.uiSettings}},Object(f.jsx)(form_Form,{settings:this.groupedSettings,visibleSettings:e,categories:this.categories,categoryCounts:this.categoryCounts,clearQuery:this.clearQuery,save:this.saveConfig,showNoResultsMessage:!n,enableSaving:this.props.enableSaving,docLinks:this.props.docLinks,toasts:this.props.toasts,trackUiMetric:this.props.trackUiMetric,queryText:t.text,theme:this.props.theme})),Object(f.jsx)(r,{toasts:this.props.toasts,query:t,onQueryMatchChange:this.onFooterQueryMatchChange,enableSaving:this.props.enableSaving}))}}n(30);const O=l.i18n.translate("advancedSettings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"}),C=[{text:O}],F={text:l.i18n.translate("advancedSettings.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:l.i18n.translate("advancedSettings.badge.readOnly.tooltip",{defaultMessage:"Unable to save advanced settings"}),iconType:"glasses"},E=({match:e,location:t})=>({pathname:"/",search:u.url.addQueryParam(t.search,S,null==e?void 0:e.params.query)});async function _(e,t,n,a){t.setBreadcrumbs(C);const[{uiSettings:s,notifications:i,docLinks:l,application:u,chrome:g}]=await e(),h=u.capabilities.advancedSettings.save,p=null==a?void 0:a.reportUiCounter.bind(a,"advanced_settings");return h||g.setBadge(F),g.docTitle.change(O),r.a.render(Object(f.jsx)(c.KibanaThemeProvider,{theme$:t.theme$},Object(f.jsx)(d.I18nProvider,null,Object(f.jsx)(o.Router,{history:t.history},Object(f.jsx)(o.Switch,null,Object(f.jsx)(o.Route,{path:"/:query"},(e=>Object(f.jsx)(o.Redirect,{to:E(e)}))),Object(f.jsx)(o.Route,{path:"/"},Object(f.jsx)(advanced_settings_AdvancedSettings,{history:t.history,enableSaving:h,toasts:i.toasts,docLinks:l.links,uiSettings:s,theme:t.theme$,componentRegistry:n,trackUiMetric:p})))))),t.element),()=>{g.docTitle.reset(),r.a.unmountComponentAtNode(t.element)}}}])]);