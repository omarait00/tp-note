(window.visTypeXy_bundle_jsonpfunction=window.visTypeXy_bundle_jsonpfunction||[]).push([[4],{34:function(e,i,l){"use strict";l.r(i),l.d(i,"getConfiguration",(function(){return c}));var n=l(2),s=l(30),t=l(0),o=l(13);function a(e){const i=null==e?void 0:e.type;return i===t.e.SquareRoot?n.ScaleType.Sqrt:i}function d(e){return"date"===(null==e?void 0:e.dataType)?n.ScaleType.Time:"number"!==(null==e?void 0:e.dataType)?n.ScaleType.Ordinal:n.ScaleType.Linear}function u(e,i=!1){var l;return-(75===(null==e?void 0:e.labels.rotate)?45:null!==(l=null==e?void 0:e.labels.rotate)&&void 0!==l?l:i?0:90)}function r(e,i){const l=i.some((i=>i.valueAxis===e.id&&("histogram"===i.type||"area"===i.type)));return{mode:Object(o.c)(e.scale),lowerBound:null!==e.scale.min?l&&e.scale.min&&e.scale.min>0?0:e.scale.min:void 0,upperBound:null!==e.scale.max?l&&e.scale.max&&e.scale.max<0?0:e.scale.max:void 0,enforce:!0}}function v(e,i,l){const t=l.uiState.get("vis.colors",{});return e.map((e=>{var a,u,r;const v=e.columns.find((e=>e.isBucketed&&!e.isSplit)),p=null===(a=e.columns.find((e=>e.isBucketed&&e.isSplit)))||void 0===a?void 0:a.columnId,c=i.find((i=>i.data.id===e.seriesIdsMap[e.metrics[0]])),y="date_histogram"===(null==v?void 0:v.operationType)||"range"===(null==v?void 0:v.operationType)&&"histogram"===v.params.type,f=(null!==(u=l.params.valueAxes)&&void 0!==u?u:l.type.visConfig.defaults.valueAxes).find((e=>e.id===(null==c?void 0:c.valueAxis))),g="percentage"===(null==f?void 0:f.scale.mode),m=(null==f?void 0:f.position)!==n.Position.Left&&(null==f?void 0:f.position)!==n.Position.Right,x=function(e,i,l,n){let t="histogram"===e?s.SeriesTypes.BAR:null!=e?e:s.SeriesTypes.AREA;return l&&t===s.SeriesTypes.BAR&&(t+="_horizontal"),n&&(t=(t!==s.SeriesTypes.LINE?t:s.SeriesTypes.AREA)+"_percentage"),(n||"stacked"===i)&&(t=(t!==s.SeriesTypes.LINE?t:s.SeriesTypes.AREA)+"_stacked"),t}(null==c?void 0:c.type,null==c?void 0:c.mode,m,g);return{layerId:e.layerId,accessors:e.metrics,layerType:"data",seriesType:x,xAccessor:null==v?void 0:v.columnId,simpleView:!1,splitAccessor:p,palette:null!==(r=l.params.palette)&&void 0!==r?r:l.type.visConfig.defaults.palette,yConfig:e.metrics.map((n=>{var s,a;const d=i.find((i=>i.data.id===e.seriesIdsMap[n])),u=(null!==(s=l.params.valueAxes)&&void 0!==s?s:l.type.visConfig.defaults.valueAxes).find((e=>e.id===(null==d?void 0:d.valueAxis)));return{forAccessor:n,axisMode:Object(o.d)(null!==(a=null==u?void 0:u.position)&&void 0!==a?a:"left"),color:!p&&null!=d&&d.data.label?t[null==d?void 0:d.data.label]:void 0}})),xScaleType:d(v),isHistogram:y,collapseFn:e.collapseFn}}))}function p(e,i){var l,n;const s=null!==(l=i.params.thresholdLine)&&void 0!==l?l:i.type.visConfig.defaults.thresholdLine,a=(null!==(n=i.params.valueAxes)&&void 0!==n?n:i.type.visConfig.defaults.valueAxes)[0];return e.map((e=>({layerType:"referenceLine",layerId:e.layerId,accessors:e.metrics,yConfig:e.metrics.map((e=>{var i;return{forAccessor:e,axisMode:Object(o.d)(null!==(i=null==a?void 0:a.position)&&void 0!==i?i:"left"),color:s.color,lineWidth:null!==s.width?s.width:void 0,lineStyle:s.style===t.f.DotDashed||s.style===t.f.Full?"solid":s.style}}))})))}const c=(e,i,l)=>{var s,d,c,y,f,g,m,x,h,L,T,S,A,b,C,w,R,O,I,k,B,_,j,E,M,F,P,V,z;const q=null===(s=l.uiState.get("vis.legendOpen"))||void 0===s||s,D=(null!==(d=l.params.valueAxes)&&void 0!==d?d:l.type.visConfig.defaults.valueAxes).find((e=>Object(o.d)(e.position)===n.Position.Right)),N=(null!==(c=l.params.valueAxes)&&void 0!==c?c:l.type.visConfig.defaults.valueAxes).find((e=>Object(o.d)(e.position)===n.Position.Left)),X=(null!==(y=l.params.categoryAxes)&&void 0!==y?y:l.type.visConfig.defaults.categoryAxes)[0],H={x:X.show,yLeft:null===(f=null==N?void 0:N.show)||void 0===f||f,yRight:null===(g=null==D?void 0:D.show)||void 0===g||g},U=e[0].columns.find((e=>e.isBucketed&&!e.isSplit)),W="date_histogram"===(null==U?void 0:U.operationType),G=null!==(m=l.params.fittingFunction)&&void 0!==m?m:l.type.visConfig.defaults.fittingFunction;return{layers:[...v(e.filter((e=>!e.isReferenceLineLayer)),i,l),...p(e.filter((e=>e.isReferenceLineLayer)),l)],legend:{isVisible:q&&(null!==(x=l.params.addLegend)&&void 0!==x?x:l.type.visConfig.defaults.addLegend),position:null!==(h=l.params.legendPosition)&&void 0!==h?h:l.type.visConfig.defaults.legendPosition,legendSize:null!==(L=l.params.legendSize)&&void 0!==L?L:l.type.visConfig.defaults.legendSize,shouldTruncate:null!==(T=l.params.truncateLegend)&&void 0!==T?T:l.type.visConfig.defaults.truncateLegend,maxLines:null!==(S=l.params.maxLegendLines)&&void 0!==S?S:l.type.visConfig.defaults.maxLegendLines,showSingleSeries:!0},fittingFunction:G?G[0].toUpperCase()+G.slice(1):void 0,fillOpacity:null!==(A=l.params.fillOpacity)&&void 0!==A?A:l.type.visConfig.defaults.fillOpacity,gridlinesVisibilitySettings:{x:null!==(b=l.params.grid.categoryLines)&&void 0!==b?b:null===(C=l.type.visConfig.defaults.grid)||void 0===C?void 0:C.categoryLines,yLeft:(null!==(w=l.params.grid.valueAxis)&&void 0!==w?w:null===(R=l.type.visConfig.defaults.grid)||void 0===R?void 0:R.valueAxis)===(null==N?void 0:N.id),yRight:(null!==(O=l.params.grid.valueAxis)&&void 0!==O?O:null===(I=l.type.visConfig.defaults.grid)||void 0===I?void 0:I.valueAxis)===(null==D?void 0:D.id)},axisTitlesVisibilitySettings:H,tickLabelsVisibilitySettings:{x:H.x&&(null===(k=X.labels.show)||void 0===k||k),yLeft:H.yLeft&&(null===(B=null==N?void 0:N.labels.show)||void 0===B||B),yRight:H.yRight&&(null===(_=null==D?void 0:D.labels.show)||void 0===_||_)},labelsOrientation:{x:u(X,W),yLeft:u(N),yRight:u(D)},yLeftScale:null!==(j=a(null==N?void 0:N.scale))&&void 0!==j?j:n.ScaleType.Linear,yRightScale:null!==(E=a(null==D?void 0:D.scale))&&void 0!==E?E:n.ScaleType.Linear,yLeftExtent:null!=N&&N.scale?r(N,i):void 0,yRightExtent:null!=D&&D.scale?r(D,i):void 0,yTitle:null==N?void 0:N.title.text,yRightTitle:null==D?void 0:D.title.text,xTitle:X.title.text,valueLabels:(null!==(M=l.params.labels.show)&&void 0!==M?M:null===(F=l.type.visConfig.defaults.labels)||void 0===F?void 0:F.show)?"show":"hide",valuesInLegend:Boolean(null!==(P=l.params.labels.show)&&void 0!==P?P:null===(V=l.type.visConfig.defaults.labels)||void 0===V?void 0:V.show),showCurrentTimeMarker:W?Boolean(null!==(z=l.params.addTimeMarker)&&void 0!==z?z:l.type.visConfig.defaults.addTimeMarker):void 0,curveType:Object(o.a)(i[0].interpolate===t.d.StepAfter?t.d.Linear:i[0].interpolate)}}}}]);