!function(e){function t(t){for(var i,s,n=t[0],r=t[1],o=0,u=[];o<n.length;o++)s=n[o],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&u.push(a[s][0]),a[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);for(l&&l(t);u.length;)u.shift()()}var i={},a={0:0};function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(e){var t=[],i=a[e];if(0!==i)if(i)t.push(i[2]);else{var n=new Promise((function(t,s){i=a[e]=[t,s]}));t.push(i[2]=n);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.src=function(e){return s.p+"visTypeXy.chunk."+e+".js"}(e);var l=new Error;r=function(t){o.onerror=o.onload=null,clearTimeout(u);var i=a[e];if(0!==i){if(i){var s=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+s+": "+n+")",l.name="ChunkLoadError",l.type=s,l.request=n,i[1](l)}a[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:o})}),12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var n=window.visTypeXy_bundle_jsonpfunction=window.visTypeXy_bundle_jsonpfunction||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var o=0;o<n.length;o++)t(n[o]);var l=r;s(s.s=22)}([function(e,t,i){"use strict";let a,s,n,r,o,l;i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return s})),i.d(t,"b",(function(){return n})),i.d(t,"e",(function(){return r})),i.d(t,"a",(function(){return o})),i.d(t,"f",(function(){return l})),function(e){e.Normal="normal",e.Stacked="stacked"}(a||(a={})),function(e){e.Linear="linear",e.Cardinal="cardinal",e.StepAfter="step-after"}(s||(s={})),function(e){e.Category="category",e.Value="value"}(n||(n={})),function(e){e.Linear="linear",e.Log="log",e.SquareRoot="square root"}(r||(r={})),function(e){e.Normal="normal",e.Percentage="percentage",e.Wiggle="wiggle",e.Silhouette="silhouette"}(o||(o={})),function(e){e.Full="full",e.Dashed="dashed",e.DotDashed="dot-dashed"}(l||(l={}))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t,i){i.r(t);var a=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,i){"use strict";let a;i.r(t),i.d(t,"ChartType",(function(){return a})),function(e){e.Line="line",e.Area="area",e.Histogram="histogram"}(a||(a={}))},function(e,t,i){i.r(t);var a=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,i){i.r(t);var a=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,i){i.r(t);var a=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibServices},function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"f",(function(){return n})),i.d(t,"b",(function(){return r})),i.d(t,"e",(function(){return o})),i.d(t,"a",(function(){return l})),i.d(t,"d",(function(){return u}));var a=i(15);const[s,n]=Object(a.createGetterSetter)("xy core.uiSettings"),[r,o]=Object(a.createGetterSetter)("xy charts.palette"),[l,u]=Object(a.createGetterSetter)("dataViews")},function(e,t,i){e.exports=i(24)(3)},function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"d",(function(){return r})),i.d(t,"b",(function(){return o}));var a=i(2);const s=e=>{switch(e){case"cardinal":return"CURVE_MONOTONE_X";case"step-after":return"CURVE_STEP_AFTER";default:return"LINEAR"}},n=(e,t)=>e.defaultYExtents?"dataBounds":e.setYExtents||t?"custom":"full",r=e=>e===a.Position.Top?a.Position.Right:e===a.Position.Bottom?a.Position.Left:e,o=e=>{switch(e){case"full":return"solid";case"dashed":case"dot-dashed":return e}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var a=i(0),s=i(4);const n=(e,t,i,n)=>{const r=null==e?void 0:e.bySchemaName(i);return null==r?void 0:r.map((e=>{const i=t.find((t=>t.data.id===e.id)),r=e.makeLabel();if(i)return{...i,data:{...i.data,label:r}};{const i=((e,t,i,n)=>{const r={id:e,label:t};return{show:!0,mode:a.c.Normal,type:s.ChartType.Line,drawLinesBetweenPoints:!0,showCircles:!0,circlesRadius:1,interpolate:a.d.Linear,lineWidth:2,valueAxis:i,...n,data:r}})(e.id,r,n,t[t.length-1]);return i}}))}},function(e,t,i){i.r(t);var a=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var a=i(12),s=i.n(a),n=i(9),r=i(8);function o({component:e,...t}){const[i,a]=Object(n.useState)({}),o=Object.values(i).every((e=>e.isValid)),{setValidity:l}=t,u=Object(n.useCallback)(((e,t)=>{a((i=>({...i,[e]:{isValid:t}})))}),[]);return Object(n.useEffect)((()=>{l(o)}),[o,l]),Object(r.jsx)(e,s()({},t,{setMultipleValidity:u}))}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var a=i(1),s=i(2);const n=()=>[{text:a.i18n.translate("visTypeXy.legendPositions.topText",{defaultMessage:"Top"}),value:s.Position.Top},{text:a.i18n.translate("visTypeXy.legendPositions.leftText",{defaultMessage:"Left"}),value:s.Position.Left},{text:a.i18n.translate("visTypeXy.legendPositions.rightText",{defaultMessage:"Right"}),value:s.Position.Right},{text:a.i18n.translate("visTypeXy.legendPositions.bottomText",{defaultMessage:"Bottom"}),value:s.Position.Bottom}]},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var a=i(1),s=i(0);const n=()=>[{text:a.i18n.translate("visTypeXy.scaleTypes.linearText",{defaultMessage:"Linear"}),value:s.e.Linear},{text:a.i18n.translate("visTypeXy.scaleTypes.logText",{defaultMessage:"Log"}),value:s.e.Log},{text:a.i18n.translate("visTypeXy.scaleTypes.squareRootText",{defaultMessage:"Square root"}),value:s.e.SquareRoot}]},function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i(9);var a=i(1),s=i(16),n=i(8);function r({disabled:e,value:t=null,setValue:i}){return Object(n.jsx)(s.EuiFormRow,{label:a.i18n.translate("visTypeXy.controls.truncateLabel",{defaultMessage:"Truncate"}),fullWidth:!0,display:"rowCompressed"},Object(n.jsx)(s.EuiFieldNumber,{"data-test-subj":"xyLabelTruncateInput",disabled:e,value:null===t?"":t,onChange:e=>i("truncate",""===e.target.value?null:parseFloat(e.target.value)),fullWidth:!0,compressed:!0}))}},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t,i){i(23),__kbnBundles__.define("plugin/visTypeXy/public",i,25),__kbnBundles__.define("plugin/visTypeXy/common/index",i,4)},function(e,t,i){i.p=window.__kbnPublicPath__.visTypeXy},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,i){"use strict";i.r(t),i.d(t,"ScaleType",(function(){return d.e})),i.d(t,"AxisType",(function(){return d.b})),i.d(t,"TruncateLabelsOption",(function(){return W.a})),i.d(t,"getPositions",(function(){return K.a})),i.d(t,"getScaleTypes",(function(){return J.a})),i.d(t,"ChartType",(function(){return g.ChartType})),i.d(t,"plugin",(function(){return $}));var a=i(11),s=i(1),n=i(10),r=i(2),o=i(3),l=i(6),u=i(7),d=i(0),c=i(21),p=i.n(c),m=i(5),g=i(4),f=i(14);const y=e=>{const t=String(e);return t.includes("[")||t.includes(".")?t.substring(0,-1!==t.indexOf("[")?t.indexOf("["):t.indexOf(".")):t};var b=i(13);const h=(e,t)=>{const i=Object(m.buildExpressionFunction)("legendConfig",{isVisible:e.addLegend,maxLines:e.maxLegendLines,position:e.legendPosition,shouldTruncate:e.truncateLegend,showSingleSeries:!0,legendSize:t});return Object(m.buildExpression)([i])},v=(e,t)=>"number"==typeof e.accessor?`col-${e.accessor}-${t}`:e.accessor,_=e=>{const t=Object(m.buildExpressionFunction)("custom"===e.name?"palette":"system_palette","custom"===e.name?{...e.params}:{name:e.name});return Object(m.buildExpression)([t])},x=(e,t)=>{var i;return{truncate:e.labels.truncate,labelsOrientation:-(null!==(i=e.labels.rotate)&&void 0!==i?i:t?0:90),showOverlappingLabels:!1===e.labels.filter,showDuplicates:!1===e.labels.filter,labelColor:e.labels.color,showLabels:e.labels.show}},T=(e,t)=>{const i=Object(m.buildExpressionFunction)("axisExtentConfig",{mode:Object(b.c)(e,t),lowerBound:(null==t?void 0:t.min)||e.min,upperBound:(null==t?void 0:t.max)||e.max,enforce:!0});return Object(m.buildExpression)([i])};function O(e,t,i=!1,a=!1){if(i)return r.ScaleType.Time;if(a)return r.ScaleType.Linear;if(!t)return r.ScaleType.Ordinal;const s=null==e?void 0:e.type;return s===d.e.SquareRoot?r.ScaleType.Sqrt:s}const L=(e,t,i,a)=>{const s=Object(m.buildExpressionFunction)("xAxisConfig",{hide:!e.show,position:(n=e.position,n===r.Position.Left?r.Position.Bottom:n===r.Position.Right?r.Position.Top:n),title:e.title.text,extent:T(e.scale,i),showGridLines:t,...x(e,a)});var n;return Object(m.buildExpression)([s])},w=(e,t)=>{const i=Object(m.buildExpressionFunction)("referenceLine",{value:e.value,color:e.color,lineWidth:e.width,lineStyle:Object(b.b)(e.style),axisId:t});return Object(m.buildExpression)([i])},P=e=>{const t=Object(m.buildExpressionFunction)("visdimension",{accessor:e.accessor});return e.format&&(t.addArgument("format",e.format.id),t.addArgument("formatParams",JSON.stringify(e.format.params))),Object(m.buildExpression)([t])},S=e=>e.date,A=async(e,t)=>{var i,a,n,u,c,A,E,C,j,M,B,k,R,V,F,X,I,N;const D=Object(l.getVisSchemas)(e,t),G={x:D.segment?D.segment[0]:null,y:D.metric,z:D.radius,width:D.width,series:D.group,splitRow:D.split_row,splitColumn:D.split_column},z=null!==(i=null===(a=e.data.aggs)||void 0===a?void 0:a.getResponseAggs().filter((({enabled:e})=>e)))&&void 0!==i?i:[],H=null===(n=e.type.schemas)||void 0===n?void 0:n.metrics[0].name,U=e.params.valueAxes[0].id,Y=Object(f.a)(e.data.aggs,e.params.seriesParams,H,U),q=null!=Y?Y:e.params.seriesParams;let W=!1;if(G.x){const i=z[G.x.accessor];if(i.type.name===o.BUCKET_TYPES.DATE_HISTOGRAM){W=!0,G.x.params.date=!0;const{esUnit:e,esValue:t}=i.buckets.getInterval();G.x.params.intervalESUnit=e,G.x.params.intervalESValue=t,G.x.params.interval=p.a.duration(t,e).asMilliseconds(),G.x.params.format=i.buckets.getScaledDateFormat();const a=i.buckets.getBounds();a&&null!=a&&a.min&&null!=a&&a.max&&(G.x.params.bounds={min:a.min.valueOf(),max:a.max.valueOf()})}else if(i.type.name===o.BUCKET_TYPES.HISTOGRAM){W=!0;const a=i.type.paramByName("interval"),s={params:{}};await a.modifyAggConfigOnSearchRequestStart(i,e.data.searchSource,{abortSignal:t.abortSignal}),a.write(i,s),G.x.params.interval=s.params.interval}}(G.y||[]).forEach((t=>{const i=z[t.accessor],a=y(i.id),s=(e.params.seriesParams||[]).find((e=>e.data.id===a));if(s){const i=(e.params.valueAxes||[]).find((e=>e.id===s.valueAxis));"percentage"===(null==i?void 0:i.scale.mode)&&(t.format={id:"percent"})}}));let K=e.params.legendSize;e.params.legendPosition!==r.Position.Top&&e.params.legendPosition!==r.Position.Bottom||(K=l.LegendSize.AUTO);const J=(G.y||[]).reduce(((e,t)=>{const i=z[t.accessor],a=y(i.id),s={...t,accessor:v(t,i.id)};return e[a]?e[a].push(s):e[a]=[s],e}),{}),$=e.params.categoryAxes[0].scale;let Q;G.x||(Q=Object(m.buildExpressionFunction)("mapColumn",{id:"all",expression:"_all",name:s.i18n.translate("visTypeXy.allDocsTitle",{defaultMessage:"All docs"})}));const Z=q.filter((e=>e.show&&J[e.data.id])),ee=Object(m.buildExpressionFunction)("layeredXyVis",{layers:[...Z.map((t=>((e,t,i,a,s,n,l,u,c)=>{var p,f,y,h,x,T;const L=i.some((t=>e.valueAxis===t.id&&t.position!==r.Position.Left&&t.position!==r.Position.Right)),w=e.type===g.ChartType.Histogram,S=Object(m.buildExpressionFunction)("extendedDataLayer",{seriesType:w?"bar":e.type,isHistogram:t,isHorizontal:L,isStacked:e.mode===d.c.Stacked,lineWidth:w?void 0:e.lineWidth,showPoints:w?void 0:e.showCircles,pointsRadius:w?void 0:null!==(p=e.circlesRadius)&&void 0!==p?p:3,showLines:w?void 0:e.drawLinesBetweenPoints,curveType:Object(b.a)(e.interpolate),decorations:a.map((t=>((e,t,i)=>{const a=Object(m.buildExpressionFunction)("dataDecorationConfig",{forAccessor:v(t,i),axisId:e});return Object(m.buildExpression)([a])})(e.valueAxis,t,e.data.id))),accessors:a.map((e=>P(e))),xAccessor:s?P(s):"all",xScaleType:O(c,"number"===(null==s||null===(f=s.format)||void 0===f?void 0:f.id)||"number"===(null==s||null===(y=s.format)||void 0===y||null===(h=y.params)||void 0===h?void 0:h.id)&&(null==s||null===(x=s.format)||void 0===x?void 0:x.id)!==o.BUCKET_TYPES.RANGE&&(null==s||null===(T=s.format)||void 0===T?void 0:T.id)!==o.BUCKET_TYPES.TERMS,"date"in((null==s?void 0:s.params)||{}),"interval"in((null==s?void 0:s.params)||{})),splitAccessors:n?n.map(P):void 0,markSizeAccessor:l&&!w?P(l):void 0,palette:u?_(u):void 0,columnToLabel:JSON.stringify([...a,s,...null!=n?n:[]].reduce(((t,i)=>(i&&(t[v(i,e.data.id)]=i.label),t)),{}))});return Object(m.buildExpression)([S])})(t,W,e.params.valueAxes,J[t.data.id],G.x,G.series,G.z?G.z[0]:void 0,e.params.palette,$))),...e.params.thresholdLine.show?[w(e.params.thresholdLine,e.params.valueAxes[0].id)]:[]],addTimeMarker:e.params.addTimeMarker&&(null===(u=G.x)||void 0===u||null===(c=u.params)||void 0===c?void 0:c.date),orderBucketsBySum:e.params.orderBucketsBySum,fittingFunction:e.params.fittingFunction?e.params.fittingFunction.charAt(0).toUpperCase()+e.params.fittingFunction.slice(1):void 0,detailedTooltip:e.params.detailedTooltip,fillOpacity:e.params.fillOpacity,showTooltip:e.params.addTooltip,markSizeRatio:G.z&&Z.some((e=>e.type===g.ChartType.Area||e.type===g.ChartType.Line))?.6*e.params.radiusRatio:void 0,legend:h(e.params,K),xAxisConfig:L(e.params.categoryAxes[0],e.params.grid.categoryLines,null!==(A=G.x)&&void 0!==A&&A.params&&S(null===(E=G.x)||void 0===E?void 0:E.params)?null===(C=G.x)||void 0===C?void 0:C.params.bounds:void 0,null!==(j=G.x)&&void 0!==j&&j.params&&S(null===(M=G.x)||void 0===M?void 0:M.params)?null===(B=G.x)||void 0===B?void 0:B.params.date:void 0),yAxisConfigs:e.params.valueAxes.filter((e=>Z.some((t=>t.valueAxis===e.id)))).map((t=>((e,t)=>{const i=Object(m.buildExpressionFunction)("yAxisConfig",{id:e.id,hide:!e.show,position:Object(b.d)(e.position),title:e.title.text,extent:T(e.scale),boundsMargin:e.scale.boundsMargin,scaleType:O(e.scale,!0),mode:e.scale.mode,showGridLines:t,...x(e)});return Object(m.buildExpression)([i])})(t,e.params.grid.valueAxis===t.id))),minTimeBarInterval:null!==(k=G.x)&&void 0!==k&&k.params&&S(null===(R=G.x)||void 0===R?void 0:R.params)&&null!==(V=G.x)&&void 0!==V&&V.params.date&&Z.some((e=>e.type===g.ChartType.Histogram))?(null===(F=G.x)||void 0===F?void 0:F.params.intervalESValue)+(null===(X=G.x)||void 0===X?void 0:X.params.intervalESUnit):void 0,splitColumnAccessor:null===(I=G.splitColumn)||void 0===I?void 0:I.map(P),splitRowAccessor:null===(N=G.splitRow)||void 0===N?void 0:N.map(P),valueLabels:e.params.labels.show?"show":"hide",valuesInLegend:e.params.labels.show,singleTable:!0});return Object(m.buildExpression)(Q?[Q,ee]:[ee]).toAst()};var E=i(12),C=i.n(E),j=i(9),M=i(8);const B=Object(j.lazy)((()=>i.e(3).then(i.bind(null,37)))),k=Object(j.lazy)((()=>i.e(2).then(i.bind(null,36)))),R=e=>Object(M.jsx)(B,e),V=e=>Object(M.jsx)(k,e);var F=i(17);const X=[{name:"advanced",title:s.i18n.translate("visTypeXy.area.tabs.metricsAxesTitle",{defaultMessage:"Metrics & axes"}),editor:e=>Object(M.jsx)(F.a,C()({},e,{component:V}))},{name:"options",title:s.i18n.translate("visTypeXy.area.tabs.panelSettingsTitle",{defaultMessage:"Panel settings"}),editor:e=>Object(M.jsx)(F.a,C()({},e,{component:R}))}],I=e=>{var t,i,a,s;let n=null==e||null===(t=e.seriesParams)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.type;return"histogram"===n&&["left","right"].includes(null==e||null===(a=e.categoryAxes)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.position)&&(n="horizontal_bar"),n},N={name:"area",title:s.i18n.translate("visTypeXy.area.areaTitle",{defaultMessage:"Area"}),icon:"visArea",description:s.i18n.translate("visTypeXy.area.areaDescription",{defaultMessage:"Emphasize the data between an axis and a line."}),fetchDatatable:!0,toExpressionAst:A,getSupportedTriggers:()=>[l.VIS_EVENT_TO_TRIGGER.filter,l.VIS_EVENT_TO_TRIGGER.brush],updateVisTypeOnParamsChange:I,visConfig:{defaults:{type:g.ChartType.Area,grid:{categoryLines:!1},categoryAxes:[{id:"CategoryAxis-1",type:d.b.Category,position:r.Position.Bottom,show:!0,scale:{type:d.e.Linear},labels:{show:!0,filter:!0,truncate:100},title:{},style:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:d.b.Value,position:r.Position.Left,show:!0,scale:{type:d.e.Linear,mode:d.a.Normal},labels:{show:!0,rotate:u.LabelRotation.Horizontal,filter:!0,truncate:100},title:{text:""},style:{}}],seriesParams:[{show:!0,type:g.ChartType.Area,mode:d.c.Stacked,data:{label:u.defaultCountLabel,id:"1"},drawLinesBetweenPoints:!0,lineWidth:2,showCircles:!0,circlesRadius:1,interpolate:d.d.Linear,valueAxis:"ValueAxis-1"}],addTooltip:!0,detailedTooltip:!0,palette:{type:"palette",name:"default"},addLegend:!0,legendPosition:r.Position.Right,fittingFunction:r.Fit.Linear,times:[],addTimeMarker:!1,truncateLegend:!0,maxLegendLines:1,radiusRatio:9,thresholdLine:{show:!1,value:10,width:1,style:d.f.Full,color:Object(n.euiPaletteColorBlind)()[9]},labels:{}}},editorConfig:{enableDataViewChange:!0,optionTabs:X,schemas:[{group:o.AggGroupNames.Metrics,name:"metric",title:s.i18n.translate("visTypeXy.area.metricsTitle",{defaultMessage:"Y-axis"}),aggFilter:["!geo_centroid","!geo_bounds","!filtered_metric","!single_percentile","!single_percentile_rank"],min:1,defaults:[{schema:"metric",type:"count"}]},{group:o.AggGroupNames.Metrics,name:"radius",title:s.i18n.translate("visTypeXy.area.radiusTitle",{defaultMessage:"Dot size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:o.AggGroupNames.Buckets,name:"segment",title:s.i18n.translate("visTypeXy.area.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"group",title:s.i18n.translate("visTypeXy.area.groupTitle",{defaultMessage:"Split series"}),min:0,max:3,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"split",title:s.i18n.translate("visTypeXy.area.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]}]},requiresSearch:!0},D={name:"line",title:s.i18n.translate("visTypeXy.line.lineTitle",{defaultMessage:"Line"}),icon:"visLine",description:s.i18n.translate("visTypeXy.line.lineDescription",{defaultMessage:"Display data as a series of points."}),fetchDatatable:!0,toExpressionAst:A,getSupportedTriggers:()=>[l.VIS_EVENT_TO_TRIGGER.filter,l.VIS_EVENT_TO_TRIGGER.brush],updateVisTypeOnParamsChange:I,visConfig:{defaults:{type:g.ChartType.Line,grid:{categoryLines:!1},categoryAxes:[{id:"CategoryAxis-1",type:d.b.Category,position:r.Position.Bottom,show:!0,scale:{type:d.e.Linear},labels:{show:!0,filter:!0,truncate:100},title:{},style:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:d.b.Value,position:r.Position.Left,show:!0,scale:{type:d.e.Linear,mode:d.a.Normal},labels:{show:!0,rotate:u.LabelRotation.Horizontal,filter:!0,truncate:100},title:{text:""},style:{}}],seriesParams:[{show:!0,type:g.ChartType.Line,mode:d.c.Normal,data:{label:u.defaultCountLabel,id:"1"},valueAxis:"ValueAxis-1",drawLinesBetweenPoints:!0,lineWidth:2,interpolate:d.d.Linear,showCircles:!0,circlesRadius:1}],addTooltip:!0,detailedTooltip:!0,palette:{type:"palette",name:"default"},addLegend:!0,legendPosition:r.Position.Right,fittingFunction:r.Fit.Linear,times:[],addTimeMarker:!1,truncateLegend:!0,maxLegendLines:1,labels:{},radiusRatio:9,thresholdLine:{show:!1,value:10,width:1,style:d.f.Full,color:Object(n.euiPaletteColorBlind)()[9]}}},editorConfig:{enableDataViewChange:!0,optionTabs:X,schemas:[{group:o.AggGroupNames.Metrics,name:"metric",title:s.i18n.translate("visTypeXy.line.metricTitle",{defaultMessage:"Y-axis"}),min:1,aggFilter:["!geo_centroid","!geo_bounds","!filtered_metric","!single_percentile","!single_percentile_rank"],defaults:[{schema:"metric",type:"count"}]},{group:o.AggGroupNames.Metrics,name:"radius",title:s.i18n.translate("visTypeXy.line.radiusTitle",{defaultMessage:"Dot size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits"]},{group:o.AggGroupNames.Buckets,name:"segment",title:s.i18n.translate("visTypeXy.line.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"group",title:s.i18n.translate("visTypeXy.line.groupTitle",{defaultMessage:"Split series"}),min:0,max:3,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"split",title:s.i18n.translate("visTypeXy.line.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]}]},requiresSearch:!0},G={name:"histogram",title:s.i18n.translate("visTypeXy.histogram.histogramTitle",{defaultMessage:"Vertical bar"}),icon:"visBarVertical",description:s.i18n.translate("visTypeXy.histogram.histogramDescription",{defaultMessage:"Present data in vertical bars on an axis."}),fetchDatatable:!0,toExpressionAst:A,getSupportedTriggers:()=>[l.VIS_EVENT_TO_TRIGGER.filter,l.VIS_EVENT_TO_TRIGGER.brush],updateVisTypeOnParamsChange:I,visConfig:{defaults:{type:g.ChartType.Histogram,grid:{categoryLines:!1},categoryAxes:[{id:"CategoryAxis-1",type:d.b.Category,position:r.Position.Bottom,show:!0,scale:{type:d.e.Linear},labels:{show:!0,filter:!0,truncate:100},title:{},style:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:d.b.Value,position:r.Position.Left,show:!0,scale:{type:d.e.Linear,mode:d.a.Normal},labels:{show:!0,rotate:u.LabelRotation.Horizontal,filter:!0,truncate:100},title:{text:""},style:{}}],seriesParams:[{show:!0,type:g.ChartType.Histogram,mode:d.c.Stacked,data:{label:u.defaultCountLabel,id:"1"},interpolate:d.d.Linear,valueAxis:"ValueAxis-1",drawLinesBetweenPoints:!0,lineWidth:2,showCircles:!0,circlesRadius:1}],radiusRatio:0,addTooltip:!0,detailedTooltip:!0,palette:{type:"palette",name:"default"},addLegend:!0,legendPosition:r.Position.Right,times:[],addTimeMarker:!1,truncateLegend:!0,maxLegendLines:1,labels:{show:!1},thresholdLine:{show:!1,value:10,width:1,style:d.f.Full,color:Object(n.euiPaletteColorBlind)()[9]}}},editorConfig:{enableDataViewChange:!0,optionTabs:X,schemas:[{group:o.AggGroupNames.Metrics,name:"metric",title:s.i18n.translate("visTypeXy.histogram.metricTitle",{defaultMessage:"Y-axis"}),min:1,aggFilter:["!geo_centroid","!geo_bounds","!filtered_metric","!single_percentile","!single_percentile_rank"],defaults:[{schema:"metric",type:"count"}]},{group:o.AggGroupNames.Metrics,name:"radius",title:s.i18n.translate("visTypeXy.histogram.radiusTitle",{defaultMessage:"Dot size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:o.AggGroupNames.Buckets,name:"segment",title:s.i18n.translate("visTypeXy.histogram.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"group",title:s.i18n.translate("visTypeXy.histogram.groupTitle",{defaultMessage:"Split series"}),min:0,max:3,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"split",title:s.i18n.translate("visTypeXy.histogram.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]}]},requiresSearch:!0},z={name:"horizontal_bar",title:s.i18n.translate("visTypeXy.horizontalBar.horizontalBarTitle",{defaultMessage:"Horizontal bar"}),icon:"visBarHorizontal",description:s.i18n.translate("visTypeXy.horizontalBar.horizontalBarDescription",{defaultMessage:"Present data in horizontal bars on an axis."}),fetchDatatable:!0,toExpressionAst:A,getSupportedTriggers:()=>[l.VIS_EVENT_TO_TRIGGER.filter,l.VIS_EVENT_TO_TRIGGER.brush],updateVisTypeOnParamsChange:I,visConfig:{defaults:{type:g.ChartType.Histogram,grid:{categoryLines:!1},categoryAxes:[{id:"CategoryAxis-1",type:d.b.Category,position:r.Position.Left,show:!0,scale:{type:d.e.Linear},labels:{show:!0,rotate:u.LabelRotation.Horizontal,filter:!0,truncate:200},title:{},style:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:d.b.Value,position:r.Position.Bottom,show:!0,scale:{type:d.e.Linear,mode:d.a.Normal},labels:{show:!0,rotate:u.LabelRotation.Angled,filter:!0,truncate:100},title:{text:""},style:{}}],seriesParams:[{show:!0,type:g.ChartType.Histogram,mode:d.c.Normal,data:{label:u.defaultCountLabel,id:"1"},interpolate:d.d.Linear,valueAxis:"ValueAxis-1",drawLinesBetweenPoints:!0,lineWidth:2,showCircles:!0,circlesRadius:1}],addTooltip:!0,detailedTooltip:!0,palette:{type:"palette",name:"default"},addLegend:!0,legendPosition:r.Position.Right,times:[],addTimeMarker:!1,truncateLegend:!0,maxLegendLines:1,labels:{},radiusRatio:0,thresholdLine:{show:!1,value:10,width:1,style:d.f.Full,color:Object(n.euiPaletteColorBlind)()[9]}}},editorConfig:{enableDataViewChange:!0,optionTabs:X,schemas:[{group:o.AggGroupNames.Metrics,name:"metric",title:s.i18n.translate("visTypeXy.horizontalBar.metricTitle",{defaultMessage:"Y-axis"}),min:1,aggFilter:["!geo_centroid","!geo_bounds","!filtered_metric","!single_percentile","!single_percentile_rank"],defaults:[{schema:"metric",type:"count"}]},{group:o.AggGroupNames.Metrics,name:"radius",title:s.i18n.translate("visTypeXy.horizontalBar.radiusTitle",{defaultMessage:"Dot size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:o.AggGroupNames.Buckets,name:"segment",title:s.i18n.translate("visTypeXy.horizontalBar.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"group",title:s.i18n.translate("visTypeXy.horizontalBar.groupTitle",{defaultMessage:"Split series"}),min:0,max:3,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"split",title:s.i18n.translate("visTypeXy.horizontalBar.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]}]},requiresSearch:!0},H=[o.METRIC_TYPES.AVG_BUCKET,o.METRIC_TYPES.SUM_BUCKET,o.METRIC_TYPES.MAX_BUCKET,o.METRIC_TYPES.MIN_BUCKET],U=e=>{if((e=>!!e.meta)(e)){const{meta:t,...i}=e;return i}return e},Y=async(e,t)=>{var s,n;if(!t)return null;const r=Object(a.a)(),o=await Object(l.getDataViewByIndexPatternId)(null===(s=e.data.indexPattern)||void 0===s?void 0:s.id,r);if(!o)return null;const u=Object(l.getVisSchemas)(e,{timefilter:t,timeRange:t.getAbsoluteTime()});if(u.group&&u.group.length>1)return null;const d=e.params.valueAxes[0].id,c=Object(f.a)(e.data.aggs,e.params.seriesParams,"metric",d),p=(null!=c?c:e.params.seriesParams).filter((e=>e.show&&u.metric.some((t=>{var i;return(null===(i=t.aggId)||void 0===i?void 0:i.split(".")[0])===e.data.id})))),[{getColumnsFromVis:m,createStaticValueColumn:g},{getConfiguration:y}]=await Promise.all([l.convertToLensModule,i.e(4).then(i.bind(null,34))]),b=m(e,t,o,{buckets:["segment"],splits:["group"],unsupported:["split_row","split_column","radius"]},{dropEmptyRowsInDateHistogram:!0,supportMixedSiblingPipelineAggs:!0,isPercentageMode:!1},p.reduce(((e,t)=>{const i=e.find((({type:e,mode:i})=>e===t.type&&i===t.mode));return i&&u.metric.some((e=>{var i;return(null===(i=e.aggId)||void 0===i?void 0:i.split(".")[0])===t.data.id&&!H.includes(e.aggType)}))?i.metrics.push(t.data.id):e.push({metrics:[t.data.id],type:t.type,mode:t.mode}),e}),[]).map((({metrics:e})=>({metrics:e}))));if(null===b)return null;if(b.length>1&&b.some((e=>e.columns.some((e=>e.isSplit&&"orderBy"in e.params&&"column"===e.params.orderBy.type)))))return null;if(null!==(n=u.group)&&void 0!==n&&n.length&&b.some((e=>Object.keys(e.buckets.customBuckets).length)))return null;const h=e.params.valueAxes.filter((e=>p.some((t=>t.valueAxis===e.id)))),v=h.map((e=>e.position)),_=new Set(v);if(h.length>1&&_.size!==v.length)return null;const x=o.id,T=await i.e(1).then(i.t.bind(null,35,7)),O=b.map((e=>{const t=T.default(),i={};p.forEach((t=>{const a=e.columns.find((e=>!e.isBucketed&&e.meta.aggId.split(".")[0]===t.data.id));a&&(i[a.columnId]=t.data.id)}));const a=e.bucketCollapseFn?Object.keys(e.bucketCollapseFn).find((t=>e.bucketCollapseFn[t].includes(e.buckets.customBuckets[e.metrics[0]]))):void 0;return{indexPatternId:x,layerId:t,columns:e.columns.map(U),metrics:e.metrics,columnOrder:[],seriesIdsMap:i,collapseFn:a,isReferenceLineLayer:!1}}));if(e.params.thresholdLine.show){const t=g(e.params.thresholdLine.value||0);O.push({indexPatternId:x,layerId:T.default(),columns:[t],columnOrder:[],metrics:[t.columnId],isReferenceLineLayer:!0,collapseFn:void 0,seriesIdsMap:{}})}return{type:"lnsXY",layers:O.map((({seriesIdsMap:e,collapseFn:t,isReferenceLineLayer:i,...a})=>a)),configuration:y(O,p,e),indexPatternIds:[x]}},q=[N,D,G,z].map((e=>({...e,navigateToLens:async(e,t)=>e?Y(e,t):null,getExpressionVariables:async(e,t)=>({canNavigateToLens:Boolean(null!=e&&e.params?await Y(e,t):null)})})));class plugin_VisTypeXyPlugin{setup(e,{visualizations:t,charts:i}){return Object(a.f)(e.uiSettings),Object(a.e)(i.palettes),q.forEach(t.createBaseVisualization),{}}start(e,{dataViews:t}){return Object(a.d)(t),{}}}var W=i(20),K=i(18),J=i(19);function $(){return new plugin_VisTypeXyPlugin}},function(e,t,i){i.r(t);var a=__kbnBundles__.get("plugin/visDefaultEditor/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,i){i.r(t);var a=__kbnBundles__.get("plugin/charts/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,i){i.r(t);var a=__kbnBundles__.get("plugin/visualizations/common/convert_to_lens");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))}]);