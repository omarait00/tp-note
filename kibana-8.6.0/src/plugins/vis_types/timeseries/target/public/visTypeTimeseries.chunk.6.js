(window.visTypeTimeseries_bundle_jsonpfunction=window.visTypeTimeseries_bundle_jsonpfunction||[]).push([[6],{188:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(189);case"v8light":return i(191)}},189:function(e,t,i){var s=i(46),r=i(190);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);s(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},190:function(e,t,i){(t=i(47)(!1)).push([e.i,".tvbVisMetric{display:flex;flex:1 0 auto;flex-direction:column;font-size:100%;position:relative}.tvbVisMetric__resize{bottom:0;display:flex;left:0;overflow:hidden;position:absolute;right:0;top:0}.tvbVisMetric__label--primary{color:#fff9;font-size:.5em;line-height:1em;margin-bottom:.25em;text-align:center}.tvbVisMetric--reversed .tvbVisMetric__label--primary{color:#1d1e2499}.tvbVisMetric__value--primary{color:#ffffffb3;font-size:1em;font-weight:700;line-height:1em;text-align:center}.tvbVisMetric--reversed .tvbVisMetric__value--primary{color:#1d1e24cc}.tvbVisMetric__secondary{align-items:center;display:flex;justify-content:center;margin-top:.05em}.tvbVisMetric__label--secondary{color:#fff9;font-size:.35em;line-height:1em;margin-right:.3em}.tvbVisMetric--reversed .tvbVisMetric__label--secondary{color:#1d1e2499}.tvbVisMetric__value--secondary{color:#ffffffb3;font-size:.35em;line-height:1em}.tvbVisMetric--reversed .tvbVisMetric__value--secondary{color:#1d1e24cc}.tvbVisMetric__inner{padding:4px 8px 8px;position:absolute}.tvbVisMetric__label--additional{color:#ffffffb3;font-size:.25em;line-height:1.2;max-width:100%;overflow:hidden!important;padding:2px 0 0;text-align:center;text-overflow:ellipsis!important;white-space:nowrap!important}.tvbVisMetric--reversed .tvbVisMetric__label--additional{color:#1d1e24cc}",""]),e.exports=t},191:function(e,t,i){var s=i(46),r=i(192);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);s(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},192:function(e,t,i){(t=i(47)(!1)).push([e.i,".tvbVisMetric{display:flex;flex:1 0 auto;flex-direction:column;font-size:100%;position:relative}.tvbVisMetric__resize{bottom:0;display:flex;left:0;overflow:hidden;position:absolute;right:0;top:0}.tvbVisMetric__label--primary{color:#0009;font-size:.5em;line-height:1em;margin-bottom:.25em;text-align:center}.tvbVisMetric--reversed .tvbVisMetric__label--primary{color:#fff9}.tvbVisMetric__value--primary{color:#000000b3;font-size:1em;font-weight:700;line-height:1em;text-align:center}.tvbVisMetric--reversed .tvbVisMetric__value--primary{color:#fffc}.tvbVisMetric__secondary{align-items:center;display:flex;justify-content:center;margin-top:.05em}.tvbVisMetric__label--secondary{color:#0009;font-size:.35em;line-height:1em;margin-right:.3em}.tvbVisMetric--reversed .tvbVisMetric__label--secondary{color:#fff9}.tvbVisMetric__value--secondary{color:#000000b3;font-size:.35em;line-height:1em}.tvbVisMetric--reversed .tvbVisMetric__value--secondary{color:#fffc}.tvbVisMetric__inner{padding:4px 8px 8px;position:absolute}.tvbVisMetric__label--additional{color:#000000b3;font-size:.25em;line-height:1.2;max-width:100%;overflow:hidden!important;padding:2px 0 0;text-align:center;text-overflow:ellipsis!important;white-space:nowrap!important}.tvbVisMetric--reversed .tvbVisMetric__label--additional{color:#fffc}",""]),e.exports=t},231:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return j}));var s=i(51),r=i.n(s),n=i(5),l=i(97),o=i(67),a=i(63),c=i(68),d=i(9),b=i.n(d),u=i(15),p=i(59),f=i(79),v=i(70),m=(i(188),i(2));class metric_Metric extends n.Component{constructor(e){super(e),this.state={scale:1,left:0,top:0,translateX:1,translateY:1,resized:!1},this.handleResize=this.handleResize.bind(this),this.checkResizeThrottled=b.a.throttle((()=>{const e=Object(f.a)(this.inner,this.resize,this.state);e&&this.state&&!b.a.isEqual(e,this.state)&&this.handleResize()}),200)}componentWillUnmount(){clearTimeout(this.timeout)}componentDidMount(){this.handleResize()}handleResize(){this.setState({...Object(f.a)(this.inner,this.resize,this.state),resized:!0})}render(){const{metric:e,secondary:t,initialRender:i}=this.props,{scale:s,translateX:r,translateY:n,resized:l}=this.state,o=(e&&(e.tickFormatter||e.formatter)||(e=>e))(Object(p.b)(null==e?void 0:e.data)),a={container:{},inner:{top:`${this.state.top||0}px`,left:`${this.state.left||0}px`,transform:`matrix(${s}, 0, 0, ${s}, ${r}, ${n})`},primary_value:{},secondary_value:{}};let c,d,b;if(this.props.backgroundColor&&(a.container.backgroundColor=this.props.backgroundColor),e&&e.color&&(a.primary_value.color=e.color),e&&e.label&&(c=Object(m.jsx)("div",{className:"tvbVisMetric__label--primary"},e.label)),t){const e=(t.formatter||(e=>e))(Object(p.b)(t.data));let i;t.color&&(a.secondary_value.color=t.color),t.label&&(i=Object(m.jsx)("div",{className:"tvbVisMetric__label--secondary"},t.label)),d=Object(m.jsx)("div",{className:"tvbVisMetric__secondary"},i,Object(m.jsx)("div",{style:a.secondary_value,className:"tvbVisMetric__value--secondary"},Object(m.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})))}this.props.additionalLabel&&(b=Object(m.jsx)("div",{className:"tvbVisMetric__label--additional"},this.props.additionalLabel));let f="tvbVisMetric";return this.props.backgroundColor||(f+=" tvbVisMetric--noBackground"),this.props.reversed&&(f+=" tvbVisMetric--reversed"),Object(m.jsx)(u.EuiResizeObserver,{onResize:this.checkResizeThrottled},(e=>Object(m.jsx)(v.a,{initialRender:i,postponeExecution:!l},Object(m.jsx)("div",{className:f,ref:e,style:a.container},Object(m.jsx)("div",{ref:e=>this.resize=e,className:"tvbVisMetric__resize"},Object(m.jsx)("div",{ref:e=>this.inner=e,className:"tvbVisMetric__inner",style:a.inner},Object(m.jsx)("div",{className:"tvbVisMetric__primary"},c,Object(m.jsx)("div",{style:a.primary_value,"data-test-subj":"tsvbMetricValue",className:"tvbVisMetric__value--primary"},Object(m.jsx)("span",{dangerouslySetInnerHTML:{__html:o}}))),d,b))))))}}var h=i(1),_=i(71),g=i(66);const j=Object(l.a)((function(e){const{backgroundColor:t,model:i,visData:s,fieldFormatMap:n,getConfig:l}=e,b=function(e){const{model:t,visData:i}=e,s=Object(d.get)(i,`${t.id}.series`,[]).filter((e=>!Object(d.isUndefined)(e)));let r,n;return t.background_color_rules&&t.background_color_rules.forEach((e=>{if(e.operator){var t;const i=Object(p.b)(null===(t=s[0])||void 0===t?void 0:t.data);Object(g.c)(e,i)&&Object(g.b)(e.operator)(i,e.value)&&(n=e.background_color,r=e.color)}})),{color:r,background:n}}(e),u=Object(d.get)(s,`${i.id}.series`,[]).filter((e=>e)).map(((e,t)=>{const s=i.series.find((t=>Object(d.includes)(e.id,t.id))),r={};return s&&(r.formatter=s.formatter===h.b.DEFAULT?Object(c.a)(Object(o.a)(s.metrics),n,"html",b.color):Object(a.a)(s.formatter,s.value_template,l)),0===t&&b.color&&(r.color=b.color),Object(d.assign)({},Object(d.pick)(e,["label","data"]),r)})),f=b.background||t,v={backgroundColor:f},j={metric:u[0],additionalLabel:e.additionalLabel,reversed:Object(_.b)(f)};return u[1]&&(j.secondary=u[1]),Object(m.jsx)("div",{className:"tvbVis",style:v},Object(m.jsx)(metric_Metric,r()({},j,{initialRender:e.initialRender})))}))},51:function(e,t,i){e.exports=i(23)(3)},64:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));const s=["#68BC00","#009CE0","#B0BC00","#16A5A5","#D33115","#E27300","#FCC400","#7B64FF","#FA28FF","#333333","#808080","#194D33","#0062B1","#808900","#0C797D","#9F0500","#C45100","#FB9E00","#653294","#AB149E","#0F1419","#666666"]},65:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i(50),r=i.n(s);const n=e=>{let t=new r.a(e);const i=t.hsl().object();return i.l-=100*t.luminosity(),t=r.a.hsl(i),t.rgb().toString()}},66:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a}));var s=i(9);let r;!function(e){e.Gte="gte",e.Lte="lte",e.Gt="gt",e.Lt="lt",e.Empty="empty"}(r||(r={}));const n={[r.Gte]:s.gte,[r.Lte]:s.lte,[r.Gt]:s.gt,[r.Lt]:s.lt,[r.Empty]:s.isNull},l={[r.Empty]:!0},o=e=>n[e],a=(e,t)=>Object(s.isNull)(e.value)&&l[e.operator]||!Object(s.isNull)(e.value)&&!Object(s.isNull)(t)},70:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i(5);const r=({initialRender:e,children:t,postponeExecution:i=!1})=>(Object(s.useLayoutEffect)((()=>{i||null==e||e()}),[e,i]),null!=t?t:null)},71:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return c}));var s=i(50),r=i.n(s),n=i(0);const l=e=>r()(e).luminosity()<.45,o=e=>{let t=e||Object(n.g)().get("theme:darkMode");return"string"==typeof e&&(t=l(e)),t},a=(e,t)=>{const i=o(t);return e&&"inherit"!==e?l(e):i},c=(e,t)=>a(e,t)!==o(t)},78:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i(1),r=i(65),n=i(64),l=i(56);const o=({seriesById:e,seriesName:t,seriesId:i,baseColor:o,seriesPalette:a,palettesRegistry:c,syncColors:d})=>{if(!a)return null;const b=a.name===s.d.RAINBOW||a.name===s.d.GRADIENT?"custom":a.name,u=a.name===s.d.GRADIENT?{...a.params,colors:[o,Object(r.a)(o)],gradient:!0}:a.name===s.d.RAINBOW?{...a.params,colors:n.a}:a.params;return null==c?void 0:c.get(b||"default").getCategoricalColor([{name:Object(l.b)(t),rankAtDepth:e.findIndex((({id:e})=>e===i)),totalSeriesAtDepth:e.length}],{maxDepth:1,totalSeries:e.length,behindText:!1,syncColors:d},u)}},79:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i(6);function r(e,t){return[Math.floor(e.clientWidth*t),Math.floor(e.clientHeight*t)]}function n(e,t,i){const n=Object(s.findDOMNode)(e),l=Object(s.findDOMNode)(t);let o=i.scale;o=l.clientWidth-l.clientHeight<0?l.clientWidth/n.clientWidth:l.clientHeight/n.clientHeight;let[a,c]=r(n,o);a>l.clientWidth&&(o=l.clientWidth/n.clientWidth),c>l.clientHeight&&(o=l.clientHeight/n.clientHeight),[a,c]=r(n,o);const d=(a-n.clientWidth)/2,b=(c-n.clientHeight)/2;return{scale:o,top:Math.floor((l.clientHeight-c)/2),left:Math.floor((l.clientWidth-a)/2),translateY:b,translateX:d}}},90:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(91);case"v8light":return i(93)}},91:function(e,t,i){var s=i(46),r=i(92);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);s(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},92:function(e,t,i){(t=i(47)(!1)).push([e.i,".tvbSplitVis{align-items:stretch;display:flex;flex-wrap:wrap;justify-content:space-around;width:100%}.tvbSplitVis__split{display:flex;flex:1 0 25%;min-width:192px}.tvbSplitVis__split>.tvbVis{min-height:153.6px}.tvbSplitVis--one{flex:1}.tvbSplitVis--one .tvbSplitVis__split{min-width:0}.tvbSplitVis--one .tvbSplitVis__split>.tvbVis{min-height:0}",""]),e.exports=t},93:function(e,t,i){var s=i(46),r=i(94);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);s(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},94:function(e,t,i){(t=i(47)(!1)).push([e.i,".tvbSplitVis{align-items:stretch;display:flex;flex-wrap:wrap;justify-content:space-around;width:100%}.tvbSplitVis__split{display:flex;flex:1 0 25%;min-width:192px}.tvbSplitVis__split>.tvbVis{min-height:153.6px}.tvbSplitVis--one{flex:1}.tvbSplitVis--one .tvbSplitVis__split{min-width:0}.tvbSplitVis--one .tvbSplitVis__split>.tvbVis{min-height:0}",""]),e.exports=t},97:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var s=i(5),r=i(34),n=i.n(r),l=i(9),o=i(56),a=i(78),c=i(8),d=(i(90),i(2));function b(e){function t(t){const{model:i,visData:r,syncColors:b,palettesService:u,fieldFormatMap:p}=t,f=Object(s.useCallback)(((e,t,s)=>{const n={...i.series[0].palette,name:"kibana"===i.series[0].split_color_mode?"kibana_palette":i.series[0].split_color_mode||i.series[0].palette.name},l={seriesById:r[i.id].series,seriesName:e,seriesId:t,baseColor:s,seriesPalette:n,palettesRegistry:u,syncColors:b,fieldFormatMap:p};return Object(a.a)(l)||null}),[p,i.id,i.series,u,b,r]);if(!i||!r||!r[i.id])return Object(d.jsx)(e,t);if(r[i.id].series.every((e=>1===e.id.split(c.c).length)))return Object(d.jsx)(e,t);const v=r[i.id].series.reduce(((e,t)=>{const[s,r]=t.id.split(c.c),n=i.series.find((e=>e.id===s));if(!n)return e;const l=t.splitByLabel;e[r]||(e[r]={series:[],label:t.label.toString()});const o=/{{\s*key\s*}}/.test(n.label),a=t.color||n.color,d="terms"===i.series[0].split_mode?f(l,t.id,a):a;return e[r].series.push({...t,id:s,color:d,label:n.label&&!o?n.label:l}),e}),{}),m=Object(l.first)(r[i.id].series.filter((e=>{const t=i.series.find((t=>t.id===e.id));return!!t&&["everything","filter"].includes(t.split_mode)}))),h=m?Object(l.findIndex)(i.series,(e=>e.id===m.id)):null,_=Object.keys(v).map(((s,r,n)=>{const l=v[s],{series:a,label:c}=l,b=c,u=null!=h&&h>0?[...a,m]:[m,...a],p={[i.id]:{id:i.id,series:u||a}};return Object(d.jsx)("div",{key:s,className:"tvbSplitVis__split"},Object(d.jsx)(e,{model:i,visData:p,onBrush:t.onBrush,onFilterClick:t.onFilterClick,additionalLabel:Object(o.b)(b),backgroundColor:t.backgroundColor,getConfig:t.getConfig,fieldFormatMap:t.fieldFormatMap,initialRender:n.length-1===r?t.initialRender:void 0}))})),g=1===r[i.id].series.length;return Object(d.jsx)("div",{className:n()("tvbSplitVis",{"tvbSplitVis--one":g})},_)}var i;return t.displayName=`SplitVisComponent(${i=e,i.displayName||i.name||"Component"})`,t}}}]);