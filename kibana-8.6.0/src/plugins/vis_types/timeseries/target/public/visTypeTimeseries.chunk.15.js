(window.visTypeTimeseries_bundle_jsonpfunction=window.visTypeTimeseries_bundle_jsonpfunction||[]).push([[15],{223:function(e,t,r){"use strict";r.r(t),r.d(t,"convertToLens",(function(){return m}));var n=r(48),o=r.n(n),c=r(30),l=r(31),s=r(1),i=r(0),a=r(72),u=r(62),d=r(88),p=r(54),f=r(77);const g=()=>new Error("Invalid model"),m=async({params:e},t)=>{const r=Object(i.d)();try{const n=e.series.filter((e=>!e.hidden)).length,i=new Set,m=e.series.filter((({hidden:e})=>!e)).slice(0,2);let v=null;for(const t of m){const n=await Object(a.a)(e.index_pattern,e.time_field,Boolean(t.override_index_pattern),t.series_index_pattern,t.series_time_field,r);if(!n)throw g();const{indexPatternId:o,indexPattern:c}=n;i.add(o),v=c}if(i.size>1)throw g();const[h]=i.values(),b=[],y=[];for(const r of m){if(r.offset_time&&"invalid"===Object(c.parseTimeShift)(r.offset_time))throw g();if(!Object(p.i)(r.metrics,s.e.METRIC,r.time_range_mode))throw g();const o=Object(p.g)(e,r,t),l=Object(u.b)(r,v,n,{reducedTimeRange:o});if(null===l)throw g();const i=Object(u.a)(e,r,l,v,!1);if(null===i)throw g();b.push(...i),y.push(...l)}let j=b;if(2===m.length&&b.length){if(2!==b.length)throw g();if(j=Object(f.d)(b),1!==j.length)throw g()}const[O]=j,x={indexPatternId:h,layerId:o()(),columns:[...y,...O?[O]:[]],columnOrder:[]},w=Object(d.b)(e,x,O);if(!w)throw g();const _=Object.values(Object(f.a)({0:x}));return{type:"lnsMetric",layers:_,configuration:w,indexPatternIds:Object(l.getIndexPatternIds)(_)}}catch(e){return null}}},76:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(50),o=r.n(n),c=r(9);const l="lte",s=e=>{var t;return(e=>{var t;const r=e;return!!(null!==(t=r.background_color)&&void 0!==t?t:r.color)})(e)?null!==(t=e.background_color)&&void 0!==t?t:e.color:(e=>Boolean(e.gauge))(e)?e.gauge:e.text},i=e=>({name:"custom",params:{continuity:"all",maxSteps:5,name:"custom",progression:"fixed",rangeMax:1/0,rangeMin:-1/0,rangeType:"number",reverse:!1,...e},type:"palette"}),a=(e,t)=>{const r=e.filter((e=>(e=>{var t,r;const{background_color:n,color:o}=e,{gauge:c}=e,{text:l}=e;return Boolean(e.operator&&(null!==(t=null!==(r=null!=n?n:o)&&void 0!==r?r:c)&&void 0!==t?t:l)&&void 0!==e.value)})(e)));if(r.sort(((e,t)=>e.value-t.value)),!Object(c.uniqBy)(r,"operator").length)return;if(1===r.length)return r[0].operator===l?i((e=>{const t={color:o()(s(e)).hex(),stop:e.value};return{rangeMin:-1/0,rangeMax:e.value,colorStops:[t],stops:[t],steps:1,continuity:"below"}})(r[0])):"gte"===r[0].operator?i(((e,t)=>{const r={color:o()(s(e)).hex(),stop:e.value};return{colorStops:[...t?[{color:t,stop:-1/0}]:[],r],continuity:t?"all":"above",rangeMax:1/0,rangeMin:t?-1/0:r.stop,steps:2,stops:[...t?[{color:t,stop:r.stop}]:[],{color:r.color,stop:1/0}]}})(r[0],t)):void 0;const n=r.slice(0,-1),a=r[r.length-1],u=Object(c.uniqBy)(n,"operator");if(u.length>1||u[0].operator!==a.operator&&a.operator!==l)return;const[d]=u;if(d.operator!==l){if("lt"===d.operator){if(a.operator!==l)return;return i((e=>{const t=e[e.length-1],r=e.reduce(((e,t,r,n)=>{if(0===r)return[{color:o()(s(t)).hex(),stop:-1/0}];const c=s(t);return[...e,{color:o()(c).hex(),stop:n[r-1].value}]}),[]),n=r.reduce(((e,r,n,o)=>n===o.length-1?[...e,{color:r.color,stop:t.value}]:[...e,{color:r.color,stop:o[n+1].stop}]),[]);return{rangeMin:-1/0,rangeMax:t.value,colorStops:r,stops:n,steps:r.length+1,continuity:"below"}})(r))}return"gte"===d.operator?i(((e,t,r)=>{const n=e[e.length-1],c=s(n),i=r?[{stop:-1/0,color:r}]:[],a=e.reduce(((e,r,n,i)=>{const a=s(r);return n===i.length-1&&t===l?e:n===i.length-2&&t===l?[...e,{color:o()(c).hex(),stop:r.value}]:[...e,{color:o()(a).hex(),stop:r.value}]}),i),u=a.reduce(((e,r,o,c)=>o===c.length-1?[...e,{color:r.color,stop:t===l?n.value:r.stop+1}]:[...e,{color:r.color,stop:c[o+1].stop}]),[]),[d]=e;return{rangeMin:r?-1/0:d.value,rangeMax:t===l?n.value:1/0,colorStops:a,stops:u,steps:a.length,continuity:t===l?r?"below":"none":r?"all":"above"}})(r,a.operator,t)):void 0}}},77:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"b",(function(){return f}));var n=r(9),o=r(89),c=r.n(o),l=r(31),s=r(60),i=r(62);const a=e=>{const t={};return Object.entries(e).forEach((([e,r])=>{const n=r.columns.map(s.t);t[e]={...r,columns:n}})),t},u=e=>{const{columnId:t,...r}=e;if(e.operationType===l.Operations.TERMS){const{orderBy:t,orderAgg:n,...o}=e.params;let c=t;if("columnId"in t){const{columnId:e,...r}=t;c=r}let l=n;if(n){const{columnId:e,...t}=n;l=t}return{...r,params:{...o,orderBy:c,orderAgg:l}}}return r},d=e=>Object(n.uniqWith)(e,((e,t)=>{if(e.operationType!==t.operationType)return!1;const r=u(e),n=u(t);return c()(r,n)})),p=e=>{if(!e)return;const{metrics:t,seriesAgg:r}=Object(i.c)(e.metrics);return{metric:t[t.length-1],collapseFn:r}},f=(e,t)=>{if(e)return t.find((t=>"meta"in t&&t.meta.metricId===e.id))}},88:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return i}));var n=r(50),o=r.n(n),c=r(76),l=r(77);const s=(e,t,r)=>{var n,o;const[s,i]=e.series.filter((({hidden:e})=>!e)),a=Object(l.c)(s);if(!a||!a.metric)return null;const u=Object(l.c)(i),d=Object(l.b)(a.metric,t.columns),p=Object(l.b)(null==u?void 0:u.metric,t.columns);if(a.collapseFn&&null!=u&&u.collapseFn)return null;const f=Object(c.a)(null!==(n=e.background_color_rules)&&void 0!==n?n:[]);return null===f?null:{layerId:t.layerId,layerType:"data",metricAccessor:null==d?void 0:d.columnId,secondaryMetricAccessor:null==p?void 0:p.columnId,breakdownByAccessor:null==r?void 0:r.columnId,palette:f,collapseFn:null!==(o=a.collapseFn)&&void 0!==o?o:null==u?void 0:u.collapseFn}},i=(e,t,r,n)=>{var s;const i=e.series[0],a=Object(l.c)(i);if(!a||!a.metric)return null;const u=Object(l.b)(a.metric,t.columns),d=i.color?o()(i.color).hex():void 0,p=Object(c.a)(null!==(s=e.gauge_color_rules)&&void 0!==s?s:[],d);return null===p?null:{layerId:t.layerId,layerType:"data",metricAccessor:null==u?void 0:u.columnId,breakdownByAccessor:null==r?void 0:r.columnId,maxAccessor:n.columnId,palette:p,collapseFn:a.collapseFn,...p?{}:{color:d}}}},89:function(e,t,r){"use strict";var n=Array.isArray,o=Object.keys,c=Object.prototype.hasOwnProperty,l="undefined"!=typeof Element;function s(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,i,a,u=n(e),d=n(t);if(u&&d){if((i=e.length)!=t.length)return!1;for(r=i;0!=r--;)if(!s(e[r],t[r]))return!1;return!0}if(u!=d)return!1;var p=e instanceof Date,f=t instanceof Date;if(p!=f)return!1;if(p&&f)return e.getTime()==t.getTime();var g=e instanceof RegExp,m=t instanceof RegExp;if(g!=m)return!1;if(g&&m)return e.toString()==t.toString();var v=o(e);if((i=v.length)!==o(t).length)return!1;for(r=i;0!=r--;)if(!c.call(t,v[r]))return!1;if(l&&e instanceof Element&&t instanceof Element)return e===t;for(r=i;0!=r--;)if(!("_owner"===(a=v[r])&&e.$$typeof||s(e[a],t[a])))return!1;return!0}return e!=e&&t!=t}e.exports=function(e,t){try{return s(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}}}]);