(window.visTypeTable_bundle_jsonpfunction=window.visTypeTable_bundle_jsonpfunction||[]).push([[1],{28:function(e,t,o){"use strict";var n,a=function(){var e={};return function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}e[t]=o}return e[t]}}(),r=[];function i(e){for(var t=-1,o=0;o<r.length;o++)if(r[o].identifier===e){t=o;break}return t}function l(e,t){for(var o={},n=[],a=0;a<e.length;a++){var l=e[a],s=t.base?l[0]+t.base:l[0],c=o[s]||0,u="".concat(s," ").concat(c);o[s]=c+1;var d=i(u),b={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(r[d].references++,r[d].updater(b)):r.push({identifier:u,updater:p(b,t),references:1}),n.push(u)}return n}function s(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=o.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,o,n){var a=o?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,a);else{var r=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(r,i[t]):e.appendChild(r)}}function b(e,t,o){var n=o.css,a=o.media,r=o.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var v=null,f=0;function p(e,t){var o,n,a;if(t.singleton){var r=f++;o=v||(v=s(t)),n=d.bind(null,o,r,!1),a=d.bind(null,o,r,!0)}else o=s(t),n=b.bind(null,o,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(o)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var o=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<o.length;n++){var a=i(o[n]);r[a].references--}for(var s=l(e,t),c=0;c<o.length;c++){var u=i(o[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}o=s}}}},29:function(e,t,o){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=function(e,t){var o,n,a,r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var l=(o=i,n=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(a," */")),s=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[r].concat(s).concat([l]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(o,"}"):o})).join("")},t.i=function(e,o,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var r=0;r<this.length;r++){var i=this[r][0];null!=i&&(a[i]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);n&&a[s[0]]||(o&&(s[2]?s[2]="".concat(o," and ").concat(s[2]):s[2]=o),t.push(s))}},t}},30:function(e,t,o){switch(window.__kbnThemeTag__){case"v8dark":return o(31);case"v8light":return o(33)}},31:function(e,t,o){var n=o(28),a=o(32);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},32:function(e,t,o){(t=o(29)(!1)).push([e.i,".tbvChart{display:flex;flex:1 0 0;flex-direction:column;overflow:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.tbvChart::-webkit-scrollbar{height:16px;width:16px}.tbvChart::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.tbvChart::-webkit-scrollbar-corner,.tbvChart::-webkit-scrollbar-track{background-color:#0000}.tbvChart .euiDataGrid--stickyFooter .euiDataGridFooter{display:flex}.tbvChart__split{display:flex;flex:1 0 0;flex-direction:column;margin-bottom:24px;padding:8px}.tbvChart__split>h3{text-align:center}.tbvChart__splitColumns{align-items:flex-start;flex-direction:row}.tbvChartCellContent{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},33:function(e,t,o){var n=o(28),a=o(34);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},34:function(e,t,o){(t=o(29)(!1)).push([e.i,".tbvChart{display:flex;flex:1 0 0;flex-direction:column;overflow:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.tbvChart::-webkit-scrollbar{height:16px;width:16px}.tbvChart::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.tbvChart::-webkit-scrollbar-corner,.tbvChart::-webkit-scrollbar-track{background-color:#0000}.tbvChart .euiDataGrid--stickyFooter .euiDataGridFooter{display:flex}.tbvChart__split{display:flex;flex:1 0 0;flex-direction:column;margin-bottom:24px;padding:8px}.tbvChart__split>h3{text-align:center}.tbvChart__splitColumns{align-items:flex-start;flex-direction:row}.tbvChartCellContent{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},35:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return g})),o(30);var n=o(1),a=o.n(n),r=o(24),i=o.n(r),l=o(12),s=o(11),c=o(0),u=o(5),d=o(6),b=o(13),v=o(23),f=o(8),p=o(25),m=o(3);const h=Object(n.memo)((({dataGridAriaLabel:e,filename:t,columns:o,rows:a})=>{const[r,i]=Object(n.useState)(!1),u=Object(n.useCallback)((()=>i((e=>!e))),[]),b=Object(n.useCallback)((()=>i(!1)),[]),{services:{uiSettings:h}}=Object(l.useKibana)(),C=f.exporters.tableHasFormulas(o,a),x=Object(n.useCallback)((e=>{const n=h.get(p.CSV_SEPARATOR_SETTING),r=h.get(p.CSV_QUOTE_VALUES_SETTING),i=f.exporters.datatableToCSV({type:"datatable",columns:o,rows:a},{csvSeparator:n,quoteValues:r,formatFactory:Object(m.b)().deserialize,raw:!e,escapeFormulaValues:!1});Object(p.downloadFileAs)(`${t||"unsaved"}.csv`,{content:i,type:f.exporters.CSV_MIME_TYPE})}),[o,a,t,h]),j=c.i18n.translate("visTypeTable.vis.controls.exportButtonAriaLabel",{defaultMessage:"Export {dataGridAriaLabel} as CSV",values:{dataGridAriaLabel:e}}),g=Object(d.jsx)(s.EuiButtonEmpty,{"aria-label":j,size:"xs",iconType:"exportAction",color:"text",className:"euiDataGrid__controlBtn",onClick:u},Object(d.jsx)(v.FormattedMessage,{id:"visTypeTable.vis.controls.exportButtonLabel",defaultMessage:"Export"})),w=C?Object(d.jsx)(s.EuiToolTip,{position:"top",content:c.i18n.translate("visTypeTable.vis.controls.exportButtonFormulasWarning",{defaultMessage:"Your CSV contains characters that spreadsheet applications might interpret as formulas."})},g):g,T=[Object(d.jsx)(s.EuiContextMenuItem,{key:"rawCsv",onClick:()=>x(!1)},Object(d.jsx)(v.FormattedMessage,{id:"visTypeTable.vis.controls.rawCSVButtonLabel",defaultMessage:"Raw"})),Object(d.jsx)(s.EuiContextMenuItem,{key:"csv",onClick:()=>x(!0)},Object(d.jsx)(v.FormattedMessage,{id:"visTypeTable.vis.controls.formattedCSVButtonLabel",defaultMessage:"Formatted"}))];return Object(d.jsx)(s.EuiPopover,{id:"dataTableExportData",button:w,isOpen:r,closePopover:b,panelPaddingSize:"none",repositionOnScroll:!0},Object(d.jsx)(s.EuiContextMenuPanel,{className:"eui-textNoWrap",items:T}))})),C=Object(n.memo)((({fireEvent:e,table:t,visConfig:o,title:r,uiStateProps:{columnsWidth:i,sort:l,setColumnsWidth:v,setSort:f}})=>{var p;const m=Object(n.useRef)(null),{columns:C,rows:x,formattedColumns:j}=t,g=Object(n.useMemo)((()=>{var e;return null!==l.columnIndex&&l.direction?Object(u.orderBy)(x,null===(e=C[l.columnIndex])||void 0===e?void 0:e.id,l.direction):x}),[C,x,l]),w=Object(n.useMemo)((()=>((e,t,o)=>({rowIndex:n,columnId:a})=>{var r;const i=null===(r=e[n])||void 0===r?void 0:r[a],l=t[a],s=null==l?void 0:l.formatter.convert(i,"html");return Object(d.jsx)("div",{dangerouslySetInnerHTML:{__html:s},"data-test-subj":"tbvChartCellContent",className:o?"":"tbvChartCellContent"})})(g,j,o.autoFitRowToContent)),[j,g,o.autoFitRowToContent]),T=Object(n.useMemo)((()=>o.autoFitRowToContent?{defaultHeight:"auto"}:void 0),[o.autoFitRowToContent]),y=((e,t,o,n,a,r)=>{const i=(o,n)=>{a({name:"filter",data:{data:[{table:{columns:e,rows:t},...o,column:o.column}],negate:n}})};return e.map(((e,a)=>{const l=o[e.id],s=l.filterable?[({rowIndex:e,columnId:o,Component:n})=>{var s;const u=null===(s=t[e])||void 0===s?void 0:s[o];if(null==u)return null;const b=l.formatter.convert(u),v=c.i18n.translate("visTypeTable.tableCellFilter.filterForValueText",{defaultMessage:"Filter for value"}),f=c.i18n.translate("visTypeTable.tableCellFilter.filterForValueAriaLabel",{defaultMessage:"Filter for value: {cellContent}",values:{cellContent:b}});return Object(d.jsx)(n,{"aria-label":f,"data-test-subj":"tbvChartCell__filterForCellValue",onClick:()=>{i({row:e,column:a,value:u},!1),null==r||r()},iconType:"plusInCircle"},v)},({rowIndex:e,columnId:o,Component:n})=>{var s;const u=null===(s=t[e])||void 0===s?void 0:s[o];if(null==u)return null;const b=l.formatter.convert(u),v=c.i18n.translate("visTypeTable.tableCellFilter.filterOutValueText",{defaultMessage:"Filter out value"}),f=c.i18n.translate("visTypeTable.tableCellFilter.filterOutValueAriaLabel",{defaultMessage:"Filter out value: {cellContent}",values:{cellContent:b}});return Object(d.jsx)(n,{"aria-label":f,onClick:()=>{i({row:e,column:a,value:u},!0),null==r||r()},iconType:"minusInCircle"},v)}]:void 0,u=n.find((e=>e.colIndex===a)),b={id:e.id,display:e.name,displayAsText:e.name,actions:{showHide:!1,showMoveLeft:!1,showMoveRight:!1,showSortAsc:{label:c.i18n.translate("visTypeTable.sort.ascLabel",{defaultMessage:"Sort asc"})},showSortDesc:{label:c.i18n.translate("visTypeTable.sort.descLabel",{defaultMessage:"Sort desc"})}},cellActions:s};return u&&(b.initialWidth=u.width),b}))})(C,g,j,i,e,null===(p=m.current)||void 0===p?void 0:p.closeCellPopover),O=Object(b.b)(o,x.length),S=Object(n.useMemo)((()=>{var e;return null!==l.columnIndex&&l.direction?[{id:null===(e=C[l.columnIndex])||void 0===e?void 0:e.id,direction:l.direction}]:[]}),[C,l]),_=Object(n.useCallback)((e=>{const t=e.length<=1?e[0]:e[1];f(t&&{columnIndex:C.findIndex((e=>e.id===t.id)),direction:t.direction})}),[C,f]),M=r||o.title||c.i18n.translate("visTypeTable.defaultAriaLabel",{defaultMessage:"Data table visualization"}),k=Object(n.useCallback)((({columnId:e,width:t})=>{const o=C.findIndex((t=>t.id===e));v({colIndex:o,width:t})}),[C,v]);return Object(d.jsx)(a.a.Fragment,null,r&&Object(d.jsx)(s.EuiTitle,{size:"xs"},Object(d.jsx)("h3",null,r)),Object(d.jsx)(s.EuiDataGrid,{"aria-label":M,columns:y,gridStyle:{border:"horizontal",header:"underline"},rowHeightsOptions:T,rowCount:x.length,columnVisibility:{visibleColumns:C.map((({id:e})=>e)),setVisibleColumns:()=>{}},toolbarVisibility:o.showToolbar&&{showColumnSelector:!1,showFullScreenSelector:!1,showSortSelector:!1,showDisplaySelector:!1,additionalControls:Object(d.jsx)(h,{dataGridAriaLabel:M,columns:C,rows:g,filename:o.title})},renderCellValue:w,renderFooterCellValue:o.showTotal?({columnId:e})=>j[e].formattedTotal||null:void 0,pagination:O,sorting:{columns:S,onSort:_},onColumnResize:k,minSizeForControls:1,ref:m}))}));var x=o(26);const j=Object(n.memo)((({fireEvent:e,tables:t,visConfig:o,uiStateProps:n,enforceMinWidth:r})=>Object(d.jsx)(a.a.Fragment,null,t.map((({table:t,title:a})=>{const i=t.columns.reduce(((e,t,o)=>{var a,r;return e+(null!==(a=null===(r=n.columnsWidth.find((e=>e.colIndex===o)))||void 0===r?void 0:r.width)&&void 0!==a?a:25)}),0);return Object(d.jsx)("div",{key:a,className:"tbvChart__split",css:r?{minWidth:`calc(${i}px + 2 * ${x.euiThemeVars.euiSizeS})`}:{}},Object(d.jsx)(C,{fireEvent:e,table:t,visConfig:o,title:a,uiStateProps:n}))}))))),g=({core:e,handlers:t,visData:{direction:o,table:a,tables:r},visConfig:s,renderComplete:c})=>{Object(n.useLayoutEffect)((()=>{setTimeout((()=>{c()}),300)}),[c]);const u=Object(b.c)(t.uiState),v=i()("tbvChart",{tbvChart__splitColumns:"column"===o});return Object(d.jsx)(e.i18n.Context,null,Object(d.jsx)(l.KibanaContextProvider,{services:e},Object(d.jsx)("div",{className:v,"data-test-subj":"tbvChart"},a?Object(d.jsx)(C,{fireEvent:t.event,table:a,visConfig:s,uiStateProps:u}):Object(d.jsx)(j,{fireEvent:t.event,tables:r,visConfig:s,uiStateProps:u,enforceMinWidth:"column"===o}))))}}}]);