(window.dashboard_bundle_jsonpfunction=window.dashboard_bundle_jsonpfunction||[]).push([[4],{238:function(e,t,i){"use strict";i.r(t),i.d(t,"buildAllDashboardActions",(function(){return H}));var a=i(4),o=i(44),n=i(2),s=i.n(n),r=i(40),c=i(50),l=i(7),d=i(52);const b="ACTION_EXPORT_CSV";class export_csv_action_ExportCSVAction{constructor(){s()(this,"id",b),s()(this,"type",b),s()(this,"order",5),s()(this,"fieldFormats",void 0),s()(this,"uiSettings",void 0),s()(this,"getDisplayName",(e=>l.f.getDisplayName())),s()(this,"hasDatatableContent",(e=>Object.keys((null==e?void 0:e.tables)||{}).length>0&&e.tables.allowCsvExport)),s()(this,"getFormatter",(()=>{if(this.fieldFormats)return this.fieldFormats.deserialize})),s()(this,"getDataTableContent",(e=>{if(this.hasDatatableContent(e))return null==e?void 0:e.tables.tables})),s()(this,"exportCSV",(async e=>{var t;const i=this.getFormatter();if(!i)return;const a=this.getDataTableContent(null==e||null===(t=e.embeddable)||void 0===t?void 0:t.getInspectorAdapters());if(a){const t=Object.values(a),o=t.reduce(((a,o,n)=>{if(o){const s=t.length>1?`-${n+1}`:"",c=l.f.getUntitledFilename();a[`${e.embeddable.getTitle()||c}${s}.csv`]={content:r.exporters.datatableToCSV(o,{csvSeparator:this.uiSettings.get("csv:separator",","),quoteValues:this.uiSettings.get("csv:quoteValues",!0),formatFactory:i,escapeFormulaValues:!1}),type:r.exporters.CSV_MIME_TYPE}}return a}),{});if(e.asString)return o;if(o)return Object(c.downloadMultipleAs)(o)}})),({data:{fieldFormats:this.fieldFormats},settings:{uiSettings:this.uiSettings}}=d.pluginServices.getServices())}getIconType(){return"exportAction"}async isCompatible(e){var t,i;return!!this.hasDatatableContent(null===(t=e.embeddable)||void 0===t||null===(i=t.getInspectorAdapters)||void 0===i?void 0:i.call(t))}async execute(e){return await this.exportCSV(e)}}var p=i(3),u=i.n(p),h=i(84),g=i.n(h),m=i(39),j=i(21),v=i(1);const y="clonePanel";class clone_panel_action_ClonePanelAction{constructor(e){s()(this,"type",y),s()(this,"id",y),s()(this,"order",45),s()(this,"toastsService",void 0),this.savedObjects=e,({notifications:{toasts:this.toastsService}}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;return l.c.getDisplayName()}getIconType({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;return"copy"}async isCompatible({embeddable:e}){var t;return Boolean(!Object(a.isErrorEmbeddable)(e)&&(null===(t=e.getInput())||void 0===t?void 0:t.viewMode)!==a.ViewMode.VIEW&&e.getRoot()&&e.getRoot().isContainer&&e.getRoot().type===v.a&&e.getOutput().editable)}async execute({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;const t=e.getRoot(),i=t.getInput().panels[e.id];if(!i)throw new a.PanelNotFoundError;t.showPlaceholderUntil(this.cloneEmbeddable(i,e),j.b,{width:i.gridData.w,height:i.gridData.h,currentPanels:t.getInput().panels,placeBesideId:i.explicitInput.id})}async getCloneTitle(e,t){if(""===t)return"";const i=l.c.getClonedTag(),o=new RegExp(`\\(${i}\\)`,"g"),n=new RegExp(`\\(${i} [0-9]+\\)`,"g"),s=t.replace(n,"").replace(o,"").trim();let r;if(Object(a.isReferenceOrValueEmbeddable)(e)||!u.a.has(e.getExplicitInput(),"savedObjectId")){const t=e.getRoot();r=u.a.filter(await t.getPanelTitles(),(e=>e.startsWith(s)))}else{const t=10,a=await this.savedObjects.client.find({type:e.type,perPage:t,fields:["title"],searchFields:["title"],search:`"${s}"`});r=a.total<=t?a.savedObjects.map((e=>e.get("title"))):[s+` (${i} ${a.total-1})`]}const c=u.a.map(r,(e=>{if(e.match(o))return 0;const t=e.match(n);return t?parseInt(t[0].replace(/[^0-9.]/g,""),10):-1})),d=u.a.max(c)||0;return d<0?s+` (${i})`:s+` (${i} ${d+1})`}async addCloneToLibrary(e,t){const i=await this.savedObjects.client.get(e.type,t),a=await this.getCloneTitle(e,i.attributes.title);return(await this.savedObjects.client.create(e.type,{...u.a.cloneDeep(i.attributes),title:a},{references:u.a.cloneDeep(i.references)})).id}async cloneEmbeddable(e,t){let i;if(Object(a.isReferenceOrValueEmbeddable)(t)){const a=await this.getCloneTitle(t,t.getTitle()||"");i={type:t.type,explicitInput:{...await t.getInputAsValueType(),id:g.a.v4(),title:a,hidePanelTitles:e.explicitInput.hidePanelTitles}}}else if(i={type:t.type,explicitInput:{...e.explicitInput,id:g.a.v4()}},e.explicitInput.savedObjectId){const a=await this.addCloneToLibrary(t,e.explicitInput.savedObjectId);i.explicitInput.savedObjectId=a}return this.toastsService.addSuccess({title:l.c.getSuccessMessage(),"data-test-subj":"addObjectToContainerSuccess"}),i}}var O=i(24);const f="togglePanel";function x(e){return e.type===O.DASHBOARD_CONTAINER_TYPE}function E(e){if(!e.parent||!x(e.parent))throw new m.IncompatibleActionError;return e.id===e.parent.getInput().expandedPanelId}class expand_panel_action_ExpandPanelAction{constructor(){s()(this,"type",f),s()(this,"id",f),s()(this,"order",7)}getDisplayName({embeddable:e}){if(!e.parent||!x(e.parent))throw new m.IncompatibleActionError;return E(e)?l.e.getMinimizeTitle():l.e.getMaximizeTitle()}getIconType({embeddable:e}){if(!e.parent||!x(e.parent))throw new m.IncompatibleActionError;return E(e),"expand"}async isCompatible({embeddable:e}){return Boolean(e.parent&&x(e.parent))}async execute({embeddable:e}){if(!e.parent||!x(e.parent))throw new m.IncompatibleActionError;const t=E(e)?void 0:e.id;e.parent.updateInput({expandedPanelId:t})}}var w=i(23),I=i.n(w),T=i(36),C=i(34),_=i(12);class replace_panel_flyout_ReplacePanelFlyout extends I.a.Component{constructor(e){super(e),s()(this,"lastToast",{id:"panelReplaceToast"}),s()(this,"showToast",(e=>{const{notifications:{toasts:t}}=d.pluginServices.getServices();this.lastToast&&t.remove(this.lastToast),this.lastToast=t.addSuccess({title:l.l.getSuccessMessage(e),"data-test-subj":"addObjectToContainerSuccess"})})),s()(this,"onReplacePanel",(async(e,t,i)=>{const{panelToRemove:a,container:o}=this.props,{w:n,h:s,x:r,y:c}=o.getInput().panels[a.id].gridData,{id:l}=await o.addNewEmbeddable(t,{savedObjectId:e}),{[a.id]:d,...b}=o.getInput().panels;o.updateInput({panels:{...b,[l]:{...b[l],gridData:{...b[l].gridData,w:n,h:s,x:r,y:c}}}}),o.reload(),this.showToast(i),this.props.onClose()}))}render(){const{embeddable:{getEmbeddableFactories:e}}=d.pluginServices.getServices(),t=this.props.savedObjectsFinder,i=Object(_.jsx)(t,{noItemsMessage:l.l.getNoMatchingObjectsMessage(),savedObjectMetaData:[...e()].filter((e=>Boolean(e.savedObjectMetaData)&&!e.isContainerType)).map((({savedObjectMetaData:e})=>e)),showFilter:!0,onChoose:this.onReplacePanel}),a="Replace panel "+this.props.panelToRemove.getTitle()+" with:";return Object(_.jsx)(I.a.Fragment,null,Object(_.jsx)(C.EuiFlyoutHeader,{hasBorder:!0},Object(_.jsx)(C.EuiTitle,{size:"m"},Object(_.jsx)("h2",null,Object(_.jsx)("span",null,a)))),Object(_.jsx)(C.EuiFlyoutBody,null,i))}}const R="replacePanel";function A(e){return e.type===v.a}class replace_panel_action_ReplacePanelAction{constructor(e){s()(this,"type",R),s()(this,"id",R),s()(this,"order",3),this.savedobjectfinder=e}getDisplayName({embeddable:e}){if(!e.parent||!A(e.parent))throw new m.IncompatibleActionError;return l.l.getDisplayName()}getIconType({embeddable:e}){if(!e.parent||!A(e.parent))throw new m.IncompatibleActionError;return"kqlOperand"}async isCompatible({embeddable:e}){return(!e.getInput().viewMode||e.getInput().viewMode!==a.ViewMode.VIEW)&&Boolean(e.parent&&A(e.parent))}async execute({embeddable:e}){if(!e.parent||!A(e.parent))throw new m.IncompatibleActionError;const t=e;!async function(e){const{embeddable:t,panelToRemove:i,savedObjectFinder:a}=e,{settings:{theme:{theme$:o}},overlays:{openFlyout:n}}=d.pluginServices.getServices(),s=n(Object(T.toMountPoint)(Object(_.jsx)(replace_panel_flyout_ReplacePanelFlyout,{container:t,onClose:()=>{s&&s.close()},panelToRemove:i,savedObjectsFinder:a}),{theme$:o}),{"data-test-subj":"dashboardReplacePanel",ownFocus:!0})}({embeddable:e.parent,savedObjectFinder:this.savedobjectfinder,panelToRemove:t})}}const S="saveToLibrary";class add_to_library_action_AddToLibraryAction{constructor(){s()(this,"type",S),s()(this,"id",S),s()(this,"order",15),s()(this,"applicationCapabilities",void 0),s()(this,"toastsService",void 0),({application:{capabilities:this.applicationCapabilities},notifications:{toasts:this.toastsService}}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;return l.b.getDisplayName()}getIconType({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;return"folderCheck"}async isCompatible({embeddable:e}){var t;const{maps:i,visualize:o}=this.applicationCapabilities,n="map"===e.type?i.save:o.save;return Boolean(n&&!Object(a.isErrorEmbeddable)(e)&&(null===(t=e.getInput())||void 0===t?void 0:t.viewMode)!==a.ViewMode.VIEW&&e.getRoot()&&e.getRoot().isContainer&&e.getRoot().type===v.a&&Object(a.isReferenceOrValueEmbeddable)(e)&&!e.inputIsRefType(e.getInput()))}async execute({embeddable:e}){if(!Object(a.isReferenceOrValueEmbeddable)(e))throw new m.IncompatibleActionError;const t=await e.getInputAsRefType();e.updateInput(t);const i=e.getRoot(),o=i.getInput().panels[e.id];if(!o)throw new a.PanelNotFoundError;const n={type:e.type,explicitInput:{...t}};i.replacePanel(o,n,!0);const s=l.b.getSuccessMessage(e.getTitle()?`'${e.getTitle()}'`:"");this.toastsService.addSuccess({title:s,"data-test-subj":"addPanelToLibrarySuccess"})}}var N=i(41);const P=Object(N.withSuspense)(N.LazyDashboardPicker);function F({PresentationUtilContext:e,dashboardId:t,embeddable:i,closeModal:o}){const{embeddable:{getStateTransfer:n},dashboardCapabilities:{createNew:s,showWriteControls:r}}=d.pluginServices.getServices(),c=n(),[b,u]=Object(w.useState)("existing"),[h,g]=Object(w.useState)(null),m=Object(w.useCallback)((()=>{const e=i.getRoot().getInput().panels[i.id];if(!e)throw new a.PanelNotFoundError;const t={type:i.type,input:{...Object(p.omit)(e.explicitInput,"id")}},n="existing"===b&&h?`#${Object(O.createDashboardEditUrl)(h.id,!0)}`:`#${O.DashboardConstants.CREATE_NEW_DASHBOARD_URL}`;o(),c.navigateToWithEmbeddablePackage("dashboards",{state:t,path:n})}),[b,i,h,c,o]),j="copyToDashboardTitle",v="copyToDashboardDescription";return Object(_.jsx)(C.EuiFocusTrap,{clickOutsideDisables:!0},Object(_.jsx)(C.EuiOutsideClickDetector,{onOutsideClick:o},Object(_.jsx)("div",{role:"dialog","aria-modal":"true","aria-labelledby":j,"aria-describedby":v},Object(_.jsx)(e,null,Object(_.jsx)(C.EuiModalHeader,null,Object(_.jsx)(C.EuiModalHeaderTitle,null,Object(_.jsx)("h2",{id:j},l.d.getDisplayName()))),Object(_.jsx)(C.EuiModalBody,null,Object(_.jsx)(I.a.Fragment,null,Object(_.jsx)(C.EuiText,null,Object(_.jsx)("p",{id:v},l.d.getDescription())),Object(_.jsx)(C.EuiSpacer,null),Object(_.jsx)(C.EuiFormRow,{hasChildLabel:!1},Object(_.jsx)(C.EuiPanel,{color:"subdued",hasShadow:!1,"data-test-subj":"add-to-dashboard-options"},Object(_.jsx)("div",null,r&&Object(_.jsx)(I.a.Fragment,null,Object(_.jsx)(C.EuiRadio,{checked:"existing"===b,"data-test-subj":"add-to-existing-dashboard-option",id:"existing-dashboard-option",name:"dashboard-option",label:l.d.getExistingDashboardOption(),onChange:()=>u("existing")}),Object(_.jsx)("div",{className:"savAddDashboard__searchDashboards"},Object(_.jsx)(P,{isDisabled:"existing"!==b,idsToOmit:t?[t]:void 0,onChange:e=>g(e)})),Object(_.jsx)(C.EuiSpacer,{size:"s"})),s&&Object(_.jsx)(I.a.Fragment,null,Object(_.jsx)(C.EuiRadio,{checked:"new"===b,"data-test-subj":"add-to-new-dashboard-option",id:"new-dashboard-option",name:"dashboard-option",disabled:!t,label:l.d.getNewDashboardOption(),onChange:()=>u("new")}),Object(_.jsx)(C.EuiSpacer,{size:"s"}))))))),Object(_.jsx)(C.EuiModalFooter,null,Object(_.jsx)(C.EuiButtonEmpty,{"data-test-subj":"cancelCopyToButton",onClick:()=>o()},l.d.getCancelButtonName()),Object(_.jsx)(C.EuiButton,{fill:!0,"data-test-subj":"confirmCopyToButton",onClick:m,disabled:"existing"===b&&!h},l.d.getAcceptButtonName()))))))}const D="copyToDashboard";function M(e){return e.type===v.a}class copy_to_dashboard_action_CopyToDashboardAction{constructor(e){s()(this,"type",D),s()(this,"id",D),s()(this,"order",1),s()(this,"dashboardCapabilities",void 0),s()(this,"theme$",void 0),s()(this,"openModal",void 0),this.PresentationUtilContext=e,({dashboardCapabilities:this.dashboardCapabilities,overlays:{openModal:this.openModal},settings:{theme:{theme$:this.theme$}}}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.parent||!M(e.parent))throw new m.IncompatibleActionError;return l.d.getDisplayName()}getIconType({embeddable:e}){if(!e.parent||!M(e.parent))throw new m.IncompatibleActionError;return"exit"}async isCompatible({embeddable:e}){const{createNew:t,showWriteControls:i}=this.dashboardCapabilities;return Boolean(e.parent&&M(e.parent)&&(t||i))}async execute({embeddable:e}){if(!e.parent||!M(e.parent))throw new m.IncompatibleActionError;const t=this.openModal(Object(T.toMountPoint)(Object(_.jsx)(F,{PresentationUtilContext:this.PresentationUtilContext,closeModal:()=>t.close(),dashboardId:e.parent.getInput().id,embeddable:e}),{theme$:this.theme$}),{maxWidth:400,"data-test-subj":"copyToDashboardPanel"})}}const V="unlinkFromLibrary";class unlink_from_library_action_UnlinkFromLibraryAction{constructor(){s()(this,"type",V),s()(this,"id",V),s()(this,"order",15),s()(this,"toastsService",void 0),({notifications:{toasts:this.toastsService}}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;return l.o.getDisplayName()}getIconType({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;return"folderExclamation"}async isCompatible({embeddable:e}){var t;return Boolean(!Object(a.isErrorEmbeddable)(e)&&(null===(t=e.getInput())||void 0===t?void 0:t.viewMode)!==a.ViewMode.VIEW&&e.getRoot()&&e.getRoot().isContainer&&e.getRoot().type===v.a&&Object(a.isReferenceOrValueEmbeddable)(e)&&e.inputIsRefType(e.getInput()))}async execute({embeddable:e}){if(!Object(a.isReferenceOrValueEmbeddable)(e))throw new m.IncompatibleActionError;const t=await e.getInputAsValueType();e.updateInput(t);const i=e.getRoot(),o=i.getInput().panels[e.id];if(!o)throw new a.PanelNotFoundError;const n={type:e.type,explicitInput:{...t,title:e.getTitle()}};i.replacePanel(o,n,!0);const s=l.o.getSuccessMessage(e.getTitle()?`'${e.getTitle()}'`:"");this.toastsService.addSuccess({title:s,"data-test-subj":"unlinkPanelSuccess"})}}var k=i(35),$=i(83),B=i.n($),L=i(51),U=i(25),G={name:"1v0pok0",styles:"min-width:300px"};function z({context:e}){const{embeddable:t}=e,[i,a]=Object(w.useState)(!0),[o,n]=Object(w.useState)([]),[s,r]=Object(w.useState)(""),[c,d]=Object(w.useState)(),b=Object(w.useMemo)((()=>{var e;return null===(e=t.getRoot())||void 0===e?void 0:e.getAllDataViews()}),[t]);return B()((()=>{Promise.all([t.getFilters(),t.getQuery()]).then((([e,t])=>{if(n(e),t)if(Object(U.isOfQueryType)(t))r(t.query);else{const e=Object(U.getAggregateQueryMode)(t);d(e),r(t[e])}a(!1)}))})),Object(_.jsx)(I.a.Fragment,null,i?Object(_.jsx)(C.EuiLoadingContent,{lines:3}):Object(_.jsx)(C.EuiForm,{component:"div",css:G},""!==s&&Object(_.jsx)(C.EuiFormRow,{label:l.h.getQueryTitle(),display:"rowCompressed"},Object(_.jsx)(C.EuiCodeBlock,{language:c,paddingSize:"none",transparentBackground:!0,"aria-labelledby":`${l.h.getQueryTitle()}: ${s}`,tabIndex:0},s)),o&&o.length>0&&Object(_.jsx)(C.EuiFormRow,{label:l.h.getFiltersTitle()},Object(_.jsx)(C.EuiFlexGroup,{wrap:!0,gutterSize:"xs"},Object(_.jsx)(L.FilterItems,{filters:o,indexPatterns:b,readOnly:!0})))))}function W({editPanelAction:e,displayName:t,context:i,icon:a,id:o}){const{embeddable:n}=i,[s,r]=Object(w.useState)(!1);return Object(_.jsx)(C.EuiPopover,{button:Object(_.jsx)(C.EuiButtonIcon,{color:"text",iconType:a,onClick:()=>r(!s),"data-test-subj":`embeddablePanelNotification-${o}`,"aria-label":t}),isOpen:s,closePopover:()=>r(!1),anchorPosition:"upCenter"},Object(_.jsx)(C.EuiPopoverTitle,null,t),Object(_.jsx)(z,{context:i}),Object(_.jsx)(C.EuiPopoverFooter,null,Object(_.jsx)(C.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:!1,wrap:!0},Object(_.jsx)(C.EuiFlexItem,{grow:!1},Object(_.jsx)(C.EuiButton,{"data-test-subj":"filtersNotificationModal__editButton",size:"s",fill:!0,onClick:()=>e.execute({embeddable:n})},l.h.getEditButtonTitle())))))}const q="ACTION_FILTERS_NOTIFICATION";class filters_notification_action_FiltersNotificationAction{constructor(){s()(this,"id",q),s()(this,"type",q),s()(this,"order",2),s()(this,"displayName",l.h.getDisplayName()),s()(this,"icon","filter"),s()(this,"applicationService",void 0),s()(this,"embeddableService",void 0),s()(this,"settingsService",void 0),s()(this,"FilterIconButton",(({context:e})=>{const{embeddable:t}=e,i=new a.EditPanelAction(this.embeddableService.getEmbeddableFactory,this.applicationService,this.embeddableService.getStateTransfer()),{Provider:o}=Object(T.createKibanaReactContext)({uiSettings:this.settingsService.uiSettings});return Object(_.jsx)(k.I18nProvider,null,Object(_.jsx)(T.KibanaThemeProvider,{theme$:this.settingsService.theme.theme$},Object(_.jsx)(o,null,Object(_.jsx)(W,{editPanelAction:i,displayName:this.displayName,context:e,icon:this.getIconType({embeddable:t}),id:this.id}))))})),s()(this,"MenuItem",Object(T.reactToUiComponent)(this.FilterIconButton)),s()(this,"isCompatible",(async({embeddable:e})=>{var t;if(Object(a.isErrorEmbeddable)(e)||!e.getRoot().isContainer||(null===(t=e.getInput())||void 0===t?void 0:t.viewMode)!==a.ViewMode.EDIT||!Object(a.isFilterableEmbeddable)(e))return!1;if((await e.getFilters()).length>0)return!0;const{isOfQueryType:o,isOfAggregateQueryType:n}=await Promise.resolve().then(i.t.bind(null,25,7)),s=await e.getQuery();return o(s)&&""!==s.query||n(s)})),s()(this,"execute",(async()=>{})),({application:this.applicationService,embeddable:this.embeddableService,settings:this.settingsService}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;return this.displayName}getIconType({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;return this.icon}}function Q({unlinkAction:e,displayName:t,context:i,icon:a,id:o}){const[n,s]=Object(w.useState)(!1),{embeddable:r}=i;return Object(_.jsx)(C.EuiPopover,{button:Object(_.jsx)(C.EuiButtonIcon,{color:"text",iconType:a,onClick:()=>s(!n),"data-test-subj":`embeddablePanelNotification-${o}`,"aria-label":l.i.getPopoverAriaLabel()}),isOpen:n,closePopover:()=>s(!1),anchorPosition:"upCenter"},Object(_.jsx)(C.EuiPopoverTitle,null,t),Object(_.jsx)("div",{style:{width:"300px"}},Object(_.jsx)(C.EuiText,null,Object(_.jsx)("p",null,l.i.getTooltip()))),Object(_.jsx)(C.EuiPopoverFooter,null,Object(_.jsx)(C.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:!1,wrap:!0},Object(_.jsx)(C.EuiFlexItem,{grow:!1},Object(_.jsx)(C.EuiButton,{"data-test-subj":"libraryNotificationUnlinkButton",size:"s",fill:!0,onClick:()=>e.execute({embeddable:r})},e.getDisplayName({embeddable:r}))))))}const X="ACTION_LIBRARY_NOTIFICATION";class library_notification_action_LibraryNotificationAction{constructor(e){s()(this,"id",X),s()(this,"type",X),s()(this,"order",1),s()(this,"theme$",void 0),s()(this,"displayName",l.i.getDisplayName()),s()(this,"icon","folderCheck"),s()(this,"LibraryNotification",(({context:e})=>{const{embeddable:t}=e;return Object(_.jsx)(T.KibanaThemeProvider,{theme$:this.theme$},Object(_.jsx)(Q,{unlinkAction:this.unlinkAction,displayName:this.displayName,context:e,icon:this.getIconType({embeddable:t}),id:this.id}))})),s()(this,"MenuItem",Object(T.reactToUiComponent)(this.LibraryNotification)),s()(this,"isCompatible",(async({embeddable:e})=>{var t;return!Object(a.isErrorEmbeddable)(e)&&e.getRoot().isContainer&&(null===(t=e.getInput())||void 0===t?void 0:t.viewMode)!==a.ViewMode.VIEW&&Object(a.isReferenceOrValueEmbeddable)(e)&&e.inputIsRefType(e.getInput())})),s()(this,"execute",(async()=>{})),this.unlinkAction=e,({settings:{theme:{theme$:this.theme$}}}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;return this.displayName}getIconType({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new m.IncompatibleActionError;return this.icon}}const H=async({core:e,plugins:t,allowByValueEmbeddables:i})=>{const{uiSettings:n}=e,{uiActions:s,share:r,presentationUtil:c}=t,l=new clone_panel_action_ClonePanelAction(e.savedObjects);s.registerAction(l),s.attachAction(a.CONTEXT_MENU_TRIGGER,l.id);const d=Object(o.getSavedObjectFinder)(e.savedObjects,n),b=new replace_panel_action_ReplacePanelAction(d);s.registerAction(b),s.attachAction(a.CONTEXT_MENU_TRIGGER,b.id);const p=new expand_panel_action_ExpandPanelAction;s.registerAction(p),s.attachAction(a.CONTEXT_MENU_TRIGGER,p.id);const u=new filters_notification_action_FiltersNotificationAction;if(s.registerAction(u),s.attachAction(a.PANEL_NOTIFICATION_TRIGGER,u.id),r){const e=new export_csv_action_ExportCSVAction;s.addTriggerAction(a.CONTEXT_MENU_TRIGGER,e)}if(i){const e=new add_to_library_action_AddToLibraryAction;s.registerAction(e),s.attachAction(a.CONTEXT_MENU_TRIGGER,e.id);const t=new unlink_from_library_action_UnlinkFromLibraryAction;s.registerAction(t),s.attachAction(a.CONTEXT_MENU_TRIGGER,t.id);const i=new library_notification_action_LibraryNotificationAction(t);s.registerAction(i),s.attachAction(a.PANEL_NOTIFICATION_TRIGGER,i.id);const o=new copy_to_dashboard_action_CopyToDashboardAction(c.ContextProvider);s.registerAction(o),s.attachAction(a.CONTEXT_MENU_TRIGGER,o.id)}}},65:function(e,t){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var a=new Uint8Array(16);e.exports=function(){return i(a),a}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},66:function(e,t){for(var i=[],a=0;a<256;++a)i[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,o=i;return[o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]]].join("")}},72:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(23);t.default=function(e){a.useEffect(e,[])}},83:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(42).__importDefault(i(72));t.default=function(e){a.default((function(){e()}))}},84:function(e,t,i){var a=i(85),o=i(86),n=o;n.v1=a,n.v4=o,e.exports=n},85:function(e,t,i){var a,o,n=i(65),s=i(66),r=0,c=0;e.exports=function(e,t,i){var l=t&&i||0,d=t||[],b=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:o;if(null==b||null==p){var u=n();null==b&&(b=a=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==p&&(p=o=16383&(u[6]<<8|u[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,m=h-r+(g-c)/1e4;if(m<0&&void 0===e.clockseq&&(p=p+1&16383),(m<0||h>r)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=h,c=g,o=p;var j=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;d[l++]=j>>>24&255,d[l++]=j>>>16&255,d[l++]=j>>>8&255,d[l++]=255&j;var v=h/4294967296*1e4&268435455;d[l++]=v>>>8&255,d[l++]=255&v,d[l++]=v>>>24&15|16,d[l++]=v>>>16&255,d[l++]=p>>>8|128,d[l++]=255&p;for(var y=0;y<6;++y)d[l+y]=b[y];return t||s(d)}},86:function(e,t,i){var a=i(65),o=i(66);e.exports=function(e,t,i){var n=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var r=0;r<16;++r)t[n+r]=s[r];return t||o(s)}}}]);