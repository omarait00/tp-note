(window.dataViewFieldEditor_bundle_jsonpfunction=window.dataViewFieldEditor_bundle_jsonpfunction||[]).push([[1],{49:function(e,t,i){"use strict";var n,r=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),a=[];function o(e){for(var t=-1,i=0;i<a.length;i++)if(a[i].identifier===e){t=i;break}return t}function l(e,t){for(var i={},n=[],r=0;r<e.length;r++){var l=e[r],s=t.base?l[0]+t.base:l[0],d=i[s]||0,u="".concat(s," ").concat(d);i[s]=d+1;var c=o(u),f={css:l[1],media:l[2],sourceMap:l[3]};-1!==c?(a[c].references++,a[c].updater(f)):a.push({identifier:u,updater:b(f,t),references:1}),n.push(u)}return n}function s(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=i.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=r(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function c(e,t,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function f(e,t,i){var n=i.css,r=i.media,a=i.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var m=null,p=0;function b(e,t){var i,n,r;if(t.singleton){var a=p++;i=m||(m=s(t)),n=c.bind(null,i,a,!1),r=c.bind(null,i,a,!0)}else i=s(t),n=f.bind(null,i,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var i=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var r=o(i[n]);a[r].references--}for(var s=l(e,t),d=0;d<i.length;d++){var u=o(i[d]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}i=s}}}},50:function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i,n,r,a=e[1]||"",o=e[3];if(!o)return a;if(t&&"function"==typeof btoa){var l=(i=o,n=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(r," */")),s=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(s).concat([l]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(r[o]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);n&&r[s[0]]||(i&&(s[2]?s[2]="".concat(i," and ").concat(s[2]):s[2]=i),t.push(s))}},t}},57:function(e,t,i){e.exports=i(13)(3)},59:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(44),r=i(1),a=n.__importDefault(i(60));t.default=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=[]);var n=a.default(e,t),o=n[0],l=n[1],s=n[2];return r.useEffect(s,i),[o,l]}},60:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);t.default=function(e,t){void 0===t&&(t=0);var i=n.useRef(!1),r=n.useRef(),a=n.useRef(e),o=n.useCallback((function(){return i.current}),[]),l=n.useCallback((function(){i.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){i.current=!0,a.current()}),t)}),[t]),s=n.useCallback((function(){i.current=null,r.current&&clearTimeout(r.current)}),[]);return n.useEffect((function(){a.current=e}),[e]),n.useEffect((function(){return l(),s}),[t]),[o,s,l]}},61:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,a,o=i(1),l=i(62),s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},s(e,t)},d=function(){return d=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},d.apply(this,arguments)};!function(e){e.AUTO="auto",e.START="start",e.CENTER="center",e.END="end"}(n||(n={})),(r=t.ScrollDirection||(t.ScrollDirection={})).HORIZONTAL="horizontal",r.VERTICAL="vertical",function(e){e.OBSERVED="observed",e.REQUESTED="requested"}(a||(a={}));var u,c,f,m,p,b=((u={})[t.ScrollDirection.VERTICAL]="scrollTop",u[t.ScrollDirection.HORIZONTAL]="scrollLeft",u),j=((c={})[t.ScrollDirection.VERTICAL]="height",c[t.ScrollDirection.HORIZONTAL]="width",c),x=((f={})[t.ScrollDirection.VERTICAL]="top",f[t.ScrollDirection.HORIZONTAL]="left",f),v=((m={})[t.ScrollDirection.VERTICAL]="marginTop",m[t.ScrollDirection.HORIZONTAL]="marginLeft",m),g=((p={})[t.ScrollDirection.VERTICAL]="marginBottom",p[t.ScrollDirection.HORIZONTAL]="marginRight",p),h=function(){function e(e){var t=e.itemCount,i=e.itemSizeGetter,n=e.estimatedItemSize;this.itemSizeGetter=i,this.itemCount=t,this.estimatedItemSize=n,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1}return e.prototype.updateConfig=function(e){var t=e.itemCount,i=e.itemSizeGetter,n=e.estimatedItemSize;null!=t&&(this.itemCount=t),null!=n&&(this.estimatedItemSize=n),null!=i&&(this.itemSizeGetter=i)},e.prototype.getLastMeasuredIndex=function(){return this.lastMeasuredIndex},e.prototype.getSizeAndPositionForIndex=function(e){if(e<0||e>=this.itemCount)throw Error("Requested index "+e+" is outside of range 0.."+this.itemCount);if(e>this.lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredItem(),i=t.offset+t.size,n=this.lastMeasuredIndex+1;n<=e;n++){var r=this.itemSizeGetter(n);if(null==r||isNaN(r))throw Error("Invalid size returned for index "+n+" of value "+r);this.itemSizeAndPositionData[n]={offset:i,size:r},i+=r}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]},e.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}},e.prototype.getTotalSize=function(){var e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize},e.prototype.getUpdatedOffsetForIndex=function(e){var t=e.align,i=void 0===t?n.START:t,r=e.containerSize,a=e.currentOffset,o=e.targetIndex;if(r<=0)return 0;var l,s=this.getSizeAndPositionForIndex(o),d=s.offset,u=d-r+s.size;switch(i){case n.END:l=u;break;case n.CENTER:l=d-(r-s.size)/2;break;case n.START:l=d;break;default:l=Math.max(u,Math.min(d,a))}var c=this.getTotalSize();return Math.max(0,Math.min(c-r,l))},e.prototype.getVisibleRange=function(e){var t=e.containerSize,i=e.offset,n=e.overscanCount;if(0===this.getTotalSize())return{};var r=i+t,a=this.findNearestItem(i);if(void 0===a)throw Error("Invalid offset "+i+" specified");var o=this.getSizeAndPositionForIndex(a);i=o.offset+o.size;for(var l=a;i<r&&l<this.itemCount-1;)l++,i+=this.getSizeAndPositionForIndex(l).size;return n&&(a=Math.max(0,a-n),l=Math.min(l+n,this.itemCount-1)),{start:a,stop:l}},e.prototype.resetItem=function(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)},e.prototype.findNearestItem=function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})},e.prototype.binarySearch=function(e){for(var t=e.low,i=e.high,n=e.offset,r=0,a=0;t<=i;){if(r=t+Math.floor((i-t)/2),(a=this.getSizeAndPositionForIndex(r).offset)===n)return r;a<n?t=r+1:a>n&&(i=r-1)}return t>0?t-1:0},e.prototype.exponentialSearch=function(e){for(var t=e.index,i=e.offset,n=1;t<this.itemCount&&this.getSizeAndPositionForIndex(t).offset<i;)t+=n,n*=2;return this.binarySearch({high:Math.min(t,this.itemCount-1),low:Math.floor(t/2),offset:i})},e}(),_={overflow:"auto",willChange:"transform",WebkitOverflowScrolling:"touch"},E={position:"relative",width:"100%",minHeight:"100%"},O={position:"absolute",top:0,left:0,width:"100%"},F=d({},O,{position:"sticky"}),y=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemSizeGetter=function(e){return function(i){return t.getSize(i,e)}},t.sizeAndPositionManager=new h({itemCount:t.props.itemCount,itemSizeGetter:t.itemSizeGetter(t.props.itemSize),estimatedItemSize:t.getEstimatedItemSize()}),t.state={offset:t.props.scrollOffset||null!=t.props.scrollToIndex&&t.getOffsetForIndex(t.props.scrollToIndex)||0,scrollChangeReason:a.REQUESTED},t.styleCache={},t.getRef=function(e){t.rootNode=e},t.handleScroll=function(e){var i=t.props.onScroll,n=t.getNodeOffset();n<0||t.state.offset===n||e.target!==t.rootNode||(t.setState({offset:n,scrollChangeReason:a.OBSERVED}),"function"==typeof i&&i(n,e))},t}return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(i,e),i.prototype.componentDidMount=function(){var e=this.props,t=e.scrollOffset,i=e.scrollToIndex;this.rootNode.addEventListener("scroll",this.handleScroll,{passive:!0}),null!=t?this.scrollTo(t):null!=i&&this.scrollTo(this.getOffsetForIndex(i))},i.prototype.componentWillReceiveProps=function(e){var t=this.props,i=t.estimatedItemSize,n=t.itemCount,r=t.itemSize,o=t.scrollOffset,l=t.scrollToAlignment,s=t.scrollToIndex,d=e.scrollToIndex!==s||e.scrollToAlignment!==l,u=e.itemCount!==n||e.itemSize!==r||e.estimatedItemSize!==i;e.itemSize!==r&&this.sizeAndPositionManager.updateConfig({itemSizeGetter:this.itemSizeGetter(e.itemSize)}),e.itemCount===n&&e.estimatedItemSize===i||this.sizeAndPositionManager.updateConfig({itemCount:e.itemCount,estimatedItemSize:this.getEstimatedItemSize(e)}),u&&this.recomputeSizes(),e.scrollOffset!==o?this.setState({offset:e.scrollOffset||0,scrollChangeReason:a.REQUESTED}):"number"==typeof e.scrollToIndex&&(d||u)&&this.setState({offset:this.getOffsetForIndex(e.scrollToIndex,e.scrollToAlignment,e.itemCount),scrollChangeReason:a.REQUESTED})},i.prototype.componentDidUpdate=function(e,t){var i=this.state,n=i.offset,r=i.scrollChangeReason;t.offset!==n&&r===a.REQUESTED&&this.scrollTo(n)},i.prototype.componentWillUnmount=function(){this.rootNode.removeEventListener("scroll",this.handleScroll)},i.prototype.scrollTo=function(e){var i=this.props.scrollDirection,n=void 0===i?t.ScrollDirection.VERTICAL:i;this.rootNode[b[n]]=e},i.prototype.getOffsetForIndex=function(e,i,n){void 0===i&&(i=this.props.scrollToAlignment),void 0===n&&(n=this.props.itemCount);var r=this.props.scrollDirection,a=void 0===r?t.ScrollDirection.VERTICAL:r;return(e<0||e>=n)&&(e=0),this.sizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:this.props[j[a]],currentOffset:this.state&&this.state.offset||0,targetIndex:e})},i.prototype.recomputeSizes=function(e){void 0===e&&(e=0),this.styleCache={},this.sizeAndPositionManager.resetItem(e)},i.prototype.render=function(){var e,i=this,n=this.props,r=(n.estimatedItemSize,n.height),a=n.overscanCount,l=void 0===a?3:a,s=n.renderItem,u=(n.itemCount,n.itemSize,n.onItemsRendered),c=(n.onScroll,n.scrollDirection),f=void 0===c?t.ScrollDirection.VERTICAL:c,m=(n.scrollOffset,n.scrollToIndex,n.scrollToAlignment,n.stickyIndices),p=n.style,b=n.width,x=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(i[n[r]]=e[n[r]])}return i}(n,["estimatedItemSize","height","overscanCount","renderItem","itemCount","itemSize","onItemsRendered","onScroll","scrollDirection","scrollOffset","scrollToIndex","scrollToAlignment","stickyIndices","style","width"]),v=this.state.offset,g=this.sizeAndPositionManager.getVisibleRange({containerSize:this.props[j[f]]||0,offset:v,overscanCount:l}),h=g.start,O=g.stop,F=[],y=d({},_,p,{height:r,width:b}),w=d({},E,((e={})[j[f]]=this.sizeAndPositionManager.getTotalSize(),e));if(null!=m&&0!==m.length&&(m.forEach((function(e){return F.push(s({index:e,style:i.getStyle(e,!0)}))})),f===t.ScrollDirection.HORIZONTAL&&(w.display="flex")),void 0!==h&&void 0!==O){for(var P=h;P<=O;P++)null!=m&&m.includes(P)||F.push(s({index:P,style:this.getStyle(P,!1)}));"function"==typeof u&&u({startIndex:h,stopIndex:O})}return o.createElement("div",d({ref:this.getRef},x,{style:y}),o.createElement("div",{style:w},F))},i.prototype.getNodeOffset=function(){var e=this.props.scrollDirection,i=void 0===e?t.ScrollDirection.VERTICAL:e;return this.rootNode[b[i]]},i.prototype.getEstimatedItemSize=function(e){return void 0===e&&(e=this.props),e.estimatedItemSize||"number"==typeof e.itemSize&&e.itemSize||50},i.prototype.getSize=function(e,t){return"function"==typeof t?t(e):Array.isArray(t)?t[e]:t},i.prototype.getStyle=function(e,i){var n=this.styleCache[e];if(n)return n;var r,a,o=this.props.scrollDirection,l=void 0===o?t.ScrollDirection.VERTICAL:o,s=this.sizeAndPositionManager.getSizeAndPositionForIndex(e),u=s.size,c=s.offset;return this.styleCache[e]=i?d({},F,((r={})[j[l]]=u,r[v[l]]=c,r[g[l]]=-(c+u),r.zIndex=1,r)):d({},O,((a={})[j[l]]=u,a[x[l]]=c,a))},i.defaultProps={overscanCount:3,scrollDirection:t.ScrollDirection.VERTICAL,width:"100%"},i.propTypes={estimatedItemSize:l.number,height:l.oneOfType([l.number,l.string]).isRequired,itemCount:l.number.isRequired,itemSize:l.oneOfType([l.number,l.array,l.func]).isRequired,onScroll:l.func,onItemsRendered:l.func,overscanCount:l.number,renderItem:l.func.isRequired,scrollOffset:l.number,scrollToIndex:l.number,scrollToAlignment:l.oneOf([n.AUTO,n.START,n.CENTER,n.END]),scrollDirection:l.oneOf([t.ScrollDirection.HORIZONTAL,t.ScrollDirection.VERTICAL]),stickyIndices:l.arrayOf(l.number),style:l.object,width:l.oneOfType([l.number,l.string])},i}(o.PureComponent);t.default=y},62:function(e,t,i){e.exports=i(13)(8)},63:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(64);case"v8light":return i(66)}},64:function(e,t,i){var n=i(49),r=i(65);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},65:function(e,t,i){(t=i(50)(!1)).push([e.i,".indexPatternFieldEditor__previewFieldList{position:relative}.indexPatternFieldEditor__previewFieldList--ligthWeight{font-weight:400}.indexPatternFieldEditor__previewFieldList__item{align-items:center;border-bottom:1px solid #343741;height:40px;overflow:hidden}.indexPatternFieldEditor__previewFieldList__item--highlighted{background:#103148;font-weight:600}.indexPatternFieldEditor__previewFieldList__item__key,.indexPatternFieldEditor__previewFieldList__item__value{overflow:hidden}.indexPatternFieldEditor__previewFieldList__item__actions{flex-basis:24px!important}.indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:none}.indexPatternFieldEditor__previewFieldList__item--pinned .indexPatternFieldEditor__previewFieldList__item__actionsBtn,.indexPatternFieldEditor__previewFieldList__item:hover .indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:block}.indexPatternFieldEditor__previewFieldList__item__value .euiToolTipAnchor{width:100%}.indexPatternFieldEditor__previewFieldList__item__key__wrapper,.indexPatternFieldEditor__previewFieldList__item__value__wrapper{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.indexPatternFieldEditor__previewFieldList__showMore{align-items:flex-end;bottom:-40px;display:flex;height:40px;position:absolute;width:100%}",""]),e.exports=t},66:function(e,t,i){var n=i(49),r=i(67);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},67:function(e,t,i){(t=i(50)(!1)).push([e.i,".indexPatternFieldEditor__previewFieldList{position:relative}.indexPatternFieldEditor__previewFieldList--ligthWeight{font-weight:400}.indexPatternFieldEditor__previewFieldList__item{align-items:center;border-bottom:1px solid #d3dae6;height:40px;overflow:hidden}.indexPatternFieldEditor__previewFieldList__item--highlighted{background:#e6f1fa;font-weight:600}.indexPatternFieldEditor__previewFieldList__item__key,.indexPatternFieldEditor__previewFieldList__item__value{overflow:hidden}.indexPatternFieldEditor__previewFieldList__item__actions{flex-basis:24px!important}.indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:none}.indexPatternFieldEditor__previewFieldList__item--pinned .indexPatternFieldEditor__previewFieldList__item__actionsBtn,.indexPatternFieldEditor__previewFieldList__item:hover .indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:block}.indexPatternFieldEditor__previewFieldList__item__value .euiToolTipAnchor{width:100%}.indexPatternFieldEditor__previewFieldList__item__key__wrapper,.indexPatternFieldEditor__previewFieldList__item__value__wrapper{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.indexPatternFieldEditor__previewFieldList__showMore{align-items:flex-end;bottom:-40px;display:flex;height:40px;position:absolute;width:100%}",""]),e.exports=t},68:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(69);case"v8light":return i(71)}},69:function(e,t,i){var n=i(49),r=i(70);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},70:function(e,t,i){(t=i(50)(!1)).push([e.i,".indexPatternFieldEditor__previewPannel{display:flex;flex-direction:column;height:100%}.indexPatternFieldEditor__previewImageModal__wrapper{padding:16px}.indexPatternFieldEditor__previewImageModal__wrapper img{max-width:100%}.indexPatternFieldEditor__previewEmptySearchResult__title{font-weight:400}",""]),e.exports=t},71:function(e,t,i){var n=i(49),r=i(72);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},72:function(e,t,i){(t=i(50)(!1)).push([e.i,".indexPatternFieldEditor__previewPannel{display:flex;flex-direction:column;height:100%}.indexPatternFieldEditor__previewImageModal__wrapper{padding:16px}.indexPatternFieldEditor__previewImageModal__wrapper img{max-width:100%}.indexPatternFieldEditor__previewEmptySearchResult__title{font-weight:400}",""]),e.exports=t},73:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(44),r=i(1),a=n.__importDefault(i(74));t.default=function(e,t){var i=r.useState(t),n=i[0],o=i[1];return a.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),n}},74:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;t.default=r},75:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(76);case"v8light":return i(78)}},76:function(e,t,i){var n=i(49),r=i(77);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},77:function(e,t,i){(t=i(50)(!1)).push([e.i,".fieldEditor__flyoutPanels{height:100%}.fieldEditor__flyoutPanels__column{height:100%;overflow:hidden}.fieldEditor__flyoutPanel{height:100%;overflow-y:auto;padding:24px}.fieldEditor__flyoutPanel--pageBackground{background-color:#141519}.fieldEditor__flyoutPanel--emptyShade{background-color:#1d1e24}.fieldEditor__flyoutPanel--leftBorder{border-left:1px solid #343741}.fieldEditor__flyoutPanel--rightBorder{border-right:1px solid #343741}.fieldEditor__flyoutPanel--withContent{display:flex;flex-direction:column;overflow-y:hidden;padding:0}.fieldEditor__flyoutPanel__header{overflow-wrap:break-word!important;padding:0!important;word-break:break-word}.fieldEditor__flyoutPanel__content{flex:1;overflow-x:hidden;overflow-y:auto;padding:24px}.fieldEditor__flyoutPanel__footer{flex:0}",""]),e.exports=t},78:function(e,t,i){var n=i(49),r=i(79);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},79:function(e,t,i){(t=i(50)(!1)).push([e.i,".fieldEditor__flyoutPanels{height:100%}.fieldEditor__flyoutPanels__column{height:100%;overflow:hidden}.fieldEditor__flyoutPanel{height:100%;overflow-y:auto;padding:24px}.fieldEditor__flyoutPanel--pageBackground{background-color:#fafbfd}.fieldEditor__flyoutPanel--emptyShade{background-color:#fff}.fieldEditor__flyoutPanel--leftBorder{border-left:1px solid #d3dae6}.fieldEditor__flyoutPanel--rightBorder{border-right:1px solid #d3dae6}.fieldEditor__flyoutPanel--withContent{display:flex;flex-direction:column;overflow-y:hidden;padding:0}.fieldEditor__flyoutPanel__header{overflow-wrap:break-word!important;padding:0!important;word-break:break-word}.fieldEditor__flyoutPanel__content{flex:1;overflow-x:hidden;overflow-y:auto;padding:24px}.fieldEditor__flyoutPanel__footer{flex:0}",""]),e.exports=t},91:function(e,t,i){"use strict";i.r(t),i.d(t,"FieldEditorFlyoutContentContainer",(function(){return De}));var n=i(1),r=i.n(n),a=i(2),o=i(35),l=i(42),s=i(9),d=i(43);const u=({links:e})=>({runtimePainless:e.indexPatterns.runtimeFields,painlessSyntax:e.scriptedFields.painlessLangSpec}),c=e=>{var t,i,n,r;let o=null===(t=e.caused_by)||void 0===t?void 0:t.reason;const l=((e="")=>e.startsWith("Cannot cast from")?"CAST_ERROR":"UNKNOWN")(o);return"CAST_ERROR"===l&&(o=`${o} ${a.i18n.translate("indexPatternFieldEditor.editor.form.scriptEditor.castErrorMessage",{defaultMessage:"Verify that you have correctly set the runtime field type."})}`),{message:a.i18n.translate("indexPatternFieldEditor.editor.form.scriptEditor.compileErrorMessage",{defaultMessage:"Error compiling the painless script"}),position:null!==(i=e.position)&&void 0!==i?i:null,scriptStack:null!==(n=e.script_stack)&&void 0!==n?n:[],reason:null!==(r=o)&&void 0!==r?r:null,code:l}};i(20);var f=i(4),m=i(12),p=(i(18),i(0));const b={title:a.i18n.translate("indexPatternFieldEditor.cancelField.confirmationModal.title",{defaultMessage:"Discard changes"}),description:a.i18n.translate("indexPatternFieldEditor.cancelField.confirmationModal.description",{defaultMessage:"Changes that you've made to your field will be discarded, are you sure you want to continue?"}),cancelButton:a.i18n.translate("indexPatternFieldEditor.cancelField.confirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"})},j=({onCancel:e,onConfirm:t})=>Object(p.jsx)(f.EuiConfirmModal,{title:b.title,"data-test-subj":"runtimeFieldModifiedFieldConfirmModal",cancelButtonText:b.cancelButton,confirmButtonText:b.title,onCancel:e,onConfirm:t,maxWidth:600},Object(p.jsx)("p",null,b.description)),x=({fieldName:e,onCancel:t,onConfirm:i})=>{const r=(e=>({cancelButtonText:a.i18n.translate("indexPatternFieldEditor.saveRuntimeField.confirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:a.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmationModal.saveButtonLabel",{defaultMessage:"Save changes"}),warningChangingFields:a.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.warningChangingFields",{defaultMessage:"Changing name or type can break searches and visualizations that rely on this field."}),typeConfirm:a.i18n.translate("indexPatternFieldEditor.saveRuntimeField.confirmModal.typeConfirm",{defaultMessage:"Enter CHANGE to continue"}),titleConfirmChanges:a.i18n.translate("indexPatternFieldEditor.saveRuntimeField.confirmModal.title",{defaultMessage:"Save changes to '{name}'",values:{name:e}})}))(e),[o,l]=Object(n.useState)("");return Object(p.jsx)(f.EuiConfirmModal,{title:r.titleConfirmChanges,"data-test-subj":"runtimeFieldSaveConfirmModal",cancelButtonText:r.cancelButtonText,confirmButtonText:r.confirmButtonText,confirmButtonDisabled:"CHANGE"!==(null==o?void 0:o.toUpperCase()),onCancel:t,onConfirm:i},Object(p.jsx)(f.EuiCallOut,{color:"warning",title:r.warningChangingFields,iconType:"alert",size:"s"}),Object(p.jsx)(f.EuiSpacer,null),Object(p.jsx)(f.EuiFormRow,{label:r.typeConfirm},Object(p.jsx)(f.EuiFieldText,{value:o,onChange:e=>l(e.target.value),"data-test-subj":"saveModalConfirmText"})))};var v=i(15),g=i(6);const h=Object(n.createContext)(void 0),_=({services:e,dataView:t,links:i,uiSettings:r,fieldTypeToProcess:a,fieldFormats:o,fieldFormatEditors:l,namesNotAllowed:s,existingConcreteFields:d,children:u,fieldName$:c,subfields$:f})=>{const m=Object(n.useMemo)((()=>({dataView:t,fieldTypeToProcess:a,links:i,uiSettings:r,services:e,fieldFormats:o,fieldFormatEditors:l,namesNotAllowed:s,existingConcreteFields:d,fieldName$:c,subfields$:f})),[t,a,e,i,r,o,l,s,d,c,f]);return Object(p.jsx)(h.Provider,{value:m},u)},E=()=>{const e=Object(n.useContext)(h);if(void 0===e)throw new Error("useFieldEditorContext must be used within a <FieldEditorContext />");return e};var O=i(46),F=i(59),y=i.n(F),w=i(36);const P=Object(n.createContext)(void 0),C={name:null,index:null,script:null,document:null,type:null,format:null,parentName:null},S=e=>{var t;const i="object"==typeof e?JSON.stringify(e):null!==(t=String(e))&&void 0!==t?t:"-";return Object(O.renderToString)(Object(p.jsx)(r.a.Fragment,null,i))},M=e=>{const t=typeof e;return"string"===t?"keyword":"number"===t?"double":"boolean"===t?"boolean":"keyword"},T=({children:e})=>{const t=Object(n.useRef)(0),i=Object(n.useRef)({type:null,script:void 0,documentId:void 0}),{dataView:r,fieldTypeToProcess:o,services:{search:s,notifications:d,api:{getFieldPreview:u}},fieldFormats:f,fieldName$:m}=E(),b=Object(n.useRef)(new l.BehaviorSubject(void 0)),[j,x]=Object(n.useState)({fields:[],error:null}),[g,h]=Object(n.useState)(!1),[_,O]=Object(n.useState)(null),[F,T]=Object(n.useState)(C),[I,L]=Object(n.useState)({documents:[],currentIdx:0}),[R,k]=Object(n.useState)(!0),[N,z]=Object(n.useState)(!1),[D,V]=Object(n.useState)(!1),[A,B]=Object(n.useState)(null),[W,U]=Object(n.useState)("cluster"),[$,G]=Object(n.useState)({}),[H,q]=Object(n.useState)({isValidating:!1,isValid:!0,message:null}),{documents:Z,currentIdx:J}=I,Q=Z[J],Y=null==Q?void 0:Q._index,X=null==Q?void 0:Q._id,K=Z.length,ee=null!==A;let te=!0;N||ee||0!==Z.length||(te=!1);const{name:ie,document:ne,script:re,format:ae,type:oe,parentName:le}=F,se=Object(n.useCallback)((e=>{T((t=>({...t,...e})))}),[]),de=Object(n.useMemo)((()=>!!(Y&&null!=re&&re.source&&oe)),[Y,null==re?void 0:re.source,oe]),ue=Object(n.useMemo)((()=>i.current.type!==oe||i.current.script!==(null==re?void 0:re.source)||i.current.documentId!==X),[oe,re,X]),ce=Object(n.useCallback)((e=>{x((t=>({...t,error:e})))}),[]),fe=Object(n.useCallback)((e=>{x((t=>{var i;const n=null===t.error||(null===(i=t.error)||void 0===i?void 0:i.code)===e?null:t.error;return{...t,error:n}}))}),[]),me=Object(n.useCallback)((e=>{if(null!=ae&&ae.id){const i=f.getInstance(ae.id,ae.params);var t;if(i)return null!==(t=i.getConverterFor("html")(e))&&void 0!==t?t:JSON.stringify(e)}if(oe){const t=Object(w.a)(oe),n=f.getDefaultInstance(t);var i;if(n)return null!==(i=n.getConverterFor("html")(e))&&void 0!==i?i:JSON.stringify(e)}return S(e)}),[ae,oe,f]),pe=Object(n.useCallback)((async(e=50)=>{if("number"!=typeof e)throw new Error('The "limit" option must be a number');i.current.documentId=void 0,z(!0),x({fields:[],error:null});const[t,n]=await s.search({params:{index:r.getIndexPattern(),body:{size:e}}}).toPromise().then((e=>[e,null])).catch((e=>[null,e]));z(!1),B(null);const o=Boolean(n)?{code:"ERR_FETCHING_DOC",error:{message:n.toString(),reason:a.i18n.translate("indexPatternFieldEditor.fieldPreview.error.errorLoadingSampleDocumentsDescription",{defaultMessage:"Error loading sample documents."})}}:null;O(o),null===o&&L({documents:t?t.rawResponse.hits.hits:[],currentIdx:0})}),[r,s]),be=Object(n.useCallback)((async e=>{if(!Boolean(e.trim()))return;i.current.documentId=void 0,z(!0);const[t,n]=await s.search({params:{index:r.getIndexPattern(),body:{size:1,query:{ids:{values:[e]}}}}}).toPromise().then((e=>[e,null])).catch((e=>[null,e]));z(!1);const o=(null==t?void 0:t.rawResponse.hits.total)>0,l=o?t.rawResponse.hits.hits:[],d=Boolean(n)?{code:"ERR_FETCHING_DOC",error:{message:n.toString(),reason:a.i18n.translate("indexPatternFieldEditor.fieldPreview.error.errorLoadingDocumentDescription",{defaultMessage:"Error loading document."})}}:!1===o?{code:"DOC_NOT_FOUND",error:{message:a.i18n.translate("indexPatternFieldEditor.fieldPreview.error.documentNotFoundDescription",{defaultMessage:"Document ID not found"})}}:null;O(d),null===d?L({documents:l,currentIdx:0}):V(!1)}),[r,s]),je=Object(n.useCallback)(((e,t)=>{const[i]=t,n=me(i);x({fields:[{key:e,value:i,formattedValue:n}],error:null})}),[me]),xe=Object(n.useCallback)((e=>{const t=[],i=le?e=>e.key===ie:()=>!0,n=Object.entries(e).map((([e,i])=>{var n;const{1:r}=e.split("composite_field.");t.push(r);const[a]=i,o=me(a);return{key:le?`${null!=le?le:""}.${r}`:`${null!==(n=m.getValue())&&void 0!==n?n:""}.${r}`,value:a,formattedValue:o,type:M(a)}})).filter(i).sort(((e,t)=>e.key.localeCompare(t.key)));b.current.next(n),x({fields:n,error:null})}),[me,le,ie,b,m]),ve=Object(n.useCallback)((async()=>{var e;if(!le&&H.isValidating)return;if(!(le||de&&ue&&!1!==H.isValid))return void V(!1);i.current={type:oe,script:null==re?void 0:re.source,documentId:X};const n=++t.current,o=le&&(null===(e=r.getRuntimeField(le))||void 0===e?void 0:e.script)||re,l=await u({index:Y,document:ne,context:le?"composite_field":`${oe}_field`,script:o});if(n!==t.current)return;const{error:s}=l;if(s){const e=a.i18n.translate("indexPatternFieldEditor.fieldPreview.errorTitle",{defaultMessage:"Failed to load field preview"});return d.toasts.addError(s,{title:e}),void V(!1)}if(l.data){const{values:e,error:t}=l.data;t?x({fields:[{key:null!=ie?ie:"",value:"",formattedValue:S("")}],error:{code:"PAINLESS_SCRIPT_ERROR",error:c(t)}}):Array.isArray(e)?je(ie,e):xe(e)}h(!0),V(!1)}),[ie,oe,re,le,r,ne,X,u,d.toasts,de,H,ue,je,xe,Y]),ge=Object(n.useCallback)((()=>{L(J>=K-1?e=>({...e,currentIdx:0}):e=>({...e,currentIdx:e.currentIdx+1}))}),[J,K]),he=Object(n.useCallback)((()=>{L(0===J?e=>({...e,currentIdx:K-1}):e=>({...e,currentIdx:e.currentIdx-1}))}),[J,K]),_e=Object(n.useCallback)((()=>{t.current=0,L({documents:[],currentIdx:0}),x({fields:[],error:null}),U("cluster"),V(!1),z(!1)}),[]),Ee=Object(n.useMemo)((()=>({fields:j.fields,error:j.error,fieldPreview$:b.current,isPreviewAvailable:te,isLoadingPreview:D,initialPreviewComplete:g,params:{value:F,update:se},currentDocument:{value:Q,id:ee?A:X,isLoading:N,isCustomId:ee},documents:{loadSingle:B,loadFromCluster:pe,fetchDocError:_},navigation:{isFirstDoc:0===J,isLastDoc:J>=K-1,next:ge,prev:he},panel:{isVisible:R,setIsVisible:k},from:{value:W,set:U},reset:_e,pinnedFields:{value:$,set:G},validation:{setScriptEditorValidation:q}})),[j,b,_,F,te,D,se,Q,X,ee,pe,N,A,J,K,ge,he,R,W,_e,$,g]);return Object(n.useEffect)((()=>{de&&ue&&V(!0)}),[de,ue,null==re?void 0:re.source,oe,X]),Object(n.useEffect)((()=>{null!==A&&Boolean(A.trim())&&z(!0)}),[A]),Object(n.useEffect)((()=>{R&&pe()}),[R,pe,o]),Object(n.useEffect)((()=>{se({document:null==Q?void 0:Q._source,index:null==Q?void 0:Q._index})}),[Q,se]),Object(n.useEffect)((()=>{x((e=>{const{fields:t}=e;let i=t.map((e=>{let t=null!=ie?ie:"";if("composite"===oe){const{1:i}=e.key.split(".");t=`${null!=ie?ie:""}.${i}`}return{...e,key:t}}));return 0===i.length&&null!==ie&&(i=[{key:ie,value:void 0,formattedValue:void 0,type:void 0}]),{...e,fields:i}}))}),[ie,oe,le]),Object(n.useEffect)((()=>{x((e=>{const{fields:t}=e;return{...e,fields:t.map((e=>{const t=null===re&&Boolean(ne)?Object(v.get)(ne,null!=ie?ie:""):null==e?void 0:e.value,i=me(t);return{...e,value:t,formattedValue:i}}))}}))}),[ie,re,ne,me]),Object(n.useEffect)((()=>{void 0===(null==re?void 0:re.source)&&(i.current.script=void 0,ce(null))}),[null==re?void 0:re.source,ce]),Object(n.useEffect)((()=>{if(!H.isValidating)if(!1===H.isValid){var e;V(!1);const t=void 0===(null==re?void 0:re.source)?null:{code:"PAINLESS_SYNTAX_ERROR",error:{reason:null!==(e=H.message)&&void 0!==e?e:a.i18n.translate("indexPatternFieldEditor.fieldPreview.error.painlessSyntax",{defaultMessage:"Invalid Painless syntax"})}};ce(t),i.current.script=null==re?void 0:re.source}else fe("PAINLESS_SYNTAX_ERROR")}),[H,null==re?void 0:re.source,ce,fe]),y()(ve,500,[ve]),y()((()=>{null!==A&&be(A)}),500,[A]),Object(p.jsx)(P.Provider,{value:Ee},e)},I=()=>{const e=Object(n.useContext)(P);if(void 0===e)throw new Error("useFieldPreviewContext must be used within a <FieldPreviewProvider />");return e},L=()=>Object(p.jsx)("div",{"data-test-subj":"isUpdatingIndicator"},Object(p.jsx)(f.EuiFlexGroup,{gutterSize:"xs"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiLoadingSpinner,{size:"m"})),Object(p.jsx)(f.EuiFlexItem,{grow:!1},a.i18n.translate("indexPatternFieldEditor.fieldPreview.updatingPreviewLabel",{defaultMessage:"Updating..."})))),R={title:a.i18n.translate("indexPatternFieldEditor.fieldPreview.title",{defaultMessage:"Preview"}),customData:a.i18n.translate("indexPatternFieldEditor.fieldPreview.subTitle.customData",{defaultMessage:"Custom data"})},k=()=>{const{dataView:e}=E(),{from:t,currentDocument:{isLoading:i}}=I();return Object(p.jsx)("div",null,Object(p.jsx)(f.EuiFlexGroup,{alignItems:"center"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiTitle,{size:"s"},Object(p.jsx)("h2",{"data-test-subj":"title"},R.title))),i&&Object(p.jsx)(f.EuiFlexItem,{"data-test-subj":"isFetchingDocumentIndicator"},Object(p.jsx)(L,null))),Object(p.jsx)(f.EuiText,null,Object(p.jsx)(f.EuiTextColor,{color:"subdued","data-test-subj":"subTitle"},a.i18n.translate("indexPatternFieldEditor.fieldPreview.subTitle",{defaultMessage:"From: {from}",values:{from:"cluster"===t.value?e.getIndexPattern():R.customData}}))))},N=()=>Object(p.jsx)(f.EuiFlexGroup,{style:{height:"100%"},"data-test-subj":"emptyPrompt"},Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(f.EuiEmptyPrompt,{iconType:"inspect",title:Object(p.jsx)("h2",null,a.i18n.translate("indexPatternFieldEditor.fieldPreview.emptyPromptTitle",{defaultMessage:"Preview"})),titleSize:"s",body:Object(p.jsx)(f.EuiText,{size:"s"},Object(p.jsx)(f.EuiTextColor,{color:"subdued"},Object(p.jsx)("p",null,a.i18n.translate("indexPatternFieldEditor.fieldPreview.emptyPromptDescription",{defaultMessage:"Enter the name of an existing field or define a script to view a preview of the calculated output."}))))}))),z=()=>{const{currentDocument:{id:e,isCustomId:t},documents:{loadSingle:i,loadFromCluster:r,fetchDocError:o},navigation:{prev:l,next:s}}=I(),d="DOC_NOT_FOUND"===(null==o?void 0:o.code),u=!1===t,c=Object(n.useCallback)((e=>{const t=e.target.value;i(t)}),[i]);return Object(p.jsx)("div",null,Object(p.jsx)(f.EuiFlexGroup,{gutterSize:"s"},Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(f.EuiFormRow,{label:a.i18n.translate("indexPatternFieldEditor.fieldPreview.documentIdField.label",{defaultMessage:"Document ID"}),isInvalid:d,fullWidth:!0},Object(p.jsx)(f.EuiFieldText,{isInvalid:d,value:null!=e?e:"",onChange:c,fullWidth:!0,"data-test-subj":"documentIdField"})),t&&Object(p.jsx)("span",null,Object(p.jsx)(f.EuiButtonEmpty,{color:"primary",size:"xs",flush:"left",onClick:()=>r(),"data-test-subj":"loadDocsFromClusterButton"},a.i18n.translate("indexPatternFieldEditor.fieldPreview.documentIdField.loadDocumentsFromCluster",{defaultMessage:"Load documents from cluster"})))),u&&Object(p.jsx)(f.EuiFlexItem,{grow:!1,"data-test-subj":"documentsNav"},Object(p.jsx)(f.EuiFlexGroup,{gutterSize:"s",alignItems:"flexEnd"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonIcon,{display:"base",size:"m",onClick:l,iconType:"arrowLeft","data-test-subj":"goToPrevDocButton","aria-label":a.i18n.translate("indexPatternFieldEditor.fieldPreview.documentNav.previousArialabel",{defaultMessage:"Previous document"})})),Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonIcon,{display:"base",size:"m",onClick:s,iconType:"arrowRight","data-test-subj":"goToNextDocButton","aria-label":a.i18n.translate("indexPatternFieldEditor.fieldPreview.documentNav.nextArialabel",{defaultMessage:"Next document"})}))))))},D=()=>{var e;const{documents:{fetchDocError:t}}=I();return null===t?null:Object(p.jsx)(f.EuiCallOut,{title:a.i18n.translate("indexPatternFieldEditor.fieldPreview.errorCallout.title",{defaultMessage:"Error fetching document"}),color:"danger",iconType:"alert",role:"alert","data-test-subj":"fetchDocError"},Object(p.jsx)("p",{"data-test-subj":"title"},null!==(e=t.error.message)&&void 0!==e?e:t.error.reason))};var V=i(45),A=i.n(V);const B=e=>{const t=new RegExp("max-width:[^;]+;","gm");return t.test(e)?e.replace(t,"max-width: 100%;"):e},W=({imgHTML:e,closeModal:t})=>Object(p.jsx)(f.EuiModal,{onClose:t},Object(p.jsx)(f.EuiModalBody,null,Object(p.jsx)("div",{className:"indexPatternFieldEditor__previewImageModal__wrapper",dangerouslySetInnerHTML:{__html:B(e)}}))),U=({field:{key:e,value:t,formattedValue:i,isPinned:o=!1},toggleIsPinned:l,hasScriptError:s,isFromScript:d=!1})=>{const{isLoadingPreview:u}=I(),[c,m]=Object(n.useState)(!1),b=A()("indexPatternFieldEditor__previewFieldList__item",{"indexPatternFieldEditor__previewFieldList__item--highlighted":d,"indexPatternFieldEditor__previewFieldList__item--pinned":o}),j=null==i?void 0:i.includes("<img");return Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiFlexGroup,{className:b,gutterSize:"none","data-test-subj":"listItem"},Object(p.jsx)(f.EuiFlexItem,{className:"indexPatternFieldEditor__previewFieldList__item__key"},Object(p.jsx)("div",{className:"indexPatternFieldEditor__previewFieldList__item__key__wrapper","data-test-subj":"key"},d&&!Boolean(e)?Object(p.jsx)("span",{className:"indexPatternFieldEditor__previewFieldList--ligthWeight"},Object(p.jsx)(f.EuiTextColor,{color:"subdued"},a.i18n.translate("indexPatternFieldEditor.fieldPreview.fieldNameNotSetLabel",{defaultMessage:"Field name not set"}))):e)),Object(p.jsx)(f.EuiFlexItem,{className:"indexPatternFieldEditor__previewFieldList__item__value","data-test-subj":"value"},d&&u?Object(p.jsx)("span",{className:"indexPatternFieldEditor__previewFieldList--ligthWeight"},Object(p.jsx)(L,null)):s?Object(p.jsx)("div",null,Object(p.jsx)(f.EuiBadge,{iconType:"alert",color:"danger","data-test-subj":"scriptErrorBadge"},a.i18n.translate("indexPatternFieldEditor.fieldPreview.scriptErrorBadgeLabel",{defaultMessage:"Script error"}))):d&&void 0===t?Object(p.jsx)("span",{className:"indexPatternFieldEditor__previewFieldList--ligthWeight"},Object(p.jsx)(f.EuiTextColor,{color:"subdued"},a.i18n.translate("indexPatternFieldEditor.fieldPreview.valueNotSetLabel",{defaultMessage:"Value not set"}))):j?Object(p.jsx)(f.EuiButtonEmpty,{color:"text",onClick:()=>m(!0),iconType:"image"},a.i18n.translate("indexPatternFieldEditor.fieldPreview.viewImageButtonLabel",{defaultMessage:"View image"})):(x=void 0!==i?Object(p.jsx)("span",{className:"indexPatternFieldEditor__previewFieldList__item__value__wrapper",dangerouslySetInnerHTML:{__html:i}}):Object(p.jsx)("span",{className:"indexPatternFieldEditor__previewFieldList__item__value__wrapper"},JSON.stringify(t)),Object(p.jsx)(f.EuiToolTip,{position:"top",content:"string"!=typeof t?JSON.stringify(t):t},x))),Object(p.jsx)(f.EuiFlexItem,{className:"indexPatternFieldEditor__previewFieldList__item__actions",grow:!1},l&&Object(p.jsx)(f.EuiButtonIcon,{onClick:()=>{l(e)},color:"text",iconType:"pinFilled","data-test-subj":"pinFieldButton","aria-label":a.i18n.translate("indexPatternFieldEditor.fieldPreview.pinFieldButtonLabel",{defaultMessage:"Pin field"}),className:"indexPatternFieldEditor__previewFieldList__item__actionsBtn"}))),c&&Object(p.jsx)(W,{imgHTML:i,closeModal:()=>m(!1)}));var x};var $=i(61),G=i.n($);function H(e){return e.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}i(63);const q=({height:e,clearSearch:t,searchValue:i=""})=>{const{dataView:o}=E(),{currentDocument:{value:l},pinnedFields:{value:s,set:d}}=I(),[u,c]=Object(n.useState)(!1),{fields:{getAll:m}}=o,b=Object(n.useMemo)((()=>m()),[m]),j=Object(n.useMemo)((()=>b.map((({name:e,displayName:t})=>{const i=Object(v.get)(null==l?void 0:l._source,e);return{key:t,value:i,formattedValue:S(i),isPinned:!1}})).filter((({value:e})=>void 0!==e))),[b,null==l?void 0:l._source]),x=Object(n.useMemo)((()=>{const e=[],t=[];return j.forEach((i=>{s[i.key]?e.push({...i,isPinned:!0}):t.push({...i,isPinned:!1})})),[...e,...t]}),[j,s]),{filteredFields:g,totalFields:h}=Object(n.useMemo)((()=>{const e=""===i.trim()?x:x.filter((({key:e})=>function(e,t){const i=`.*${e.split("").map(H).join(".*")}.*`;return new RegExp(i,"i").test(t)}(i,e))),t=e.length;return u?{filteredFields:e,totalFields:t}:{filteredFields:e.filter(((e,t)=>t<7)),totalFields:t}}),[x,u,i]),_=""!==i.trim()&&0===h,O=Math.min(40*g.length,e-40),F=Object(n.useCallback)((()=>{c((e=>!e))}),[]),y=Object(n.useCallback)((e=>{d((t=>{const i=!t[e];return{...t,[e]:i}}))}),[d]);return void 0===l||-1===e?null:Object(p.jsx)("div",{className:"indexPatternFieldEditor__previewFieldList"},_?Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiSpacer,null),Object(p.jsx)(f.EuiEmptyPrompt,{iconType:"search",title:Object(p.jsx)(f.EuiTextColor,{color:"subdued"},Object(p.jsx)("h3",{className:"indexPatternFieldEditor__previewEmptySearchResult__title"},a.i18n.translate("indexPatternFieldEditor.fieldPreview.searchResult.emptyPromptTitle",{defaultMessage:"No matching fields in this data view"}))),titleSize:"xs",actions:Object(p.jsx)(f.EuiButton,{onClick:t,"data-test-subj":"clearSearchButton"},a.i18n.translate("indexPatternFieldEditor.fieldPreview.searchResult.emptyPrompt.clearSearchButtonLabel",{defaultMessage:"Clear search"})),"data-test-subj":"emptySearchResult"})):Object(p.jsx)(G.a,{style:{overflowX:"hidden"},width:"100%",height:O,itemCount:g.length,itemSize:40,overscanCount:4,renderItem:({index:e,style:t})=>{const i=g[e];return Object(p.jsx)("div",{key:i.key,style:t,"data-test-subj":"indexPatternFieldList"},Object(p.jsx)(U,{key:i.key,field:i,toggleIsPinned:y}))}}),h<=7?null:Object(p.jsx)("div",{className:"indexPatternFieldEditor__previewFieldList__showMore"},Object(p.jsx)(f.EuiButtonEmpty,{onClick:F,flush:"left"},u?a.i18n.translate("indexPatternFieldEditor.fieldPreview.showLessFieldsButtonLabel",{defaultMessage:"Show less"}):a.i18n.translate("indexPatternFieldEditor.fieldPreview.showMoreFieldsButtonLabel",{defaultMessage:"Show more"}))))};i(68);const Z=()=>{const[e,t]=Object(n.useState)(-1),[i,o]=Object(n.useState)(""),{params:{value:{name:l,script:s,format:d}},isLoadingPreview:u,fields:c,error:m,documents:{fetchDocError:b},reset:j,isPreviewAvailable:x}=I();let v=!1;const g=null===l&&null===s&&null===d,h=null!==m||c.length>0;g?v=!0:h||u||null!==l||null!==d||(v=!0);const _=null===b,E=!1===x&&null===b,O=Object(n.useCallback)((({height:e})=>{t(e)}),[]);return Object(n.useEffect)((()=>j),[j]),Object(p.jsx)("div",{className:"indexPatternFieldEditor__previewPannel",tabIndex:0},v?Object(p.jsx)(N,null):Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(k,null),Object(p.jsx)(f.EuiSpacer,null),E?Object(p.jsx)(f.EuiCallOut,{title:a.i18n.translate("indexPatternFieldEditor.fieldPreview.notAvailableWarningCallout.title",{defaultMessage:"Preview not available"}),color:"warning",iconType:"alert",role:"alert","data-test-subj":"previewNotAvailableCallout"},Object(p.jsx)("p",null,a.i18n.translate("indexPatternFieldEditor.fieldPreview.notAvailableWarningCallout.description",{defaultMessage:"Runtime field preview is disabled because no documents could be fetched from the cluster."}))):Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(z,null),Object(p.jsx)(f.EuiSpacer,{size:"s"}),_&&Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiFieldSearch,{value:i,onChange:e=>o(e.target.value),placeholder:a.i18n.translate("indexPatternFieldEditor.fieldPreview.filterFieldsPlaceholder",{defaultMessage:"Filter fields"}),fullWidth:!0,"data-test-subj":"filterFieldsInput"}),Object(p.jsx)(f.EuiSpacer,{size:"s"})),Object(p.jsx)(D,null),Object(p.jsx)(f.EuiSpacer,{size:"s"}),_&&Object(p.jsx)(r.a.Fragment,null,0===c.length?null:Object(p.jsx)("ul",null,c.map(((e,t)=>Object(p.jsx)("li",{key:t,"data-test-subj":"fieldPreviewItem"},Object(p.jsx)(U,{field:e,isFromScript:!0,hasScriptError:Boolean(m)}))))),Object(p.jsx)(f.EuiResizeObserver,{onResize:O},(t=>Object(p.jsx)("div",{ref:t,style:{flex:1}},Object(p.jsx)(q,{height:e,clearSearch:()=>o(""),searchValue:i,key:e}))))))))},J=[{label:"Keyword",value:"keyword"},{label:"Long",value:"long"},{label:"Double",value:"double"},{label:"Date",value:"date"},{label:"IP",value:"ip"},{label:"Boolean",value:"boolean"},{label:"Geo point",value:"geo_point"}],Q=[...J,{label:"Composite",value:"composite"}],{containsCharsField:Y,emptyField:X,numberGreaterThanField:K}=g.h,ee={invalidScriptErrorMessage:a.i18n.translate("indexPatternFieldEditor.editor.form.scriptEditorPainlessValidationMessage",{defaultMessage:"Invalid Painless script."})},te={name:{label:a.i18n.translate("indexPatternFieldEditor.editor.form.nameLabel",{defaultMessage:"Name"}),validations:[{validator:X(a.i18n.translate("indexPatternFieldEditor.editor.form.validations.nameIsRequiredErrorMessage",{defaultMessage:"A name is required."}))},{validator:Y({message:a.i18n.translate("indexPatternFieldEditor.editor.form.validations.starCharacterNotAllowedValidationErrorMessage",{defaultMessage:"The field cannot have * in the name."}),chars:"*"})}]},type:{label:a.i18n.translate("indexPatternFieldEditor.editor.form.runtimeTypeLabel",{defaultMessage:"Type"}),defaultValue:[Q[0]],fieldsToValidateOnChange:["script.source"]},script:{source:{label:a.i18n.translate("indexPatternFieldEditor.editor.form.defineFieldLabel",{defaultMessage:"Define script"}),validations:[{validator:X(a.i18n.translate("indexPatternFieldEditor.editor.form.validations.scriptIsRequiredErrorMessage",{defaultMessage:"A script is required to set the field value."}))},{validator:async({customData:{provider:e}})=>{const t=await e();if(t&&"PAINLESS_SCRIPT_ERROR"===t.code)return{message:ee.invalidScriptErrorMessage}},isAsync:!0}]}},customLabel:{label:a.i18n.translate("indexPatternFieldEditor.editor.form.customLabelLabel",{defaultMessage:"Custom label"}),validations:[{validator:X(a.i18n.translate("indexPatternFieldEditor.editor.form.validations.customLabelIsRequiredErrorMessage",{defaultMessage:"Give a label to the field."}))}]},popularity:{label:a.i18n.translate("indexPatternFieldEditor.editor.form.popularityLabel",{defaultMessage:"Popularity"}),validations:[{validator:X(a.i18n.translate("indexPatternFieldEditor.editor.form.validations.popularityIsRequiredErrorMessage",{defaultMessage:"Give a popularity to the field."}))},{validator:K({than:0,allowEquality:!0,message:a.i18n.translate("indexPatternFieldEditor.editor.form.validations.popularityGreaterThan0ErrorMessage",{defaultMessage:"The popularity must be zero or greater."})})}]},fields:{defaultValue:{}},__meta__:{isCustomLabelVisible:{defaultValue:!1},isValueVisible:{defaultValue:!1},isFormatVisible:{defaultValue:!1},isPopularityVisible:{defaultValue:!1}}};let ie;!function(e){e.UPSERT="upsert",e.DELETE="delete"}(ie||(ie={}));const ne=e=>({value:t})=>e.fields.includes(t)?{message:a.i18n.translate("indexPatternFieldEditor.editor.runtimeFieldsEditor.existRuntimeFieldNamesValidationErrorMessage",{defaultMessage:"A field with this name already exists."})}:e.runtimeComposites.includes(t)?{message:a.i18n.translate("indexPatternFieldEditor.editor.runtimeFieldsEditor.existCompositeNamesValidationErrorMessage",{defaultMessage:"A runtime composite with this name already exists."})}:void 0,re=({isDisabled:e=!1,includeComposite:t,path:i,defaultValue:n=[J[0]]})=>Object(p.jsx)(g.f,{path:i},(({label:i,value:o,setValue:l})=>void 0===o?null:Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiFormRow,{label:i,fullWidth:!0},Object(p.jsx)(f.EuiComboBox,{placeholder:a.i18n.translate("indexPatternFieldEditor.editor.form.runtimeType.placeholderLabel",{defaultMessage:"Select a type"}),singleSelection:{asPlainText:!0},options:t?Q:J,selectedOptions:o||n,onChange:e=>{0!==e.length&&l(e)},isClearable:!1,isDisabled:e,"data-test-subj":"typeField","aria-label":a.i18n.translate("indexPatternFieldEditor.editor.form.typeSelectAriaLabel",{defaultMessage:"Type select"}),fullWidth:!0}))))),ae=()=>Object(p.jsx)(g.f,{path:"customLabel",component:g.d}),oe=()=>Object(p.jsx)(g.f,{path:"popularity",component:g.c,componentProps:{euiFieldProps:{"data-test-subj":"editorFieldCount"}}}),le=e=>{switch(e){case"keyword":default:return"string_script_field_script_field";case"long":return"long_script_field_script_field";case"double":return"double_script_field_script_field";case"date":return"date_script_field";case"ip":return"ip_script_field_script_field";case"boolean":return"boolean_script_field_script_field"}},se=({existingConcreteFields:e,links:t,placeholder:i})=>{const o=Object(n.useRef)(null),s=Object(n.useRef)(),u=Object(n.useRef)(""),{error:c,isLoadingPreview:b,isPreviewAvailable:j,currentDocument:{isLoading:x,value:v},validation:{setScriptEditorValidation:h}}=I(),[_,E]=Object(g.k)(void 0),[O,F]=Object(n.useState)(le(te.type.defaultValue[0].value)),y=null==v?void 0:v._id,w=Object(n.useMemo)((()=>d.PainlessLang.getSuggestionProvider(O,e)),[O,e]),{validateFields:P}=Object(g.m)(),C=Object(n.useCallback)((({type:e})=>{void 0!==e&&F(le(e[0].value)),j&&E(void 0)}),[E,j]);Object(g.n)({watch:["type","script.source"],onChange:C});const S=Object(n.useCallback)((async()=>(await Object(l.firstValueFrom)(_.pipe(Object(l.first)((e=>void 0!==e&&!e.isFetchingDoc&&!e.isLoadingPreview))))).error),[_]),M=Object(n.useCallback)((e=>{o.current=e,s.current&&s.current.unsubscribe(),s.current=d.PainlessLang.validation$().subscribe((({isValid:e,isValidating:t,errors:i})=>{var n,r;h({isValid:e,isValidating:t,message:null!==(n=null===(r=i[0])||void 0===r?void 0:r.message)&&void 0!==n?n:null})}))}),[h]),T=Object(n.useCallback)((e=>{var t;const i=null===(t=o.current)||void 0===t?void 0:t.getModel();i&&d.monaco.editor.setModelMarkers(i,d.PainlessLang.ID,e)}),[]),L=Object(n.useCallback)((e=>{var t;const i=null===(t=o.current)||void 0===t?void 0:t.getModel();if(null!==e.position&&Boolean(i)){const{offset:t}=e.position,n=(({reason:e},t)=>({startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:t.lineNumber,endColumn:t.column+1,message:e,severity:d.monaco.MarkerSeverity.Error}))(e,i.getPositionAt(t));T(n?[n]:[])}}),[T]);return Object(n.useEffect)((()=>{""!==u.current.trim()&&void 0!==y&&P(["script.source"])}),[y,P]),Object(n.useEffect)((()=>{E({isFetchingDoc:x,isLoadingPreview:b,error:c})}),[E,x,b,c]),Object(n.useEffect)((()=>{"PAINLESS_SCRIPT_ERROR"===(null==c?void 0:c.code)?L(c.error):null===c&&T([])}),[c,L,T]),Object(n.useEffect)((()=>()=>{s.current&&s.current.unsubscribe()}),[]),Object(p.jsx)(g.f,{path:"script.source",validationDataProvider:S},(({value:e,setValue:n,label:o,isValid:l,getErrorsMessages:s})=>{let b=s();return c&&(b=c.error.reason),u.current=e,Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiFormRow,{label:o,hasChildLabel:!1,id:"runtimeFieldScript",error:b,isInvalid:!l,"data-test-subj":"scriptFieldRow",helpText:Object(p.jsx)(m.FormattedMessage,{id:"indexPatternFieldEditor.editor.form.source.scriptFieldHelpText",defaultMessage:"Runtime fields without a script retrieve values from {source}. If the field doesn't exist in _source, a search request returns no value. {learnMoreLink}",values:{learnMoreLink:Object(p.jsx)(f.EuiLink,{href:t.runtimePainless,target:"_blank",external:!0,"data-test-subj":"painlessSyntaxLearnMoreLink"},a.i18n.translate("indexPatternFieldEditor.editor.form.script.learnMoreLinkText",{defaultMessage:"Learn about script syntax."})),source:Object(p.jsx)(f.EuiCode,null,"_source")}}),fullWidth:!0},Object(p.jsx)(g.a,{languageId:d.PainlessLang.ID,suggestionProvider:w,width:"99%",height:"210px",value:e,onChange:n,editorDidMount:M,options:{fontSize:12,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0,suggest:{snippetsPreventQuickSuggestions:!1}},"data-test-subj":"scriptField","aria-label":a.i18n.translate("indexPatternFieldEditor.editor.form.scriptEditorAriaLabel",{defaultMessage:"Script editor"}),placeholder:i})))}))},de=r.a.memo(se);var ue=i(19);const ce=()=>{const{dataView:e,uiSettings:t,fieldFormats:i,fieldFormatEditors:a}=E(),o=Object(n.useRef)(!1),[{type:l}]=Object(g.n)({watch:["name","type"]}),{getFields:s,isSubmitted:d}=Object(g.m)(),[u,c]=Object(n.useState)(),m=l.reduce(((e,t)=>(void 0!==t.value&&e.push(t.value),e)),[]);return Object(n.useEffect)((()=>{void 0===u?s().format.setErrors([]):s().format.setErrors([{message:u}])}),[u,s]),Object(n.useEffect)((()=>{o.current&&s().format.reset(),o.current=!0}),[l,s]),Object(p.jsx)(g.f,{path:"format"},(({setValue:n,errors:o,value:l})=>Object(p.jsx)(r.a.Fragment,null,d&&o.length>0&&Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiCallOut,{title:o.map((e=>e.message)),color:"danger",iconType:"cross","data-test-subj":"formFormatError"}),Object(p.jsx)(f.EuiSpacer,{size:"m"})),Object(p.jsx)(ue.a,{esTypes:m||["keyword"],indexPattern:e,fieldFormatEditors:a,fieldFormats:i,uiSettings:t,onChange:n,onError:c,value:l,key:m.join(", ")}))))},fe=({children:e})=>{const[t,i]=Object(n.useState)(!1);return Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiButtonEmpty,{onClick:()=>{i(!t)},flush:"left","data-test-subj":"toggleAdvancedSetting"},t?a.i18n.translate("indexPatternFieldEditor.editor.form.advancedSettings.hideButtonLabel",{defaultMessage:"Hide advanced settings"}):a.i18n.translate("indexPatternFieldEditor.editor.form.advancedSettings.showButtonLabel",{defaultMessage:"Show advanced settings"})),Object(p.jsx)("div",{style:{display:t?"block":"none"},"data-test-subj":"advancedSettings"},Object(p.jsx)(f.EuiSpacer,{size:"m"}),Object(p.jsx)("div",null,e)))},me=({title:e,description:t,children:i,formFieldPath:n,withDividerRule:a=!1,"data-test-subj":o})=>{const[l]=Object(g.n)({watch:n}),s=Boolean(Object(v.get)(l,n));return Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiFlexGroup,{"data-test-subj":null!=o?o:"formRow"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(g.f,{path:n,component:g.e,componentProps:{euiFieldProps:{label:e,showLabel:!1,"data-test-subj":"toggle"}}})),Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)("div",null,Object(p.jsx)(f.EuiTitle,{size:"xs"},Object(p.jsx)("h3",null,e)),Object(p.jsx)(f.EuiSpacer,{size:"xs"}),Object(p.jsx)(f.EuiText,{size:"s",color:"subdued"},t),s&&Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiSpacer,{size:"l"}),i)))),a&&Object(p.jsx)(f.EuiHorizontalRule,null))},pe=({})=>{const{links:e,existingConcreteFields:t,fieldTypeToProcess:i}=E(),n={customLabel:{title:a.i18n.translate("indexPatternFieldEditor.editor.form.customLabelTitle",{defaultMessage:"Set custom label"}),description:a.i18n.translate("indexPatternFieldEditor.editor.form.customLabelDescription",{defaultMessage:"Create a label to display in place of the field name in Discover, Maps, and Visualize. Useful for shortening a long field name.  Queries and filters use the original field name."})},value:{title:a.i18n.translate("indexPatternFieldEditor.editor.form.valueTitle",{defaultMessage:"Set value"}),description:Object(p.jsx)(m.FormattedMessage,{id:"indexPatternFieldEditor.editor.form.valueDescription",defaultMessage:"Set a value for the field instead of retrieving it from the field with the same name in {source}.",values:{source:Object(p.jsx)(f.EuiCode,null,"_source")}})},format:{title:a.i18n.translate("indexPatternFieldEditor.editor.form.formatTitle",{defaultMessage:"Set format"}),description:a.i18n.translate("indexPatternFieldEditor.editor.form.formatDescription",{defaultMessage:"Set your preferred format for displaying the value. Changing the format can affect the value and prevent highlighting in Discover."})},popularity:{title:a.i18n.translate("indexPatternFieldEditor.editor.form.popularityTitle",{defaultMessage:"Set popularity"}),description:a.i18n.translate("indexPatternFieldEditor.editor.form.popularityDescription",{defaultMessage:"Adjust the popularity to make the field appear higher or lower in the fields list.  By default, Discover orders fields from most selected to least selected."})}};return Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(me,{title:n.customLabel.title,description:n.customLabel.description,formFieldPath:"__meta__.isCustomLabelVisible","data-test-subj":"customLabelRow",withDividerRule:!0},Object(p.jsx)(ae,null)),"runtime"===i&&Object(p.jsx)(me,{title:n.value.title,description:n.value.description,formFieldPath:"__meta__.isValueVisible","data-test-subj":"valueRow",withDividerRule:!0},Object(p.jsx)(de,{existingConcreteFields:t,links:e})),Object(p.jsx)(me,{title:n.format.title,description:n.format.description,formFieldPath:"__meta__.isFormatVisible","data-test-subj":"formatRow",withDividerRule:!0},Object(p.jsx)(ce,null)),Object(p.jsx)(fe,null,Object(p.jsx)(me,{title:n.popularity.title,description:n.popularity.description,formFieldPath:"__meta__.isPopularityVisible","data-test-subj":"popularityRow",withDividerRule:!0},Object(p.jsx)(oe,null))))};var be=i(73),je=i.n(be);const xe=({onReset:e})=>{const{links:t,existingConcreteFields:i,subfields$:n}=E(),o=je()(n)||{};return Object(p.jsx)("div",{"data-test-subj":"compositeEditor"},Object(p.jsx)(de,{existingConcreteFields:i,links:t,placeholder:"emit('field_name', 'hello world');"}),Object(p.jsx)(f.EuiSpacer,{size:"xl"}),Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"spaceBetween"},Object(p.jsx)(f.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiText,{size:"s"},Object(p.jsx)(m.FormattedMessage,{id:"indexPatternFieldEditor.editor.compositeFieldsCount",defaultMessage:"Generated fields"}))),Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiNotificationBadge,{color:"subdued"},Object.entries(o).length))),Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonEmpty,{flush:"right",iconType:"refresh",onClick:e},Object(p.jsx)(m.FormattedMessage,{id:"indexPatternFieldEditor.editor.compositeRefreshTypes",defaultMessage:"Reset"})))),Object.entries(o).map((([e,t],i)=>{return Object(p.jsx)("div",null,Object(p.jsx)(f.EuiFlexGroup,{gutterSize:"s"},Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(f.EuiFieldText,{value:e,disabled:!0})),Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(f.EuiFormRow,{fullWidth:!0},Object(p.jsx)(f.EuiComboBox,{placeholder:a.i18n.translate("indexPatternFieldEditor.editor.form.runtimeType.placeholderLabel",{defaultMessage:"Select a type"}),singleSelection:{asPlainText:!0},options:J,selectedOptions:[(r=t.type,J.find((({value:e})=>e===r)))],onChange:t=>{0!==t.length&&(o[e]={type:t[0].value},n.next({...o}))},isClearable:!1,"data-test-subj":`typeField_${i}`,"aria-label":a.i18n.translate("indexPatternFieldEditor.editor.form.typeSelectAriaLabel",{defaultMessage:"Type select"}),fullWidth:!0})))));var r}))))},ve=a.i18n.translate("indexPatternFieldEditor.editor.form.changeWarning",{defaultMessage:"Changing name or type can break searches and visualizations that rely on this field."}),ge=e=>{const t=(e=>{if(e){var t;const i=null===(t=Q.find((({value:t})=>t===e)))||void 0===t?void 0:t.label;return[{label:null!=i?i:e,value:e}]}return[Q[0]]})(e.type),i=null===e.format?void 0:e.format;return{...e,type:t,format:i,__meta__:{isCustomLabelVisible:void 0!==e.customLabel,isValueVisible:void 0!==e.script,isFormatVisible:void 0!==e.format,isPopularityVisible:void 0!==e.popularity}}},he=e=>{const{__meta__:t,type:i,format:n,...r}=e;return{type:i&&i[0].value,format:void 0===n?null:n,...r}},_e=({field:e,onChange:t,onFormModifiedChange:i})=>{var o,s;const{namesNotAllowed:d,fieldTypeToProcess:u,fieldName$:c,subfields$:m}=E(),{params:{update:b},fieldPreview$:j}=I(),{form:x}=Object(g.l)({defaultValue:e,schema:te,deserializer:ge,serializer:he}),{submit:h,isValid:_,isSubmitted:O,getFields:F,isSubmitting:y}=x,w=((e,t)=>{var i;const n=te.name;if(!e)return n;const r=e=>e!==(null==t?void 0:t.name);return{...n,validations:[...null!==(i=n.validations)&&void 0!==i?i:[],{validator:ne({fields:e.fields.filter(r),runtimeComposites:e.runtimeComposites.filter(r)})}]}})(d,e),[P]=Object(g.n)({form:x}),C=Object(g.o)({form:x,discard:["__meta__.isCustomLabelVisible","__meta__.isValueVisible","__meta__.isFormatVisible","__meta__.isPopularityVisible"]});Object(n.useEffect)((()=>{const e=x.subscribe((({data:e})=>{e.internal.name!==c.getValue()&&c.next(e.internal.name)}));return()=>{e.unsubscribe()}}),[x,c]);const{name:S,type:M,script:T,format:L}=P,{name:R,type:k}=F(),N=null!==(o=Boolean(null==e?void 0:e.name)&&(null==R?void 0:R.isModified))&&void 0!==o&&o,z=null!==(s=Boolean(null==e?void 0:e.type)&&(null==k?void 0:k.isModified))&&void 0!==s&&s,D=Object(v.get)(P,"__meta__.isValueVisible"),V=Object(n.useCallback)((()=>{const e=j.getValue();j.next([]),j.next(e)}),[j]);return Object(n.useEffect)((()=>{const e=!!Object.keys(m.getValue()||{}).length,t=j.pipe(Object(l.filter)((e=>void 0!==e)),Object(l.map)((e=>e.map((e=>({name:e.key.slice(e.key.search("\\.")+1),type:e.type}))))),Object(l.bufferCount)(2,1),Object(l.map)((([e,t])=>{const i=Object(v.differenceWith)(t,e,v.isEqual).reduce(((e,t)=>(e[t.name]={changeType:ie.UPSERT,type:t.type},e)),{});return e.forEach((e=>{t.find((t=>t.name===e.name))||(i[e.name]={changeType:ie.DELETE})})),i})),Object(l.filter)((e=>Object.keys(e).length>0))).subscribe((e=>{const t={...m.getValue()};Object.entries(e).forEach((([e,i])=>{i.changeType===ie.DELETE&&delete t[e],i.changeType===ie.UPSERT&&(t[e]={type:i.type})})),m.next(t),x.updateFieldValues({...x.getFormData()})}));return e?j.getValue()&&j.next(j.getValue()):j.next([]),()=>{t.unsubscribe()}}),[x,j,m]),Object(n.useEffect)((()=>{t&&t({isValid:_,isSubmitted:O,isSubmitting:y,submit:h})}),[t,_,O,y,h]),Object(n.useEffect)((()=>{b({name:Boolean(null==S?void 0:S.trim())?S:null,type:null==M?void 0:M[0].value,script:!1===D||!1===Boolean(null==T?void 0:T.source.trim())?null:{source:T.source},format:void 0!==(null==L?void 0:L.id)?L:null,parentName:null==e?void 0:e.parentName})}),[S,M,T,D,L,b,e]),Object(n.useEffect)((()=>{i&&i(C)}),[C,i,x]),Object(p.jsx)(g.b,{form:x,className:"indexPatternFieldEditor__form","data-test-subj":"indexPatternFieldEditorForm",isInvalid:O&&!1===_,error:x.getErrors()},Object(p.jsx)(f.EuiFlexGroup,null,Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(g.f,{path:"name",config:w,component:g.d,"data-test-subj":"nameField",componentProps:{euiFieldProps:{disabled:"concrete"===u,"aria-label":a.i18n.translate("indexPatternFieldEditor.editor.form.nameAriaLabel",{defaultMessage:"Name field"})}}})),Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(re,{isDisabled:"concrete"===u,includeComposite:!0,path:"type"}))),(N||z)&&Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiSpacer,{size:"xs"}),Object(p.jsx)(f.EuiCallOut,{color:"warning",title:ve,iconType:"alert",size:"s","data-test-subj":"changeWarning"})),Object(p.jsx)(f.EuiSpacer,{size:"xl"}),(null==e?void 0:e.parentName)&&Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiCallOut,{iconType:"iInCircle",title:a.i18n.translate("indexPatternFieldEditor.editor.form.subFieldParentInfo",{defaultMessage:"Field value is defined by '{parentName}'",values:{parentName:null==e?void 0:e.parentName}})}),Object(p.jsx)(f.EuiSpacer,{size:"xl"})),M&&"composite"!==M[0].value?Object(p.jsx)(pe,null):Object(p.jsx)(xe,{onReset:V}))};var Ee=i(57),Oe=i.n(Ee);i(75);let Fe=0;const ye=Object(n.createContext)({addPanel:()=>({removePanel:()=>{},isFixedWidth:!1})}),we=(e,{innerWidth:t})=>Math.min(e,.8*t),Pe=Object(n.createContext)({registerFooter:()=>{},registerContent:()=>{}}),Ce=()=>{const e=Object(n.useContext)(Pe);if(void 0===e)throw new Error("useFlyoutPanel() must be used within a <flyoutPanelContext.Provider />");return e},Se=({maxWidth:e,flyoutClassName:t,fixedPanelWidths:i=!1,...r})=>{const a=Object(n.useMemo)((()=>{const e=document.getElementsByClassName(t);return 0===e.length?null:e.item(0)}),[t]),[o,l]=Object(n.useState)({}),s=Object(n.useCallback)((e=>{l((t=>{const{[e]:i,...n}=t;return n}))}),[]),d=Object(n.useCallback)((e=>{const t=Fe++;return l((i=>({...i,[t]:e}))),{removePanel:s.bind(null,t),isFixedWidth:i}}),[s,i]),u=Object(n.useMemo)((()=>({addPanel:d})),[d]);return Object(n.useLayoutEffect)((()=>{if(!a)return;let t;if("number"==typeof e)if(i){const i=Object.values(o).reduce(((e,{width:t=0})=>e+t),0);t=Math.min(e,i),a.style.minWidth=`${we(t,window)}px`,a.style.maxWidth=`${we(t,window)}px`}else{const i=Math.min(100,Object.values(o).reduce(((e,{width:t=0})=>e+t),0));t=e*i/100,a.style.maxWidth=`${we(t,window)}px`}else a.style.minWidth="",a.style.maxWidth=""}),[o,e,i,t,a]),Object(p.jsx)(ye.Provider,{value:u},Object(p.jsx)(f.EuiFlexGroup,Oe()({className:"fieldEditor__flyoutPanels",gutterSize:"none"},r)))},Me=({children:e,width:t,className:i="",backgroundColor:r,border:a,"data-test-subj":o,...l})=>{const[s,d]=Object(n.useState)({hasContent:!1,hasFooter:!1}),[u,c]=Object(n.useState)({}),m=A()("fieldEditor__flyoutPanel",i,{"fieldEditor__flyoutPanel--pageBackground":"euiPageBackground"===r,"fieldEditor__flyoutPanel--emptyShade":"euiEmptyShade"===r,"fieldEditor__flyoutPanel--leftBorder":"left"===a,"fieldEditor__flyoutPanel--rightBorder":"right"===a,"fieldEditor__flyoutPanel--withContent":s.hasContent}),{addPanel:b}=(()=>{const e=Object(n.useContext)(ye);if(void 0===e)throw new Error("<Panel /> must be used within a <Panels /> wrapper");return e})(),j=Object(n.useCallback)((()=>{d((e=>({...e,hasContent:!0})))}),[]),x=Object(n.useCallback)((()=>{d((e=>{if(!e.hasContent)throw new Error("You need to add a <FlyoutPanels.Content /> when you add a <FlyoutPanels.Footer />");return{...e,hasFooter:!0}}))}),[]),v=Object(n.useMemo)((()=>({registerContent:j,registerFooter:x})),[x,j]);return Object(n.useLayoutEffect)((()=>{const{removePanel:e,isFixedWidth:i}=b({width:t});return t&&c((e=>i?{...e,width:`${t}px`}:{...e,minWidth:`${t}%`})),e}),[t,b]),Object(p.jsx)(f.EuiFlexItem,{className:"fieldEditor__flyoutPanels__column",style:u,grow:!1,"data-test-subj":o},Object(p.jsx)(Pe.Provider,{value:v},Object(p.jsx)("div",Oe()({className:m},l),e)))},Te=e=>{const{registerContent:t}=Ce();return Object(n.useEffect)((()=>{t()}),[t]),Object(p.jsx)("div",Oe()({className:"fieldEditor__flyoutPanel__content",tabIndex:0},e))},Ie=e=>Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiFlyoutHeader,Oe()({className:"fieldEditor__flyoutPanel__header"},e)),Object(p.jsx)(f.EuiSpacer,null)),Le=e=>{const{registerFooter:t}=Ce();return Object(n.useEffect)((()=>{t()}),[t]),Object(p.jsx)(f.EuiFlyoutFooter,Oe()({className:"fieldEditor__flyoutPanel__footer"},e))},Re={cancelButtonLabel:a.i18n.translate("indexPatternFieldEditor.editor.flyoutCancelButtonLabel",{defaultMessage:"Cancel"}),saveButtonLabel:a.i18n.translate("indexPatternFieldEditor.editor.flyoutSaveButtonLabel",{defaultMessage:"Save"})},ke={confirmChangeNameOrType:!1,confirmUnsavedChanges:!1},Ne=({fieldToEdit:e,fieldToCreate:t,onSave:i,onCancel:a,isSavingField:o,onMounted:l})=>{const d=Object(n.useRef)(!1),u=!!e,{dataView:c,subfields$:b}=E(),v=Object(f.useIsWithinMaxBreakpoint)("s"),{panel:{isVisible:g}}=I(),[h,_]=Object(n.useState)({isSubmitted:!1,isSubmitting:!1,isValid:!!e||void 0,submit:e?async()=>({isValid:!0,data:e}):async()=>({isValid:!1,data:{}})}),[O,F]=Object(n.useState)(ke),[y,w]=Object(n.useState)(!1),{submit:P,isValid:C,isSubmitting:S}=h,M=!1===C,T=Object(n.useCallback)((()=>(y&&F({...ke,confirmUnsavedChanges:!0}),!y)),[y]),L=Object(n.useCallback)((async()=>{const{isValid:t,data:n}=await P();if(d.current&&t){const t=(null==e?void 0:e.name)!==n.name,r=(null==e?void 0:e.type)!==n.type;u&&(t||r)?F({...ke,confirmChangeNameOrType:!0}):"composite"===n.type?i({...n,fields:b.getValue()}):i(n)}}),[i,P,e,u,b]),R=Object(n.useCallback)((()=>{T()&&a()}),[a,T]);return Object(n.useEffect)((()=>{if(l)return l({canCloseValidator:T}),()=>{l({canCloseValidator:()=>!0})}}),[l,T]),Object(n.useEffect)((()=>(d.current=!0,()=>{d.current=!1})),[]),Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(Se,{flyoutClassName:s.a,maxWidth:!v&&1180,"data-test-subj":"fieldEditor",fixedPanelWidths:!0},Object(p.jsx)(Me,{width:600},Object(p.jsx)(Te,null,Object(p.jsx)(Ie,null,Object(p.jsx)(f.EuiTitle,{"data-test-subj":"flyoutTitle"},Object(p.jsx)("h2",null,e?Object(p.jsx)(m.FormattedMessage,{id:"indexPatternFieldEditor.editor.flyoutEditFieldTitle",defaultMessage:"Edit field '{fieldName}'",values:{fieldName:e.name}}):Object(p.jsx)(m.FormattedMessage,{id:"indexPatternFieldEditor.editor.flyoutDefaultTitle",defaultMessage:"Create field"}))),Object(p.jsx)(f.EuiText,{color:"subdued"},Object(p.jsx)("p",null,Object(p.jsx)(m.FormattedMessage,{id:"indexPatternFieldEditor.editor.flyoutEditFieldSubtitle",defaultMessage:"Data view: {patternName}",values:{patternName:Object(p.jsx)("i",null,c.getName())}})))),Object(p.jsx)(_e,{field:null!=e?e:t,onChange:_,onFormModifiedChange:w})),Object(p.jsx)(Le,null,Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonEmpty,{iconType:"cross",flush:"left",onClick:R,"data-test-subj":"closeFlyoutButton"},Re.cancelButtonLabel)),Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButton,{color:"primary",onClick:L,"data-test-subj":"fieldSaveButton",fill:!0,disabled:M,isLoading:o||S},Re.saveButtonLabel)))))),g&&Object(p.jsx)(Me,{width:440,backgroundColor:"euiPageBackground",border:"left","data-test-subj":"previewPanel"},Object(p.jsx)(Z,null))),O.confirmChangeNameOrType?Object(p.jsx)(x,{fieldName:null==e?void 0:e.name,onConfirm:async()=>{const{data:e}=await P();"composite"===e.type?i({...e,fields:b.getValue()}):i(e)},onCancel:()=>{F(ke)}}):O.confirmUnsavedChanges?Object(p.jsx)(j,{onConfirm:()=>{F(ke),a()},onCancel:()=>{F(ke)}}):null)},ze=r.a.memo(Ne),De=({fieldToEdit:e,fieldToCreate:t,onSave:i,onCancel:r,onMounted:d,docLinks:c,fieldTypeToProcess:f,dataView:m,dataViews:b,search:j,notifications:x,usageCollection:v,apiService:g,fieldFormatEditors:h,fieldFormats:E,uiSettings:O})=>{const[F,y]=Object(n.useState)(!1),{fields:w}=m,P=Object(n.useMemo)((()=>({fields:m.fields.map((e=>e.name)),runtimeComposites:Object.entries(m.getAllRuntimeFields()).filter((([,e])=>"composite"===e.type)).map((([e])=>e))})),[m]),C=Object(n.useMemo)((()=>{const t=[];return w.filter((t=>!((null==e?void 0:e.name)===t.name)&&t.isMapped)).forEach((e=>{t.push({name:e.name,type:e.esTypes&&e.esTypes[0]||""})})),t}),[w,e]),S=Object(n.useMemo)((()=>({api:g,search:j,notifications:x})),[g,j,x]),M=Object(n.useCallback)((t=>{const i=Boolean(e)&&e.name!==t.name,n=Boolean(e)&&e.type!==t.type&&("composite"===e.type||"composite"===t.type),{script:r}=t;if("runtime"===f){try{v.reportUiCounter(s.b,o.METRIC_TYPE.COUNT,"save_runtime")}catch{}(i||n)&&m.removeRuntimeField(e.name),m.addRuntimeField(t.name,{type:t.type,script:r,fields:t.fields})}else try{v.reportUiCounter(s.b,o.METRIC_TYPE.COUNT,"save_concrete")}catch{}return m.addRuntimeField(t.name,t)}),[e,m,f,v]),I=Object(n.useCallback)((e=>{const t=m.getFieldByName(e.name);if(!t)throw new Error(`Unable to find field named '${e.name}' on index pattern '${m.getIndexPattern()}'`);return m.setFieldCustomLabel(e.name,e.customLabel),t.count=e.popularity||0,e.format?m.setFieldFormat(e.name,e.format):m.deleteFieldFormat(e.name),[t]}),[m]),L=Object(n.useCallback)((async e=>{try{v.reportUiCounter(s.b,o.METRIC_TYPE.COUNT,"runtime"===f?"save_runtime":"save_concrete")}catch{}y(!0);try{const t="runtime"===f?M(e):I(e),n=()=>{const n=a.i18n.translate("indexPatternFieldEditor.deleteField.savedHeader",{defaultMessage:"Saved '{fieldName}'",values:{fieldName:e.name}});x.toasts.addSuccess(n),y(!1),i(t)};m.isPersisted()&&await b.updateSavedObject(m),n(),y(!1)}catch(e){const t=a.i18n.translate("indexPatternFieldEditor.save.errorTitle",{defaultMessage:"Failed to save field changes"});x.toasts.addError(e,{title:t}),y(!1)}}),[i,m,b,x,f,I,M,v]);return Object(p.jsx)(_,{dataView:m,uiSettings:O,links:u(c),fieldTypeToProcess:f,services:S,fieldFormatEditors:h,fieldFormats:E,namesNotAllowed:P,existingConcreteFields:C,fieldName$:new l.BehaviorSubject((null==e?void 0:e.name)||""),subfields$:new l.BehaviorSubject(null==e?void 0:e.fields)},Object(p.jsx)(T,null,Object(p.jsx)(ze,{onSave:L,onCancel:r,onMounted:d,fieldToCreate:t,fieldToEdit:e,isSavingField:F})))}}}]);