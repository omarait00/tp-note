(window.controls_bundle_jsonpfunction=window.controls_bundle_jsonpfunction||[]).push([[5,8],{117:function(e,t,r){"use strict";r.r(t),r.d(t,"ControlGroupRenderer",(function(){return g}));var n=r(95),i=r.n(n),o=r(98),s=r.n(o),a=r(9),u=r(36),c=r(7),l=r(14),d=r(2);const g=({input:e,onEmbeddableLoad:t})=>{const r=Object(a.useRef)(null),[n,o]=Object(a.useState)(),g=Object(a.useMemo)((()=>i.a.v4()),[]);return s()((()=>{const{embeddable:n}=u.a.getServices();(async()=>{var i;const s=await(null===(i=n.getEmbeddableFactory(l.a))||void 0===i?void 0:i.create({id:g,...Object(c.getDefaultControlGroupInput)(),...e}));r.current&&s.render(r.current),o(s),t(s)})()}),(()=>{null==n||n.destroy()})),Object(a.useEffect)((()=>{let t=!1;return(async()=>{const r=await(null==n?void 0:n.getExplicitInputIsEqual({...null==n?void 0:n.getInput(),...e}));!n||r||t||n.updateInput({...e})})(),()=>{t=!0}}),[n,e]),Object(d.jsx)("div",{ref:r})};t.default=g},36:function(e,t,r){"use strict";var n=r(39);r.d(t,"a",(function(){return n.pluginServices}))},39:function(e,t,r){"use strict";r.r(t),r.d(t,"providers",(function(){return g})),r.d(t,"pluginServices",(function(){return f})),r.d(t,"registry",(function(){return v}));var n=r(6),i=r(17),o=r(5),s=r(24),a=r(0),u=r.n(a),c=r(29),l=r.n(c),d=r(25);class options_list_service_OptionsListService{constructor(e){u()(this,"data",void 0),u()(this,"http",void 0),u()(this,"getRoundedTimeRange",(e=>({from:l.a.parse(e.from).startOf("minute").toISOString(),to:l.a.parse(e.to).endOf("minute").toISOString()}))),u()(this,"optionsListCacheResolver",(e=>{const{query:t,filters:r,timeRange:n,searchString:i,runPastTimeout:o,selectedOptions:s,field:{name:a},dataView:{title:u}}=e;return[...n?JSON.stringify(this.getRoundedTimeRange(n)):[],Math.floor(Date.now()/1e3/60),null==s?void 0:s.join(","),JSON.stringify(r),JSON.stringify(t),o,u,i,a].join("|")})),u()(this,"cachedOptionsListRequest",Object(o.memoize)((async(e,t)=>{const r=e.dataView.title,n=this.getRequestBody(e);return await this.http.fetch(`/api/kibana/controls/optionsList/${r}`,{body:JSON.stringify(n),signal:t,method:"POST"})}),this.optionsListCacheResolver)),u()(this,"getRequestBody",(e=>{const t=this.data.query.timefilter.timefilter,{query:r,filters:n,dataView:i,timeRange:o,field:s,...a}=e,u=o?t.createFilter(i,o):void 0,c=[...null!=n?n:[],...u?[u]:[]];return{...a,filters:[Object(d.buildEsQuery)(i,null!=r?r:[],null!=c?c:[])],fieldName:s.name,fieldSpec:s,textFieldName:s.textFieldName,runtimeFieldMap:i.toSpec().runtimeFieldMap}})),u()(this,"runOptionsListRequest",(async(e,t)=>{try{return await this.cachedOptionsListRequest(e,t)}catch(t){return this.cachedOptionsListRequest.cache.delete(this.optionsListCacheResolver(e)),{}}})),({data:this.data,http:this.http}=e)}}const g={controls:new n.PluginServiceProvider(i.b),data:new n.PluginServiceProvider((({startPlugins:e})=>{const{data:{query:t,search:r}}=e,{data:n}=e;return{fetchFieldRange:async(e,t,r)=>{const{ignoreParentSettings:i,query:a,timeRange:u}=r;let{filters:c=[]}=r;const l=e.getFieldByName(t);if(!l)throw new Error("Field Missing Error");if(u){const t=n.query.timefilter.timefilter.createFilter(e,u);t&&(c=c.concat(t))}const d=await n.search.searchSource.create();d.setField("size",0),d.setField("index",e);const g=(e=>{const t={};return e&&(e.scripted?t.script={source:e.script,lang:e.lang}:t.field=e.name),{maxAgg:{max:t},minAgg:{min:t}}})(l);d.setField("aggs",g),d.setField("filter",null!=i&&i.ignoreFilters?[]:c),d.setField("query",null!=i&&i.ignoreQuery?void 0:a);const f=await Object(s.lastValueFrom)(d.fetch$()),v=Object(o.get)(f,"rawResponse.aggregations.minAgg.value",void 0),m=Object(o.get)(f,"rawResponse.aggregations.maxAgg.value",void 0);return{min:null===v?void 0:v,max:null===m?void 0:m}},query:t,searchSource:r.searchSource,timefilter:t.timefilter.timefilter}})),dataViews:new n.PluginServiceProvider((({startPlugins:e})=>{const{dataViews:{get:t,getIdsWithTitle:r,getDefaultId:n}}=e;return{get:t,getDefaultId:n,getIdsWithTitle:r}})),http:new n.PluginServiceProvider((({coreStart:e})=>{const{http:{fetch:t}}=e;return{fetch:t}})),optionsList:new n.PluginServiceProvider(((e,t)=>new options_list_service_OptionsListService(t)),["data","http"]),overlays:new n.PluginServiceProvider((({coreStart:e})=>{const{overlays:{openFlyout:t,openConfirm:r}}=e;return{openFlyout:t,openConfirm:r}})),settings:new n.PluginServiceProvider((({coreStart:e})=>({getDateFormat:()=>e.uiSettings.get("dateFormat","MMM D, YYYY @ HH:mm:ss.SSS"),getTimezone:()=>e.uiSettings.get("dateFormat:tz","Browser"),getDefaultTimeRange:()=>e.uiSettings.get("timepicker:timeDefaults")||{from:"now-15m",to:"now"}}))),theme:new n.PluginServiceProvider((({coreStart:e})=>{const{theme:{theme$:t}}=e;return{theme$:t}})),embeddable:new n.PluginServiceProvider((({startPlugins:e})=>({getEmbeddableFactory:e.embeddable.getEmbeddableFactory}))),unifiedSearch:new n.PluginServiceProvider((({startPlugins:e})=>{const{unifiedSearch:{autocomplete:t}}=e;return{autocomplete:t}}))},f=new n.PluginServices,v=new n.PluginServiceRegistry(g)},59:function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},60:function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},95:function(e,t,r){var n=r(96),i=r(97),o=i;o.v1=n,o.v4=i,e.exports=o},96:function(e,t,r){var n,i,o=r(59),s=r(60),a=0,u=0;e.exports=function(e,t,r){var c=t&&r||0,l=t||[],d=(e=e||{}).node||n,g=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==g){var f=o();null==d&&(d=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==g&&(g=i=16383&(f[6]<<8|f[7]))}var v=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:u+1,p=v-a+(m-u)/1e4;if(p<0&&void 0===e.clockseq&&(g=g+1&16383),(p<0||v>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=v,u=m,i=g;var h=(1e4*(268435455&(v+=122192928e5))+m)%4294967296;l[c++]=h>>>24&255,l[c++]=h>>>16&255,l[c++]=h>>>8&255,l[c++]=255&h;var y=v/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=g>>>8|128,l[c++]=255&g;for(var S=0;S<6;++S)l[c+S]=d[S];return t||s(l)}},97:function(e,t,r){var n=r(59),i=r(60);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},98:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9);t.default=function(e,t){n.useEffect((function(){return e&&e(),function(){t&&t()}}),[])}}}]);