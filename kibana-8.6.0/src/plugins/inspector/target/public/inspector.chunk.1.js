(window.inspector_bundle_jsonpfunction=window.inspector_bundle_jsonpfunction||[]).push([[1],{32:function(e,t,s){var n,o=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(e,t){if(!n[e]){n[e]={};for(var s=0;s<e.length;s++)n[e][e.charAt(s)]=s}return n[e][t]}var r={compressToBase64:function(e){if(null==e)return"";var s=r._compress(e,6,(function(e){return t.charAt(e)}));switch(s.length%4){default:case 0:return s;case 1:return s+"===";case 2:return s+"==";case 3:return s+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:r._decompress(e.length,32,(function(s){return o(t,e.charAt(s))}))},compressToUTF16:function(t){return null==t?"":r._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:r._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=r.compress(e),s=new Uint8Array(2*t.length),n=0,o=t.length;n<o;n++){var i=t.charCodeAt(n);s[2*n]=i>>>8,s[2*n+1]=i%256}return s},decompressFromUint8Array:function(t){if(null==t)return r.decompress(t);for(var s=new Array(t.length/2),n=0,o=s.length;n<o;n++)s[n]=256*t[2*n]+t[2*n+1];var i=[];return s.forEach((function(t){i.push(e(t))})),r.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":r._compress(e,6,(function(e){return s.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),r._decompress(e.length,32,(function(t){return o(s,e.charAt(t))})))},compress:function(t){return r._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,s){if(null==e)return"";var n,o,r,i={},a={},u="",l="",c="",p=2,d=3,h=2,q=[],j=0,b=0;for(r=0;r<e.length;r+=1)if(u=e.charAt(r),Object.prototype.hasOwnProperty.call(i,u)||(i[u]=d++,a[u]=!0),l=c+u,Object.prototype.hasOwnProperty.call(i,l))c=l;else{if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(n=0;n<h;n++)j<<=1,b==t-1?(b=0,q.push(s(j)),j=0):b++;for(o=c.charCodeAt(0),n=0;n<8;n++)j=j<<1|1&o,b==t-1?(b=0,q.push(s(j)),j=0):b++,o>>=1}else{for(o=1,n=0;n<h;n++)j=j<<1|o,b==t-1?(b=0,q.push(s(j)),j=0):b++,o=0;for(o=c.charCodeAt(0),n=0;n<16;n++)j=j<<1|1&o,b==t-1?(b=0,q.push(s(j)),j=0):b++,o>>=1}0==--p&&(p=Math.pow(2,h),h++),delete a[c]}else for(o=i[c],n=0;n<h;n++)j=j<<1|1&o,b==t-1?(b=0,q.push(s(j)),j=0):b++,o>>=1;0==--p&&(p=Math.pow(2,h),h++),i[l]=d++,c=String(u)}if(""!==c){if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(n=0;n<h;n++)j<<=1,b==t-1?(b=0,q.push(s(j)),j=0):b++;for(o=c.charCodeAt(0),n=0;n<8;n++)j=j<<1|1&o,b==t-1?(b=0,q.push(s(j)),j=0):b++,o>>=1}else{for(o=1,n=0;n<h;n++)j=j<<1|o,b==t-1?(b=0,q.push(s(j)),j=0):b++,o=0;for(o=c.charCodeAt(0),n=0;n<16;n++)j=j<<1|1&o,b==t-1?(b=0,q.push(s(j)),j=0):b++,o>>=1}0==--p&&(p=Math.pow(2,h),h++),delete a[c]}else for(o=i[c],n=0;n<h;n++)j=j<<1|1&o,b==t-1?(b=0,q.push(s(j)),j=0):b++,o>>=1;0==--p&&(p=Math.pow(2,h),h++)}for(o=2,n=0;n<h;n++)j=j<<1|1&o,b==t-1?(b=0,q.push(s(j)),j=0):b++,o>>=1;for(;;){if(j<<=1,b==t-1){q.push(s(j));break}b++}return q.join("")},decompress:function(e){return null==e?"":""==e?null:r._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,s,n){var o,r,i,a,u,l,c,p=[],d=4,h=4,q=3,j="",b=[],m={val:n(0),position:s,index:1};for(o=0;o<3;o+=1)p[o]=o;for(i=0,u=Math.pow(2,2),l=1;l!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=s,m.val=n(m.index++)),i|=(a>0?1:0)*l,l<<=1;switch(i){case 0:for(i=0,u=Math.pow(2,8),l=1;l!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=s,m.val=n(m.index++)),i|=(a>0?1:0)*l,l<<=1;c=e(i);break;case 1:for(i=0,u=Math.pow(2,16),l=1;l!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=s,m.val=n(m.index++)),i|=(a>0?1:0)*l,l<<=1;c=e(i);break;case 2:return""}for(p[3]=c,r=c,b.push(c);;){if(m.index>t)return"";for(i=0,u=Math.pow(2,q),l=1;l!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=s,m.val=n(m.index++)),i|=(a>0?1:0)*l,l<<=1;switch(c=i){case 0:for(i=0,u=Math.pow(2,8),l=1;l!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=s,m.val=n(m.index++)),i|=(a>0?1:0)*l,l<<=1;p[h++]=e(i),c=h-1,d--;break;case 1:for(i=0,u=Math.pow(2,16),l=1;l!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=s,m.val=n(m.index++)),i|=(a>0?1:0)*l,l<<=1;p[h++]=e(i),c=h-1,d--;break;case 2:return b.join("")}if(0==d&&(d=Math.pow(2,q),q++),p[c])j=p[c];else{if(c!==h)return null;j=r+r.charAt(0)}b.push(j),p[h++]=r+j.charAt(0),r=j,0==--d&&(d=Math.pow(2,q),q++)}}};return r}();void 0===(n=function(){return o}.call(t,s,t,e))||(e.exports=n)},33:function(e,t,s){"use strict";s.r(t),s.d(t,"RequestsViewComponent",(function(){return requests_view_RequestsViewComponent})),s.d(t,"default",(function(){return requests_view_RequestsViewComponent}));var n=s(1),o=s.n(n),r=s(4),i=s.n(r),a=s(10),u=s(2),l=s(5),c=s(3),p=s(0);class request_selector_RequestSelector extends r.Component{constructor(...e){super(...e),o()(this,"handleSelected",(e=>{const t=this.props.requests.find((t=>t.id===e[0].value));t&&this.props.onRequestChanged(t)}))}renderRequestCombobox(){const e=this.props.requests.map((e=>{const t=e.status===l.c.ERROR;return{"data-test-subj":`inspectorRequestChooser${e.name.replace(/\s+/,"_")}`,label:t?`${e.name} ${c.i18n.translate("inspector.requests.failedLabel",{defaultMessage:" (failed)"})}`:e.name,value:e.id}}));return Object(p.jsx)(u.EuiComboBox,{"data-test-subj":"inspectorRequestChooser",fullWidth:!0,id:"inspectorRequestChooser",isClearable:!1,onChange:this.handleSelected,options:e,prepend:"Request",selectedOptions:[{label:this.props.selectedRequest.name,value:this.props.selectedRequest.id}],singleSelection:{asPlainText:!0}})}render(){const{selectedRequest:e,requests:t}=this.props;return Object(p.jsx)(u.EuiFlexGroup,{alignItems:"center"},Object(p.jsx)(u.EuiFlexItem,{grow:!0},t.length&&this.renderRequestCombobox()),Object(p.jsx)(u.EuiFlexItem,{grow:!1},e.status!==l.c.PENDING&&Object(p.jsx)(u.EuiToolTip,{position:"left",title:e.status===l.c.OK?Object(p.jsx)(a.FormattedMessage,{id:"inspector.requests.requestSucceededTooltipTitle",defaultMessage:"Request succeeded"}):Object(p.jsx)(a.FormattedMessage,{id:"inspector.requests.requestFailedTooltipTitle",defaultMessage:"Request failed"}),content:Object(p.jsx)(a.FormattedMessage,{id:"inspector.requests.requestTooltipDescription",defaultMessage:"The total time the request took."})},Object(p.jsx)(u.EuiBadge,{color:e.status===l.c.OK?"success":"danger",iconType:e.status===l.c.OK?"check":"cross"},Object(p.jsx)(a.FormattedMessage,{id:"inspector.requests.requestTimeLabel",defaultMessage:"{requestTime}ms",values:{requestTime:e.time}}))),e.status===l.c.PENDING&&Object(p.jsx)(u.EuiLoadingSpinner,{size:"m","aria-label":c.i18n.translate("inspector.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"})})))}}var d=s(30),h=s(32),q=s(8);const j=c.i18n.translate("inspector.requests.copyToClipboardLabel",{defaultMessage:"Copy to clipboard"}),b=c.i18n.translate("inspector.requests.openInConsoleLabel",{defaultMessage:"Open in Console"}),m=c.i18n.translate("inspector.requests.openInSearchProfilerLabel",{defaultMessage:"Open in Search Profiler"}),f=({indexPattern:e,json:t})=>{var s,n,o,i,a,l,c;const{services:f}=Object(q.useKibana)(),g=null===(s=f.application)||void 0===s?void 0:s.navigateToUrl,x=Object(h.compressToEncodedURIComponent)(`GET ${e}/_search\n${t}`),O=null===(n=f.share.url.locators.get("CONSOLE_APP_LOCATOR"))||void 0===n?void 0:n.useUrl({loadFrom:`data:text/plain,${x}`}),R=(null===(o=f.application)||void 0===o||null===(i=o.capabilities)||void 0===i?void 0:i.dev_tools.show)&&void 0!==O,v=!(!e||!R),_=Object(r.useCallback)((()=>O&&g&&g(O)),[O,g]),C=Object(h.compressToEncodedURIComponent)(t),w=null===(a=f.share.url.locators.get("SEARCH_PROFILER_LOCATOR"))||void 0===a?void 0:a.useUrl({index:e,loadFrom:`data:text/plain,${C}`}),E=(null===(l=f.application)||void 0===l||null===(c=l.capabilities)||void 0===c?void 0:c.dev_tools.show)&&void 0!==w,T=!(!e||!E),S=Object(r.useCallback)((()=>w&&g&&g(w)),[w,g]);return Object(p.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"s",wrap:!1,responsive:!1,className:"insRequestCodeViewer"},Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiSpacer,{size:"s"}),Object(p.jsx)(u.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"m",wrap:!0},Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)("div",null,Object(p.jsx)(u.EuiCopy,{textToCopy:t},(e=>Object(p.jsx)(u.EuiButtonEmpty,{size:"xs",flush:"right",iconType:"copyClipboard",onClick:e,"data-test-subj":"inspectorRequestCopyClipboardButton"},j))))),v&&Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)("div",null,Object(p.jsx)(u.EuiButtonEmpty,{size:"xs",flush:"right",iconType:"wrench",href:O,onClick:_,"data-test-subj":"inspectorRequestOpenInConsoleButton"},b))),T&&Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)("div",null,Object(p.jsx)(u.EuiButtonEmpty,{size:"xs",flush:"right",iconType:"visBarHorizontal",href:w,onClick:S,"data-test-subj":"inspectorRequestOpenInSearchProfilerButton"},m))))),Object(p.jsx)(u.EuiFlexItem,{grow:!0,"data-test-subj":"inspectorRequestCodeViewerContainer"},Object(p.jsx)(q.CodeEditor,{languageId:d.XJsonLang.ID,value:t,options:{readOnly:!0,lineNumbers:"off",fontSize:12,minimap:{enabled:!1},folding:!0,scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0}})))};class req_details_request_RequestDetailsRequest extends r.Component{render(){var e,t;const{json:s}=this.props.request;return s?Object(p.jsx)(f,{indexPattern:null===(e=this.props.request.stats)||void 0===e||null===(t=e.indexPattern)||void 0===t?void 0:t.value,json:JSON.stringify(s,null,2)}):null}}o()(req_details_request_RequestDetailsRequest,"shouldShow",(e=>Boolean(e&&e.json)));class req_details_response_RequestDetailsResponse extends r.Component{render(){const e=req_details_response_RequestDetailsResponse.getResponseJson(this.props.request);return e?Object(p.jsx)(f,{json:JSON.stringify(e,null,2)}):null}}o()(req_details_response_RequestDetailsResponse,"shouldShow",(e=>Boolean(req_details_response_RequestDetailsResponse.getResponseJson(e)))),o()(req_details_response_RequestDetailsResponse,"getResponseJson",(e=>e.response?e.response.json:null));class req_details_stats_RequestDetailsStats extends r.Component{constructor(...e){super(...e),o()(this,"renderStatRow",(e=>[Object(p.jsx)(u.EuiTableRow,{key:e.id},Object(p.jsx)(u.EuiTableRowCell,null,Object(p.jsx)("span",{className:"insRequestDetailsStats__icon"},e.description?Object(p.jsx)(u.EuiIconTip,{"aria-label":c.i18n.translate("inspector.requests.descriptionRowIconAriaLabel",{defaultMessage:"Description"}),type:"questionInCircle",color:"subdued",content:e.description}):Object(p.jsx)(u.EuiIcon,{type:"empty"})),e.label),Object(p.jsx)(u.EuiTableRowCell,null,e.value))]))}render(){const{stats:e}=this.props.request;if(!e)return null;const t=Object.keys(e).sort().map((t=>({id:t,...e[t]})));return Object(p.jsx)(u.EuiTable,{responsive:!1},Object(p.jsx)(u.EuiTableBody,null,t.map(this.renderStatRow)))}}o()(req_details_stats_RequestDetailsStats,"shouldShow",(e=>Boolean(e.stats&&Object.keys(e.stats).length)));const g=[{name:"Statistics",label:c.i18n.translate("inspector.requests.statisticsTabLabel",{defaultMessage:"Statistics"}),component:req_details_stats_RequestDetailsStats},{name:"Request",label:c.i18n.translate("inspector.requests.requestTabLabel",{defaultMessage:"Request"}),component:req_details_request_RequestDetailsRequest},{name:"Response",label:c.i18n.translate("inspector.requests.responseTabLabel",{defaultMessage:"Response"}),component:req_details_response_RequestDetailsResponse}];class request_details_RequestDetails extends r.Component{constructor(...e){super(...e),o()(this,"state",{availableDetails:[],selectedDetail:null}),o()(this,"selectDetailsTab",(e=>{e!==this.state.selectedDetail&&this.setState({selectedDetail:e})})),o()(this,"renderDetailTab",(e=>Object(p.jsx)(u.EuiTab,{key:e.name,isSelected:e===this.state.selectedDetail,onClick:()=>this.selectDetailsTab(e),"data-test-subj":`inspectorRequestDetail${e.name}`},e.label)))}static getDerivedStateFromProps(e,t){const s=t&&t.selectedDetail,n=g.filter((t=>!t.component.shouldShow||t.component.shouldShow(e.request)));return s&&n.includes(s)?{availableDetails:n}:{availableDetails:n,selectedDetail:n[0]}}static getSelectedDetailComponent(e){return e?e.component:null}render(){const{selectedDetail:e,availableDetails:t}=this.state,s=request_details_RequestDetails.getSelectedDetailComponent(e);return t.length&&s?Object(p.jsx)(i.a.Fragment,null,Object(p.jsx)(u.EuiTabs,{size:"s"},this.state.availableDetails.map(this.renderDetailTab)),Object(p.jsx)(s,{request:this.props.request})):null}}var x=s(31);class requests_view_RequestsViewComponent extends r.Component{constructor(e){super(e),o()(this,"_onRequestsChange",(()=>{const e=this.getRequests(),t={requests:e};this.state.request&&e.includes(this.state.request)||(t.request=e.length?e[0]:null),this.setState(t)})),o()(this,"selectRequest",(e=>{e!==this.state.request&&this.setState({request:e})})),e.adapters.requests.on("change",this._onRequestsChange);const t=this.getRequests();this.state={requests:t,request:t.length?t[0]:null}}getRequests(){return function(e){const t=Object(x.groupBy)(e,(e=>e.name)),s=Object.entries(t).reduce(((e,[t,s])=>{const n=s.length>1;return s.forEach(((s,o)=>{const r=s.id;e[r]=n?`${t} (${o+1})`:t})),e}),{});return e.map((e=>({...e,name:s[e.id]})))}(this.props.adapters.requests.getRequests())}componentWillUnmount(){this.props.adapters.requests.removeListener("change",this._onRequestsChange)}static renderEmptyRequests(){return Object(p.jsx)(u.EuiEmptyPrompt,{"data-test-subj":"inspectorNoRequestsMessage",title:Object(p.jsx)("h2",null,Object(p.jsx)(a.FormattedMessage,{id:"inspector.requests.noRequestsLoggedTitle",defaultMessage:"No requests logged"})),body:Object(p.jsx)(i.a.Fragment,null,Object(p.jsx)("p",null,Object(p.jsx)(a.FormattedMessage,{id:"inspector.requests.noRequestsLoggedDescription.elementHasNotLoggedAnyRequestsText",defaultMessage:"The element hasn't logged any requests (yet)."})),Object(p.jsx)("p",null,Object(p.jsx)(a.FormattedMessage,{id:"inspector.requests.noRequestsLoggedDescription.whatDoesItUsuallyMeanText",defaultMessage:"This usually means that there was no need to fetch any data or that the element has not yet started fetching data."})))})}render(){if(!this.state.requests||!this.state.requests.length)return requests_view_RequestsViewComponent.renderEmptyRequests();const e=this.state.requests.filter((e=>e.status===l.c.ERROR)).length;return Object(p.jsx)(i.a.Fragment,null,Object(p.jsx)(u.EuiText,{size:"xs"},Object(p.jsx)("p",{role:"status","aria-live":"polite","aria-atomic":"true"},Object(p.jsx)(a.FormattedMessage,{id:"inspector.requests.requestWasMadeDescription",defaultMessage:"{requestsCount, plural, one {# request was} other {# requests were} } made{failedRequests}",values:{requestsCount:this.state.requests.length,failedRequests:e>0?Object(p.jsx)(u.EuiTextColor,{color:"danger"},Object(p.jsx)(a.FormattedMessage,{id:"inspector.requests.requestWasMadeDescription.requestHadFailureText",defaultMessage:", {failedCount} had a failure",values:{failedCount:e}})):""}}))),Object(p.jsx)(u.EuiSpacer,{size:"xs"}),this.state.request&&Object(p.jsx)(i.a.Fragment,null,Object(p.jsx)(request_selector_RequestSelector,{requests:this.state.requests,selectedRequest:this.state.request,onRequestChanged:this.selectRequest}),Object(p.jsx)(u.EuiSpacer,{size:"xs"})),this.state.request&&this.state.request.description&&Object(p.jsx)(u.EuiText,{size:"xs"},Object(p.jsx)("p",null,this.state.request.description)),this.state.request&&this.state.request.searchSessionId&&Object(p.jsx)(u.EuiText,{size:"xs"},Object(p.jsx)("p",{"data-test-subj":"inspectorRequestSearchSessionId","data-search-session-id":this.state.request.searchSessionId},Object(p.jsx)(a.FormattedMessage,{id:"inspector.requests.searchSessionId",defaultMessage:"Search session id: {searchSessionId}",values:{searchSessionId:this.state.request.searchSessionId}}))),Object(p.jsx)(u.EuiSpacer,{size:"m"}),this.state.request&&Object(p.jsx)(request_details_RequestDetails,{request:this.state.request}))}}}}]);