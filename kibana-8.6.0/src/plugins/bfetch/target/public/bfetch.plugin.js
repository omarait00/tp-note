!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t,r){e.exports=r(5)(2)},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t){e.exports=__kbnSharedDeps__.Fflate},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,r){e.exports=r(5)(2729)},function(e,t,r){r(8),__kbnBundles__.define("plugin/bfetch/public",r,9)},function(e,t,r){r.p=window.__kbnPublicPath__.bfetch},function(e,t,r){"use strict";r.r(t),r.d(t,"split",(function(){return u})),r.d(t,"DISABLE_BFETCH",(function(){return c})),r.d(t,"plugin",(function(){return m}));var n=r(0),s=r.n(n),o=r(1),i=r(3),a=r(2);const u=(e="\n")=>t=>{const r=new i.Subject;let n="";return t.subscribe((t=>{const s=(n+t).split(e);s.slice(0,-1).forEach(r.next.bind(r)),n=s.length?s[s.length-1]:""}),r.error.bind(r),(()=>{r.next(n),r.complete()})),r.pipe(Object(a.filter)(Boolean))};class item_buffer_ItemBuffer{constructor(e){s()(this,"list",[]),this.params=e}get length(){return this.list.length}write(e){this.list.push(e);const{flushOnMaxItems:t}=this.params;t&&this.list.length>=t&&this.flush()}clear(){this.list=[]}flush(){let e;[e,this.list]=[this.list,[]],this.params.onFlush(e)}}class timed_item_buffer_TimedItemBuffer extends item_buffer_ItemBuffer{constructor(e){super(e),s()(this,"timer",void 0),s()(this,"onTimeout",(()=>{this.flush()})),this.params=e}write(e){super.write(e),this.params.maxItemAge&&1===this.length&&(this.timer=setTimeout(this.onTimeout,this.params.maxItemAge))}clear(){clearTimeout(this.timer),super.clear()}flush(){clearTimeout(this.timer),super.flush()}}const c="bfetch:disable";function l({url:e,headers:t={},method:r="POST",body:n="",signal:s,getIsCompressionDisabled:o=(()=>!1)}){const c=new window.XMLHttpRequest,l=o();l||(e=((e,t,r)=>{const n=e.includes("?")?"&":"?";return`${e}${n}compress=true`})(e)),c.open(r,e),c.withCredentials=!0,Object.entries(t).forEach((([e,t])=>c.setRequestHeader(e,t)));const m=((e,t)=>{const r=new i.Subject;let n=0,s=!1;const o=()=>0===e.status||e.status>=400,a=()=>{if(s)return;if(o())return;const{responseText:t}=e;n>=t.length||(r.next(t.substr(n)),n=t.length)};e.onprogress=a;const u=()=>{4!==e.readyState&&(s=!0,e.abort(),r.complete(),t&&t.removeEventListener("abort",u))};return t&&t.addEventListener("abort",u),e.onreadystatechange=()=>{s||(a(),4===e.readyState&&(t&&t.removeEventListener("abort",u),o()?r.error(new Error(`Batch request failed with status ${e.status}`)):r.complete()))},r})(c,s);c.send(n);const p=m.pipe(u("\n"),Object(a.map)((e=>l?e:function(e){const t=Object(h.toByteArray)(e),r=Object(f.unzlibSync)(t);return Object(f.strFromU8)(r)}(e))),Object(a.share)());return{xhr:c,stream:p}}var f=r(4),h=r(6);class plugin_BfetchPublicPlugin{constructor(e){s()(this,"contract",void 0),s()(this,"fetchStreaming",((e,t,r)=>n=>{return l({...n,url:`${t}/${s=n.url,"/"===s[0]?s.substr(1):s}`,headers:{"Content-Type":"application/json","kbn-version":e,...n.headers||{}},getIsCompressionDisabled:r});var s})),s()(this,"batchedFunction",((e,t)=>r=>(e=>{const{url:t,fetchStreaming:r=l,flushOnMaxItems:n=25,maxItemAge:s=10,getIsCompressionDisabled:i=(()=>!1)}=e,[a]=(e=>{const{onCall:t,onBatch:r,maxItemAge:n=10,flushOnMaxItems:s=25}=e,o=new timed_item_buffer_TimedItemBuffer({onFlush:r,maxItemAge:n,flushOnMaxItems:s});return[(...e)=>{const[r,n]=t(...e);return o.write(n),r},o]})({onCall:(e,t)=>{const r=Object(o.defer)(),n={payload:e,future:r,signal:t};return[r.promise,n]},onBatch:async e=>{try{if(0===(e=e.filter((e=>{var t,r;return null!==(t=e.signal)&&void 0!==t&&t.aborted&&e.future.reject(new o.AbortError),!(null!==(r=e.signal)&&void 0!==r&&r.aborted)}))).length)return;const n=e.map((e=>new Promise((t=>{const{promise:r,cleanup:n}=e.signal?Object(o.abortSignalToPromise)(e.signal):{promise:void 0,cleanup:()=>{}},s=()=>{t(),n()};r&&r.catch((()=>{e.future.reject(new o.AbortError),s()})),e.future.promise.then(s,s)})))),s=new AbortController;let a=!1;Promise.all(n).then((()=>{a=!0,s.abort()}));const u=e.map((e=>e.payload)),{stream:c}=r({url:t,body:JSON.stringify({batch:u}),method:"POST",signal:s.signal,getIsCompressionDisabled:i}),l=t=>{const r=(n=t)?n instanceof Error?{message:n.message}:"object"==typeof n?{...n,message:n.message||"Unknown error."}:{message:String(n)}:{message:"Unknown error."};var n;r.code="STREAM";for(const{future:t}of e)t.reject(r)};c.subscribe({next:t=>{try{const r=JSON.parse(t);r.error?e[r.id].future.reject(r.error):void 0!==r.result&&e[r.id].future.resolve(r.result)}catch(e){l(e)}},error:l,complete:()=>{if(!a){const t={message:"Connection terminated prematurely.",code:"CONNECTION"};for(const{future:r}of e)r.reject(t)}}}),await c.toPromise()}catch(t){for(const r of e)r.future.reject(t)}},flushOnMaxItems:n,maxItemAge:s});return a})({...r,getIsCompressionDisabled:t,fetchStreaming:r.fetchStreaming||e}))),this.initializerContext=e}setup(e,t){const{version:r}=this.initializerContext.env.packageInfo,n=e.http.basePath.get(),s=Object(o.createStartServicesGetter)(e.getStartServices),i=()=>s().core.uiSettings.get("bfetch:disableCompression"),a=this.fetchStreaming(r,n,i),u=this.batchedFunction(a,i);return this.contract={fetchStreaming:a,batchedFunction:u},this.contract}start(e,t){return this.contract}stop(){}}function m(e){return new plugin_BfetchPublicPlugin(e)}}]);