!function(e){function t(t){for(var n,r,o=t[0],s=t[1],i=0,l=[];i<o.length;i++)r=o[i],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);l.length;)l.shift()()}var n={},a={0:0};function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=o);var s,i=document.createElement("script");i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.src=function(e){return r.p+"expressionGauge.chunk."+e+".js"}(e);var u=new Error;s=function(t){i.onerror=i.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",u.name="ChunkLoadError",u.type=r,u.request=o,n[1](u)}a[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:i})}),12e4);i.onerror=i.onload=s,document.head.appendChild(i)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var o=window.expressionGauge_bundle_jsonpfunction=window.expressionGauge_bundle_jsonpfunction||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var u=s;r(r.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u}));const a="gauge",r={HORIZONTAL_BULLET:"horizontalBullet",VERTICAL_BULLET:"verticalBullet",ARC:"arc",CIRCLE:"circle"},o={HIDDEN:"hidden",AUTO:"auto",BANDS:"bands"},s={AUTO:"auto",CUSTOM:"custom",NONE:"none"},i={AUTO:"auto",CUSTOM:"custom",NONE:"none"},u={PALETTE:"palette",NONE:"none"}},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){"use strict";n.r(t),n.d(t,"PLUGIN_ID",(function(){return u})),n.d(t,"PLUGIN_NAME",(function(){return l})),n.d(t,"gaugeFunction",(function(){return i})),n.d(t,"EXPRESSION_GAUGE_NAME",(function(){return o.a})),n.d(t,"GaugeShapes",(function(){return o.e})),n.d(t,"GaugeColorModes",(function(){return o.c})),n.d(t,"GaugeTicksPositions",(function(){return o.f})),n.d(t,"GaugeLabelMajorModes",(function(){return o.d}));var a=n(1),r=n(3),o=n(0),s=n(7);const i=()=>({name:o.a,type:"render",inputTypes:["datatable"],help:a.i18n.translate("expressionGauge.functions.gauge.help",{defaultMessage:"Gauge visualization"}),args:{shape:{types:["string"],options:[o.e.HORIZONTAL_BULLET,o.e.VERTICAL_BULLET,o.e.ARC,o.e.CIRCLE],help:a.i18n.translate("expressionGauge.functions.gauge.args.shape.help",{defaultMessage:"Type of gauge chart"}),required:!0,strict:!0},metric:{types:["string","vis_dimension"],help:a.i18n.translate("expressionGauge.functions.gauge.args.metric.help",{defaultMessage:"Current value"})},min:{types:["string","vis_dimension"],help:a.i18n.translate("expressionGauge.functions.gauge.args.min.help",{defaultMessage:"Minimum value"})},max:{types:["string","vis_dimension"],help:a.i18n.translate("expressionGauge.functions.gauge.args.max.help",{defaultMessage:"Maximum value"})},goal:{types:["string","vis_dimension"],help:a.i18n.translate("expressionGauge.functions.gauge.args.goal.help",{defaultMessage:"Goal Value"})},colorMode:{types:["string"],default:o.c.NONE,options:[o.c.NONE,o.c.PALETTE],help:a.i18n.translate("expressionGauge.functions.gauge.args.colorMode.help",{defaultMessage:"If set to palette, the palette colors will be applied to the bands"}),strict:!0},palette:{types:["palette"],help:a.i18n.translate("expressionGauge.functions.gauge.args.palette.help",{defaultMessage:"Provides colors for the values"})},ticksPosition:{types:["string"],default:o.f.AUTO,options:[o.f.HIDDEN,o.f.AUTO,o.f.BANDS],help:a.i18n.translate("expressionGauge.functions.gauge.args.ticksPosition.help",{defaultMessage:"Specifies the placement of ticks"}),strict:!0},labelMajor:{types:["string"],help:a.i18n.translate("expressionGauge.functions.gauge.args.labelMajor.help",{defaultMessage:"Specifies the labelMajor of the gauge chart displayed inside the chart."})},labelMajorMode:{types:["string"],options:[o.d.NONE,o.d.AUTO,o.d.CUSTOM],help:a.i18n.translate("expressionGauge.functions.gauge.args.labelMajorMode.help",{defaultMessage:"Specifies the mode of labelMajor"}),default:o.d.AUTO,strict:!0},labelMinor:{types:["string"],help:a.i18n.translate("expressionGauge.functions.gauge.args.labelMinor.help",{defaultMessage:"Specifies the labelMinor of the gauge chart"})},centralMajor:{types:["string"],help:a.i18n.translate("expressionGauge.functions.gauge.args.centralMajor.help",{defaultMessage:"Specifies the centralMajor of the gauge chart displayed inside the chart."})},centralMajorMode:{types:["string"],options:[o.d.NONE,o.d.AUTO,o.d.CUSTOM],help:a.i18n.translate("expressionGauge.functions.gauge.args.centralMajorMode.help",{defaultMessage:"Specifies the mode of centralMajor"}),strict:!0},percentageMode:{types:["boolean"],default:!1,help:a.i18n.translate("expressionGauge.functions.gauge.percentageMode.help",{defaultMessage:"Enables relative precentage mode"})},respectRanges:{types:["boolean"],default:!1,help:a.i18n.translate("expressionGauge.functions.gauge.respectRanges.help",{defaultMessage:"Respect max and min values from ranges"})},commonLabel:{types:["string"],help:a.i18n.translate("expressionGauge.functions.gauge.args.commonLabel.help",{defaultMessage:"Specifies the common label outside the chart"})},ariaLabel:{types:["string"],help:a.i18n.translate("expressionGauge.functions.gaugeChart.config.ariaLabel.help",{defaultMessage:"Specifies the aria label of the gauge chart"})}},fn(e,t,n){var i,u,l,c,p,g,d;Object(r.validateAccessor)(t.metric,e.columns),Object(r.validateAccessor)(t.min,e.columns),Object(r.validateAccessor)(t.max,e.columns),Object(r.validateAccessor)(t.goal,e.columns);const{centralMajor:f,centralMajorMode:h,...b}=t,{metric:m,min:_,max:M,goal:v}=b;if(!Object(s.b)(t.shape)&&(h||f))throw new Error((x=t.shape,a.i18n.translate("expressionGauge.functions.gauge.errors.centralMajorNotSupportedForShapeError",{defaultMessage:'Fields "centralMajor" and "centralMajorMode" are not supported by the shape "{shape}"',values:{shape:x}})));var x;if(null!=n&&null!==(i=n.inspectorAdapters)&&void 0!==i&&i.tables){n.inspectorAdapters.tables.reset(),n.inspectorAdapters.tables.allowCsvExport=!0;const t=Object(r.prepareLogTable)(e,[[m?[m]:void 0,a.i18n.translate("expressionGauge.logDatatable.metric",{defaultMessage:"Metric"})],[_?[_]:void 0,a.i18n.translate("expressionGauge.logDatatable.min",{defaultMessage:"Min"})],[M?[M]:void 0,a.i18n.translate("expressionGauge.logDatatable.max",{defaultMessage:"Max"})],[v?[v]:void 0,a.i18n.translate("expressionGauge.logDatatable.goal",{defaultMessage:"Goal"})]],!0);n.inspectorAdapters.tables.logDatatable("default",t)}const O=Object(s.b)(t.shape)?{centralMajorMode:h||o.b.AUTO,centralMajor:f}:{};return{type:"render",as:o.a,value:{data:e,args:{...b,...O,ariaLabel:null!==(u=null!==(l=t.ariaLabel)&&void 0!==l?l:null===(c=n.variables)||void 0===c?void 0:c.embeddableTitle)&&void 0!==u?u:null===(p=n.getExecutionContext)||void 0===p||null===(g=p.call(n))||void 0===g?void 0:g.description},canNavigateToLens:Boolean(null==n||null===(d=n.variables)||void 0===d?void 0:d.canNavigateToLens)}}}}),u="expressionGauge",l="expressionGauge"},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return b}));var a=n(3);const r=(e,t)=>{if(!t||!e)return;const n=e&&t[e];return null===n||Array.isArray(n)&&!n.length?void 0:"number"==typeof n?n:Array.isArray(n)&&"number"==typeof n[n.length-1]?n[n.length-1]:void 0};function o(e){const t=Math.floor(Math.log10(e)),n=e/Math.pow(10,t);let a=10;return n<=1?a=1:n<=2?a=2:n<=5&&(a=5),a*Math.pow(10,t)}const s=(e,t,n,a)=>{const s=null!=t&&t.max?r(t.max,e):void 0;if(null!=s)return s;if(a&&null!=n&&n.rangeMax){const a=null!=t&&t.metric?r(t.metric,e):void 0;return!a||a<(null==n?void 0:n.rangeMax)?null==n?void 0:n.rangeMax:a}if(e&&t){const{metric:r,goal:s}=t,u=r&&e[r],l=s&&e[s],c=i(e,t,n,a);if(null!=u){const e=[c,l,u].filter((e=>"number"==typeof e));return function(e,t){const n=t+1e-7,a=o(n-e),r=o(a/4);return{min:Math.floor(e/r)*r,max:Math.ceil(Math.ceil(n/r)*r)}}(c,Math.max(...e)).max}}return 100},i=(e,t,n,a)=>{const o=null!=t&&t.min?r(t.min,e):void 0;if(null!=o)return o;if(a&&null!=n&&n.rangeMin){const a=null!=t&&t.metric?r(t.metric,e):void 0;return!a||a>(null==n?void 0:n.rangeMin)?null==n?void 0:n.rangeMin:a}if(e&&t){const{metric:n,max:a}=t,r=[n&&e[n],a&&e[a]].filter((e=>"number"==typeof e));if(Math.min(...r)<=0)return Math.min(...r)-10}return 0},u=(e,t)=>{const n=null!=t&&t.goal?r(t.goal,e):void 0;if(null!=n)return n;const a=i(e,t),o=s(e,t);return Math.round(.75*(o-a)+a)},l=(e,t)=>{const{metric:n,min:r,max:o,goal:s}=e;if(n||r||o||s)return{min:r?Object(a.getAccessorByDimension)(r,t):void 0,max:o?Object(a.getAccessorByDimension)(o,t):void 0,goal:s?Object(a.getAccessorByDimension)(s,t):void 0,metric:n?Object(a.getAccessorByDimension)(n,t):void 0}};var c=n(2);const p=e=>({[c.GaugeShapes.HORIZONTAL_BULLET]:"horizontalBullet",[c.GaugeShapes.VERTICAL_BULLET]:"verticalBullet",[c.GaugeShapes.ARC]:"goal",[c.GaugeShapes.CIRCLE]:"goal"}[e]),g=()=>({angleStart:Math.PI/2,angleEnd:-(Math.PI+Math.PI/2)}),d=()=>({angleStart:Math.PI+(Math.PI-2*Math.PI/2.5)/2,angleEnd:-(Math.PI-2*Math.PI/2.5)/2}),f=()=>({}),h=e=>({[c.GaugeShapes.HORIZONTAL_BULLET]:f,[c.GaugeShapes.VERTICAL_BULLET]:f,[c.GaugeShapes.ARC]:d,[c.GaugeShapes.CIRCLE]:g}[e]()),b=(e,t)=>{const{rangeMin:n,rangeMax:a,range:r}=e.params,o=t[0],s=t[t.length-1];let i=n,u=a;if("percent"===r){const e={min:o,max:s};i=((e,{min:t,max:n})=>isFinite(e)?e*((n-t)/100):t)(i,e),u=((e,{min:t,max:n})=>isFinite(e)?e*((n-t)/100):n)(u,e)}return"number"===r&&(i=isFinite(i)?i:o,u=isFinite(u)?u:s),{min:i,max:u}}},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var a=n(0);const r=e=>[a.e.ARC,a.e.CIRCLE].includes(e),o=e=>[a.e.HORIZONTAL_BULLET,a.e.VERTICAL_BULLET].includes(e)},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){e.exports=n(13)(3)},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n(15),__kbnBundles__.define("plugin/expressionGauge/public",n,16),__kbnBundles__.define("plugin/expressionGauge/common",n,2)},function(e,t,n){n.p=window.__kbnPublicPath__.expressionGauge},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return m})),n.d(t,"getGoalValue",(function(){return b.d})),n.d(t,"getMaxValue",(function(){return b.e})),n.d(t,"getMinValue",(function(){return b.f})),n.d(t,"getValueFromAccessor",(function(){return b.h}));var a=n(4),r=n(2);const[o,s]=Object(a.createGetterSetter)("fieldFormats"),[i,u]=Object(a.createGetterSetter)("palette");var l=n(9),c=n.n(l),p=n(1),g=(n(12),n(8)),d=n(10),f=n(11),h=n(6);class plugin_ExpressionGaugePlugin{setup(e,{expressions:t,charts:s}){s.palettes.getPalettes().then((e=>{u(e)}));const l=Object(a.createStartServicesGetter)(e.getStartServices);t.registerFunction(r.gaugeFunction),t.registerRenderer((({getStartDeps:e})=>({name:r.EXPRESSION_GAUGE_NAME,displayName:p.i18n.translate("expressionGauge.renderer.visualizationName",{defaultMessage:"Gauge"}),reuseDomNode:!0,render:async(t,a,s)=>{const{core:u,plugins:l}=e();s.onDestroy((()=>{Object(g.unmountComponentAtNode)(t)}));const{GaugeComponent:p}=await n.e(1).then(n.bind(null,48));Object(g.render)(Object(h.jsx)(d.KibanaThemeProvider,{theme$:u.theme.theme$},Object(h.jsx)("div",{className:"gauge-container","data-test-subj":"gaugeChart"},Object(h.jsx)(p,c()({},a,{formatFactory:o().deserialize,chartsThemeService:l.charts.theme,paletteService:i(),renderComplete:()=>{let e;switch(a.args.shape){case r.GaugeShapes.HORIZONTAL_BULLET:e=`${r.EXPRESSION_GAUGE_NAME}_horizontal`;break;case r.GaugeShapes.VERTICAL_BULLET:e=`${r.EXPRESSION_GAUGE_NAME}_vertical`;break;default:e=r.EXPRESSION_GAUGE_NAME}const t=s.getExecutionContext(),n=(e=>{if(e){var t;const n=e=>e.type?e:e.child?n(e.child):void 0;return null===(t=n(e))||void 0===t?void 0:t.type}})(t),o=(e=>{if(e){var t;const n=e=>e.child?n(e.child):e;return null===(t=n(e))||void 0===t?void 0:t.type}})(t);if(n&&o){var i;const t=[`render_${o}_${e}`,a.canNavigateToLens?`render_${o}_${e}_convertable`:void 0].filter((e=>Boolean(e)));null===(i=l.usageCollection)||void 0===i||i.reportUiCounter(n,f.METRIC_TYPE.COUNT,t)}s.done()},uiState:s.uiState})))),t)}}))({getStartDeps:l}))}start(e,{fieldFormats:t}){s(t)}}var b=n(5);function m(){return new plugin_ExpressionGaugePlugin}},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme}]);