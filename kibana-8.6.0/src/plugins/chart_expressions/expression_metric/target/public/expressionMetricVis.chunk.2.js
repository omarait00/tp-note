(window.expressionMetricVis_bundle_jsonpfunction=window.expressionMetricVis_bundle_jsonpfunction||[]).push([[2],{25:function(e,t,n){"use strict";n.d(t,"g",(function(){return v})),n.d(t,"l",(function(){return p})),n.d(t,"n",(function(){return b})),n.d(t,"j",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return x})),n.d(t,"k",(function(){return j})),n.d(t,"m",(function(){return y})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(27),o=n.n(r),i=n(28),c=n.n(i),s="positive",l="fixed",u="custom",a="above",d="percent",m=5,f=["stops"];function v(e,t,n,r,o){return 0===r?o+t:b(t+(e-n)*o/r)}function p(e,t,n){var r=n.prevPalette,i=n.dataBounds,l=n.mapFromMinValue,u=n.defaultPaletteName,a=function(e,t){var n,r,o,i,c,s,l=h(null==e?void 0:e.rangeType,t),u=l.min,a=l.max,d=null!==(n=null==e||null===(r=e.colorStops)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.stop)&&void 0!==n?n:Number.POSITIVE_INFINITY,m=null!==(i=null==e||null===(c=e.colorStops)||void 0===c||null===(s=c[e.colorStops.length-1])||void 0===s?void 0:s.stop)&&void 0!==i?i:Number.NEGATIVE_INFINITY;return{min:Math.min(u,d),max:Math.max(a,m)}}(t,i),d=a.min,p=a.max,b=p-d,g=t||{},x=(g.stops,c()(g,f));if("custom"===t.name&&null!=t&&t.colorStops)return function(e,t){var n=e.map((function(e,n,r){return o()(o()({},e),{},{stop:n+1<r.length?r[n+1].stop:t})}));if(e[e.length-1].stop===t){var r=function(e,t,n){var r=t.length,o=r>1&&t[r-1].stop-t[r-2].stop||1,i=Number(o.toFixed(2));if(n<e[r-1].stop+i){var c=n-e[r-1].stop;i=c>0?c:1}return i}(e,n,t)||1,i=Math.min(1,r);n[e.length-1].stop=t+i}return n}(t.colorStops,p);var j,y,O,M,w,C,E=(null==t?void 0:t.steps)||m,F=e.get(r||(null==t?void 0:t.name)||u||s).getCategoricalColors(E,x),T=l||0===b?d:b/E;return j=F.map((function(e,t){return{color:e,stop:t}})),y={newInterval:b,oldInterval:F.length,newMin:T,oldMin:0},O=y.newInterval,M=y.oldInterval,w=y.newMin,C=y.oldMin,(j||[]).map((function(e){return{color:e.color,stop:v(e.stop,w,C,M,O)}}))}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number((Math.floor(100*e)/100).toFixed(t))}function h(e,t){return{min:"number"===e?t.min:0,max:"number"===e?t.max:100}}var g=function(e){return Boolean(e&&["below","all"].includes(e))},x=function(e){return Boolean(e&&["above","all"].includes(e))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"percent";return"percent"===e?{min:0,max:100,fallback:!0}:{min:1,max:1,fallback:!0}};function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return e.stop}));return e.map((function(n,r){return{color:n.color,stop:t[e.length-r-1]}})).reverse()}},26:function(e,t,n){e.exports=n(18)(3)},27:function(e,t,n){e.exports=n(18)(2745)},28:function(e,t,n){e.exports=n(18)(6)},39:function(e,t,n){"use strict";n.r(t),n.d(t,"defaultColor",(function(){return y})),n.d(t,"MetricVis",(function(){return w}));var r=n(13),o=n.n(r),i=n(19),c=n.n(i),s=n(0),l=n(7),u=n(1),a=n(20),d=n(25),m=n(17),f=n(4),v={name:"1azakc",styles:"text-align:center"},p=function(){var e=v;return Object(f.jsx)("div",{css:e},Object(f.jsx)(m.EuiLoadingSpinner,null))},b=(n(26),function(e){arguments.length>1&&void 0!==arguments[1]||Object(f.jsx)(p,null)}(o.a.lazy((function(){return n.e(1).then(n.bind(null,38))}))),n(21)),h=n(2),g=n(8);const x={"en-$":"USD","be-nl-€":"EUR","chs-¥":"CNY","cs-kč":"CZK","da-dk-dkk":"DKK","de-ch-chf":"CHF","de-€":"EUR","en-gb-£":"GBP","es-es-€":"EUR","es-$":"","et-€":"EUR","fi-€":"EUR","fr-ca-$":"CAD","fr-ch-chf":"CHF","fr-€":"EUR","hu-ft":"HUF","it-€":"EUR","ja-¥":"JPY","nl-nl-€":"EUR","pl-pln":"PLN","pt-br-r$":"BRL","pt-pt-€":"EUR","ru-ua-₴":"UAH","ru-руб.":"RUB","sk-€":"EUR","th-฿":"THB","tr-₺":"TRY","uk-ua-₴":"UAH"};var j=n(10);const y=b.euiThemeVars.euiColorLightestShade,O=(e,t)=>{var n,r;const o=Object(u.getFormatByAccessor)(e,t),i=null!==(n="suffix"===(null==o?void 0:o.id)?null===(r=o.params)||void 0===r?void 0:r.id:null==o?void 0:o.id)&&void 0!==n?n:"number";if(!["number","currency","percent","bytes","duration","string","null"].includes(i))throw new Error(s.i18n.translate("expressionMetricVis.errors.unsupportedColumnFormat",{defaultMessage:'Metric visualization expression - Unsupported column format: "{id}"',values:{id:i}}));if("string"===i)return Object(g.a)().deserialize(o).getConverterFor("text");if("duration"===i)return Object(g.a)().deserialize({...o,params:{...o.params,outputFormat:"humanizePrecise",outputPrecision:1,useShortSuffix:!0}}).getConverterFor("text");const l=Object(g.d)().get(a.FORMATS_UI_SETTINGS.FORMAT_NUMBER_DEFAULT_LOCALE)||"en",d={maximumFractionDigits:2};if(["number","currency","percent"].includes(i)&&(d.notation="compact"),"currency"===i){const e=c.a.language();c.a.language(l);const{currency:{symbol:t}}=c.a.languageData();c.a.language(e),d.currency=((e,t)=>x[`${e.trim()}-${t.trim()}`.toLowerCase()])(l,t),d.style="currency"}return"percent"===i&&(d.style="percent"),"bytes"===i?e=>{const{value:t,unit:n}=(e=>{const t=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"],n=Math.abs(e),r=1024;let o,i=t[0],c=n<r;if(!c)for(o=1;o<t.length;o++){const[s,l]=[Math.pow(r,o),Math.pow(r,o+1)];if(n>=s&&n<l){i=t[o],c=!0,e/=s;break}}return c||(e/=Math.pow(r,t.length-1),i=t[t.length-1]),{value:e,unit:i}})(e);return new Intl.NumberFormat(l,{...d,style:"unit",unit:n}).format(t)}:new Intl.NumberFormat(l,d).format},M=(e,t,n,r,o)=>{var i,c;const{min:s,max:l}=Object(j.a)(n,r,o);return null===(i=Object(g.b)().get(d.a))||void 0===i||null===(c=i.getColorForValue)||void 0===c?void 0:c.call(i,e,t,{min:s,max:l})},w=({data:e,config:t,renderComplete:n,fireEvent:o,renderMode:i,filterable:c})=>{var a,d,v;const p=Object(u.getColumnByAccessor)(t.dimensions.metric,e.columns),x=O(t.dimensions.metric,e.columns);let j,w,C,E;t.dimensions.secondaryMetric&&(j=Object(u.getColumnByAccessor)(t.dimensions.secondaryMetric,e.columns),w=O(t.dimensions.secondaryMetric,e.columns)),t.dimensions.breakdownBy&&(C=Object(u.getColumnByAccessor)(t.dimensions.breakdownBy,e.columns),E=Object(g.a)().deserialize(Object(u.getFormatByAccessor)(t.dimensions.breakdownBy,e.columns)).getConverterFor("text"));const F=t.dimensions.max?null===(a=Object(u.getColumnByAccessor)(t.dimensions.max,e.columns))||void 0===a?void 0:a.id:void 0,T=(C?e.rows:e.rows.slice(0,1)).map(((n,r)=>{var o,i,c,l,u;const a=null!==n[p.id]?n[p.id]:NaN,d=C?E(n[C.id]):p.name,m=C?p.name:t.metric.subtitle,v=null!==(o=t.metric.secondaryPrefix)&&void 0!==o?o:null===(i=j)||void 0===i?void 0:i.name,b={value:a,valueFormatter:x,title:d,subtitle:m,extra:Object(f.jsx)("span",null,v,j?`${v?" ":""}${w(n[j.id])}`:void 0),color:t.metric.palette&&null!=a?null!==(c=M(a,t.metric.palette,{metric:p.id,max:F,breakdownBy:null===(l=C)||void 0===l?void 0:l.id},e,r))&&void 0!==c?c:y:null!==(u=t.metric.color)&&void 0!==u?u:y},g=C?n[C.id]:h.a;return t.metric.trends&&t.metric.trends[g]?{...b,trend:t.metric.trends[g],trendShape:"area",trendA11yTitle:s.i18n.translate("expressionMetricVis.trendA11yTitle",{defaultMessage:"{dataTitle} over time.",values:{dataTitle:p.name}}),trendA11yDescription:s.i18n.translate("expressionMetricVis.trendA11yDescription",{defaultMessage:"A line chart showing the trend of the primary metric over time."})}:F&&t.metric.progressDirection?{...b,domainMax:n[F],progressBarDirection:t.metric.progressDirection}:b}));if(t.metric.minTiles)for(;T.length<t.metric.minTiles;)T.push(void 0);const k=[],{metric:{maxCols:B}}=t;for(let e=0;e<T.length;e+=B)k.push(T.slice(e,e+B));const I=Object(g.c)().useChartsTheme(),A=Object(r.useCallback)((e=>{e&&n()}),[n]);let R,U;if("edit"===i){var N;const e=T.flat().length>1?200:300;R=k.length*e,U=(null===(N=k[0])||void 0===N?void 0:N.length)*e}const[S,V]=Object(r.useState)("100%"),D=Object(r.useRef)(null),$=Object(m.useResizeObserver)(D.current),_=Object(g.c)().useChartsBaseTheme(),L=null!==(d=null===(v=I.metric)||void 0===v?void 0:v.minHeight)&&void 0!==d?d:_.metric.minHeight;return Object(r.useEffect)((()=>{var e;const t=L*k.length;V((null!==(e=$.height)&&void 0!==e?e:-1/0)>t?"100%":`${t}px`)}),[k.length,L,$.height]),Object(f.jsx)("div",{ref:D,css:Object(f.css)("height:",R?`${R}px`:"100%",";width:",U?`${U}px`:"100%",";max-height:100%;max-width:100%;overflow-y:auto;","")},Object(f.jsx)("div",{css:Object(f.css)("height:",S,";","")},Object(f.jsx)(l.Chart,null,Object(f.jsx)(l.Settings,{theme:[{background:{color:"transparent"},metric:{background:y,barBackground:b.euiThemeVars.euiColorLightShade}},I],baseTheme:_,onRenderChange:A,onElementClick:t=>{c&&t.forEach((t=>{if(Object(l.isMetricElementEvent)(t)){const n=C?e.columns.findIndex((e=>e===C)):e.columns.findIndex((e=>e===p)),r=k[0].length;o(((e,t,n)=>{const r=n.columns[t];return{name:"filter",data:{data:[{table:n,column:t,row:e,value:n.rows[e][r.id]}]}}})(t.rowIndex*r+t.columnIndex,n,e))}}))}}),Object(f.jsx)(l.Metric,{id:"metric",data:k}))))}}}]);