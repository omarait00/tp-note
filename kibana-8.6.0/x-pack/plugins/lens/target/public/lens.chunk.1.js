/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.lens_bundle_jsonpfunction=window.lens_bundle_jsonpfunction||[]).push([[1,9],Array(55).concat([function(e,t,n){"use strict";var a,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function i(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},a=[],r=0;r<e.length;r++){var s=e[r],l=t.base?s[0]+t.base:s[0],u=n[l]||0,c="".concat(l," ").concat(u);n[l]=u+1;var d=i(c),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(o[d].references++,o[d].updater(p)):o.push({identifier:c,updater:g(p,t),references:1}),a.push(c)}return a}function l(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var o=n.nc;o&&(a.nonce=o)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var i=r(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var u,c=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,n,a){var r=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=c(t,r);else{var o=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function p(e,t,n){var a=n.css,r=n.media,o=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var f=null,b=0;function g(e,t){var n,a,r;if(t.singleton){var o=b++;n=f||(f=l(t)),a=d.bind(null,n,o,!1),r=d.bind(null,n,o,!0)}else n=l(t),a=p.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<n.length;a++){var r=i(n[a]);o[r].references--}for(var l=s(e,t),u=0;u<n.length;u++){var c=i(n[u]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=l}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,a,r,o=e[1]||"",i=e[3];if(!i)return o;if(t&&"function"==typeof btoa){var s=(n=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(r," */")),l=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[o].concat(l).concat([s]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(a)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);a&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t,n){"use strict";n.d(t,"s",(function(){return c})),n.d(t,"j",(function(){return w})),n.d(t,"o",(function(){return O})),n.d(t,"g",(function(){return D.a})),n.d(t,"k",(function(){return D.b})),n.d(t,"c",(function(){return k.a})),n.d(t,"z",(function(){return P})),n.d(t,"p",(function(){return I})),n.d(t,"D",(function(){return M})),n.d(t,"H",(function(){return E})),n.d(t,"m",(function(){return T})),n.d(t,"f",(function(){return B})),n.d(t,"e",(function(){return V})),n.d(t,"h",(function(){return N})),n.d(t,"q",(function(){return W})),n.d(t,"b",(function(){return K})),n.d(t,"G",(function(){return q})),n.d(t,"I",(function(){return G})),n.d(t,"C",(function(){return H})),n.d(t,"B",(function(){return U})),n.d(t,"x",(function(){return X})),n.d(t,"t",(function(){return z})),n.d(t,"n",(function(){return J})),n.d(t,"w",(function(){return Q.a})),n.d(t,"A",(function(){return Q.b})),n.d(t,"y",(function(){return ee})),n.d(t,"F",(function(){return h.a})),n.d(t,"E",(function(){return ae})),n.d(t,"l",(function(){return oe})),n.d(t,"u",(function(){return se})),n.d(t,"a",(function(){return le})),n.d(t,"d",(function(){return ue})),n.d(t,"i",(function(){return pe})),n.d(t,"r",(function(){return fe})),n.d(t,"v",(function(){return xe})),n(184);var a=n(8),r=n.n(a),o=n(7),i=n(13),s=n(60),l=n(2);const u={legend:s.f,labels:"visText",values:"number",list:"list",visualOptions:"brush"},c=({children:e,title:t,type:n,isDisabled:r=!1,groupPosition:s,buttonDataTestSubj:c,panelClassName:d="lnsVisToolbar__popover",handleClose:p})=>{const[f,b]=Object(a.useState)(!1),g="string"==typeof n?u[n]:n;return Object(l.jsx)(o.EuiFlexItem,{grow:!1},Object(l.jsx)(o.EuiPopover,{panelClassName:d,ownFocus:!0,"aria-label":t,button:Object(l.jsx)(i.ToolbarButton,{fontWeight:"normal",onClick:()=>{b(!f)},title:t,hasArrow:!1,isDisabled:r,groupPosition:s,dataTestSubj:c},Object(l.jsx)(o.EuiIcon,{type:g})),isOpen:f,closePopover:()=>{b(!1),null==p||p()},anchorPosition:"downRight"},Object(l.jsx)(o.EuiPopoverTitle,null,t),e))};var d=n(0),p=n(29);const f=[{id:p.Position.Top,label:d.i18n.translate("xpack.lens.shared.legendPositionTop",{defaultMessage:"Top"}),iconType:"arrowUp"},{id:p.Position.Right,label:d.i18n.translate("xpack.lens.shared.legendPositionRight",{defaultMessage:"Right"}),iconType:"arrowRight"},{id:p.Position.Bottom,label:d.i18n.translate("xpack.lens.shared.legendPositionBottom",{defaultMessage:"Bottom"}),iconType:"arrowDown"},{id:p.Position.Left,label:d.i18n.translate("xpack.lens.shared.legendPositionLeft",{defaultMessage:"Left"}),iconType:"arrowLeft"}],b=[{id:"xy_location_outside",value:"outside",label:d.i18n.translate("xpack.lens.xyChart.legendLocation.outside",{defaultMessage:"Outside"})},{id:"xy_location_inside",value:"inside",label:d.i18n.translate("xpack.lens.xyChart.legendLocation.inside",{defaultMessage:"Inside"})}],g=[{id:"xy_location_alignment_top_right",value:"top_right",label:d.i18n.translate("xpack.lens.shared.legendLocationTopRight",{defaultMessage:"Top right"}),iconType:"editorPositionTopRight"},{id:"xy_location_alignment_top_left",value:"top_left",label:d.i18n.translate("xpack.lens.shared.legendLocationTopLeft",{defaultMessage:"Top left"}),iconType:"editorPositionTopLeft"},{id:"xy_location_alignment_bottom_right",value:"bottom_right",label:d.i18n.translate("xpack.lens.shared.legendLocationBottomRight",{defaultMessage:"Bottom right"}),iconType:"editorPositionBottomRight"},{id:"xy_location_alignment_bottom_left",value:"bottom_left",label:d.i18n.translate("xpack.lens.shared.legendLocationBottomLeft",{defaultMessage:"Bottom left"}),iconType:"editorPositionBottomLeft"}],m=({location:e,onLocationChange:t=(()=>{}),position:n,onPositionChange:a,verticalAlignment:i,horizontalAlignment:s,onAlignmentChange:u=(()=>{}),isDisabled:c=!1})=>{const m=`${i||p.VerticalAlignment.Top}_${s||p.HorizontalAlignment.Right}`;return c?null:Object(l.jsx)(r.a.Fragment,null,e&&Object(l.jsx)(o.EuiFormRow,{display:"columnCompressed",label:d.i18n.translate("xpack.lens.shared.legendLocationLabel",{defaultMessage:"Location"})},Object(l.jsx)(o.EuiButtonGroup,{isFullWidth:!0,legend:d.i18n.translate("xpack.lens.shared.legendLocationLabel",{defaultMessage:"Location"}),"data-test-subj":"lens-legend-location-btn",name:"legendLocation",buttonSize:"compressed",options:b,isDisabled:c,idSelected:b.find((({value:t})=>t===e)).id,onChange:e=>{const n=b.find((({id:t})=>t===e)).value;t(n)}})),Object(l.jsx)(o.EuiFormRow,{display:"columnCompressed",label:d.i18n.translate("xpack.lens.shared.legendInsideAlignmentLabel",{defaultMessage:"Alignment"})},Object(l.jsx)(r.a.Fragment,null,(!e||"outside"===e)&&Object(l.jsx)(o.EuiButtonGroup,{legend:d.i18n.translate("xpack.lens.shared.legendAlignmentLabel",{defaultMessage:"Alignment"}),isDisabled:c,"data-test-subj":"lens-legend-position-btn",name:"legendPosition",buttonSize:"compressed",options:f,idSelected:n||p.Position.Right,onChange:a,isIconOnly:!0}),"inside"===e&&Object(l.jsx)(o.EuiButtonGroup,{legend:d.i18n.translate("xpack.lens.shared.legendInsideLocationAlignmentLabel",{defaultMessage:"Alignment"}),type:"single","data-test-subj":"lens-legend-inside-alignment-btn",name:"legendInsideAlignment",buttonSize:"compressed",isDisabled:c,options:g,idSelected:g.find((({value:e})=>e===m)).id,onChange:e=>{const t=g.find((({id:t})=>t===e)).value;u(t)},isIconOnly:!0}))))};var h=n(82);const v=({floatingColumns:e,onFloatingColumnsChange:t=(()=>{}),isLegendOutside:n})=>{const{inputValue:a,handleInputChange:r}=Object(h.a)({value:null!=e?e:1,onChange:t});return n?null:Object(l.jsx)(o.EuiFormRow,{label:d.i18n.translate("xpack.lens.shared.legendInsideColumnsLabel",{defaultMessage:"Number of columns"}),fullWidth:!0,display:"columnCompressed"},Object(l.jsx)(o.EuiFieldNumber,{"data-test-subj":"lens-legend-location-columns-input",value:a,min:1,max:5,compressed:!0,onChange:e=>{r(Number(e.target.value))},step:1}))};var y=n(5);const x=[{value:y.LegendSize.SMALL,inputDisplay:d.i18n.translate("xpack.lens.shared.legendSizeSetting.legendSizeOptions.small",{defaultMessage:"Small"})},{value:y.LegendSize.MEDIUM,inputDisplay:d.i18n.translate("xpack.lens.shared.legendSizeSetting.legendSizeOptions.medium",{defaultMessage:"Medium"})},{value:y.LegendSize.LARGE,inputDisplay:d.i18n.translate("xpack.lens.shared.legendSizeSetting.legendSizeOptions.large",{defaultMessage:"Large"})},{value:y.LegendSize.EXTRA_LARGE,inputDisplay:d.i18n.translate("xpack.lens.shared.legendSizeSetting.legendSizeOptions.extraLarge",{defaultMessage:"Extra large"})}],j=({legendSize:e,onLegendSizeChange:t,isVerticalLegend:n,showAutoOption:r})=>{Object(a.useEffect)((()=>{e&&!n&&t(void 0)}),[n,e,t]);const i=Object(a.useCallback)((e=>t(e===y.DEFAULT_LEGEND_SIZE?void 0:e)),[t]);if(!n)return null;const s=r?[{value:y.LegendSize.AUTO,inputDisplay:d.i18n.translate("xpack.lens.shared.legendSizeSetting.legendSizeOptions.auto",{defaultMessage:"Auto"})},...x]:x;return Object(l.jsx)(o.EuiFormRow,{display:"columnCompressed",label:d.i18n.translate("xpack.lens.shared.legendSizeSetting.label",{defaultMessage:"Legend width"}),fullWidth:!0},Object(l.jsx)(o.EuiSuperSelect,{compressed:!0,valueOfSelected:null!=e?e:y.DEFAULT_LEGEND_SIZE,options:s,onChange:i}))},_=({value:e,setValue:t})=>{const{inputValue:n,handleInputChange:a}=Object(h.a)({value:e,onChange:t});return Object(l.jsx)(o.EuiFieldNumber,{"data-test-subj":"lens-legend-max-lines-input",value:n,min:1,max:5,step:1,compressed:!0,onChange:e=>{const t=Number(e.target.value);a(Math.min(5,Math.max(t,1)))}})},w=({legendOptions:e,mode:t,onDisplayChange:n,position:a,location:i,onLocationChange:s=(()=>{}),verticalAlignment:u,horizontalAlignment:f,floatingColumns:b,onAlignmentChange:g=(()=>{}),onFloatingColumnsChange:h=(()=>{}),onPositionChange:y,renderNestedLegendSwitch:x,nestedLegend:w,onNestedLegendChange:O=(()=>{}),valueInLegend:D,onValueInLegendChange:k=(()=>{}),renderValueInLegendSwitch:P,groupPosition:L="right",maxLines:S,onMaxLinesChange:I=(()=>{}),shouldTruncate:C,onTruncateLegendChange:E=(()=>{}),legendSize:M,onLegendSizeChange:T,showAutoLegendSizeOption:A})=>Object(l.jsx)(c,{title:d.i18n.translate("xpack.lens.shared.legendLabel",{defaultMessage:"Legend"}),type:"legend",groupPosition:L,buttonDataTestSubj:"lnsLegendButton"},Object(l.jsx)(o.EuiFormRow,{display:"columnCompressed",label:d.i18n.translate("xpack.lens.shared.legendVisibilityLabel",{defaultMessage:"Display"})},Object(l.jsx)(o.EuiButtonGroup,{isFullWidth:!0,legend:d.i18n.translate("xpack.lens.shared.legendVisibilityLabel",{defaultMessage:"Display"}),"data-test-subj":"lens-legend-display-btn",name:"legendDisplay",buttonSize:"compressed",options:e,idSelected:e.find((({value:e})=>e===t)).id,onChange:n})),"hide"!==t&&Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)(m,{location:i,onLocationChange:s,verticalAlignment:u,horizontalAlignment:f,onAlignmentChange:g,position:a,onPositionChange:y}),"inside"!==i&&Object(l.jsx)(j,{legendSize:M,onLegendSizeChange:T,isVerticalLegend:!a||a===p.Position.Left||a===p.Position.Right,showAutoOption:A}),i&&Object(l.jsx)(v,{floatingColumns:b,onFloatingColumnsChange:h,isLegendOutside:"outside"===i}),Object(l.jsx)(o.EuiFormRow,{display:"columnCompressedSwitch",label:d.i18n.translate("xpack.lens.shared.truncateLegend",{defaultMessage:"Truncate text"})},Object(l.jsx)(o.EuiSwitch,{compressed:!0,label:d.i18n.translate("xpack.lens.shared.truncateLegend",{defaultMessage:"Truncate text"}),"data-test-subj":"lens-legend-truncate-switch",showLabel:!1,checked:null==C||C,onChange:E})),C&&Object(l.jsx)(o.EuiFormRow,{label:d.i18n.translate("xpack.lens.shared.maxLinesLabel",{defaultMessage:"Maximum lines"}),fullWidth:!0,display:"columnCompressed"},Object(l.jsx)(_,{value:null!=S?S:1,setValue:I})),x&&Object(l.jsx)(o.EuiFormRow,{display:"columnCompressedSwitch",label:d.i18n.translate("xpack.lens.shared.nestedLegendLabel",{defaultMessage:"Nested"})},Object(l.jsx)(o.EuiSwitch,{compressed:!0,label:d.i18n.translate("xpack.lens.pieChart.nestedLegendLabel",{defaultMessage:"Nested"}),"data-test-subj":"lens-legend-nested-switch",showLabel:!1,checked:!!w,onChange:O})),P&&Object(l.jsx)(o.EuiFormRow,{display:"columnCompressedSwitch",label:d.i18n.translate("xpack.lens.shared.valueInLegendLabel",{defaultMessage:"Show value"})},Object(l.jsx)(o.EuiSwitch,{compressed:!0,label:d.i18n.translate("xpack.lens.shared.valueInLegendLabel",{defaultMessage:"Show value"}),"data-test-subj":"lens-legend-show-value",showLabel:!1,checked:!!D,onChange:k}))));function O({palettes:e,activePalette:t,setPalette:n}){const a=e.getAll().filter((({internal:e})=>!e)).map((({id:e,title:n,getCategoricalColors:a})=>({value:e,title:n,type:"fixed",palette:a(10,e===(null==t?void 0:t.name)?null==t?void 0:t.params:void 0)})));return Object(l.jsx)(o.EuiFormRow,{display:"columnCompressed",fullWidth:!0,label:d.i18n.translate("xpack.lens.palettePicker.label",{defaultMessage:"Color palette"})},Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)(o.EuiColorPalettePicker,{fullWidth:!0,"data-test-subj":"lns-palettePicker",compressed:!0,palettes:a,onChange:e=>{n({type:"palette",name:e})},valueOfSelected:(null==t?void 0:t.name)||"default",selectionDisplay:"palette"})))}var D=n(79),k=n(93);function P(e,t,n){const a=t.getFieldByName(e);return"document"===(null==a?void 0:a.type)||n(t.id,e)}var L=n(21),S=n(36);const I=({value:e,onChange:t,indexPattern:n,isInvalid:a,onSubmit:r,disableAutoFocus:o,"data-test-subj":s,placeholder:u})=>{const{inputValue:c,handleInputChange:p}=Object(h.a)({value:e,onChange:t}),f=Object(i.useKibana)().services,{data:b,uiSettings:g,http:m,notifications:v,docLinks:y,storage:x,unifiedSearch:j,dataViews:_}=f;return Object(l.jsx)(S.QueryStringInput,{dataTestSubj:null!=s?s:"indexPattern-filters-queryStringInput",size:"s",disableAutoFocus:o,isInvalid:a,bubbleSubmitEvent:!1,indexPatterns:[n],query:c,onChange:e=>{Object(L.isEqual)(e,c)||p(e)},onSubmit:()=>{c.query&&r()},placeholder:null!=u?u:"kuery"===c.language?d.i18n.translate("xpack.lens.indexPattern.filters.queryPlaceholderKql",{defaultMessage:"{example}",values:{example:'method : "GET" or status : "404"'}}):d.i18n.translate("xpack.lens.indexPattern.filters.queryPlaceholderLucene",{defaultMessage:"{example}",values:{example:"method:GET OR status:404"}}),languageSwitcherPopoverAnchorPosition:"rightDown",appName:d.i18n.translate("xpack.lens.queryInput.appName",{defaultMessage:"Lens"}),deps:{unifiedSearch:j,notifications:v,http:m,docLinks:y,uiSettings:g,data:b,storage:x,dataViews:_}})};var C=n(30);const E=(e,t)=>{let n,a=!0;try{e&&("kuery"===e.language?Object(C.toElasticsearchQuery)(Object(C.fromKueryExpression)(e.query),t):Object(C.luceneStringToDsl)(e.query))}catch(e){a=!1,n=e.message}return{isValid:a,error:n}},M=(e,t)=>E(e,t).isValid,T=({label:e,onClick:t,isDisabled:n,className:a,"data-test-subj":r="lns-newBucket-add"})=>Object(l.jsx)(o.EuiButtonEmpty,{"data-test-subj":r,size:"xs",iconType:"plusInCircle",onClick:t,isDisabled:n,flush:"left",className:a},e);var A=n(12),F=n.n(A);const N=({idx:e,onRemoveClick:t,removeTitle:n,children:a,draggableProvided:r,isNotRemovable:i,isNotDraggable:s,isDragging:u,"data-test-subj":c="lns-fieldsBucketContainer"})=>{var p;const{euiTheme:f}=Object(o.useEuiTheme)();return Object(l.jsx)(o.EuiPanel,{paddingSize:"xs",hasShadow:u,color:u?"plain":"transparent","data-test-subj":c},Object(l.jsx)(o.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center",responsive:!1},Object(l.jsx)(o.EuiFlexItem,F()({grow:!1},null!==(p=null==r?void 0:r.dragHandleProps)&&void 0!==p?p:{}),Object(l.jsx)(z,{tooltipContent:d.i18n.translate("xpack.lens.fieldsBucketContainer.dragHandleDisabled",{defaultMessage:"Reordering requires more than one item."}),condition:null==s||s},Object(l.jsx)(o.EuiIcon,{size:"s",color:f.colors[s?"disabled":"text"],type:"grab","aria-label":d.i18n.translate("xpack.lens.fieldsBucketContainer.dragToReorder",{defaultMessage:"Drag to reorder"}),"data-test-subj":`${c}-dragToReorder-${e}`}))),Object(l.jsx)(o.EuiFlexItem,{grow:!0,style:{minWidth:0}},a),Object(l.jsx)(o.EuiFlexItem,{grow:!1},Object(l.jsx)(z,{tooltipContent:d.i18n.translate("xpack.lens.fieldsBucketContainer.deleteButtonDisabled",{defaultMessage:"A minimum of one item is required."}),condition:null!=i&&i},Object(l.jsx)(o.EuiButtonIcon,{iconType:"trash",color:"danger","aria-label":n,onClick:t,"data-test-subj":`${c}-removeField-${e}`,isDisabled:i})))))},z=({children:e,condition:t,tooltipContent:n,...a})=>Object(l.jsx)(r.a.Fragment,null,t?Object(l.jsx)(o.EuiToolTip,F()({content:n,delay:"long"},a),Object(l.jsx)(r.a.Fragment,null,e)):e),R=({idx:e,isInvalid:t,invalidMessage:n,onRemoveClick:a,removeTitle:r,children:i,draggableProvided:s,isNotRemovable:u,isNotDraggable:c,"data-test-subj":p="lns-customBucketContainer"})=>{var f;const{euiTheme:b}=Object(o.useEuiTheme)();return Object(l.jsx)(o.EuiPanel,{paddingSize:"none",hasShadow:!1,hasBorder:!0,"data-test-subj":p,style:{padding:"0 "+b.size.xs}},Object(l.jsx)(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},Object(l.jsx)(o.EuiFlexItem,F()({grow:!1},null!==(f=null==s?void 0:s.dragHandleProps)&&void 0!==f?f:{}),Object(l.jsx)(z,{tooltipContent:d.i18n.translate("xpack.lens.fieldsBucketContainer.dragHandleDisabled",{defaultMessage:"Reordering requires more than one item."}),condition:null==c||c},Object(l.jsx)(o.EuiIcon,{size:"s",color:b.colors[t?"danger":c?"disabled":"subduedText"],type:t?"alert":"grab","aria-label":t?n:d.i18n.translate("xpack.lens.customBucketContainer.dragToReorder",{defaultMessage:"Drag to reorder"}),"data-test-subj":`${p}-dragToReorder-${e}`}))),Object(l.jsx)(o.EuiFlexItem,{grow:!0},i),Object(l.jsx)(o.EuiFlexItem,{grow:!1},Object(l.jsx)(z,{tooltipContent:d.i18n.translate("xpack.lens.fieldsBucketContainer.deleteButtonDisabled",{defaultMessage:"A minimum of one item is required."}),condition:null!=u&&u},Object(l.jsx)(o.EuiButtonIcon,{iconSize:"s",iconType:"trash",color:"danger",onClick:a,"aria-label":r,disabled:u,"data-test-subj":`${p}-remove-${e}`})))))},B=({id:e,children:t,isInsidePanel:n,Container:a=R,...r})=>{const{euiTheme:i}=Object(o.useEuiTheme)();return Object(l.jsx)(o.EuiDraggable,{draggableId:e,customDragHandle:!0,index:r.idx,isDragDisabled:r.isNotDraggable,style:n?{}:{marginBottom:i.size.xs},spacing:"none",hasInteractiveChildren:!0,disableInteractiveElementBlocking:!0},((e,n)=>{var o;return Object(l.jsx)(a,F()({draggableProvided:e,isDragging:null!==(o=null==n?void 0:n.isDragging)&&void 0!==o&&o},r),t)}))};function V({items:e,onDragStart:t,onDragEnd:n,droppableId:r,children:i,bgColor:s}){const[u,c]=Object(a.useState)(!1),d=Object(a.useCallback)((({source:t,destination:a})=>{c(!1),t&&a&&(null==n||n(Object(o.euiDragDropReorder)(e,t.index,a.index)))}),[e,n]),p=Object(a.useCallback)((()=>{c(!0),null==t||t()}),[t]);return Object(l.jsx)(o.EuiDragDropContext,{onDragEnd:d,onDragStart:p},Object(l.jsx)(o.EuiPanel,{paddingSize:"none",color:u?"success":s,hasShadow:!1,hasBorder:!1},Object(l.jsx)(o.EuiDroppable,{droppableId:r,spacing:s?"m":"none",style:{backgroundColor:"transparent"}},i)))}function W({isInvalid:e,label:t,helpText:n,error:a,lowerValue:r,onLowerValueChange:i,onLowerValueBlur:s,upperValue:u,onUpperValueChange:c,onUpperValueBlur:d,testSubjLayout:p,testSubjLower:f,testSubjUpper:b}){return Object(l.jsx)(o.EuiFormRow,{display:"columnCompressed",fullWidth:!0,isInvalid:e,label:t,helpText:n,error:a},Object(l.jsx)(o.EuiFormControlLayoutDelimited,{"data-test-subj":p,compressed:!0,startControl:Object(l.jsx)(o.EuiFieldNumber,{compressed:!0,value:r,isInvalid:e,"data-test-subj":f,onChange:i,onBlur:s,step:"any",controlOnly:!0}),endControl:Object(l.jsx)(o.EuiFieldNumber,{compressed:!0,value:u,"data-test-subj":b,onChange:c,onBlur:d,step:"any",controlOnly:!0})}))}function G(e){return e&&null!=e.lowerBound&&null!=e.upperBound&&e.lowerBound<=0&&e.upperBound>=0}function q(e){return e&&null!=e.lowerBound&&null!=e.upperBound&&e.upperBound>e.lowerBound}function H(e,t){if(!t)return!1;const n=null==e?void 0:e.getOperationForColumnId(t);return Boolean(n&&"number"===n.dataType&&"interval"===n.scale)}function U(e,t,n){const a=null==t?void 0:t[e];if(n&&a){const e=a.rows.map((({[n]:e})=>e)).filter((e=>null!=e)).sort(((e,t)=>e-t));if(e.length)return{min:e[0],max:e[e.length-1]}}}const $=Object(o.htmlIdGenerator)()();function K({testSubjPrefix:e,extent:t,setExtent:n,dataBounds:a}){var i,s,u;const c=!q(t);return Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)(o.EuiFormRow,{display:"columnCompressed",fullWidth:!0,label:d.i18n.translate("xpack.lens.axisExtent.label",{defaultMessage:"Bounds"})},Object(l.jsx)(o.EuiButtonGroup,{isFullWidth:!0,legend:d.i18n.translate("xpack.lens.axisExtent.label",{defaultMessage:"Bounds"}),"data-test-subj":`${e}_axisBounds_groups`,name:"axisBounds",buttonSize:"compressed",options:[{id:`${$}dataBounds`,label:d.i18n.translate("xpack.lens.axisExtent.dataBounds",{defaultMessage:"Data"}),"data-test-subj":`${e}_axisExtent_groups_DataBounds'`},{id:`${$}custom`,label:d.i18n.translate("xpack.lens.axisExtent.custom",{defaultMessage:"Custom"}),"data-test-subj":`${e}_axisExtent_groups_custom'`}],idSelected:`${$}${null!==(i=t.mode)&&void 0!==i?i:"dataBounds"}`,onChange:e=>{const r=e.replace($,"");n({...t,mode:r,lowerBound:"custom"===r&&a?a.min:void 0,upperBound:"custom"===r&&a?a.max:void 0})}})),"custom"===(null==t?void 0:t.mode)&&Object(l.jsx)(W,{isInvalid:c,label:" ",error:c?d.i18n.translate("xpack.lens.boundaryError",{defaultMessage:"Lower bound has to be larger than upper bound"}):void 0,testSubjLayout:`${e}_axisExtent_customBounds`,testSubjLower:`${e}_axisExtent_lowerBound`,testSubjUpper:`${e}_axisExtent_upperBound`,lowerValue:null!==(s=t.lowerBound)&&void 0!==s?s:"",onLowerValueChange:e=>{const a=Number(e.target.value),r=""===e.target.value||Number.isNaN(Number(a));n({...t,lowerBound:r?void 0:a})},onLowerValueBlur:()=>{void 0===t.lowerBound&&a&&n({...t,lowerBound:a.min})},upperValue:null!==(u=t.upperBound)&&void 0!==u?u:"",onUpperValueChange:e=>{const a=Number(e.target.value),r=""===e.target.value||Number.isNaN(Number(a));n({...t,upperBound:r?void 0:a})},onUpperValueBlur:()=>{void 0===t.upperBound&&a&&n({...t,upperBound:a.max})}}))}const Y={xy:"axisExtentConfig"},X=(e,t="xy")=>({type:"expression",chain:[{type:"function",function:Y[t],arguments:{mode:null!=e&&e.mode?[e.mode]:[],lowerBound:void 0!==(null==e?void 0:e.lowerBound)?[null==e?void 0:e.lowerBound]:[],upperBound:void 0!==(null==e?void 0:e.upperBound)?[null==e?void 0:e.upperBound]:[]}}]});function J({isOpen:e,handleClose:t,siblingRef:n,children:r}){const[i,s]=Object(a.useState)(!1),u=()=>{t(),s(!1)};return Object(a.useEffect)((()=>{e&&setTimeout((()=>{s(!0)}),255)}),[e]),e&&n.current?Object(l.jsx)(o.EuiPortal,{insert:{sibling:n.current,position:"after"}},Object(l.jsx)(o.EuiFocusTrap,{disabled:!i,clickOutsideDisables:!0},Object(l.jsx)(o.EuiOutsideClickDetector,{onOutsideClick:u,isDisabled:!e},Object(l.jsx)("div",{role:"dialog","aria-labelledby":"lnsPalettePanelContainerTitle","data-test-subj":"lns-indexPattern-PalettePanelContainer",className:"lnsPalettePanelContainer"},Object(l.jsx)(o.EuiFlyoutHeader,{hasBorder:!0,className:"lnsPalettePanelContainer__header"},Object(l.jsx)(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(l.jsx)(o.EuiFlexItem,{grow:!1},Object(l.jsx)(o.EuiButtonIcon,{color:"text","data-test-subj":"lns-indexPattern-PalettePanelContainerBack",className:"lnsPalettePanelContainer__backIcon",onClick:u,iconType:"sortLeft","aria-label":d.i18n.translate("xpack.lens.table.palettePanelContainer.back",{defaultMessage:"Back"})})),Object(l.jsx)(o.EuiFlexItem,null,Object(l.jsx)(o.EuiTitle,{size:"xs"},Object(l.jsx)("h2",{id:"lnsPalettePanelContainerTitle",className:"lnsPalettePanelContainer__headerTitle"},Object(l.jsx)("strong",null,d.i18n.translate("xpack.lens.table.palettePanelTitle",{defaultMessage:"Color"}))))))),r&&Object(l.jsx)("div",{className:"lnsPalettePanelContainer__content"},r),Object(l.jsx)(o.EuiFlyoutFooter,{className:"lnsPalettePanelContainer__footer"},Object(l.jsx)(o.EuiButtonEmpty,{flush:"left",size:"s",iconType:"sortLeft",onClick:u},d.i18n.translate("xpack.lens.table.palettePanelContainer.back",{defaultMessage:"Back"}))))))):null}n(199);var Q=n(102),Z=n(65);const ee={name:Z.g,reverse:!1,rangeType:Z.h,rangeMin:Z.f,rangeMax:Z.e,progression:Z.i,stops:[],steps:Z.c,colorStops:[],continuity:Z.d};var te=n(127),ne=n.n(te);const ae=(e,{skipFirstRender:t}={skipFirstRender:!1},n,r)=>{const o=Object(a.useRef)(!0),i=[...r||[],o];return ne()((()=>{if(!t||!o.current)return e();o.current=!1}),n,i)};var re=n(128);const oe=({value:e,onChange:t,defaultValue:n})=>Object(l.jsx)(o.EuiFormRow,{label:d.i18n.translate("xpack.lens.indexPattern.columnLabel",{defaultMessage:"Name",description:"Name of a column of data"}),display:"columnCompressed",fullWidth:!0},Object(l.jsx)(re.a,{fullWidth:!0,compressed:!0,"data-test-subj":"column-label-edit",value:e,onChange:t,defaultValue:n})),ie=[{id:"value_labels_hide",value:"hide",label:d.i18n.translate("xpack.lens.shared.valueLabelsVisibility.auto",{defaultMessage:"Hide"}),"data-test-subj":"lns_valueLabels_hide"},{id:"value_labels_inside",value:"show",label:d.i18n.translate("xpack.lens.shared.valueLabelsVisibility.inside",{defaultMessage:"Show"}),"data-test-subj":"lns_valueLabels_inside"}],se=({isVisible:e=!0,valueLabels:t="hide",onValueLabelChange:n})=>{var a;if(!e)return null;const r=d.i18n.translate("xpack.lens.shared.chartValueLabelVisibilityLabel",{defaultMessage:"Labels"}),i=(null===(a=ie.find((({value:e})=>e===t)))||void 0===a?void 0:a.id)||"value_labels_hide";return Object(l.jsx)(o.EuiFormRow,{display:"columnCompressed",label:Object(l.jsx)("span",null,r," ",Object(l.jsx)(o.EuiIconTip,{color:"subdued",content:d.i18n.translate("xpack.lens.shared.chartValueLabelVisibilityTooltip",{defaultMessage:"If there is not enough space, value labels might be hidden"}),iconProps:{className:"eui-alignTop"},position:"top",size:"s",type:"questionInCircle"}))},Object(l.jsx)(o.EuiButtonGroup,{isFullWidth:!0,legend:r,"data-test-subj":"lens-value-labels-visibility-btn",name:"valueLabelsDisplay",buttonSize:"compressed",options:ie,idSelected:i,onChange:e=>{const t=ie.find((({id:t})=>t===e));t&&n(t.value)}}))},le=({axis:e,axisTitle:t,updateTitleState:n,isAxisTitleVisible:i})=>{const s=Object(a.useMemo)((()=>({title:t,visibility:!t&&i?"auto":i?"custom":"none"})),[t,i]),u=Object(a.useCallback)((({title:t,visibility:a})=>n({title:t,visible:"none"!==a},e)),[e,n]),{inputValue:c,handleInputChange:p}=Object(h.a)({value:s,onChange:u},{allowFalsyValue:!0});return Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)(o.EuiFormRow,{display:"columnCompressed",label:d.i18n.translate("xpack.lens.label.shared.axisHeader",{defaultMessage:"Axis title"}),fullWidth:!0},Object(l.jsx)(xe,{header:d.i18n.translate("xpack.lens.shared.axisNameLabel",{defaultMessage:"Axis title"}),dataTestSubj:`lns${e}AxisTitle`,label:c.title||"",mode:c.visibility,placeholder:d.i18n.translate("xpack.lens.shared.overwriteAxisTitle",{defaultMessage:"Overwrite axis title"}),hasAutoOption:!0,handleChange:({mode:e,label:t})=>{p({title:t,visibility:e})}})),Object(l.jsx)(o.EuiSpacer,{size:"s"}))};n(205);const ue=({children:e,title:t})=>Object(l.jsx)("div",{className:"lnsDimensionEditorSection"},Object(l.jsx)("div",{className:"lnsDimensionEditorSection__border"}),t&&Object(l.jsx)(o.EuiTitle,{size:"xxs",className:"lnsDimensionEditorSection__heading"},Object(l.jsx)("h3",null,t)),e),ce=d.i18n.translate("xpack.lens.indexPattern.filterBy.label",{defaultMessage:"Filter by"}),de={query:"",language:"kuery"};function pe({inputFilter:e,onChange:t,indexPattern:n,helpMessage:i,label:s=ce,initiallyOpen:u,"data-test-subj":c}){const[p,f]=Object(a.useState)(Boolean(u)),{inputValue:b,handleInputChange:g}=Object(h.a)({value:null!=e?e:de,onChange:t}),m=Object(a.useCallback)((()=>{f(!1)}),[]),{isValid:v}=E(e,n),{isValid:y,error:x}=E(b,n);return Object(l.jsx)(o.EuiFormRow,{display:"rowCompressed",label:i?Object(l.jsx)(r.a.Fragment,null,s," ",Object(l.jsx)(o.EuiIconTip,{color:"subdued",content:i,iconProps:{className:"eui-alignTop"},position:"top",size:"s",type:"questionInCircle"})):s,fullWidth:!0,isInvalid:!v},Object(l.jsx)(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(l.jsx)(o.EuiFlexItem,null,Object(l.jsx)(o.EuiPopover,{isOpen:p,closePopover:m,anchorClassName:"eui-fullWidth",panelClassName:"lnsIndexPatternDimensionEditor__filtersEditor",initialFocus:c?`textarea[data-test-subj='${c}']`:void 0,button:Object(l.jsx)(o.EuiPanel,{paddingSize:"none",hasShadow:!1,hasBorder:!0},Object(l.jsx)(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},Object(l.jsx)(o.EuiFlexItem,{grow:!1}),Object(l.jsx)(o.EuiFlexItem,{grow:!0},Object(l.jsx)(o.EuiLink,{className:"lnsFiltersOperation__popoverButton","data-test-subj":"indexPattern-filters-existingFilterTrigger",onClick:()=>{f(!p)},color:v?"text":"danger",title:d.i18n.translate("xpack.lens.indexPattern.filterBy.clickToEdit",{defaultMessage:"Click to edit"})},(null==e?void 0:e.query)||d.i18n.translate("xpack.lens.indexPattern.filterBy.emptyFilterQuery",{defaultMessage:"(empty)"})))))},Object(l.jsx)(o.EuiFormRow,{label:s,isInvalid:!y,error:x,fullWidth:!0,"data-test-subj":"indexPattern-filter-by-input"},Object(l.jsx)(I,{indexPattern:n.id?{type:"id",value:n.id}:{type:"title",value:n.title},disableAutoFocus:!0,value:b,onChange:g,isInvalid:!y,onSubmit:()=>{},"data-test-subj":c}))))))}const fe=({label:e,icon:t})=>Object(l.jsx)(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1,className:"lnsLayerPanel__settingsStaticHeader"},t&&Object(l.jsx)(o.EuiFlexItem,{grow:!1},Object(l.jsx)(o.EuiIcon,{type:t})," "),Object(l.jsx)(o.EuiFlexItem,{grow:!0},Object(l.jsx)(o.EuiTitle,{size:"xxs"},Object(l.jsx)("h5",null,e)))),be=d.i18n.translate("xpack.lens.label.header",{defaultMessage:"Label"}),ge={id:"lns_title_none",value:"none",text:d.i18n.translate("xpack.lens.chart.labelVisibility.none",{defaultMessage:"None"})},me={id:"lns_title_custom",value:"custom",text:d.i18n.translate("xpack.lens.chart.labelVisibility.custom",{defaultMessage:"Custom"})},he={id:"lns_title_auto",value:"auto",text:d.i18n.translate("xpack.lens.chart.labelVisibility.auto",{defaultMessage:"Auto"})},ve=[ge,me],ye=[ge,he,me];function xe({label:e,mode:t,handleChange:n,hasAutoOption:a=!1,placeholder:r="",header:i=be,dataTestSubj:s}){return Object(l.jsx)(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(l.jsx)(o.EuiFlexItem,{grow:!1},Object(l.jsx)(o.EuiSelect,{fullWidth:!0,compressed:!0,"data-test-subj":`${s}-select`,"aria-label":"Label",onChange:({target:e})=>{e.value,n({label:"",mode:e.value})},options:a?ye:ve,value:t})),Object(l.jsx)(o.EuiFlexItem,null,Object(l.jsx)(o.EuiFieldText,{"data-test-subj":s,compressed:!0,placeholder:"none"===t?"":r,value:e||"",disabled:"none"===t,onChange:({target:e})=>n({mode:"custom",label:e.value}),"aria-label":i})))}},,function(e,t,n){"use strict";n.r(t),n.d(t,"getVisualizeGeoFieldMessage",(function(){return l})),n.d(t,"getResolvedDateRange",(function(){return u})),n.d(t,"containsDynamicMath",(function(){return c})),n.d(t,"getTimeZone",(function(){return d})),n.d(t,"getActiveDatasourceIdFromDoc",(function(){return p})),n.d(t,"getInitialDatasourceId",(function(){return f})),n.d(t,"getInitialDataViewsObject",(function(){return b})),n.d(t,"refreshIndexPatternsList",(function(){return g})),n.d(t,"getIndexPatternsIds",(function(){return m})),n.d(t,"getIndexPatternsObjects",(function(){return h})),n.d(t,"getRemoveOperation",(function(){return v})),n.d(t,"inferTimeField",(function(){return y})),n.d(t,"renewIDs",(function(){return x})),n.d(t,"DONT_CLOSE_DIMENSION_CONTAINER_ON_CLICK_CLASS",(function(){return j})),n.d(t,"isDraggedField",(function(){return _})),n.d(t,"isDraggedDataViewField",(function(){return w})),n.d(t,"isOperationFromCompatibleGroup",(function(){return O})),n.d(t,"isOperationFromTheSameGroup",(function(){return D})),n.d(t,"sortDataViewRefs",(function(){return k})),n.d(t,"getSearchWarningMessages",(function(){return P}));var a=n(21),r=n(0),o=n(39),i=n.n(o),s=n(70);function l(e){return r.i18n.translate("xpack.lens.visualizeGeoFieldMessage",{defaultMessage:"Lens cannot visualize {fieldType} fields",values:{fieldType:e}})}const u=function(e){const{from:t,to:n}=e.getTime(),{min:a,max:r}=e.calculateBounds({from:t,to:n});return{fromDate:(null==a?void 0:a.toISOString())||t,toDate:(null==r?void 0:r.toISOString())||n}};function c(e){return e.includes("now")}function d(e){const t=e.get("dateFormat:tz");return"Browser"===t?i.a.tz.guess():t}function p(e){if(!e)return null;const[t]=Object.keys(e.state.datasourceStates);return t||null}const f=(e,t)=>t&&p(t)||Object.keys(e)[0]||null;function b(e,t){return{indexPatterns:e,indexPatternRefs:t}}async function g({activeDatasources:e,indexPatternService:t,indexPatternId:n,indexPatternsCache:a}){const r=Object.values(e).map((e=>null==e?void 0:e.onRefreshIndexPattern)).filter(Boolean),o=(await t.loadIndexPatterns({cache:{},patterns:[n],onIndexPatternRefresh:()=>r.forEach((e=>e()))}))[n];t.updateDataViewsState({indexPatterns:{...a,[n]:o}})}function m({activeDatasources:e,datasourceStates:t,visualizationState:n,activeVisualization:r}){let o;const i=[];if(Object.entries(e).forEach((([e,n])=>{const{savedObjectReferences:a}=n.getPersistableState(t[e].state),r=n.getUsedDataView(t[e].state);o=r,i.push(...a)})),null!=r&&r.getPersistableState){const{savedObjectReferences:e}=r.getPersistableState(n);i.push(...e)}const s=i.filter((({type:e})=>"index-pattern"===e)).map((({id:e})=>e));return o&&s.unshift(o),Object(a.uniq)(s)}async function h(e,t){const n=await Promise.allSettled(e.map((e=>t.get(e)))),a=n.filter((e=>"fulfilled"===e.status)),r=n.map(((t,n)=>e[n])).filter(((e,t)=>"rejected"===n[t].status));return{indexPatterns:a.map((e=>e.value)),rejectedIds:r}}function v(e,t,n,a){return e.getRemoveOperation?e.getRemoveOperation(t,n):1===a?"clear":"remove"}function y(e,t){return("table"in t?[{table:t.table,column:t.column}]:t.negate?[]:t.data).map((({table:t,column:n})=>{var a;const r=t.columns[n];if(Boolean(r&&(null===(a=e.getDateHistogramMeta(r))||void 0===a?void 0:a.timeRange)))return r.meta.field})).find(Boolean)}function x(e,t,n){e=Object(a.cloneDeep)(e);const r=(e,o,i)=>{if("object"==typeof e)Array.isArray(e)?e.forEach(((e,t,n)=>r(e,n,t))):e&&Object.keys(e).forEach((a=>{let o=a;var i;t.includes(a)&&(o=null!==(i=n(a))&&void 0!==i?i:a,e[o]=e[a],delete e[a]),r(e[o],e,o)}));else if(o&&void 0!==i&&"string"==typeof e&&t.includes(e)){var s;Object(a.set)(o,i,null!==(s=n(e))&&void 0!==s?s:e)}};return r(e),e}const j="lensDontCloseDimensionContainerOnClick";function _(e){return"object"==typeof e&&null!==e&&["id","field"].every((t=>t in e))}function w(e){return"object"==typeof e&&null!==e&&["id","field","indexPatternId"].every((t=>t in e))}const O=(e,t)=>Object(s.e)(e)&&Object(s.e)(t)&&e.columnId!==t.columnId&&e.groupId===t.groupId&&e.layerId!==t.layerId,D=(e,t)=>Object(s.e)(e)&&Object(s.e)(t)&&e.columnId!==t.columnId&&e.groupId===t.groupId&&e.layerId===t.layerId,k=e=>e.sort(((e,t)=>e.title.localeCompare(t.title))),P=(e,t,n,a)=>{const r=new Map;return a.searchService.showWarnings(e,((e,a)=>{var o;const{request:i,response:s,requestId:l}=a,u=null===(o=t.getSearchWarningMessages)||void 0===o?void 0:o.call(t,n,e,i,s);if(null!=u&&u.length){var c,d;const t=null!==(c=(null!=l?l:"")+e.type+(null===(d=e.reason)||void 0===d?void 0:d.type))&&void 0!==c?c:"";return r.has(t)||r.set(t,u),!0}return!1})),[...r.values()].flat()}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a.APP_ID})),n.d(t,"h",(function(){return a.LENS_EMBEDDABLE_TYPE})),n.d(t,"d",(function(){return a.DOC_TYPE})),n.d(t,"g",(function(){return a.LENS_EDIT_BY_VALUE})),n.d(t,"e",(function(){return a.ENABLE_SQL})),n.d(t,"k",(function(){return a.PieChartTypes})),n.d(t,"b",(function(){return a.CategoryDisplay})),n.d(t,"j",(function(){return a.NumberDisplay})),n.d(t,"i",(function(){return a.LegendDisplay})),n.d(t,"c",(function(){return a.DOCUMENT_FIELD_NAME})),n.d(t,"l",(function(){return a.getEditPath})),n.d(t,"m",(function(){return a.getFullPath})),n.d(t,"f",(function(){return r}));var a=n(3);let r;!function(e){e[e.SMALL=.3]="SMALL",e[e.MEDIUM=.54]="MEDIUM",e[e.LARGE=.7]="LARGE"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"D",(function(){return y.p})),n.d(t,"B",(function(){return y.n})),n.d(t,"H",(function(){return y.t})),n.d(t,"E",(function(){return y.q})),n.d(t,"F",(function(){return y.r})),n.d(t,"r",(function(){return y.c})),n.d(t,"s",(function(){return y.d})),n.d(t,"w",(function(){return y.i})),n.d(t,"I",(function(){return y.u})),n.d(t,"p",(function(){return y.a})),n.d(t,"A",(function(){return y.m})),n.d(t,"G",(function(){return y.s})),n.d(t,"x",(function(){return y.j})),n.d(t,"y",(function(){return y.k})),n.d(t,"C",(function(){return y.o})),n.d(t,"u",(function(){return y.f})),n.d(t,"t",(function(){return y.e})),n.d(t,"q",(function(){return y.b})),n.d(t,"v",(function(){return y.h})),n.d(t,"z",(function(){return y.l})),n.d(t,"i",(function(){return x})),n.d(t,"k",(function(){return j})),n.d(t,"L",(function(){return _})),n.d(t,"f",(function(){return w})),n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return D})),n.d(t,"K",(function(){return k})),n.d(t,"l",(function(){return P})),n.d(t,"S",(function(){return L})),n.d(t,"Q",(function(){return S})),n.d(t,"T",(function(){return I})),n.d(t,"h",(function(){return C})),n.d(t,"P",(function(){return E})),n.d(t,"o",(function(){return M})),n.d(t,"N",(function(){return T})),n.d(t,"O",(function(){return F})),n.d(t,"R",(function(){return N})),n.d(t,"M",(function(){return z})),n.d(t,"g",(function(){return R})),n.d(t,"e",(function(){return B})),n.d(t,"m",(function(){return V})),n.d(t,"n",(function(){return W})),n.d(t,"c",(function(){return G})),n.d(t,"a",(function(){return q})),n.d(t,"J",(function(){return H})),n.d(t,"j",(function(){return $})),n.d(t,"U",(function(){return K})),n.d(t,"V",(function(){return Y}));var a=n(114),r=(n(384),n(96)),o=n(71),i=n(10),s=n(157),l=n(90),u=n(122);const c=e=>t=>n=>a=>{if(x.match(a))return Object(s.b)(t,e,a.payload,"true"===Object(l.b)(new i.Storage(localStorage),u.a));n(a)};var d=n(21),p=n(35),f=n.n(p),b=n(59),g=n(42),m=n(15);const h=e=>t=>{let n;return a=>r=>{var i;if(null!==(i=r.payload)&&void 0!==i&&i.searchSessionId||o.f.match(r)||!Object(y.c)(t.getState())&&!D.match(r)||!function(e,t){var n,a;const{activeDatasourceId:r,datasourceStates:o,dataViews:i}=e.lens;return Boolean(r&&o[r]&&(null===(n=(a=t[r]).isTimeBased)||void 0===n?void 0:n.call(a,o[r].state,i.indexPatterns)))}(t.getState(),e.datasourceMap)||function(e,t){const n=e.query.timefilter.timefilter,a=n.getTime();if(!Object(b.containsDynamicMath)(a.from)&&!Object(b.containsDynamicMath)(a.to))return;const{min:r,max:o}=n.getBounds();if(!r||!o)return;const i=f.a.duration(o.diff(r)).asMilliseconds();Date.now()-e.nowProvider.get().valueOf()>Math.max(.02*i,1e4)&&t(_({searchSessionId:e.search.session.start(),resolvedDateRange:Object(b.getResolvedDateRange)(n)}))}(e.lensServices.data,t.dispatch),j.match(r)&&n)return n();a(r),t.getState().lens.isLoading||n||(n=function(e,t,n){const{query:a,search:r}=e,{filterManager:o}=a,i=Object(d.debounce)(((e=r.session.start())=>{const i=o.getFilters(),s=Object(d.isEqual)(t().lens.filters,i)?null:{filters:i};n(_({searchSessionId:e,...s,resolvedDateRange:Object(b.getResolvedDateRange)(a.timefilter.timefilter)}))}),100),s=r.session.getSession$().pipe(Object(g.delay)(0)).subscribe((e=>{e&&t().lens.searchSessionId!==e&&i(e)})),l=o.getUpdates$().subscribe({next:()=>{i()}}),u=e.query.timefilter.timefilter.getTimeUpdate$().subscribe({next:()=>{i()}}),c=e.query.timefilter.timefilter.getAutoRefreshFetch$().pipe(Object(g.tap)((()=>{i()})),Object(g.switchMap)((e=>Object(m.waitUntilNextSessionCompletes$)(r.session).pipe(Object(g.finalize)(e))))).subscribe();return()=>{l.unsubscribe(),u.unsubscribe(),c.unsubscribe(),s.unsubscribe()}}(e.lensServices.data,t.getState,t.dispatch))}},v=e=>t=>n=>a=>{if(o.k.match(a)){const n=t.getState().lens.isFullscreenDatasource;e.lensServices.chrome.setIsVisible(Boolean(n))}n(a)};var y=n(113);const{loadInitial:x,navigateAway:j,setState:_,enableAutoApply:w,disableAutoApply:O,applyChanges:D,setSaveable:k,onActiveDataChange:P,updateState:L,updateDatasourceState:S,updateVisualizationState:I,insertLayer:C,switchVisualization:E,rollbackSuggestion:M,submitSuggestion:T,switchDatasource:A,switchAndCleanDatasource:F,updateIndexPatterns:N,setToggleFullscreen:z,initEmpty:R,editVisualizationAction:B,removeLayers:V,removeOrClearLayer:W,cloneLayer:G,addLayer:q,setLayerDefaultDimension:H,removeDimension:U}=o.d,$=(e,t)=>{const n=[...Object(a.getDefaultMiddleware)({serializableCheck:!1}),c(e),e=>t=>n=>{P.match(n)&&Object(d.isEqual)(e.getState().lens.activeData,n.payload)||t(n)},h(e),v(e)];return Object(a.configureStore)({reducer:{lens:Object(o.e)(e)},middleware:n,preloadedState:t})},K=()=>Object(r.useDispatch)(),Y=r.useSelector},function(e,t,n){"use strict";function a(e){return"histogram"===e||"document"===e?"number":e}function r(e){return"sourceField"in e}function o(e){return e.timeSeriesMetricType?e.timeSeriesMetricType:e.type}function i(e,t,n){if(!e)return;if(!("references"in e))return;const a=n.columns[e.references[0]];return a&&r(a)?t.getFieldByName(a.sourceField):void 0}n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}))},function(e,t,n){"use strict";var a=n(104);n.d(t,"a",(function(){return a.a}))},function(e,t,n){"use strict";n.d(t,"k",(function(){return a.n})),n.d(t,"m",(function(){return a.q})),n.d(t,"j",(function(){return a.m})),n.d(t,"l",(function(){return a.o})),n.d(t,"g",(function(){return a.f})),n.d(t,"i",(function(){return a.h})),n.d(t,"a",(function(){return a.a})),n.d(t,"d",(function(){return a.c})),n.d(t,"h",(function(){return a.g})),n.d(t,"f",(function(){return a.e})),n.d(t,"e",(function(){return a.d})),n.d(t,"c",(function(){return a.b})),n.d(t,"b",(function(){return l}));var a=n(69),r=n(8),o=n.n(r),i=n(123),s=o.a.lazy((function(){return n.e(5).then(n.bind(null,494))})),l=Object(i.c)(s)},,,function(e,t,n){e.exports=n(14)(2743)},function(e,t,n){"use strict";n.d(t,"i",(function(){return m})),n.d(t,"n",(function(){return h})),n.d(t,"q",(function(){return v})),n.d(t,"p",(function(){return y})),n.d(t,"l",(function(){return x})),n.d(t,"k",(function(){return j})),n.d(t,"j",(function(){return _})),n.d(t,"m",(function(){return w})),n.d(t,"o",(function(){return O})),n.d(t,"f",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"g",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return b}));var a=n(73),r=n.n(a),o=n(58),i=n.n(o),s="positive",l="fixed",u="custom",c="above",d="percent",p=0,f=100,b=5,g=["stops"];function m(e,t,n,a,r){return 0===a?r+t:y(t+(e-n)*r/a)}function h(e,t,n){var a=n.prevPalette,r=n.dataBounds,o=n.mapFromMinValue,l=n.defaultPaletteName,u=function(e,t){var n,a,r,o,i,s,l=x(null==e?void 0:e.rangeType,t),u=l.min,c=l.max,d=null!==(n=null==e||null===(a=e.colorStops)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.stop)&&void 0!==n?n:Number.POSITIVE_INFINITY,p=null!==(o=null==e||null===(i=e.colorStops)||void 0===i||null===(s=i[e.colorStops.length-1])||void 0===s?void 0:s.stop)&&void 0!==o?o:Number.NEGATIVE_INFINITY;return{min:Math.min(u,d),max:Math.max(c,p)}}(t,r),c=u.min,d=u.max,p=d-c,f=t||{},h=(f.stops,i()(f,g));if("custom"===t.name&&null!=t&&t.colorStops)return v(t.colorStops,d);var y,j,_,w,O,D,k=(null==t?void 0:t.steps)||b,P=e.get(a||(null==t?void 0:t.name)||l||s).getCategoricalColors(k,h),L=o||0===p?c:p/k;return y=P.map((function(e,t){return{color:e,stop:t}})),j={newInterval:p,oldInterval:P.length,newMin:L,oldMin:0},_=j.newInterval,w=j.oldInterval,O=j.newMin,D=j.oldMin,(y||[]).map((function(e){return{color:e.color,stop:m(e.stop,O,D,w,_)}}))}function v(e,t){var n=e.map((function(e,n,a){return r()(r()({},e),{},{stop:n+1<a.length?a[n+1].stop:t})}));if(e[e.length-1].stop===t){var a=function(e,t,n){var a=t.length,r=a>1&&t[a-1].stop-t[a-2].stop||1,o=Number(r.toFixed(2));if(n<e[a-1].stop+o){var i=n-e[a-1].stop;o=i>0?i:1}return o}(e,n,t)||1,o=Math.min(1,a);n[e.length-1].stop=t+o}return n}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number((Math.floor(100*e)/100).toFixed(t))}function x(e,t){return{min:"number"===e?t.min:p,max:"number"===e?t.max:f}}var j=function(e){return Boolean(e&&["below","all"].includes(e))},_=function(e){return Boolean(e&&["above","all"].includes(e))},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"percent";return"percent"===e?{min:0,max:100,fallback:!0}:{min:1,max:1,fallback:!0}};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return e.stop}));return e.map((function(n,a){return{color:n.color,stop:t[e.length-a-1]}})).reverse()}},function(e,t,n){"use strict";function a(e){return"object"==typeof e&&null!==e&&"columnId"in e}function r(e){return"filter"===e.name}function o(e){return"brush"===e.name}function i(e){return"edit"===e.name}function s(e){return"tableRowContextMenuClick"===e.name}n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"b",(function(){return h})),n.d(t,"i",(function(){return y})),n.d(t,"k",(function(){return k})),n.d(t,"h",(function(){return B})),n.d(t,"a",(function(){return V})),n.d(t,"g",(function(){return W})),n.d(t,"d",(function(){return G})),n.d(t,"e",(function(){return q}));var a=n(114),r=n(21),o=n(59),i=n(64),s=n(112),l=n(91),u=n(113),c=n(88);const d={persistedDoc:void 0,searchSessionId:"",filters:[],query:{language:"kuery",query:""},resolvedDateRange:{fromDate:"",toDate:""},isFullscreenDatasource:!1,isSaveable:!1,isLoading:!1,isLinkedToOriginatingApp:!1,activeDatasourceId:null,datasourceStates:{},visualization:{state:null,activeId:null},dataViews:{indexPatternRefs:[],indexPatterns:{}}},p=({lensServices:{data:e},initialContext:t,embeddableEditorIncomingState:n,datasourceMap:a,visualizationMap:r})=>{const i=Object(o.getInitialDatasourceId)(a),s={};return i&&Object.keys(a).forEach((e=>{s[e]={state:null,isLoading:!0}})),{...d,isLoading:!0,query:t?e.query.queryString.getQuery():e.query.queryString.getDefaultQuery(),filters:t?e.query.filterManager.getFilters():e.query.filterManager.getGlobalFilters(),searchSessionId:e.search.session.getSessionId(),resolvedDateRange:Object(o.getResolvedDateRange)(e.query.timefilter.timefilter),isLinkedToOriginatingApp:Boolean(null==n?void 0:n.originatingApp),activeDatasourceId:i,datasourceStates:s,visualization:{state:null,activeId:Object.keys(r)[0]||null}}},f=Object(a.createAction)("lens/setState"),b=Object(a.createAction)("lens/onActiveDataChange"),g=Object(a.createAction)("lens/setSaveable"),m=Object(a.createAction)("lens/enableAutoApply"),h=Object(a.createAction)("lens/disableAutoApply"),v=Object(a.createAction)("lens/applyChanges"),y=Object(a.createAction)("lens/setChangesApplied"),x=Object(a.createAction)("lens/updateState"),j=Object(a.createAction)("lens/updateDatasourceState"),_=Object(a.createAction)("lens/updateVisualizationState"),w=Object(a.createAction)("lens/insertLayer"),O=Object(a.createAction)("lens/switchVisualization"),D=Object(a.createAction)("lens/rollbackSuggestion"),k=Object(a.createAction)("lens/setToggleFullscreen"),P=Object(a.createAction)("lens/submitSuggestion"),L=Object(a.createAction)("lens/switchDatasource"),S=Object(a.createAction)("lens/switchAndCleanDatasource"),I=Object(a.createAction)("lens/navigateAway"),C=Object(a.createAction)("lens/loadInitial"),E=Object(a.createAction)("initEmpty",(function({newState:e,initialContext:t}){return{payload:{layerId:Object(i.a)(),newState:e,initialContext:t}}})),M=Object(a.createAction)("lens/editVisualizationAction"),T=Object(a.createAction)("lens/removeLayers"),A=Object(a.createAction)("lens/removeOrClearLayer"),F=Object(a.createAction)("cloneLayer",(function({layerId:e}){return{payload:{newLayerId:Object(i.a)(),layerId:e}}})),N=Object(a.createAction)("lens/addLayer"),z=Object(a.createAction)("lens/setLayerDefaultDimension"),R=Object(a.createAction)("lens/updateIndexPatterns"),B=Object(a.createAction)("lens/replaceIndexPattern"),V=Object(a.createAction)("lens/changeIndexPattern"),W=Object(a.createAction)("lens/removeDimension"),G={setState:f,onActiveDataChange:b,setSaveable:g,enableAutoApply:m,disableAutoApply:h,applyChanges:v,setChangesApplied:y,updateState:x,updateDatasourceState:j,updateVisualizationState:_,insertLayer:w,switchVisualization:O,rollbackSuggestion:D,setToggleFullscreen:k,submitSuggestion:P,switchDatasource:L,switchAndCleanDatasource:S,navigateAway:I,loadInitial:C,initEmpty:E,editVisualizationAction:M,removeLayers:T,removeOrClearLayer:A,addLayer:N,cloneLayer:F,setLayerDefaultDimension:z,updateIndexPatterns:R,replaceIndexpattern:B,changeIndexPattern:V,removeDimension:W,syncLinkedDimensions:U},q=e=>{const{datasourceMap:t,visualizationMap:n}=e;return Object(a.createReducer)(d,{[f.type]:(e,{payload:t})=>({...e,...t}),[b.type]:(e,{payload:{activeData:t,requestWarnings:n}})=>({...e,...t?{activeData:t}:{},...n?{requestWarnings:n}:{}}),[g.type]:(e,{payload:t})=>({...e,isSaveable:t}),[m.type]:e=>{e.autoApplyDisabled=!1},[h.type]:e=>{e.autoApplyDisabled=!0,e.changesApplied=!0},[v.type]:e=>{void 0===e.applyChangesCounter&&(e.applyChangesCounter=0),e.applyChangesCounter++},[y.type]:(e,{payload:t})=>{e.changesApplied=t},[x.type]:(e,{payload:{updater:r}})=>{let o=r(Object(a.current)(e));if(o.activeDatasourceId){const{datasourceState:e,visualizationState:a}=U(o,n,t);o={...o,visualization:{...o.visualization,state:a},datasourceStates:{...o.datasourceStates,[o.activeDatasourceId]:{...o.datasourceStates[o.activeDatasourceId],state:e}}}}return{...o,stagedPreview:void 0}},[F.type]:(e,{payload:{layerId:a,newLayerId:o}})=>{const s=new Map,l=e=>{const t=s.get(e);if(!t){const t=Object(i.a)();return s.set(e,t),t}return t};if(!e.activeDatasourceId||!e.visualization.activeId)return e;e.datasourceStates=Object(r.mapValues)(e.datasourceStates,((e,n)=>n?{...e,state:t[n].cloneLayer(e.state,a,o,l)}:e)),e.visualization.state=n[e.visualization.activeId].cloneLayer(e.visualization.state,a,o,s)},[A.type]:(e,{payload:{visualizationId:a,layerId:i,layerIds:s}})=>{const l=n[a],u=t[e.activeDatasourceId],c="clear"===Object(o.getRemoveOperation)(l,e.visualization.state,i,s.length);let d=[];e.datasourceStates=Object(r.mapValues)(e.datasourceStates,((n,a)=>{const r=t[a],{newState:o,removedLayerIds:s}=c?r.clearLayer(n.state,i):r.removeLayer(n.state,i);return d=[...d,...s],{...n,...a===e.activeDatasourceId&&{state:o}}})),e.stagedPreview=void 0;const p=u.getUsedDataView(e.datasourceStates[e.activeDatasourceId].state);!c&&l.removeLayer||(e.visualization.state=l.clearLayer(e.visualization.state,i,p)),Object(r.uniq)(d).forEach((t=>{var n;return e.visualization.state=null===(n=l.removeLayer)||void 0===n?void 0:n.call(l,e.visualization.state,t)}))},[V.type]:(e,{payload:r})=>{const{visualizationIds:o,datasourceIds:i,layerId:s,indexPatternId:l,dataViews:c}=r,d=[...e.dataViews.indexPatternRefs],p=new Set(d.map((e=>e.id)));Object.values(c.indexPatterns||{}).forEach((e=>{p.has(e.id)||d.push({id:e.id,name:e.name,title:e.title})}));const f={dataViews:{...e.dataViews,indexPatterns:c.indexPatterns,indexPatternRefs:d}};if(null!=o&&o.length)for(const t of o){const a=t&&e.visualization.activeId===t&&n[t];a&&s&&null!=a&&a.onIndexPatternChange&&(f.visualization={...e.visualization,state:a.onIndexPatternChange(e.visualization.state,l,s)})}if(null!=i&&i.length){f.datasourceStates={...e.datasourceStates};const r=Object(u.l)({lens:{...Object(a.current)(e),dataViews:f.dataViews}},t),o=r.datasourceLayers;for(const a of i){const i=a&&t[a];if(i&&null!=i&&i.onIndexPatternChange&&(f.datasourceStates={...f.datasourceStates,[a]:{isLoading:!1,state:i.onIndexPatternChange(f.datasourceStates[a].state,c.indexPatterns,l,s)}},s&&e.visualization.activeId)){const t=i.getPublicAPI({state:f.datasourceStates[a].state,layerId:s,indexPatterns:c.indexPatterns}),l=new Set(t.getTableSpec().map((({columnId:e})=>e))),u=o[s];if(u){const t=u.getTableSpec().map((({columnId:e})=>e)).filter((e=>!l.has(e))),a=n[e.visualization.activeId];let o=(f.visualization||e.visualization).state;t.forEach((e=>{o=a.removeDimension({layerId:s,columnId:e,prevState:o,frame:r})})),f.visualization={...e.visualization,state:o}}}}}return{...e,...f}},[R.type]:(e,{payload:t})=>({...e,dataViews:{...e.dataViews,...t}}),[B.type]:(e,{payload:a})=>{var r,o;e.dataViews.indexPatterns[a.newIndexPattern.id]=a.newIndexPattern,delete e.dataViews.indexPatterns[a.oldId],e.dataViews.indexPatternRefs=e.dataViews.indexPatternRefs.filter((e=>e.id!==a.oldId)),e.dataViews.indexPatternRefs.push({id:a.newIndexPattern.id,title:a.newIndexPattern.title,name:a.newIndexPattern.name});const i=n[e.visualization.activeId];e.visualization.state=null!==(r=null===(o=i.onIndexPatternRename)||void 0===o?void 0:o.call(i,e.visualization.state,a.oldId,a.newIndexPattern.id))&&void 0!==r?r:e.visualization.state,Object.entries(e.datasourceStates).forEach((([n,r])=>{var o,i;const s=t[n];e.datasourceStates[n].state=null!==(o=null==s||null===(i=s.onIndexPatternRename)||void 0===i?void 0:i.call(s,r.state,a.oldId,a.newIndexPattern.id))&&void 0!==o?o:r.state}))},[j.type]:(e,{payload:r})=>{const o=Object(a.current)(e),i={...o,datasourceStates:{...o.datasourceStates,[r.datasourceId]:{state:"function"==typeof r.updater?r.updater(o.datasourceStates[r.datasourceId].state):r.updater,isLoading:!1}},stagedPreview:r.clearStagedPreview?void 0:o.stagedPreview};if(r.dontSyncLinkedDimensions)return i;const{datasourceState:s,visualizationState:l}=U(i,n,t,r.datasourceId);return{...i,visualization:{...i.visualization,state:l},datasourceStates:{...i.datasourceStates,[r.datasourceId]:{state:s,isLoading:!1}}}},[_.type]:(e,{payload:r})=>{if(!e.visualization.activeId)throw new Error("Invariant: visualization state got updated without active visualization");if(e.visualization.activeId!==r.visualizationId)return e;if(e.visualization.state=r.newState,!e.activeDatasourceId)return;const{datasourceState:o,visualizationState:i}=U(Object(a.current)(e),n,t);e.datasourceStates[e.activeDatasourceId].state=o,e.visualization.state=i},[O.type]:(e,{payload:t})=>{const{newVisualizationId:n,visualizationState:a,datasourceState:r,datasourceId:o}=t.suggestion;return{...e,datasourceStates:o?{...e.datasourceStates,[o]:{...e.datasourceStates[o],state:r}}:e.datasourceStates,visualization:{...e.visualization,activeId:n,state:a},stagedPreview:t.clearStagedPreview?void 0:e.stagedPreview||{datasourceStates:e.datasourceStates,visualization:e.visualization,activeData:e.activeData}}},[D.type]:e=>({...e,...e.stagedPreview||{},stagedPreview:void 0}),[k.type]:e=>({...e,isFullscreenDatasource:!e.isFullscreenDatasource}),[P.type]:e=>({...e,stagedPreview:void 0}),[L.type]:(e,{payload:t})=>({...e,datasourceStates:{...e.datasourceStates,[t.newDatasourceId]:e.datasourceStates[t.newDatasourceId]||{state:null,isLoading:!0}},activeDatasourceId:t.newDatasourceId}),[S.type]:(e,{payload:r})=>{var o,i;const s=r.visualizationId&&n[r.visualizationId],l=e.visualization;let u=l.state;const c=[];if(s&&s.getLayerIds){const e=s.getLayerIds(l.state);c.push(...Object.values(e)),u=s.initialize((()=>c[0]))}const d=c[0],p=Object(a.current)(e).datasourceStates[r.newDatasourceId]?null===(o=Object(a.current)(e).datasourceStates[r.newDatasourceId])||void 0===o?void 0:o.state:t[r.newDatasourceId].createEmptyLayer(null!==(i=r.currentIndexPatternId)&&void 0!==i?i:""),f=t[r.newDatasourceId].insertLayer(p,d);return{...e,datasourceStates:{[r.newDatasourceId]:{state:f,isLoading:!1}},activeDatasourceId:r.newDatasourceId,visualization:{...l,state:u}}},[I.type]:e=>e,[C.type]:(e,t)=>e,[E.type]:(e,{payload:a})=>{const r={...e,...a.newState},i=Object(l.c)({datasourceMap:t,datasourceStates:r.datasourceStates,visualizationMap:n,visualizeTriggerFieldContext:a.initialContext,dataViews:r.dataViews});if(i)return{...r,datasourceStates:{...r.datasourceStates,[i.datasourceId]:{...r.datasourceStates[i.datasourceId],state:i.datasourceState}},visualization:{...r.visualization,activeId:i.visualizationId,state:i.visualizationState},stagedPreview:void 0};const s=r.visualization;if(!s.activeId)throw new Error("Invariant: visualization state got updated without active visualization");const u=n[s.activeId];if(null===s.state&&u){var c;const e=Object(o.getInitialDatasourceId)(t),n=u.initialize((()=>a.layerId)),i=t[e];return{...r,activeDatasourceId:e,datasourceStates:{...r.datasourceStates,[e]:{...r.datasourceStates[e],state:i.insertLayer(null===(c=r.datasourceStates[e])||void 0===c?void 0:c.state,a.layerId)}},visualization:{...s,state:n}}}return r},[M.type]:(e,{payload:t})=>{if(!e.visualization.activeId)throw new Error("Invariant: visualization state got updated without active visualization");if(e.visualization.activeId!==t.visualizationId)return e;const a=n[t.visualizationId];null!=a&&a.onEditAction&&(e.visualization.state=a.onEditAction(e.visualization.state,t.event))},[w.type]:(e,{payload:n})=>{const r=t[n.datasourceId].insertLayer;return{...e,datasourceStates:{...e.datasourceStates,[n.datasourceId]:{...e.datasourceStates[n.datasourceId],state:r(Object(a.current)(e).datasourceStates[n.datasourceId].state,n.layerId)}}}},[T.type]:(e,{payload:{visualizationId:r,layerIds:o}})=>{if(!e.visualization.activeId)throw new Error("Invariant: visualization state got updated without active visualization");const i=r&&n[r];if(e.visualization.activeId===r&&i&&i.removeLayer&&e.visualization.state){const t=o.reduce(((e,t)=>i.removeLayer?i.removeLayer(e,t):e),e.visualization.state);e.visualization.state="function"==typeof t?t(Object(a.current)(e.visualization.state)):t}o.forEach((n=>{var r;const[o]=null!==(r=Object.entries(t).find((([t,a])=>e.datasourceStates[t]&&a.getLayers(e.datasourceStates[t].state).includes(n))))&&void 0!==r?r:[];if(o){const{newState:r}=t[o].removeLayer(Object(a.current)(e).datasourceStates[o].state,n);e.datasourceStates[o].state=r}}))},[N.type]:(e,{payload:{layerId:r,layerType:o}})=>{var i,s;if(!e.activeDatasourceId||!e.visualization.activeId)return e;const l=n[e.visualization.activeId],c=t[e.activeDatasourceId],d=c.getUsedDataView(e.datasourceStates[e.activeDatasourceId].state),p=l.appendLayer(e.visualization.state,r,o,d),f=Object(u.l)({lens:Object(a.current)(e)},t),{noDatasource:b}=l.getSupportedLayers(p,f).find((({type:e})=>e===o))||{},g=null!==(i=null===(s=l.getLayersToLinkTo)||void 0===s?void 0:s.call(l,p,r))&&void 0!==i?i:[],m=!b&&c?c.insertLayer(e.datasourceStates[e.activeDatasourceId].state,r,g):e.datasourceStates[e.activeDatasourceId].state,{activeDatasourceState:h,activeVisualizationState:v}=H({datasourceState:m,visualizationState:p,framePublicAPI:f,activeVisualization:l,activeDatasource:c,layerId:r,layerType:o});e.visualization.state=v,e.datasourceStates[e.activeDatasourceId].state=h,e.stagedPreview=void 0;const{datasourceState:y,visualizationState:x}=U(Object(a.current)(e),n,t);e.datasourceStates[e.activeDatasourceId].state=y,e.visualization.state=x},[z.type]:(e,{payload:{layerId:r,columnId:o,groupId:i}})=>{if(!e.activeDatasourceId||!e.visualization.activeId)return e;const l=t[e.activeDatasourceId],c=n[e.visualization.activeId],d=Object(s.b)(c,e.visualization.state,r),{activeDatasourceState:p,activeVisualizationState:f}=H({datasourceState:e.datasourceStates[e.activeDatasourceId].state,visualizationState:e.visualization.state,framePublicAPI:Object(u.l)({lens:Object(a.current)(e)},t),activeVisualization:c,activeDatasource:l,layerId:r,layerType:d,columnId:o,groupId:i});e.visualization.state=f,e.datasourceStates[e.activeDatasourceId].state=p},[W.type]:(e,{payload:{layerId:r,columnId:o,datasourceId:i}})=>{var s,l;if(!e.visualization.activeId)return e;const c=n[e.visualization.activeId],d=null===(s=c.getLinkedDimensions)||void 0===s?void 0:s.call(c,e.visualization.state),p=null==d||null===(l=d.filter((({from:{columnId:e}})=>o===e)))||void 0===l?void 0:l.map((({to:e})=>e)),f=i?t[i]:void 0,b=Object(u.l)({lens:Object(a.current)(e)},t),g=t=>{if(f&&i){let n;try{n=Object(a.current)(e.datasourceStates[i].state)}catch{n=e.datasourceStates[i].state}e.datasourceStates[i].state=null==f?void 0:f.removeColumn({layerId:t.layerId,columnId:t.columnId,prevState:n,indexPatterns:b.dataViews.indexPatterns})}let n;try{n=Object(a.current)(e.visualization.state)}catch{n=e.visualization.state}e.visualization.state=c.removeDimension({layerId:t.layerId,columnId:t.columnId,prevState:n,frame:b})};g({layerId:r,columnId:o}),null==p||p.forEach((e=>e.columnId&&g({columnId:e.columnId,layerId:e.layerId})))}})};function H({visualizationState:e,datasourceState:t,activeVisualization:n,activeDatasource:a,framePublicAPI:r,layerType:o,layerId:i,columnId:s,groupId:l}){const{initialDimensions:u,noDatasource:c}=n.getSupportedLayers(e,r).find((({type:e})=>e===o))||{};if(u){const o=l?u.find((({groupId:e})=>e===l)):u[0];if(o){const l=n.setDimension({groupId:o.groupId,layerId:i,columnId:s||o.columnId,prevState:e,frame:r});return!c&&null!=a&&a.initializeDimension?{activeDatasourceState:a.initializeDimension(t,i,r.dataViews.indexPatterns,{...o,columnId:s||o.columnId,visualizationGroups:n.getConfiguration({layerId:i,frame:r,state:l}).groups}),activeVisualizationState:l}:{activeDatasourceState:t,activeVisualizationState:l}}}return{activeDatasourceState:t,activeVisualizationState:e}}function U(e,t,n,a){var r;const o=null!=a?a:e.activeDatasourceId;if(!o)return{datasourceState:null,visualizationState:e.visualization.state};const s=Object(u.g)({lens:e}).indexPatterns;let l=e.datasourceStates[o].state,d=e.visualization.state;const p=t[e.visualization.activeId],f=null===(r=p.getLinkedDimensions)||void 0===r?void 0:r.call(p,d),b=Object(u.l)({lens:e},n),g=e=>p.getConfiguration({state:d,layerId:e,frame:b}).groups;if(f){const e=f.map((e=>{var t;return{...e,to:{...e.to,columnId:null!==(t=e.to.columnId)&&void 0!==t?t:Object(i.a)()}}}));l=n[o].syncColumns({state:l,links:e,getDimensionGroups:g,indexPatterns:s}),e.forEach((({from:e,to:t})=>{var n;const a={...e,id:e.columnId,humanData:{label:""}},r={...t,filterOperations:()=>!0};d=null===(n=p.onDrop||c.d)||void 0===n?void 0:n({prevState:d,frame:b,target:r,source:a,dropType:"duplicate_compatible",group:g(t.layerId).find((({groupId:e})=>e===r.groupId))},p)}))}return{datasourceState:l,visualizationState:d}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return E}));var a=n(8),r=n.n(a),o=n(7),i=n(0),s=n(2);const l=r.a.createContext({dragging:void 0,setDragging:()=>{},keyboardMode:!1,setKeyboardMode:()=>{},activeDropTarget:void 0,setActiveDropTarget:()=>{},setA11yMessage:()=>{},dropTargetsByOrder:void 0,registerDropTarget:()=>{}});function u({children:e}){const[t,n]=Object(a.useState)({dragging:void 0}),[l,u]=Object(a.useState)(!1),[c,p]=Object(a.useState)(""),[f,b]=Object(a.useState)(void 0),[g,m]=Object(a.useState)({}),h=Object(a.useMemo)((()=>e=>n({dragging:e})),[n]),v=Object(a.useMemo)((()=>e=>p(e)),[p]),y=Object(a.useMemo)((()=>e=>b(e)),[b]),x=Object(a.useMemo)((()=>(e,t)=>m((n=>({...n,[e.join(",")]:t})))),[m]);return Object(s.jsx)(r.a.Fragment,null,Object(s.jsx)(d,{keyboardMode:l,setKeyboardMode:u,dragging:t.dragging,setA11yMessage:v,setDragging:h,activeDropTarget:f,setActiveDropTarget:y,registerDropTarget:x,dropTargetsByOrder:g},e),Object(s.jsx)(o.EuiScreenReaderOnly,null,Object(s.jsx)("div",null,Object(s.jsx)("p",{"aria-live":"assertive","aria-atomic":!0},c),Object(s.jsx)("p",{id:"lnsDragDrop-keyboardInstructionsWithReorder"},i.i18n.translate("xpack.lens.dragDrop.keyboardInstructionsReorder",{defaultMessage:"Press space or enter to start dragging. When dragging, use the up/down arrow keys to reorder items in the group and left/right arrow keys to choose drop targets outside of the group. Press space or enter again to finish."})),Object(s.jsx)("p",{id:"lnsDragDrop-keyboardInstructions"},i.i18n.translate("xpack.lens.dragDrop.keyboardInstructions",{defaultMessage:"Press space or enter to start dragging. When dragging, use the left/right arrow keys to move between drop targets. Press space or enter again to finish."})))))}function c(e,t,n,a=(()=>!0),r=!1){if(!e)return;const o=[...Object.entries(e).filter((([,e])=>e&&a(e))).reduce(((e,t)=>{const[,n]=t;return n?e.find((([,e])=>(null==e?void 0:e.id)===n.id))?e:[...e,t]:e}),[]),n].sort((([e],[t])=>{const n=e.split(",").map((e=>Number(e))),a=t.split(",").map((e=>Number(e))),r=n.findIndex(((e,t)=>n[t]!==a[t]));return n[r]-a[r]}));let i=o.findIndex((([e,n])=>(null==n?void 0:n.id)===(null==t?void 0:t.id)));-1===i&&(i=o.findIndex((([e])=>e===n[0])));const s=(o.length+i-1)%o.length,l=(i+1)%o.length;return o[r?s:l][1]}function d({dragging:e,setDragging:t,setKeyboardMode:n,keyboardMode:r,activeDropTarget:o,setActiveDropTarget:i,setA11yMessage:u,registerDropTarget:c,dropTargetsByOrder:d,children:p}){const f=Object(a.useMemo)((()=>({setKeyboardMode:n,keyboardMode:r,dragging:e,setDragging:t,activeDropTarget:o,setActiveDropTarget:i,setA11yMessage:u,dropTargetsByOrder:d,registerDropTarget:c})),[t,e,o,i,n,r,u,d,c]);return Object(s.jsx)(l.Provider,{value:f},p)}var p=n(23),f=n.n(p);const b=r.a.createContext({reorderState:{reorderedItems:[],direction:"-",draggingHeight:40,isReorderOn:!1,groupId:""},setReorderState:()=>()=>{}});function g({id:e,children:t,className:n}){const[o,i]=Object(a.useState)({reorderedItems:[],direction:"-",draggingHeight:40,isReorderOn:!1,groupId:e}),l=Object(a.useMemo)((()=>e=>i(e)),[i]);return Object(s.jsx)("div",{"data-test-subj":"lnsDragDrop-reorderableGroup",className:f()(n,{"lnsDragDrop-isActiveGroup":o.isReorderOn&&r.a.Children.count(t)>1})},Object(s.jsx)(b.Provider,{value:{reorderState:o,setReorderState:l}},t))}const m={selectedTarget:({label:e,groupLabel:t,position:n,layerNumber:a},{label:r,groupLabel:o,position:s,canSwap:l,canDuplicate:u,canCombine:c,layerNumber:d},p)=>p&&(l||u)?i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.replaceMain",{defaultMessage:"You're dragging {label} from {groupLabel} at position {position} in layer {layerNumber} over {dropLabel} from {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}. Press space or enter to replace {dropLabel} with {label}.{duplicateCopy}{swapCopy}{combineCopy}",values:{label:e,groupLabel:t,position:n,dropLabel:r,dropGroupLabel:o,dropPosition:s,duplicateCopy:u?x:"",swapCopy:l?j:"",combineCopy:c?_:"",layerNumber:a,dropLayerNumber:d}}):i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.replace",{defaultMessage:"Replace {dropLabel} in {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber} with {label}. Press space or enter to replace.",values:{label:e,dropLabel:r,dropGroupLabel:o,dropPosition:s,dropLayerNumber:d}}),dropped:({label:e},{label:t,groupLabel:n,position:a,layerNumber:r})=>i.i18n.translate("xpack.lens.dragDrop.announce.duplicated.replace",{defaultMessage:"Replaced {dropLabel} with {label} in {groupLabel} at position {position} in layer {dropLayerNumber}",values:{label:e,dropLabel:t,groupLabel:n,position:a,dropLayerNumber:r}})},h={selectedTarget:({label:e,groupLabel:t,layerNumber:n},{groupLabel:a,position:r})=>t!==a?i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.duplicated",{defaultMessage:"Duplicate {label} to {dropGroupLabel} group at position {position} in layer {layerNumber}. Hold Alt or Option and press space or enter to duplicate",values:{label:e,dropGroupLabel:a,position:r,layerNumber:n}}):i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.duplicatedInGroup",{defaultMessage:"Duplicate {label} to {dropGroupLabel} group at position {position} in layer {layerNumber}. Press space or enter to duplicate",values:{label:e,dropGroupLabel:a,position:r,layerNumber:n}}),dropped:({label:e},{groupLabel:t,position:n,layerNumber:a})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.duplicated",{defaultMessage:"Duplicated {label} in {groupLabel} group at position {position} in layer {layerNumber}",values:{label:e,groupLabel:t,position:n,layerNumber:a}})},v={selectedTarget:({label:e,groupLabel:t,position:n},{position:a})=>n===a?i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.reorderedBack",{defaultMessage:"{label} returned to its initial position {prevPosition}",values:{label:e,prevPosition:n}}):i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.reordered",{defaultMessage:"Reorder {label} in {groupLabel} group from position {prevPosition} to position {position}. Press space or enter to reorder",values:{label:e,groupLabel:t,position:a,prevPosition:n}}),dropped:({label:e,groupLabel:t,position:n},{position:a})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.reordered",{defaultMessage:"Reordered {label} in {groupLabel} group from position {prevPosition} to position {position}",values:{label:e,groupLabel:t,position:a,prevPosition:n}})},y={selectedTarget:({label:e,groupLabel:t,position:n,layerNumber:a},{label:r,groupLabel:o,position:s,canSwap:l,canDuplicate:u,canCombine:c,layerNumber:d},p)=>p&&(l||u||c)?i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.combineMain",{defaultMessage:"You're dragging {label} from {groupLabel} at position {position} in layer {layerNumber} over {dropLabel} from {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}. Press space or enter to combine {dropLabel} with {label}.{duplicateCopy}{swapCopy}{combineCopy}",values:{label:e,groupLabel:t,position:n,dropLabel:r,dropGroupLabel:o,dropPosition:s,duplicateCopy:u?x:"",swapCopy:l?j:"",combineCopy:c?_:"",layerNumber:a,dropLayerNumber:d}}):i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.combine",{defaultMessage:"Combine {dropLabel} in {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber} with {label}. Press space or enter to combine.",values:{label:e,dropLabel:r,dropGroupLabel:o,dropPosition:s,dropLayerNumber:d}}),dropped:({label:e},{label:t,groupLabel:n,position:a,layerNumber:r})=>i.i18n.translate("xpack.lens.dragDrop.announce.duplicated.combine",{defaultMessage:"Combine {dropLabel} with {label} in {groupLabel} at position {position} in layer {dropLayerNumber}",values:{label:e,dropLabel:t,groupLabel:n,position:a,dropLayerNumber:r}})},x=i.i18n.translate("xpack.lens.dragDrop.announce.duplicate.short",{defaultMessage:" Hold alt or option to duplicate."}),j=i.i18n.translate("xpack.lens.dragDrop.announce.swap.short",{defaultMessage:" Hold shift to swap."}),_=i.i18n.translate("xpack.lens.dragDrop.announce.combine.short",{defaultMessage:" Hold control to combine"}),w={selectedTarget:{reorder:v.selectedTarget,duplicate_compatible:h.selectedTarget,field_replace:m.selectedTarget,field_combine:y.selectedTarget,replace_compatible:m.selectedTarget,replace_incompatible:({label:e,groupLabel:t,position:n,layerNumber:a},{label:r,groupLabel:o,position:s,nextLabel:l,canSwap:u,canDuplicate:c,canCombine:d,layerNumber:p},f)=>f&&(u||c||d)?i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.replaceIncompatibleMain",{defaultMessage:"You're dragging {label} from {groupLabel} at position {position} in layer {layerNumber} over {dropLabel} from {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}. Press space or enter to convert {label} to {nextLabel} and replace {dropLabel}.{duplicateCopy}{swapCopy}{combineCopy}",values:{label:e,groupLabel:t,position:n,dropLabel:r,dropGroupLabel:o,dropPosition:s,nextLabel:l,duplicateCopy:c?x:"",swapCopy:u?j:"",combineCopy:d?_:"",layerNumber:a,dropLayerNumber:p}}):i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.replaceIncompatible",{defaultMessage:"Convert {label} to {nextLabel} and replace {dropLabel} in {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}. Press space or enter to replace",values:{label:e,dropLabel:r,dropGroupLabel:o,dropPosition:s,nextLabel:l,dropLayerNumber:p}}),move_incompatible:({label:e,groupLabel:t,position:n,layerNumber:a},{groupLabel:r,position:o,nextLabel:s,canSwap:l,canDuplicate:u,layerNumber:c},d)=>d&&(l||u)?i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.moveIncompatibleMain",{defaultMessage:"You're dragging {label} from {groupLabel} at position {position} in layer {layerNumber} over position {dropPosition} in {dropGroupLabel} group in layer {dropLayerNumber}. Press space or enter to convert {label} to {nextLabel} and move.{duplicateCopy}",values:{label:e,groupLabel:t,position:n,dropGroupLabel:r,dropPosition:o,nextLabel:s,duplicateCopy:u?x:"",layerNumber:a,dropLayerNumber:c}}):i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.moveIncompatible",{defaultMessage:"Convert {label} to {nextLabel} and move to {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}. Press space or enter to move",values:{label:e,dropGroupLabel:r,dropPosition:o,nextLabel:s,dropLayerNumber:c}}),move_compatible:({label:e,groupLabel:t,position:n},{groupLabel:a,position:r,canSwap:o,canDuplicate:s,layerNumber:l},u)=>u&&(o||s)?i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.moveCompatibleMain",{defaultMessage:"You're dragging {label} from {groupLabel} at position {position} over position {dropPosition} in {dropGroupLabel} group in layer {dropLayerNumber}. Press space or enter to move.{duplicateCopy}",values:{label:e,groupLabel:t,position:n,dropGroupLabel:a,dropPosition:r,duplicateCopy:s?x:"",dropLayerNumber:l}}):i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.moveCompatible",{defaultMessage:"Move {label} to {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}. Press space or enter to move",values:{label:e,dropGroupLabel:a,dropPosition:r,dropLayerNumber:l}}),duplicate_incompatible:({label:e},{groupLabel:t,position:n,nextLabel:a,layerNumber:r})=>i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.duplicateIncompatible",{defaultMessage:"Convert copy of {label} to {nextLabel} and add to {groupLabel} group at position {position} in layer {dropLayerNumber}. Hold Alt or Option and press space or enter to duplicate",values:{label:e,groupLabel:t,position:n,nextLabel:a,dropLayerNumber:r}}),replace_duplicate_incompatible:({label:e},{label:t,groupLabel:n,position:a,nextLabel:r,layerNumber:o})=>i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.replaceDuplicateIncompatible",{defaultMessage:"Convert copy of {label} to {nextLabel} and replace {dropLabel} in {groupLabel} group at position {position} in layer {dropLayerNumber}. Hold Alt or Option and press space or enter to duplicate and replace",values:{label:e,groupLabel:n,position:a,dropLabel:t,nextLabel:r,dropLayerNumber:o}}),replace_duplicate_compatible:({label:e},{label:t,groupLabel:n,position:a,layerNumber:r})=>i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.replaceDuplicateCompatible",{defaultMessage:"Duplicate {label} and replace {dropLabel} in {groupLabel} at position {position} in layer {dropLayerNumber}. Hold Alt or Option and press space or enter to duplicate and replace",values:{label:e,dropLabel:t,groupLabel:n,position:a,dropLayerNumber:r}}),swap_compatible:({label:e,groupLabel:t,position:n,layerNumber:a},{label:r,groupLabel:o,position:s,layerNumber:l})=>i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.swapCompatible",{defaultMessage:"Swap {label} in {groupLabel} group at position {position} in layer {layerNumber} with {dropLabel} in {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}. Hold Shift and press space or enter to swap",values:{label:e,groupLabel:t,position:n,dropLabel:r,dropGroupLabel:o,dropPosition:s,layerNumber:a,dropLayerNumber:l}}),swap_incompatible:({label:e,groupLabel:t,position:n,layerNumber:a},{label:r,groupLabel:o,position:s,nextLabel:l,layerNumber:u})=>i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.swapIncompatible",{defaultMessage:"Convert {label} to {nextLabel} in {groupLabel} group at position {position} in layer {layerNumber} and swap with {dropLabel} in {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}. Hold Shift and press space or enter to swap",values:{label:e,groupLabel:t,position:n,dropLabel:r,dropGroupLabel:o,dropPosition:s,nextLabel:l,layerNumber:a,dropLayerNumber:u}}),combine_compatible:({label:e,groupLabel:t,position:n,layerNumber:a},{label:r,groupLabel:o,position:s,layerNumber:l})=>i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.combineCompatible",{defaultMessage:"Combine {label} in {groupLabel} group at position {position} in layer {layerNumber} with {dropLabel} in {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}. Hold Control and press space or enter to combine",values:{label:e,groupLabel:t,position:n,dropLabel:r,dropGroupLabel:o,dropPosition:s,layerNumber:a,dropLayerNumber:l}}),combine_incompatible:({label:e,groupLabel:t,position:n,layerNumber:a},{label:r,groupLabel:o,position:s,nextLabel:l,layerNumber:u})=>i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.combineIncompatible",{defaultMessage:"Convert {label} to {nextLabel} in {groupLabel} group at position {position} in layer {layerNumber} and combine with {dropLabel} in {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}. Hold Control and press space or enter to combine",values:{label:e,groupLabel:t,position:n,dropLabel:r,dropGroupLabel:o,dropPosition:s,nextLabel:l,dropLayerNumber:u,layerNumber:a}})},dropped:{reorder:v.dropped,duplicate_compatible:h.dropped,field_replace:m.dropped,field_combine:y.dropped,replace_compatible:m.dropped,replace_incompatible:({label:e},{label:t,groupLabel:n,position:a,nextLabel:r,layerNumber:o})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.replaceIncompatible",{defaultMessage:"Converted {label} to {nextLabel} and replaced {dropLabel} in {groupLabel} group at position {position} in layer {dropLayerNumber}",values:{label:e,nextLabel:r,dropLabel:t,groupLabel:n,position:a,dropLayerNumber:o}}),move_incompatible:({label:e},{groupLabel:t,position:n,nextLabel:a,layerNumber:r})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.moveIncompatible",{defaultMessage:"Converted {label} to {nextLabel} and moved to {groupLabel} group at position {position} in layer {dropLayerNumber}",values:{label:e,nextLabel:a,groupLabel:t,position:n,dropLayerNumber:r}}),move_compatible:({label:e},{groupLabel:t,position:n,layerNumber:a})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.moveCompatible",{defaultMessage:"Moved {label} to {groupLabel} group at position {position} in layer {dropLayerNumber}",values:{label:e,groupLabel:t,position:n,dropLayerNumber:a}}),duplicate_incompatible:({label:e},{groupLabel:t,position:n,nextLabel:a,layerNumber:r})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.duplicateIncompatible",{defaultMessage:"Converted copy of {label} to {nextLabel} and added to {groupLabel} group at position {position} in layer {dropLayerNumber}",values:{label:e,groupLabel:t,position:n,nextLabel:a,dropLayerNumber:r}}),replace_duplicate_incompatible:({label:e},{label:t,groupLabel:n,position:a,nextLabel:r,layerNumber:o})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.replaceDuplicateIncompatible",{defaultMessage:"Converted copy of {label} to {nextLabel} and replaced {dropLabel} in {groupLabel} group at position {position} in layer {dropLayerNumber}",values:{label:e,dropLabel:t,groupLabel:n,position:a,nextLabel:r,dropLayerNumber:o}}),replace_duplicate_compatible:({label:e},{label:t,groupLabel:n,position:a,layerNumber:r})=>i.i18n.translate("xpack.lens.dragDrop.announce.duplicated.replaceDuplicateCompatible",{defaultMessage:"Replaced {dropLabel} with a copy of {label} in {groupLabel} at position {position} in layer {dropLayerNumber}",values:{label:e,dropLabel:t,groupLabel:n,position:a,dropLayerNumber:r}}),swap_compatible:({label:e,groupLabel:t,position:n,layerNumber:a},{label:r,groupLabel:o,position:s,layerNumber:l})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.swapCompatible",{defaultMessage:"Moved {label} to {dropGroupLabel} at position {dropPosition} in layer {dropLayerNumber} and {dropLabel} to {groupLabel} group at position {position} in layer {layerNumber}",values:{label:e,groupLabel:t,position:n,dropLabel:r,dropGroupLabel:o,dropPosition:s,layerNumber:a,dropLayerNumber:l}}),swap_incompatible:({label:e,groupLabel:t,position:n,layerNumber:a},{label:r,groupLabel:o,position:s,nextLabel:l,layerNumber:u})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.swapIncompatible",{defaultMessage:"Converted {label} to {nextLabel} in {groupLabel} group at position {position} in layer {layerNumber} and swapped with {dropLabel} in {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}",values:{label:e,groupLabel:t,position:n,dropGroupLabel:o,dropLabel:r,dropPosition:s,nextLabel:l,dropLayerNumber:u,layerNumber:a}}),combine_compatible:({label:e,groupLabel:t},{label:n,groupLabel:a,position:r,layerNumber:o})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.combineCompatible",{defaultMessage:"Combined {label} in group {groupLabel} to {dropLabel} in group {dropGroupLabel} at position {dropPosition} in layer {dropLayerNumber}",values:{label:e,groupLabel:t,dropLabel:n,dropGroupLabel:a,dropPosition:r,dropLayerNumber:o}}),combine_incompatible:({label:e,groupLabel:t,position:n,layerNumber:a},{label:r,groupLabel:o,position:s,nextLabel:l,layerNumber:u})=>i.i18n.translate("xpack.lens.dragDrop.announce.dropped.combineIncompatible",{defaultMessage:"Converted {label} to {nextLabel} in {groupLabel} group at position {position} and combined with {dropLabel} in {dropGroupLabel} group at position {dropPosition} in layer {dropLayerNumber}",values:{label:e,groupLabel:t,position:n,dropGroupLabel:o,dropLabel:r,dropPosition:s,nextLabel:l,dropLayerNumber:u}})}},O={lifted:({label:e})=>i.i18n.translate("xpack.lens.dragDrop.announce.lifted",{defaultMessage:"Lifted {label}",values:{label:e}}),cancelled:({label:e,groupLabel:t,position:n})=>t&&n?i.i18n.translate("xpack.lens.dragDrop.announce.cancelledItem",{defaultMessage:"Movement cancelled. {label} returned to {groupLabel} group at position {position}",values:{label:e,groupLabel:t,position:n}}):i.i18n.translate("xpack.lens.dragDrop.announce.cancelled",{defaultMessage:"Movement cancelled. {label} returned to its initial position",values:{label:e}}),noTarget:()=>i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.noSelected",{defaultMessage:"No target selected. Use arrow keys to select a target"}),dropped:({label:e},{groupLabel:t,position:n,label:a,layerNumber:r})=>t&&n?i.i18n.translate("xpack.lens.dragDrop.announce.droppedDefault",{defaultMessage:"Added {label} in {dropGroupLabel} group at position {position} in layer {dropLayerNumber}",values:{label:e,dropGroupLabel:t,position:n,dropLayerNumber:r}}):i.i18n.translate("xpack.lens.dragDrop.announce.droppedNoPosition",{defaultMessage:"Added {label} to {dropLabel}",values:{label:e,dropLabel:a}}),selectedTarget:({label:e},{label:t,groupLabel:n,position:a,layerNumber:r})=>n&&a?i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.default",{defaultMessage:"Add {label} to {dropGroupLabel} group at position {position} in layer {dropLayerNumber}. Press space or enter to add",values:{label:e,dropGroupLabel:n,position:a,dropLayerNumber:r}}):i.i18n.translate("xpack.lens.dragDrop.announce.selectedTarget.defaultNoPosition",{defaultMessage:"Add {label} to {dropLabel}. Press space or enter to add",values:{dropLabel:t,label:e}})},D={...O,dropped:(e,t,n)=>{var a,r;return n&&(null===(a=w.dropped)||void 0===a||null===(r=a[n])||void 0===r?void 0:r.call(a,e,t))||O.dropped(e,t)},selectedTarget:(e,t,n,a)=>{var r,o;return n&&(null===(r=w.selectedTarget)||void 0===r||null===(o=r[n])||void 0===o?void 0:o.call(r,e,t,a))||O.selectedTarget(e,t)}};var k=n(12),P=n.n(k),L=(n(361),n(366)),S=n.n(L),I=n(80);const C=()=>{},E=e=>{const{dragging:t,setDragging:n,keyboardMode:r,registerDropTarget:o,dropTargetsByOrder:i,setKeyboardMode:u,activeDropTarget:c,setActiveDropTarget:d,setA11yMessage:p}=Object(a.useContext)(l),{value:f,draggable:b,dropTypes:g,reorderableGroup:m}=e,h=b&&f.id===(null==t?void 0:t.id)?{keyboardMode:r,activeDropTarget:c,dropTargetsByOrder:i}:void 0;if(b&&(!g||!g.length)){const t={...e,activeDraggingProps:h,setKeyboardMode:u,setDragging:n,setActiveDropTarget:d,setA11yMessage:p};return m&&m.length>1?Object(s.jsx)(N,P()({},t,{reorderableGroup:m})):Object(s.jsx)(T,t)}const v={...e,keyboardMode:r,setKeyboardMode:u,dragging:t,setDragging:n,activeDropTarget:c,setActiveDropTarget:d,registerDropTarget:o,setA11yMessage:p,isNotDroppable:!(g&&g.length||!t||f.id===t.id)};return m&&m.length>1&&null!=m&&m.some((e=>e.id===(null==t?void 0:t.id)))&&"reorder"===(null==g?void 0:g[0])?Object(s.jsx)(z,P()({},v,{reorderableGroup:m})):Object(s.jsx)(A,v)},M=()=>{const e=window.getSelection();e&&e.removeAllRanges()},T=Object(a.memo)((function({dataTestSubj:e,className:t,value:n,children:i,setDragging:l,setKeyboardMode:u,setActiveDropTarget:d,order:p,activeDraggingProps:b,dragType:g,onDragStart:m,onDragEnd:h,extraKeyboardHandler:v,ariaDescribedBy:y,setA11yMessage:x}){const j=null==b?void 0:b.keyboardMode,_=null==b?void 0:b.activeDropTarget,w=null==b?void 0:b.dropTargetsByOrder,O=Object(a.useCallback)(((e,t=!1)=>{d(e),x(e?D.selectedTarget(n.humanData,null==e?void 0:e.humanData,null==e?void 0:e.dropType,t):D.noTarget())}),[d,x,n.humanData]),k=Object(a.useCallback)(((e,t)=>{const n=w&&Object.values(w).filter((t=>(null==t?void 0:t.id)===e));t>0&&null!=n&&n[t]?O(n[t]):O(null==n?void 0:n[0],!0)}),[w,O]),P=Object(a.useMemo)((()=>({onKeyDown:e=>{if(e.preventDefault(),"Alt"===e.key&&null!=_&&_.id)k(_.id,1);else if("Shift"===e.key&&null!=_&&_.id)k(_.id,2);else if("Control"===e.key&&null!=_&&_.id){const e=Number(_.humanData.canSwap)+Number(_.humanData.canDuplicate);k(_.id,e+1)}},onKeyUp:e=>{if(e.preventDefault(),null!=_&&_.id&&["Shift","Alt","Control"].includes(e.key))if(e.altKey)k(_.id,1);else if(e.shiftKey)k(_.id,2);else if(e.ctrlKey){const e=Number(_.humanData.canSwap)+Number(_.humanData.canDuplicate);k(_.id,e+1)}else k(_.id,0)}})),[_,k]),L=(e,t)=>{if(e&&"dataTransfer"in e&&e.dataTransfer.getData("text"))return;e&&"dataTransfer"in e&&e.dataTransfer.setData("text",n.humanData.label);const a=null==e?void 0:e.currentTarget;setTimeout((()=>{l({...n,ghost:t?{children:i,style:{width:a.offsetWidth,height:a.offsetHeight}}:void 0}),x(D.lifted(n.humanData)),t&&u(!0),m&&m(a)}))},S=e=>{null==e||e.stopPropagation(),l(void 0),d(void 0),u(!1),x(D.cancelled(n.humanData)),h&&h()},C="move"===g&&j&&_&&"reorder"!==_.dropType;return Object(s.jsx)("div",{className:f()(t,{"lnsDragDrop-isHidden":b&&"move"===g&&!j||C}),"data-test-subj":`lnsDragDrop_draggable-${n.humanData.label}`},Object(s.jsx)(o.EuiScreenReaderOnly,{showOnFocus:!0},Object(s.jsx)("button",{"aria-label":n.humanData.label,"aria-describedby":y||"lnsDragDrop-keyboardInstructions",className:"lnsDragDrop__keyboardHandler","data-test-subj":"lnsDragDrop-keyboardHandler",onBlur:e=>{b&&S()},onKeyDown:e=>{const{key:t}=e;t===o.keys.ENTER||t===o.keys.SPACE?(_&&(()=>{if(_){Object(I.d)("drop_total");const{dropType:e,humanData:t,onDrop:a}=_;setTimeout((()=>x(D.dropped(n.humanData,t,e)))),a(n,e)}})(),b?S():L(e,!0)):t===o.keys.ESCAPE&&b&&(e.stopPropagation(),e.preventDefault(),S()),v&&v(e),j&&(o.keys.ARROW_LEFT!==t&&o.keys.ARROW_RIGHT!==t||((e,t=!1)=>{const n=c(w,_,[p.join(",")],(e=>"reorder"!==(null==e?void 0:e.dropType)),t);e.altKey&&null!=n&&n.id?k(n.id,1):e.shiftKey&&null!=n&&n.id?k(n.id,2):e.ctrlKey&&null!=n&&n.id?k(n.id,3):O(n,!0)})(e,!(o.keys.ARROW_LEFT!==t)),P.onKeyDown(e))},onKeyUp:P.onKeyUp})),r.a.cloneElement(i,{"data-test-subj":e||"lnsDragDrop",className:f()(i.props.className,"lnsDragDrop","lnsDragDrop-isDraggable"),draggable:!0,onDragEnd:S,onDragStart:L,onMouseDown:M}))})),A=Object(a.memo)((function(e){const{dataTestSubj:t,className:n,onDrop:i,value:l,children:u,draggable:c,dragging:d,isNotDroppable:p,dropTypes:b,order:g,getAdditionalClassesOnEnter:m,getAdditionalClassesOnDroppable:h,activeDropTarget:v,registerDropTarget:y,setActiveDropTarget:x,keyboardMode:j,setKeyboardMode:_,setDragging:w,setA11yMessage:O,getCustomDropTarget:k}=e,[L,I]=Object(a.useState)(!1),E=Object(a.useRef)(null);S()((()=>{if(b&&null!=b&&b[0]&&i&&j)return b.forEach(((e,t)=>{y([...g,t],{...l,onDrop:i,dropType:e})})),()=>{b.forEach(((e,t)=>{y([...g,t],void 0)}))}}),[g,y,b,j]),Object(a.useEffect)((()=>{let e=!0;return v&&v.id!==l.id&&I(!1),setTimeout((()=>{!v&&e&&I(!1)}),1e3),()=>{e=!1}}),[v,I,l.id]);const M=()=>{L||I(!0)},T=(e,t)=>{if(!b||b.length<=1)return t;const n=b.indexOf(t);if(n>0)return t;if(0===n){if(e.altKey&&b[1])return b[1];if(e.shiftKey&&b[2])return b[2];if(e.ctrlKey&&(b.length>3?b[3]:b[1]))return b.length>3?b[3]:b[1]}return t},A=()=>{x(void 0)},N=(e,n)=>{const a=Boolean((null==v?void 0:v.id)===l.id&&e===(null==v?void 0:v.dropType));return{"data-test-subj":t||"lnsDragDrop",className:z(e,n),onDragEnter:M,onDragLeave:A,onDragOver:e?t=>((e,t)=>{if(e.preventDefault(),!d||!i)return;const n=T(e,t);(null==v?void 0:v.id)===l.id&&(null==v?void 0:v.dropType)===n||(x({...l,dropType:n,onDrop:i}),O(D.selectedTarget(d.humanData,l.humanData,n)))})(t,e):C,onDrop:e?t=>((e,t)=>{if(e.preventDefault(),e.stopPropagation(),I(!1),i&&d){const n=T(e,t);i(d,n),setTimeout((()=>O(D.dropped(d.humanData,l.humanData,n))))}w(void 0),x(void 0),_(!1)})(t,e):C,draggable:c,ghost:a&&"reorder"!==e&&(null==d?void 0:d.ghost)&&d.ghost||void 0}},z=(e,t=u)=>{const a=Boolean((null==v?void 0:v.id)===l.id&&e===(null==v?void 0:v.dropType)),r=null==h?void 0:h(e),o=f()("lnsDragDrop",{"lnsDragDrop-isDraggable":c,"lnsDragDrop-isDroppable":!c,"lnsDragDrop-isDropTarget":e,"lnsDragDrop-isActiveDropTarget":e&&a,"lnsDragDrop-isNotDroppable":p},r&&{[r]:e});return f()(o,n,t.props.className)},R=N(b&&b[0]),B=Object(a.useMemo)((()=>{var e;const t=b&&b.length&&b.slice(1);if(!t||!t.length)return;const n=40*t.length;return{clipPath:`polygon(100% 0px, 100% ${n-(n-((null===(e=E.current)||void 0===e?void 0:e.clientHeight)||40))}px, 0 100%, 0 0)`,height:n}}),[b]);return Object(s.jsx)("div",{"data-test-subj":"lnsDragDropContainer",className:f()("lnsDragDrop__container",{"lnsDragDrop__container-active":L||(null==v?void 0:v.id)===l.id}),onDragEnter:M,ref:E},Object(s.jsx)(F,P()({},R,{className:f()(R.className,(()=>{const e=null==m?void 0:m(null==v?void 0:v.dropType);return f()(e&&{[e]:(null==v?void 0:v.id)===l.id})})()),children:u})),b&&b.length>1&&Object(s.jsx)(r.a.Fragment,null,Object(s.jsx)("div",{className:"lnsDragDrop__diamondPath",style:B,onDragEnter:M}),Object(s.jsx)(o.EuiFlexGroup,{gutterSize:"none",direction:"column","data-test-subj":"lnsDragDropExtraDrops",className:f()("lnsDragDrop__extraDrops",{"lnsDragDrop__extraDrops-visible":L||(null==v?void 0:v.id)===l.id})},b.slice(1).map((e=>{const t=null==k?void 0:k(e);return t?Object(s.jsx)(o.EuiFlexItem,{key:e,className:"lnsDragDrop__extraDropWrapper"},Object(s.jsx)(F,N(e,t),t)):null})))))})),F=({ghost:e,children:t,...n})=>Object(s.jsx)(r.a.Fragment,null,r.a.cloneElement(t,n),e?r.a.cloneElement(e.children,{className:f()(e.children.props.className,"lnsDragDrop_ghost"),style:e.style}):null),N=Object(a.memo)((function(e){const{reorderState:{isReorderOn:t,reorderedItems:n,direction:r},setReorderState:i}=Object(a.useContext)(b),{value:l,setActiveDropTarget:u,activeDraggingProps:d,reorderableGroup:p,setA11yMessage:f}=e,g=null==d?void 0:d.keyboardMode,m=null==d?void 0:d.activeDropTarget,h=null==d?void 0:d.dropTargetsByOrder,v=!!d,y=g?v&&(!m||p.some((e=>e.id===(null==m?void 0:m.id)))):v;Object(a.useEffect)((()=>{i((e=>({...e,isReorderOn:y})))}),[i,y]);const x=()=>i((e=>({...e,reorderedItems:[]}))),j=e=>{if(!e)return i((e=>({...e,reorderedItems:[]}))),f(D.selectedTarget(l.humanData,l.humanData,"reorder")),void u(e);const t=p.findIndex((t=>t.id===e.id)),n=p.findIndex((e=>e.id===(null==l?void 0:l.id)));-1!==n&&(u(e),f(D.selectedTarget(l.humanData,e.humanData,"reorder")),i((e=>n<t?{...e,reorderedItems:p.slice(n+1,t+1),direction:"-"}:{...e,reorderedItems:p.slice(t,n),direction:"+"})))},_=v&&g&&n.length;return Object(s.jsx)("div",{"data-test-subj":"lnsDragDrop-reorderableDrag",className:v?"lnsDragDrop-reorderable lnsDragDrop-translatableDrag":"lnsDragDrop-reorderable",style:_?{transform:`translateY(${"+"===r?"-":"+"}${n.reduce(((e,t)=>e+Number(t.height||0)+8),0)}px)`}:void 0},Object(s.jsx)(T,P()({},e,{ariaDescribedBy:"lnsDragDrop-keyboardInstructionsWithReorder",extraKeyboardHandler:n=>{if(t&&g){n.stopPropagation(),n.preventDefault();let t=p.findIndex((e=>e.id===l.id));if(m){const e=p.findIndex((e=>e.id===(null==m?void 0:m.id)));-1!==e&&(t=e)}if(n.key===o.keys.ARROW_LEFT||n.key===o.keys.ARROW_RIGHT)x(),u(void 0);else if(o.keys.ARROW_DOWN===n.key){if(t<p.length-1){const t=c(h,m,[e.order.join(",")],(e=>"reorder"===(null==e?void 0:e.dropType)));j(t)}}else if(o.keys.ARROW_UP===n.key&&t>0){const t=c(h,m,[e.order.join(",")],(e=>"reorder"===(null==e?void 0:e.dropType)),!0);j(t)}}},onDragStart:e=>{if(e){const t=e.offsetHeight+8;i((e=>({...e,draggingHeight:t})))}},onDragEnd:()=>{x()}})))})),z=Object(a.memo)((function(e){const{onDrop:t,value:n,dragging:r,setDragging:o,setKeyboardMode:i,activeDropTarget:l,setActiveDropTarget:u,reorderableGroup:c,setA11yMessage:d}=e,p=c.findIndex((e=>e.id===n.id)),{reorderState:{isReorderOn:g,reorderedItems:m,draggingHeight:h,direction:v},setReorderState:y}=Object(a.useContext)(b),x=Object(a.useRef)(null),j=g&&m.some((e=>e.id===n.id))&&m.length;return Object(a.useEffect)((()=>{var e;j&&null!==(e=x.current)&&void 0!==e&&e.clientHeight&&y((e=>({...e,reorderedItems:e.reorderedItems.map((e=>{var t;return e.id===n.id?{...e,height:null===(t=x.current)||void 0===t?void 0:t.clientHeight}:e}))})))}),[j,y,n.id]),Object(s.jsx)("div",null,Object(s.jsx)("div",{style:m.some((e=>e.id===n.id))?{transform:`translateY(${v}${h}px)`}:void 0,ref:x,"data-test-subj":"lnsDragDrop-translatableDrop",className:"lnsDragDrop-translatableDrop lnsDragDrop-reorderable"},Object(s.jsx)(A,e)),Object(s.jsx)("div",{"data-test-subj":"lnsDragDrop-reorderableDropLayer",className:f()("lnsDragDrop",{lnsDragDrop__reorderableDrop:r}),onDrop:e=>{e.preventDefault(),e.stopPropagation(),u(void 0),o(void 0),i(!1),t&&r&&(Object(I.d)("drop_total"),t(r,"reorder"),setTimeout((()=>d(D.dropped(r.humanData,n.humanData,"reorder")))))},onDragOver:e=>{if(e.preventDefault(),(null==l?void 0:l.id)!==(null==n?void 0:n.id)&&t){u({...n,dropType:"reorder",onDrop:t});const e=c.findIndex((e=>e.id===(null==r?void 0:r.id)));if(!r||-1===e)return;const a=p;e===a&&y((e=>({...e,reorderedItems:[]}))),y((t=>e<a?{...t,reorderedItems:c.slice(e+1,a+1),direction:"-"}:{...t,reorderedItems:c.slice(a,e),direction:"+"}))}},onDragLeave:()=>{u(void 0),y((e=>({...e,reorderedItems:[]})))}}))}))},function(e,t,n){e.exports=n(14)(2745)},function(e,t,n){e.exports=n(14)(10)},,,function(e,t,n){e.exports=n(14)(422)},function(e,t,n){"use strict";var a=n(68).default;t.__esModule=!0,t.default=t.ReactReduxContext=void 0;var r=a(n(8)).default.createContext(null);t.ReactReduxContext=r;var o=r;t.default=o},function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"a",(function(){return y}));var a=n(86),r=n(12),o=n.n(r),i=(n(194),n(8)),s=n.n(i),l=n(0),u=n(126),c=n.n(u),d=n(7),p=n(23),f=n.n(p),b=n(2);const g=()=>document.createElement("canvas").getContext("2d"),m=g(),h=(e,t)=>{const n=null!=m?m:g();return n.font=t,n.measureText(e).width},v=s.a.memo((function({label:e,width:t,search:n,font:a}){const r=Object(i.useMemo)((()=>h(e,a)),[e,a]);if(r<t)return Object(b.jsx)(d.EuiHighlight,{search:n},e);const o=e.indexOf(n),s=Math.round(t*e.length/r);let l,u="".length;n&&-1!==o?0===o?l=(e,t)=>`${e.substr(0,t)}`:s>e.length-o?l=(e,t)=>`${e.substr(e.length-t)}`:(l=(e,t)=>`${e.substr(o,t)}`,u=2*"".length):l=(e,t)=>`${e.substr(0,8)}${e.substr(e.length-(t-8))}`;const c=((e,t,n,a,r)=>{let o=r(n,a);for(;h(o,t)>e;)o=r(n,a-=1);return o})(t,a,e,s,l);return n.length<c.length-u?Object(b.jsx)(d.EuiHighlight,{search:n},c):Object(b.jsx)(d.EuiMark,null,c)}));function y({selectedOptions:e,options:t,onChoose:n,onDelete:r,fieldIsInvalid:u,"data-test-subj":p,...g}){const m=null==t?void 0:t.map((({compatible:e,exists:t,...n})=>n.options?{...n,compatible:e,exists:t,options:n.options.map((e=>({...e,className:f()({"lnFieldPicker__option--incompatible":!e.compatible,"lnFieldPicker__option--nonExistant":!e.exists})})))}:{...n,compatible:e,exists:t,className:f()({"lnFieldPicker__option--incompatible":!e,"lnFieldPicker__option--nonExistant":!t})})),h=Object(i.useRef)(null),[y,x]=s.a.useState({width:215,font:"14px Inter"}),j=(e,t=!1)=>{if(h.current){var n;const e={...y,width:(null===(n=h.current)||void 0===n?void 0:n.clientWidth)-90};t&&(e.font=window.getComputedStyle(h.current).font),x(e)}};return c()((()=>{h.current&&j(0,!0),window.addEventListener("resize",j)})),Object(b.jsx)("div",{ref:h},Object(b.jsx)(d.EuiComboBox,o()({fullWidth:!0,compressed:!0,isClearable:!1,"data-test-subj":null!=p?p:"indexPattern-dimension-field",placeholder:l.i18n.translate("xpack.lens.fieldPicker.fieldPlaceholder",{defaultMessage:"Select a field"}),options:m,isInvalid:u,selectedOptions:e,singleSelection:{asPlainText:!0},onChange:e=>{0!==e.length?n(e[0].value):null==r||r()},renderOption:(e,t)=>Object(b.jsx)(d.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},Object(b.jsx)(d.EuiFlexItem,{grow:null},Object(b.jsx)(a.a,{type:e.value.dataType,fill:"none"})),Object(b.jsx)(d.EuiFlexItem,null,Object(b.jsx)(v,o()({},y,{label:e.label,search:t}))))},g)))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u}));var a=n(21),r=n(10),o=n(47);const[i,s]=Object(r.createGetterSetter)("UsageCollection",!1),l=(e,t)=>{var n;const r=i(),s=null!==(n=(e=>{if(e){var t;const n=e=>e.type?e:e.child?n(e.child):void 0;return null===(t=n(e))||void 0===t?void 0:t.type}})(t))&&void 0!==n?n:"application";Object.entries(Object(a.groupBy)(Array.isArray(e)?e:[e])).forEach((([e,t])=>{null==r||r.reportUiCounter(s,o.METRIC_TYPE.COUNT,`render_lens_${e}`,t.length)}))},u=e=>{const t=[];return null!=e&&e.type&&t.push(`vis_${e.type}`),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return error_boundary_ErrorBoundary})),n.d(t,"b",(function(){return l.a})),n.d(t,"c",(function(){return l.b}));var a=n(8),r=n.n(a),o=n(7),i=n(2);const s=({error:e})=>{throw e};class error_boundary_ErrorBoundary extends r.a.Component{constructor(e){super(e)}static getDerivedStateFromError(e){return{originalError:e}}componentDidCatch(e){var t,n;null===(t=(n=this.props).onError)||void 0===t||t.call(n,e)}componentWillReceiveProps(){this.setState({originalError:void 0})}render(){var e;return null!==(e=this.state)&&void 0!==e&&e.originalError?Object(i.jsx)(o.EuiErrorBoundary,null,Object(i.jsx)(s,{error:this.state.originalError})):this.props.children}}var l=n(94)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(8),r=n(21);const o=({onChange:e,value:t,defaultValue:n},{allowFalsyValue:o}={})=>{const[i,s]=Object(a.useState)(t),l=Object(a.useRef)(!1),u=Boolean(o),c=Object(a.useRef)(null!=n?n:t),d=Object(a.useRef)(),p=Object(a.useMemo)((()=>{const t=Object(r.debounce)((t=>{e(t),d.current=setTimeout((()=>{l.current=!1}),256)}),256);return e=>{d.current&&clearTimeout(d.current),l.current=!0,t(e)}}),[e]);return Object(a.useEffect)((()=>{l.current||t===i||s(t)}),[t,i]),{inputValue:i,handleInputChange:e=>{s(e);const t=u?null!=e?e:c.current:e||c.current;p(t)},initialValue:c.current}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(61);const o=a.i18n.translate("xpack.lens.indexPattern.records",{defaultMessage:"Records"}),i={displayName:o,customLabel:o,name:r.c,type:"document",aggregatable:!0,searchable:!0}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(12),r=n.n(a),o=(n(8),n(121)),i=n(63),s=n(2);function l({type:e,...t}){return Object(s.jsx)(o.b,r()({className:"lnsFieldListPanel__fieldIcon",type:Object(i.d)(e)},t))}},,function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return g})),n(8);var a=n(23),r=n.n(a),o=n(7),i=n(0),s=n(70),l=n(2);const u=({type:e,isIncompatible:t})=>{const{icon:n,label:a,controlKey:s}=function(e){switch(e){case"duplicate":return{icon:"copy",label:i.i18n.translate("xpack.lens.dragDrop.duplicate",{defaultMessage:"Duplicate"}),controlKey:i.i18n.translate("xpack.lens.dragDrop.altOption",{defaultMessage:"Alt/Option"})};case"swap":return{icon:"merge",label:i.i18n.translate("xpack.lens.dragDrop.swap",{defaultMessage:"Swap"}),controlKey:i.i18n.translate("xpack.lens.dragDrop.shift",{defaultMessage:"Shift"})};case"combine":return{icon:"aggregate",label:i.i18n.translate("xpack.lens.dragDrop.combine",{defaultMessage:"Combine"}),controlKey:i.i18n.translate("xpack.lens.dragDrop.control",{defaultMessage:"Control"})};default:throw Error("Drop type not supported")}}(e);return Object(l.jsx)(o.EuiFlexGroup,{gutterSize:"s",justifyContent:"spaceBetween",alignItems:"center",className:r()("lnsDragDrop__extraDrop",{"lnsDragDrop-incompatibleExtraDrop":t})},Object(l.jsx)(o.EuiFlexItem,{grow:!1},Object(l.jsx)(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(l.jsx)(o.EuiFlexItem,{grow:!1},Object(l.jsx)(o.EuiIcon,{size:"m",type:n})),Object(l.jsx)(o.EuiFlexItem,{grow:!1,"data-test-subj":`lnsDragDrop-${e}`},Object(l.jsx)(o.EuiText,{size:"s"},a)))),Object(l.jsx)(o.EuiFlexItem,{grow:!1},Object(l.jsx)(o.EuiText,{size:"xs"},Object(l.jsx)("code",null," ",s))))},c={replace_duplicate_incompatible:u({type:"duplicate",isIncompatible:!0}),duplicate_incompatible:u({type:"duplicate",isIncompatible:!0}),swap_incompatible:u({type:"swap",isIncompatible:!0}),replace_duplicate_compatible:u({type:"duplicate"}),duplicate_compatible:u({type:"duplicate"}),swap_compatible:u({type:"swap"}),field_combine:u({type:"combine"}),combine_compatible:u({type:"combine"}),combine_incompatible:u({type:"combine",isIncompatible:!0})},d=e=>(null==c?void 0:c[e])||null,p=e=>{if(e&&["field_replace","replace_compatible","replace_incompatible","replace_duplicate_compatible","replace_duplicate_incompatible"].includes(e))return"lnsDragDrop-isReplacing"},f=e=>{if(e&&["move_incompatible","replace_incompatible","swap_incompatible","duplicate_incompatible","replace_duplicate_incompatible","combine_incompatible"].includes(e))return"lnsDragDrop-notCompatible"};function b(e,t){return Object(s.e)(e)&&("move_compatible"===t||"move_incompatible"===t||"combine_incompatible"===t||"combine_compatible"===t||"replace_compatible"===t||"replace_incompatible"===t)}function g(e,t){const{prevState:n,target:a,frame:r,source:o,group:i}=e,{layerId:l,columnId:u,groupId:c}=a,d=Object(s.e)(o)&&null!=i&&i.requiresPreviousColumnOnDuplicate?o.columnId:void 0;return t.setDimension({columnId:u,groupId:c,layerId:l,prevState:n,previousColumn:d,frame:r})}},function(e,t,n){"use strict";var a=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function r(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((r=e[n])===(o=t[n])||a(r)&&a(o)))return!1;var r,o;return!0}e.exports=function(e,t){void 0===t&&(t=r);var n=null;function a(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;var o=e.apply(this,a);return n={lastResult:o,lastArgs:a,lastThis:this},o}return a.clear=function(){n=null},a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o}));const a="lens-settings",r=(e,t)=>{const n=e.get(a);return n&&n[t]},o=(e,t,n)=>{e.set(a,{...e.get(a),[t]:n})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return c}));var a=n(24),r=n(81),o=n(112),i=n(62);function s({datasourceMap:e,datasourceStates:t,visualizationMap:n,activeVisualization:i,subVisualizationId:s,visualizationState:l,field:u,visualizeTriggerFieldContext:c,activeData:d,dataViews:p,mainPalette:f}){const b=Object.entries(e).filter((([e])=>t[e]&&!t[e].isLoading)),g=b.reduce(((e,[n,a])=>{const r=t[n].state;if(!i||!r)return e;const s=a.getLayers(r);for(const t of s){const n=Object(o.b)(i,l,t);e[t]=n}return e}),{}),m=(e,t)=>{var n;return t.includes(null!==(n=g[e])&&void 0!==n?n:a.LayerTypes.DATA)},h=b.flatMap((([e,n])=>{const o=t[e].state;let i;try{i=c?"isVisualizeAction"in c?n.getDatasourceSuggestionsForVisualizeCharts(o,c.layers,p.indexPatterns):n.getDatasourceSuggestionsForVisualizeField(o,c.dataViewSpec.id,c.fieldName,p.indexPatterns):u?n.getDatasourceSuggestionsForField(o,u,(e=>m(e,[a.LayerTypes.DATA])),p.indexPatterns):n.getDatasourceSuggestionsFromCurrentState(o,p.indexPatterns,(e=>m(e,[a.LayerTypes.DATA])),d)}catch(e){return Object(r.c)(e),[]}return i.map((t=>({...t,datasourceId:e})))}));return Object.entries(n).flatMap((([e,t])=>{const n=t.getSupportedLayers().map((({type:e})=>e));return h.filter((e=>{const t=e.keptLayerIds.filter((e=>m(e,n))).length;return t||t===e.keptLayerIds.length})).flatMap((a=>{var o;const u=a.table,p=e===(null==i?void 0:i.id)?l:void 0,b=f||(null==i||null===(o=i.getMainPalette)||void 0===o?void 0:o.call(i,l));return function(e,t,n,a,o,i,s,l,u){try{return e.getSuggestions({table:t,state:o,keptLayerIds:a.keptLayerIds,subVisualizationId:i,mainPalette:s,isFromContext:l,activeData:u}).map((({state:e,...r})=>({...r,visualizationId:n,visualizationState:e,keptLayerIds:a.keptLayerIds,datasourceState:a.state,datasourceId:a.datasourceId,columns:t.columns.length,changeType:t.changeType})))}catch(e){return Object(r.c)(e),[]}}(t,u,e,{...a,keptLayerIds:a.keptLayerIds.filter((e=>m(e,n)))},p,s,b,c&&"isVisualizeAction"in c,d)}))})).sort(((e,t)=>t.score-e.score))}function l({datasourceMap:e,datasourceStates:t,visualizationMap:n,visualizeTriggerFieldContext:a,dataViews:r}){const o=(null==n?void 0:n[Object.keys(n)[0]])||null,i=s({datasourceMap:e,datasourceStates:t,visualizationMap:n,activeVisualization:o,visualizationState:void 0,visualizeTriggerFieldContext:a,dataViews:r});if(a&&"isVisualizeAction"in a){var l;const e=i.filter((e=>e.visualizationId===a.type)),t=n[a.type]||null;return null==t||null===(l=t.getSuggestionFromConvertToLensContext)||void 0===l?void 0:l.call(t,{suggestions:e,context:a})}return a&&"query"in a&&a.query?i.find((e=>"textBased"===e.datasourceId)):i.length?i.find((e=>e.visualizationId===(null==o?void 0:o.id)))||i[0]:void 0}function u(e,t,n){e(Object(i.P)({suggestion:{newVisualizationId:t.visualizationId,visualizationState:t.visualizationState,datasourceState:t.datasourceState,datasourceId:t.datasourceId},clearStagedPreview:null==n?void 0:n.clearStagedPreview})),null!=n&&n.applyImmediately&&e(Object(i.b)())}function c(e,t,n,a,r,o,i){var l;const u=Object.values(e).some((e=>e&&e.getTableSpec().length>0)),c=t.activeId?a[t.activeId]:void 0,d=null==c||null===(l=c.getMainPalette)||void 0===l?void 0:l.call(c,t.state),p=s({datasourceMap:{[r.id]:r},datasourceStates:n,visualizationMap:u&&t.activeId?{[t.activeId]:c}:a,activeVisualization:c,visualizationState:t.state,field:o,mainPalette:d,dataViews:i});return p.find((e=>e.visualizationId===t.activeId))||p.filter((e=>!e.hide))[0]||p[0]}},function(e,t,n){"use strict";e.exports=n(403)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(12),r=n.n(a),o=n(0),i=n(8),s=n.n(i),l=n(7),u=n(13),c=n(36),d=n(2);function p({indexPatternRefs:e,isMissingCurrent:t,indexPatternId:n,onChangeIndexPattern:a,trigger:p,selectableProps:f}){const[b,g]=Object(i.useState)(!1),m=t?{color:"danger"}:{};return Object(d.jsx)(s.a.Fragment,null,Object(d.jsx)(l.EuiPopover,{panelClassName:"lnsChangeIndexPatternPopover",button:function(){const{label:e,title:t,...n}=p;return Object(d.jsx)(u.ToolbarButton,r()({title:t,onClick:()=>g(!b),fullWidth:!0},m,n),e)}(),panelProps:{"data-test-subj":"lnsChangeIndexPatternPopover"},isOpen:b,closePopover:()=>g(!1),display:"block",panelPaddingSize:"none",ownFocus:!0},Object(d.jsx)("div",null,Object(d.jsx)(l.EuiPopoverTitle,{paddingSize:"s"},o.i18n.translate("xpack.lens.indexPattern.changeDataViewTitle",{defaultMessage:"Data view"})),Object(d.jsx)(c.DataViewsList,{dataViewsList:e,onChangeDataView:e=>{a(e),g(!1)},currentDataViewId:n,selectableProps:f}))))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var a=n(0),r=n(50);const[o,i]=Object(r.createGetterSetter)("MemoizedErrorNotification",!1),s=e=>{var t;return null===(t=o())||void 0===t?void 0:t(e)},l=e=>{i((e=>{const t=new Map;return n=>{const{message:r}=n;r&&(t.has(r)||(e.notifications.toasts.addError(n,{title:a.i18n.translate("xpack.lens.uiErrors.unexpectedError",{defaultMessage:"An unexpected error occurred."})}),t.set(r,!0)))}})(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return f}));var a=n(37),r=n(21),o=n(83),i=n(59);function s(e){const t=Object(r.keyBy)(e,"name");return e=>t[e]}function l(e,t=d){const n=e.fields.filter((e=>!(Object(a.isNestedField)(e)||!e.aggregatable&&!e.scripted))).map((t=>{const n={name:t.name,displayName:t.displayName,type:t.type,aggregatable:t.aggregatable,filterable:t.filterable,searchable:t.searchable,meta:e.metaFields.includes(t.name),esTypes:t.esTypes,scripted:t.scripted,isMapped:t.isMapped,customLabel:t.customLabel,runtimeField:t.runtimeField,runtime:Boolean(t.runtimeField),timeSeriesMetricType:t.timeSeriesMetric,timeSeriesRollup:t.isRolledUpField,partiallyApplicableFunctions:t.isRolledUpField?{percentile:!0,percentile_rank:!0,median:!0,last_value:!0,unique_count:!0,standard_deviation:!0}:void 0};return n.scripted?{...n,lang:t.lang,script:t.script}:n})).concat(o.a),{typeMeta:r,title:i,name:l,timeFieldName:u,fieldFormatMap:c}=e;if(null!=r&&r.aggs){const e=Object.keys(r.aggs);n.forEach(((a,o)=>{const i={};e.forEach((e=>{const n=r.aggs&&r.aggs[e]&&r.aggs[e][a.name];n&&(i[t(e)]=n)})),Object.keys(i).length&&(n[o]={...a,aggregationRestrictions:i})}))}return{id:e.id,title:i,name:l||i,timeFieldName:u,fieldFormatMap:c&&Object.fromEntries(Object.entries(c).map((([e,t])=>[e,"toJSON"in t?t.toJSON():t]))),fields:n,getFieldByName:s(n),hasRestrictions:!(null==r||!r.aggs),spec:e.toSpec(!1),isPersisted:e.isPersisted()}}async function u(e){const t=await e.getIdsWithTitle();return Object(i.sortDataViewRefs)(t)}const c={avg:"average",cardinality:"unique_count"};function d(e){return e in c?c[e]:e}async function p({dataViews:e,patterns:t,notUsedPatterns:n,cache:a,adHocDataViews:r,onIndexPatternRefresh:o}){const i=t.filter((e=>!(a[e]||null!=r&&r[e]))),s=Object.values(r||{}).length>0;if(0===i.length&&!s)return a;null==o||o();let u=(await Promise.allSettled(i.map((t=>e.get(t))))).filter((e=>"fulfilled"===e.status)).map((e=>e.value));if(!u.length&&!s&&n)for(const t of n){const n=await e.get(t).catch((e=>{}));if(n){u=[n];break}}return u.push(...await Promise.all(Object.values(r||{}).map((t=>e.create(t))))),u.reduce(((e,t)=>({[t.id]:l(t,d),...e})),{...a})}async function f({id:e,onError:t,dataViews:n,cache:a={}}){const r=await p({dataViews:n,cache:a,patterns:[e]});if(null!=r[e])return{...a,[e]:r[e]};t(Error("Missing indexpatterns"))}},function(e,t,n){"use strict";t.__esModule=!0;var a={batch:!0},r=n(386);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===r[e]||(t[e]=r[e]))}));var o=n(401);t.batch=o.unstable_batchedUpdates,(0,n(148).setBatch)(o.unstable_batchedUpdates)},function(e,t,n){e.exports=n(14)(49)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Qe})),n.d(t,"d",(function(){return L})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return I})),n.d(t,"e",(function(){return C})),n.d(t,"b",(function(){return E})),n.d(t,"h",(function(){return M})),n.d(t,"c",(function(){return T})),n.d(t,"i",(function(){return F}));var a=n(8),r=n.n(a),o=n(80),i=(n(379),n(10)),s=n(7),l=n(2);const u=r.a.lazy((()=>n.e(8).then(n.bind(null,491)))),c=/^What\'s (an|(\d+)) elk bees?\?$/;function d({query:e}){if(!e||"object"!=typeof e||"string"!=typeof e.query)return null;const t=c.exec(e.query);if(!t)return null;let n=parseInt(t[2]||"1",10);return isNaN(n)&&(n=0),n=Math.max(1,Math.min(50,n)),Object(l.jsx)(r.a.Suspense,{fallback:!1},new Array(n).fill(void 0).map(((e,t)=>Object(l.jsx)(u,{key:t}))))}function p(e){return Object(l.jsx)(s.EuiErrorBoundary,{style:{display:"none"}},Object(l.jsx)(d,e))}var f=n(101),b=n(72),g=n(62),m=n(89),h=n.n(m),v=n(21),y=n(37),x=n(99);function j(e,t,n,a){const r=[];return Object.entries(e).forEach((([e,o])=>{var i;const s=null===(i=t[e])||void 0===i?void 0:i.state;s&&o.getLayers(s).forEach((e=>{const t=o.toExpression(s,e,n,a);t&&r.push([e,t])}))})),0===r.length?null:r.reduce(((e,[t,n])=>({...e,[t]:"string"==typeof n?Object(x.a)(n):n})),{})}function _({visualization:e,visualizationState:t,datasourceMap:n,datasourceStates:a,datasourceLayers:r,title:o,description:i,indexPatterns:s,searchSessionId:l}){if(null===e)return null;const u=j(n,a,s,l),c=e.toExpression(t,r,{title:o,description:i},null!=u?u:void 0);return null===u||null===c?null:"string"==typeof c?Object(x.a)(c):c}var w=n(81),O=n(59),D=n(118),k=n(90),P=n(95);async function L({dataViews:e,datasourceMap:t,datasourceStates:n,storage:a,defaultIndexPatternId:r,references:o,initialContext:i,adHocDataViews:s},l){var u;const c=Object.fromEntries(Object.entries(s||{}).map((([e,t])=>[e,y.DataViewPersistableStateService.inject(t,o||[])]))),{isFullEditor:d}=null!=l?l:{},p=await(d?Object(P.c)(e):[]),f=((e,t)=>{var n;const a=Object(k.b)(e,"indexPatternId");return a&&(null===(n=t.find((e=>e.id===a)))||void 0===n?void 0:n.id)})(a,p),b=f||r||(null===(u=p[0])||void 0===u?void 0:u.id),g=!i&&Object.keys(t).every((e=>{var t;return!(null!==(t=n[e])&&void 0!==t&&t.state)}))?b:void 0,m=Object.keys(c||{}),h=function(e,t,n,a){const r=[];if(t?"isVisualizeAction"in t?r.push(...t.indexPatternIds):r.push(t.dataViewSpec.id):n&&r.push(n),e)for(const t of e)"index-pattern"===t.type&&r.push(t.id);return a&&r.push(...a),[...new Set(r)]}(o,i,g,m),x=new Set(p.map((({id:e})=>e))),j=Object(v.difference)([...x],h),_=await Object(P.d)({dataViews:e,patterns:h,notUsedPatterns:j,cache:{},adHocDataViews:c}),w=((e,t,n)=>{const a=e.map((({id:e})=>e)),r=t.filter((e=>!a.includes(e)));return Object.values(n).filter((({id:e})=>r.includes(e))).map((({id:e,title:t,name:n})=>({id:e,title:t,name:n})))})(p,h,_);return{indexPatternRefs:Object(O.sortDataViewRefs)([...p,...w]),indexPatterns:_}}async function S({dataViews:e,datasourceMap:t,visualizationMap:n,visualizationState:a,datasourceStates:r,storage:o,defaultIndexPatternId:i,references:s,initialContext:l,adHocDataViews:u},c){const{indexPatternRefs:d,indexPatterns:p}=await L({datasourceMap:t,datasourceStates:r,initialContext:l,dataViews:e,storage:o,defaultIndexPatternId:i,references:s,adHocDataViews:u},c);return{indexPatterns:p,indexPatternRefs:d,datasourceStates:C({datasourceMap:t,datasourceStates:r,initialContext:l,indexPatternRefs:d,indexPatterns:p,references:s}),visualizationState:I({visualizationMap:n,visualizationState:a,references:s,initialContext:l})}}function I({visualizationMap:e,visualizationState:t,references:n,initialContext:a}){var r,o,i;return null!=t&&t.activeId&&null!==(r=null===(o=e[t.activeId])||void 0===o||null===(i=o.fromPersistableState)||void 0===i?void 0:i.call(o,t.state,n,a))&&void 0!==r?r:t.state}function C({datasourceMap:e,datasourceStates:t,indexPatternRefs:n,indexPatterns:a,references:r,initialContext:o}){const i={};for(const[s,l]of Object.entries(e))if(t[s]){const e=l.initialize(t[s].state||void 0,r,o,n,a);i[s]={isLoading:!1,state:e}}return i}const E=h()((function(e,t,n){const a={};return Object.keys(t).filter((t=>e[t]&&!e[t].isLoading)).forEach((r=>{const o=e[r].state;t[r].getLayers(o).forEach((e=>{a[e]=t[r].getPublicAPI({state:o,layerId:e,indexPatterns:n})}))})),a}));async function M(e,t,n,a){const{state:{visualization:r,datasourceStates:o,adHocDataViews:i,internalReferences:s},visualizationType:l,references:u,title:c,description:d}=n;if(!l)return{ast:null,errors:[{shortMessage:"",longMessage:Object(D.c)()}]};if(!t[l])return{ast:null,errors:[Object(D.e)(l)]};const p=t[l],f=I({visualizationMap:t,visualizationState:{state:r,activeId:l},references:[...u,...s||[]]}),b=Object.fromEntries(Object.entries(o).map((([e,t])=>[e,{isLoading:!1,state:t}]))),{indexPatterns:g,indexPatternRefs:m}=await L({datasourceMap:e,datasourceStates:b,references:u,dataViews:a.dataViews,storage:a.storage,defaultIndexPatternId:a.uiSettings.get("defaultIndex"),adHocDataViews:i},{isFullEditor:!1}),h=C({datasourceMap:e,datasourceStates:b,references:[...u,...s||[]],indexPatterns:g,indexPatternRefs:m}),v=E(h,e,g),y=Object(O.getActiveDatasourceIdFromDoc)(n);if(null==y)return{ast:null,errors:[{shortMessage:"",longMessage:Object(D.a)()}]};const x=A(e[y],h[y],g);if(x)return{ast:null,errors:x};const j=F(e[y],h[y].state,p,f,{datasourceLayers:v,dataViews:{indexPatterns:g}});return{ast:_({title:c,description:d,visualization:p,visualizationState:f,datasourceMap:e,datasourceStates:h,datasourceLayers:v,indexPatterns:g}),errors:j}}function T(e,t,n){if(null==t||null==e)return[];const a=e.checkIntegrity(t.state,n);return a.length?a:[]}const A=(e,t,n)=>{const a=T(e,t,n);if(a.length)return[{shortMessage:"",longMessage:Object(D.b)(a),type:"fixable"}]},F=(e,t,n,a,r)=>{try{const o=t?null==e?void 0:e.getErrorMessages(t,r.dataViews.indexPatterns):void 0,i=a?null==n?void 0:n.getErrorMessages(a,r):void 0;if(null!=o&&o.length||null!=i&&i.length)return[...o||[],...i||[]]}catch(e){if(Object(w.c)(e),e.message)return[{shortMessage:e.message,longMessage:e.message,type:"critical"}]}};var N=n(71);const z=Object(a.memo)((e=>{var t,n,o;const s=Object(g.V)(g.x),u=Object(g.V)(g.p),c=Object(g.V)(g.w),d=Object(g.V)(g.I),m=!u||c[u].isLoading,h=Object(g.U)(),v=Object(a.useMemo)((()=>(e,t)=>{h(Object(g.Q)({updater:e,datasourceId:u,clearStagedPreview:!0})),null!=t&&t.applyImmediately&&h(Object(g.b)())}),[u,h]);Object(a.useEffect)((()=>{u&&null===c[u].state&&S({datasourceMap:e.datasourceMap,visualizationMap:e.visualizationMap,visualizationState:d,datasourceStates:c,dataViews:e.plugins.dataViews,references:void 0,initialContext:void 0,storage:new i.Storage(localStorage),defaultIndexPatternId:e.core.uiSettings.get("defaultIndex")},{isFullEditor:!0}).then((({datasourceStates:e,visualizationState:t,indexPatterns:n,indexPatternRefs:a})=>{h(Object(g.L)({visualization:{...d,state:t},datasourceStates:Object.entries(e).reduce(((e,[t,n])=>({...e,[t]:{...n,isLoading:!1}})),{}),dataViews:Object(O.getInitialDataViewsObject)(n,a)}))}))}),[c,d,u,e.datasourceMap,e.visualizationMap,h,e.plugins.dataViews,e.core.uiSettings]);const y=Object(a.useCallback)((async(t,n,a)=>{const r=await e.indexPatternService.ensureIndexPattern({id:t,cache:e.frame.dataViews.indexPatterns});h(Object(N.a)({dataViews:{indexPatterns:r},datasourceIds:[n],indexPatternId:t,layerId:a}))}),[e.indexPatternService,e.frame.dataViews.indexPatterns,h]),x={...s,dragDropContext:Object(a.useContext)(b.b),state:u?c[u].state:null,setState:v,core:e.core,showNoDataPopover:e.showNoDataPopover,dropOntoWorkspace:e.dropOntoWorkspace,hasSuggestionForField:e.hasSuggestionForField,uiActions:e.plugins.uiActions,onChangeIndexPattern:y,indexPatternService:e.indexPatternService,frame:e.frame,usedIndexPatterns:[...u&&(null===(t=e.datasourceMap[u])||void 0===t?void 0:t.getUsedDataViews(c[u].state))||[],...d.activeId&&(null===(n=e.visualizationMap[d.activeId])||void 0===n||null===(o=n.getUsedDataViews)||void 0===o?void 0:o.call(n,d.state))||[]]};return Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)(p,{query:null==s?void 0:s.query}),u&&!m&&Object(l.jsx)(f.a,{className:"lnsDataPanelWrapper",render:e.datasourceMap[u].renderDataPanel,nativeProps:x}))})),R=Object(a.memo)((({nodes:e})=>Object(l.jsx)(r.a.Fragment,null,e.map((e=>e)))));var B=n(12),V=n.n(B),W=n(30),G=n(36),q=(n(421),n(0)),H=n(28);const U=e=>{const t=q.i18n.translate("xpack.lens.cloneLayerAriaLabel",{defaultMessage:"Duplicate layer"});return{id:"cloneLayerAction",execute:e.execute,displayName:t,isCompatible:Boolean(e.activeVisualization.cloneLayer&&!e.isTextBasedLanguage),icon:"copy","data-test-subj":`lnsLayerClone--${e.layerIndex}`}};var $=n(13),K=n(24);const Y=q.i18n.translate("xpack.lens.layer.confirmModal.clearVis",{defaultMessage:"Clearing this layer removes the visualization and its configurations. "}),X=q.i18n.translate("xpack.lens.layer.confirmModal.deleteVis",{defaultMessage:"Deleting this layer removes the visualization and its configurations. "}),J=q.i18n.translate("xpack.lens.layer.confirmModal.deleteRefLine",{defaultMessage:"Deleting this layer removes the reference lines and their configurations. "}),Q=q.i18n.translate("xpack.lens.layer.confirmModal.deleteAnnotation",{defaultMessage:"Deleting this layer removes the annotations and their configurations. "}),Z=({modalTitle:e,modalDesc:t,skipDeleteModal:n,isDeletable:o,execute:i,closeModal:u,updateLensLocalStorage:c})=>{const[d,p]=Object(a.useState)(n),f=Object(a.useCallback)((({target:e})=>p(e.checked)),[]),b=Object(a.useCallback)((()=>{c({skipDeleteModal:d}),u(),i()}),[u,i,d,c]);return Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)(s.EuiModalHeader,null,Object(l.jsx)(s.EuiModalHeaderTitle,null,e)),Object(l.jsx)(s.EuiModalBody,null,Object(l.jsx)("p",null,t,q.i18n.translate("xpack.lens.layer.confirmModal.cannotUndo",{defaultMessage:"You can't undo this action."}))),Object(l.jsx)(s.EuiModalFooter,null,Object(l.jsx)(s.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(l.jsx)(s.EuiFlexItem,null,Object(l.jsx)(s.EuiCheckbox,{id:"lnsLayerRemoveModalCheckbox",label:q.i18n.translate("xpack.lens.layer.confirmModal.dontAskAgain",{defaultMessage:"Don't ask me again"}),checked:d,onChange:f})),Object(l.jsx)(s.EuiFlexItem,null,Object(l.jsx)(s.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",responsive:!1},Object(l.jsx)(s.EuiFlexItem,{grow:!1},Object(l.jsx)(s.EuiButtonEmpty,{onClick:u},q.i18n.translate("xpack.lens.layer.cancelDelete",{defaultMessage:"Cancel"}))),Object(l.jsx)(s.EuiFlexItem,{grow:!1},Object(l.jsx)(s.EuiButton,{"data-test-subj":"lnsLayerRemoveConfirmButton",onClick:b,color:"danger",iconType:o?"trash":"eraser",fill:!0},o?q.i18n.translate("xpack.lens.layer.confirmDelete",{defaultMessage:"Delete layer"}):q.i18n.translate("xpack.lens.layer.confirmClear",{defaultMessage:"Clear layer"}))))))))},ee=e=>{const{ariaLabel:t,modalTitle:n,modalDesc:a}=((e,t,n)=>{let a;const r=e===K.LayerTypes.DATA?q.i18n.translate("xpack.lens.modalTitle.layerType.data",{defaultMessage:"visualization"}):e===K.LayerTypes.ANNOTATIONS?q.i18n.translate("xpack.lens.modalTitle.layerType.annotation",{defaultMessage:"annotations"}):q.i18n.translate("xpack.lens.modalTitle.layerType.refLines",{defaultMessage:"reference lines"});let o=q.i18n.translate("xpack.lens.modalTitle.title.delete",{defaultMessage:"Delete {layerType} layer?",values:{layerType:r}}),i=X;return t&&!n||(o=q.i18n.translate("xpack.lens.modalTitle.title.clear",{defaultMessage:"Clear {layerType} layer?",values:{layerType:r}}),i=Y),e===K.LayerTypes.ANNOTATIONS?i=Q:e===K.LayerTypes.REFERENCELINE&&(i=J),a=t?n?q.i18n.translate("xpack.lens.resetLayerAriaLabel",{defaultMessage:"Clear layer"}):q.i18n.translate("xpack.lens.deleteLayerAriaLabel",{defaultMessage:"Delete layer"}):q.i18n.translate("xpack.lens.resetVisualizationAriaLabel",{defaultMessage:"Reset visualization"}),{ariaLabel:a,modalTitle:o,modalDesc:i}})(e.layerType||K.LayerTypes.DATA,!!e.activeVisualization.removeLayer,e.isOnlyLayer);return{id:"removeLayerAction",execute:async()=>{var t;const r=new i.Storage(localStorage),o=null!==(t=r.get(k.a))&&void 0!==t?t:{},s=e=>{r.set(k.a,{...o,...e})};if(o.skipDeleteModal)e.execute();else{var u;const t=e.core.overlays.openModal(Object($.toMountPoint)(Object(l.jsx)(Z,{modalTitle:n,isDeletable:!!e.activeVisualization.removeLayer&&!e.isOnlyLayer,modalDesc:a,skipDeleteModal:null!==(u=o[k.a])&&void 0!==u&&u,execute:e.execute,closeModal:()=>t.close(),updateLensLocalStorage:s}),{theme$:e.core.theme.theme$}),{"data-test-subj":"lnsLayerRemoveModal"});await t.onClose}},displayName:t,isCompatible:!0,icon:e.isOnlyLayer?"eraser":"trash",color:"danger","data-test-subj":`lnsLayerRemove--${e.layerIndex}`}},te=({core:e,layerIndex:t,layerType:n,activeVisualization:a,isOnlyLayer:r,isTextBasedLanguage:o,hasLayerSettings:i,openLayerSettings:s,onCloneLayer:l,onRemoveLayer:u})=>{return[(c={hasLayerSettings:i,openLayerSettings:s},{id:"openLayerSettings",displayName:q.i18n.translate("xpack.lens.layerActions.layerSettingsAction",{defaultMessage:"Layer settings"}),execute:c.openLayerSettings,icon:"gear",isCompatible:c.hasLayerSettings,"data-test-subj":"lnsLayerSettings"}),U({execute:l,layerIndex:t,activeVisualization:a,isTextBasedLanguage:o}),ee({execute:u,layerIndex:t,activeVisualization:a,layerType:n,isOnlyLayer:r,core:e})];var c},ne=e=>{const t=`lnsLayerSplitButton--${e.layerIndex}`,[n,r]=Object(a.useState)(!1),o=Object(s.useGeneratedHtmlId)({prefix:t}),i=Object(a.useCallback)((()=>{r(!n)}),[n]),u=Object(a.useCallback)((()=>{n&&r(!1)}),[n]);return Object(l.jsx)(s.EuiOutsideClickDetector,{onOutsideClick:u},Object(l.jsx)(s.EuiPopover,{id:o,button:Object(l.jsx)(s.EuiButtonIcon,{display:"empty",color:"text",size:"s",iconType:"boxesHorizontal","aria-label":q.i18n.translate("xpack.lens.layer.actions.contextMenuAriaLabel",{defaultMessage:"Layer actions"}),onClick:i,"data-test-subj":t}),ownFocus:!0,isOpen:n,closePopover:u,panelPaddingSize:"none",anchorPosition:"downLeft",panelProps:{"data-test-subj":"lnsLayerActionsMenu"}},Object(l.jsx)(s.EuiContextMenuPanel,{size:"s",items:e.actions.map((e=>Object(l.jsx)(s.EuiContextMenuItem,{icon:Object(l.jsx)(s.EuiIcon,{type:e.icon,title:e.displayName,color:e.color}),"data-test-subj":e["data-test-subj"],"aria-label":e.displayName,title:e.displayName,onClick:()=>{u(),e.execute()}},Object(l.jsx)(s.EuiText,{size:"s",color:e.color},e.displayName))))})))},ae=e=>{if(!e.actions.length)return null;if(e.actions.length>1)return Object(l.jsx)(ne,e);const[{displayName:t,execute:n,icon:a,color:r,"data-test-subj":o}]=e.actions;return Object(l.jsx)(s.EuiButtonIcon,{size:"xs",iconType:a,color:r,"data-test-subj":o,"aria-label":t,title:t,onClick:n})};var re=n(70),oe=n(57);function ie({activeVisualization:e,layerConfigProps:t}){if(!e.renderLayerHeader){const n=e.getDescription(t.state);return n?Object(l.jsx)(oe.r,{label:n.label,icon:n.icon}):null}return Object(l.jsx)(f.a,{render:e.renderLayerHeader,nativeProps:t})}function se({isOpen:e,groupLabel:t,handleClose:n,isFullscreen:r,panelRef:o,children:i}){const[u,c]=Object(a.useState)(!1),d=Object(a.useCallback)((()=>{const e=n();return e&&c(!1),e}),[n]);return Object(a.useEffect)((()=>(document.body.classList.toggle("lnsBody--overflowHidden",e),()=>{e&&c(!1),document.body.classList.remove("lnsBody--overflowHidden")})),[e]),e?Object(l.jsx)("div",{ref:o},Object(l.jsx)(s.EuiFocusTrap,{disabled:!u,clickOutsideDisables:!1,onClickOutside:e=>{r||function(e){for(let t=e.target;null!==t;t=t.parentElement)if(t.classList.contains(O.DONT_CLOSE_DIMENSION_CONTAINER_ON_CLICK_CLASS)||t.classList.contains("euiBody-hasPortalContent")||"true"===t.getAttribute("data-euiportal"))return!0;return!1}(e)||d()},onEscapeKey:d},Object(l.jsx)("div",{role:"dialog","aria-labelledby":"lnsDimensionContainerTitle",className:"lnsDimensionContainer euiFlyout",onAnimationEnd:()=>{e&&c(!0)}},Object(l.jsx)(s.EuiFlyoutHeader,{hasBorder:!0,className:"lnsDimensionContainer__header"},Object(l.jsx)(s.EuiFlexGroup,{gutterSize:"m",alignItems:"center",responsive:!1},Object(l.jsx)(s.EuiFlexItem,{grow:!0},Object(l.jsx)(s.EuiTitle,{size:"xs"},Object(l.jsx)("h2",{id:"lnsDimensionContainerTitle",className:"lnsDimensionContainer__headerTitle"},q.i18n.translate("xpack.lens.configure.configurePanelTitle",{defaultMessage:"{groupLabel}",values:{groupLabel:t}})))),Object(l.jsx)(s.EuiFlexItem,{grow:!1},Object(l.jsx)(s.EuiButtonIcon,{color:"text","data-test-subj":"lns-indexPattern-dimensionContainerBack",className:"lnsDimensionContainer__backIcon",onClick:d,iconType:"cross","aria-label":q.i18n.translate("xpack.lens.dimensionContainer.closeConfiguration",{defaultMessage:"Close configuration"})})))),Object(l.jsx)("div",{className:"lnsDimensionContainer__content"},i),Object(l.jsx)(s.EuiFlyoutFooter,{className:"lnsDimensionContainer__footer"},Object(l.jsx)(s.EuiButtonEmpty,{flush:"left",size:"s",iconType:"cross",onClick:d,"data-test-subj":"lns-indexPattern-dimensionContainerClose"},q.i18n.translate("xpack.lens.dimensionContainer.close",{defaultMessage:"Close"})))))):null}function le({panel:e,...t}){return Object(l.jsx)(se,t,e)}n(426),n(431);var ue=n(22),ce=n(64),de=n(88);const pe={ariaLabel:e=>q.i18n.translate("xpack.lens.indexPattern.addColumnAriaLabel",{defaultMessage:"Add or drag-and-drop a field to {groupLabel}",values:{groupLabel:e}}),label:Object(l.jsx)(ue.FormattedMessage,{id:"xpack.lens.configure.emptyConfig",defaultMessage:"Add or drag-and-drop a field"})},fe=({columnId:e,group:t,onClick:n})=>{const{buttonAriaLabel:a,buttonLabel:r}=t.labels||{};return Object(l.jsx)(s.EuiButtonEmpty,{className:"lnsLayerPanel__triggerText",color:"text",size:"s",iconType:"plusInCircleFilled",contentProps:{className:"lnsLayerPanel__triggerTextContent"},"aria-label":a||pe.ariaLabel(t.groupLabel),"data-test-subj":"lns-empty-dimension",onClick:()=>{n(e)}},r||pe.label)},be=({columnId:e,group:t,onClick:n})=>{var a,r;return Object(l.jsx)(s.EuiButtonEmpty,{className:"lnsLayerPanel__triggerText",color:"text",size:"s",iconType:"plusInCircleFilled",contentProps:{className:"lnsLayerPanel__triggerTextContent"},"aria-label":q.i18n.translate("xpack.lens.indexPattern.suggestedValueAriaLabel",{defaultMessage:"Suggested value: {value} for {groupLabel}",values:{value:null===(a=t.suggestedValue)||void 0===a?void 0:a.call(t),groupLabel:t.groupLabel}}),"data-test-subj":"lns-empty-dimension-suggested-value",onClick:()=>{n(e)}},Object(l.jsx)(ue.FormattedMessage,{id:"xpack.lens.configure.suggestedValuee",defaultMessage:"Suggested value: {value}",values:{value:null===(r=t.suggestedValue)||void 0===r?void 0:r.call(t)}}))};function ge({group:e,layerDatasource:t,state:n,onClick:o,onDrop:i,datasourceLayers:s,indexPatterns:u,activeVisualization:c,order:d,target:p}){var f,g;const{dragging:m}=Object(a.useContext)(b.b);let h;var v,y;m&&(t?(Object(O.isDraggedField)(m)||Object(re.e)(m)&&t&&(null==s||null===(v=s[m.layerId])||void 0===v?void 0:v.datasourceId)===(null==s||null===(y=s[p.layerId])||void 0===y?void 0:y.datasourceId))&&(h=t.getDropProps):h=c.getDropProps);const[x,j]=Object(a.useState)(Object(ce.a)());Object(a.useEffect)((()=>{j(Object(ce.a)())}),[e.accessors.length]);const{dropTypes:_,nextLabel:w}=(null===(f=h)||void 0===f?void 0:f({state:n,source:m,target:{...p,columnId:x},indexPatterns:u}))||{dropTypes:[],nextLabel:""},D=!(!_.includes("duplicate_compatible")&&!_.includes("duplicate_incompatible")),k=Object(a.useMemo)((()=>({...p,columnId:x,id:x,humanData:{...p.humanData,nextLabel:w||"",canDuplicate:D}})),[x,p,w,D]),P=r.a.useCallback(((e,t)=>i(e,k,t)),[k,i]),L={columnId:k.columnId,onClick:o,group:e};return Object(l.jsx)("div",{className:"lnsLayerPanel__dimensionContainer","data-test-subj":e.dataTestSubj},Object(l.jsx)(b.c,{getAdditionalClassesOnDroppable:de.a,value:k,order:d,onDrop:P,dropTypes:_,getCustomDropTarget:de.c},Object(l.jsx)("div",{className:"lnsLayerPanel__dimension lnsLayerPanel__dimension--empty"},"number"==typeof(null===(g=e.suggestedValue)||void 0===g?void 0:g.call(e))?Object(l.jsx)(be,L):Object(l.jsx)(fe,L))))}function me({accessorConfig:e,children:t}){let n=null;if(e.triggerIcon&&"none"!==e.triggerIcon){const t={size:"s",className:"lnsLayerPanel__colorIndicator"};n=Object(l.jsx)(s.EuiFlexItem,{grow:!1},"color"===e.triggerIcon&&e.color&&Object(l.jsx)(s.EuiIcon,V()({},t,{color:e.color,type:"stopFilled","aria-label":q.i18n.translate("xpack.lens.editorFrame.colorIndicatorLabel",{defaultMessage:"Color of this dimension: {hex}",values:{hex:e.color}})})),"disabled"===e.triggerIcon&&Object(l.jsx)(s.EuiIcon,V()({},t,{type:"stopSlash",color:"subdued","aria-label":q.i18n.translate("xpack.lens.editorFrame.noColorIndicatorLabel",{defaultMessage:"This dimension does not have an individual color"})})),"invisible"===e.triggerIcon&&Object(l.jsx)(s.EuiIcon,V()({},t,{type:"eyeClosed",color:"subdued","aria-label":q.i18n.translate("xpack.lens.editorFrame.invisibleIndicatorLabel",{defaultMessage:"This dimension is currently not visible in the chart"})})),"aggregate"===e.triggerIcon&&Object(l.jsx)(s.EuiIcon,V()({},t,{type:"fold",color:"subdued","aria-label":q.i18n.translate("xpack.lens.editorFrame.aggregateIndicatorLabel",{defaultMessage:"This dimension is not visible in the chart because all individual values are aggregated into a single value"})})),"colorBy"===e.triggerIcon&&Object(l.jsx)(s.EuiIcon,V()({},t,{type:"brush",color:"text","aria-label":q.i18n.translate("xpack.lens.editorFrame.paletteColorIndicatorLabel",{defaultMessage:"This dimension is using a palette"})})))}return Object(l.jsx)(s.EuiFlexGroup,{gutterSize:"none",alignItems:"center",responsive:!1},n,Object(l.jsx)(s.EuiFlexItem,null,t))}function he({accessorConfig:e}){return"colorBy"===e.triggerIcon&&e.palette?Object(l.jsx)("div",{className:"lnsLayerPanel__paletteContainer"},Object(l.jsx)(s.EuiColorPaletteDisplay,{className:"lnsLayerPanel__palette",size:"xs",palette:e.palette})):null}const ve=e=>q.i18n.translate("xpack.lens.configure.editConfig",{defaultMessage:"Edit {label} configuration",values:{label:e}});function ye({group:e,children:t,onClick:n,onRemoveClick:a,accessorConfig:o,label:i,invalid:u}){return Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)(s.EuiLink,{className:"lnsLayerPanel__dimensionLink","data-test-subj":"lnsLayerPanel-dimensionLink",onClick:()=>n(o.columnId),"aria-label":ve(i),title:ve(i),color:u||e.invalid?"danger":void 0},Object(l.jsx)(me,{accessorConfig:o},t)),Object(l.jsx)(s.EuiButtonIcon,{className:"lnsLayerPanel__dimensionRemove","data-test-subj":"indexPattern-dimension-remove",iconType:"cross",iconSize:"s",size:"s",color:"danger","aria-label":q.i18n.translate("xpack.lens.indexPattern.removeColumnLabel",{defaultMessage:'Remove configuration from "{groupLabel}"',values:{groupLabel:e.groupLabel}}),title:q.i18n.translate("xpack.lens.indexPattern.removeColumnLabel",{defaultMessage:'Remove configuration from "{groupLabel}"',values:{groupLabel:e.groupLabel}}),onClick:()=>a(o.columnId)}),Object(l.jsx)(he,{accessorConfig:o}))}function xe({order:e,group:t,onDrop:n,activeVisualization:r,onDragStart:o,onDragEnd:i,children:s,state:u,layerDatasource:c,datasourceLayers:d,registerNewButtonRef:p,indexPatterns:f,target:g}){var m;const{dragging:h}=Object(a.useContext)(b.b);let v;var y,x;h&&(c?(Object(O.isDraggedField)(h)||Object(re.e)(h)&&c&&(null==d||null===(y=d[h.layerId])||void 0===y?void 0:y.datasourceId)===(null==d||null===(x=d[g.layerId])||void 0===x?void 0:x.datasourceId))&&(v=c.getDropProps):v=r.getDropProps);const{dropTypes:j,nextLabel:_}=(null===(m=v)||void 0===m?void 0:m({state:u,source:h,target:g,indexPatterns:f}))||{dropTypes:[],nextLabel:""},w=!(!j.includes("replace_duplicate_incompatible")&&!j.includes("replace_duplicate_compatible")),D=!(!j.includes("swap_incompatible")&&!j.includes("swap_compatible")),k=Boolean(j.includes("combine_compatible")||j.includes("field_combine")||j.includes("combine_incompatible")),P=Object(a.useMemo)((()=>({...g,humanData:{...g.humanData,canSwap:D,canDuplicate:w,canCombine:k,nextLabel:_||""}})),[g,_,w,D,k]),L=Object(a.useMemo)((()=>t.accessors.map((e=>({id:e.columnId})))),[t.accessors]),S=Object(a.useCallback)((e=>p(g.columnId,e)),[p,g.columnId]),I=Object(a.useCallback)(((e,t)=>n(e,P,t)),[P,n]);return Object(l.jsx)("div",{ref:S,className:"lnsLayerPanel__dimensionContainer","data-test-subj":t.dataTestSubj},Object(l.jsx)(b.c,{getCustomDropTarget:de.c,getAdditionalClassesOnEnter:de.b,getAdditionalClassesOnDroppable:de.a,order:e,draggable:!0,dragType:Object(re.e)(h)?"move":"copy",dropTypes:j,reorderableGroup:L.length>1?L:void 0,value:P,onDrop:I,onDragStart:()=>o(),onDragEnd:()=>i()},s))}function je(e){const[t,n]=Object(a.useState)(null),[r,o]=Object(a.useState)({});Object(a.useEffect)((()=>{const e=t&&r[t];if(e){const t=(e=>{const t="button, [href], input, select, textarea, [tabindex]";return e?e.matches(t)?e:e.querySelector(t)||null:null})(e);null==t||t.focus(),n(null)}}),[e,r,t]);const i=Object(a.useCallback)(((e,t)=>{t&&o((n=>({...n,[e]:t})))}),[]),s=Object(a.useCallback)((t=>{if(e.length<=1)return n(t);const a=e.findIndex((e=>e===t));o((e=>{const n={...e};return delete n[t],n}));const r=0===a?e[1]:e[a-1];return n(r)}),[e]);return{setNextFocusedId:n,removeRef:s,registerNewRef:i}}const _e={isNew:!1};function we(e){var t,n,o,i;const[u,c]=Object(a.useState)(_e),[d,p]=Object(a.useState)(!1),[m,h]=Object(a.useState)(!1),{framePublicAPI:v,layerId:y,isOnlyLayer:x,dimensionGroups:j,onRemoveLayer:_,onCloneLayer:w,registerNewLayerRef:O,layerIndex:D,activeVisualization:k,updateVisualization:P,updateDatasource:L,toggleFullscreen:S,updateAll:I,updateDatasourceAsync:C,visualizationState:E,onChangeIndexPattern:M,core:T}=e,A=Object(g.V)(g.w),F=Object(g.V)(g.A),N=Object(g.V)(g.B);Object(a.useEffect)((()=>{c(_e)}),[k.id]);const z=Object(a.useRef)(null),R=Object(a.useRef)(null),B=Object(a.useCallback)((e=>O(y,e)),[y,O]),V={layerId:y,state:e.visualizationState,frame:e.framePublicAPI,dateRange:N,activeData:e.framePublicAPI.activeData},W=null===(t=v.datasourceLayers)||void 0===t?void 0:t[y],G=null==W?void 0:W.datasourceId,U=G?null==A||null===(n=A[G])||void 0===n?void 0:n.state:void 0,$=G?e.datasourceMap[G]:void 0,K={state:U,setState:e=>{L(G,e)},layerId:y,frame:e.framePublicAPI,dateRange:N},Y=!$&&k.getUniqueLabels?k.getUniqueLabels(e.visualizationState):null==$||null===(o=$.uniqueLabels)||void 0===o?void 0:o.call($,null==K?void 0:K.state),X=!j.some((e=>e.accessors.length>0)),{activeId:J,activeGroup:Q}=u,Z=j.flatMap((e=>e.accessors.map((e=>e.columnId)))),{setNextFocusedId:ee,removeRef:ne,registerNewRef:oe}=je(Z),ue=Object(a.useMemo)((()=>(t,n,a)=>{if(!a)return;if(!Object(re.e)(n))throw new Error("Drop target should be an operation");ee("reorder"===a||"field_replace"===a||"field_add"===a?t.id:n.columnId);let r=!0;var o,i,s;$&&(r=Boolean(null==$?void 0:$.onDrop({state:U,setState:e=>{L(G,e,!0)},source:t,target:{...n,filterOperations:(null===(o=j.find((({groupId:e})=>e===n.groupId)))||void 0===o?void 0:o.filterOperations)||Boolean},targetLayerDimensionGroups:j,dropType:a,indexPatterns:v.dataViews.indexPatterns}))),r&&(k.onDrop=null===(i=k.onDrop)||void 0===i?void 0:i.bind(k),P(null===(s=k.onDrop||de.d)||void 0===s?void 0:s({prevState:e.visualizationState,frame:v,target:n,source:t,dropType:a,group:j.find((({groupId:e})=>e===n.groupId))},k)),Object(re.e)(t)&&Object(de.e)(t,a)&&e.onRemoveDimension({columnId:t.columnId,layerId:t.layerId}))}),[$,ee,U,j,v,L,G,k,P,e]),ce=Boolean(J),pe=Object(a.useCallback)(((t,{isDimensionComplete:n=!0,forceRender:a=!1}={})=>{Q&&J&&(Z.includes(J)?n?a?L(G,t):C(G,t):(e.updateDatasource(G,t),e.onRemoveDimension({layerId:y,columnId:J})):n?(I(G,t,k.setDimension({layerId:y,groupId:Q.groupId,columnId:J,prevState:E,frame:v})),c({...u,isNew:!1})):a?L(G,t):C(G,t))}),[u,Q,J,k,G,y,I,C,E,v]),{dataViews:fe}=e.framePublicAPI,[be]=Object.values(v.datasourceLayers),me=Boolean(null==be?void 0:be.isTextBasedLanguage()),he=Object(a.useMemo)((()=>{var e;return[...(null===(e=k.getSupportedActionsForLayer)||void 0===e?void 0:e.call(k,y,E).map((e=>({...e,execute:()=>{var t;P(null===(t=k.onLayerAction)||void 0===t?void 0:t.call(k,y,e.id,E))}}))))||[],...te({layerId:y,activeVisualization:k,visualizationState:E,core:T,layerIndex:D,layerType:k.getLayerType(y,E),isOnlyLayer:x,isTextBasedLanguage:me,hasLayerSettings:Boolean(k.renderLayerSettings||(null==$?void 0:$.renderLayerSettings)&&!1),openLayerSettings:()=>p(!0),onCloneLayer:w,onRemoveLayer:()=>_(y)})].filter((e=>e.isCompatible))}),[k,T,x,me,$,y,D,w,_,P,E]);return Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)("section",{tabIndex:-1,ref:B,className:"lnsLayerPanel"},Object(l.jsx)(s.EuiPanel,{"data-test-subj":`lns-layerPanel-${D}`,paddingSize:"none"},Object(l.jsx)("header",{className:"lnsLayerPanel__layerHeader"},Object(l.jsx)(s.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"center"},Object(l.jsx)(s.EuiFlexItem,{grow:!0,className:"lnsLayerPanel__layerSettingsWrapper"},Object(l.jsx)(ie,{layerConfigProps:{...V,setState:e.updateVisualization,onChangeIndexPattern:e=>M({indexPatternId:e,layerId:y,visualizationId:k.id})},activeVisualization:k})),Object(l.jsx)(s.EuiFlexItem,{grow:!1},Object(l.jsx)(ae,{actions:he,layerIndex:D}))),($||k.renderLayerPanel)&&Object(l.jsx)(s.EuiSpacer,{size:"s"}),$&&Object(l.jsx)(f.a,{render:$.renderLayerPanel,nativeProps:{layerId:y,state:U,activeData:e.framePublicAPI.activeData,dataViews:fe,onChangeIndexPattern:e=>M({indexPatternId:e,layerId:y,datasourceId:G})}}),k.renderLayerPanel&&Object(l.jsx)(f.a,{render:k.renderLayerPanel,nativeProps:{layerId:y,state:E,frame:v,setState:e.updateVisualization,onChangeIndexPattern:e=>M({indexPatternId:e,layerId:y,visualizationId:k.id})}})),j.map(((t,n)=>{var a;let o="";X||(t.requiredMinDimensionCount&&t.requiredMinDimensionCount>t.accessors.length?o=t.requiredMinDimensionCount>1?q.i18n.translate("xpack.lens.editorFrame.requiresTwoOrMoreFieldsWarningLabel",{defaultMessage:"Requires {requiredMinDimensionCount} fields",values:{requiredMinDimensionCount:t.requiredMinDimensionCount}}):q.i18n.translate("xpack.lens.editorFrame.requiresFieldWarningLabel",{defaultMessage:"Requires field"}):t.dimensionsTooMany&&t.dimensionsTooMany>0&&(o=q.i18n.translate("xpack.lens.editorFrame.tooManyDimensionsSingularWarningLabel",{defaultMessage:"Please remove {dimensionsTooMany, plural, one {a dimension} other {{dimensionsTooMany} dimensions}}",values:{dimensionsTooMany:t.dimensionsTooMany}})));const i=!t.requiredMinDimensionCount&&!t.suggestedValue;return Object(l.jsx)(s.EuiFormRow,{className:"lnsLayerPanel__row",fullWidth:!0,label:Object(l.jsx)(r.a.Fragment,null,t.groupLabel,t.groupTooltip&&Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)(s.EuiIconTip,{color:"subdued",content:t.groupTooltip,iconProps:{className:"eui-alignTop"},position:"top",size:"s",type:"questionInCircle"}))),labelAppend:i?Object(l.jsx)(s.EuiText,{color:"subdued",size:"xs","data-test-subj":"lnsGroup_optional"},q.i18n.translate("xpack.lens.editorFrame.optionalDimensionLabel",{defaultMessage:"Optional"})):null,labelType:"legend",key:t.groupId,isInvalid:Boolean(o),error:o},Object(l.jsx)(r.a.Fragment,null,t.accessors.length?Object(l.jsx)(b.d,{id:t.groupId,className:"lnsLayerPanel__group"},t.accessors.map(((a,o)=>{var i,s,u,d,p,b;const{columnId:g}=a;return Object(l.jsx)(xe,{activeVisualization:k,registerNewButtonRef:oe,order:[2,D,n,o],target:{id:g,layerId:y,columnId:g,groupId:t.groupId,filterOperations:t.filterOperations,prioritizedOperation:t.prioritizedOperation,indexPatternId:$?$.getUsedDataView(U,y):null===(i=k.getUsedDataView)||void 0===i?void 0:i.call(k,E,y),humanData:{label:null!==(s=null==Y?void 0:Y[g])&&void 0!==s?s:"",groupLabel:t.groupLabel,position:o+1,layerNumber:D+1}},group:t,key:g,state:U,layerDatasource:$,datasourceLayers:v.datasourceLayers,onDragStart:()=>h(!0),onDragEnd:()=>h(!1),onDrop:ue,indexPatterns:fe.indexPatterns},Object(l.jsx)("div",{className:"lnsLayerPanel__dimension"},Object(l.jsx)(ye,{accessorConfig:a,label:null!==(u=null==Y?void 0:Y[a.columnId])&&void 0!==u?u:"",group:t,onClick:e=>{c({isNew:!1,activeGroup:t,activeId:e})},onRemoveClick:t=>{e.onRemoveDimension({columnId:t,layerId:y}),ne(t)},invalid:$&&!(null!=$&&$.isValidColumn(U,fe.indexPatterns,y,g))},$?Object(l.jsx)(f.a,{render:$.renderDimensionTrigger,nativeProps:{...K,columnId:a.columnId,groupId:t.groupId,filterOperations:t.filterOperations,hideTooltip:m,invalid:t.invalid,invalidMessage:t.invalidMessage,indexPatterns:fe.indexPatterns}}):Object(l.jsx)(r.a.Fragment,null,null==k||null===(d=k.renderDimensionTrigger)||void 0===d?void 0:d.call(k,{columnId:g,label:null!==(p=null==Y?void 0:Y[g])&&void 0!==p?p:"",hideTooltip:m,...(null==k||null===(b=k.validateColumn)||void 0===b?void 0:b.call(k,E,{dataViews:fe},y,g,t))||{invalid:!1}})))))}))):null,t.fakeFinalAccessor&&Object(l.jsx)("div",{className:"lnsLayerPanel__dimension lnsDragDrop-isDraggable",css:Object(l.css)("cursor:default!important;border-color:transparent!important;margin-top:",t.accessors.length?8:0,"px!important;background-color:",H.euiThemeVars.euiColorLightShade,"!important;box-shadow:none!important;","")},Object(l.jsx)(s.EuiText,{size:"s",className:"lnsLayerPanel__triggerText","data-test-subj":"lns-fakeDimension",color:"subdued"},Object(l.jsx)("span",{className:"lnsLayerPanel__triggerTextLabel"},t.fakeFinalAccessor.label))),t.supportsMoreColumns?Object(l.jsx)(ge,{activeVisualization:k,order:[2,D,n,t.accessors.length],group:t,target:{layerId:y,groupId:t.groupId,filterOperations:t.filterOperations,prioritizedOperation:t.prioritizedOperation,isNewColumn:!0,isMetricDimension:null==t?void 0:t.isMetricDimension,indexPatternId:$?$.getUsedDataView(U,y):null===(a=k.getUsedDataView)||void 0===a?void 0:a.call(k,E,y),humanData:{groupLabel:t.groupLabel,layerNumber:D+1,position:t.accessors.length+1,label:q.i18n.translate("xpack.lens.indexPattern.emptyDimensionButton",{defaultMessage:"Empty dimension"})}},layerDatasource:$,state:U,datasourceLayers:v.datasourceLayers,onClick:n=>{e.onEmptyDimensionAdd(n,t),c({activeGroup:t,activeId:n,isNew:!t.supportStaticValue&&Boolean($)})},onDrop:ue,indexPatterns:fe.indexPatterns}):null))})))),((null==$?void 0:$.renderLayerSettings)||(null==k?void 0:k.renderLayerSettings))&&Object(l.jsx)(se,{panelRef:e=>R.current=e,isOpen:d,isFullscreen:!1,groupLabel:q.i18n.translate("xpack.lens.editorFrame.layerSettingsTitle",{defaultMessage:"Layer settings"}),handleClose:()=>(p(!1),!0)},Object(l.jsx)("div",{id:y},Object(l.jsx)("div",{className:"lnsIndexPatternDimensionEditor--padded lnsIndexPatternDimensionEditor--collapseNext"},(null==$?void 0:$.renderLayerSettings)&&!1,(null==k?void 0:k.renderLayerSettings)&&Object(l.jsx)(f.a,{render:null==k?void 0:k.renderLayerSettings,nativeProps:{...V,setState:e.updateVisualization,panelRef:R}})))),Object(l.jsx)(le,{panelRef:e=>z.current=e,isOpen:ce,isFullscreen:F,groupLabel:null!==(i=null==Q?void 0:Q.dimensionEditorGroupLabel)&&void 0!==i?i:(null==Q?void 0:Q.groupLabel)||"",handleClose:()=>{if($){if($.canCloseDimensionEditor&&!$.canCloseDimensionEditor(U))return!1;if($.updateStateOnCloseDimension){const t=$.updateStateOnCloseDimension({state:U,layerId:y,columnId:J});t&&e.updateDatasource(G,t)}}return c(_e),F&&S(),!0},panel:Object(l.jsx)(r.a.Fragment,null,Q&&J&&$&&Object(l.jsx)(f.a,{render:$.renderDimensionEditor,nativeProps:{...K,core:e.core,columnId:J,groupId:Q.groupId,hideGrouping:Q.hideGrouping,filterOperations:Q.filterOperations,isMetricDimension:null==Q?void 0:Q.isMetricDimension,dimensionGroups:j,toggleFullscreen:S,isFullscreen:F,setState:pe,supportStaticValue:Boolean(Q.supportStaticValue),paramEditorCustomProps:Q.paramEditorCustomProps,enableFormatSelector:!1!==Q.enableFormatSelector,formatSelectorOptions:Q.formatSelectorOptions,layerType:k.getLayerType(y,E),indexPatterns:fe.indexPatterns,activeData:V.activeData,dataSectionExtra:!F&&!u.isNew&&k.renderDimensionEditorDataExtra&&Object(l.jsx)(f.a,{render:k.renderDimensionEditorDataExtra,nativeProps:{...V,groupId:Q.groupId,accessor:J,datasource:be,setState:e.updateVisualization,addLayer:e.addLayer,removeLayer:e.onRemoveLayer,panelRef:z}})}}),Q&&J&&!F&&!u.isNew&&k.renderDimensionEditor&&(null==Q?void 0:Q.enableDimensionEditor)&&Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)("div",{className:"lnsLayerPanel__styleEditor"},Object(l.jsx)(f.a,{render:k.renderDimensionEditor,nativeProps:{...V,groupId:Q.groupId,accessor:J,datasource:be,setState:e.updateVisualization,addLayer:e.addLayer,removeLayer:e.onRemoveLayer,panelRef:z}})),k.renderDimensionEditorAdditionalSection&&Object(l.jsx)(f.a,{render:k.renderDimensionEditorAdditionalSection,nativeProps:{...V,groupId:Q.groupId,accessor:J,datasource:be,setState:e.updateVisualization,addLayer:e.addLayer,removeLayer:e.onRemoveLayer,panelRef:z}})))}))}var Oe=n(112);const De=Object(a.memo)((function(e){const t=Object(g.V)(g.H),n=t.activeId?e.visualizationMap[t.activeId]:null;return n&&t.state?Object(l.jsx)(ke,V()({},e,{activeVisualization:n})):null}));function ke(e){const{activeVisualization:t,datasourceMap:n,indexPatternService:r}=e,{activeDatasourceId:o,visualization:i,datasourceStates:u,query:c}=Object(g.V)((e=>e.lens)),d=Object(g.U)(),p=t.getLayerIds(i.state),{setNextFocusedId:f,removeRef:b,registerNewRef:m}=je(p),h=Object(a.useMemo)((()=>e=>{d(Object(g.T)({visualizationId:t.id,newState:e}))}),[t,d]),v=Object(a.useMemo)((()=>(e,t,n)=>{e&&d(Object(g.Q)({updater:e=>"function"==typeof t?t(e):t,datasourceId:e,clearStagedPreview:!1,dontSyncLinkedDimensions:n}))}),[d]),y=Object(a.useMemo)((()=>(e,t)=>{setTimeout((()=>{v(e,t)}),0)}),[v]),x=Object(a.useMemo)((()=>(e,t,n)=>{e&&setTimeout((()=>{d(Object(g.S)({updater:a=>{const r="function"==typeof t?t(a.datasourceStates[e].state):t,o="function"==typeof n?n(a.visualization.state):n;return{...a,datasourceStates:{...a.datasourceStates,[e]:{state:r,isLoading:!1}},visualization:{...a.visualization,state:o}}}}))}),0)}),[d]),j=Object(a.useMemo)((()=>()=>{d(Object(g.M)())}),[d]),_=Object(a.useCallback)((a=>{var r;const o=null===(r=e.framePublicAPI.datasourceLayers)||void 0===r?void 0:r[a],i=null==o?void 0:o.datasourceId;if(i){var s;const t=n[i],r=null==u||null===(s=u[i])||void 0===s?void 0:s.state,o=e.uiActions.getTrigger(G.UPDATE_FILTER_REFERENCES_TRIGGER),l=e.uiActions.getAction(G.UPDATE_FILTER_REFERENCES_ACTION);null==l||l.execute({trigger:o,fromDataView:t.getUsedDataView(r,a),usedDataViews:t.getLayers(r).map((e=>t.getUsedDataView(r,e))),defaultDataView:t.getUsedDataView(r)})}d(Object(g.n)({visualizationId:t.id,layerId:a,layerIds:p})),b(a)}),[t.id,n,u,d,p,e.framePublicAPI.datasourceLayers,e.uiActions,b]),w=Object(a.useCallback)((async({indexPatternId:t,datasourceId:n,visualizationId:a,layerId:r})=>{const o=await e.indexPatternService.ensureIndexPattern({id:t,cache:e.framePublicAPI.dataViews.indexPatterns});d(Object(N.a)({indexPatternId:t,datasourceIds:n?[n]:[],visualizationIds:a?[a]:[],layerId:r,dataViews:{indexPatterns:o}}))}),[d,e.framePublicAPI.dataViews.indexPatterns,e.indexPatternService]),D=e=>{const t=Object(ce.a)();d(Object(g.a)({layerId:t,layerType:e})),f(t)},k=c&&Object(W.isOfAggregateQueryType)(c);return Object(l.jsx)(s.EuiForm,{className:"lnsConfigPanel"},p.map(((a,s)=>{const{hidden:u,groups:c}=t.getConfiguration({layerId:a,frame:e.framePublicAPI,state:i.state});return!u&&Object(l.jsx)(we,V()({},e,{dimensionGroups:c,activeVisualization:t,registerNewLayerRef:m,key:a,layerId:a,layerIndex:s,visualizationState:i.state,updateVisualization:h,updateDatasource:v,updateDatasourceAsync:y,onChangeIndexPattern:e=>{var n,a;w(e),(null!==(n=null===(a=t.getLayersToRemoveOnIndexPatternChange)||void 0===a?void 0:a.call(t,i.state))&&void 0!==n?n:[]).forEach((e=>_(e)))},updateAll:x,addLayer:D,isOnlyLayer:"clear"===Object(O.getRemoveOperation)(t,i.state,a,p.length),onEmptyDimensionAdd:(e,{groupId:t})=>{var r;null!=o&&null!==(r=n[o])&&void 0!==r&&r.initializeDimension&&d(Object(g.J)({layerId:a,columnId:e,groupId:t}))},onCloneLayer:()=>{d(Object(g.c)({layerId:a}))},onRemoveLayer:_,onRemoveDimension:t=>{var n;const r=null===(n=e.framePublicAPI.datasourceLayers)||void 0===n?void 0:n[a],o=null==r?void 0:r.datasourceId;d(Object(N.g)({...t,datasourceId:o}))},toggleFullscreen:j,indexPatternService:r}))})),!k&&Object(l.jsx)(Oe.a,{visualization:t,visualizationState:i.state,layersMeta:e.framePublicAPI,onAddLayerClick:e=>D(e)}))}n(436);var Pe=n(23),Le=n.n(Pe);function Se(e){const t=Object(g.V)(g.A);return Object(l.jsx)(s.EuiFlexGroup,{direction:"column",responsive:!1,gutterSize:"none",alignItems:"stretch"},e.bannerMessages?Object(l.jsx)(s.EuiFlexItem,{grow:!1},Object(l.jsx)("aside",{"aria-labelledby":"bannerMessagesId"},Object(l.jsx)(s.EuiScreenReaderOnly,null,Object(l.jsx)("h2",{id:"bannerMessagesId"},q.i18n.translate("xpack.lens.section.bannerMessagesLabel",{defaultMessage:"Deprecation messages"}))),e.bannerMessages)):null,Object(l.jsx)(s.EuiFlexItem,{grow:!0,className:"lnsFrameLayout__wrapper"},Object(l.jsx)(s.EuiPage,{paddingSize:"none",className:Le()("lnsFrameLayout",{"lnsFrameLayout-isFullscreen":t})},Object(l.jsx)(s.EuiPageBody,{restrictWidth:!1,className:"lnsFrameLayout__pageContent","aria-labelledby":"lns_ChartTitle"},Object(l.jsx)("section",{className:Le()("lnsFrameLayout__sidebar lnsFrameLayout__sidebar--left",{}),"aria-labelledby":"dataPanelId"},Object(l.jsx)(s.EuiScreenReaderOnly,null,Object(l.jsx)("h2",{id:"dataPanelId"},q.i18n.translate("xpack.lens.section.dataPanelLabel",{defaultMessage:"Data panel"}))),e.dataPanel),Object(l.jsx)("section",{className:Le()("lnsFrameLayout__pageBody",{"lnsFrameLayout__pageBody-isFullscreen":t}),"aria-labelledby":"workspaceId"},Object(l.jsx)(s.EuiScreenReaderOnly,null,Object(l.jsx)("h2",{id:"workspaceId"},q.i18n.translate("xpack.lens.section.workspaceLabel",{defaultMessage:"Visualization workspace"}))),e.workspacePanel,Object(l.jsx)("div",{className:"lnsFrameLayout__suggestionPanel"},e.suggestionsPanel)),Object(l.jsx)("section",{className:Le()("lnsFrameLayout__sidebar lnsFrameLayout__sidebar--right",{"lnsFrameLayout__sidebar-isFullscreen":t}),"aria-labelledby":"configPanel"},Object(l.jsx)(s.EuiScreenReaderOnly,null,Object(l.jsx)("h2",{id:"configPanel"},q.i18n.translate("xpack.lens.section.configPanelLabel",{defaultMessage:"Config panel"}))),e.configPanel)))))}n(441);var Ie=n(446),Ce=n.n(Ie),Ee=n(91),Me=n(94);const Te=({withLabel:e,ExpressionRendererComponent:t,expression:n,hasError:a})=>{const r=Object(l.jsx)("div",{className:"lnsSuggestionPanel__suggestionIcon"},Object(l.jsx)(s.EuiIconTip,{size:"xl",color:"danger",type:"alert","aria-label":q.i18n.translate("xpack.lens.editorFrame.previewErrorLabel",{defaultMessage:"Preview rendering failed"}),content:q.i18n.translate("xpack.lens.editorFrame.previewErrorLabel",{defaultMessage:"Preview rendering failed"})}));return Object(l.jsx)("div",{className:Le()("lnsSuggestionPanel__chartWrapper",{"lnsSuggestionPanel__chartWrapper--withLabel":e})},!n||a?r:Object(l.jsx)(t,{className:"lnsSuggestionPanel__expressionRenderer",padding:"s",renderMode:"preview",expression:n,debounce:2e3,renderError:()=>r}))},Ae=({preview:e,ExpressionRenderer:t,selected:n,onSelect:a,showTitleAsLabel:r})=>Object(l.jsx)(s.EuiToolTip,{content:e.title},Object(l.jsx)("div",{"data-test-subj":`lnsSuggestion-${Object(v.camelCase)(e.title)}`},Object(l.jsx)(s.EuiPanel,{hasBorder:!0,hasShadow:!1,className:Le()("lnsSuggestionPanel__button",{"lnsSuggestionPanel__button-isSelected":n}),paddingSize:"none","data-test-subj":"lnsSuggestion",onClick:a,"aria-current":!!n,"aria-label":e.title},e.expression||e.error?Object(l.jsx)(Te,{ExpressionRendererComponent:t,expression:e.expression&&Object(x.b)(e.expression),withLabel:Boolean(r),hasError:Boolean(e.error)}):Object(l.jsx)("span",{className:"lnsSuggestionPanel__suggestionIcon"},Object(l.jsx)(s.EuiIcon,{size:"xxl",type:e.icon})),r&&Object(l.jsx)("span",{className:"lnsSuggestionPanel__buttonLabel"},e.title)))),Fe=e=>Object(g.V)(g.A)?null:Object(l.jsx)(Ne,e);function Ne({datasourceMap:e,visualizationMap:t,frame:n,ExpressionRenderer:o}){const i=Object(g.U)(),u=Object(g.V)(g.p),c=Object(g.V)(g.E),d=Object(g.V)(g.w),p=Object(g.V)((e=>Boolean(e.lens.stagedPreview))),f=Object(g.V)(g.u),b=Object(g.V)(g.t),m=Object(g.V)(g.s),[h,v]=Ce()("LENS_SUGGESTIONS_PANEL_HIDDEN",!1),y=Object(a.useCallback)((()=>{v(!h)}),[v,h]),x=T(u?e[u]:null,u?d[u]:null,n.dataViews.indexPatterns),{suggestions:j,currentStateExpression:_,currentStateError:w}=Object(a.useMemo)((()=>{var a;const r=x.length?[]:Object(Ee.a)({datasourceMap:e,datasourceStates:b,visualizationMap:t,activeVisualization:f.activeId?t[f.activeId]:void 0,visualizationState:f.state,activeData:c,dataViews:n.dataViews}).filter((({hide:a,visualizationId:r,visualizationState:o,datasourceState:i,datasourceId:s})=>!a&&null==F(s?e[s]:null,i,t[r],o,{...n,dataViews:n.dataViews,datasourceLayers:E(s?{[s]:{isLoading:!0,state:i}}:{},e,n.dataViews.indexPatterns)}))).slice(0,5).map((a=>({...a,previewExpression:ze(a,t[a.visualizationId],e,b,n)}))),o=F(u?e[u]:null,u&&(null===(a=b[u])||void 0===a?void 0:a.state),f.activeId?t[f.activeId]:null,f.state,n);return{suggestions:r,currentStateExpression:f.state&&f.activeId&&!o?ze({visualizationState:f.state},t[f.activeId],e,b,n):void 0,currentStateError:o}}),[b,f.state,f.activeId,u,e,t,c]),D=Object(g.V)(g.y),k=Object(g.V)(g.D),P=Object(a.useRef)(D);P.current=D;const L=Object(a.useRef)(k);L.current=k;const S=Object(a.useMemo)((()=>e=>Object(l.jsx)(o,V()({},e,{searchContext:P.current,searchSessionId:L.current}))),[o]),[I,C]=Object(a.useState)(-1);if(Object(a.useEffect)((()=>{p||-1===I||C(-1)}),[p]),!u)return null;if(0===j.length)return null;function M(){-1!==I&&(C(-1),i(Object(g.o)()),i(Object(g.b)()))}return Object(l.jsx)("div",{className:"lnsSuggestionPanel"},Object(l.jsx)(s.EuiAccordion,{id:"lensSuggestionsPanel",buttonContent:Object(l.jsx)(s.EuiTitle,{size:"xxs"},Object(l.jsx)("h3",null,Object(l.jsx)(ue.FormattedMessage,{id:"xpack.lens.editorFrame.suggestionPanelTitle",defaultMessage:"Suggestions"}))),forceState:h?"closed":"open",onToggle:y,extraAction:p&&!h&&Object(l.jsx)(s.EuiToolTip,{content:q.i18n.translate("xpack.lens.suggestion.refreshSuggestionTooltip",{defaultMessage:"Refresh the suggestions based on the selected visualization."})},Object(l.jsx)(s.EuiButtonEmpty,{"data-test-subj":"lensSubmitSuggestion",size:"xs",iconType:"refresh",onClick:()=>{i(Object(g.N)())}},q.i18n.translate("xpack.lens.sugegstion.refreshSuggestionLabel",{defaultMessage:"Refresh"})))},Object(l.jsx)("div",{className:"lnsSuggestionPanel__suggestions","data-test-subj":"lnsSuggestionsPanel"},m?Object(l.jsx)(r.a.Fragment,null,f.activeId&&!h&&Object(l.jsx)(Ae,{preview:{error:null!=w,expression:_,icon:t[f.activeId].getDescription(f.state).icon||"empty",title:q.i18n.translate("xpack.lens.suggestions.currentVisLabel",{defaultMessage:"Current visualization"})},ExpressionRenderer:S,onSelect:M,selected:-1===I,showTitleAsLabel:!0}),!h&&j.map(((e,t)=>Object(l.jsx)(Ae,{preview:{expression:e.previewExpression,icon:e.previewIcon,title:e.title},ExpressionRenderer:S,key:t,onSelect:()=>{I===t?M():(C(t),Object(Ee.d)(i,e,{applyImmediately:!0}))},selected:t===I})))):Object(l.jsx)(s.EuiPanel,{hasShadow:!1,className:"lnsSuggestionPanel__applyChangesPrompt",paddingSize:"m"},Object(l.jsx)(s.EuiText,{size:"s",color:"subdued",className:"lnsSuggestionPanel__applyChangesMessage"},Object(l.jsx)("p",null,Object(l.jsx)(ue.FormattedMessage,{id:"xpack.lens.suggestions.applyChangesPrompt",defaultMessage:"Latest changes must be applied to view suggestions."}))),Object(l.jsx)(s.EuiButtonEmpty,{iconType:"checkInCircleFilled",size:"s",className:O.DONT_CLOSE_DIMENSION_CONTAINER_ON_CLICK_CLASS,onClick:()=>i(Object(g.b)()),"data-test-subj":"lnsApplyChanges__suggestions"},Object(l.jsx)(ue.FormattedMessage,{id:"xpack.lens.suggestions.applyChangesLabel",defaultMessage:"Apply changes"}))))))}function ze(e,t,n,a,r){const o=e.datasourceId,i=e.datasourceState,s=function(e,t,n,a,r){if(!t.toPreviewExpression)return null;const o={datasourceLayers:{...r.datasourceLayers}};try{if(e.keptLayerIds&&e.datasourceId&&e.datasourceState){const t=n[e.datasourceId],a=e.datasourceState,o=Object(v.pick)(r.datasourceLayers,e.keptLayerIds);t.getLayers(e.datasourceState).forEach((e=>{o[e]&&(o[e]=t.getPublicAPI({layerId:e,state:a,indexPatterns:r.dataViews.indexPatterns}))}))}const i=j(n,a,r.dataViews.indexPatterns);return t.toPreviewExpression(e.visualizationState,o.datasourceLayers,null!=i?i:void 0)}catch(e){return Object(Me.b)(e),null}}(e,t,n,o?{...a,[o]:{isLoading:!1,state:i}}:a,r);if(s)return"string"==typeof s?Object(x.a)(s):s}var Re=n(120),Be=n(5),Ve=n(60),We=n(122),Ge=n(449),qe=n.n(Ge),He=n(450),Ue=n.n(He);const $e={value:{id:"lnsWorkspace",humanData:{label:q.i18n.translate("xpack.lens.editorFrame.workspaceLabel",{defaultMessage:"Workspace"})}},order:[1,0,0,0]},Ke={type:"application",child:{type:"lens"}},Ye=r.a.memo((function(e){const{getSuggestionForField:t,...n}=e,r=Object(a.useContext)(b.b),o=Object(a.useMemo)((()=>r.dragging&&t(r.dragging)),[r.dragging,t]);return Object(l.jsx)(Xe,V()({},n,{suggestionForDraggedField:o}))})),Xe=r.a.memo((function({framePublicAPI:e,visualizationMap:t,datasourceMap:n,core:i,plugins:u,ExpressionRenderer:c,suggestionForDraggedField:d,lensInspector:p}){const f=Object(g.U)(),m=Object(g.V)(g.A),h=Object(g.V)(g.H),v=Object(g.V)(g.p),y=Object(g.V)(g.w),j=Object(g.V)(g.r),w=Object(g.V)(g.s),k=Object(g.V)(g.G),P=Object(g.V)((e=>Object(g.v)(e,n))),L=Object(g.V)(g.D),[S,I]=Object(a.useState)({expressionBuildError:void 0,expandError:!1,expressionToRender:void 0}),C=Object(a.useRef)(),E=Object(a.useRef)(),{dataViews:M}=e;E.current={datasourceMap:n,datasourceStates:y,visualization:h,visualizationMap:t,datasourceLayers:P,dataViews:M};const A=Object(a.useCallback)((()=>{if(E.current){const a=Object.values(E.current.datasourceMap).reduce(((e,t)=>{var n,a,r;return E.current.datasourceStates[t.id]?[...e,...null!==(n=null===(a=t.getRenderEventCounters)||void 0===a?void 0:a.call(t,null===(r=E.current.datasourceStates[t.id])||void 0===r?void 0:r.state))&&void 0!==n?n:[]]:[]}),[]);let r=[];var e,t,n;E.current.visualization.activeId&&(r=null!==(e=null===(t=(n=E.current.visualizationMap[E.current.visualization.activeId]).getRenderEventCounters)||void 0===t?void 0:t.call(n,E.current.visualization.state))&&void 0!==e?e:[]);const i=["vis_editor",...a,...r];Object.values(E.current.dataViews.indexPatterns||{}).filter((e=>!e.isPersisted)).forEach((()=>{i.push("ad_hoc_data_view")})),Object(o.d)(i)}}),[]),z=Object(a.useCallback)(((e,t)=>{if(E.current){var n;const[e]=Object.keys(E.current.datasourceLayers),a=Object.values(E.current.datasourceMap)[0],r=Object.values(E.current.datasourceStates)[0].state;let o=[];null!=t&&t.requests&&(o=Object(O.getSearchWarningMessages)(t.requests,a,r,{searchService:u.data.search})),f(Object(g.l)({activeData:t&&t.tables?Object.entries(null===(n=t.tables)||void 0===n?void 0:n.tables).reduce(((t,[n,a],r,o)=>({...t,[1===o.length?e:n]:a})),{}):void 0,requestWarnings:o}))}}),[f,u.data.search]),R=j||!C.current||k,B=h.activeId?t[h.activeId]:null,V=T(v?n[v]:null,v?y[v]:null,M.indexPatterns),W=V.length?[{shortMessage:"",longMessage:q.i18n.translate("xpack.lens.indexPattern.missingDataView",{defaultMessage:"The {count, plural, one {data view} other {data views}} ({count, plural, one {id} other {ids}}: {indexpatterns}) cannot be found",values:{count:V.length,indexpatterns:V.join(", ")}})}]:[],G=h.activeId&&!B,H=Object(a.useMemo)((()=>{var t;return F(v?n[v]:null,v&&(null===(t=y[v])||void 0===t?void 0:t.state),B,h.state,e)}),[B,h.state,v,n,y]),U=Object(a.useMemo)((()=>{if(!(null!=H&&H.length||W.length||G))try{const e=_({visualization:B,visualizationState:h.state,datasourceMap:n,datasourceStates:y,datasourceLayers:P,indexPatterns:M.indexPatterns,searchSessionId:L});return e?Object(x.b)(e):null}catch(e){const t=null==B?void 0:B.getErrorMessages(h.state),n={shortMessage:q.i18n.translate("xpack.lens.editorFrame.buildExpressionError",{defaultMessage:"An unexpected error occurred while preparing the chart"}),longMessage:e.toString()};I((e=>({...e,expressionBuildError:null!=t?t:[n]})))}G&&I((e=>({...e,expressionBuildError:[Object(D.e)(h.activeId)]})))}),[null==H?void 0:H.length,W.length,G,B,h.state,h.activeId,n,y,P,M.indexPatterns,L]);Object(a.useEffect)((()=>{f(Object(g.K)(Boolean(U)))}),[U,f]),Object(a.useEffect)((()=>{j||f(Object(N.i)(U===S.expressionToRender))})),Object(a.useEffect)((()=>{R&&I((e=>({...e,expressionToRender:U})))}),[U,R]);const $=Boolean(S.expressionToRender);Object(a.useEffect)((()=>{!$&&null!==S.expressionToRender||C.current||(C.current=!0)}),[$,S.expressionToRender]);const K=Object(a.useCallback)((e=>{u.uiActions&&(Object(re.a)(e)&&u.uiActions.getTrigger(Be.VIS_EVENT_TO_TRIGGER[e.name]).exec({data:{...e.data,timeFieldName:Object(O.inferTimeField)(u.data.datatableUtilities,e.data)}}),Object(re.c)(e)&&u.uiActions.getTrigger(Be.VIS_EVENT_TO_TRIGGER[e.name]).exec({data:{...e.data,timeFieldName:Object(O.inferTimeField)(u.data.datatableUtilities,e.data)}}),Object(re.b)(e)&&null!=B&&B.onEditAction&&f(Object(g.e)({visualizationId:B.id,event:e})))}),[u.data.datatableUtilities,u.uiActions,B,f]),Y=Object(a.useCallback)((async e=>!!u.uiActions&&!!Object(re.c)(e)&&(await u.uiActions.getTriggerCompatibleActions(Be.VIS_EVENT_TO_TRIGGER[e.name],e)).length>0),[u.uiActions]);Object(a.useEffect)((()=>{$&&S.expressionBuildError&&I((e=>({...e,expressionBuildError:void 0})))}),[$,S.expressionBuildError]);const X=Object(a.useCallback)((()=>{d&&(Object(o.d)("drop_onto_workspace"),Object(Ee.d)(f,d,{clearStagedPreview:!0}))}),[d,f]),J=i.uiSettings.get("theme:darkMode"),Q=()=>Object(l.jsx)(s.EuiText,{className:Le()("lnsWorkspacePanel__emptyContent"),textAlign:"center","data-test-subj":"workspace-drag-drop-prompt",size:"s"},Object(l.jsx)("div",null,Object(l.jsx)(Ve.a,{"aria-hidden":!0,className:Le()("lnsWorkspacePanel__promptIllustration","lnsWorkspacePanel__dropIllustration")}),Object(l.jsx)("h2",null,Object(l.jsx)("strong",null,$?q.i18n.translate("xpack.lens.editorFrame.emptyWorkspaceSimple",{defaultMessage:"Drop field here"}):q.i18n.translate("xpack.lens.editorFrame.emptyWorkspace",{defaultMessage:"Drop some fields here to start"}))),!$&&Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)(s.EuiTextColor,{color:"subdued",component:"div"},Object(l.jsx)("p",null,q.i18n.translate("xpack.lens.editorFrame.emptyWorkspaceHeading",{defaultMessage:"Lens is the recommended editor for creating visualizations"}))),Object(l.jsx)("p",{className:"lnsWorkspacePanel__actions"},Object(l.jsx)(s.EuiLink,{href:"https://www.elastic.co/products/kibana/feedback",target:"_blank",external:!0},q.i18n.translate("xpack.lens.editorFrame.goToForums",{defaultMessage:"Make requests and give feedback"})))))),Z=()=>{const e=q.i18n.translate("xpack.lens.editorFrame.applyChanges",{defaultMessage:"Apply changes"});return Object(l.jsx)(s.EuiText,{className:Le()("lnsWorkspacePanel__emptyContent"),textAlign:"center","data-test-subj":"workspace-apply-changes-prompt",size:"s"},Object(l.jsx)("div",null,Object(l.jsx)("img",{"aria-hidden":!0,src:J?qe.a:Ue.a,alt:e,className:"lnsWorkspacePanel__promptIllustration"}),Object(l.jsx)("h2",null,Object(l.jsx)("strong",null,q.i18n.translate("xpack.lens.editorFrame.applyChangesWorkspacePrompt",{defaultMessage:"Apply changes to render visualization"}))),Object(l.jsx)("p",{className:"lnsWorkspacePanel__actions"},Object(l.jsx)(s.EuiButtonEmpty,{size:"s",className:O.DONT_CLOSE_DIMENSION_CONTAINER_ON_CLICK_CLASS,iconType:"checkInCircleFilled",onClick:()=>f(Object(g.b)()),"data-test-subj":"lnsApplyChanges__workspace"},e))))},ee=()=>Object(l.jsx)(Je,{expression:S.expressionToRender,framePublicAPI:e,lensInspector:p,onEvent:K,hasCompatibleActions:Y,setLocalState:I,localState:{...S,configurationValidationError:H,missingRefsErrors:W},ExpressionRendererComponent:c,core:i,activeDatasourceId:v,onRender$:A,onData$:z}),te=Object(a.useContext)(b.b);return Object(l.jsx)(We.b,{framePublicAPI:e,visualizationState:h.state,visualizationId:h.activeId,datasourceStates:y,datasourceMap:n,visualizationMap:t,isFullscreen:m,lensInspector:p},(()=>{var e;const t=v&&null!==(e=n[v])&&void 0!==e&&e.getCustomWorkspaceRenderer&&te.dragging?n[v].getCustomWorkspaceRenderer(y[v].state,te.dragging,M.indexPatterns):void 0;if(t)return t();const a=null!==S.expressionToRender?ee:w?Q:Z;return Object(l.jsx)(b.c,{className:Le()("lnsWorkspacePanel__dragDrop",{"lnsWorkspacePanel__dragDrop--fullscreen":m}),dataTestSubj:"lnsWorkspace",draggable:!1,dropTypes:d?["field_add"]:void 0,onDrop:X,value:$e.value,order:$e.order},Object(l.jsx)("div",{className:"lnsWorkspacePanelWrapper__pageContentBody"},a()))})())})),Je=({expression:e,framePublicAPI:t,lensInspector:n,onEvent:o,hasCompatibleActions:i,setLocalState:u,localState:c,ExpressionRendererComponent:d,core:p,activeDatasourceId:f,onRender$:b,onData$:m})=>{var h,v,y;const x=Object(g.V)(g.x),j=Object(a.useMemo)((()=>({query:x.query,timeRange:{from:x.dateRange.fromDate,to:x.dateRange.toDate},filters:x.filters,disableShardWarnings:!0})),[x]),_=Object(g.V)(g.D),w=Object(g.U)();function O(e){return e&&e.fixAction&&f&&Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)(s.EuiButton,{"data-test-subj":"errorFixAction",onClick:async()=>{var n;const a=await(null===(n=e.fixAction)||void 0===n?void 0:n.newState({...t,...x}));w(Object(g.Q)({updater:a,datasourceId:f}))}},e.fixAction.label),Object(l.jsx)(s.EuiSpacer,null))}if(null!==(h=c.configurationValidationError)&&void 0!==h&&h.length){var k;let e=null,t=null;return c.configurationValidationError.length>1&&(c.expandError?e=c.configurationValidationError.slice(1).map((e=>Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)("p",{key:e.shortMessage,className:"eui-textBreakWord","data-test-subj":"configuration-failure-error"},e.longMessage),O(e)))):t=Object(l.jsx)(s.EuiButtonEmpty,{onClick:()=>{u((e=>({...e,expandError:!e.expandError})))},"data-test-subj":"configuration-failure-more-errors"},q.i18n.translate("xpack.lens.editorFrame.configurationFailureMoreErrors",{defaultMessage:" +{errors} {errors, plural, one {error} other {errors}}",values:{errors:c.configurationValidationError.length-1}}))),Object(l.jsx)(s.EuiFlexGroup,{"data-test-subj":"configuration-failure"},Object(l.jsx)(s.EuiFlexItem,null,Object(l.jsx)(s.EuiEmptyPrompt,{actions:t,body:Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)("p",{className:"eui-textBreakWord","data-test-subj":"configuration-failure-error"},c.configurationValidationError[0].longMessage),O(null===(k=c.configurationValidationError)||void 0===k?void 0:k[0]),e),iconColor:"danger",iconType:"alert"})))}if(null!==(v=c.missingRefsErrors)&&void 0!==v&&v.length){const{management:e}=p.application.capabilities.navLinks,t=p.application.capabilities.management.kibana.indexPatterns;return Object(l.jsx)(s.EuiFlexGroup,{"data-test-subj":"configuration-failure"},Object(l.jsx)(s.EuiFlexItem,null,Object(l.jsx)(s.EuiEmptyPrompt,{actions:e&&t?Object(l.jsx)(Re.a,{coreStart:p},Object(l.jsx)("a",{href:p.application.getUrlForApp("management",{path:"/kibana/indexPatterns/create"}),"data-test-subj":"configuration-failure-reconfigure-indexpatterns"},q.i18n.translate("xpack.lens.editorFrame.dataViewReconfigure",{defaultMessage:"Recreate it in the data view management page"}))):null,body:Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)("p",{className:"eui-textBreakWord","data-test-subj":"missing-refs-failure"},Object(l.jsx)(ue.FormattedMessage,{id:"xpack.lens.editorFrame.dataViewNotFound",defaultMessage:"Data view not found"})),Object(l.jsx)("p",{className:"eui-textBreakWord lnsSelectableErrorMessage"},c.missingRefsErrors[0].longMessage)),iconColor:"danger",iconType:"alert"})))}if(null!==(y=c.expressionBuildError)&&void 0!==y&&y.length){const e=c.expressionBuildError[0];return Object(l.jsx)(s.EuiFlexGroup,null,Object(l.jsx)(s.EuiFlexItem,null,Object(l.jsx)(s.EuiEmptyPrompt,{body:Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)("p",{"data-test-subj":"expression-failure"},Object(l.jsx)(ue.FormattedMessage,{id:"xpack.lens.editorFrame.expressionFailure",defaultMessage:"An error occurred in the expression"})),Object(l.jsx)("p",null,e.longMessage)),iconColor:"danger",iconType:"alert"})))}return Object(l.jsx)("div",{className:"lnsExpressionRenderer"},Object(l.jsx)(d,{className:"lnsExpressionRenderer__component",padding:"m",expression:e,searchContext:j,searchSessionId:_,onEvent:o,hasCompatibleActions:i,onData$:m,onRender$:b,inspectorAdapters:n.adapters,executionContext:Ke,renderMode:"edit",renderError:(e,t)=>{const n=Object(D.d)(t),a=n.length?n:e?[e]:[];return Object(l.jsx)(s.EuiFlexGroup,null,Object(l.jsx)(s.EuiFlexItem,null,Object(l.jsx)(s.EuiEmptyPrompt,{actions:a.length&&!c.expandError?Object(l.jsx)(s.EuiButtonEmpty,{onClick:()=>{u((e=>({...e,expandError:!e.expandError})))}},q.i18n.translate("xpack.lens.editorFrame.expandRenderingErrorButton",{defaultMessage:"Show details of error"})):null,body:Object(l.jsx)(r.a.Fragment,null,Object(l.jsx)("p",{"data-test-subj":"expression-failure"},Object(l.jsx)(ue.FormattedMessage,{id:"xpack.lens.editorFrame.dataFailure",defaultMessage:"An error occurred when loading data."})),c.expandError?a.map((e=>Object(l.jsx)("p",{className:"eui-textBreakWord",key:e},e))):null),iconColor:"danger",iconType:"alert"})))}}))};function Qe(e){const{datasourceMap:t,visualizationMap:n}=e,r=Object(g.U)(),i=Object(g.V)(g.p),s=Object(g.V)(g.w),u=Object(g.V)(g.H),c=Object(g.V)(g.q),d=!!u.state,p=Boolean(u.activeId&&e.visualizationMap[u.activeId]),f=Object(g.V)((e=>Object(g.z)(e,t))),m=Object(a.useRef)();m.current=e=>{if(e&&i)return Object(Ee.b)(f.datasourceLayers,u,s,n,t[i],e,f.dataViews)};const h=Object(a.useCallback)((e=>void 0!==m.current(e)),[m]),v=Object(a.useCallback)((e=>{const t=m.current(e);t&&(Object(o.d)("drop_onto_workspace"),Object(Ee.d)(r,t,{clearStagedPreview:!0}))}),[m,r]),y=Object(a.useCallback)((e=>{Object(w.c)(e)}),[]),x=Object(a.useMemo)((()=>{var e,n;if(i)return null===(e=(n=t[i]).getDeprecationMessages)||void 0===e?void 0:e.call(n,s[i].state)}),[i,t,s]);return Object(l.jsx)(b.e,null,Object(l.jsx)(Se,{bannerMessages:x?Object(l.jsx)(w.a,{onError:y},Object(l.jsx)(R,{nodes:x})):void 0,dataPanel:Object(l.jsx)(w.a,{onError:y},Object(l.jsx)(z,{core:e.core,plugins:e.plugins,datasourceMap:t,visualizationMap:n,showNoDataPopover:e.showNoDataPopover,dropOntoWorkspace:v,hasSuggestionForField:h,indexPatternService:e.indexPatternService,frame:f})),configPanel:c&&Object(l.jsx)(w.a,{onError:y},Object(l.jsx)(De,{core:e.core,datasourceMap:t,visualizationMap:n,framePublicAPI:f,uiActions:e.plugins.uiActions,indexPatternService:e.indexPatternService})),workspacePanel:c&&d&&Object(l.jsx)(w.a,{onError:y},Object(l.jsx)(Ye,{core:e.core,plugins:e.plugins,ExpressionRenderer:e.ExpressionRenderer,lensInspector:e.lensInspector,datasourceMap:t,visualizationMap:n,framePublicAPI:f,getSuggestionForField:m.current})),suggestionsPanel:p&&c&&Object(l.jsx)(w.a,{onError:y},Object(l.jsx)(Fe,{ExpressionRenderer:e.ExpressionRenderer,datasourceMap:t,visualizationMap:n,frame:f}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return x}));var a=n(97),r=n.n(a);function o(e){return"object"===r()(null==e?void 0:e.node)}function i(e){return"object"===r()(e)&&"expression"===(null==e?void 0:e.type)}var s=n(420).parse;function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expression";try{return s(String(e),{startRule:t})}catch(e){throw new Error("Unable to parse expression: ".concat(e.message))}}function u(e){if(null==e)return"null";if("object"===r()(e)){if(!e.type)throw new Error("Objects must have a type property");return e.type}return r()(e)}var c=n(117),d=n.n(c),p=n(74),f=n.n(p),b=n(21);function g(e,t){var n="",a=0;return function(e,t){var n=[[s(e,{addMeta:!0}),t]],a=[];function r(e,t){Object(b.zip)(e.node.chain,t.chain).forEach((function(e){var t=f()(e,2),n=t[0],s=t[1];if(!n||!s||(null==n?void 0:n.node.function)!==(null==s?void 0:s.function))throw Error("Expression changes are not supported.");!function(e,t){if(Object(b.xor)(Object.keys(e.node.arguments),Object.keys(t.arguments)).length)throw Error("Function changes are not supported.");Object(b.forEach)(e.node.arguments,(function(e,n){!function(e,t){if(e.length!==t.length)throw Error("Arguments changes are not supported.");Object(b.zip)(e,t).forEach((function(e){var t=f()(e,2);return function(e,t){o(e)&&i(t)?r(e,t):e.node!==t&&a.push({type:"value",source:e,target:t})}(t[0],t[1])}))}(e,t.arguments[n])}))}(n,s)}))}for(;n.length;)r.apply(void 0,d()(n.shift()));return a}(e,t).sort((function(e,t){var n=e.source,a=t.source;return n.start-a.start})).forEach((function(t){var r;if("value"!==(null==(r=t)?void 0:r.type))throw new Error("Cannot apply patch for the change.");!function(t){if(o(t.source))throw new Error("Patching sub-expressions is not supported.");n+="".concat(e.substring(a,t.source.start)).concat(x(t.target,"argument")),a=t.source.end}(t)})),n+=e.substring(a)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=u(e);function r(e,t){return null==e||"_"===e?t:"".concat(e,"=").concat(t)}if("string"===a){var o=e.replace(/[\\"]/g,"\\$&");return r(t,'"'.concat(o,'"'))}if("boolean"===a||"null"===a||"number"===a)return r(t,"".concat(e));if("expression"===a)return r(t,"{".concat(y(e.chain,n+1),"}"));throw new Error("Invalid argument type in AST: ".concat(a))}function h(e){var t=e.arguments,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==t||"object"!==r()(t)||Array.isArray(t))throw new Error("Arguments can only be an object");var a=Object.keys(t),o=80;return a.map((function(e){return t[e].reduce((function(t,a){var r=m(a,e,n),i=t.split("\n").pop().length;return 0===n&&i+r.length>o?"".concat(t,"\n  ").concat(r):i>0?"".concat(t," ").concat(r):r}),"")}))}function v(e,t){var n;return"".concat(e," ").concat(null!==(n=null==t?void 0:t.join(" "))&&void 0!==n?n:"").trim()}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)throw new Error("Expressions must contain a chain");var n=t>0?" | ":"\n| ";return e.map((function(e){if("function"===u(e)){var n=e.function;if(!n)throw new Error("Functions must have a function name");return v(n,h(e,t))}})).join(n)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expression",n="string"==typeof t?{type:t}:t,a=n.type,r=n.source;if(r&&i(e))return g(r,e);if("argument"===a)return m(e);var o=u(e);if("expression"===o){var s=e,l=s.chain;if(!Array.isArray(l))throw new Error("Expressions must contain a chain");return y(l)}if("function"===o){var c=e,d=c.function,p=h(e);return v(d,p)}throw new Error("Expression must be an expression or argument function")}n(73),n(146),n(145),n(1)},function(e,t,n){"use strict";n.r(t),n.d(t,"SaveModalContainer",(function(){return y})),n.d(t,"runSaveLensVisualization",(function(){return x})),n.d(t,"removePinnedFilters",(function(){return j}));var a=n(8),r=n.n(a),o=n(0),i=n(30),s=n(12),l=n.n(s),u=n(53),c=n(2);const d=({initialTags:e,onSave:t,savedObjectsTagging:n,options:o,...i})=>{const[s,d]=Object(a.useState)(e),p=Object(a.useMemo)((()=>n?Object(c.jsx)(n.ui.components.SavedObjectSaveModalTagSelector,{initialSelection:e,onTagsSelected:d}):void 0),[n,e]),f="function"==typeof o?e=>Object(c.jsx)(r.a.Fragment,null,p,o(e)):Object(c.jsx)(r.a.Fragment,null,p,o),b=Object(a.useCallback)((e=>{t({...e,newTags:s})}),[t,s]);return Object(c.jsx)(u.SavedObjectSaveModalOrigin,l()({},i,{onSave:b,options:f}))};var p=n(54);const f=Object(p.withSuspense)(p.LazySavedObjectSaveModalDashboard),b=({initialTags:e,onSave:t,savedObjectsTagging:n,...o})=>{const[i,s]=Object(a.useState)(e),u=Object(a.useMemo)((()=>n?Object(c.jsx)(n.ui.components.SavedObjectSaveModalTagSelector,{initialSelection:e,onTagsSelected:s}):void 0),[n,e]),d=Object(c.jsx)(r.a.Fragment,null,u),p=Object(a.useCallback)((e=>{t({...e,returnToOrigin:!1,newTags:i})}),[t,i]);return Object(c.jsx)(f,l()({},o,{onSave:p,tagOptions:d}))},g=e=>{const{originatingApp:t,savingToLibraryPermitted:n,savedObjectsTagging:a,tagsIds:r,savedObjectId:i,title:s,description:l,allowByValueEmbeddables:u,returnToOriginSwitchLabel:p,getAppNameFromId:f,onClose:g,onSave:m}=e;return t||!u?Object(c.jsx)(d,{savedObjectsTagging:a,initialTags:r,originatingApp:t,onClose:g,onSave:e=>m(e,{saveToLibrary:!0}),getAppNameFromId:f,documentInfo:{id:i,title:s||"",description:l||""},returnToOriginSwitchLabel:p,objectType:o.i18n.translate("xpack.lens.app.saveModalType",{defaultMessage:"Lens visualization"}),"data-test-subj":"lnsApp_saveModalOrigin"}):Object(c.jsx)(b,{savedObjectsTagging:a,initialTags:r,canSaveByReference:Boolean(n),onSave:e=>{const t=Boolean(e.addToLibrary);m(e,{saveToLibrary:t})},onClose:g,documentInfo:{id:n?i:void 0,title:s||"",description:l||""},objectType:o.i18n.translate("xpack.lens.app.saveModalType",{defaultMessage:"Lens visualization"}),"data-test-subj":"lnsApp_saveModalDashboard"})};var m=n(163),h=n(61),v=n(157);function y({returnToOriginSwitchLabel:e,onClose:t,onSave:n,runSave:r,persistedDoc:o,originatingApp:i,initialInput:s,redirectTo:l,redirectToOrigin:u,getAppNameFromId:d=(()=>{}),isSaveable:p=!0,lastKnownDoc:f,lensServices:b}){let m,h,y="";const[j,_]=Object(a.useState)(f);j&&(y=j.title,m=j.description,h=j.savedObjectId);const{attributeService:w,savedObjectsTagging:O,application:D,dashboardFeatureFlag:k}=b;Object(a.useEffect)((()=>{_(f)}),[f]),Object(a.useEffect)((()=>{let e=!0;return s&&Object(v.a)({initialInput:s,lensServices:b}).then((t=>{null!=t&&t.doc&&e&&_(t.doc)})),()=>{e=!1}}),[s,b]);const P=o&&O?O.ui.getTagIdsFromReferences(o.references):[],L=Boolean(p&&D.capabilities.visualize.save);return Object(c.jsx)(g,{originatingApp:i,savingToLibraryPermitted:L,allowByValueEmbeddables:null==k?void 0:k.allowByValueEmbeddables,savedObjectsTagging:O,tagsIds:P,onSave:(e,a)=>{((e,a)=>{r?r(e,a):w&&j&&x({...b,lastKnownDoc:j,initialInput:s,attributeService:w,redirectTo:l,redirectToOrigin:u,originatingApp:i,getIsByValueMode:()=>!1,onAppLeave:()=>{}},e,a).then((()=>{null==n||n(),t()}))})(e,a)},onClose:t,getAppNameFromId:d,title:y,description:m,savedObjectId:h,returnToOriginSwitchLabel:e})}const x=async(e,t,n)=>{const{chrome:a,initialInput:r,lastKnownDoc:i,persistedDoc:s,savedObjectsClient:l,overlays:u,notifications:c,stateTransfer:d,attributeService:p,savedObjectsTagging:f,getIsByValueMode:b,redirectToOrigin:g,onAppLeave:v,redirectTo:y,dashboardFeatureFlag:x,textBasedLanguageSave:_,switchDatasource:w,application:O}=e;if(!i)return;let D=i.references;if(f){const e=s&&f?f.ui.getTagIdsFromReferences(s.references):[];D=f.ui.updateTagsReferences(D,t.newTags||e)}const k=((e,t,n)=>{const a={...j(e),references:n};return void 0!==t.newDescription&&(a.description=t.newDescription),void 0!==t.newTitle&&(a.title=t.newTitle),a})(i,t,D);b()&&k.state.filters.forEach((e=>{"function"==typeof e.meta.value&&delete e.meta.value}));const P=t.newCopyOnSave?void 0:r,L=null==P?void 0:P.savedObjectId;if(n.saveToLibrary)try{await Object(m.b)({id:L,title:k.title,displayName:o.i18n.translate("xpack.lens.app.saveModalType",{defaultMessage:"Lens visualization"}),lastSavedTitle:i.title,copyOnSave:t.newCopyOnSave,isTitleDuplicateConfirmed:t.isTitleDuplicateConfirmed},t.onTitleDuplicate,{savedObjectsClient:l,overlays:u})}catch(e){throw e}try{const e=await p.wrapAttributes(k,n.saveToLibrary,P);return t.returnToOrigin&&g?(null==v||v((e=>e.default())),void g({input:e,isCopied:t.newCopyOnSave})):t.dashboardId?(null==v||v((e=>e.default())),void(({embeddableInput:e,dashboardFeatureFlag:t,dashboardId:n,stateTransfer:a})=>{if(!t.allowByValueEmbeddables)throw new Error("redirectToDashboard called with by-value embeddables disabled");const r={input:e,type:h.h},o="new"===n?"#/create":`#/view/${n}`;a.navigateToWithEmbeddablePackage("dashboards",{state:r,path:o})})({embeddableInput:e,dashboardId:t.dashboardId,stateTransfer:d,dashboardFeatureFlag:x})):(c.toasts.addSuccess(o.i18n.translate("xpack.lens.app.saveVisualization.successNotificationText",{defaultMessage:"Saved '{visTitle}'",values:{visTitle:k.title}})),p.inputIsRefType(e)&&e.savedObjectId!==L?(a.recentlyAccessed.add(Object(h.m)(e.savedObjectId),k.title,e.savedObjectId),null===(S=d.clearEditorState)||void 0===S||S.call(d,h.a),_?(null==w||w(),O.navigateToApp("lens",{path:"/"})):null==y||y(e.savedObjectId),{isLinkedToOriginatingApp:!1}):{persistedDoc:{...k,...e},isLinkedToOriginatingApp:!1});var S}catch(e){throw console.dir(e),e}};function j(e){var t;if(e)return{...e,state:{...e.state,filters:((null===(t=e.state)||void 0===t?void 0:t.filters)||[]).filter((e=>!Object(i.isFilterPinned)(e)))}}}t.default=y},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(8),r=n.n(a),o=n(25);function i({render:e,nativeProps:t,tag:n,...i}){const s=Object(a.useRef)(),l=Object(a.useRef)();return Object(a.useEffect)((()=>()=>{s.current&&(l.current&&"function"==typeof l.current&&l.current(s.current),Object(o.unmountComponentAtNode)(s.current))}),[]),r.a.createElement(n||"div",{...i,ref:n=>{if(n){s.current=n;const a=e(n,t);a instanceof Promise?a.then((e=>{"function"==typeof e&&(l.current=e)})):"function"==typeof a&&(l.current=a)}}})}},function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var a=n(103),r=n.n(a),o=n(28),i=n(7),s=n(65);function l(e,t,n="euiColorInk",a="euiColorGhost"){const s=t?o.euiDarkVars.euiColorInk:o.euiLightVars[n],l=t?o.euiDarkVars[a]:o.euiLightVars.euiColorGhost,u=t?o.euiDarkVars.euiPageBackgroundColor:o.euiLightVars.euiPageBackgroundColor,c=r()(e).alpha()<1?r.a.blend(u,e,"overlay"):r()(e);return Object(i.isColorDark)(...c.rgb())?l:s}function u(e){if(null!=e&&!Array.isArray(e))return e}function c(e,t,n){var a,r;const o=Object(s.k)(e,(null==t?void 0:t.params)||{},{dataBounds:n,defaultPaletteName:null==t?void 0:t.name});return null!=t&&null!==(a=t.params)&&void 0!==a&&a.reverse&&(null==t||null===(r=t.params)||void 0===r?void 0:r.name)!==s.a?Object(s.l)(o):o}const d=(e,t,n=(e=>e))=>{const a={};if(null!=t)for(const r of e){const e=n(r);a[e]=a[e]||{max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY},t.rows.forEach((t=>{const n=u(t[r]);null!=n&&(a[e].min>n&&(a[e].min=n),a[e].max<n&&(a[e].max=n))})),a[e].max===Number.NEGATIVE_INFINITY&&(a[e]=Object(s.j)())}return a}},function(e,t,n){(function(e){var n;
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */(function(){var a,r,o,i,s,l,u,c,d,p,f,b,g,m,h,v,y,x,j,_,w,O,D,k,P,L,S,I,C,E,M,T,A,F,N,z,R,B,V,W,G,q,H,U,$,K,Y,X,J,Q,Z,ee,te,ne,ae,re,oe,ie,se,le,ue,ce,de,pe,fe,be,ge,me,he,ve,ye,xe,je,_e,we,Oe,De,ke,Pe,Le,Se=[].slice;Oe=function(){var e,t,n,a,r;for(e={},a=0,t=(r="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;a<t;a++)n=r[a],e["[object "+n+"]"]=n.toLowerCase();return function(t){var n;return n=Object.prototype.toString.call(t),e[n]||"object"}}(),Y=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),e<t&&(e=t),e>n&&(e=n),e},De=function(e){return e.length>=3?Array.prototype.slice.call(e):e[0]},w=function(e){var t,n;for(e._clipped=!1,e._unclipped=e.slice(0),t=n=0;n<3;t=++n)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e._clipped||delete e._unclipped,e},i=Math.PI,ye=Math.round,D=Math.cos,I=Math.floor,ae=Math.pow,X=Math.log,je=Math.sin,_e=Math.sqrt,m=Math.atan2,Z=Math.max,g=Math.abs,u=2*i,s=i/3,r=i/180,l=180/i,_=function(){return arguments[0]instanceof a?arguments[0]:function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,arguments,(function(){}))},_.default=_,b=[],null!==e&&null!=e.exports&&(e.exports=_),void 0===(n=function(){return _}.apply(t,[]))||(e.exports=n),_.version="1.4.1",f={},d=[],p=!1,a=function(){function e(){var e,t,n,a,r,o,i,s,l;for(o=this,t=[],s=0,a=arguments.length;s<a;s++)null!=(e=arguments[s])&&t.push(e);if(t.length>1&&(i=t[t.length-1]),null!=f[i])o._rgb=w(f[i](De(t.slice(0,-1))));else{for(p||(d=d.sort((function(e,t){return t.p-e.p})),p=!0),l=0,r=d.length;l<r&&!(i=(n=d[l]).test.apply(n,t));l++);i&&(o._rgb=w(f[i].apply(f,t)))}null==o._rgb&&console.warn("unknown format: "+t),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e}(),_._input=f,
/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
_.brewer=x={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,t;for(e in t=[],x)t.push(x[e.toLowerCase()]=x[e])}(),_.colors=ke={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},q=function(){var e,t,n,a,r,i,s;return a=(t=De(arguments))[0],e=t[1],n=t[2],i=(a+16)/116,r=isNaN(e)?i:i+e/500,s=isNaN(n)?i:i-n/200,i=o.Yn*H(i),r=o.Xn*H(r),s=o.Zn*H(s),[Le(3.2404542*r-1.5371385*i-.4985314*s),Le(-.969266*r+1.8760108*i+.041556*s),n=Le(.0556434*r-.2040259*i+1.0572252*s),t.length>3?t[3]:1]},Le=function(e){return 255*(e<=.00304?12.92*e:1.055*ae(e,1/2.4)-.055)},H=function(e){return e>o.t1?e*e*e:o.t2*(e-o.t0)},o={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},de=function(){var e,t,n,a,r,o,i;return n=(a=De(arguments))[0],t=a[1],e=a[2],o=(r=me(n,t,e))[0],[116*(i=r[1])-16,500*(o-i),200*(i-r[2])]},he=function(e){return(e/=255)<=.04045?e/12.92:ae((e+.055)/1.055,2.4)},Pe=function(e){return e>o.t3?ae(e,1/3):e/o.t2+o.t0},me=function(){var e,t,n,a;return n=(a=De(arguments))[0],t=a[1],e=a[2],n=he(n),t=he(t),e=he(e),[Pe((.4124564*n+.3575761*t+.1804375*e)/o.Xn),Pe((.2126729*n+.7151522*t+.072175*e)/o.Yn),Pe((.0193339*n+.119192*t+.9503041*e)/o.Zn)]},_.lab=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["lab"]),(function(){}))},f.lab=q,a.prototype.lab=function(){return de(this._rgb)},h=function(e){var t,n,a,r,o,i,s,l,u,c,d;return 2===(e=function(){var t,n,a;for(a=[],n=0,t=e.length;n<t;n++)r=e[n],a.push(_(r));return a}()).length?(u=function(){var t,n,a;for(a=[],n=0,t=e.length;n<t;n++)r=e[n],a.push(r.lab());return a}(),o=u[0],i=u[1],t=function(e){var t,n;return n=function(){var n,a;for(a=[],t=n=0;n<=2;t=++n)a.push(o[t]+e*(i[t]-o[t]));return a}(),_.lab.apply(_,n)}):3===e.length?(c=function(){var t,n,a;for(a=[],n=0,t=e.length;n<t;n++)r=e[n],a.push(r.lab());return a}(),o=c[0],i=c[1],s=c[2],t=function(e){var t,n;return n=function(){var n,a;for(a=[],t=n=0;n<=2;t=++n)a.push((1-e)*(1-e)*o[t]+2*(1-e)*e*i[t]+e*e*s[t]);return a}(),_.lab.apply(_,n)}):4===e.length?(d=function(){var t,n,a;for(a=[],n=0,t=e.length;n<t;n++)r=e[n],a.push(r.lab());return a}(),o=d[0],i=d[1],s=d[2],l=d[3],t=function(e){var t,n;return n=function(){var n,a;for(a=[],t=n=0;n<=2;t=++n)a.push((1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*i[t]+3*(1-e)*e*e*s[t]+e*e*e*l[t]);return a}(),_.lab.apply(_,n)}):5===e.length&&(n=h(e.slice(0,3)),a=h(e.slice(2,5)),t=function(e){return e<.5?n(2*e):a(2*(e-.5))}),t},_.bezier=function(e){var t;return(t=h(e)).scale=function(){return _.scale(t)},t},_.cubehelix=function(e,t,n,a,r){var o,i,s;return null==e&&(e=300),null==t&&(t=-1.5),null==n&&(n=1),null==a&&(a=1),null==r&&(r=[0,1]),o=0,"array"===Oe(r)?i=r[1]-r[0]:(i=0,r=[r,r]),(s=function(s){var l,c,d,p,f;return l=u*((e+120)/360+t*s),p=ae(r[0]+i*s,a),c=(0!==o?n[0]+s*o:n)*p*(1-p)/2,d=D(l),f=je(l),_(w([255*(p+c*(-.14861*d+1.78277*f)),255*(p+c*(-.29227*d-.90649*f)),255*(p+c*(1.97294*d)),1]))}).start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?a:(a=e,s)},s.hue=function(e){return null==e?n:("array"===Oe(n=e)?0==(o=n[1]-n[0])&&(n=n[1]):o=0,s)},s.lightness=function(e){return null==e?r:("array"===Oe(e)?(r=e,i=e[1]-e[0]):(r=[e,e],i=0),s)},s.scale=function(){return _.scale(s)},s.hue(n),s},_.random=function(){var e,t;for(e="#",t=0;t<6;++t)e+="0123456789abcdef".charAt(I(16*Math.random()));return new a(e)},b=[],N=function(e,t,n,a){var r,o,i,s;for(null==n&&(n=.5),null==a&&(a="rgb"),"object"!==Oe(e)&&(e=_(e)),"object"!==Oe(t)&&(t=_(t)),i=0,o=b.length;i<o;i++)if(a===(r=b[i])[0]){s=r[1](e,t,n,a);break}if(null==s)throw"color mode "+a+" is not supported";return s.alpha(e.alpha()+n*(t.alpha()-e.alpha()))},_.interpolate=N,a.prototype.interpolate=function(e,t,n){return N(this,e,t,n)},_.mix=N,a.prototype.mix=a.prototype.interpolate,f.rgb=function(){var e,t,n,a;for(e in n=[],t=De(arguments))a=t[e],n.push(a);return n},_.rgb=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["rgb"]),(function(){}))},a.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},a.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},d.push({p:3,test:function(e){var t;return t=De(arguments),"array"===Oe(t)&&3===t.length||4===t.length&&"number"===Oe(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),f.lrgb=f.rgb,B=function(e,t,n,r){var o,i;return o=e._rgb,i=t._rgb,new a(_e(ae(o[0],2)*(1-n)+ae(i[0],2)*n),_e(ae(o[1],2)*(1-n)+ae(i[1],2)*n),_e(ae(o[2],2)*(1-n)+ae(i[2],2)*n),r)},c=function(e){var t,n,r,o,i;for(t=1/e.length,i=[0,0,0,0],r=0,n=e.length;r<n;r++)o=e[r]._rgb,i[0]+=ae(o[0],2)*t,i[1]+=ae(o[1],2)*t,i[2]+=ae(o[2],2)*t,i[3]+=o[3]*t;return i[0]=_e(i[0]),i[1]=_e(i[1]),i[2]=_e(i[2]),i[3]>1&&(i[3]=1),new a(w(i))},b.push(["lrgb",B]),_.average=function(e,t){var n,a,r,o,s,l,u,d,p,f,b,g,h;if(null==t&&(t="rgb"),p=e.length,e=e.map((function(e){return _(e)})),u=e.splice(0,1)[0],"lrgb"===t)return c(e);for(d in o=[],s=0,l=0,g=u.get(t))g[d]=g[d]||0,o.push(isNaN(g[d])?0:1),"h"!==t.charAt(d)||isNaN(g[d])||(n=g[d]/180*i,s+=D(n),l+=je(n));for(a=u.alpha(),b=0,f=e.length;b<f;b++)for(d in h=(r=e[b]).get(t),a+=r.alpha(),g)isNaN(h[d])||(o[d]+=1,"h"===t.charAt(d)?(n=h[d]/180*i,s+=D(n),l+=je(n)):g[d]+=h[d]);for(d in g)if("h"===t.charAt(d)){for(n=m(l/o[d],s/o[d])/i*180;n<0;)n+=360;for(;n>=360;)n-=360;g[d]=n}else g[d]=g[d]/o[d];return _(g,t).alpha(a/p)},E=function(e){var t,n;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(n=parseInt(e,16))>>16,n>>8&255,255&n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),[(n=parseInt(e,16))>>24&255,n>>16&255,n>>8&255,ye((255&n)/255*100)/100];if(null!=f.css&&(t=f.css(e)))return t;throw"unknown color: "+e},se=function(e,t){var n,a,r,o,i,s;return null==t&&(t="auto"),i=e[0],r=e[1],a=e[2],n=e[3],"auto"===t&&(t=n<1?"rgba":"rgb"),i=Math.round(i),r=Math.round(r),a=Math.round(a),s=(s="000000"+(i<<16|r<<8|a).toString(16)).substr(s.length-6),o=(o="0"+ye(255*n).toString(16)).substr(o.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},f.hex=function(e){return E(e)},_.hex=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["hex"]),(function(){}))},a.prototype.hex=function(e){return null==e&&(e="auto"),se(this._rgb,e)},d.push({p:4,test:function(e){if(1===arguments.length&&"string"===Oe(e))return"hex"}}),A=function(){var e,t,n,a,r,o,i,s,l,u,c,d,p,f;if(r=(e=De(arguments))[0],c=e[1],i=e[2],0===c)l=a=t=255*i;else{for(n=[0,0,0],d=2*i-(p=i<.5?i*(1+c):i+c-i*c),(f=[0,0,0])[0]=(r/=360)+1/3,f[1]=r,f[2]=r-1/3,o=s=0;s<=2;o=++s)f[o]<0&&(f[o]+=1),f[o]>1&&(f[o]-=1),6*f[o]<1?n[o]=d+6*(p-d)*f[o]:2*f[o]<1?n[o]=p:3*f[o]<2?n[o]=d+(p-d)*(2/3-f[o])*6:n[o]=d;l=(u=[ye(255*n[0]),ye(255*n[1]),ye(255*n[2])])[0],a=u[1],t=u[2]}return e.length>3?[l,a,t,e[3]]:[l,a,t]},ue=function(e,t,n){var a,r,o,i,s;return void 0!==e&&e.length>=3&&(e=(i=e)[0],t=i[1],n=i[2]),e/=255,t/=255,n/=255,o=Math.min(e,t,n),r=((Z=Math.max(e,t,n))+o)/2,Z===o?(s=0,a=Number.NaN):s=r<.5?(Z-o)/(Z+o):(Z-o)/(2-Z-o),e===Z?a=(t-n)/(Z-o):t===Z?a=2+(n-e)/(Z-o):n===Z&&(a=4+(e-t)/(Z-o)),(a*=60)<0&&(a+=360),[a,s,r]},_.hsl=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["hsl"]),(function(){}))},f.hsl=A,a.prototype.hsl=function(){return ue(this._rgb)},F=function(){var e,t,n,a,r,o,i,s,l,u,c,d,p,f,b,g,m,h;if(r=(e=De(arguments))[0],g=e[1],h=e[2],h*=255,0===g)l=a=t=h;else switch(360===r&&(r=0),r>360&&(r-=360),r<0&&(r+=360),i=h*(1-g),s=h*(1-g*(n=(r/=60)-(o=I(r)))),m=h*(1-g*(1-n)),o){case 0:l=(u=[h,m,i])[0],a=u[1],t=u[2];break;case 1:l=(c=[s,h,i])[0],a=c[1],t=c[2];break;case 2:l=(d=[i,h,m])[0],a=d[1],t=d[2];break;case 3:l=(p=[i,s,h])[0],a=p[1],t=p[2];break;case 4:l=(f=[m,i,h])[0],a=f[1],t=f[2];break;case 5:l=(b=[h,i,s])[0],a=b[1],t=b[2]}return[l,a,t,e.length>3?e[3]:1]},ce=function(){var e,t,n,a,r,o,i,s,l;return o=(i=De(arguments))[0],n=i[1],e=i[2],r=Math.min(o,n,e),t=(Z=Math.max(o,n,e))-r,l=Z/255,0===Z?(a=Number.NaN,s=0):(s=t/Z,o===Z&&(a=(n-e)/t),n===Z&&(a=2+(e-o)/t),e===Z&&(a=4+(o-n)/t),(a*=60)<0&&(a+=360)),[a,s,l]},_.hsv=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["hsv"]),(function(){}))},f.hsv=F,a.prototype.hsv=function(){return ce(this._rgb)},te=function(e){return"number"===Oe(e)&&e>=0&&e<=16777215?[e>>16,e>>8&255,255&e,1]:(console.warn("unknown num color: "+e),[0,0,0,1])},be=function(){var e;return((e=De(arguments))[0]<<16)+(e[1]<<8)+e[2]},_.num=function(e){return new a(e,"num")},a.prototype.num=function(e){return null==e&&(e="rgb"),be(this._rgb,e)},f.num=te,d.push({p:1,test:function(e){if(1===arguments.length&&"number"===Oe(e)&&e>=0&&e<=16777215)return"num"}}),C=function(){var e,t,n,a,r,o,i,s,l,u,c,d,p,f,b,g,m,h,v,y;if(s=(n=De(arguments))[0],r=n[1],t=n[2],i=i/100*255,e=255*(r/=100),0===r)d=i=a=t;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),c=(u=t*(1-r))+e*(1-(o=(s/=60)-(l=I(s)))),v=u+e*o,y=u+e,l){case 0:d=(p=[y,v,u])[0],i=p[1],a=p[2];break;case 1:d=(f=[c,y,u])[0],i=f[1],a=f[2];break;case 2:d=(b=[u,y,v])[0],i=b[1],a=b[2];break;case 3:d=(g=[u,c,y])[0],i=g[1],a=g[2];break;case 4:d=(m=[v,u,y])[0],i=m[1],a=m[2];break;case 5:d=(h=[y,u,c])[0],i=h[1],a=h[2]}return[d,i,a,n.length>3?n[3]:1]},ie=function(){var e,t,n,a,r,o,i,s,l;return s=(l=De(arguments))[0],r=l[1],t=l[2],i=Math.min(s,r,t),n=100*(a=(Z=Math.max(s,r,t))-i)/255,e=i/(255-a)*100,0===a?o=Number.NaN:(s===Z&&(o=(r-t)/a),r===Z&&(o=2+(t-s)/a),t===Z&&(o=4+(s-r)/a),(o*=60)<0&&(o+=360)),[o,n,e]},_.hcg=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["hcg"]),(function(){}))},f.hcg=C,a.prototype.hcg=function(){return ie(this._rgb)},k=function(e){var t,n,a,r,o,i,s,l;if(e=e.toLowerCase(),null!=_.colors&&_.colors[e])return E(_.colors[e]);if(o=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),r=i=0;i<=2;r=++i)s[r]=+s[r];s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),r=l=0;l<=3;r=++l)s[r]=+s[r];else if(o=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),r=t=0;t<=2;r=++t)s[r]=ye(2.55*s[r]);s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),r=n=0;n<=2;r=++n)s[r]=ye(2.55*s[r]);s[3]=+s[3]}else(o=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((a=o.slice(1,4))[1]*=.01,a[2]*=.01,(s=A(a))[3]=1):(o=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((a=o.slice(1,4))[1]*=.01,a[2]*=.01,(s=A(a))[3]=+o[4]);return s},oe=function(e){var t;return"rgb"==(t=e[3]<1?"rgba":"rgb")?t+"("+e.slice(0,3).map(ye).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(ye).join(",")+","+e[3]+")":void 0},ve=function(e){return ye(100*e)/100},T=function(e,t){var n;return n=t<1?"hsla":"hsl",e[0]=ve(e[0]||0),e[1]=ve(100*e[1])+"%",e[2]=ve(100*e[2])+"%","hsla"===n&&(e[3]=t),n+"("+e.join(",")+")"},f.css=function(e){return k(e)},_.css=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["css"]),(function(){}))},a.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?oe(this._rgb):"hsl"===e.slice(0,3)?T(this.hsl(),this.alpha()):void 0},f.named=function(e){return E(ke[e])},d.push({p:5,test:function(e){if(1===arguments.length&&null!=ke[e])return"named"}}),a.prototype.name=function(e){var t,n;for(n in arguments.length&&(ke[e]&&(this._rgb=E(ke[e])),this._rgb[3]=1),t=this.hex("rgb"),ke)if(t===ke[n])return n;return t},U=function(){var e,t,n,a;return n=(a=De(arguments))[0],e=a[1],t=a[2],[n,D(t*=r)*e,je(t)*e]},$=function(){var e,t,n,a,r,o,i,s,l;return i=(n=De(arguments))[0],r=n[1],o=n[2],e=(s=U(i,r,o))[0],t=s[1],a=s[2],[(l=q(e,t,a))[0],l[1],a=l[2],n.length>3?n[3]:1]},G=function(){var e,t,n,a,r,o;return r=(o=De(arguments))[0],e=o[1],t=o[2],n=_e(e*e+t*t),a=(m(t,e)*l+360)%360,0===ye(1e4*n)&&(a=Number.NaN),[r,n,a]},pe=function(){var e,t,n,a,r,o,i;return r=(o=De(arguments))[0],n=o[1],t=o[2],a=(i=de(r,n,t))[0],e=i[1],t=i[2],G(a,e,t)},_.lch=function(){var e;return e=De(arguments),new a(e,"lch")},_.hcl=function(){var e;return e=De(arguments),new a(e,"hcl")},f.lch=$,f.hcl=function(){var e,t,n,a;return t=(a=De(arguments))[0],e=a[1],n=a[2],$([n,e,t])},a.prototype.lch=function(){return pe(this._rgb)},a.prototype.hcl=function(){return pe(this._rgb).reverse()},re=function(e){var t,n,a,r,o,i;return null==e&&(e="rgb"),o=(i=De(arguments))[0],a=i[1],t=i[2],a/=255,t/=255,[(1-(o/=255)-(r=1-Math.max(o,Math.max(a,t))))*(n=r<1?1/(1-r):0),(1-a-r)*n,(1-t-r)*n,r]},O=function(){var e,t,n,a,r,o;return n=(t=De(arguments))[0],r=t[1],o=t[2],a=t[3],e=t.length>4?t[4]:1,1===a?[0,0,0,e]:[n>=1?0:255*(1-n)*(1-a),r>=1?0:255*(1-r)*(1-a),o>=1?0:255*(1-o)*(1-a),e]},f.cmyk=function(){return O(De(arguments))},_.cmyk=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["cmyk"]),(function(){}))},a.prototype.cmyk=function(){return re(this._rgb)},f.gl=function(){var e,t,n,a,r;for(a=function(){var e,n;for(t in n=[],e=De(arguments))r=e[t],n.push(r);return n}.apply(this,arguments),e=n=0;n<=2;e=++n)a[e]*=255;return a},_.gl=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["gl"]),(function(){}))},a.prototype.gl=function(){var e;return[(e=this._rgb)[0]/255,e[1]/255,e[2]/255,e[3]]},fe=function(e,t,n){var a;return e=(a=De(arguments))[0],t=a[1],n=a[2],.2126*(e=J(e))+.7152*(t=J(t))+.0722*J(n)},J=function(e){return(e/=255)<=.03928?e/12.92:ae((e+.055)/1.055,2.4)},W=function(e,t,n,r){var o,i;return o=e._rgb,i=t._rgb,new a(o[0]+n*(i[0]-o[0]),o[1]+n*(i[1]-o[1]),o[2]+n*(i[2]-o[2]),r)},b.push(["rgb",W]),a.prototype.luminance=function(e,t){var n,a,r,o,i;return null==t&&(t="rgb"),arguments.length?(o=this._rgb,0===e?o=[0,0,0,this._rgb[3]]:1===e?o=[255,255,255,this[3]]:(n=fe(this._rgb),a=1e-7,r=20,i=function(n,o){var s,l;return s=(l=n.interpolate(o,.5,t)).luminance(),Math.abs(e-s)<a||!r--?l:s>e?i(n,l):i(l,o)},o=n>e?i(_("black"),this).rgba():i(this,_("white")).rgba()),_(o).alpha(this.alpha())):fe(this._rgb)},we=function(e){var t,n,a,r;return(r=e/100)<66?(a=255,n=-155.25485562709179-.44596950469579133*(n=r-2)+104.49216199393888*X(n),t=r<20?0:.8274096064007395*(t=r-10)-254.76935184120902+115.67994401066147*X(t)):(a=351.97690566805693+.114206453784165*(a=r-55)-40.25366309332127*X(a),n=325.4494125711974+.07943456536662342*(n=r-50)-28.0852963507957*X(n),t=255),[a,n,t]},ge=function(){var e,t,n,a,r,o,i,s;for(r=(o=De(arguments))[0],o[1],e=o[2],a=1e3,n=4e4,t=.4;n-a>t;)(i=we(s=.5*(n+a)))[2]/i[0]>=e/r?n=s:a=s;return ye(s)},_.temperature=_.kelvin=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["temperature"]),(function(){}))},f.temperature=f.kelvin=f.K=we,a.prototype.temperature=function(){return ge(this._rgb)},a.prototype.kelvin=a.prototype.temperature,_.contrast=function(e,t){var n,r,o,i;return"string"!==(o=Oe(e))&&"number"!==o||(e=new a(e)),"string"!==(i=Oe(t))&&"number"!==i||(t=new a(t)),(n=e.luminance())>(r=t.luminance())?(n+.05)/(r+.05):(r+.05)/(n+.05)},_.distance=function(e,t,n){var r,o,i,s,l,u,c;for(o in null==n&&(n="lab"),"string"!==(l=Oe(e))&&"number"!==l||(e=new a(e)),"string"!==(u=Oe(t))&&"number"!==u||(t=new a(t)),i=e.get(n),s=t.get(n),c=0,i)c+=(r=(i[o]||0)-(s[o]||0))*r;return Math.sqrt(c)},_.deltaE=function(e,t,n,r){var o,s,l,u,c,d,p,f,b,h,v,y,x,j,_,w,O,k,P,L,S,I,C,E;for(null==n&&(n=1),null==r&&(r=1),"string"!==(_=Oe(e))&&"number"!==_||(e=new a(e)),"string"!==(w=Oe(t))&&"number"!==w||(t=new a(t)),o=(O=e.lab())[0],l=O[1],c=O[2],s=(k=t.lab())[0],u=k[1],d=k[2],p=_e(l*l+c*c),f=_e(u*u+d*d),L=o<16?.511:.040975*o/(1+.01765*o),P=.0638*p/(1+.0131*p)+.638,j=p<1e-6?0:180*m(c,l)/i;j<0;)j+=360;for(;j>=360;)j-=360;return S=j>=164&&j<=345?.56+g(.2*D(i*(j+168)/180)):.36+g(.4*D(i*(j+35)/180)),x=_e((b=p*p*p*p)/(b+1900)),_e((I=(o-s)/(n*L))*I+(C=(y=p-f)/(r*P))*C+((h=l-u)*h+(v=c-d)*v-y*y)/((E=P*(x*S+1-x))*E))},a.prototype.get=function(e){var t,n,a,r,o;return a=(r=e.split("."))[0],t=r[1],o=this[a](),t?(n=a.indexOf(t))>-1?o[n]:console.warn("unknown channel "+t+" in mode "+a):o},a.prototype.set=function(e,t){var n,a,r,o,i;if(r=(o=e.split("."))[0],n=o[1])if(i=this[r](),(a=r.indexOf(n))>-1)if("string"===Oe(t))switch(t.charAt(0)){case"+":case"-":i[a]+=+t;break;case"*":i[a]*=+t.substr(1);break;case"/":i[a]/=+t.substr(1);break;default:i[a]=+t}else i[a]=t;else console.warn("unknown channel "+n+" in mode "+r);else i=t;return _(i,r).alpha(this.alpha())},a.prototype.clipped=function(){return this._rgb._clipped||!1},a.prototype.alpha=function(e){return arguments.length?_.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},a.prototype.darken=function(e){var t;return null==e&&(e=1),(t=this.lab())[0]-=o.Kn*e,_.lab(t).alpha(this.alpha())},a.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},a.prototype.darker=a.prototype.darken,a.prototype.brighter=a.prototype.brighten,a.prototype.saturate=function(e){var t;return null==e&&(e=1),(t=this.lch())[1]+=e*o.Kn,t[1]<0&&(t[1]=0),_.lch(t).alpha(this.alpha())},a.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},a.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),_(t[0]*e,t[1]*e,t[2]*e,e)},ee=function(e,t){return e*t/255},P=function(e,t){return e>t?t:e},K=function(e,t){return e>t?e:t},xe=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},ne=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},j=function(e,t){return 255*(1-(1-t/255)/(e/255))},L=function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e},(v=function(e,t,n){if(!v[n])throw"unknown blend mode "+n;return v[n](e,t)}).normal=(y=function(e){return function(t,n){var a,r;return a=_(n).rgb(),r=_(t).rgb(),_(e(a,r),"rgb")}})((S=function(e){return function(t,n){var a,r,o;for(o=[],a=r=0;r<=3;a=++r)o[a]=e(t[a],n[a]);return o}})((function(e,t){return e}))),v.multiply=y(S(ee)),v.screen=y(S(xe)),v.overlay=y(S(ne)),v.darken=y(S(P)),v.lighten=y(S(K)),v.dodge=y(S(L)),v.burn=y(S(j)),_.blend=v,_.analyze=function(e){var t,n,a,r;for(a={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,t=e.length;n<t;n++)null==(r=e[n])||isNaN(r)||(a.values.push(r),a.sum+=r,r<a.min&&(a.min=r),r>a.max&&(a.max=r),a.count+=1);return a.domain=[a.min,a.max],a.limits=function(e,t){return _.limits(a,e,t)},a},_.scale=function(e,t){var n,a,r,o,i,s,l,u,c,d,p,f,b,g,m,h,v,y,x,j,w;return c="rgb",d=_("#ccc"),g=0,i=[0,1],b=[],f=[0,0],n=!1,r=[],p=!1,u=0,l=1,o=!1,a={},m=!0,s=1,j=function(e){var t,n,a,o,i,s;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===Oe(e)&&null!=_.brewer&&(e=_.brewer[e]||_.brewer[e.toLowerCase()]||e),"array"===Oe(e)){for(1===e.length&&(e=[e[0],e[0]]),t=a=0,o=(e=e.slice(0)).length-1;0<=o?a<=o:a>=o;t=0<=o?++a:--a)n=e[t],"string"===Oe(n)&&(e[t]=_(n));for(b.length=0,t=s=0,i=e.length-1;0<=i?s<=i:s>=i;t=0<=i?++s:--s)b.push(t/(e.length-1))}return x(),r=e},v=function(e){var t,a;if(null!=n){for(a=n.length-1,t=0;t<a&&e>=n[t];)t++;return t-1}return 0},w=function(e){return e},y=function(e,t){var o,i,p,g,h,y,x;if(null==t&&(t=!1),isNaN(e)||null===e)return d;if(x=t?e:n&&n.length>2?v(e)/(n.length-2):l!==u?(e-u)/(l-u):1,t||(x=w(x)),1!==s&&(x=ae(x,s)),x=f[0]+x*(1-f[0]-f[1]),x=Math.min(1,Math.max(0,x)),p=Math.floor(1e4*x),m&&a[p])o=a[p];else{if("array"===Oe(r))for(i=g=0,y=b.length-1;0<=y?g<=y:g>=y;i=0<=y?++g:--g){if(x<=(h=b[i])){o=r[i];break}if(x>=h&&i===b.length-1){o=r[i];break}if(x>h&&x<b[i+1]){x=(x-h)/(b[i+1]-h),o=_.interpolate(r[i],r[i+1],x,c);break}}else"function"===Oe(r)&&(o=r(x));m&&(a[p]=o)}return o},x=function(){return a={}},j(e),(h=function(e){var t;return t=_(y(e)),p&&t[p]?t[p]():t}).classes=function(e){var t;return null!=e?("array"===Oe(e)?(n=e,i=[e[0],e[e.length-1]]):(t=_.analyze(i),n=0===e?[t.min,t.max]:_.limits(t,"e",e)),h):n},h.domain=function(e){var t,n,a,o,s,c,d;if(!arguments.length)return i;if(u=e[0],l=e[e.length-1],b=[],a=r.length,e.length===a&&u!==l)for(s=0,o=e.length;s<o;s++)n=e[s],b.push((n-u)/(l-u));else for(t=d=0,c=a-1;0<=c?d<=c:d>=c;t=0<=c?++d:--d)b.push(t/(a-1));return i=[u,l],h},h.mode=function(e){return arguments.length?(c=e,x(),h):c},h.range=function(e,t){return j(e),h},h.out=function(e){return p=e,h},h.spread=function(e){return arguments.length?(g=e,h):g},h.correctLightness=function(e){return null==e&&(e=!0),o=e,x(),w=o?function(e){var t,n,a,r,o,i,s,l;for(i=(t=y(0,!0).lab()[0])>(n=y(1,!0).lab()[0]),a=y(e,!0).lab()[0]-(r=t+(n-t)*e),s=0,l=1,o=20;Math.abs(a)>.01&&o-- >0;)i&&(a*=-1),a<0?(s=e,e+=.5*(l-e)):(l=e,e+=.5*(s-e)),a=y(e,!0).lab()[0]-r;return e}:function(e){return e},h},h.padding=function(e){return null!=e?("number"===Oe(e)&&(e=[e,e]),f=e,h):f},h.colors=function(t,a){var o,s,l,u,c,d,p,f;if(arguments.length<2&&(a="hex"),c=[],0===arguments.length)c=r.slice(0);else if(1===t)c=[h(.5)];else if(t>1)s=i[0],o=i[1]-s,c=function(){d=[];for(var e=0;0<=t?e<t:e>t;0<=t?e++:e--)d.push(e);return d}.apply(this).map((function(e){return h(s+e/(t-1)*o)}));else{if(e=[],p=[],n&&n.length>2)for(l=f=1,u=n.length;1<=u?f<u:f>u;l=1<=u?++f:--f)p.push(.5*(n[l-1]+n[l]));else p=i;c=p.map((function(e){return h(e)}))}return _[a]&&(c=c.map((function(e){return e[a]()}))),c},h.cache=function(e){return null!=e?(m=e,h):m},h.gamma=function(e){return null!=e?(s=e,h):s},h.nodata=function(e){return null!=e?(d=_(e),h):d},h},null==_.scales&&(_.scales={}),_.scales.cool=function(){return _.scale([_.hsl(180,1,.9),_.hsl(250,.7,.4)])},_.scales.hot=function(){return _.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},_.analyze=function(e,t,n){var a,r,o,i,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),a=function(e){null==e||isNaN(e)||(s.values.push(e),s.sum+=e,e<s.min&&(s.min=e),e>s.max&&(s.max=e),s.count+=1)},l=function(e,r){if(n(e,r))return null!=t&&"function"===Oe(t)?a(t(e)):null!=t&&"string"===Oe(t)||"number"===Oe(t)?a(e[t]):a(e)},"array"===Oe(e))for(i=0,o=e.length;i<o;i++)l(e[i]);else for(r in e)l(e[r],r);return s.domain=[s.min,s.max],s.limits=function(e,t){return _.limits(s,e,t)},s},_.limits=function(e,t,n){var a,r,o,i,s,l,u,c,d,p,f,b,m,h,v,y,x,j,w,O,D,k,P,L,S,C,E,M,T,A,F,N,z,R,B,V,W,G,q,H,U,$,K,Y,J,Q,ee,te,ne,re,oe,ie,se,le,ue;if(null==t&&(t="equal"),null==n&&(n=7),"array"===Oe(e)&&(e=_.analyze(e)),S=e.min,Z=e.max,e.sum,le=e.values.sort((function(e,t){return e-t})),1===n)return[S,Z];if(P=[],"c"===t.substr(0,1)&&(P.push(S),P.push(Z)),"e"===t.substr(0,1)){for(P.push(S),O=F=1,B=n-1;1<=B?F<=B:F>=B;O=1<=B?++F:--F)P.push(S+O/n*(Z-S));P.push(Z)}else if("l"===t.substr(0,1)){if(S<=0)throw"Logarithmic scales are only possible for values > 0";for(C=Math.LOG10E*X(S),L=Math.LOG10E*X(Z),P.push(S),O=ue=1,V=n-1;1<=V?ue<=V:ue>=V;O=1<=V?++ue:--ue)P.push(ae(10,C+O/n*(L-C)));P.push(Z)}else if("q"===t.substr(0,1)){for(P.push(S),O=a=1,$=n-1;1<=$?a<=$:a>=$;O=1<=$?++a:--a)N=(le.length-1)*O/n,(z=I(N))===N?P.push(le[z]):(R=N-z,P.push(le[z]*(1-R)+le[z+1]*R));P.push(Z)}else if("k"===t.substr(0,1)){for(M=le.length,h=new Array(M),j=new Array(n),re=!0,T=0,y=null,(y=[]).push(S),O=r=1,K=n-1;1<=K?r<=K:r>=K;O=1<=K?++r:--r)y.push(S+O/n*(Z-S));for(y.push(Z);re;){for(D=o=0,Y=n-1;0<=Y?o<=Y:o>=Y;D=0<=Y?++o:--o)j[D]=0;for(O=i=0,J=M-1;0<=J?i<=J:i>=J;O=0<=J?++i:--i){for(se=le[O],E=Number.MAX_VALUE,D=s=0,Q=n-1;0<=Q?s<=Q:s>=Q;D=0<=Q?++s:--s)(w=g(y[D]-se))<E&&(E=w,v=D);j[v]++,h[O]=v}for(A=new Array(n),D=l=0,ee=n-1;0<=ee?l<=ee:l>=ee;D=0<=ee?++l:--l)A[D]=null;for(O=u=0,te=M-1;0<=te?u<=te:u>=te;O=0<=te?++u:--u)null===A[x=h[O]]?A[x]=le[O]:A[x]+=le[O];for(D=c=0,ne=n-1;0<=ne?c<=ne:c>=ne;D=0<=ne?++c:--c)A[D]*=1/j[D];for(re=!1,D=d=0,W=n-1;0<=W?d<=W:d>=W;D=0<=W?++d:--d)if(A[D]!==y[O]){re=!0;break}y=A,++T>200&&(re=!1)}for(k={},D=p=0,G=n-1;0<=G?p<=G:p>=G;D=0<=G?++p:--p)k[D]=[];for(O=f=0,q=M-1;0<=q?f<=q:f>=q;O=0<=q?++f:--f)k[x=h[O]].push(le[O]);for(oe=[],D=b=0,H=n-1;0<=H?b<=H:b>=H;D=0<=H?++b:--b)oe.push(k[D][0]),oe.push(k[D][k[D].length-1]);for(oe=oe.sort((function(e,t){return e-t})),P.push(oe[0]),O=m=1,U=oe.length-1;m<=U;O=m+=2)ie=oe[O],isNaN(ie)||-1!==P.indexOf(ie)||P.push(ie)}return P},M=function(e,t,n){var a,r,o,i;return e=(a=De(arguments))[0],t=a[1],n=a[2],isNaN(e)&&(e=0),(e/=360)<1/3?o=1-((r=(1-t)/3)+(i=(1+t*D(u*e)/D(s-u*e))/3)):e<2/3?r=1-((i=(1-t)/3)+(o=(1+t*D(u*(e-=1/3))/D(s-u*e))/3)):i=1-((o=(1-t)/3)+(r=(1+t*D(u*(e-=2/3))/D(s-u*e))/3)),[255*(i=Y(n*i*3)),255*(o=Y(n*o*3)),255*(r=Y(n*r*3)),a.length>3?a[3]:1]},le=function(){var e,t,n,a,r,o,i;return r=(o=De(arguments))[0],t=o[1],e=o[2],u=2*Math.PI,r/=255,t/=255,e/=255,0==(i=1-Math.min(r,t,e)/(a=(r+t+e)/3))?n=0:(n=(r-t+(r-e))/2,n/=Math.sqrt((r-t)*(r-t)+(r-e)*(t-e)),n=Math.acos(n),e>t&&(n=u-n),n/=u),[360*n,i,a]},_.hsi=function(){return function(e,t,n){n.prototype=e.prototype;var a=new n,r=e.apply(a,t);return Object(r)===r?r:a}(a,Se.call(arguments).concat(["hsi"]),(function(){}))},f.hsi=M,a.prototype.hsi=function(){return le(this._rgb)},z=function(e,t,n,a){var r,o,i,s,l,u,c,d,p,f;return"hsl"===a?(p=e.hsl(),f=t.hsl()):"hsv"===a?(p=e.hsv(),f=t.hsv()):"hcg"===a?(p=e.hcg(),f=t.hcg()):"hsi"===a?(p=e.hsi(),f=t.hsi()):"lch"!==a&&"hcl"!==a||(a="hcl",p=e.hcl(),f=t.hcl()),"h"===a.substr(0,1)&&(o=p[0],c=p[1],s=p[2],i=f[0],d=f[1],l=f[2]),isNaN(o)||isNaN(i)?isNaN(o)?isNaN(i)?r=Number.NaN:(r=i,1!==s&&0!==s||"hsv"===a||(u=d)):(r=o,1!==l&&0!==l||"hsv"===a||(u=c)):r=o+n*(i>o&&i-o>180?i-(o+360):i<o&&o-i>180?i+360-o:i-o),null==u&&(u=c+n*(d-c)),_[a](r,u,s+n*(l-s))},V=function(e,t,n,a){var r,o;return r=e.num(),o=t.num(),_.num(r+(o-r)*n,"num")},(b=b.concat(function(){var e,t,n,a;for(a=[],t=0,e=(n=["hsv","hsl","hsi","hcl","lch","hcg"]).length;t<e;t++)Q=n[t],a.push([Q,z]);return a}())).push(["num",V]),R=function(e,t,n,r){var o,i;return o=e.lab(),i=t.lab(),new a(o[0]+n*(i[0]-o[0]),o[1]+n*(i[1]-o[1]),o[2]+n*(i[2]-o[2]),r)},b.push(["lab",R])}).call(this)}).call(this,n(77)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(221),r=n.n(a);function o(){return r()()}},,,,,function(e,t,n){"use strict";t.__esModule=!0,t.createSubscription=function(e,t){var n,o=r;function i(){l.onStateChange&&l.onStateChange()}function s(){var r,s,l;n||(n=t?t.addNestedSub(i):e.subscribe(i),r=(0,a.getBatch)(),s=null,l=null,o={clear:function(){s=null,l=null},notify:function(){r((function(){for(var e=s;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],t=s;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,n=l={callback:e,next:null,prev:l};return n.prev?n.prev.next=n:s=n,function(){t&&null!==s&&(t=!1,n.next?n.next.prev=n.prev:l=n.prev,n.prev?n.prev.next=n.next:s=n.next)}}})}var l={addNestedSub:function(e){return s(),o.subscribe(e)},notifyNestedSubs:function(){o.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,o.clear(),o=r)},getListeners:function(){return o}};return l};var a=n(148),r={notify:function(){},get:function(){return[]}}},function(e,t,n){"use strict";t.__esModule=!0,t.useIsomorphicLayoutEffect=void 0;var a=n(8),r="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?a.useLayoutEffect:a.useEffect;t.useIsomorphicLayoutEffect=r},function(e,t,n){e.exports=n(14)(1361)},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var a=n(8),r=n(7),o=n(0),i=n(24),s=n(2);function l(e,t,n){return e.getLayerType(n,t)||i.LayerTypes.DATA}function u({visualization:e,visualizationState:t,onAddLayerClick:n,layersMeta:l}){const[u,c]=Object(a.useState)(!1),d=Object(a.useMemo)((()=>{var n,a;return e.appendLayer&&t?null===(n=e.getSupportedLayers)||void 0===n||null===(a=n.call(e,t,l))||void 0===a?void 0:a.filter((({canAddViaMenu:e})=>!e)):null}),[e,t,l]);return null!=d&&d.length?1===d.length?Object(s.jsx)(r.EuiToolTip,{display:"block",title:o.i18n.translate("xpack.lens.xyChart.addLayer",{defaultMessage:"Add a layer"}),content:o.i18n.translate("xpack.lens.xyChart.addLayerTooltip",{defaultMessage:"Use multiple layers to combine visualization types or visualize different data views."}),position:"bottom"},Object(s.jsx)(r.EuiButton,{fullWidth:!0,"data-test-subj":"lnsLayerAddButton","aria-label":o.i18n.translate("xpack.lens.configPanel.addLayerButton",{defaultMessage:"Add layer"}),fill:!0,color:"text",onClick:()=>n(d[0].type),iconType:"layers"},o.i18n.translate("xpack.lens.configPanel.addLayerButton",{defaultMessage:"Add layer"}))):Object(s.jsx)(r.EuiPopover,{display:"block","data-test-subj":"lnsConfigPanel__addLayerPopover",button:Object(s.jsx)(r.EuiButton,{fullWidth:!0,"data-test-subj":"lnsLayerAddButton","aria-label":o.i18n.translate("xpack.lens.configPanel.addLayerButton",{defaultMessage:"Add layer"}),fill:!0,color:"text",onClick:()=>c(!u),iconType:"layers"},o.i18n.translate("xpack.lens.configPanel.addLayerButton",{defaultMessage:"Add layer"})),isOpen:u,closePopover:()=>c(!1),panelPaddingSize:"none"},Object(s.jsx)(r.EuiContextMenu,{initialPanelId:0,panels:[{id:0,title:o.i18n.translate("xpack.lens.configPanel.selectLayerType",{defaultMessage:"Select layer type"}),width:300,items:d.map((({type:e,label:t,icon:a,disabled:l,toolTipContent:u})=>({toolTipContent:u,disabled:l,name:e===i.LayerTypes.ANNOTATIONS?Object(s.jsx)(r.EuiFlexGroup,{gutterSize:"m"},Object(s.jsx)(r.EuiFlexItem,null,Object(s.jsx)("span",{className:"lnsLayerAddButton__label"},t)),Object(s.jsx)(r.EuiFlexItem,{grow:!1},Object(s.jsx)(r.EuiBadge,{className:"lnsLayerAddButton__techBadge",color:"hollow",isDisabled:l},o.i18n.translate("xpack.lens.configPanel.experimentalLabel",{defaultMessage:"Technical preview"})))):Object(s.jsx)("span",{className:"lnsLayerAddButtonLabel"},t),className:"lnsLayerAddButton",icon:a&&Object(s.jsx)(r.EuiIcon,{size:"m",type:a}),"data-test-subj":`lnsLayerAddButton-${e}`,onClick:()=>{n(e),c(!1)}})))}]})):null}},function(e,t,n){"use strict";n.d(t,"p",(function(){return s})),n.d(t,"n",(function(){return u})),n.d(t,"t",(function(){return c})),n.d(t,"q",(function(){return p})),n.d(t,"r",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return g})),n.d(t,"i",(function(){return m})),n.d(t,"u",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"m",(function(){return x})),n.d(t,"s",(function(){return _})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return O})),n.d(t,"o",(function(){return k})),n.d(t,"f",(function(){return P})),n.d(t,"e",(function(){return L})),n.d(t,"b",(function(){return S})),n.d(t,"h",(function(){return I})),n.d(t,"l",(function(){return C}));var a=n(114),r=n(37),o=n(98);const i=e=>e.lens.query,s=e=>e.lens.searchSessionId,l=e=>e.lens.filters,u=e=>e.lens.resolvedDateRange,c=e=>e.lens.visualization,d=e=>e.lens.stagedPreview,p=e=>{var t;return(null===(t=e.lens.stagedPreview)||void 0===t?void 0:t.activeData)||e.lens.activeData},f=e=>{var t;return(null===(t=e.lens.stagedPreview)||void 0===t?void 0:t.requestWarnings)||e.lens.requestWarnings},b=e=>!e.lens.autoApplyDisabled,g=e=>!e.lens.autoApplyDisabled||Boolean(e.lens.changesApplied),m=e=>e.lens.datasourceStates,h=e=>e.lens.visualization,v=e=>e.lens.activeDatasourceId,y=e=>e.lens.dataViews,x=e=>Boolean(e.lens.isFullscreenDatasource);let j;const _=e=>{const t=e.lens.applyChangesCounter!==j;return j=e.lens.applyChangesCounter,t},w=Object(a.createSelector)([i,l,u],((e,t,n)=>({dateRange:n,query:e,filters:t}))),O=Object(a.createSelector)(w,(e=>({query:e.query,timeRange:{from:e.dateRange.fromDate,to:e.dateRange.toDate},filters:e.filters,disableShardWarnings:!0}))),D=(e,t)=>t,k=Object(a.createSelector)([e=>e.lens.persistedDoc,c,m,i,l,v,e=>Object.fromEntries(Object.values(e.lens.dataViews.indexPatterns).filter((e=>!e.isPersisted)).map((e=>[e.id,e.spec]))),D],((e,t,n,a,o,i,s,{datasourceMap:l,visualizationMap:u,extractFilterReferences:c})=>{const d=t.state&&t.activeId?u[t.activeId]:null;if(!(n&&i&&!n[i].isLoading?l[i]:void 0)||!d)return;const p=Object.keys(n).reduce(((e,t)=>({...e,[t]:l[t]})),{}),f={},b=[],g=[];Object.entries(p).forEach((([e,t])=>{const{state:a,savedObjectReferences:r}=t.getPersistableState(n[e].state);f[e]=a,r.forEach((e=>{"index-pattern"===e.type&&s[e.id]?g.push(e):b.push(e)}))}));let m=t.state;if(d.getPersistableState){const{state:e,savedObjectReferences:n}=d.getPersistableState(t.state);m=e,n.forEach((e=>{"index-pattern"===e.type&&s[e.id]?g.push(e):b.push(e)}))}const h=Object.fromEntries(Object.entries(s).map((([e,t])=>{const{references:n,state:a}=r.DataViewPersistableStateService.extract(t);return b.push(...n),[e,a]}))),v=o.filter((e=>!b.some((t=>"index-pattern"===t.type&&t.id===e.meta.index)))).map((e=>({...e,meta:{...e.meta,value:void 0}}))),y=o.filter((e=>b.some((t=>"index-pattern"===t.type&&t.id===e.meta.index)))),{state:x,references:j}=c(y);return b.push(...j),{savedObjectId:null==e?void 0:e.savedObjectId,title:(null==e?void 0:e.title)||"",description:null==e?void 0:e.description,visualizationType:t.activeId,type:"lens",references:b,state:{visualization:m,query:a,filters:[...x,...v],datasourceStates:f,internalReferences:g,adHocDataViews:h}}})),P=Object(a.createSelector)([c,d],((e,t)=>t?t.visualization:e)),L=Object(a.createSelector)([m,d],((e,t)=>t?t.datasourceStates:e)),S=Object(a.createSelector)(m,(e=>Object.values(e).every((({isLoading:e})=>!1===e)))),I=Object(a.createSelector)([m,D,y],((e,t,n)=>Object(o.b)(e,t,n.indexPatterns))),C=Object(a.createSelector)([L,e=>e.lens.activeData,D,u,y],((e,t,n,a,r)=>({datasourceLayers:Object(o.b)(e,n,r.indexPatterns),activeData:t,dateRange:a,dataViews:r})))},function(e,t,n){"use strict";e.exports=n(402)},function(e,t,n){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(73));function o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var i="function"==typeof Symbol&&Symbol.observable||"@@observable",s=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+s(),REPLACE:"@@redux/REPLACE"+s(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+s()}};function u(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var a;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(o(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(o(1));return n(c)(e,t)}if("function"!=typeof e)throw new Error(o(2));var r=e,s=t,d=[],p=d,f=!1;function b(){p===d&&(p=d.slice())}function g(){if(f)throw new Error(o(3));return s}function m(e){if("function"!=typeof e)throw new Error(o(4));if(f)throw new Error(o(5));var t=!0;return b(),p.push(e),function(){if(t){if(f)throw new Error(o(6));t=!1,b();var n=p.indexOf(e);p.splice(n,1),d=null}}}function h(e){if(!u(e))throw new Error(o(7));if(void 0===e.type)throw new Error(o(8));if(f)throw new Error(o(9));try{f=!0,s=r(s,e)}finally{f=!1}for(var t=d=p,n=0;n<t.length;n++)(0,t[n])();return e}function v(e){if("function"!=typeof e)throw new Error(o(10));r=e,h({type:l.REPLACE})}function y(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(o(11));function n(){e.next&&e.next(g())}return n(),{unsubscribe:t(n)}}})[i]=function(){return this},e}return h({type:l.INIT}),(a={dispatch:h,subscribe:m,getState:g,replaceReducer:v})[i]=y,a}var d=c;function p(e,t){return function(){return t(e.apply(this,arguments))}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}t.__DO_NOT_USE__ActionTypes=l,t.applyMiddleware=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error(o(15))},i={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=t.map((function(e){return e(i)}));return a=f.apply(void 0,s)(n.dispatch),r.default(r.default({},n),{},{dispatch:a})}}},t.bindActionCreators=function(e,t){if("function"==typeof e)return p(e,t);if("object"!=typeof e||null===e)throw new Error(o(16));var n={};for(var a in e){var r=e[a];"function"==typeof r&&(n[a]=p(r,t))}return n},t.combineReducers=function(e){for(var t=Object.keys(e),n={},a=0;a<t.length;a++){var r=t[a];"function"==typeof e[r]&&(n[r]=e[r])}var i,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:l.INIT}))throw new Error(o(12));if(void 0===n(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw new Error(o(13))}))}(n)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var a=!1,r={},l=0;l<s.length;l++){var u=s[l],c=n[u],d=e[u],p=c(d,t);if(void 0===p)throw t&&t.type,new Error(o(14));r[u]=p,a=a||p!==d}return(a=a||s.length!==Object.keys(e).length)?r:e}},t.compose=f,t.createStore=c,t.legacy_createStore=d},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(406);case"v8light":return n(408)}},function(e,t,n){e.exports=n(14)(22)},function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return p}));var a=n(0),r=n(21),o=n(15);const i=e=>{var t,n,a;return"body"in e&&void 0!==(null===(t=e.body)||void 0===t||null===(n=t.attributes)||void 0===n||null===(a=n.error)||void 0===a?void 0:a.caused_by)};function s(e){const{type:t,reason:n,caused_by:a}=e;return"failed_shards"in e&&e.failed_shards?e.failed_shards.flatMap((e=>function({type:e,reason:t,caused_by:n,lang:a,script:r}){if(!n)return/script/.test(t)?[{type:e,reason:t,context:{type:"Painless script",reason:""}}]:[{type:e,reason:t}];const[o]=s(n);return"painless"===a?[{...o,context:{type:"Painless script",reason:`"${r}"`||t}}]:[{...o,context:{type:e,reason:t}}]}(e.reason))):a?s(a):[{type:t,reason:n}]}function l(e){const t=[];if(e&&"original"in e&&e.original)if("message"in(n=e.original)&&"stack"in n&&!i(n)&&!Object(o.isEsError)(n))(e=>"Batch request failed with status 0"===e.message)(e.original)?t.push(a.i18n.translate("xpack.lens.editorFrame.networkErrorMessage",{defaultMessage:"Network error, try again later or contact your administrator."})):t.push(e.message);else{const n=Object(r.uniqWith)(function(e){return i(e)?s(e.body.attributes.error):Object(o.isEsError)(e)?null!==(t=e.attributes)&&void 0!==t&&t.reason?s(e.attributes):s(null===(n=e.attributes)||void 0===n?void 0:n.caused_by):[];var t,n}(e.original),r.isEqual);for(const e of n)e.context?t.push(a.i18n.translate("xpack.lens.editorFrame.expressionFailureMessageWithContext",{defaultMessage:"Request error: {type}, {reason} in {context}",values:{reason:e.reason,type:e.type,context:e.context.reason?`${e.context.reason} (${e.context.type})`:e.context.type}})):t.push(a.i18n.translate("xpack.lens.editorFrame.expressionFailureMessage",{defaultMessage:"Request error: {type}, {reason}",values:{reason:e.reason,type:e.type}}))}else null!=e&&e.message&&t.push(null==e?void 0:e.message);var n;return t}function u(){return a.i18n.translate("xpack.lens.editorFrame.expressionMissingVisualizationType",{defaultMessage:"Visualization type not found."})}function c(){return a.i18n.translate("xpack.lens.editorFrame.expressionMissingDatasource",{defaultMessage:"Could not find datasource for the visualization"})}function d(e){return a.i18n.translate("xpack.lens.editorFrame.expressionMissingDataView",{defaultMessage:"Could not find the {count, plural, one {data view} other {data views}}: {ids}",values:{count:e.length,ids:e.join(", ")}})}function p(e){return{shortMessage:a.i18n.translate("xpack.lens.unknownVisType.shortMessage",{defaultMessage:"Unknown visualization type"}),longMessage:a.i18n.translate("xpack.lens.unknownVisType.longMessage",{defaultMessage:"The visualization type {visType} could not be resolved.",values:{visType:e}})}}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p}));var a=n(8),r=n.n(a),o=n(58),i=n.n(o),s=n(447),l=n.n(s),u=n(2),c=["children"],d=r.a.createContext(null),p=function(e){var t=e.children,n=i()(e,c),a=n.navigateToUrl,r=n.currentAppId;return Object(u.jsx)(d.Provider,{value:{navigateToUrl:a,currentAppId:r}},t)},f=function(e){var t=e.children,n=e.coreStart.application,a=n.navigateToUrl,r=n.currentAppId$,o=l()(r,void 0);return Object(u.jsx)(d.Provider,{value:{navigateToUrl:a,currentAppId:o}},t)},b=n(123),g={name:"36bnqj",styles:"display:flex;flex:1"},m=function(e){var t=e.children,n=e.navigateToUrl,r=e.currentAppId,o=Object(a.useRef)(null),i=Object(a.useCallback)((function(e){return function(e){var t=e.event,n=e.container,a=e.navigateToUrl;if(n&&e.currentAppId){var r=t.target,o=Object(b.a)(r,n);if(o){var i=o.href,s=""===o.target||"_self"===o.target,l=0===t.button;i&&s&&l&&!t.defaultPrevented&&!Object(b.b)(t)&&(t.preventDefault(),a(o.href))}}}({event:e,currentAppId:r,navigateToUrl:n,container:o.current})}),[r,n]);return Object(u.jsx)("div",{onClick:i,ref:o,css:g},t)},h=function(e){var t=e.children;return Object(u.jsx)(m,function(){var e=Object(a.useContext)(d);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t)},v=["children"],y=function(e){var t=e.children,n=i()(e,v),a=Object(u.jsx)(h,null,t);if(void 0!==n.coreStart){var r=n.coreStart;return Object(u.jsx)(f,{coreStart:r},a)}var o=n.navigateToUrl,s=n.currentAppId;return Object(u.jsx)(p,{currentAppId:s,navigateToUrl:o},a)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return y}));var a=n(12),r=n.n(a),o=n(58),i=n.n(o),s=n(8),l=n.n(s),u=n(23),c=n.n(u),d=n(7),p=n(2),f=["type","label","size","scripted","className"],b={iconType:"questionInCircle",color:"gray"},g={boolean:{iconType:"tokenBoolean"},conflict:{iconType:"alert",color:"euiColorVis9",shape:"square"},date:{iconType:"tokenDate"},date_range:{iconType:"tokenDate"},geo_point:{iconType:"tokenGeo"},geo_shape:{iconType:"tokenGeo"},ip:{iconType:"tokenIP"},ip_range:{iconType:"tokenIP"},match_only_text:{iconType:"tokenString"},murmur3:{iconType:"tokenSearchType"},number:{iconType:"tokenNumber"},number_range:{iconType:"tokenNumber"},histogram:{iconType:"tokenHistogram"},_source:{iconType:"editorCodeBlock",color:"gray"},string:{iconType:"tokenString"},text:{iconType:"tokenString"},keyword:{iconType:"tokenKeyword"},gauge:{iconType:"tokenMetricGauge"},counter:{iconType:"tokenMetricCounter"},nested:{iconType:"tokenNested"},version:{iconType:"tokenTag"}};function m(e){var t=e.type,n=e.label,a=e.size,o=void 0===a?"s":a,s=e.scripted,l=e.className,u=i()(e,f),m=g[t]||b;return Object(p.jsx)(d.EuiToken,r()({},m,{className:c()("kbnFieldIcon",l),"aria-label":n||t,title:n||t,size:o,fill:s?"dark":void 0},u))}n(189);var h=["size","isActive","fieldIcon","fieldName","fieldInfoIcon","fieldAction","className","isDraggable","onClick","dataTestSubj","buttonProps"],v={s:"kbnFieldButton--small",m:null};function y(e){var t=e.size,n=void 0===t?"m":t,a=e.isActive,o=void 0!==a&&a,s=e.fieldIcon,u=e.fieldName,d=e.fieldInfoIcon,f=e.fieldAction,b=e.className,g=e.isDraggable,m=void 0!==g&&g,y=e.onClick,x=e.dataTestSubj,j=e.buttonProps,_=i()(e,h),w=c()("kbnFieldButton",n?v[n]:null,{"kbnFieldButton-isActive":o},{"kbnFieldButton--isDraggable":m},b),O=c()("kbn-resetFocusState","kbnFieldButton__button"),D=Object(p.jsx)(l.a.Fragment,null,s&&Object(p.jsx)("span",{className:"kbnFieldButton__fieldIcon"},s),u&&Object(p.jsx)("span",{className:"kbnFieldButton__name"},u),d&&Object(p.jsx)("div",{className:"kbnFieldButton__infoIcon"},d));return Object(p.jsx)("div",r()({className:w},_),y?Object(p.jsx)("button",r()({onClick:function(e){"click"===e.type&&e.currentTarget.focus(),y()},"data-test-subj":x,className:O},j),D):Object(p.jsx)("div",{className:O,"data-test-subj":x},D),f&&Object(p.jsx)("div",{className:"kbnFieldButton__fieldAction"},f))}Object.keys(v)},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return O})),n(116);var a=n(8),r=n.n(a),o=n(7),i=n(23),s=n.n(i),l=n(22),u=n(59),c=n(101),d=(n(410),n(0)),p=n(13),f=n(91),b=n(81),g=n(62),m=n(104),h=n(2);function v({visualizationMap:e,visualization:t}){const n=e[t.activeId||""];if(!n)return Object(h.jsx)(r.a.Fragment,null,d.i18n.translate("xpack.lens.configPanel.selectVisualization",{defaultMessage:"Select a visualization"}));const a=n.getDescription(t.state);return Object(h.jsx)(r.a.Fragment,null,a.icon&&Object(h.jsx)(o.EuiIcon,{size:"l",className:"lnsChartSwitch__summaryIcon",type:a.icon}),Object(h.jsx)("span",{className:"lnsChartSwitch__summaryText"},a.label))}function y(e,t){try{return e()}catch(e){return Object(b.c)(e),t}}const x=Object(a.memo)((function(e){const[t,n]=Object(a.useState)(!1),i=Object(g.U)(),s=Object(g.V)(g.p),u=Object(g.V)(g.H),c=Object(g.V)(g.w);function b(t,n){var a;const r=e.visualizationMap[t],o=(n,a)=>e.visualizationMap[t].switchVisualizationType?y((()=>e.visualizationMap[t].switchVisualizationType(n,a)),a):a,l=Object.entries(e.framePublicAPI.datasourceLayers),d=l.some((([e,t])=>t&&t.getTableSpec().length>0));if(u.activeId===t&&u.state&&y((()=>r.getVisualizationTypeId(u.state)===n),!1))return{visualizationId:t,subVisualizationId:n,dataLoss:"nothing",keptLayerIds:Object.keys(e.framePublicAPI.datasourceLayers),getVisualizationState:()=>o(n,u.state),sameDatasources:!0};const p=function(e,t,n,a,r,o){const i=a.activeId&&e.visualizationMap[a.activeId]&&e.visualizationMap[a.activeId].getMainPalette?e.visualizationMap[a.activeId].getMainPalette(a.state):void 0,s=Object(f.a)({datasourceMap:e.datasourceMap,datasourceStates:n,visualizationMap:{[t]:r},activeVisualization:a.activeId?e.visualizationMap[a.activeId]:void 0,visualizationState:a.state,subVisualizationId:o,activeData:e.framePublicAPI.activeData,mainPalette:i,dataViews:e.framePublicAPI.dataViews}).filter((e=>"extended"!==e.changeType&&y((()=>r.getVisualizationTypeId(e.visualizationState)===o),!1)));return s.find((e=>"unchanged"===e.changeType||"reduced"===e.changeType))||s[0]}(e,t,c,u,r,n);let b;function h(){const e=Object(m.a)();return i(Object(g.h)({datasourceId:s,layerId:e})),e}return b=d?p?l.length>1&&l.length!==p.keptLayerIds.length?"layers":p.columns!==(null===(a=l[0][1])||void 0===a?void 0:a.getTableSpec().length)?"columns":"nothing":"everything":"nothing",{visualizationId:t,subVisualizationId:n,dataLoss:b,getVisualizationState:p?()=>o(n,r.initialize(h,p.visualizationState)):()=>o(n,r.initialize(h,u.activeId===r.id?u.state:void 0,u.activeId&&e.visualizationMap[u.activeId].getMainPalette?e.visualizationMap[u.activeId].getMainPalette(u.state):void 0)),keptLayerIds:p?p.keptLayerIds:[],datasourceState:p?p.datasourceState:void 0,datasourceId:p?p.datasourceId:void 0,sameDatasources:"nothing"===b&&u.activeId===r.id}}const[x,j]=Object(a.useState)(""),{visualizationTypes:_,visualizationsLookup:w}=Object(a.useMemo)((()=>{if(!t)return{visualizationTypes:[],visualizationsLookup:{}};const n=u.activeId&&e.visualizationMap[u.activeId]?(a=e.visualizationMap[u.activeId],r=u.state,y((()=>a.getVisualizationTypeId(r)),void 0)):void 0;var a,r;const i=x.toLowerCase(),s={},c={};return Object.entries(e.visualizationMap).forEach((([e,t])=>{for(const a of t.visualizationTypes){var n;if(a.label.toLowerCase().includes(i)||(null===(n=a.fullLabel)||void 0===n?void 0:n.toLowerCase().includes(i))){s[a.groupLabel]=s[a.groupLabel]||{priority:0,visualizations:[]};const t={...a,visualizationId:e,selection:b(e,a.id)};s[a.groupLabel].priority+=a.sortPriority||0,s[a.groupLabel].visualizations.push(t),c[`${e}:${a.id}`]=t}}})),{visualizationTypes:Object.keys(s).sort(((e,t)=>s[t].priority-s[e].priority)).flatMap((e=>{const{visualizations:t}=s[e];return 0===t.length?[]:[{key:e,label:e,isGroupLabel:!0,"aria-label":e,"data-test-subj":`lnsChartSwitchPopover_${e}`}].concat(t.sort(((e,t)=>(e.fullLabel||e.label).localeCompare(t.fullLabel||t.label))).map((e=>({"aria-label":e.fullLabel||e.label,className:"lnsChartSwitch__option",isGroupLabel:!1,key:`${e.visualizationId}:${e.id}`,value:`${e.visualizationId}:${e.id}`,"data-test-subj":`lnsChartSwitchPopover_${e.id}`,label:e.fullLabel||e.label,prepend:Object(h.jsx)(o.EuiIcon,{className:"lnsChartSwitch__chartIcon",type:e.icon||"empty"}),append:"nothing"!==e.selection.dataLoss||e.showExperimentalBadge?Object(h.jsx)(o.EuiFlexGroup,{gutterSize:"xs",responsive:!1,alignItems:"center",className:"lnsChartSwitch__append"},"nothing"!==e.selection.dataLoss?Object(h.jsx)(o.EuiFlexItem,{grow:!1},Object(h.jsx)(o.EuiIconTip,{"aria-label":d.i18n.translate("xpack.lens.chartSwitch.dataLossLabel",{defaultMessage:"Warning"}),type:"alert",color:"warning",content:d.i18n.translate("xpack.lens.chartSwitch.dataLossDescription",{defaultMessage:"Selecting this visualization type will remove incompatible configuration options and multiple layers, if present"}),iconProps:{className:"lnsChartSwitch__chartIcon","data-test-subj":`lnsChartSwitchPopoverAlert_${e.id}`}})):null,e.showExperimentalBadge?Object(h.jsx)(o.EuiFlexItem,{grow:!1},Object(h.jsx)(o.EuiBadge,{color:"hollow"},Object(h.jsx)(l.FormattedMessage,{id:"xpack.lens.chartSwitch.experimentalLabel",defaultMessage:"Technical preview"}))):null):null,...n===e.id&&{checked:"on"}}))))})),visualizationsLookup:c}}),[t,e.visualizationMap,e.framePublicAPI,u.activeId,u.state,x]);return Object(h.jsx)("div",{className:"lnsChartSwitch__header"},Object(h.jsx)(o.EuiPopover,{id:"lnsChartSwitchPopover",ownFocus:!0,initialFocus:".lnsChartSwitch__popoverPanel",panelClassName:"lnsChartSwitch__popoverPanel",panelPaddingSize:"s",button:Object(h.jsx)(p.ToolbarButton,{onClick:()=>n(!t),"data-test-subj":"lnsChartSwitchPopover",fontWeight:"bold"},Object(h.jsx)(v,{visualization:u,visualizationMap:e.visualizationMap})),isOpen:t,closePopover:()=>n(!1),anchorPosition:"downLeft"},Object(h.jsx)(o.EuiPopoverTitle,null,Object(h.jsx)(o.EuiFlexGroup,{alignItems:"center",responsive:!1},Object(h.jsx)(o.EuiFlexItem,null,d.i18n.translate("xpack.lens.configPanel.visualizationType",{defaultMessage:"Visualization type"})))),Object(h.jsx)(o.EuiSelectable,{className:"lnsChartSwitch__options",height:(O=_,380,0===O.length?0:Math.min(32*O.length,380)),searchable:!0,singleSelection:!0,isPreFiltered:!0,"data-test-subj":"lnsChartSwitchList",searchProps:{className:"lnsChartSwitch__search","data-test-subj":"lnsChartSwitchSearch",onChange:e=>j(e)},options:_,onChange:t=>{const a=t.find((({checked:e})=>"on"===e));if(!a)return;const r=a.value;var o;o=w[r].selection,n(!1),Object(f.d)(i,{...o,visualizationState:o.getVisualizationState()},{clearStagedPreview:!0}),(o.datasourceId||o.sameDatasources)&&"everything"!==o.dataLoss||i(Object(g.m)({visualizationId:u.activeId,layerIds:Object.keys(e.framePublicAPI.datasourceLayers)}))},noMatchesMessage:Object(h.jsx)(l.FormattedMessage,{id:"xpack.lens.chartSwitch.noResults",defaultMessage:"No results found for {term}.",values:{term:Object(h.jsx)("strong",null,x)}})},((e,t)=>Object(h.jsx)(r.a.Fragment,null,t,e)))));var O}));n(415);const j=({children:e})=>{const[t,n]=Object(a.useState)(!1);if(!e)return null;const i=r.a.Children.count(e);return Object(h.jsx)(o.EuiPopover,{panelPaddingSize:"none",button:Object(h.jsx)(o.EuiButtonEmpty,{color:"warning",onClick:()=>n((e=>!e)),iconType:"alert",className:"lnsWorkspaceWarning__button","data-test-subj":"lens-editor-warning-button"},i,Object(h.jsx)("span",{className:"lnsWorkspaceWarning__buttonText"}," ",d.i18n.translate("xpack.lens.chartWarnings.number",{defaultMessage:"{warningsCount, plural, one {warning} other {warnings}}",values:{warningsCount:i}}))),isOpen:t,closePopover:()=>n(!1)},Object(h.jsx)("ul",{className:"lnsWorkspaceWarningList"},r.a.Children.map(e,((e,t)=>Object(h.jsx)("li",{key:t,className:"lnsWorkspaceWarningList__item","data-test-subj":"lens-editor-warning"},Object(h.jsx)(o.EuiText,{size:"s"},e))))))};function _(){const e=Object(g.V)((e=>{var t;return null===(t=e.lens.persistedDoc)||void 0===t?void 0:t.title}));return Object(h.jsx)(o.EuiScreenReaderOnly,null,Object(h.jsx)("h1",{id:"lns_ChartTitle","data-test-subj":"lns_ChartTitle"},e||d.i18n.translate("xpack.lens.chartTitle.unsaved",{defaultMessage:"Unsaved visualization"})))}const w="autoApplyDisabled";function O({children:e,framePublicAPI:t,visualizationState:n,visualizationId:r,visualizationMap:i,datasourceMap:d,datasourceStates:p,isFullscreen:f,lensInspector:b}){const m=Object(g.U)(),v=Object(g.V)(g.s),y=Object(g.V)(g.r),w=Object(g.V)(g.F),O=r?i[r]:null,D=Object(a.useCallback)((e=>{O&&m(Object(g.T)({visualizationId:O.id,newState:e}))}),[m,O]),k=Object(a.useCallback)(((e,t)=>{m(Object(g.Q)({updater:e,datasourceId:t}))}),[m]),P=[];return null!=O&&O.getWarningMessages&&P.push(...O.getWarningMessages(n,t)||[]),Object.entries(p).forEach((([e,n])=>{const a=d[e];!n.isLoading&&a.getWarningMessages&&P.push(...a.getWarningMessages(n.state,t,b.adapters,(t=>k(t,e)))||[])})),w&&P.push(...w),Object(h.jsx)(o.EuiPageTemplate,{direction:"column",offset:0,minHeight:0,restrictWidth:!1,mainProps:{component:"div"}},!(f&&(y||null!=P&&P.length))&&Object(h.jsx)(o.EuiPageTemplate.Section,{paddingSize:"none",color:"transparent"},Object(h.jsx)(o.EuiFlexGroup,{alignItems:"flexEnd",gutterSize:"s",direction:"row",className:s()("lnsWorkspacePanelWrapper__toolbar",{"lnsWorkspacePanelWrapper__toolbar--fullscreen":f}),responsive:!1},!f&&Object(h.jsx)(o.EuiFlexItem,null,Object(h.jsx)(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1,wrap:!0},Object(h.jsx)(o.EuiFlexItem,{grow:!1},Object(h.jsx)(x,{"data-test-subj":"lnsChartSwitcher",visualizationMap:i,datasourceMap:d,framePublicAPI:t})),O&&O.renderToolbar&&Object(h.jsx)(o.EuiFlexItem,{grow:!1},Object(h.jsx)(c.a,{render:O.renderToolbar,nativeProps:{frame:t,state:n,setState:D}})))),Object(h.jsx)(o.EuiFlexItem,{grow:!1},Object(h.jsx)(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},null!=P&&P.length?Object(h.jsx)(o.EuiFlexItem,{grow:!1},Object(h.jsx)(j,null,P)):null,!y&&Object(h.jsx)(o.EuiFlexItem,{grow:!1},Object(h.jsx)(o.EuiButton,{disabled:y||v,fill:!0,className:"lnsWorkspacePanelWrapper__applyButton "+u.DONT_CLOSE_DIMENSION_CONTAINER_ON_CLICK_CLASS,iconType:"checkInCircleFilled",onClick:()=>m(Object(g.b)()),size:"m","data-test-subj":"lnsApplyChanges__toolbar",minWidth:"auto"},Object(h.jsx)(l.FormattedMessage,{id:"xpack.lens.editorFrame.applyChangesLabel",defaultMessage:"Apply changes"}))))))),Object(h.jsx)(o.EuiPageTemplate.Section,{grow:!0,paddingSize:"none",contentProps:{className:"lnsWorkspacePanelWrapper__content"},className:s()("lnsWorkspacePanelWrapper",{"lnsWorkspacePanelWrapper--fullscreen":f}),color:"transparent"},Object(h.jsx)(_,null),e))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p}));var a=n(8),r=n.n(a),o=n(7),i=n(2),s={name:"1azakc",styles:"text-align:center"},l=function(){var e=s;return Object(i.jsx)("div",{css:e},Object(i.jsx)(o.EuiLoadingSpinner,null))},u=n(12),c=n.n(u),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(i.jsx)(l,null);return r.a.forwardRef((function(n,r){return Object(i.jsx)(o.EuiErrorBoundary,null,Object(i.jsx)(a.Suspense,{fallback:t},Object(i.jsx)(e,c()({},n,{ref:r}))))}))},p=function(e){return e.metaKey||e.altKey||e.ctrlKey||e.shiftKey},f=function(e,t){var n=e;do{var a,r;if("a"===(null===(a=n)||void 0===a?void 0:a.tagName.toLowerCase()))return n;var o=null===(r=n)||void 0===r?void 0:r.parentElement;if(!o||o===document.body||o===t)break;n=o}while(parent||parent!==document.body||parent!==t)}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(8);t.default=function(e){a.useEffect(e,[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(34),r=n(8),o=a.__importDefault(n(204));t.default=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var a=o.default(e,t),i=a[0],s=a[1],l=a[2];return r.useEffect(l,n),[i,s]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(12),r=n.n(a),o=(n(8),n(7)),i=n(82),s=n(2);const l=({onChange:e,value:t,defaultValue:n,allowFalsyValue:a,...l})=>{const{inputValue:u,handleInputChange:c,initialValue:d}=Object(i.a)({onChange:e,value:t,defaultValue:n},{allowFalsyValue:a});return Object(s.jsx)(o.EuiFieldText,r()({},l,{value:u,onChange:e=>{c(e.target.value)},placeholder:d}))},u=e=>Object(s.jsx)(l,r()({},e,{key:e.defaultValue}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var a=n(34).__importDefault(n(211));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(8);t.default=function(e,t,n){var r=a.useRef(void 0);r.current&&n(t,r.current)||(r.current=t),a.useEffect(e,r.current)}},,,,,,,,,,,,,,,function(e,t,n){e.exports=n(14)(17)},function(e,t,n){e.exports=n(14)(16)},function(e,t,n){e.exports=n(14)(2744)},function(e,t,n){"use strict";t.__esModule=!0,t.setBatch=t.getBatch=void 0;var a=function(e){e()};t.setBatch=function(e){return a=e},t.getBatch=function(){return a}},function(e,t,n){"use strict";var a=n(68).default,r=n(147).default;t.__esModule=!0,t.default=function(e,t){void 0===t&&(t={});var n=t,a=n.getDisplayName,r=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,d=n.methodName,_=void 0===d?"connectAdvanced":d,w=n.renderCountProp,O=void 0===w?void 0:w,D=n.shouldHandleStateChanges,k=void 0===D||D,P=n.storeKey,L=void 0===P?"store":P,S=(n.withRef,n.forwardRef),I=void 0!==S&&S,C=n.context,E=void 0===C?p.ReactReduxContext:C,M=(0,i.default)(n,f),T=E;return function(t){var n=t.displayName||t.name||"Component",a=r(n),d=(0,o.default)({},M,{getDisplayName:r,methodName:_,renderCountProp:O,shouldHandleStateChanges:k,storeKey:L,displayName:a,wrappedComponentName:n,WrappedComponent:t}),p=M.pure,f=p?l.useMemo:function(e){return e()};function w(n){var a=(0,l.useMemo)((function(){var e=n.reactReduxForwardedRef,t=(0,i.default)(n,b);return[n.context,e,t]}),[n]),r=a[0],s=a[1],p=a[2],_=(0,l.useMemo)((function(){return r&&r.Consumer&&(0,u.isContextConsumer)(l.default.createElement(r.Consumer,null))?r:T}),[r,T]),w=(0,l.useContext)(_),O=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(w)&&Boolean(w.store);var D=O?n.store:w.store,P=(0,l.useMemo)((function(){return function(t){return e(t.dispatch,d)}(D)}),[D]),L=(0,l.useMemo)((function(){if(!k)return m;var e=(0,c.createSubscription)(D,O?null:w.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[D,O,w]),S=L[0],I=L[1],C=(0,l.useMemo)((function(){return O?w:(0,o.default)({},w,{subscription:S})}),[O,w,S]),E=(0,l.useReducer)(h,g,j),M=E[0][0],A=E[1];if(M&&M.error)throw M.error;var F=(0,l.useRef)(),N=(0,l.useRef)(p),z=(0,l.useRef)(),R=(0,l.useRef)(!1),B=f((function(){return z.current&&p===N.current?z.current:P(D.getState(),p)}),[D,M,p]);v(y,[N,F,R,p,B,z,I]),v(x,[k,D,S,P,N,F,R,z,I,A],[D,S,P]);var V=(0,l.useMemo)((function(){return l.default.createElement(t,(0,o.default)({},B,{ref:s}))}),[s,t,B]);return(0,l.useMemo)((function(){return k?l.default.createElement(_.Provider,{value:C},V):V}),[_,V,C])}var D=p?l.default.memo(w):w;if(D.WrappedComponent=t,D.displayName=w.displayName=a,I){var P=l.default.forwardRef((function(e,t){return l.default.createElement(D,(0,o.default)({},e,{reactReduxForwardedRef:t}))}));return P.displayName=a,P.WrappedComponent=t,(0,s.default)(P,t)}return(0,s.default)(D,t)}};var o=a(n(12)),i=a(n(111)),s=a(n(389)),l=r(n(8)),u=n(390),c=n(109),d=n(110),p=n(78),f=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],b=["reactReduxForwardedRef"],g=[],m=[null,null];function h(e,t){var n=e[1];return[t.payload,n+1]}function v(e,t,n){(0,d.useIsomorphicLayoutEffect)((function(){return e.apply(void 0,t)}),n)}function y(e,t,n,a,r,o,i){e.current=a,t.current=r,n.current=!1,o.current&&(o.current=null,i())}function x(e,t,n,a,r,o,i,s,l,u){if(e){var c=!1,d=null,p=function(){if(!c){var e,n,p=t.getState();try{e=a(p,r.current)}catch(e){n=e,d=e}n||(d=null),e===o.current?i.current||l():(o.current=e,s.current=e,i.current=!0,u({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=p,n.trySubscribe(),p(),function(){if(c=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var j=function(){return[null,0]}},function(e,t,n){"use strict";function a(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.__esModule=!0,t.default=function(e,t){if(a(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!a(e[n[o]],t[n[o]]))return!1;return!0}},function(e,t,n){"use strict";var a=n(68).default;function r(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}t.__esModule=!0,t.getDependsOnOwnProps=r,t.wrapMapToPropsConstant=function(e){return function(t,n){var a=e(t,n);function r(){return a}return r.dependsOnOwnProps=!1,r}},t.wrapMapToPropsFunc=function(e,t){return function(t,n){n.displayName;var a=function(e,t){return a.dependsOnOwnProps?a.mapToProps(e,t):a.mapToProps(e)};return a.dependsOnOwnProps=!0,a.mapToProps=function(t,n){a.mapToProps=e,a.dependsOnOwnProps=r(e);var o=a(t,n);return"function"==typeof o&&(a.mapToProps=o,a.dependsOnOwnProps=r(o),o=a(t,n)),o},a}},a(n(152))},function(e,t,n){"use strict";var a=n(68).default;t.__esModule=!0,t.default=function(e,t,n){(0,r.default)(e)||(0,o.default)(n+"() in "+t+" must return a plain object. Instead received "+e+".")};var r=a(n(394)),o=a(n(153))},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},function(e,t,n){"use strict";t.__esModule=!0,t.createStoreHook=i,t.useStore=void 0;var a=n(8),r=n(78),o=n(155);function i(e){void 0===e&&(e=r.ReactReduxContext);var t=e===r.ReactReduxContext?o.useReduxContext:function(){return(0,a.useContext)(e)};return function(){return t().store}}var s=i();t.useStore=s},function(e,t,n){"use strict";t.__esModule=!0,t.useReduxContext=function(){return(0,a.useContext)(r.ReactReduxContext)};var a=n(8),r=n(78)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSelector=void 0,t.createSelectorCreator=o,t.createStructuredSelector=void 0,Object.defineProperty(t,"defaultEqualityCheck",{enumerable:!0,get:function(){return a.defaultEqualityCheck}}),Object.defineProperty(t,"defaultMemoize",{enumerable:!0,get:function(){return a.defaultMemoize}});var a=n(404);function r(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var o=function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];var i,s=0,l={memoizeOptions:void 0},u=a.pop();if("object"==typeof u&&(l=u,u=a.pop()),"function"!=typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var c=l,d=c.memoizeOptions,p=void 0===d?n:d,f=Array.isArray(p)?p:[p],b=r(a),g=e.apply(void 0,[function(){return s++,u.apply(null,arguments)}].concat(f)),m=e((function(){for(var e=[],t=b.length,n=0;n<t;n++)e.push(b[n].apply(null,arguments));return i=g.apply(null,e)}));return Object.assign(m,{resultFunc:u,memoizedResultFunc:g,dependencies:b,lastResult:function(){return i},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),m};return o}var i=o(a.defaultMemoize);t.createSelector=i,t.createStructuredSelector=function(e,t){if(void 0===t&&(t=i),"object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e),a=t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce((function(e,t,a){return e[n[a]]=t,e}),{})}));return a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var a=n(0),r=n(62),o=n(71),i=n(59),s=n(98),l=n(3);const u=async({initialInput:e,lensServices:t,history:n})=>{const{notifications:r,spaces:o,attributeService:i}=t;let s;try{const r=await i.unwrapAttributes(e);if(!r)return{doc:{...e,type:l.LENS_EMBEDDABLE_TYPE},sharingSavedObjectProps:{outcome:"exactMatch"}};const{metaInfo:u,attributes:c}=r,d=null==u?void 0:u.sharingSavedObjectProps;if(o&&"aliasMatch"===(null==d?void 0:d.outcome)&&n){const e=d.aliasTargetId,r=t.http.basePath.prepend(`${Object(l.getEditPath)(e)}${n.location.search}`);await o.ui.redirectLegacyUrl({path:r,aliasPurpose:d.aliasPurpose,objectNoun:a.i18n.translate("xpack.lens.legacyUrlConflict.objectNoun",{defaultMessage:"Lens visualization"})})}return s={...e,...c,type:l.LENS_EMBEDDABLE_TYPE},{doc:s,sharingSavedObjectProps:{aliasTargetId:null==d?void 0:d.aliasTargetId,outcome:null==d?void 0:d.outcome}}}catch(e){r.toasts.addDanger(a.i18n.translate("xpack.lens.app.docLoadingError",{defaultMessage:"Error loading saved document"}))}};function c(e,t,{redirectCallback:n,initialInput:a,history:c},d){var p;const{lensServices:f,datasourceMap:b,embeddableEditorIncomingState:g,initialContext:m,visualizationMap:h}=t,{resolvedDateRange:v,searchSessionId:y,isLinkedToOriginatingApp:x,...j}=Object(o.c)(t),{attributeService:_,notifications:w,data:O,dashboardFeatureFlag:D}=f,{lens:k}=e.getState(),P={dataViews:f.dataViews,storage:f.storage,defaultIndexPatternId:f.uiSettings.get("defaultIndex")};let L;var S;return m&&"query"in m&&(L="textBased"),!a||_.inputIsRefType(a)&&a.savedObjectId===(null===(p=k.persistedDoc)||void 0===p?void 0:p.savedObjectId)?Object(s.f)({datasourceMap:b,visualizationMap:h,visualizationState:k.visualization,datasourceStates:k.datasourceStates,initialContext:m,adHocDataViews:null===(S=k.persistedDoc)||void 0===S?void 0:S.state.adHocDataViews,...P},{isFullEditor:!0}).then((({datasourceStates:t,indexPatterns:n,indexPatternRefs:a})=>{e.dispatch(Object(r.g)({newState:{...j,dataViews:Object(i.getInitialDataViewsObject)(n,a),searchSessionId:O.search.session.getSessionId()||O.search.session.start(),...L&&{activeDatasourceId:L},datasourceStates:Object.entries(t).reduce(((e,[t,n])=>({...e,[t]:{...n,isLoading:!1}})),{}),isLoading:!1},initialContext:m})),d&&e.dispatch(Object(o.b)())})).catch((e=>{w.toasts.addDanger({title:e.message}),n()})):u({initialInput:a,lensServices:f,history:c}).then((t=>{if(t){const{doc:n,sharingSavedObjectProps:u}=t;_.inputIsRefType(a)&&f.chrome.recentlyAccessed.add(Object(l.getFullPath)(a.savedObjectId),n.title,a.savedObjectId);const c=Object.entries(n.state.datasourceStates).reduce(((e,[t,n])=>({...e,[t]:{isLoading:!0,state:n}})),{}),p=O.query.filterManager.inject(n.state.filters,n.references);O.query.filterManager.setAppFilters(p);const v={activeId:n.visualizationType,state:n.state.visualization};return Object(s.f)({datasourceMap:b,visualizationMap:h,visualizationState:v,datasourceStates:c,references:[...n.references,...n.state.internalReferences||[]],initialContext:m,dataViews:f.dataViews,storage:f.storage,adHocDataViews:n.state.adHocDataViews,defaultIndexPatternId:f.uiSettings.get("defaultIndex")},{isFullEditor:!0}).then((({datasourceStates:t,visualizationState:s,indexPatterns:l,indexPatternRefs:c})=>{const p=O.search.session.getSessionId();e.dispatch(Object(r.L)({isSaveable:!0,sharingSavedObjectProps:u,filters:O.query.filterManager.getFilters(),query:n.state.query,searchSessionId:D.allowByValueEmbeddables&&Boolean(null==g?void 0:g.originatingApp)&&(null==a||!a.savedObjectId)&&p?p:O.search.session.start(),persistedDoc:n,activeDatasourceId:Object(i.getInitialDatasourceId)(b,n),visualization:{activeId:n.visualizationType,state:s},dataViews:Object(i.getInitialDataViewsObject)(l,c),datasourceStates:Object.entries(t).reduce(((e,[t,n])=>({...e,[t]:{...n,isLoading:!1}})),{}),isLoading:!1})),d&&e.dispatch(Object(o.b)())})).catch((e=>w.toasts.addDanger({title:e.message})))}n()}),(()=>{e.dispatch(Object(r.L)({isLoading:!1})),n()})).catch((e=>{w.toasts.addDanger({title:e.message}),n()}))}},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return saved_object_store_SavedObjectIndexStore})),n.d(t,"b",(function(){return d}));var a=n(1),r=n.n(a),o=n(61);class saved_object_store_SavedObjectIndexStore{constructor(e){r()(this,"client",void 0),r()(this,"save",(async e=>{const{savedObjectId:t,type:n,references:a,...r}=e,i=r,s=await this.client.create(o.d,i,t?{references:a,overwrite:!0,id:t}:{references:a});return{...e,savedObjectId:s.id}})),this.client=e}async load(e){const t=await this.client.resolve(o.d,e);if(t.saved_object.error)throw t.saved_object.error;return t}}var i=n(0);const s=i.i18n.translate("xpack.lens.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});n(8);var l=n(7),u=n(13),c=n(2);async function d(e,t,n){const{savedObjectsClient:a,overlays:r}=n,{id:d,title:p,isTitleDuplicateConfirmed:f,lastSavedTitle:b,copyOnSave:g}=e;if(f)return!0;if(p===b&&!g)return!0;const m=await async function(e,t,n){if(n)return(await e.find({type:t,perPage:10,search:`"${n}"`,searchFields:["title"],fields:["title"]})).savedObjects.find((e=>e.get("title").toLowerCase()===n.toLowerCase()))}(a,o.d,p);return!m||m.id===d||(t?(t(),Promise.reject(new Error(s))):function({title:e,displayName:t},n){const a=i.i18n.translate("xpack.lens.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:"A {name} with the title '{title}' already exists. Would you like to save anyway?",values:{title:e,name:t}}),r=i.i18n.translate("xpack.lens.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save {name}",values:{name:t}});try{return function(e="",t="",n="",a){return new Promise(((r,o)=>{const s=i.i18n.translate("xpack.lens.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),d=a.openModal(Object(u.toMountPoint)(Object(c.jsx)(l.EuiConfirmModal,{onCancel:()=>{d.close(),o()},onConfirm:()=>{d.close(),r(!0)},confirmButtonText:n,cancelButtonText:s,title:t},e)))}))}(a,"",r,n)}catch{return Promise.reject(new Error(s))}}(e,r))}},,,,,,,,,,,,,,,,,,,,,function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(185);case"v8light":return n(187)}},function(e,t,n){var a=n(55),r=n(186);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".lnsVisToolbar__popover{width:404px}",""]),e.exports=t},function(e,t,n){var a=n(55),r=n(188);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".lnsVisToolbar__popover{width:404px}",""]),e.exports=t},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(190);case"v8light":return n(192)}},function(e,t,n){var a=n(55),r=n(191);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".kbnFieldButton{align-items:center;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;margin-bottom:4px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton--isDraggable{background:#25262e}.kbnFieldButton--isDraggable:focus,.kbnFieldButton--isDraggable:focus-within,.kbnFieldButton--isDraggable:hover{border-radius:6px;box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a;z-index:2}.kbnFieldButton--isDraggable .kbnFieldButton__button:focus,.kbnFieldButton--isDraggable .kbnFieldButton__button:hover{cursor:grab}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0;margin-right:8px}.kbnFieldButton__name{flex-grow:1;word-break:break-word}.kbnFieldButton__infoIcon{flex-shrink:0;margin-left:4px}.kbnFieldButton__fieldAction{margin-right:8px}.kbnFieldButton--small{font-size:12px}.kbnFieldButton--small .kbnFieldButton__button{padding:4px}.kbnFieldButton--small .kbnFieldButton__fieldAction,.kbnFieldButton--small .kbnFieldButton__fieldIcon{margin-right:4px}",""]),e.exports=t},function(e,t,n){var a=n(55),r=n(193);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".kbnFieldButton{align-items:center;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;margin-bottom:4px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton--isDraggable{background:#fff}.kbnFieldButton--isDraggable:focus,.kbnFieldButton--isDraggable:focus-within,.kbnFieldButton--isDraggable:hover{border-radius:6px;box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a;z-index:2}.kbnFieldButton--isDraggable .kbnFieldButton__button:focus,.kbnFieldButton--isDraggable .kbnFieldButton__button:hover{cursor:grab}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0;margin-right:8px}.kbnFieldButton__name{flex-grow:1;word-break:break-word}.kbnFieldButton__infoIcon{flex-shrink:0;margin-left:4px}.kbnFieldButton__fieldAction{margin-right:8px}.kbnFieldButton--small{font-size:12px}.kbnFieldButton--small .kbnFieldButton__button{padding:4px}.kbnFieldButton--small .kbnFieldButton__fieldAction,.kbnFieldButton--small .kbnFieldButton__fieldIcon{margin-right:4px}",""]),e.exports=t},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(195);case"v8light":return n(197)}},function(e,t,n){var a=n(55),r=n(196);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".lnFieldPicker__option--incompatible{color:#343741}.lnFieldPicker__option--nonExistant{background-color:#25262e}",""]),e.exports=t},function(e,t,n){var a=n(55),r=n(198);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".lnFieldPicker__option--incompatible{color:#d3dae6}.lnFieldPicker__option--nonExistant{background-color:#f5f7fa}",""]),e.exports=t},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(200);case"v8light":return n(202)}},function(e,t,n){var a=n(55),r=n(201);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,'@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsPalettePanelContainer{align-items:stretch;animation:euiFlyoutAnimation .25s cubic-bezier(.694,.0482,.335,1);background:#1d1e24;border-left:1px solid #343741;bottom:0;box-shadow:0 2.7px 9px rgba(0,0,0,.325),0 9.4px 24px rgba(0,0,0,.225),0 21.8px 43px #0003;-webkit-clip-path:polygon(-50% 0,100% 0,100% 100%,-50% 100%);clip-path:polygon(-50% 0,100% 0,100% 100%,-50% 100%);display:flex;flex-direction:column;height:100%;left:0;position:fixed;position:absolute;right:0;top:0;z-index:1000;z-index:3001}.lnsPalettePanelContainer__header{padding:16px}.lnsPalettePanelContainer__content{flex:1;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.lnsPalettePanelContainer__content::-webkit-scrollbar{height:16px;width:16px}.lnsPalettePanelContainer__content::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.lnsPalettePanelContainer__content::-webkit-scrollbar-corner,.lnsPalettePanelContainer__content::-webkit-scrollbar-track{background-color:#0000}.lnsPalettePanelContainer__content:focus{outline:none}.lnsPalettePanelContainer__content[tabindex="0"]:focus:focus-visible{outline-style:auto}.lnsPalettePanelContainer__footer{padding:16px}',""]),e.exports=t},function(e,t,n){var a=n(55),r=n(203);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,'@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsPalettePanelContainer{align-items:stretch;animation:euiFlyoutAnimation .25s cubic-bezier(.694,.0482,.335,1);background:#fff;border-left:1px solid #d3dae6;bottom:0;box-shadow:0 2.7px 9px #00000021,0 9.4px 24px #00000017,0 21.8px 43px #00000014;-webkit-clip-path:polygon(-50% 0,100% 0,100% 100%,-50% 100%);clip-path:polygon(-50% 0,100% 0,100% 100%,-50% 100%);display:flex;flex-direction:column;height:100%;left:0;position:fixed;position:absolute;right:0;top:0;z-index:1000;z-index:3001}.lnsPalettePanelContainer__header{padding:16px}.lnsPalettePanelContainer__content{flex:1;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.lnsPalettePanelContainer__content::-webkit-scrollbar{height:16px;width:16px}.lnsPalettePanelContainer__content::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.lnsPalettePanelContainer__content::-webkit-scrollbar-corner,.lnsPalettePanelContainer__content::-webkit-scrollbar-track{background-color:#0000}.lnsPalettePanelContainer__content:focus{outline:none}.lnsPalettePanelContainer__content[tabindex="0"]:focus:focus-visible{outline-style:auto}.lnsPalettePanelContainer__footer{padding:16px}',""]),e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(8);t.default=function(e,t){void 0===t&&(t=0);var n=a.useRef(!1),r=a.useRef(),o=a.useRef(e),i=a.useCallback((function(){return n.current}),[]),s=a.useCallback((function(){n.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){n.current=!0,o.current()}),t)}),[t]),l=a.useCallback((function(){n.current=null,r.current&&clearTimeout(r.current)}),[]);return a.useEffect((function(){o.current=e}),[e]),a.useEffect((function(){return s(),l}),[t]),[i,l,s]}},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(206);case"v8light":return n(208)}},function(e,t,n){var a=n(55),r=n(207);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,'.lnsDimensionEditorSection{padding-bottom:16px;padding-top:16px}.lnsDimensionEditorSection:first-child{padding-top:0}.lnsDimensionEditorSection:first-child .lnsDimensionEditorSection__border{display:none}.lnsDimensionEditorSection__border{position:relative}.lnsDimensionEditorSection__border:before{border-top:1px solid #343741;content:"";left:-16px;position:absolute;right:-16px;top:-16px}.lnsDimensionEditorSection__heading{padding-bottom:16px}',""]),e.exports=t},function(e,t,n){var a=n(55),r=n(209);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,'.lnsDimensionEditorSection{padding-bottom:16px;padding-top:16px}.lnsDimensionEditorSection:first-child{padding-top:0}.lnsDimensionEditorSection:first-child .lnsDimensionEditorSection__border{display:none}.lnsDimensionEditorSection__border{position:relative}.lnsDimensionEditorSection__border:before{border-top:1px solid #d3dae6;content:"";left:-16px;position:absolute;right:-16px;top:-16px}.lnsDimensionEditorSection__heading{padding-bottom:16px}',""]),e.exports=t},,function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var a,r,o;if(Array.isArray(t)){if((a=t.length)!=n.length)return!1;for(r=a;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((a=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=a;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=a;0!=r--;){var i=o[r];if(!("_owner"===i&&t.$$typeof||e(t[i],n[i])))return!1}return!0}return t!=t&&n!=n}},,,,,,,,,,function(e,t,n){var a=n(222),r=n(223);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[o+s]=i[s];return t||r(i)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var a=new Uint8Array(16);e.exports=function(){return n(a),a}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],a=0;a<256;++a)n[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,r=n;return[r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]]].join("")}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(362);case"v8light":return n(364)}},function(e,t,n){var a=n(55),r=n(363);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,"@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsDragDrop{transition:.15s ease-in-out;transition-property:background-color,border-color,opacity;-webkit-user-select:none;user-select:none;z-index:1}.lnsDragDrop_ghost{border:1px dashed #343741;bottom:100%;left:0;margin:0!important;opacity:.9;outline:2px solid currentColor;outline-style:auto;pointer-events:none;position:absolute!important;transform:translate(-12px,8px);width:100%;z-index:3}.lnsDragDrop-isDraggable,.lnsDragDrop_ghost{background:#1d1e24;box-shadow:0 .8px .8px #0000001a,0 2.3px 2px rgba(0,0,0,.075);cursor:grab}.lnsDragDrop-isDraggable{border:1px dashed #0000}.lnsDragDrop-isDraggable:hover{border:1px dashed #535966}.lnsDragDrop-isDraggable>.kbnFieldButton__button{cursor:grab}.lnsDragDrop-isDraggable:focus{outline:2px solid currentColor}.lnsDragDrop-isDraggable:focus:focus-visible{outline-style:auto}.lnsDragDrop-isDraggable:focus:not(:focus-visible){outline:none}.lnsDragDrop-isDroppable{border:1px dashed #343741}.lnsDragDrop-isDropTarget{background-color:#54b3991a;border:1px dashed #343741}.lnsDragDrop-isDropTarget>*{pointer-events:none}.lnsDragDrop-isActiveGroup{background-color:#54b39940}.lnsDragDrop-isActiveDropTarget{background-color:#54b39940;border:1px dashed #54b399;z-index:3}.lnsDragDrop-isNotDroppable{opacity:.5}.lnsDragDrop-isReplacing,.lnsDragDrop-isReplacing .lnsLayerPanel__triggerText{text-decoration:line-through}.lnsDragDrop-notCompatible{background-color:#2e2d25;border:1px dashed #343741}.lnsDragDrop-notCompatible.lnsDragDrop-isActiveDropTarget{background-color:#fbd01140;border-color:#d6bf57}.lnsDragDrop__container{height:100%;position:relative;width:100%}.lnsDragDrop__container.lnsDragDrop__container-active{z-index:3}.lnsDragDrop__reorderableDrop{height:calc(100% + 8px);position:absolute;top:0;width:100%}.lnsDragDrop-translatableDrop{pointer-events:none;transform:translateY(0);transition:transform .15s ease-in-out}.lnsDragDrop-translatableDrop .lnsDragDrop-isDropTarget{background:#1d1e24;border:1px dashed #0000;box-shadow:0 .8px .8px #0000001a,0 2.3px 2px rgba(0,0,0,.075);cursor:grab}.lnsDragDrop-translatableDrop .lnsDragDrop-isActiveDropTarget{z-index:3}.lnsDragDrop-translatableDrag{position:relative;transform:translateY(0);transition:transform .15s ease-in-out;z-index:1}.lnsDragDrop__keyboardHandler{border-radius:6px;height:100%;position:absolute;top:0;width:100%}.lnsDragDrop__keyboardHandler:focus,.lnsDragDrop__keyboardHandler:focus-within{outline:2px solid currentColor;pointer-events:none;z-index:2}.lnsDragDrop__keyboardHandler:focus-within:focus-visible,.lnsDragDrop__keyboardHandler:focus:focus-visible{outline-style:auto}.lnsDragDrop__keyboardHandler:focus-within:not(:focus-visible),.lnsDragDrop__keyboardHandler:focus:not(:focus-visible){outline:none}.lnsDragDrop-isHidden{opacity:0}.lnsDragDrop-isHidden .lnsDragDrop__keyboardHandler:focus,.lnsDragDrop-isHidden .lnsDragDrop__keyboardHandler:focus-within{animation:none}.lnsDragDrop__extraDrops{opacity:0;position:absolute;right:calc(100% + 8px);top:0;transition:opacity .15s ease-in-out;visibility:hidden;width:100%;z-index:2}.lnsDragDrop__extraDrops-visible{opacity:1;visibility:visible}.lnsDragDrop__diamondPath{left:-16px;position:absolute;top:0;width:30%;z-index:0}.lnsDragDrop__extraDropWrapper{background:#25262e;border-radius:0;height:100%;padding:4px;position:relative;width:100%}.lnsDragDrop__extraDropWrapper:first-child,.lnsDragDrop__extraDropWrapper:first-child .lnsDragDrop__extraDrop{border-top-left-radius:4px;border-top-right-radius:4px}.lnsDragDrop__extraDropWrapper:last-child,.lnsDragDrop__extraDropWrapper:last-child .lnsDragDrop__extraDrop{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.lnsDragDrop__extraDropWrapper+.lnsDragDrop__extraDropWrapper{margin-top:-1px}.lnsDragDrop__extraDrop{color:#7dded8;height:40px;min-width:112px;padding:4px;position:relative}.lnsDragDrop__extraDrop.lnsDragDrop-incompatibleExtraDrop{color:#f3d371}",""]),e.exports=t},function(e,t,n){var a=n(55),r=n(365);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,"@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsDragDrop{transition:.15s ease-in-out;transition-property:background-color,border-color,opacity;-webkit-user-select:none;user-select:none;z-index:1}.lnsDragDrop_ghost{border:1px dashed #d3dae6;bottom:100%;left:0;margin:0!important;opacity:.9;outline:2px solid currentColor;outline-style:auto;pointer-events:none;position:absolute!important;transform:translate(-12px,8px);width:100%;z-index:3}.lnsDragDrop-isDraggable,.lnsDragDrop_ghost{background:#fff;box-shadow:0 .8px .8px #0000000a,0 2.3px 2px #00000008;cursor:grab}.lnsDragDrop-isDraggable{border:1px dashed #0000}.lnsDragDrop-isDraggable:hover{border:1px dashed #98a2b3}.lnsDragDrop-isDraggable>.kbnFieldButton__button{cursor:grab}.lnsDragDrop-isDraggable:focus{outline:2px solid currentColor}.lnsDragDrop-isDraggable:focus:focus-visible{outline-style:auto}.lnsDragDrop-isDraggable:focus:not(:focus-visible){outline:none}.lnsDragDrop-isDroppable{border:1px dashed #d3dae6}.lnsDragDrop-isDropTarget{background-color:#54b3991a;border:1px dashed #d3dae6}.lnsDragDrop-isDropTarget>*{pointer-events:none}.lnsDragDrop-isActiveGroup{background-color:#54b39940}.lnsDragDrop-isActiveDropTarget{background-color:#54b39940;border:1px dashed #54b399;z-index:3}.lnsDragDrop-isNotDroppable{opacity:.5}.lnsDragDrop-isReplacing,.lnsDragDrop-isReplacing .lnsLayerPanel__triggerText{text-decoration:line-through}.lnsDragDrop-notCompatible{background-color:#fff9e8;border:1px dashed #d3dae6}.lnsDragDrop-notCompatible.lnsDragDrop-isActiveDropTarget{background-color:#fbd01140;border-color:#d6bf57}.lnsDragDrop__container{height:100%;position:relative;width:100%}.lnsDragDrop__container.lnsDragDrop__container-active{z-index:3}.lnsDragDrop__reorderableDrop{height:calc(100% + 8px);position:absolute;top:0;width:100%}.lnsDragDrop-translatableDrop{pointer-events:none;transform:translateY(0);transition:transform .15s ease-in-out}.lnsDragDrop-translatableDrop .lnsDragDrop-isDropTarget{background:#fff;border:1px dashed #0000;box-shadow:0 .8px .8px #0000000a,0 2.3px 2px #00000008;cursor:grab}.lnsDragDrop-translatableDrop .lnsDragDrop-isActiveDropTarget{z-index:3}.lnsDragDrop-translatableDrag{position:relative;transform:translateY(0);transition:transform .15s ease-in-out;z-index:1}.lnsDragDrop__keyboardHandler{border-radius:6px;height:100%;position:absolute;top:0;width:100%}.lnsDragDrop__keyboardHandler:focus,.lnsDragDrop__keyboardHandler:focus-within{outline:2px solid currentColor;pointer-events:none;z-index:2}.lnsDragDrop__keyboardHandler:focus-within:focus-visible,.lnsDragDrop__keyboardHandler:focus:focus-visible{outline-style:auto}.lnsDragDrop__keyboardHandler:focus-within:not(:focus-visible),.lnsDragDrop__keyboardHandler:focus:not(:focus-visible){outline:none}.lnsDragDrop-isHidden{opacity:0}.lnsDragDrop-isHidden .lnsDragDrop__keyboardHandler:focus,.lnsDragDrop-isHidden .lnsDragDrop__keyboardHandler:focus-within{animation:none}.lnsDragDrop__extraDrops{opacity:0;position:absolute;right:calc(100% + 8px);top:0;transition:opacity .15s ease-in-out;visibility:hidden;width:100%;z-index:2}.lnsDragDrop__extraDrops-visible{opacity:1;visibility:visible}.lnsDragDrop__diamondPath{left:-16px;position:absolute;top:0;width:30%;z-index:0}.lnsDragDrop__extraDropWrapper{background:#f5f7fa;border-radius:0;height:100%;padding:4px;position:relative;width:100%}.lnsDragDrop__extraDropWrapper:first-child,.lnsDragDrop__extraDropWrapper:first-child .lnsDragDrop__extraDrop{border-top-left-radius:4px;border-top-right-radius:4px}.lnsDragDrop__extraDropWrapper:last-child,.lnsDragDrop__extraDropWrapper:last-child .lnsDragDrop__extraDrop{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.lnsDragDrop__extraDropWrapper+.lnsDragDrop__extraDropWrapper{margin-top:-1px}.lnsDragDrop__extraDrop{color:#007e77;height:40px;min-width:112px;padding:4px;position:relative}.lnsDragDrop__extraDrop.lnsDragDrop-incompatibleExtraDrop{color:#8a6a0a}",""]),e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(34),r=n(367),o=a.__importDefault(n(130)),i=function(e,t){return e.every((function(e,n){return r.equal(e,t[n])}))};t.default=function(e,t){o.default(e,t,i)}},function(e,t){var n=Object.keys;t.equal=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;for(var a=n(e),r=a.length,o=0;o<r;o++)if(!(a[o]in t))return!1;for(o=0;o<r;o++)if(e[a[o]]!==t[a[o]])return!1;return r===n(t).length}},,,,,,,,,,,,function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(380);case"v8light":return n(382)}},function(e,t,n){var a=n(55),r=n(381);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".lnsDataPanelWrapper{background-color:#000;flex:1 0 100%;overflow:hidden}.lnsDataPanelWrapper__switchSource{position:absolute;right:20px;top:20px}",""]),e.exports=t},function(e,t,n){var a=n(55),r=n(383);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".lnsDataPanelWrapper{background-color:#f5f7fa;flex:1 0 100%;overflow:hidden}.lnsDataPanelWrapper__switchSource{position:absolute;right:20px;top:20px}",""]),e.exports=t},function(e,t,n){(function(e){!function(t){"use strict";function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function a(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function r(e,t,n){r.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function i(e,t){i.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function l(e,t,n){var a=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,a),e}function u(e){var t=void 0===e?"undefined":D(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,n,a,d,p,f){f=f||[];var b=(d=d||[]).slice(0);if(void 0!==p){if(a){if("function"==typeof a&&a(b,p))return;if("object"===(void 0===a?"undefined":D(a))){if(a.prefilter&&a.prefilter(b,p))return;if(a.normalize){var g=a.normalize(b,p,e,t);g&&(e=g[0],t=g[1])}}}b.push(p)}"regexp"===u(e)&&"regexp"===u(t)&&(e=e.toString(),t=t.toString());var m=void 0===e?"undefined":D(e),h=void 0===t?"undefined":D(t),v="undefined"!==m||f&&f[f.length-1].lhs&&f[f.length-1].lhs.hasOwnProperty(p),y="undefined"!==h||f&&f[f.length-1].rhs&&f[f.length-1].rhs.hasOwnProperty(p);if(!v&&y)n(new o(b,t));else if(!y&&v)n(new i(b,e));else if(u(e)!==u(t))n(new r(b,e,t));else if("date"===u(e)&&e-t!=0)n(new r(b,e,t));else if("object"===m&&null!==e&&null!==t)if(f.filter((function(t){return t.lhs===e})).length)e!==t&&n(new r(b,e,t));else{if(f.push({lhs:e,rhs:t}),Array.isArray(e)){var x;for(e.length,x=0;x<e.length;x++)x>=t.length?n(new s(b,x,new i(void 0,e[x]))):c(e[x],t[x],n,a,b,x,f);for(;x<t.length;)n(new s(b,x,new o(void 0,t[x++])))}else{var j=Object.keys(e),_=Object.keys(t);j.forEach((function(r,o){var i=_.indexOf(r);i>=0?(c(e[r],t[r],n,a,b,r,f),_=l(_,i)):c(e[r],void 0,n,a,b,r,f)})),_.forEach((function(e){c(void 0,t[e],n,a,b,e,f)}))}f.length=f.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||n(new r(b,e,t)))}function d(e,t,n,a){return a=a||[],c(e,t,(function(e){e&&a.push(e)}),n),a.length?a:void 0}function p(e,t,n){if(n.path&&n.path.length){var a,r=e[t],o=n.path.length-1;for(a=0;a<o;a++)r=r[n.path[a]];switch(n.kind){case"A":p(r[n.path[a]],n.index,n.item);break;case"D":delete r[n.path[a]];break;case"E":case"N":r[n.path[a]]=n.rhs}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":e=l(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function f(e,t,n){if(e&&t&&n&&n.kind){for(var a=e,r=-1,o=n.path?n.path.length-1:0;++r<o;)void 0===a[n.path[r]]&&(a[n.path[r]]="number"==typeof n.path[r]?[]:{}),a=a[n.path[r]];switch(n.kind){case"A":p(n.path?a[n.path[r]]:a,n.index,n.item);break;case"D":delete a[n.path[r]];break;case"E":case"N":a[n.path[r]]=n.rhs}}}function b(e,t,n){if(n.path&&n.path.length){var a,r=e[t],o=n.path.length-1;for(a=0;a<o;a++)r=r[n.path[a]];switch(n.kind){case"A":b(r[n.path[a]],n.index,n.item);break;case"D":case"E":r[n.path[a]]=n.lhs;break;case"N":delete r[n.path[a]]}}else switch(n.kind){case"A":b(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=l(e,t)}return e}function g(e){return"color: "+L[e].color+"; font-weight: bold"}function m(e,t,n,a){var r=d(e,t);try{a?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}r?r.forEach((function(e){var t=e.kind,a=function(e){var t=e.kind,n=e.path,a=e.lhs,r=e.rhs,o=e.index,i=e.item;switch(t){case"E":return[n.join("."),a,"",r];case"N":return[n.join("."),r];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+o+"]",i];default:return[]}}(e);n.log.apply(n,["%c "+L[t].text,g(t)].concat(k(a)))})):n.log(" no diff ");try{n.groupEnd()}catch(e){n.log(" diff end  ")}}function h(e,t,n,a){switch(void 0===e?"undefined":D(e)){case"object":return"function"==typeof e[a]?e[a].apply(e,k(n)):e[a];case"function":return e(t);default:return e}}function v(e,t){var n=t.logger,a=t.actionTransformer,r=t.titleFormatter,o=void 0===r?function(e){var t=e.timestamp,n=e.duration;return function(e,a,r){var o=["action"];return o.push("%c"+String(e.type)),t&&o.push("%c@ "+a),n&&o.push("%c(in "+r.toFixed(2)+" ms)"),o.join(" ")}}(t):r,i=t.collapsed,s=t.colors,l=t.level,u=t.diff,c=void 0===t.titleFormatter;e.forEach((function(r,d){var p=r.started,f=r.startedTime,b=r.action,g=r.prevState,v=r.error,y=r.took,x=r.nextState,j=e[d+1];j&&(x=j.prevState,y=j.started-p);var _=a(b),O="function"==typeof i?i((function(){return x}),b,r):i,D=w(f),k=s.title?"color: "+s.title(_)+";":"",P=["color: gray; font-weight: lighter;"];P.push(k),t.timestamp&&P.push("color: gray; font-weight: lighter;"),t.duration&&P.push("color: gray; font-weight: lighter;");var L=o(_,D,y);try{O?s.title&&c?n.groupCollapsed.apply(n,["%c "+L].concat(P)):n.groupCollapsed(L):s.title&&c?n.group.apply(n,["%c "+L].concat(P)):n.group(L)}catch(e){n.log(L)}var S=h(l,_,[g],"prevState"),I=h(l,_,[_],"action"),C=h(l,_,[v,g],"error"),E=h(l,_,[x],"nextState");if(S)if(s.prevState){var M="color: "+s.prevState(g)+"; font-weight: bold";n[S]("%c prev state",M,g)}else n[S]("prev state",g);if(I)if(s.action){var T="color: "+s.action(_)+"; font-weight: bold";n[I]("%c action    ",T,_)}else n[I]("action    ",_);if(v&&C)if(s.error){var A="color: "+s.error(v,g)+"; font-weight: bold;";n[C]("%c error     ",A,v)}else n[C]("error     ",v);if(E)if(s.nextState){var F="color: "+s.nextState(x)+"; font-weight: bold";n[E]("%c next state",F,x)}else n[E]("next state",x);u&&m(g,x,n,O);try{n.groupEnd()}catch(e){n.log(" log end ")}}))}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},S,e),n=t.logger,a=t.stateTransformer,r=t.errorTransformer,o=t.predicate,i=t.logErrors,s=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var l=[];return function(e){var n=e.getState;return function(e){return function(u){if("function"==typeof o&&!o(n,u))return e(u);var c={};l.push(c),c.started=O.now(),c.startedTime=new Date,c.prevState=a(n()),c.action=u;var d=void 0;if(i)try{d=e(u)}catch(e){c.error=r(e)}else d=e(u);c.took=O.now()-c.started,c.nextState=a(n());var p=t.diff&&"function"==typeof s?s(n,u):t.diff;if(v(l,Object.assign({},t,{diff:p})),l.length=0,c.error)throw c.error;return d}}}}var x,j,_=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},w=function(e){return _(e.getHours(),2)+":"+_(e.getMinutes(),2)+":"+_(e.getSeconds(),2)+"."+_(e.getMilliseconds(),3)},O="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},P=[];x="object"===(void 0===e?"undefined":D(e))&&e?e:"undefined"!=typeof window?window:{},(j=x.DeepDiff)&&P.push((function(){void 0!==j&&x.DeepDiff===d&&(x.DeepDiff=j,j=void 0)})),n(r,a),n(o,a),n(i,a),n(s,a),Object.defineProperties(d,{diff:{value:d,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&c(e,t,(function(a){n&&!n(e,t,a)||f(e,t,a)}))},enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var a,r,o=e;for(r=n.path.length-1,a=0;a<r;a++)void 0===o[n.path[a]]&&(o[n.path[a]]={}),o=o[n.path[a]];switch(n.kind){case"A":b(o[n.path[a]],n.index,n.item);break;case"D":case"E":o[n.path[a]]=n.lhs;break;case"N":delete o[n.path[a]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==j},enumerable:!0},noConflict:{value:function(){return P&&(P.forEach((function(e){e()})),P=null),d},enumerable:!0}});var L={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},S={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?y()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};t.defaults=S,t.createLogger=y,t.logger=I,t.default=I,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(385))},function(e,t,n){e.exports=n(14)(171)},function(e,t,n){"use strict";var a=n(68).default;t.__esModule=!0;var r=a(n(387));t.Provider=r.default;var o=a(n(149));t.connectAdvanced=o.default;var i=n(78);t.ReactReduxContext=i.ReactReduxContext;var s=a(n(391));t.connect=s.default;var l=n(399);t.useDispatch=l.useDispatch,t.createDispatchHook=l.createDispatchHook;var u=n(400);t.useSelector=u.useSelector,t.createSelectorHook=u.createSelectorHook;var c=n(154);t.useStore=c.useStore,t.createStoreHook=c.createStoreHook;var d=a(n(150));t.shallowEqual=d.default},function(e,t,n){"use strict";var a=n(68).default,r=n(147).default;t.__esModule=!0,t.default=void 0;var o=r(n(8)),i=(a(n(388)),n(78)),s=n(109),l=n(110);t.default=function(e){var t=e.store,n=e.context,a=e.children,r=(0,o.useMemo)((function(){var e=(0,s.createSubscription)(t);return{store:t,subscription:e}}),[t]),u=(0,o.useMemo)((function(){return t.getState()}),[t]);(0,l.useIsomorphicLayoutEffect)((function(){var e=r.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[r,u]);var c=n||i.ReactReduxContext;return o.default.createElement(c.Provider,{value:r},a)}},function(e,t,n){e.exports=n(14)(8)},function(e,t,n){e.exports=n(14)(264)},function(e,t,n){e.exports=n(14)(447)},function(e,t,n){"use strict";var a=n(68).default;t.__esModule=!0,t.createConnect=g,t.default=void 0;var r=a(n(12)),o=a(n(111)),i=a(n(149)),s=a(n(150)),l=a(n(392)),u=a(n(395)),c=a(n(396)),d=a(n(397)),p=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function f(e,t,n){for(var a=t.length-1;a>=0;a--){var r=t[a](e);if(r)return r}return function(t,a){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+a.wrappedComponentName+".")}}function b(e,t){return e===t}function g(e){var t=void 0===e?{}:e,n=t.connectHOC,a=void 0===n?i.default:n,g=t.mapStateToPropsFactories,m=void 0===g?u.default:g,h=t.mapDispatchToPropsFactories,v=void 0===h?l.default:h,y=t.mergePropsFactories,x=void 0===y?c.default:y,j=t.selectorFactory,_=void 0===j?d.default:j;return function(e,t,n,i){void 0===i&&(i={});var l=i,u=l.pure,c=void 0===u||u,d=l.areStatesEqual,g=void 0===d?b:d,h=l.areOwnPropsEqual,y=void 0===h?s.default:h,j=l.areStatePropsEqual,w=void 0===j?s.default:j,O=l.areMergedPropsEqual,D=void 0===O?s.default:O,k=(0,o.default)(l,p),P=f(e,m,"mapStateToProps"),L=f(t,v,"mapDispatchToProps"),S=f(n,x,"mergeProps");return a(_,(0,r.default)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:P,initMapDispatchToProps:L,initMergeProps:S,pure:c,areStatesEqual:g,areOwnPropsEqual:y,areStatePropsEqual:w,areMergedPropsEqual:D},k))}}var m=g();t.default=m},function(e,t,n){"use strict";var a=n(68).default;t.__esModule=!0,t.default=void 0,t.whenMapDispatchToPropsIsFunction=i,t.whenMapDispatchToPropsIsMissing=s,t.whenMapDispatchToPropsIsObject=l;var r=a(n(393)),o=n(151);function i(e){return"function"==typeof e?(0,o.wrapMapToPropsFunc)(e,"mapDispatchToProps"):void 0}function s(e){return e?void 0:(0,o.wrapMapToPropsConstant)((function(e){return{dispatch:e}}))}function l(e){return e&&"object"==typeof e?(0,o.wrapMapToPropsConstant)((function(t){return(0,r.default)(e,t)})):void 0}var u=[i,s,l];t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={},a=function(a){var r=e[a];"function"==typeof r&&(n[a]=function(){return t(r.apply(void 0,arguments))})};for(var r in e)a(r);return n}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.whenMapStateToPropsIsFunction=r,t.whenMapStateToPropsIsMissing=o;var a=n(151);function r(e){return"function"==typeof e?(0,a.wrapMapToPropsFunc)(e,"mapStateToProps"):void 0}function o(e){return e?void 0:(0,a.wrapMapToPropsConstant)((function(){return{}}))}var i=[r,o];t.default=i},function(e,t,n){"use strict";var a=n(68).default;t.__esModule=!0,t.default=void 0,t.defaultMergeProps=o,t.whenMergePropsIsFunction=s,t.whenMergePropsIsOmitted=l,t.wrapMergePropsFunc=i;var r=a(n(12));function o(e,t,n){return(0,r.default)({},n,e,t)}function i(e){return function(t,n){n.displayName;var a,r=n.pure,o=n.areMergedPropsEqual,i=!1;return function(t,n,s){var l=e(t,n,s);return i?r&&o(l,a)||(a=l):(i=!0,a=l),a}}}function s(e){return"function"==typeof e?i(e):void 0}function l(e){return e?void 0:function(){return o}}a(n(152));var u=[s,l];t.default=u},function(e,t,n){"use strict";var a=n(68).default;t.__esModule=!0,t.default=function(e,t){var n=t.initMapStateToProps,a=t.initMapDispatchToProps,l=t.initMergeProps,u=(0,r.default)(t,o),c=n(e,u),d=a(e,u),p=l(e,u);return(u.pure?s:i)(c,d,p,e,u)},t.impureFinalPropsSelectorFactory=i,t.pureFinalPropsSelectorFactory=s;var r=a(n(111)),o=(a(n(398)),["initMapStateToProps","initMapDispatchToProps","initMergeProps"]);function i(e,t,n,a){return function(r,o){return n(e(r,o),t(a,o),o)}}function s(e,t,n,a,r){var o,i,s,l,u,c=r.areStatesEqual,d=r.areOwnPropsEqual,p=r.areStatePropsEqual,f=!1;return function(r,b){return f?function(r,f){var b,g,m=!d(f,i),h=!c(r,o);return o=r,i=f,m&&h?(s=e(o,i),t.dependsOnOwnProps&&(l=t(a,i)),u=n(s,l,i)):m?(e.dependsOnOwnProps&&(s=e(o,i)),t.dependsOnOwnProps&&(l=t(a,i)),u=n(s,l,i)):h?(b=e(o,i),g=!p(b,s),s=b,g&&(u=n(s,l,i)),u):u}(r,b):(s=e(o=r,i=b),l=t(a,i),u=n(s,l,i),f=!0,u)}}},function(e,t,n){"use strict";var a=n(68).default;t.__esModule=!0,t.default=function(e,t,n,a){o(e,"mapStateToProps",a),o(t,"mapDispatchToProps",a),o(n,"mergeProps",a)};var r=a(n(153));function o(e,t,n){if(!e)throw new Error("Unexpected value for "+t+" in "+n+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||Object.prototype.hasOwnProperty.call(e,"dependsOnOwnProps")||(0,r.default)("The selector for "+t+" of "+n+" did not specify a value for dependsOnOwnProps.")}},function(e,t,n){"use strict";t.__esModule=!0,t.createDispatchHook=o,t.useDispatch=void 0;var a=n(78),r=n(154);function o(e){void 0===e&&(e=a.ReactReduxContext);var t=e===a.ReactReduxContext?r.useStore:(0,r.createStoreHook)(e);return function(){return t().dispatch}}var i=o();t.useDispatch=i},function(e,t,n){"use strict";t.__esModule=!0,t.createSelectorHook=u,t.useSelector=void 0;var a=n(8),r=n(155),o=n(109),i=n(110),s=n(78),l=function(e,t){return e===t};function u(e){void 0===e&&(e=s.ReactReduxContext);var t=e===s.ReactReduxContext?r.useReduxContext:function(){return(0,a.useContext)(e)};return function(e,n){void 0===n&&(n=l);var r=t(),s=function(e,t,n,r){var s,l=(0,a.useReducer)((function(e){return e+1}),0)[1],u=(0,a.useMemo)((function(){return(0,o.createSubscription)(n,r)}),[n,r]),c=(0,a.useRef)(),d=(0,a.useRef)(),p=(0,a.useRef)(),f=(0,a.useRef)(),b=n.getState();try{if(e!==d.current||b!==p.current||c.current){var g=e(b);s=void 0!==f.current&&t(g,f.current)?f.current:g}else s=f.current}catch(e){throw c.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+c.current.stack+"\n\n"),e}return(0,i.useIsomorphicLayoutEffect)((function(){d.current=e,p.current=b,f.current=s,c.current=void 0})),(0,i.useIsomorphicLayoutEffect)((function(){function e(){try{var e=n.getState();if(e===p.current)return;var a=d.current(e);if(t(a,f.current))return;f.current=a,p.current=e}catch(e){c.current=e}l()}return u.onStateChange=e,u.trySubscribe(),e(),function(){return u.tryUnsubscribe()}}),[n,u]),s}(e,n,r.store,r.subscription);return(0,a.useDebugValue)(s),s}}var c=u();t.useSelector=c},function(e,t,n){"use strict";t.__esModule=!0,t.unstable_batchedUpdates=void 0;var a=n(25);t.unstable_batchedUpdates=a.unstable_batchedUpdates},function(e,t,n){var a,r=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__generator||function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__spreadArray||function(e,t){for(var n=0,a=t.length,r=e.length;n<a;n++,r++)e[r]=t[n];return e},s=Object.create,l=Object.defineProperty,u=Object.defineProperties,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,b=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},v=function(e,t){for(var n in t||(t={}))g.call(t,n)&&h(e,n,t[n]);if(f)for(var a=0,r=f(t);a<r.length;a++)m.call(t,n=r[a])&&h(e,n,t[n]);return e},y=function(e,t){return u(e,d(t))},x=function(e){return l(e,"__esModule",{value:!0})},j=function(e,t,n){if(t&&"object"==typeof t||"function"==typeof t)for(var a=function(a){g.call(e,a)||"default"===a||l(e,a,{get:function(){return t[a]},enumerable:!(n=c(t,a))||n.enumerable})},r=0,o=p(t);r<o.length;r++)a(o[r]);return e},_=function(e){return j(x(l(null!=e?s(b(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)};x(t),function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(t,{MiddlewareArray:function(){return T},configureStore:function(){return V},createAction:function(){return W},createAsyncThunk:function(){return se},createDraftSafeSelector:function(){return L},createEntityAdapter:function(){return te},createImmutableStateInvariantMiddleware:function(){return F},createNextState:function(){return O.default},createReducer:function(){return $},createSelector:function(){return D.createSelector},createSerializableStateInvariantMiddleware:function(){return R},createSlice:function(){return K},current:function(){return O.current},findNonSerializableValue:function(){return z},freeze:function(){return O.freeze},getDefaultMiddleware:function(){return B},getType:function(){return q},isAllOf:function(){return de},isAnyOf:function(){return ce},isAsyncThunkAction:function(){return ve},isDraft:function(){return O.isDraft},isFulfilled:function(){return he},isImmutableDefault:function(){return A},isPending:function(){return be},isPlain:function(){return N},isPlainObject:function(){return E},isRejected:function(){return ge},isRejectedWithValue:function(){return me},miniSerializeError:function(){return ie},nanoid:function(){return ne},original:function(){return O.original},unwrapResult:function(){return le}});var w=_(n(92));j(t,_(n(115)));var O=_(n(92)),D=_(n(156)),k=_(n(92)),P=_(n(156)),L=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=P.createSelector.apply(void 0,e),a=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return n.apply(void 0,i([(0,k.isDraft)(e)?(0,k.current)(e):e],t))};return a},S=_(n(115)),I=_(n(115)),C="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?I.compose:I.compose.apply(null,arguments)};function E(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window;var M=_(n(405)),T=function(e){function t(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var r=e.apply(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return r(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,i([void 0],e[0].concat(this)))):new(t.bind.apply(t,i([void 0],e.concat(this))))},t}(Array);function A(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function F(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function N(e){var t=typeof e;return"undefined"===t||null===e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||E(e)}function z(e,t,n,a,r){var o;if(void 0===t&&(t=""),void 0===n&&(n=N),void 0===r&&(r=[]),!n(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e)return!1;for(var i=null!=a?a(e):Object.entries(e),s=r.length>0,l=0,u=i;l<u.length;l++){var c=u[l],d=c[0],p=c[1],f=t?t+"."+d:d;if(!(s&&r.indexOf(f)>=0)){if(!n(p))return{keyPath:f,value:p};if("object"==typeof p&&(o=z(p,f,n,a,r)))return o}}return!1}function R(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function B(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,a=new T;return n&&a.push("boolean"==typeof n?M.default:M.default.withExtraArgument(n.extraArgument)),a}function V(e){var t,n=function(e){return B(e)},a=e||{},r=a.reducer,o=void 0===r?void 0:r,s=a.middleware,l=void 0===s?n():s,u=a.devTools,c=void 0===u||u,d=a.preloadedState,p=void 0===d?void 0:d,f=a.enhancers,b=void 0===f?void 0:f;if("function"==typeof o)t=o;else{if(!E(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,S.combineReducers)(o)}var g=l;"function"==typeof g&&(g=g(n));var m=S.applyMiddleware.apply(void 0,g),h=S.compose;c&&(h=C(v({trace:!1},"object"==typeof c&&c)));var y=[m];Array.isArray(b)?y=i([m],b):"function"==typeof b&&(y=b(y));var x=h.apply(void 0,y);return(0,S.createStore)(t,p,x)}function W(e,t){function n(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var r=t.apply(void 0,n);if(!r)throw new Error("prepareAction did not return an object");return v(v({type:e,payload:r.payload},"meta"in r&&{meta:r.meta}),"error"in r&&{error:r.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function G(e){return["type","payload","error","meta"].indexOf(e)>-1}function q(e){return""+e}var H=_(n(92));function U(e){var t,n={},a=[],r={addCase:function(e,t){var a="string"==typeof e?e:e.type;if(a in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[a]=t,r},addMatcher:function(e,t){return a.push({matcher:e,reducer:t}),r},addDefaultCase:function(e){return t=e,r}};return e(r),[n,a,t]}function $(e,t,n,a){void 0===n&&(n=[]);var r,o="function"==typeof t?U(t):[t,n,a],s=o[0],l=o[1],u=o[2];if("function"==typeof e)r=function(){return(0,H.default)(e(),(function(){}))};else{var c=(0,H.default)(e,(function(){}));r=function(){return c}}function d(e,t){void 0===e&&(e=r());var n=i([s[t.type]],l.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[u]),n.reduce((function(e,n){if(n){var a;if((0,H.isDraft)(e))return void 0===(a=n(e,t))?e:a;if((0,H.isDraftable)(e))return(0,H.default)(e,(function(e){return n(e,t)}));if(void 0===(a=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return a}return e}),e)}return d.getInitialState=r,d}function K(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,a="function"==typeof e.initialState?e.initialState:(0,O.default)(e.initialState,(function(){})),r=e.reducers||{},o=Object.keys(r),i={},s={},l={};function u(){var t="function"==typeof e.extraReducers?U(e.extraReducers):[e.extraReducers],n=t[0],r=t[1],o=void 0===r?[]:r,i=t[2],l=void 0===i?void 0:i,u=v(v({},void 0===n?{}:n),s);return $(a,u,o,l)}return o.forEach((function(e){var n,a,o=r[e],u=t+"/"+e;"reducer"in o?(n=o.reducer,a=o.prepare):n=o,i[e]=n,s[u]=n,l[e]=a?W(u,a):W(u)})),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:l,caseReducers:i,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}var Y=_(n(92));function X(e){return function(t,n){var a=function(t){var a;E(a=n)&&"string"==typeof a.type&&Object.keys(a).every(G)?e(n.payload,t):e(n,t)};return(0,Y.isDraft)(t)?(a(t),t):(0,Y.default)(t,a)}}function J(e,t){return t(e)}function Q(e){return Array.isArray(e)||(e=Object.values(e)),e}function Z(e,t,n){for(var a=[],r=[],o=0,i=e=Q(e);o<i.length;o++){var s=i[o],l=J(s,t);l in n.entities?r.push({id:l,changes:s}):a.push(s)}return[a,r]}function ee(e){function t(t,n){var a=J(t,e);a in n.entities||(n.ids.push(a),n.entities[a]=t)}function n(e,n){for(var a=0,r=e=Q(e);a<r.length;a++)t(r[a],n)}function a(t,n){var a=J(t,e);a in n.entities||n.ids.push(a),n.entities[a]=t}function r(e,t){var n=!1;e.forEach((function(e){e in t.entities&&(delete t.entities[e],n=!0)})),n&&(t.ids=t.ids.filter((function(e){return e in t.entities})))}function o(t,n){var a={},r={};if(t.forEach((function(e){e.id in n.entities&&(r[e.id]={id:e.id,changes:v(v({},r[e.id]?r[e.id].changes:null),e.changes)})})),(t=Object.values(r)).length>0){var o=t.filter((function(t){return function(t,n,a){var r=Object.assign({},a.entities[n.id],n.changes),o=J(r,e),i=o!==n.id;return i&&(t[n.id]=o,delete a.entities[n.id]),a.entities[o]=r,i}(a,t,n)})).length>0;o&&(n.ids=n.ids.map((function(e){return a[e]||e})))}}function i(t,a){var r=Z(t,e,a),i=r[0];o(r[1],a),n(i,a)}return{removeAll:(s=function(e){Object.assign(e,{ids:[],entities:{}})},l=X((function(e,t){return s(t)})),function(e){return l(e,void 0)}),addOne:X(t),addMany:X(n),setOne:X(a),setMany:X((function(e,t){for(var n=0,r=e=Q(e);n<r.length;n++)a(r[n],t)})),setAll:X((function(e,t){e=Q(e),t.ids=[],t.entities={},n(e,t)})),updateOne:X((function(e,t){return o([e],t)})),updateMany:X(o),upsertOne:X((function(e,t){return i([e],t)})),upsertMany:X(i),removeOne:X((function(e,t){return r([e],t)})),removeMany:X(r)};var s,l}function te(e){void 0===e&&(e={});var t=v({sortComparer:!1,selectId:function(e){return e.id}},e),n=t.selectId,a=t.sortComparer,r={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},o={getSelectors:function(e){var t=function(e){return e.ids},n=function(e){return e.entities},a=L(t,n,(function(e,t){return e.map((function(e){return t[e]}))})),r=function(e,t){return t},o=function(e,t){return e[t]},i=L(t,(function(e){return e.length}));if(!e)return{selectIds:t,selectEntities:n,selectAll:a,selectTotal:i,selectById:L(n,r,o)};var s=L(e,n);return{selectIds:L(e,t),selectEntities:s,selectAll:L(e,a),selectTotal:L(e,i),selectById:L(s,r,o)}}},i=a?function(e,t){var n=ee(e);function a(t,n){var a=(t=Q(t)).filter((function(t){return!(J(t,e)in n.entities)}));0!==a.length&&s(a,n)}function r(e,t){0!==(e=Q(e)).length&&s(e,t)}function o(t,n){var a=[];t.forEach((function(t){return function(t,n,a){if(!(n.id in a.entities))return!1;var r=Object.assign({},a.entities[n.id],n.changes),o=J(r,e);return delete a.entities[n.id],t.push(r),o!==n.id}(a,t,n)})),0!==a.length&&s(a,n)}function i(t,n){var r=Z(t,e,n),i=r[0];o(r[1],n),a(i,n)}function s(n,a){n.forEach((function(t){a.entities[e(t)]=t}));var r=Object.values(a.entities);r.sort(t);var o=r.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(e[n]!==t[n])return!1;return!0})(a.ids,o)||(a.ids=o)}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:X((function(e,t){return a([e],t)})),updateOne:X((function(e,t){return o([e],t)})),upsertOne:X((function(e,t){return i([e],t)})),setOne:X((function(e,t){return r([e],t)})),setMany:X(r),setAll:X((function(e,t){e=Q(e),t.entities={},t.ids=[],a(e,t)})),addMany:X(a),updateMany:X(o),upsertMany:X(i)}}(n,a):ee(n);return v(v(v({selectId:n,sortComparer:a},r),o),i)}var ne=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},ae=["name","message","stack","code"],re=function(e,t){this.payload=e,this.meta=t},oe=function(e,t){this.payload=e,this.meta=t},ie=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0,a=ae;n<a.length;n++){var r=a[n];"string"==typeof e[r]&&(t[r]=e[r])}return t}return{message:String(e)}};function se(e,t,n){var a=W(e+"/fulfilled",(function(e,t,n,a){return{payload:e,meta:y(v({},a||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),r=W(e+"/pending",(function(e,t,n){return{payload:void 0,meta:y(v({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),i=W(e+"/rejected",(function(e,t,a,r,o){return{payload:r,error:(n&&n.serializeError||ie)(e||"Rejected"),meta:y(v({},o||{}),{arg:a,requestId:t,rejectedWithValue:!!r,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),s="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(l,u,c){var d,p=(null==n?void 0:n.idGenerator)?n.idGenerator(e):ne(),f=new s,b=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:d||"Aborted"})}))})),g=!1,m=function(){return s=this,d=function(){var s,d,m,h,v;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),null===(y=h=null==(s=null==n?void 0:n.condition)?void 0:s.call(n,e,{getState:u,extra:c}))||"object"!=typeof y||"function"!=typeof y.then?[3,2]:[4,h];case 1:h=o.sent(),o.label=2;case 2:if(!1===h)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return g=!0,l(r(p,e,null==(d=null==n?void 0:n.getPendingMeta)?void 0:d.call(n,{requestId:p,arg:e},{getState:u,extra:c}))),[4,Promise.race([b,Promise.resolve(t(e,{dispatch:l,getState:u,extra:c,requestId:p,signal:f.signal,rejectWithValue:function(e,t){return new re(e,t)},fulfillWithValue:function(e,t){return new oe(e,t)}})).then((function(t){if(t instanceof re)throw t;return t instanceof oe?a(t.payload,p,e,t.meta):a(t,p,e)}))])];case 3:return m=o.sent(),[3,5];case 4:return v=o.sent(),m=v instanceof re?i(null,p,e,v.payload,v.meta):i(v,p,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&i.match(m)&&m.meta.condition||l(m),[2,m]}var y}))},new Promise((function(e,t){var n=function(e){try{r(d.next(e))}catch(e){t(e)}},a=function(e){try{r(d.throw(e))}catch(e){t(e)}},r=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(n,a)};r((d=d.apply(s,null)).next())}));var s,d}();return Object.assign(m,{abort:function(e){g&&(d=e,f.abort())},requestId:p,arg:e,unwrap:function(){return m.then(le)}})}}),{pending:r,rejected:i,fulfilled:a,typePrefix:e})}function le(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var ue=function(e,t){return(n=e)&&"function"==typeof n.match?e.match(t):e(t);var n};function ce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return ue(e,t)}))}}function de(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return ue(e,t)}))}}function pe(e,t){if(!e||!e.meta)return!1;var n="string"==typeof e.meta.requestId,a=t.indexOf(e.meta.requestStatus)>-1;return n&&a}function fe(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return pe(e,["pending"])}:fe(e)?function(t){var n=e.map((function(e){return e.pending}));return ce.apply(void 0,n)(t)}:be()(e[0])}function ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return pe(e,["rejected"])}:fe(e)?function(t){var n=e.map((function(e){return e.rejected}));return ce.apply(void 0,n)(t)}:ge()(e[0])}function me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===e.length||fe(e)?function(t){return de(ge.apply(void 0,e),n)(t)}:me()(e[0])}function he(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return pe(e,["fulfilled"])}:fe(e)?function(t){var n=e.map((function(e){return e.fulfilled}));return ce.apply(void 0,n)(t)}:he()(e[0])}function ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return pe(e,["pending","fulfilled","rejected"])}:fe(e)?function(t){for(var n=[],a=0,r=e;a<r.length;a++){var o=r[a];n.push(o.pending,o.rejected,o.fulfilled)}return ce.apply(void 0,n)(t)}:ve()(e[0])}(0,w.enableES5)()},function(e,t){function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function a(e){return!!e&&!!e[K]}function r(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===X}(e)||Array.isArray(e)||!!e[$]||!!e.constructor[$]||d(e)||p(e))}function o(e,t,n){void 0===n&&(n=!1),0===i(e)?(n?Object.keys:J)(e).forEach((function(a){n&&"symbol"==typeof a||t(a,e[a],e)})):e.forEach((function(n,a){return t(a,n,e)}))}function i(e){var t=e[K];return t?t.t>3?t.t-4:t.t:Array.isArray(e)?1:d(e)?2:p(e)?3:0}function s(e,t){return 2===i(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){return 2===i(e)?e.get(t):e[t]}function u(e,t,n){var a=i(e);2===a?e.set(t,n):3===a?(e.delete(t),e.add(n)):e[t]=n}function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){return G&&e instanceof Map}function p(e){return q&&e instanceof Set}function f(e){return e.i||e.u}function b(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Q(e);delete t[K];for(var n=J(t),a=0;a<n.length;a++){var r=n[a],o=t[r];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[r]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[r]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),h(e)||a(e)||!r(e)||(i(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&o(e,(function(e,t){return g(t,!0)}),!0)),e}function m(){n(2)}function h(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function v(e){var t=Z[e];return t||n(18,e),t}function y(e,t){Z[e]||(Z[e]=t)}function x(){return V}function j(e,t){t&&(v("Patches"),e.o=[],e.v=[],e.s=t)}function _(e){w(e),e.p.forEach(D),e.p=null}function w(e){e===V&&(V=e.l)}function O(e){return V={p:[],l:V,h:e,_:!0,m:0}}function D(e){var t=e[K];0===t.t||1===t.t?t.j():t.O=!0}function k(e,t){t.m=t.p.length;var a=t.p[0],o=void 0!==e&&e!==a;return t.h.S||v("ES5").P(t,e,o),o?(a[K].M&&(_(t),n(4)),r(e)&&(e=P(t,e),t.l||S(t,e)),t.o&&v("Patches").g(a[K].u,e,t.o,t.v)):e=P(t,a,[]),_(t),t.o&&t.s(t.o,t.v),e!==U?e:void 0}function P(e,t,n){if(h(t))return t;var a=t[K];if(!a)return o(t,(function(r,o){return L(e,a,t,r,o,n)}),!0),t;if(a.A!==e)return t;if(!a.M)return S(e,a.u,!0),a.u;if(!a.R){a.R=!0,a.A.m--;var r=4===a.t||5===a.t?a.i=b(a.k):a.i;o(3===a.t?new Set(r):r,(function(t,o){return L(e,a,r,t,o,n)})),S(e,r,!1),n&&e.o&&v("Patches").F(a,n,e.o,e.v)}return a.i}function L(e,t,n,o,i,l){if(a(i)){var c=P(e,i,l&&t&&3!==t.t&&!s(t.D,o)?l.concat(o):void 0);if(u(n,o,c),!a(c))return;e._=!1}if(r(i)&&!h(i)){if(!e.h.K&&e.m<1)return;P(e,i),t&&t.A.l||S(e,i)}}function S(e,t,n){void 0===n&&(n=!1),e.h.K&&e._&&g(t,n)}function I(e,t){var n=e[K];return(n?f(n):e)[t]}function C(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Object.getPrototypeOf(n)}}function E(e){e.M||(e.M=!0,e.l&&E(e.l))}function M(e){e.i||(e.i=b(e.u))}function T(e,t,n){var a=d(t)?v("MapSet").$(t,n):p(t)?v("MapSet").C(t,n):e.S?function(e,t){var n=Array.isArray(e),a={t:n?1:0,A:t?t.A:x(),M:!1,R:!1,D:{},l:t,u:e,k:null,i:null,j:null,I:!1},r=a,o=ee;n&&(r=[a],o=te);var i=Proxy.revocable(r,o),s=i.revoke,l=i.proxy;return a.k=l,a.j=s,l}(t,n):v("ES5").J(t,n);return(n?n.A:x()).p.push(a),a}function A(e){return a(e)||n(22,e),function e(t){if(!r(t))return t;var n,a=t[K],s=i(t);if(a){if(!a.M&&(a.t<4||!v("ES5").N(a)))return a.u;a.R=!0,n=F(t,s),a.R=!1}else n=F(t,s);return o(n,(function(t,r){a&&l(a.u,t)===r||u(n,t,e(r))})),3===s?new Set(n):n}(e)}function F(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return b(e)}function N(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){return ee.get(this[K],e)},set:function(t){ee.set(this[K],e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var a=e[t][K];if(!a.M)switch(a.t){case 5:r(a)&&E(a);break;case 4:n(a)&&E(a)}}}function n(e){for(var t=e.u,n=e.k,a=J(n),r=a.length-1;r>=0;r--){var o=a[r];if(o!==K){var i=t[o];if(void 0===i&&!s(t,o))return!0;var l=n[o],u=l&&l[K];if(u?u.u!==i:!c(l,i))return!0}}var d=!!t[K];return a.length!==J(t).length+(d?0:1)}function r(e){var t=e.k;if(t.length!==e.u.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var a=0;a<t.length;a++)if(!t.hasOwnProperty(a))return!0;return!1}var i={};y("ES5",{J:function(t,n){var a=Array.isArray(t),r=function(t,n){if(t){for(var a=Array(n.length),r=0;r<n.length;r++)Object.defineProperty(a,""+r,e(r,!0));return a}var o=Q(n);delete o[K];for(var i=J(o),s=0;s<i.length;s++){var l=i[s];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(a,t),o={t:a?5:4,A:n?n.A:x(),M:!1,R:!1,D:{},l:n,u:t,k:r,i:null,O:!1,I:!1};return Object.defineProperty(r,K,{value:o,writable:!0}),r},P:function(e,n,i){i?a(n)&&n[K].A===e&&t(e.p):(e.o&&function e(t){if(t&&"object"==typeof t){var n=t[K];if(n){var a=n.u,i=n.k,l=n.D,u=n.t;if(4===u)o(i,(function(t){t!==K&&(void 0!==a[t]||s(a,t)?l[t]||e(i[t]):(l[t]=!0,E(n)))})),o(a,(function(e){void 0!==i[e]||s(i,e)||(l[e]=!1,E(n))}));else if(5===u){if(r(n)&&(E(n),l.length=!0),i.length<a.length)for(var c=i.length;c<a.length;c++)l[c]=!1;else for(var d=a.length;d<i.length;d++)l[d]=!0;for(var p=Math.min(i.length,a.length),f=0;f<p;f++)i.hasOwnProperty(f)||(l[f]=!0),void 0===l[f]&&e(i[f])}}}}(e.p[0]),t(e.p))},N:function(e){return 4===e.t?n(e):r(e)}})}function z(){function e(t){if(!r(t))return t;if(Array.isArray(t))return t.map(e);if(d(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if(p(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var a in t)n[a]=e(t[a]);return s(t,$)&&(n[$]=t[$]),n}function t(t){return a(t)?e(t):t}var u="add";y("Patches",{W:function(t,a){return a.forEach((function(a){for(var r=a.path,o=a.op,s=t,c=0;c<r.length-1;c++){var d=i(s),p=""+r[c];0!==d&&1!==d||"__proto__"!==p&&"constructor"!==p||n(24),"function"==typeof s&&"prototype"===p&&n(24),"object"!=typeof(s=l(s,p))&&n(15,r.join("/"))}var f=i(s),b=e(a.value),g=r[r.length-1];switch(o){case"replace":switch(f){case 2:return s.set(g,b);case 3:n(16);default:return s[g]=b}case u:switch(f){case 1:return"-"===g?s.push(b):s.splice(g,0,b);case 2:return s.set(g,b);case 3:return s.add(b);default:return s[g]=b}case"remove":switch(f){case 1:return s.splice(g,1);case 2:return s.delete(g);case 3:return s.delete(a.value);default:return delete s[g]}default:n(17,o)}})),t},F:function(e,n,a,r){switch(e.t){case 0:case 4:case 2:return function(e,n,a,r){var i=e.u,c=e.i;o(e.D,(function(e,o){var d=l(i,e),p=l(c,e),f=o?s(i,e)?"replace":u:"remove";if(d!==p||"replace"!==f){var b=n.concat(e);a.push("remove"===f?{op:f,path:b}:{op:f,path:b,value:p}),r.push(f===u?{op:"remove",path:b}:"remove"===f?{op:u,path:b,value:t(d)}:{op:"replace",path:b,value:t(d)})}}))}(e,n,a,r);case 5:case 1:return function(e,n,a,r){var o=e.u,i=e.D,s=e.i;if(s.length<o.length){var l=[s,o];o=l[0],s=l[1];var c=[r,a];a=c[0],r=c[1]}for(var d=0;d<o.length;d++)if(i[d]&&s[d]!==o[d]){var p=n.concat([d]);a.push({op:"replace",path:p,value:t(s[d])}),r.push({op:"replace",path:p,value:t(o[d])})}for(var f=o.length;f<s.length;f++){var b=n.concat([f]);a.push({op:u,path:b,value:t(s[f])})}o.length<s.length&&r.push({op:"replace",path:n.concat(["length"]),value:o.length})}(e,n,a,r);case 3:return function(e,t,n,a){var r=e.u,o=e.i,i=0;r.forEach((function(e){if(!o.has(e)){var r=t.concat([i]);n.push({op:"remove",path:r,value:e}),a.unshift({op:u,path:r,value:e})}i++})),i=0,o.forEach((function(e){if(!r.has(e)){var o=t.concat([i]);n.push({op:u,path:o,value:e}),a.unshift({op:"remove",path:o,value:e})}i++}))}(e,n,a,r)}},g:function(e,t,n,a){n.push({op:"replace",path:[],value:t===U?void 0:t}),a.push({op:"replace",path:[],value:e})}})}function R(){function e(e,t){function n(){this.constructor=e}s(e,t),e.prototype=(n.prototype=t.prototype,new n)}function t(e){e.i||(e.D=new Map,e.i=new Map(e.u))}function a(e){e.i||(e.i=new Set,e.u.forEach((function(t){if(r(t)){var n=T(e.A.h,t,e);e.p.set(t,n),e.i.add(n)}else e.i.add(t)})))}function i(e){e.O&&n(3,JSON.stringify(f(e)))}var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},l=function(){function n(e,t){return this[K]={t:2,l:t,A:t?t.A:x(),M:!1,R:!1,i:void 0,D:void 0,u:e,k:this,I:!1,O:!1},this}e(n,Map);var a=n.prototype;return Object.defineProperty(a,"size",{get:function(){return f(this[K]).size}}),a.has=function(e){return f(this[K]).has(e)},a.set=function(e,n){var a=this[K];return i(a),f(a).has(e)&&f(a).get(e)===n||(t(a),E(a),a.D.set(e,!0),a.i.set(e,n),a.D.set(e,!0)),this},a.delete=function(e){if(!this.has(e))return!1;var n=this[K];return i(n),t(n),E(n),n.u.has(e)?n.D.set(e,!1):n.D.delete(e),n.i.delete(e),!0},a.clear=function(){var e=this[K];i(e),f(e).size&&(t(e),E(e),e.D=new Map,o(e.u,(function(t){e.D.set(t,!1)})),e.i.clear())},a.forEach=function(e,t){var n=this;f(this[K]).forEach((function(a,r){e.call(t,n.get(r),r,n)}))},a.get=function(e){var n=this[K];i(n);var a=f(n).get(e);if(n.R||!r(a))return a;if(a!==n.u.get(e))return a;var o=T(n.A.h,a,n);return t(n),n.i.set(e,o),o},a.keys=function(){return f(this[K]).keys()},a.values=function(){var e,t=this,n=this.keys();return(e={})[Y]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},a.entries=function(){var e,t=this,n=this.keys();return(e={})[Y]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var a=t.get(e.value);return{done:!1,value:[e.value,a]}},e},a[Y]=function(){return this.entries()},n}(),u=function(){function t(e,t){return this[K]={t:3,l:t,A:t?t.A:x(),M:!1,R:!1,i:void 0,u:e,k:this,p:new Map,O:!1,I:!1},this}e(t,Set);var n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return f(this[K]).size}}),n.has=function(e){var t=this[K];return i(t),t.i?!!t.i.has(e)||!(!t.p.has(e)||!t.i.has(t.p.get(e))):t.u.has(e)},n.add=function(e){var t=this[K];return i(t),this.has(e)||(a(t),E(t),t.i.add(e)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[K];return i(t),a(t),E(t),t.i.delete(e)||!!t.p.has(e)&&t.i.delete(t.p.get(e))},n.clear=function(){var e=this[K];i(e),f(e).size&&(a(e),E(e),e.i.clear())},n.values=function(){var e=this[K];return i(e),a(e),e.i.values()},n.entries=function(){var e=this[K];return i(e),a(e),e.i.entries()},n.keys=function(){return this.values()},n[Y]=function(){return this.values()},n.forEach=function(e,t){for(var n=this.values(),a=n.next();!a.done;)e.call(t,a.value,a.value,this),a=n.next()},t}();y("MapSet",{$:function(e,t){return new l(e,t)},C:function(e,t){return new u(e,t)}})}var B;Object.defineProperty(t,"__esModule",{value:!0});var V,W="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),G="undefined"!=typeof Map,q="undefined"!=typeof Set,H="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,U=W?Symbol.for("immer-nothing"):((B={})["immer-nothing"]=!0,B),$=W?Symbol.for("immer-draftable"):"__$immer_draftable",K=W?Symbol.for("immer-state"):"__$immer_state",Y="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",X=""+Object.prototype.constructor,J="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Q=Object.getOwnPropertyDescriptors||function(e){var t={};return J(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Z={},ee={get:function(e,t){if(t===K)return e;var n=f(e);if(!s(n,t))return function(e,t,n){var a,r=C(t,n);return r?"value"in r?r.value:null===(a=r.get)||void 0===a?void 0:a.call(e.k):void 0}(e,n,t);var a=n[t];return e.R||!r(a)?a:a===I(e.u,t)?(M(e),e.i[t]=T(e.A.h,a,e)):a},has:function(e,t){return t in f(e)},ownKeys:function(e){return Reflect.ownKeys(f(e))},set:function(e,t,n){var a=C(f(e),t);if(null==a?void 0:a.set)return a.set.call(e.k,n),!0;if(!e.M){var r=I(f(e),t),o=null==r?void 0:r[K];if(o&&o.u===n)return e.i[t]=n,e.D[t]=!1,!0;if(c(n,r)&&(void 0!==n||s(e.u,t)))return!0;M(e),E(e)}return e.i[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.i)||(e.i[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==I(e.u,t)||t in e.u?(e.D[t]=!1,M(e),E(e)):delete e.D[t],e.i&&delete e.i[t],!0},getOwnPropertyDescriptor:function(e,t){var n=f(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a?{writable:!0,configurable:1!==e.t||"length"!==t,enumerable:a.enumerable,value:n[t]}:a},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.u)},setPrototypeOf:function(){n(12)}},te={};o(ee,(function(e,t){te[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),te.deleteProperty=function(e,t){return te.set.call(this,e,t,void 0)},te.set=function(e,t,n){return ee.set.call(this,e[0],t,n,e[0])};var ne=function(){function e(e){var t=this;this.S=H,this.K=!0,this.produce=function(e,a,o){if("function"==typeof e&&"function"!=typeof a){var i=a;a=e;var s=t;return function(e){var t=this;void 0===e&&(e=i);for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return s.produce(e,(function(e){var n;return(n=a).call.apply(n,[t,e].concat(r))}))}}var l;if("function"!=typeof a&&n(6),void 0!==o&&"function"!=typeof o&&n(7),r(e)){var u=O(t),c=T(t,e,void 0),d=!0;try{l=a(c),d=!1}finally{d?_(u):w(u)}return"undefined"!=typeof Promise&&l instanceof Promise?l.then((function(e){return j(u,o),k(e,u)}),(function(e){throw _(u),e})):(j(u,o),k(l,u))}if(!e||"object"!=typeof e){if(void 0===(l=a(e))&&(l=e),l===U&&(l=void 0),t.K&&g(l,!0),o){var p=[],f=[];v("Patches").g(e,l,p,f),o(p,f)}return l}n(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var a=arguments.length,r=Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(r))}))};var a,r,o=t.produce(e,n,(function(e,t){a=e,r=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,a,r]})):[o,a,r]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){r(e)||n(8),a(e)&&(e=A(e));var t=O(this),o=T(this,e,void 0);return o[K].I=!0,w(t),o},t.finishDraft=function(e,t){var n=(e&&e[K]).A;return j(n,t),k(void 0,n)},t.setAutoFreeze=function(e){this.K=e},t.setUseProxies=function(e){e&&!H&&n(20),this.S=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=v("Patches").W;return a(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),ae=new ne,re=ae.produce,oe=ae.produceWithPatches.bind(ae),ie=ae.setAutoFreeze.bind(ae),se=ae.setUseProxies.bind(ae),le=ae.applyPatches.bind(ae),ue=ae.createDraft.bind(ae),ce=ae.finishDraft.bind(ae);t.Immer=ne,t.applyPatches=le,t.castDraft=function(e){return e},t.castImmutable=function(e){return e},t.createDraft=ue,t.current=A,t.default=re,t.enableAllPlugins=function(){N(),R(),z()},t.enableES5=N,t.enableMapSet=R,t.enablePatches=z,t.finishDraft=ce,t.freeze=g,t.immerable=$,t.isDraft=a,t.isDraftable=r,t.nothing=U,t.original=function(e){return a(e)||n(23,e),e[K].u},t.produce=re,t.produceWithPatches=oe,t.setAutoFreeze=ie,t.setUseProxies=se},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCacheKeyComparator=o,t.defaultEqualityCheck=void 0,t.defaultMemoize=function(e,t){var n,i,s="object"==typeof t?t:{equalityCheck:t},l=s.equalityCheck,u=void 0===l?r:l,c=s.maxSize,d=void 0===c?1:c,p=s.resultEqualityCheck,f=o(u),b=1===d?(n=f,{get:function(e){return i&&n(i.key,e)?i.value:a},put:function(e,t){i={key:e,value:t}},getEntries:function(){return i?[i]:[]},clear:function(){i=void 0}}):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var o=n[r];return r>0&&(n.splice(r,1),n.unshift(o)),o.value}return a}return{get:r,put:function(t,o){r(t)===a&&(n.unshift({key:t,value:o}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(d,f);function g(){var t=b.get(arguments);if(t===a){if(t=e.apply(null,arguments),p){var n=b.getEntries(),r=n.find((function(e){return p(e.value,t)}));r&&(t=r.value)}b.put(arguments,t)}return t}return g.clearCache=function(){return b.clear()},g};var a="NOT_FOUND",r=function(e,t){return e===t};function o(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var a=t.length,r=0;r<a;r++)if(!e(t[r],n[r]))return!1;return!0}}t.defaultEqualityCheck=r},function(e,t,n){"use strict";function a(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(r){return"function"==typeof r?r(n,a,e):t(r)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a();r.withExtraArgument=a;var o=r;t.default=o},function(e,t,n){var a=n(55),r=n(407);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,"@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsWorkspacePanelWrapper{display:flex;flex-direction:column;height:100%;margin-bottom:16px;min-height:400px;overflow:visible;position:relative}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__content{height:100%;position:absolute;width:100%}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody{align-items:stretch;background:#1d1e24;border-radius:6px;box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a;display:flex;flex-grow:1;height:100%;justify-content:stretch;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody::-webkit-scrollbar{height:16px;width:16px}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody::-webkit-scrollbar-corner,.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody::-webkit-scrollbar-track{background-color:#0000}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody>*{align-items:center;display:flex;flex:1 1 100%;justify-content:center;overflow:hidden}.lnsWorkspacePanelWrapper.lnsWorkspacePanelWrapper--fullscreen{margin-bottom:0}.lnsWorkspacePanelWrapper.lnsWorkspacePanelWrapper--fullscreen .lnsWorkspacePanelWrapper__pageContentBody{box-shadow:none}.lnsWorkspacePanel__dragDrop{border:1px solid #0000}.lnsWorkspacePanel__dragDrop.lnsDragDrop-isDropTarget{background-color:#54b3991a;border:1px dashed #343741}.lnsWorkspacePanel__dragDrop.lnsDragDrop-isDropTarget p{filter:blur(5px);transition:filter .15s ease-in-out}.lnsWorkspacePanel__dragDrop.lnsDragDrop-isDropTarget .lnsExpressionRenderer{filter:blur(4px);opacity:.25;transition:filter .25s ease-in-out,opacity .25s ease-in-out}.lnsWorkspacePanel__dragDrop.lnsDragDrop-isActiveDropTarget{background-color:#54b39940;border:1px dashed #54b399}.lnsWorkspacePanel__dragDrop.lnsDragDrop-isActiveDropTarget .lnsDropIllustration__hand{animation:lnsWorkspacePanel__illustrationPulseContinuous 1.5s ease-in-out 0s infinite normal forwards}.lnsWorkspacePanel__dragDrop.lnsWorkspacePanel__dragDrop--fullscreen{border:none}.lnsWorkspacePanel__emptyContent{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;transition:background-color .15s ease-in-out}.lnsWorkspacePanel__emptyContent .lnsWorkspacePanel__actions{margin-top:24px}.lnsWorkspacePanelWrapper__toolbar{margin-bottom:4px}.lnsWorkspacePanelWrapper__toolbar--fullscreen{background-color:#1d1e24;justify-content:flex-end;margin-bottom:0;padding:8px 8px 0}@media only screen and (max-width:574px){.lnsWorkspacePanelWrapper__applyButton .euiButton__text{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:575px) and (max-width:767px){.lnsWorkspacePanelWrapper__applyButton .euiButton__text{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:768px) and (max-width:991px){.lnsWorkspacePanelWrapper__applyButton .euiButton__text{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:992px) and (max-width:1199px){.lnsWorkspacePanelWrapper__applyButton .euiButton__text{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}.lnsWorkspacePanel__promptIllustration{margin:0 auto -16px;max-height:176px;max-width:176px;overflow:visible}.lnsWorkspacePanel__dropIllustration{filter:drop-shadow(0 6px 12px rgba(0,0,0,.2)) drop-shadow(0 4px 4px rgba(0,0,0,.2)) drop-shadow(0 2px 2px rgba(0,0,0,.2))}.lnsDropIllustration__adjustFill{fill:#fff}.lnsDropIllustration__hand{animation:lnsWorkspacePanel__illustrationPulseArrow 5s ease-in-out 0s infinite normal forwards}@keyframes lnsWorkspacePanel__illustrationPulseArrow{0%{transform:translateY(0)}65%{transform:translateY(0)}72%{transform:translateY(10%)}79%{transform:translateY(7%)}86%{transform:translateY(10%)}95%{transform:translateY(0)}}@keyframes lnsWorkspacePanel__illustrationPulseContinuous{0%{transform:translateY(10%)}25%{transform:translateY(15%)}50%{transform:translateY(10%)}75%{transform:translateY(15%)}to{transform:translateY(10%)}}",""]),e.exports=t},function(e,t,n){var a=n(55),r=n(409);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,"@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsWorkspacePanelWrapper{display:flex;flex-direction:column;height:100%;margin-bottom:16px;min-height:400px;overflow:visible;position:relative}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__content{height:100%;position:absolute;width:100%}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody{align-items:stretch;background:#fff;border-radius:6px;box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a;display:flex;flex-grow:1;height:100%;justify-content:stretch;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody::-webkit-scrollbar{height:16px;width:16px}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody::-webkit-scrollbar-corner,.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody::-webkit-scrollbar-track{background-color:#0000}.lnsWorkspacePanelWrapper .lnsWorkspacePanelWrapper__pageContentBody>*{align-items:center;display:flex;flex:1 1 100%;justify-content:center;overflow:hidden}.lnsWorkspacePanelWrapper.lnsWorkspacePanelWrapper--fullscreen{margin-bottom:0}.lnsWorkspacePanelWrapper.lnsWorkspacePanelWrapper--fullscreen .lnsWorkspacePanelWrapper__pageContentBody{box-shadow:none}.lnsWorkspacePanel__dragDrop{border:1px solid #0000}.lnsWorkspacePanel__dragDrop.lnsDragDrop-isDropTarget{background-color:#54b3991a;border:1px dashed #d3dae6}.lnsWorkspacePanel__dragDrop.lnsDragDrop-isDropTarget p{filter:blur(5px);transition:filter .15s ease-in-out}.lnsWorkspacePanel__dragDrop.lnsDragDrop-isDropTarget .lnsExpressionRenderer{filter:blur(4px);opacity:.25;transition:filter .25s ease-in-out,opacity .25s ease-in-out}.lnsWorkspacePanel__dragDrop.lnsDragDrop-isActiveDropTarget{background-color:#54b39940;border:1px dashed #54b399}.lnsWorkspacePanel__dragDrop.lnsDragDrop-isActiveDropTarget .lnsDropIllustration__hand{animation:lnsWorkspacePanel__illustrationPulseContinuous 1.5s ease-in-out 0s infinite normal forwards}.lnsWorkspacePanel__dragDrop.lnsWorkspacePanel__dragDrop--fullscreen{border:none}.lnsWorkspacePanel__emptyContent{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;transition:background-color .15s ease-in-out}.lnsWorkspacePanel__emptyContent .lnsWorkspacePanel__actions{margin-top:24px}.lnsWorkspacePanelWrapper__toolbar{margin-bottom:4px}.lnsWorkspacePanelWrapper__toolbar--fullscreen{background-color:#fff;justify-content:flex-end;margin-bottom:0;padding:8px 8px 0}@media only screen and (max-width:574px){.lnsWorkspacePanelWrapper__applyButton .euiButton__text{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:575px) and (max-width:767px){.lnsWorkspacePanelWrapper__applyButton .euiButton__text{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:768px) and (max-width:991px){.lnsWorkspacePanelWrapper__applyButton .euiButton__text{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:992px) and (max-width:1199px){.lnsWorkspacePanelWrapper__applyButton .euiButton__text{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}.lnsWorkspacePanel__promptIllustration{margin:0 auto -16px;max-height:176px;max-width:176px;overflow:visible}.lnsWorkspacePanel__dropIllustration{filter:drop-shadow(0 6px 12px rgba(0,0,0,.2)) drop-shadow(0 4px 4px rgba(0,0,0,.2)) drop-shadow(0 2px 2px rgba(0,0,0,.2))}.lnsDropIllustration__adjustFill{fill:#000}.lnsDropIllustration__hand{animation:lnsWorkspacePanel__illustrationPulseArrow 5s ease-in-out 0s infinite normal forwards}@keyframes lnsWorkspacePanel__illustrationPulseArrow{0%{transform:translateY(0)}65%{transform:translateY(0)}72%{transform:translateY(10%)}79%{transform:translateY(7%)}86%{transform:translateY(10%)}95%{transform:translateY(0)}}@keyframes lnsWorkspacePanel__illustrationPulseContinuous{0%{transform:translateY(10%)}25%{transform:translateY(15%)}50%{transform:translateY(10%)}75%{transform:translateY(15%)}to{transform:translateY(10%)}}",""]),e.exports=t},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(411);case"v8light":return n(413)}},function(e,t,n){var a=n(55),r=n(412);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".lnsChartSwitch__header>*{align-items:center;display:flex}.lnsChartSwitch__summaryIcon{color:#7a7f89;transform:translateY(-1px)}@media only screen and (min-width:1200px){.lnsChartSwitch__summaryIcon{margin-right:8px}}@media only screen and (max-width:574px){.lnsChartSwitch__summaryText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:575px) and (max-width:767px){.lnsChartSwitch__summaryText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:768px) and (max-width:991px){.lnsChartSwitch__summaryText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:992px) and (max-width:1199px){.lnsChartSwitch__summaryText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}.lnsChartSwitch__append{display:inline-flex}img.lnsChartSwitch__chartIcon{width:100%}.lnsChartSwitch__search{width:400px}",""]),e.exports=t},function(e,t,n){var a=n(55),r=n(414);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".lnsChartSwitch__header>*{align-items:center;display:flex}.lnsChartSwitch__summaryIcon{color:#69707d;transform:translateY(-1px)}@media only screen and (min-width:1200px){.lnsChartSwitch__summaryIcon{margin-right:8px}}@media only screen and (max-width:574px){.lnsChartSwitch__summaryText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:575px) and (max-width:767px){.lnsChartSwitch__summaryText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:768px) and (max-width:991px){.lnsChartSwitch__summaryText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:992px) and (max-width:1199px){.lnsChartSwitch__summaryText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}.lnsChartSwitch__append{display:inline-flex}img.lnsChartSwitch__chartIcon{width:100%}.lnsChartSwitch__search{width:400px}",""]),e.exports=t},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(416);case"v8light":return n(418)}},function(e,t,n){var a=n(55),r=n(417);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,'@media only screen and (max-width:574px){.lnsWorkspaceWarning__buttonText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:575px) and (max-width:767px){.lnsWorkspaceWarning__buttonText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:768px) and (max-width:991px){.lnsWorkspaceWarning__buttonText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:992px) and (max-width:1199px){.lnsWorkspaceWarning__buttonText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}.lnsWorkspaceWarningList{height:100%;max-height:320px;overflow-wrap:break-word;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;width:256px}.lnsWorkspaceWarningList::-webkit-scrollbar{height:16px;width:16px}.lnsWorkspaceWarningList::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.lnsWorkspaceWarningList::-webkit-scrollbar-corner,.lnsWorkspaceWarningList::-webkit-scrollbar-track{background-color:#0000}.lnsWorkspaceWarningList:focus{outline:none}.lnsWorkspaceWarningList[tabindex="0"]:focus:focus-visible{outline-style:auto}.lnsWorkspaceWarningList__item{padding:16px}.lnsWorkspaceWarningList__item+.lnsWorkspaceWarningList__item{border-top:1px solid #343741}',""]),e.exports=t},function(e,t,n){var a=n(55),r=n(419);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,'@media only screen and (max-width:574px){.lnsWorkspaceWarning__buttonText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:575px) and (max-width:767px){.lnsWorkspaceWarning__buttonText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:768px) and (max-width:991px){.lnsWorkspaceWarning__buttonText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}@media only screen and (min-width:992px) and (max-width:1199px){.lnsWorkspaceWarning__buttonText{clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;left:-10000px;margin:-1px;overflow:hidden;position:absolute;top:auto;width:1px}}.lnsWorkspaceWarningList{height:100%;max-height:320px;overflow-wrap:break-word;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;width:256px}.lnsWorkspaceWarningList::-webkit-scrollbar{height:16px;width:16px}.lnsWorkspaceWarningList::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.lnsWorkspaceWarningList::-webkit-scrollbar-corner,.lnsWorkspaceWarningList::-webkit-scrollbar-track{background-color:#0000}.lnsWorkspaceWarningList:focus{outline:none}.lnsWorkspaceWarningList[tabindex="0"]:focus:focus-visible{outline-style:auto}.lnsWorkspaceWarningList__item{padding:16px}.lnsWorkspaceWarningList__item+.lnsWorkspaceWarningList__item{border-top:1px solid #d3dae6}',""]),e.exports=t},function(e,t,n){"use strict";function a(e,t,n,r){var o=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(o,a.prototype),o.expected=t,o.found=n,o.location=r,o.name="SyntaxError",o}function r(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(a,Error),a.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,a=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){a=e[n].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,i=this.location.source+":"+o.line+":"+o.column;if(a){var s=this.location.end,l=r("",o.line.toString().length),u=a[o.line-1],c=o.line===s.line?s.column:u.length+1;t+="\n --\x3e "+i+"\n"+l+" |\n"+o.line+" | "+u+"\n"+l+" | "+r("",o.column-1)+r("",c-o.column,"^")}else t+="\n at "+i}return t},a.buildMessage=function(e,t){var n={literal:function(e){return'"'+r(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function a(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function i(e){return n[e.type](e)}return"Expected "+function(e){var t,n,a=e.map(i);if(a.sort(),a.length>0){for(t=1,n=1;t<a.length;t++)a[t-1]!==a[t]&&(a[n]=a[t],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function(e){return e?'"'+r(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:a,parse:function(e,t){var n,r={},o=(t=void 0!==t?t:{}).grammarSource,i={expression:ee,argument:ae},s=ee,l="*/",u="\\",c=/^[a-zA-Z0-9_\-]/,d=/^[ \t\r\n]/,p=/^[^\n]/,f=/^["'(){}<>[\]$`|= \t\n\r]/,b=/^[^"'(){}<>[\]$`|= \t\n\r]/,g=/^[^"]/,m=/^[^']/,h=K("|",!1),v=X("function"),y=K("=",!1),x=K("$",!1),j=K("{",!1),_=K("}",!1),w=Y([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),O=X("literal"),D=K('"',!1),k=K("'",!1),P=Y([" ","\t","\r","\n"],!1,!1),L=K("//",!1),S=Y(["\n"],!0,!1),I=K("/*",!1),C=K("*/",!1),E={type:"any"},M=K("\\",!1),T=Y(['"',"'","(",")","{","}","<",">","[","]","$","`","|","="," ","\t","\n","\r"],!1,!1),A=Y(['"',"'","(",")","{","}","<",">","[","]","$","`","|","="," ","\t","\n","\r"],!0,!1),F=Y(['"'],!0,!1),N=Y(["'"],!0,!1),z=function(e,t){return t},R=function(e){return e.join("")},B=0,V=0,W=[{line:1,column:1}],G=0,q=[],H=0;if("startRule"in t){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=i[t.startRule]}function U(){return e.substring(V,B)}function $(){return Q(V,B)}function K(e,t){return{type:"literal",text:e,ignoreCase:t}}function Y(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function X(e){return{type:"other",description:e}}function J(t){var n,a=W[t];if(a)return a;for(n=t-1;!W[n];)n--;for(a={line:(a=W[n]).line,column:a.column};n<t;)10===e.charCodeAt(n)?(a.line++,a.column=1):a.column++,n++;return W[t]=a,a}function Q(e,t){var n=J(e),a=J(t);return{source:o,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:a.line,column:a.column}}}function Z(e){B<G||(B>G&&(G=B,q=[]),q.push(e))}function ee(){var t,n,a,o,i,s,l;for(t=B,oe(),(n=te())===r&&(n=null),a=[],o=B,124===e.charCodeAt(B)?(i="|",B++):(i=r,0===H&&Z(h)),i!==r?(oe(),(s=te())!==r?(V=o,o=z(0,s)):(B=o,o=r)):(B=o,o=r);o!==r;)a.push(o),o=B,124===e.charCodeAt(B)?(i="|",B++):(i=r,0===H&&Z(h)),i!==r?(oe(),(s=te())!==r?(V=o,o=z(0,s)):(B=o,o=r)):(B=o,o=r);return V=t,de({type:"expression",chain:(l=n)?[l].concat(a):[]},U(),$())}function te(){var e,t,n;return H++,e=B,(t=re())!==r?(n=function(){var e,t,n,a;for(e=B,t=[],n=B,oe()!==r&&(a=ne())!==r?(V=n,n=a):(B=n,n=r);n!==r;)t.push(n),n=B,oe()!==r&&(a=ne())!==r?(V=n,n=a):(B=n,n=r);return(n=oe())===r&&(n=null),V=e,t.reduce(((e,{name:t,value:n})=>({...e,[t]:(e[t]||[]).concat(n)})),{})}(),V=e,e=de({type:"function",function:t,arguments:n},U(),$())):(B=e,e=r),H--,e===r&&(t=r,0===H&&Z(v)),e}function ne(){var t,n,a,o;return t=B,(n=re())!==r?(oe(),61===e.charCodeAt(B)?(a="=",B++):(a=r,0===H&&Z(y)),a!==r?(oe(),(o=ae())!==r?(V=t,t={name:n,value:o}):(B=t,t=r)):(B=t,t=r)):(B=t,t=r),t===r&&(t=B,(n=ae())!==r&&(V=t,n={name:"_",value:n}),t=n),t}function ae(){var t,n,a,o,i;return t=B,36===e.charCodeAt(B)?(n="$",B++):(n=r,0===H&&Z(x)),n===r&&(n=null),123===e.charCodeAt(B)?(a="{",B++):(a=r,0===H&&Z(j)),a!==r&&(o=ee())!==r?(125===e.charCodeAt(B)?(i="}",B++):(i=r,0===H&&Z(_)),i!==r?(V=t,t=o):(B=t,t=r)):(B=t,t=r),t===r&&(t=B,n=function(){var t;return H++,t=function(){var t,n,a,o;if(t=B,34===e.charCodeAt(B)?(n='"',B++):(n=r,0===H&&Z(D)),n!==r){for(a=[],o=ue();o!==r;)a.push(o),o=ue();34===e.charCodeAt(B)?(o='"',B++):(o=r,0===H&&Z(D)),o!==r?(V=t,t=R(a)):(B=t,t=r)}else B=t,t=r;if(t===r)if(t=B,39===e.charCodeAt(B)?(n="'",B++):(n=r,0===H&&Z(k)),n!==r){for(a=[],o=ce();o!==r;)a.push(o),o=ce();39===e.charCodeAt(B)?(o="'",B++):(o=r,0===H&&Z(k)),o!==r?(V=t,t=R(a)):(B=t,t=r)}else B=t,t=r;return t}(),t===r&&(t=function(){var e,t,n,a,o;if(e=B,t=B,H++,n=se(),H--,n===r?t=void 0:(B=t,t=r),t!==r){if(n=[],(a=le())!==r)for(;a!==r;)n.push(a),a=le();else n=r;n!==r?(V=e,e="null"===(o=n.join(""))?null:"true"===o||"false"!==o&&(isNaN(Number(o))?o:Number(o))):(B=e,e=r)}else B=e,e=r;return e}()),H--,t===r&&0===H&&Z(O),t}(),n!==r&&(V=t,n=de(n,U(),$())),t=n),t}function re(){var t,n,a;if(t=B,n=[],c.test(e.charAt(B))?(a=e.charAt(B),B++):(a=r,0===H&&Z(w)),a!==r)for(;a!==r;)n.push(a),c.test(e.charAt(B))?(a=e.charAt(B),B++):(a=r,0===H&&Z(w));else n=r;return n!==r&&(V=t,n=n.join("")),n}function oe(){var e,t;if(e=[],(t=ie())===r&&(t=se()),t!==r)for(;t!==r;)e.push(t),(t=ie())===r&&(t=se());else e=r;return e}function ie(){var t;return d.test(e.charAt(B))?(t=e.charAt(B),B++):(t=r,0===H&&Z(P)),t}function se(){var t;return(t=function(){var t,n,a,o;if(t=B,"//"===e.substr(B,2)?(n="//",B+=2):(n=r,0===H&&Z(L)),n!==r){for(a=[],p.test(e.charAt(B))?(o=e.charAt(B),B++):(o=r,0===H&&Z(S));o!==r;)a.push(o),p.test(e.charAt(B))?(o=e.charAt(B),B++):(o=r,0===H&&Z(S));t=n=[n,a]}else B=t,t=r;return t}())===r&&(t=function(){var t,n,a,o,i,s;if(t=B,"/*"===e.substr(B,2)?(n="/*",B+=2):(n=r,0===H&&Z(I)),n!==r){for(a=[],o=B,i=B,H++,e.substr(B,2)===l?(s=l,B+=2):(s=r,0===H&&Z(C)),H--,s===r?i=void 0:(B=i,i=r),i!==r?(e.length>B?(s=e.charAt(B),B++):(s=r,0===H&&Z(E)),s!==r?o=i=[i,s]:(B=o,o=r)):(B=o,o=r);o!==r;)a.push(o),o=B,i=B,H++,e.substr(B,2)===l?(s=l,B+=2):(s=r,0===H&&Z(C)),H--,s===r?i=void 0:(B=i,i=r),i!==r?(e.length>B?(s=e.charAt(B),B++):(s=r,0===H&&Z(E)),s!==r?o=i=[i,s]:(B=o,o=r)):(B=o,o=r);e.substr(B,2)===l?(o=l,B+=2):(o=r,0===H&&Z(C)),o===r&&(o=null),t=n=[n,a,o]}else B=t,t=r;return t}()),t}function le(){var t,n,a;return t=B,92===e.charCodeAt(B)?(n=u,B++):(n=r,0===H&&Z(M)),n!==r?(f.test(e.charAt(B))?(a=e.charAt(B),B++):(a=r,0===H&&Z(T)),a===r&&(92===e.charCodeAt(B)?(a=u,B++):(a=r,0===H&&Z(M))),a!==r?(V=t,t=a):(B=t,t=r)):(B=t,t=r),t===r&&(b.test(e.charAt(B))?(t=e.charAt(B),B++):(t=r,0===H&&Z(A))),t}function ue(){var t,n,a;return t=B,92===e.charCodeAt(B)?(n=u,B++):(n=r,0===H&&Z(M)),n!==r?(34===e.charCodeAt(B)?(a='"',B++):(a=r,0===H&&Z(D)),a===r&&(92===e.charCodeAt(B)?(a=u,B++):(a=r,0===H&&Z(M))),a!==r?(V=t,t=a):(B=t,t=r)):(B=t,t=r),t===r&&(g.test(e.charAt(B))?(t=e.charAt(B),B++):(t=r,0===H&&Z(F))),t}function ce(){var t,n,a;return t=B,92===e.charCodeAt(B)?(n=u,B++):(n=r,0===H&&Z(M)),n!==r?(39===e.charCodeAt(B)?(a="'",B++):(a=r,0===H&&Z(k)),a===r&&(92===e.charCodeAt(B)?(a=u,B++):(a=r,0===H&&Z(M))),a!==r?(V=t,t=a):(B=t,t=r)):(B=t,t=r),t===r&&(m.test(e.charAt(B))?(t=e.charAt(B),B++):(t=r,0===H&&Z(N))),t}function de(e,n,{start:{offset:a},end:{offset:r}}){return t.addMeta?{node:e,text:n,start:a,end:r}:e}if((n=s())!==r&&B===e.length)return n;throw n!==r&&B<e.length&&Z({type:"end"}),function(e,t,n){return new a(a.buildMessage(e,t),e,t,n)}(q,G<e.length?e.charAt(G):null,G<e.length?Q(G,G+1):Q(G,G))}}},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(422);case"v8light":return n(424)}},function(e,t,n){var a=n(55),r=n(423);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,"@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsLayerPanel{margin-bottom:16px}.lnsLayerPanel:focus:not(:focus-visible){animation:none!important}.lnsLayerPanel__layerHeader{border-bottom:1px solid #343741;padding:16px}.lnsLayerPanel__layerSettingsWrapper{min-width:0}.lnsLayerPanel__settingsStaticHeader{padding-left:4px}.lnsLayerPanel__settingsStaticHeaderIcon{margin-right:8px;vertical-align:inherit}.lnsLayerPanel__settingsStaticHeaderTitle{display:inline}.lnsLayerPanel__row{background:#25262e;padding:16px}.lnsLayerPanel__row:last-child{border-radius:0 0 6px 6px}.lnsLayerPanel__row+.lnsLayerPanel__row{border-top:1px solid #343741;margin-top:0}.lnsLayerPanel__row>*{margin-bottom:0}.lnsLayerPanel__row .euiFormRow__fieldWrapper>*+*,.lnsLayerPanel__row>*+*{margin-top:16px}.lnsLayerPanel__group{margin:-8px -16px;padding:8px 16px}.lnsLayerPanel__dimension{align-items:center;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;min-height:40px;overflow:hidden;position:relative}.lnsLayerPanel__dimension>div{flex-grow:1}.lnsLayerPanel__dimension--empty:focus,.lnsLayerPanel__dimension--empty:focus-within{outline:2px solid currentColor}.lnsLayerPanel__dimension--empty:focus-within:focus-visible,.lnsLayerPanel__dimension--empty:focus:focus-visible{outline-style:auto}.lnsLayerPanel__dimension--empty:focus-within:not(:focus-visible),.lnsLayerPanel__dimension--empty:focus:not(:focus-visible){outline:none}.lnsLayerPanel__dimensionContainer{position:relative}.lnsLayerPanel__dimensionContainer+.lnsLayerPanel__dimensionContainer{margin-top:8px}.lnsLayerPanel__dimensionRemove{margin-right:8px}.lnsLayerPanel__triggerText{font-weight:400;min-height:38px;padding:8px;width:100%;word-break:break-word}.lnsLayerPanel__triggerTextLabel{transition:background-color .15s ease-in-out}.lnsLayerPanel__triggerTextContent{color:#7a7f89;justify-content:flex-start;padding:0!important}.lnsLayerPanel__styleEditor{padding:16px}.lnsLayerPanel__colorIndicator{margin-left:8px}.lnsLayerPanel__paletteContainer{bottom:0;left:0;position:absolute;right:0}.lnsLayerPanel__palette{border-radius:0 0 5px 5px}.lnsLayerPanel__palette:after{border:none}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink{width:100%}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink:focus{background-color:initial;outline:none}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink:focus:focus-visible{outline-style:none}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink:focus .lnsLayerPanel__triggerTextLabel{background-color:#36a2ef33;outline:2px solid currentColor}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink:focus:focus-visible .lnsLayerPanel__triggerTextLabel{outline-style:auto}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink:focus:not(:focus-visible) .lnsLayerPanel__triggerTextLabel{outline:none}",""]),e.exports=t},function(e,t,n){var a=n(55),r=n(425);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,"@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsLayerPanel{margin-bottom:16px}.lnsLayerPanel:focus:not(:focus-visible){animation:none!important}.lnsLayerPanel__layerHeader{border-bottom:1px solid #d3dae6;padding:16px}.lnsLayerPanel__layerSettingsWrapper{min-width:0}.lnsLayerPanel__settingsStaticHeader{padding-left:4px}.lnsLayerPanel__settingsStaticHeaderIcon{margin-right:8px;vertical-align:inherit}.lnsLayerPanel__settingsStaticHeaderTitle{display:inline}.lnsLayerPanel__row{background:#f5f7fa;padding:16px}.lnsLayerPanel__row:last-child{border-radius:0 0 6px 6px}.lnsLayerPanel__row+.lnsLayerPanel__row{border-top:1px solid #d3dae6;margin-top:0}.lnsLayerPanel__row>*{margin-bottom:0}.lnsLayerPanel__row .euiFormRow__fieldWrapper>*+*,.lnsLayerPanel__row>*+*{margin-top:16px}.lnsLayerPanel__group{margin:-8px -16px;padding:8px 16px}.lnsLayerPanel__dimension{align-items:center;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;min-height:40px;overflow:hidden;position:relative}.lnsLayerPanel__dimension>div{flex-grow:1}.lnsLayerPanel__dimension--empty:focus,.lnsLayerPanel__dimension--empty:focus-within{outline:2px solid currentColor}.lnsLayerPanel__dimension--empty:focus-within:focus-visible,.lnsLayerPanel__dimension--empty:focus:focus-visible{outline-style:auto}.lnsLayerPanel__dimension--empty:focus-within:not(:focus-visible),.lnsLayerPanel__dimension--empty:focus:not(:focus-visible){outline:none}.lnsLayerPanel__dimensionContainer{position:relative}.lnsLayerPanel__dimensionContainer+.lnsLayerPanel__dimensionContainer{margin-top:8px}.lnsLayerPanel__dimensionRemove{margin-right:8px}.lnsLayerPanel__triggerText{font-weight:400;min-height:38px;padding:8px;width:100%;word-break:break-word}.lnsLayerPanel__triggerTextLabel{transition:background-color .15s ease-in-out}.lnsLayerPanel__triggerTextContent{color:#69707d;justify-content:flex-start;padding:0!important}.lnsLayerPanel__styleEditor{padding:16px}.lnsLayerPanel__colorIndicator{margin-left:8px}.lnsLayerPanel__paletteContainer{bottom:0;left:0;position:absolute;right:0}.lnsLayerPanel__palette{border-radius:0 0 5px 5px}.lnsLayerPanel__palette:after{border:none}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink{width:100%}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink:focus{background-color:initial;outline:none}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink:focus:focus-visible{outline-style:none}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink:focus .lnsLayerPanel__triggerTextLabel{background-color:#0077cc1a;outline:2px solid currentColor}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink:focus:focus-visible .lnsLayerPanel__triggerTextLabel{outline-style:auto}.lnsLayerPanel__dimension .lnsLayerPanel__dimensionLink:focus:not(:focus-visible) .lnsLayerPanel__triggerTextLabel{outline:none}",""]),e.exports=t},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(427);case"v8light":return n(429)}},function(e,t,n){var a=n(55),r=n(428);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".lnsLayerAddButton:hover{text-decoration:none}.lnsLayerAddButton:hover .lnsLayerAddButton__label{text-decoration:underline}.lnsLayerAddButton:hover .lnsLayerAddButton__techBadge,.lnsLayerAddButton:hover .lnsLayerAddButton__techBadge *{cursor:pointer}",""]),e.exports=t},function(e,t,n){var a=n(55),r=n(430);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,".lnsLayerAddButton:hover{text-decoration:none}.lnsLayerAddButton:hover .lnsLayerAddButton__label{text-decoration:underline}.lnsLayerAddButton:hover .lnsLayerAddButton__techBadge,.lnsLayerAddButton:hover .lnsLayerAddButton__techBadge *{cursor:pointer}",""]),e.exports=t},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(432);case"v8light":return n(434)}},function(e,t,n){var a=n(55),r=n(433);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,'@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsDimensionContainer{align-items:stretch;animation:euiFlyoutAnimation .25s cubic-bezier(.694,.0482,.335,1);background:#1d1e24;border-left:1px solid #343741;bottom:0;box-shadow:0 2.7px 9px rgba(0,0,0,.325),0 9.4px 24px rgba(0,0,0,.225),0 21.8px 43px #0003;-webkit-clip-path:polygon(-50% 0,100% 0,100% 100%,-50% 100%);clip-path:polygon(-50% 0,100% 0,100% 100%,-50% 100%);display:flex;flex-direction:column;height:100%;left:0;max-width:none!important;position:fixed;right:0;top:0;z-index:1000;z-index:2000}@media only screen and (min-width:992px) and (max-width:1199px){.lnsDimensionContainer{height:100%!important;position:absolute;top:0!important}}@media only screen and (min-width:1200px){.lnsDimensionContainer{height:100%!important;position:absolute;top:0!important}}.lnsFrameLayout__sidebar-isFullscreen .lnsDimensionContainer{border-left:1px solid #343741;box-shadow:none}.lnsDimensionContainer__header{padding:16px}.lnsFrameLayout__sidebar-isFullscreen .lnsDimensionContainer__header{display:none}.lnsDimensionContainer__content{flex:1;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.lnsDimensionContainer__content::-webkit-scrollbar{height:16px;width:16px}.lnsDimensionContainer__content::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.lnsDimensionContainer__content::-webkit-scrollbar-corner,.lnsDimensionContainer__content::-webkit-scrollbar-track{background-color:#0000}.lnsDimensionContainer__content:focus{outline:none}.lnsDimensionContainer__content[tabindex="0"]:focus:focus-visible{outline-style:auto}.lnsDimensionContainer__footer{padding:16px}.lnsFrameLayout__sidebar-isFullscreen .lnsDimensionContainer__footer{display:none}.lnsBody--overflowHidden{overflow:hidden}',""]),e.exports=t},function(e,t,n){var a=n(55),r=n(435);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,'@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsDimensionContainer{align-items:stretch;animation:euiFlyoutAnimation .25s cubic-bezier(.694,.0482,.335,1);background:#fff;border-left:1px solid #d3dae6;bottom:0;box-shadow:0 2.7px 9px #00000021,0 9.4px 24px #00000017,0 21.8px 43px #00000014;-webkit-clip-path:polygon(-50% 0,100% 0,100% 100%,-50% 100%);clip-path:polygon(-50% 0,100% 0,100% 100%,-50% 100%);display:flex;flex-direction:column;height:100%;left:0;max-width:none!important;position:fixed;right:0;top:0;z-index:1000;z-index:2000}@media only screen and (min-width:992px) and (max-width:1199px){.lnsDimensionContainer{height:100%!important;position:absolute;top:0!important}}@media only screen and (min-width:1200px){.lnsDimensionContainer{height:100%!important;position:absolute;top:0!important}}.lnsFrameLayout__sidebar-isFullscreen .lnsDimensionContainer{border-left:1px solid #d3dae6;box-shadow:none}.lnsDimensionContainer__header{padding:16px}.lnsFrameLayout__sidebar-isFullscreen .lnsDimensionContainer__header{display:none}.lnsDimensionContainer__content{flex:1;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.lnsDimensionContainer__content::-webkit-scrollbar{height:16px;width:16px}.lnsDimensionContainer__content::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.lnsDimensionContainer__content::-webkit-scrollbar-corner,.lnsDimensionContainer__content::-webkit-scrollbar-track{background-color:#0000}.lnsDimensionContainer__content:focus{outline:none}.lnsDimensionContainer__content[tabindex="0"]:focus:focus-visible{outline-style:auto}.lnsDimensionContainer__footer{padding:16px}.lnsFrameLayout__sidebar-isFullscreen .lnsDimensionContainer__footer{display:none}.lnsBody--overflowHidden{overflow:hidden}',""]),e.exports=t},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(437);case"v8light":return n(439)}},function(e,t,n){var a=n(55),r=n(438);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,'.lnsFrameLayout{bottom:0;flex-direction:column;left:0;overflow:hidden;padding:0;position:absolute;right:0;top:0}@media only screen and (max-width:574px){.lnsFrameLayout{position:static}}@media only screen and (min-width:575px) and (max-width:767px){.lnsFrameLayout{position:static}}@media only screen and (min-width:768px) and (max-width:991px){.lnsFrameLayout{position:static}}.lnsFrameLayout__wrapper{position:relative}.lnsFrameLayout__pageContent{flex-direction:row;flex-grow:1;overflow:hidden}@media only screen and (max-width:574px){.lnsFrameLayout__pageContent{flex-wrap:wrap;overflow:auto}.lnsFrameLayout__pageContent>*{flex-basis:100%}.lnsFrameLayout__pageContent>.lnsFrameLayout__sidebar{min-height:360px}}@media only screen and (min-width:575px) and (max-width:767px){.lnsFrameLayout__pageContent{flex-wrap:wrap;overflow:auto}.lnsFrameLayout__pageContent>*{flex-basis:100%}.lnsFrameLayout__pageContent>.lnsFrameLayout__sidebar{min-height:360px}}@media only screen and (min-width:768px) and (max-width:991px){.lnsFrameLayout__pageContent{flex-wrap:wrap;overflow:auto}.lnsFrameLayout__pageContent>*{flex-basis:100%}.lnsFrameLayout__pageContent>.lnsFrameLayout__sidebar{min-height:360px}}.visEditor{display:flex;flex:1 1 auto;flex-direction:column;height:100%}.visEditor>*{flex-shrink:0}@media only screen and (max-width:574px){.visEditor .visualization{min-height:360px}}@media only screen and (min-width:575px) and (max-width:767px){.visEditor .visualization{min-height:360px}}@media only screen and (min-width:768px) and (max-width:991px){.visEditor .visualization{min-height:360px}}.visEditor>.visualize{display:flex;flex:1 1 auto;height:100%;z-index:0}.lnsFrameLayout__pageBody{display:flex;flex:1 1 100%;flex-direction:column;min-width:320px;overflow:hidden auto;padding:16px 16px 0;position:relative;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;z-index:1}.lnsFrameLayout__pageBody::-webkit-scrollbar{height:16px;width:16px}.lnsFrameLayout__pageBody::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.lnsFrameLayout__pageBody::-webkit-scrollbar-corner,.lnsFrameLayout__pageBody::-webkit-scrollbar-track{background-color:#0000}.lnsFrameLayout__pageBody:first-child{padding-left:16px}.lnsFrameLayout__pageBody.lnsFrameLayout__pageBody-isFullscreen{flex:1;padding:0}.lnsFrameLayout__sidebar{display:flex;flex:1 0 18%;flex-direction:column;margin:0;min-width:304px;position:relative}.lnsFrameLayout-isFullscreen .lnsFrameLayout__sidebar--left{display:none}.lnsFrameLayout__sidebar--right{background-color:#000;flex-basis:25%;max-height:100%;max-width:440px;min-width:358px}@media only screen and (max-width:574px){.lnsFrameLayout__sidebar--right{max-width:100%}}@media only screen and (min-width:575px) and (max-width:767px){.lnsFrameLayout__sidebar--right{max-width:100%}}@media only screen and (min-width:768px) and (max-width:991px){.lnsFrameLayout__sidebar--right{max-width:100%}}.lnsFrameLayout__sidebar--right .lnsConfigPanel{height:100%;margin-left:-400px;overflow-x:hidden;overflow-y:auto;padding:16px 16px 32px 416px;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.lnsFrameLayout__sidebar--right .lnsConfigPanel::-webkit-scrollbar{height:16px;width:16px}.lnsFrameLayout__sidebar--right .lnsConfigPanel::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.lnsFrameLayout__sidebar--right .lnsConfigPanel::-webkit-scrollbar-corner,.lnsFrameLayout__sidebar--right .lnsConfigPanel::-webkit-scrollbar-track{background-color:#0000}.lnsFrameLayout__sidebar--right .lnsConfigPanel:focus{outline:none}.lnsFrameLayout__sidebar--right .lnsConfigPanel[tabindex="0"]:focus:focus-visible{outline-style:auto}@media only screen and (max-width:574px){.lnsFrameLayout__sidebar--right .lnsConfigPanel{margin-left:0;padding-left:16px}}@media only screen and (min-width:575px) and (max-width:767px){.lnsFrameLayout__sidebar--right .lnsConfigPanel{margin-left:0;padding-left:16px}}@media only screen and (min-width:768px) and (max-width:991px){.lnsFrameLayout__sidebar--right .lnsConfigPanel{margin-left:0;padding-left:16px}}.lnsFrameLayout__sidebar-isFullscreen{flex:1;max-width:none}',""]),e.exports=t},function(e,t,n){var a=n(55),r=n(440);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,'.lnsFrameLayout{bottom:0;flex-direction:column;left:0;overflow:hidden;padding:0;position:absolute;right:0;top:0}@media only screen and (max-width:574px){.lnsFrameLayout{position:static}}@media only screen and (min-width:575px) and (max-width:767px){.lnsFrameLayout{position:static}}@media only screen and (min-width:768px) and (max-width:991px){.lnsFrameLayout{position:static}}.lnsFrameLayout__wrapper{position:relative}.lnsFrameLayout__pageContent{flex-direction:row;flex-grow:1;overflow:hidden}@media only screen and (max-width:574px){.lnsFrameLayout__pageContent{flex-wrap:wrap;overflow:auto}.lnsFrameLayout__pageContent>*{flex-basis:100%}.lnsFrameLayout__pageContent>.lnsFrameLayout__sidebar{min-height:360px}}@media only screen and (min-width:575px) and (max-width:767px){.lnsFrameLayout__pageContent{flex-wrap:wrap;overflow:auto}.lnsFrameLayout__pageContent>*{flex-basis:100%}.lnsFrameLayout__pageContent>.lnsFrameLayout__sidebar{min-height:360px}}@media only screen and (min-width:768px) and (max-width:991px){.lnsFrameLayout__pageContent{flex-wrap:wrap;overflow:auto}.lnsFrameLayout__pageContent>*{flex-basis:100%}.lnsFrameLayout__pageContent>.lnsFrameLayout__sidebar{min-height:360px}}.visEditor{display:flex;flex:1 1 auto;flex-direction:column;height:100%}.visEditor>*{flex-shrink:0}@media only screen and (max-width:574px){.visEditor .visualization{min-height:360px}}@media only screen and (min-width:575px) and (max-width:767px){.visEditor .visualization{min-height:360px}}@media only screen and (min-width:768px) and (max-width:991px){.visEditor .visualization{min-height:360px}}.visEditor>.visualize{display:flex;flex:1 1 auto;height:100%;z-index:0}.lnsFrameLayout__pageBody{display:flex;flex:1 1 100%;flex-direction:column;min-width:320px;overflow:hidden auto;padding:16px 16px 0;position:relative;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;z-index:1}.lnsFrameLayout__pageBody::-webkit-scrollbar{height:16px;width:16px}.lnsFrameLayout__pageBody::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.lnsFrameLayout__pageBody::-webkit-scrollbar-corner,.lnsFrameLayout__pageBody::-webkit-scrollbar-track{background-color:#0000}.lnsFrameLayout__pageBody:first-child{padding-left:16px}.lnsFrameLayout__pageBody.lnsFrameLayout__pageBody-isFullscreen{flex:1;padding:0}.lnsFrameLayout__sidebar{display:flex;flex:1 0 18%;flex-direction:column;margin:0;min-width:304px;position:relative}.lnsFrameLayout-isFullscreen .lnsFrameLayout__sidebar--left{display:none}.lnsFrameLayout__sidebar--right{background-color:#f5f7fa;flex-basis:25%;max-height:100%;max-width:440px;min-width:358px}@media only screen and (max-width:574px){.lnsFrameLayout__sidebar--right{max-width:100%}}@media only screen and (min-width:575px) and (max-width:767px){.lnsFrameLayout__sidebar--right{max-width:100%}}@media only screen and (min-width:768px) and (max-width:991px){.lnsFrameLayout__sidebar--right{max-width:100%}}.lnsFrameLayout__sidebar--right .lnsConfigPanel{height:100%;margin-left:-400px;overflow-x:hidden;overflow-y:auto;padding:16px 16px 32px 416px;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.lnsFrameLayout__sidebar--right .lnsConfigPanel::-webkit-scrollbar{height:16px;width:16px}.lnsFrameLayout__sidebar--right .lnsConfigPanel::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.lnsFrameLayout__sidebar--right .lnsConfigPanel::-webkit-scrollbar-corner,.lnsFrameLayout__sidebar--right .lnsConfigPanel::-webkit-scrollbar-track{background-color:#0000}.lnsFrameLayout__sidebar--right .lnsConfigPanel:focus{outline:none}.lnsFrameLayout__sidebar--right .lnsConfigPanel[tabindex="0"]:focus:focus-visible{outline-style:auto}@media only screen and (max-width:574px){.lnsFrameLayout__sidebar--right .lnsConfigPanel{margin-left:0;padding-left:16px}}@media only screen and (min-width:575px) and (max-width:767px){.lnsFrameLayout__sidebar--right .lnsConfigPanel{margin-left:0;padding-left:16px}}@media only screen and (min-width:768px) and (max-width:991px){.lnsFrameLayout__sidebar--right .lnsConfigPanel{margin-left:0;padding-left:16px}}.lnsFrameLayout__sidebar-isFullscreen{flex:1;max-width:none}',""]),e.exports=t},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(442);case"v8light":return n(444)}},function(e,t,n){var a=n(55),r=n(443);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,"@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsSuggestionPanel__suggestions{display:flex;margin-left:-4px;margin-right:-4px;-webkit-mask-image:linear-gradient(90deg,#f86b631a 0,#f86b63 5px,#f86b63 calc(100% - 5px),#f86b631a);mask-image:linear-gradient(90deg,#f86b631a 0,#f86b63 5px,#f86b63 calc(100% - 5px),#f86b631a);overflow-x:scroll;overflow-y:hidden;padding-left:4px;padding-right:4px;padding-top:4px;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.lnsSuggestionPanel__suggestions::-webkit-scrollbar{height:16px;width:16px}.lnsSuggestionPanel__suggestions::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.lnsSuggestionPanel__suggestions::-webkit-scrollbar-corner,.lnsSuggestionPanel__suggestions::-webkit-scrollbar-track{background-color:#0000}.lnsSuggestionPanel{padding-bottom:8px}.lnsSuggestionPanel__button{box-shadow:none!important;flex:0 0 auto;height:100px;margin-bottom:2px;margin-left:2px;margin-right:8px;position:relative;width:150px!important}.lnsSuggestionPanel__button:focus{outline:2px solid currentColor;transform:none!important}.lnsSuggestionPanel__button:focus:focus-visible{outline-style:auto}.lnsSuggestionPanel__button:focus:not(:focus-visible){outline:none}.lnsSuggestionPanel__button .lnsSuggestionPanel__expressionRenderer{position:static}.lnsSuggestionPanel__button-isSelected{background-color:#25262e!important;border-color:#535966!important}.lnsSuggestionPanel__button-isSelected:not(:focus){box-shadow:none!important}.lnsSuggestionPanel__button-isSelected:focus{outline:2px solid currentColor}.lnsSuggestionPanel__button-isSelected:focus:focus-visible{outline-style:auto}.lnsSuggestionPanel__button-isSelected:focus:not(:focus-visible){outline:none}.lnsSuggestionPanel__button-isSelected:hover{transform:none!important}.lnsSuggestionPanel__suggestionIcon{align-items:center;color:#98a2b3;display:flex;height:100%;justify-content:center;padding:8px;width:100%}.lnsSuggestionPanel__suggestionIcon:not(:only-child){height:calc(100% - 24px)}.lnsSuggestionPanel__chartWrapper{display:flex;height:100%;pointer-events:none;width:100%}.lnsSuggestionPanel__chartWrapper--withLabel{height:calc(100% - 24px)}.lnsSuggestionPanel__buttonLabel{display:block;flex-grow:0;font-size:12px;font-size:.85714rem;font-weight:700;line-height:1.14286rem;max-width:100%;overflow:hidden!important;text-align:center;text-overflow:ellipsis!important;white-space:nowrap!important}.lnsSuggestionPanel__applyChangesPrompt{align-items:center;background-color:#25262e!important;display:flex;flex-direction:column;height:100px;justify-content:center}",""]),e.exports=t},function(e,t,n){var a=n(55),r=n(445);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(56)(!1)).push([e.i,"@keyframes euiFlyoutAnimation{0%{opacity:0;transform:translateX(100%)}75%{opacity:1;transform:translateX(0)}}.lnsSuggestionPanel__suggestions{display:flex;margin-left:-4px;margin-right:-4px;-webkit-mask-image:linear-gradient(90deg,#bd271e1a 0,#bd271e 5px,#bd271e calc(100% - 5px),#bd271e1a);mask-image:linear-gradient(90deg,#bd271e1a 0,#bd271e 5px,#bd271e calc(100% - 5px),#bd271e1a);overflow-x:scroll;overflow-y:hidden;padding-left:4px;padding-right:4px;padding-top:4px;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.lnsSuggestionPanel__suggestions::-webkit-scrollbar{height:16px;width:16px}.lnsSuggestionPanel__suggestions::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.lnsSuggestionPanel__suggestions::-webkit-scrollbar-corner,.lnsSuggestionPanel__suggestions::-webkit-scrollbar-track{background-color:#0000}.lnsSuggestionPanel{padding-bottom:8px}.lnsSuggestionPanel__button{box-shadow:none!important;flex:0 0 auto;height:100px;margin-bottom:2px;margin-left:2px;margin-right:8px;position:relative;width:150px!important}.lnsSuggestionPanel__button:focus{outline:2px solid currentColor;transform:none!important}.lnsSuggestionPanel__button:focus:focus-visible{outline-style:auto}.lnsSuggestionPanel__button:focus:not(:focus-visible){outline:none}.lnsSuggestionPanel__button .lnsSuggestionPanel__expressionRenderer{position:static}.lnsSuggestionPanel__button-isSelected{background-color:#f5f7fa!important;border-color:#98a2b3!important}.lnsSuggestionPanel__button-isSelected:not(:focus){box-shadow:none!important}.lnsSuggestionPanel__button-isSelected:focus{outline:2px solid currentColor}.lnsSuggestionPanel__button-isSelected:focus:focus-visible{outline-style:auto}.lnsSuggestionPanel__button-isSelected:focus:not(:focus-visible){outline:none}.lnsSuggestionPanel__button-isSelected:hover{transform:none!important}.lnsSuggestionPanel__suggestionIcon{align-items:center;color:#69707d;display:flex;height:100%;justify-content:center;padding:8px;width:100%}.lnsSuggestionPanel__suggestionIcon:not(:only-child){height:calc(100% - 24px)}.lnsSuggestionPanel__chartWrapper{display:flex;height:100%;pointer-events:none;width:100%}.lnsSuggestionPanel__chartWrapper--withLabel{height:calc(100% - 24px)}.lnsSuggestionPanel__buttonLabel{display:block;flex-grow:0;font-size:12px;font-size:.85714rem;font-weight:700;line-height:1.14286rem;max-width:100%;overflow:hidden!important;text-align:center;text-overflow:ellipsis!important;white-space:nowrap!important}.lnsSuggestionPanel__applyChangesPrompt{align-items:center;background-color:#f5f7fa!important;display:flex;flex-direction:column;height:100px;justify-content:center}",""]),e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=n(129),o=function(){};t.default=function(e,t,n){if(!r.isClient)return[t,o,o];if(!e)throw new Error("useLocalStorage key may not be falsy");var i=n?n.raw?function(e){return e}:n.deserializer:JSON.parse,s=a.useState((function(){try{var a=n?n.raw?String:n.serializer:JSON.stringify,r=localStorage.getItem(e);return null!==r?i(r):(t&&localStorage.setItem(e,a(t)),t)}catch(e){return t}})),l=s[0],u=s[1],c=a.useCallback((function(t){try{var a="function"==typeof t?t(l):t;if(void 0===a)return;var r;r=n?n.raw?"string"==typeof a?a:JSON.stringify(a):n.serializer?n.serializer(a):JSON.stringify(a):JSON.stringify(a),localStorage.setItem(e,r),u(i(r))}catch(e){}}),[e,u]),d=a.useCallback((function(){try{localStorage.removeItem(e),u(void 0)}catch(e){}}),[e,u]);return[l,c,d]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(34),r=n(8),o=a.__importDefault(n(448));t.default=function(e,t){var n=r.useState(t),a=n[0],i=n[1];return o.default((function(){var t=e.subscribe(i);return function(){return t.unsubscribe()}}),[e]),a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=r},function(e,t,n){e.exports=n.p+"45188dbc89267e9797b89282522041e9.png"},function(e,t,n){e.exports=n.p+"6674a34547270955e8a25748a9e3d7a5.png"}])]);