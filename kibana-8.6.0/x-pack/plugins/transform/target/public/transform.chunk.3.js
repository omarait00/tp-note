/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.transform_bundle_jsonpfunction=window.transform_bundle_jsonpfunction||[]).push([[3],{118:function(e,t,n){"use strict";n.r(t);var s=n(16),l=n(2),r=n.n(l),a=n(17),o=n(0),c=n(6),i=n(3),u=n(15);const d=r.a.memo((({config:e,onChange:t,errors:n})=>{const o=Object(c.a)(e),d=Object(l.useCallback)((n=>{t({...null!=e?e:{},...n})}),[t,e]);return Object(u.jsx)(r.a.Fragment,null,Object(u.jsx)(s.EuiForm,{component:"div",isInvalid:!(null==n||!n.length),error:n},Object.entries(o).map((([e,t],n)=>{var l,r;return Object(u.jsx)(s.EuiDescribedFormGroup,{key:e,title:Object(u.jsx)("h4",null,null===(l=i.n[e])||void 0===l?void 0:l.name),description:null===(r=i.n[e])||void 0===r?void 0:r.description,fullWidth:!0,gutterSize:"s"},Object(u.jsx)(s.EuiFormRow,null,Object(u.jsx)(s.EuiSwitch,{label:Object(u.jsx)(a.FormattedMessage,{id:"xpack.transform.alertTypes.transformHealth.testsSelection.enableTestLabel",defaultMessage:"Enable"}),onChange:d.bind(null,{[e]:{...o[e],enabled:!o[e].enabled}}),checked:o[e].enabled})))}))),Object(u.jsx)(s.EuiSpacer,{size:"l"}))}));var b=n(53);function m(e){return e.map((e=>({value:e,label:e})))}const j=({label:e,errors:t,onChange:n,selectedOptions:r,options:a,allowSelectAll:o=!1})=>{const c=Object(l.useMemo)((()=>m(r)),[r]),d=Object(l.useMemo)((()=>m(o?[i.a,...a]:a)),[a,o]);return Object(u.jsx)(s.EuiFormRow,{fullWidth:!0,label:e,isInvalid:!(null==t||!t.length),error:t},Object(u.jsx)(s.EuiComboBox,{singleSelection:!1,selectedOptions:c,options:d,onChange:e=>{null!=e&&e.length?e[e.length-1].value!==i.a?n(e.slice(e[0].value===i.a?1:0).map((e=>e.value)).filter(b.b)):n([i.a]):n([])},fullWidth:!0,"data-test-subj":"transformSelection",isInvalid:!(null==t||!t.length)}))};var f=n(50),g=n(41);t.default=({ruleParams:e,setRuleParams:t,errors:n})=>{var c,b,m;const O=Object.values(n).flat(),h=O.length>0,p=Object(f.a)(),x=Object(g.b)(),[v,T]=Object(l.useState)([]),C=Object(l.useCallback)((e=>n=>{t(e,n)}),[t]);Object(l.useEffect)((function(){let e=!1;return p.getTransforms().then((t=>{e||T(t.transforms.filter((e=>e.sync)).map((e=>e.id)))})).catch((e=>{x.addError(e,{title:o.i18n.translate("xpack.transform.alertingRuleTypes.transformHealth.fetchErrorMessage",{defaultMessage:"Unable to fetch transforms"})})})),()=>{e=!0}}),[p,x]);const E=Object(l.useMemo)((()=>{var t;return null!==(t=e.includeTransforms)&&void 0!==t&&t.some((e=>e===i.a))?v:null}),[v,e.includeTransforms]);return Object(u.jsx)(s.EuiForm,{"data-test-subj":"transformHealthAlertingRuleForm",invalidCallout:"none",error:O,isInvalid:h},Object(u.jsx)(j,{label:Object(u.jsx)(a.FormattedMessage,{id:"xpack.transform.alertTypes.transformHealth.includeTransformsLabel",defaultMessage:"Include transforms"}),options:v,selectedOptions:null!==(c=e.includeTransforms)&&void 0!==c?c:[],onChange:C("includeTransforms"),allowSelectAll:!0,errors:n.includeTransforms}),Object(u.jsx)(s.EuiSpacer,{size:"m"}),null!=E&&E.length||null!==(b=e.excludeTransforms)&&void 0!==b&&b.length?Object(u.jsx)(r.a.Fragment,null,Object(u.jsx)(j,{label:Object(u.jsx)(a.FormattedMessage,{id:"xpack.transform.alertTypes.transformHealth.excludeTransformsLabel",defaultMessage:"Exclude transforms"}),options:null!=E?E:[],selectedOptions:null!==(m=e.excludeTransforms)&&void 0!==m?m:[],onChange:C("excludeTransforms")}),Object(u.jsx)(s.EuiSpacer,{size:"m"})):null,Object(u.jsx)(d,{config:e.testsConfig,onChange:C("testsConfig"),errors:Array.isArray(n.testsConfig)?n.testsConfig:[]}))}}}]);