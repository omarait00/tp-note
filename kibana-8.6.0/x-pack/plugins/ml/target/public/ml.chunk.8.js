/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[8,10],{207:function(e,t,o){"use strict";o.r(t),o.d(t,"AnomalyDetectorService",(function(){return AnomalyDetectorService}));var n=o(5),s=o.n(n),r=o(25),a=o(81);class AnomalyDetectorService{constructor(e){s()(this,"apiBasePath",Object(a.basePath)()+"/anomaly_detectors"),this.httpService=e}getJobById$(e){return this.httpService.http$({path:`${this.apiBasePath}/${e}`}).pipe(Object(r.map)((e=>e.jobs[0])))}getJobs$(e){return this.httpService.http$({path:`${this.apiBasePath}/${e.join(",")}`}).pipe(Object(r.map)((e=>e.jobs)))}extractInfluencers(e){Array.isArray(e)||(e=[e]);const t=new Set;for(const o of e)for(const e of o.analysis_config.influencers||[])t.add(e);return Array.from(t)}}},256:function(e,t,o){"use strict";o.d(t,"a",(function(){return p}));var n=o(24),s=o.n(n),r=o(25),a=o(23),c=(o(17),o(46)),i=o(182),l=o(211),u=o(248),b=o(13);async function p(e,t){const{http:o,uiSettings:n,theme:p,application:{currentAppId$:j}}=e;return new Promise((async(h,d)=>{try{const m={groupsMap:Object(i.b)([]),jobsMap:{}},y=n.get("dateFormat:tz"),f="Browser"!==y?y:s.a.tz.guess(),v=()=>{S.close(),d()},O=async({jobIds:e,groups:t})=>{await S.close(),h({jobIds:e,groups:t})},S=e.overlays.openFlyout(Object(c.toMountPoint)(Object(c.wrapWithTheme)(Object(b.jsx)(c.KibanaContextProvider,{services:{...e,mlServices:Object(l.getMlGlobalServices)(o)}},Object(b.jsx)(u.a,{selectedIds:t,withTimeRangeSelector:!1,dateFormatTz:f,singleSelection:!1,timeseriesOnly:!0,onFlyoutClose:v,onSelectionConfirmed:O,maps:m})),p.theme$)),{"data-test-subj":"mlFlyoutJobSelector",ownFocus:!0,closeButtonAriaLabel:"jobSelectorFlyout"});j.pipe(Object(r.skip)(1),Object(r.takeUntil)(Object(a.from)(S.onClose)),Object(r.distinctUntilChanged)()).subscribe((()=>{S.close()}))}catch(e){d(e)}}))}},637:function(e,t,o){"use strict";o.r(t),o.d(t,"resolveEmbeddableAnomalyChartsUserInput",(function(){return p})),o(17);var n=o(23),s=o(46),r=o(100),a=o(207),c=o(267),i=o(121),l=o(256),u=o(336),b=o(13);async function p(e,t){const{http:o,overlays:p}=e,j=new a.AnomalyDetectorService(new i.a(o));return new Promise((async(o,a)=>{try{var i;const{jobIds:h}=await Object(l.a)(e,null==t?void 0:t.jobIds),d=null!==(i=null==t?void 0:t.title)&&void 0!==i?i:Object(c.getDefaultExplorerChartsPanelTitle)(h),m=await Object(n.lastValueFrom)(j.getJobs$(h));j.extractInfluencers(m).push(r.j);const{theme$:y}=e.theme,f=p.openModal(Object(s.toMountPoint)(Object(s.wrapWithTheme)(Object(b.jsx)(u.a,{defaultTitle:d,initialInput:t,onCreate:({panelTitle:e,maxSeriesToPlot:t})=>{f.close(),o({jobIds:h,title:e,maxSeriesToPlot:t})},onCancel:()=>{f.close(),a()}}),y)))}catch(e){a(e)}}))}}}]);