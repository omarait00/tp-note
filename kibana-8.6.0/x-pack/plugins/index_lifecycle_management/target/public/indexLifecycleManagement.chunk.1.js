/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.indexLifecycleManagement_bundle_jsonpfunction=window.indexLifecycleManagement_bundle_jsonpfunction||[]).push([[1],Array(32).concat([function(e,t,a){"use strict";var i,l=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function n(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function o(e,t){for(var a={},i=[],l=0;l<e.length;l++){var o=e[l],r=t.base?o[0]+t.base:o[0],c=a[r]||0,d="".concat(r," ").concat(c);a[r]=c+1;var u=n(d),m={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(s[u].references++,s[u].updater(m)):s.push({identifier:d,updater:x(m,t),references:1}),i.push(d)}return i}function r(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var s=a.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var n=l(e.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,a,i){var l=a?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=d(t,l);else{var s=document.createTextNode(l),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(s,n[t]):e.appendChild(s)}}function m(e,t,a){var i=a.css,l=a.media,s=a.sourceMap;if(l?e.setAttribute("media",l):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,h=0;function x(e,t){var a,i,l;if(t.singleton){var s=h++;a=p||(p=r(t)),i=u.bind(null,a,s,!1),l=u.bind(null,a,s,!0)}else a=r(t),i=m.bind(null,a,t),l=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else l()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var a=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<a.length;i++){var l=n(a[i]);s[l].references--}for(var r=o(e,t),c=0;c<a.length;c++){var d=n(a[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}a=r}}}},function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,i,l,s=e[1]||"",n=e[3];if(!n)return s;if(t&&"function"==typeof btoa){var o=(a=n,i=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(l," */")),r=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[s].concat(r).concat([o]).join("\n")}return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,i){"string"==typeof e&&(e=[[null,e,""]]);var l={};if(i)for(var s=0;s<this.length;s++){var n=this[s][0];null!=n&&(l[n]=!0)}for(var o=0;o<e.length;o++){var r=[].concat(e[o]);i&&l[r[0]]||(a&&(r[2]?r[2]="".concat(a," and ").concat(r[2]):r[2]=a),t.push(r))}},t}},function(e,t,a){e.exports=a(20)(3)},function(e,t,a){"use strict";e.exports=a(43)},function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var i=new Uint8Array(16);e.exports=function(){return a(i),i}}else{var l=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),l[t]=e>>>((3&t)<<3)&255;return l}}},function(e,t){for(var a=[],i=0;i<256;++i)a[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,l=a;return[l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]]].join("")}},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(39);case"v8light":return a(41)}},function(e,t,a){var i=a(32),l=a(40);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmPhases [class*=euiTimelineItemIcon-top]{padding-top:16px}.ilmPhases [class*=euiTimelineItemIcon-top]:before{margin-top:32px}",""]),e.exports=t},function(e,t,a){var i=a(32),l=a(42);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmPhases [class*=euiTimelineItemIcon-top]{padding-top:16px}.ilmPhases [class*=euiTimelineItemIcon-top]:before{margin-top:32px}",""]),e.exports=t},function(e,t){function a(e){for(var t=arguments.length,a=Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(a.length?" "+a.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[J]}function l(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return a===Object||"function"==typeof a&&Function.toString.call(a)===Y}(e)||Array.isArray(e)||!!e[G]||!!e.constructor[G]||u(e)||m(e))}function s(e,t,a){void 0===a&&(a=!1),0===n(e)?(a?Object.keys:Q)(e).forEach((function(i){a&&"symbol"==typeof i||t(i,e[i],e)})):e.forEach((function(a,i){return t(i,a,e)}))}function n(e){var t=e[J];return t?t.t>3?t.t-4:t.t:Array.isArray(e)?1:u(e)?2:m(e)?3:0}function o(e,t){return 2===n(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){return 2===n(e)?e.get(t):e[t]}function c(e,t,a){var i=n(e);2===i?e.set(t,a):3===i?(e.delete(t),e.add(a)):e[t]=a}function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function u(e){return q&&e instanceof Map}function m(e){return V&&e instanceof Set}function p(e){return e.i||e.u}function h(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=X(e);delete t[J];for(var a=Q(t),i=0;i<a.length;i++){var l=a[i],s=t[l];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[l]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[l]})}return Object.create(Object.getPrototypeOf(e),t)}function x(e,t){return void 0===t&&(t=!1),g(e)||i(e)||!l(e)||(n(e)>1&&(e.set=e.add=e.clear=e.delete=f),Object.freeze(e),t&&s(e,(function(e,t){return x(t,!0)}),!0)),e}function f(){a(2)}function g(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b(e){var t=Z[e];return t||a(18,e),t}function j(e,t){Z[e]||(Z[e]=t)}function y(){return B}function v(e,t){t&&(b("Patches"),e.o=[],e.v=[],e.s=t)}function O(e){M(e),e.p.forEach(_),e.p=null}function M(e){e===B&&(B=e.l)}function P(e){return B={p:[],l:B,h:e,_:!0,m:0}}function _(e){var t=e[J];0===t.t||1===t.t?t.j():t.O=!0}function w(e,t){t.m=t.p.length;var i=t.p[0],s=void 0!==e&&e!==i;return t.h.S||b("ES5").P(t,e,s),s?(i[J].M&&(O(t),a(4)),l(e)&&(e=T(t,e),t.l||L(t,e)),t.o&&b("Patches").g(i[J].u,e,t.o,t.v)):e=T(t,i,[]),O(t),t.o&&t.s(t.o,t.v),e!==H?e:void 0}function T(e,t,a){if(g(t))return t;var i=t[J];if(!i)return s(t,(function(l,s){return k(e,i,t,l,s,a)}),!0),t;if(i.A!==e)return t;if(!i.M)return L(e,i.u,!0),i.u;if(!i.R){i.R=!0,i.A.m--;var l=4===i.t||5===i.t?i.i=h(i.k):i.i;s(3===i.t?new Set(l):l,(function(t,s){return k(e,i,l,t,s,a)})),L(e,l,!1),a&&e.o&&b("Patches").F(i,a,e.o,e.v)}return i.i}function k(e,t,a,s,n,r){if(i(n)){var d=T(e,n,r&&t&&3!==t.t&&!o(t.D,s)?r.concat(s):void 0);if(c(a,s,d),!i(d))return;e._=!1}if(l(n)&&!g(n)){if(!e.h.K&&e.m<1)return;T(e,n),t&&t.A.l||L(e,n)}}function L(e,t,a){void 0===a&&(a=!1),e.h.K&&e._&&x(t,a)}function S(e,t){var a=e[J];return(a?p(a):e)[t]}function E(e,t){if(t in e)for(var a=Object.getPrototypeOf(e);a;){var i=Object.getOwnPropertyDescriptor(a,t);if(i)return i;a=Object.getPrototypeOf(a)}}function F(e){e.M||(e.M=!0,e.l&&F(e.l))}function C(e){e.i||(e.i=h(e.u))}function z(e,t,a){var i=u(t)?b("MapSet").$(t,a):m(t)?b("MapSet").C(t,a):e.S?function(e,t){var a=Array.isArray(e),i={t:a?1:0,A:t?t.A:y(),M:!1,R:!1,D:{},l:t,u:e,k:null,i:null,j:null,I:!1},l=i,s=ee;a&&(l=[i],s=te);var n=Proxy.revocable(l,s),o=n.revoke,r=n.proxy;return i.k=r,i.j=o,r}(t,a):b("ES5").J(t,a);return(a?a.A:y()).p.push(i),i}function A(e){return i(e)||a(22,e),function e(t){if(!l(t))return t;var a,i=t[J],o=n(t);if(i){if(!i.M&&(i.t<4||!b("ES5").N(i)))return i.u;i.R=!0,a=D(t,o),i.R=!1}else a=D(t,o);return s(a,(function(t,l){i&&r(i.u,t)===l||c(a,t,e(l))})),3===o?new Set(a):a}(e)}function D(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return h(e)}function I(){function e(e,t){var a=n[e];return a?a.enumerable=t:n[e]=a={configurable:!0,enumerable:t,get:function(){return ee.get(this[J],e)},set:function(t){ee.set(this[J],e,t)}},a}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][J];if(!i.M)switch(i.t){case 5:l(i)&&F(i);break;case 4:a(i)&&F(i)}}}function a(e){for(var t=e.u,a=e.k,i=Q(a),l=i.length-1;l>=0;l--){var s=i[l];if(s!==J){var n=t[s];if(void 0===n&&!o(t,s))return!0;var r=a[s],c=r&&r[J];if(c?c.u!==n:!d(r,n))return!0}}var u=!!t[J];return i.length!==Q(t).length+(u?0:1)}function l(e){var t=e.k;if(t.length!==e.u.length)return!0;var a=Object.getOwnPropertyDescriptor(t,t.length-1);if(a&&!a.get)return!0;for(var i=0;i<t.length;i++)if(!t.hasOwnProperty(i))return!0;return!1}var n={};j("ES5",{J:function(t,a){var i=Array.isArray(t),l=function(t,a){if(t){for(var i=Array(a.length),l=0;l<a.length;l++)Object.defineProperty(i,""+l,e(l,!0));return i}var s=X(a);delete s[J];for(var n=Q(s),o=0;o<n.length;o++){var r=n[o];s[r]=e(r,t||!!s[r].enumerable)}return Object.create(Object.getPrototypeOf(a),s)}(i,t),s={t:i?5:4,A:a?a.A:y(),M:!1,R:!1,D:{},l:a,u:t,k:l,i:null,O:!1,I:!1};return Object.defineProperty(l,J,{value:s,writable:!0}),l},P:function(e,a,n){n?i(a)&&a[J].A===e&&t(e.p):(e.o&&function e(t){if(t&&"object"==typeof t){var a=t[J];if(a){var i=a.u,n=a.k,r=a.D,c=a.t;if(4===c)s(n,(function(t){t!==J&&(void 0!==i[t]||o(i,t)?r[t]||e(n[t]):(r[t]=!0,F(a)))})),s(i,(function(e){void 0!==n[e]||o(n,e)||(r[e]=!1,F(a))}));else if(5===c){if(l(a)&&(F(a),r.length=!0),n.length<i.length)for(var d=n.length;d<i.length;d++)r[d]=!1;else for(var u=i.length;u<n.length;u++)r[u]=!0;for(var m=Math.min(n.length,i.length),p=0;p<m;p++)n.hasOwnProperty(p)||(r[p]=!0),void 0===r[p]&&e(n[p])}}}}(e.p[0]),t(e.p))},N:function(e){return 4===e.t?a(e):l(e)}})}function N(){function e(t){if(!l(t))return t;if(Array.isArray(t))return t.map(e);if(u(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if(m(t))return new Set(Array.from(t).map(e));var a=Object.create(Object.getPrototypeOf(t));for(var i in t)a[i]=e(t[i]);return o(t,G)&&(a[G]=t[G]),a}function t(t){return i(t)?e(t):t}var c="add";j("Patches",{W:function(t,i){return i.forEach((function(i){for(var l=i.path,s=i.op,o=t,d=0;d<l.length-1;d++){var u=n(o),m=""+l[d];0!==u&&1!==u||"__proto__"!==m&&"constructor"!==m||a(24),"function"==typeof o&&"prototype"===m&&a(24),"object"!=typeof(o=r(o,m))&&a(15,l.join("/"))}var p=n(o),h=e(i.value),x=l[l.length-1];switch(s){case"replace":switch(p){case 2:return o.set(x,h);case 3:a(16);default:return o[x]=h}case c:switch(p){case 1:return"-"===x?o.push(h):o.splice(x,0,h);case 2:return o.set(x,h);case 3:return o.add(h);default:return o[x]=h}case"remove":switch(p){case 1:return o.splice(x,1);case 2:return o.delete(x);case 3:return o.delete(i.value);default:return delete o[x]}default:a(17,s)}})),t},F:function(e,a,i,l){switch(e.t){case 0:case 4:case 2:return function(e,a,i,l){var n=e.u,d=e.i;s(e.D,(function(e,s){var u=r(n,e),m=r(d,e),p=s?o(n,e)?"replace":c:"remove";if(u!==m||"replace"!==p){var h=a.concat(e);i.push("remove"===p?{op:p,path:h}:{op:p,path:h,value:m}),l.push(p===c?{op:"remove",path:h}:"remove"===p?{op:c,path:h,value:t(u)}:{op:"replace",path:h,value:t(u)})}}))}(e,a,i,l);case 5:case 1:return function(e,a,i,l){var s=e.u,n=e.D,o=e.i;if(o.length<s.length){var r=[o,s];s=r[0],o=r[1];var d=[l,i];i=d[0],l=d[1]}for(var u=0;u<s.length;u++)if(n[u]&&o[u]!==s[u]){var m=a.concat([u]);i.push({op:"replace",path:m,value:t(o[u])}),l.push({op:"replace",path:m,value:t(s[u])})}for(var p=s.length;p<o.length;p++){var h=a.concat([p]);i.push({op:c,path:h,value:t(o[p])})}s.length<o.length&&l.push({op:"replace",path:a.concat(["length"]),value:s.length})}(e,a,i,l);case 3:return function(e,t,a,i){var l=e.u,s=e.i,n=0;l.forEach((function(e){if(!s.has(e)){var l=t.concat([n]);a.push({op:"remove",path:l,value:e}),i.unshift({op:c,path:l,value:e})}n++})),n=0,s.forEach((function(e){if(!l.has(e)){var s=t.concat([n]);a.push({op:c,path:s,value:e}),i.unshift({op:"remove",path:s,value:e})}n++}))}(e,a,i,l)}},g:function(e,t,a,i){a.push({op:"replace",path:[],value:t===H?void 0:t}),i.push({op:"replace",path:[],value:e})}})}function R(){function e(e,t){function a(){this.constructor=e}o(e,t),e.prototype=(a.prototype=t.prototype,new a)}function t(e){e.i||(e.D=new Map,e.i=new Map(e.u))}function i(e){e.i||(e.i=new Set,e.u.forEach((function(t){if(l(t)){var a=z(e.A.h,t,e);e.p.set(t,a),e.i.add(a)}else e.i.add(t)})))}function n(e){e.O&&a(3,JSON.stringify(p(e)))}var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},r=function(){function a(e,t){return this[J]={t:2,l:t,A:t?t.A:y(),M:!1,R:!1,i:void 0,D:void 0,u:e,k:this,I:!1,O:!1},this}e(a,Map);var i=a.prototype;return Object.defineProperty(i,"size",{get:function(){return p(this[J]).size}}),i.has=function(e){return p(this[J]).has(e)},i.set=function(e,a){var i=this[J];return n(i),p(i).has(e)&&p(i).get(e)===a||(t(i),F(i),i.D.set(e,!0),i.i.set(e,a),i.D.set(e,!0)),this},i.delete=function(e){if(!this.has(e))return!1;var a=this[J];return n(a),t(a),F(a),a.u.has(e)?a.D.set(e,!1):a.D.delete(e),a.i.delete(e),!0},i.clear=function(){var e=this[J];n(e),p(e).size&&(t(e),F(e),e.D=new Map,s(e.u,(function(t){e.D.set(t,!1)})),e.i.clear())},i.forEach=function(e,t){var a=this;p(this[J]).forEach((function(i,l){e.call(t,a.get(l),l,a)}))},i.get=function(e){var a=this[J];n(a);var i=p(a).get(e);if(a.R||!l(i))return i;if(i!==a.u.get(e))return i;var s=z(a.A.h,i,a);return t(a),a.i.set(e,s),s},i.keys=function(){return p(this[J]).keys()},i.values=function(){var e,t=this,a=this.keys();return(e={})[K]=function(){return t.values()},e.next=function(){var e=a.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},i.entries=function(){var e,t=this,a=this.keys();return(e={})[K]=function(){return t.entries()},e.next=function(){var e=a.next();if(e.done)return e;var i=t.get(e.value);return{done:!1,value:[e.value,i]}},e},i[K]=function(){return this.entries()},a}(),c=function(){function t(e,t){return this[J]={t:3,l:t,A:t?t.A:y(),M:!1,R:!1,i:void 0,u:e,k:this,p:new Map,O:!1,I:!1},this}e(t,Set);var a=t.prototype;return Object.defineProperty(a,"size",{get:function(){return p(this[J]).size}}),a.has=function(e){var t=this[J];return n(t),t.i?!!t.i.has(e)||!(!t.p.has(e)||!t.i.has(t.p.get(e))):t.u.has(e)},a.add=function(e){var t=this[J];return n(t),this.has(e)||(i(t),F(t),t.i.add(e)),this},a.delete=function(e){if(!this.has(e))return!1;var t=this[J];return n(t),i(t),F(t),t.i.delete(e)||!!t.p.has(e)&&t.i.delete(t.p.get(e))},a.clear=function(){var e=this[J];n(e),p(e).size&&(i(e),F(e),e.i.clear())},a.values=function(){var e=this[J];return n(e),i(e),e.i.values()},a.entries=function(){var e=this[J];return n(e),i(e),e.i.entries()},a.keys=function(){return this.values()},a[K]=function(){return this.values()},a.forEach=function(e,t){for(var a=this.values(),i=a.next();!i.done;)e.call(t,i.value,i.value,this),i=a.next()},t}();j("MapSet",{$:function(e,t){return new r(e,t)},C:function(e,t){return new c(e,t)}})}var U;Object.defineProperty(t,"__esModule",{value:!0});var B,$="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),q="undefined"!=typeof Map,V="undefined"!=typeof Set,W="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H=$?Symbol.for("immer-nothing"):((U={})["immer-nothing"]=!0,U),G=$?Symbol.for("immer-draftable"):"__$immer_draftable",J=$?Symbol.for("immer-state"):"__$immer_state",K="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Y=""+Object.prototype.constructor,Q="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,X=Object.getOwnPropertyDescriptors||function(e){var t={};return Q(e).forEach((function(a){t[a]=Object.getOwnPropertyDescriptor(e,a)})),t},Z={},ee={get:function(e,t){if(t===J)return e;var a=p(e);if(!o(a,t))return function(e,t,a){var i,l=E(t,a);return l?"value"in l?l.value:null===(i=l.get)||void 0===i?void 0:i.call(e.k):void 0}(e,a,t);var i=a[t];return e.R||!l(i)?i:i===S(e.u,t)?(C(e),e.i[t]=z(e.A.h,i,e)):i},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,a){var i=E(p(e),t);if(null==i?void 0:i.set)return i.set.call(e.k,a),!0;if(!e.M){var l=S(p(e),t),s=null==l?void 0:l[J];if(s&&s.u===a)return e.i[t]=a,e.D[t]=!1,!0;if(d(a,l)&&(void 0!==a||o(e.u,t)))return!0;C(e),F(e)}return e.i[t]===a&&"number"!=typeof a&&(void 0!==a||t in e.i)||(e.i[t]=a,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==S(e.u,t)||t in e.u?(e.D[t]=!1,C(e),F(e)):delete e.D[t],e.i&&delete e.i[t],!0},getOwnPropertyDescriptor:function(e,t){var a=p(e),i=Reflect.getOwnPropertyDescriptor(a,t);return i?{writable:!0,configurable:1!==e.t||"length"!==t,enumerable:i.enumerable,value:a[t]}:i},defineProperty:function(){a(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.u)},setPrototypeOf:function(){a(12)}},te={};s(ee,(function(e,t){te[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),te.deleteProperty=function(e,t){return te.set.call(this,e,t,void 0)},te.set=function(e,t,a){return ee.set.call(this,e[0],t,a,e[0])};var ae=function(){function e(e){var t=this;this.S=W,this.K=!0,this.produce=function(e,i,s){if("function"==typeof e&&"function"!=typeof i){var n=i;i=e;var o=t;return function(e){var t=this;void 0===e&&(e=n);for(var a=arguments.length,l=Array(a>1?a-1:0),s=1;s<a;s++)l[s-1]=arguments[s];return o.produce(e,(function(e){var a;return(a=i).call.apply(a,[t,e].concat(l))}))}}var r;if("function"!=typeof i&&a(6),void 0!==s&&"function"!=typeof s&&a(7),l(e)){var c=P(t),d=z(t,e,void 0),u=!0;try{r=i(d),u=!1}finally{u?O(c):M(c)}return"undefined"!=typeof Promise&&r instanceof Promise?r.then((function(e){return v(c,s),w(e,c)}),(function(e){throw O(c),e})):(v(c,s),w(r,c))}if(!e||"object"!=typeof e){if(void 0===(r=i(e))&&(r=e),r===H&&(r=void 0),t.K&&x(r,!0),s){var m=[],p=[];b("Patches").g(e,r,m,p),s(m,p)}return r}a(21,e)},this.produceWithPatches=function(e,a){if("function"==typeof e)return function(a){for(var i=arguments.length,l=Array(i>1?i-1:0),s=1;s<i;s++)l[s-1]=arguments[s];return t.produceWithPatches(a,(function(t){return e.apply(void 0,[t].concat(l))}))};var i,l,s=t.produce(e,a,(function(e,t){i=e,l=t}));return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return[e,i,l]})):[s,i,l]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){l(e)||a(8),i(e)&&(e=A(e));var t=P(this),s=z(this,e,void 0);return s[J].I=!0,M(t),s},t.finishDraft=function(e,t){var a=(e&&e[J]).A;return v(a,t),w(void 0,a)},t.setAutoFreeze=function(e){this.K=e},t.setUseProxies=function(e){e&&!W&&a(20),this.S=e},t.applyPatches=function(e,t){var a;for(a=t.length-1;a>=0;a--){var l=t[a];if(0===l.path.length&&"replace"===l.op){e=l.value;break}}a>-1&&(t=t.slice(a+1));var s=b("Patches").W;return i(e)?s(e,t):this.produce(e,(function(e){return s(e,t)}))},e}(),ie=new ae,le=ie.produce,se=ie.produceWithPatches.bind(ie),ne=ie.setAutoFreeze.bind(ie),oe=ie.setUseProxies.bind(ie),re=ie.applyPatches.bind(ie),ce=ie.createDraft.bind(ie),de=ie.finishDraft.bind(ie);t.Immer=ae,t.applyPatches=re,t.castDraft=function(e){return e},t.castImmutable=function(e){return e},t.createDraft=ce,t.current=A,t.default=le,t.enableAllPlugins=function(){I(),R(),N()},t.enableES5=I,t.enableMapSet=R,t.enablePatches=N,t.finishDraft=de,t.freeze=x,t.immerable=G,t.isDraft=i,t.isDraftable=l,t.nothing=H,t.original=function(e){return i(e)||a(23,e),e[J].u},t.produce=le,t.produceWithPatches=se,t.setAutoFreeze=ne,t.setUseProxies=oe},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(45);case"v8light":return a(47)}},function(e,t,a){var i=a(32),l=a(46);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmTimeline{overflow:hidden;width:100%}.ilmTimeline__phasesContainer{display:inline-block;margin-top:8px;width:100%}.ilmTimeline__phasesContainer__phase:first-child{padding-left:0;padding-right:8px}.ilmTimeline__phasesContainer__phase:last-child{padding-left:8px;padding-right:0}.ilmTimeline__phasesContainer__phase:only-child{padding-left:0;padding-right:0}.ilmTimeline__phasesContainer__phase{display:inline-block;padding-left:8px;padding-right:8px}.ilmTimeline__deleteIconContainer{background-color:#25262e;border-radius:50%;color:#98a2b3;margin-left:12px;padding:12px}.ilmTimeline__colorBar{border-radius:4px;display:inline-block;height:8px;margin-bottom:4px;margin-top:8px;width:100%}.ilmTimeline__hotPhase{width:var(--ilm-timeline-hot-phase-width)}.ilmTimeline__hotPhase__colorBar{background-color:#e7664c}.ilmTimeline__warmPhase{width:var(--ilm-timeline-warm-phase-width)}.ilmTimeline__warmPhase__colorBar{background-color:#d6bf57}.ilmTimeline__coldPhase{width:var(--ilm-timeline-cold-phase-width)}.ilmTimeline__coldPhase__colorBar{background-color:#6092c0}.ilmTimeline__frozenPhase{width:var(--ilm-timeline-frozen-phase-width)}.ilmTimeline__frozenPhase__colorBar{background-color:#ca8eae}",""]),e.exports=t},function(e,t,a){var i=a(32),l=a(48);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmTimeline{overflow:hidden;width:100%}.ilmTimeline__phasesContainer{display:inline-block;margin-top:8px;width:100%}.ilmTimeline__phasesContainer__phase:first-child{padding-left:0;padding-right:8px}.ilmTimeline__phasesContainer__phase:last-child{padding-left:8px;padding-right:0}.ilmTimeline__phasesContainer__phase:only-child{padding-left:0;padding-right:0}.ilmTimeline__phasesContainer__phase{display:inline-block;padding-left:8px;padding-right:8px}.ilmTimeline__deleteIconContainer{background-color:#f5f7fa;border-radius:50%;color:#69707d;margin-left:12px;padding:12px}.ilmTimeline__colorBar{border-radius:4px;display:inline-block;height:8px;margin-bottom:4px;margin-top:8px;width:100%}.ilmTimeline__hotPhase{width:var(--ilm-timeline-hot-phase-width)}.ilmTimeline__hotPhase__colorBar{background-color:#e7664c}.ilmTimeline__warmPhase{width:var(--ilm-timeline-warm-phase-width)}.ilmTimeline__warmPhase__colorBar{background-color:#d6bf57}.ilmTimeline__coldPhase{width:var(--ilm-timeline-cold-phase-width)}.ilmTimeline__coldPhase__colorBar{background-color:#6092c0}.ilmTimeline__frozenPhase{width:var(--ilm-timeline-frozen-phase-width)}.ilmTimeline__frozenPhase__colorBar{background-color:#ca8eae}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(50);case"v8light":return a(52)}},function(e,t,a){var i=a(32),l=a(51);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection{background-color:#25262e;padding:12px}",""]),e.exports=t},function(e,t,a){var i=a(32),l=a(53);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection{background-color:#f5f7fa;padding:12px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(55);case"v8light":return a(57)}},function(e,t,a){var i=a(32),l=a(56);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmDataTierAllocationField{max-width:400px}",""]),e.exports=t},function(e,t,a){var i=a(32),l=a(58);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmDataTierAllocationField{max-width:400px}",""]),e.exports=t},function(e,t,a){var i=a(60),l=a(61),s=l;s.v1=i,s.v4=l,e.exports=s},function(e,t,a){var i,l,s=a(36),n=a(37),o=0,r=0;e.exports=function(e,t,a){var c=t&&a||0,d=t||[],u=(e=e||{}).node||i,m=void 0!==e.clockseq?e.clockseq:l;if(null==u||null==m){var p=s();null==u&&(u=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==m&&(m=l=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),x=void 0!==e.nsecs?e.nsecs:r+1,f=h-o+(x-r)/1e4;if(f<0&&void 0===e.clockseq&&(m=m+1&16383),(f<0||h>o)&&void 0===e.nsecs&&(x=0),x>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=h,r=x,l=m;var g=(1e4*(268435455&(h+=122192928e5))+x)%4294967296;d[c++]=g>>>24&255,d[c++]=g>>>16&255,d[c++]=g>>>8&255,d[c++]=255&g;var b=h/4294967296*1e4&268435455;d[c++]=b>>>8&255,d[c++]=255&b,d[c++]=b>>>24&15|16,d[c++]=b>>>16&255,d[c++]=m>>>8|128,d[c++]=255&m;for(var j=0;j<6;++j)d[c+j]=u[j];return t||n(d)}},function(e,t,a){var i=a(36),l=a(37);e.exports=function(e,t,a){var s=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t)for(var o=0;o<16;++o)t[s+o]=n[o];return t||l(n)}},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(63);case"v8light":return a(65)}},function(e,t,a){var i=a(32),l=a(64);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmSearchableSnapshotField{max-width:400px}",""]),e.exports=t},function(e,t,a){var i=a(32),l=a(66);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmSearchableSnapshotField{max-width:400px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(68);case"v8light":return a(70)}},function(e,t,a){var i=a(32),l=a(69);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmPhaseIcon{align-items:center;background-color:#25262e;border-radius:50%;display:flex;height:32px;justify-content:center;width:32px}.ilmPhaseIcon--disabled{height:16px;margin:8px;width:16px}.ilmPhaseIcon--delete{background-color:#343741}.ilmPhaseIcon__inner--hot{fill:#ff7e62}.ilmPhaseIcon__inner--warm{fill:#f1d86f}.ilmPhaseIcon__inner--cold{fill:#79aad9}.ilmPhaseIcon__inner--frozen{fill:#e4a6c7}.ilmPhaseIcon__inner--delete{fill:#98a2b3}.ilmPhaseIcon__inner--disabled{fill:#535966}",""]),e.exports=t},function(e,t,a){var i=a(32),l=a(71);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmPhaseIcon{align-items:center;background-color:#f5f7fa;border-radius:50%;display:flex;height:32px;justify-content:center;width:32px}.ilmPhaseIcon--disabled{height:16px;margin:8px;width:16px}.ilmPhaseIcon--delete{background-color:#d3dae6}.ilmPhaseIcon__inner--hot{fill:#ff7e62}.ilmPhaseIcon__inner--warm{fill:#f1d86f}.ilmPhaseIcon__inner--cold{fill:#79aad9}.ilmPhaseIcon__inner--frozen{fill:#e4a6c7}.ilmPhaseIcon__inner--delete{fill:#69707d}.ilmPhaseIcon__inner--disabled{fill:#98a2b3}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(73);case"v8light":return a(75)}},function(e,t,a){var i=a(32),l=a(74);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmSettingsAccordion .ilmSettingsButton{color:#36a2ef;padding-bottom:8px;padding-top:8px}",""]),e.exports=t},function(e,t,a){var i=a(32),l=a(76);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmSettingsAccordion .ilmSettingsButton{color:#07c;padding-bottom:8px;padding-top:8px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(78);case"v8light":return a(80)}},function(e,t,a){var i=a(32),l=a(79);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmPhaseRequiredBadge{max-width:150px}.ilmPhaseTitle{min-width:100px}",""]),e.exports=t},function(e,t,a){var i=a(32),l=a(81);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},function(e,t,a){(t=a(33)(!1)).push([e.i,".ilmPhaseRequiredBadge{max-width:150px}.ilmPhaseTitle{min-width:100px}",""]),e.exports=t},function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return Ra}));var i=a(6),l=a.n(i),s=a(31),n=a(24),o=a(25),r=a(29),c=a(26),d=a(16),u=a(30);const m=()=>Object(n.useKibana)();var p=a(27),h=a(14),x=a(7),f=a(1),g=a(3),b=a(12),j=a(11);const y=e=>{let t="",a="";const i=/(\d+)(\w+)/.exec(e);return i&&(t=i[1],a=i[2]),{size:t,units:a}};var v=a(2),O=a(10),M=(a(38),a(8)),P=a(35);const _=(e={})=>{const{allocate:t,migrate:a}=e;return!1===(null==a?void 0:a.enabled)?"none":t&&(t.require&&Object.keys(t.require).length||t.include&&Object.keys(t.include).length||t.exclude&&Object.keys(t.exclude).length)?"node_attrs":"node_roles"},w=e=>{var t,a,i;const l=null==e||null===(t=e.phases)||void 0===t||null===(a=t.hot)||void 0===a||null===(i=a.actions)||void 0===i?void 0:i.rollover;return Boolean(l&&l.max_age===x.p.max_age&&l.max_docs===x.p.max_docs&&l.max_primary_shard_size===x.p.max_primary_shard_size&&l.max_primary_shard_docs===x.p.max_primary_shard_docs)};var T=a(28),k=a.n(T);const L=["hot","warm","cold","frozen","delete"],S=(e,t)=>{var a,i;return{min_age:null!==(a=t.phases)&&void 0!==a&&null!==(i=a[e])&&void 0!==i&&i.min_age?t.phases[e].min_age+t._meta[e].minAgeUnit:"0ms"}},E=(e,t)=>{let a;return a="micros"===t?parseInt(e,10)/1e3:"nanos"===t?parseInt(e,10)/1e6:k.a.duration(e,t).asMilliseconds(),a},F=e=>{var t;return 0===e.length?"":Boolean(null===(t=e[0])||void 0===t?void 0:t.snapshot_repository)?e[0].snapshot_repository:F(e.slice(1))},C="_meta.hot.customRollover.enabled",z="_meta.hot.isUsingDefaultRollover",A=e=>`_meta.${e}.downsample.enabled`,D={maxDocs:"phases.hot.actions.rollover.max_docs",maxAge:"phases.hot.actions.rollover.max_age",maxSize:"phases.hot.actions.rollover.max_size",maxPrimaryShardSize:"phases.hot.actions.rollover.max_primary_shard_size",maxPrimaryShardDocs:"phases.hot.actions.rollover.max_primary_shard_docs"},I="found-snapshots",N=[{value:"gb",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.gigabytesLabel",{defaultMessage:"gigabytes"})},{value:"mb",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.megabytesLabel",{defaultMessage:"megabytes"})},{value:"b",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.bytesLabel",{defaultMessage:"bytes"})},{value:"kb",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.kilobytesLabel",{defaultMessage:"kilobytes"})},{value:"tb",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.terabytesLabel",{defaultMessage:"terabytes"})},{value:"pb",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.petabytesLabel",{defaultMessage:"petabytes"})}],R=[{value:"d",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.timeUnits.daysLabel",{defaultMessage:"days"})},{value:"h",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.timeUnits.hoursLabel",{defaultMessage:"hours"})},{value:"m",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.timeUnits.minutesLabel",{defaultMessage:"minutes"})}],U=({dataTierAllocationType:e,allocationNodeAttribute:t},a={},i={},l)=>{var s,n;const{allocate:o,migrate:r,...c}=a,d={...c};if(o){const{include:e,exclude:t,require:a,number_of_replicas:i,...l}=o;Object(O.isEmpty)(l)||(d.allocate={...l})}switch(e){case"node_attrs":if(t){const[e,a]=t.split(":");d.allocate={...d.allocate,require:{[e]:a}}}else d.migrate=i.migrate;var u,m;Object(O.isEmpty)(null==i||null===(s=i.allocate)||void 0===s?void 0:s.include)||(d.allocate={...d.allocate,include:{...null==i||null===(u=i.allocate)||void 0===u?void 0:u.include}}),Object(O.isEmpty)(null==i||null===(n=i.allocate)||void 0===n?void 0:n.exclude)||(d.allocate={...d.allocate,exclude:{...null==i||null===(m=i.allocate)||void 0===m?void 0:m.exclude}});break;case"none":d.migrate={...null==i?void 0:i.migrate,enabled:!1}}return null!=l&&(d.allocate={...d.allocate,number_of_replicas:l}),d},B={editPolicy:{shrinkLabel:v.i18n.translate("xpack.indexLifecycleMgmt.shrink.enableShrinkLabel",{defaultMessage:"Shrink index"}),shrinkCountLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.shrink.configureShardCountLabel",{defaultMessage:"Configure shard count"}),shrinkSizeLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.shrink.configureShardSizeLabel",{defaultMessage:"Configure shard size"}),rolloverOffsetsHotPhaseTiming:v.i18n.translate("xpack.indexLifecycleMgmt.rollover.rolloverOffsetsPhaseTimingDescription",{defaultMessage:"How long it takes to reach the rollover criteria in the hot phase can vary."}),searchableSnapshotInHotPhase:{searchableSnapshotDisallowed:{calloutTitle:v.i18n.translate("xpack.indexLifecycleMgmt.searchableSnapshot.disallowedCalloutTitle",{defaultMessage:"Searchable snapshot disabled"}),calloutBody:v.i18n.translate("xpack.indexLifecycleMgmt.searchableSnapshot.disallowedCalloutBody",{defaultMessage:"To use searchable snapshot in this phase you must disable searchable snapshot in the hot phase."})}},forceMergeEnabledFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.forcemerge.enableLabel",{defaultMessage:"Force merge data"}),readonlyEnabledFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.readonlyFieldLabel",{defaultMessage:"Make index read only"}),downsampleEnabledFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.downsampleFieldLabel",{defaultMessage:"Enable downsampling"}),downsampleIntervalFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.downsampleIntervalFieldLabel",{defaultMessage:"Downsampling interval"}),downsampleIntervalFieldUnitsLabel:v.i18n.translate("xpack.indexLifecycleMgmt.downsampleIntervalFieldUnitsLabel",{defaultMessage:"Downsampling interval units"}),maxNumSegmentsFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.forceMerge.numberOfSegmentsLabel",{defaultMessage:"Number of segments"}),indexPriorityFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.indexPriorityLabel",{defaultMessage:"Index priority"}),bestCompressionFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.forcemerge.bestCompressionLabel",{defaultMessage:"Compress stored fields"}),bestCompressionFieldHelpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.forceMerge.bestCompressionText",{defaultMessage:"Use higher compression for stored fields at the cost of slower performance."}),allocationTypeOptionsFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.dataTierAllocation.allocationFieldLabel",{defaultMessage:"Data tier options"}),allocationNodeAttributeFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.dataTierAllocation.nodeAllocationFieldLabel",{defaultMessage:"Select a node attribute"}),searchableSnapshotsRepoFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotRepoFieldLabel",{defaultMessage:"Snapshot repository"}),searchableSnapshotsStorageFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotStorageFieldLabel",{defaultMessage:"Searchable snapshot storage"}),maxPrimaryShardSizeLabel:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumPrimaryShardSizeLabel",{defaultMessage:"Maximum primary shard size"}),maxPrimaryShardDocsLabel:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumPrimaryShardDocsLabel",{defaultMessage:"Maximum docs in the primary shard"}),maxPrimaryShardSizeUnitsLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.maximumPrimaryShardSizeAriaLabel",{defaultMessage:"Maximum shard size units"}),errors:{numberRequired:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.numberRequiredErrorMessage",{defaultMessage:"A number is required."}),numberGreatThan0Required:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.numberAboveZeroRequiredError",{defaultMessage:"Only numbers above 0 are allowed."}),integerRequired:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.integerRequiredError",{defaultMessage:"Only integers are allowed."}),maximumAgeRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumAgeMissingError",{defaultMessage:"A maximum age is required."}),maximumSizeRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumIndexSizeMissingError",{defaultMessage:"A maximum index size is required."}),maximumDocumentsRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumDocumentsMissingError",{defaultMessage:"Maximum documents is required."}),maximumPrimaryShardSizeRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumPrimaryShardSizeMissingError",{defaultMessage:"A maximum primary shard size is required"}),maximumPrimaryShardDocsRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumPrimaryShardDocsMissingError",{defaultMessage:"Maximum documents in the primary shard is required"}),rollOverConfigurationCallout:{title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.rolloverConfigurationError.title",{defaultMessage:"Invalid rollover configuration"}),body:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.rolloverConfigurationError.body",{defaultMessage:"A value for one of maximum primary shard size, maximum documents, maximum age or maximum index size is required."})},nonNegativeNumberRequired:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.nonNegativeNumberRequiredError",{defaultMessage:"Only non-negative numbers are allowed."}),policyNameContainsInvalidChars:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.policyNameContainsInvalidCharsError",{defaultMessage:"A policy name cannot contain spaces or commas."}),policyNameAlreadyUsedErrorMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.policyNameAlreadyUsedError",{defaultMessage:"That policy name is already used."}),policyNameMustBeDifferentErrorMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.differentPolicyNameRequiredError",{defaultMessage:"The policy name must be different."}),policyNameRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.policyNameRequiredError",{defaultMessage:"A policy name is required."}),policyNameStartsWithUnderscoreErrorMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.policyNameStartsWithUnderscoreError",{defaultMessage:"A policy name cannot start with an underscore."}),policyNameTooLongErrorMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.policyNameTooLongError",{defaultMessage:"A policy name cannot be longer than 255 bytes."}),searchableSnapshotRepoRequired:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotRepoRequiredError",{defaultMessage:"A snapshot repository name is required."})},titles:{hot:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.hotPhase.hotPhaseTitle",{defaultMessage:"Hot phase"}),warm:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.warmPhaseTitle",{defaultMessage:"Warm phase"}),cold:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.coldPhaseTitle",{defaultMessage:"Cold phase"}),frozen:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.frozenPhase.frozenPhaseTitle",{defaultMessage:"Frozen phase"}),delete:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.deletePhaseTitle",{defaultMessage:"Delete phase"})},descriptions:{hot:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.hotPhase.hotPhaseDescription",{defaultMessage:"Store your most recent, most frequently-searched data in the hot tier. The hot tier provides the best indexing and search performance by using the most powerful, expensive hardware."}),warm:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.warmPhaseDescription",{defaultMessage:"Move data to the warm tier when you are still likely to search it, but infrequently need to update it. The warm tier is optimized for search performance over indexing performance."}),cold:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.coldPhaseDescription",{defaultMessage:"Move data to the cold tier when you are searching it less often and donâ€™t need to update it. The cold tier is optimized for cost savings over search performance."}),frozen:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.frozenPhase.frozenPhaseDescription",{defaultMessage:"Move data to the frozen tier for long term retention. The frozen tier provides the most cost-effective way store your data and still be able to search it."}),delete:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.deletePhaseDescription",{defaultMessage:"Delete data you no longer need."})}}},{numberGreaterThanField:$,containsCharsField:q,emptyField:V,startsWithField:W}=r.fieldValidators,H=({than:e,message:t})=>a=>{if(a.value)return $({than:e,message:t})({...a,value:parseInt(a.value,10)})},G=H({than:0,message:B.editPolicy.errors.numberGreatThan0Required}),J=H({than:-1,message:B.editPolicy.errors.nonNegativeNumberRequired}),K="ROLLOVER_VALUE_REQUIRED_VALIDATION_CODE",Y=Object.values(D),Q=({form:e,path:t})=>{const a=e.getFields();if(!Y.some((e=>{var t;return Boolean(null===(t=a[e])||void 0===t?void 0:t.value)}))){const e={code:K,message:""};switch(t){case D.maxAge:e.message=B.editPolicy.errors.maximumAgeRequiredMessage;break;case D.maxDocs:e.message=B.editPolicy.errors.maximumDocumentsRequiredMessage;break;case D.maxPrimaryShardSize:e.message=B.editPolicy.errors.maximumPrimaryShardSizeRequiredMessage;break;case D.maxPrimaryShardDocs:e.message=B.editPolicy.errors.maximumPrimaryShardDocsRequiredMessage;break;default:e.message=B.editPolicy.errors.maximumSizeRequiredMessage}return e}Y.forEach((e=>{var t;null===(t=a[e])||void 0===t||t.clearErrors(K)}))},X=e=>{var t;if(!Number.isInteger(Number(null!==(t=e.value)&&void 0!==t?t:"")))return{message:B.editPolicy.errors.integerRequired}},Z=e=>({formData:t})=>{if("warm"===e)return;const a=e=>{const a=t[`_meta.${e}.minAgeToMilliSeconds`];return{milli:a,esFormat:a>=0?t[`phases.${e}.min_age`]+t[`_meta.${e}.minAgeUnit`]:void 0}},i={warm:a("warm"),cold:a("cold"),frozen:a("frozen"),delete:a("delete")},l={greaterThanWarmPhase:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.minAgeSmallerThanWarmPhaseError",{defaultMessage:"Must be greater or equal than the warm phase value ({value})",values:{value:i.warm.esFormat}}),greaterThanColdPhase:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.minAgeSmallerThanColdPhaseError",{defaultMessage:"Must be greater or equal than the cold phase value ({value})",values:{value:i.cold.esFormat}}),greaterThanFrozenPhase:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.minAgeSmallerThanFrozenPhaseError",{defaultMessage:"Must be greater or equal than the frozen phase value ({value})",values:{value:i.frozen.esFormat}})};if("cold"===e)return i.warm.milli>=0&&i.cold.milli<i.warm.milli?{message:l.greaterThanWarmPhase}:void 0;if("frozen"===e)return i.cold.milli>=0&&i.frozen.milli<i.cold.milli?{message:l.greaterThanColdPhase}:i.warm.milli>=0&&i.frozen.milli<i.warm.milli?{message:l.greaterThanWarmPhase}:void 0;if("delete"===e){if(i.frozen.milli>=0&&i.delete.milli<i.frozen.milli)return{message:l.greaterThanFrozenPhase};if(i.cold.milli>=0&&i.delete.milli<i.cold.milli)return{message:l.greaterThanColdPhase};if(i.warm.milli>=0&&i.delete.milli<i.warm.milli)return{message:l.greaterThanWarmPhase}}},ee=e=>({formData:t})=>{if("hot"===e)return;const a=e=>{const a=t[`_meta.${e}.downsample.fixedIntervalSize`],i=t[`_meta.${e}.downsample.fixedIntervalUnits`];return a&&i?{milliseconds:k.a.duration(a,i).asMilliseconds(),esFormat:a+i}:null},i={hot:a("hot"),warm:a("warm"),cold:a("cold")},l=(e,t)=>e>t&&e%t==0;if("warm"===e&&i.warm&&i.hot&&!l(i.warm.milliseconds,i.hot.milliseconds))return{message:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.downsamplePreviousIntervalWarmPhaseError",{defaultMessage:"Must be greater than and a multiple of the hot phase value ({value})",values:{value:i.hot.esFormat}})};if("cold"===e&&i.cold)if(i.warm){if(!l(i.cold.milliseconds,i.warm.milliseconds))return{message:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.downsamplePreviousIntervalColdPhaseWarmError",{defaultMessage:"Must be greater than and a multiple of the warm phase value ({value})",values:{value:i.warm.esFormat}})}}else if(i.hot&&!l(i.cold.milliseconds,i.hot.milliseconds))return{message:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.downsamplePreviousIntervalColdPhaseHotError",{defaultMessage:"Must be greater than and a multiple of the hot phase value ({value})",values:{value:i.hot.esFormat}})}},te=Object.values(D),{emptyField:ae,numberGreaterThanField:ie}=r.fieldValidators,le={stringToNumber:e=>null!=e?parseInt(e,10):void 0},se={label:B.editPolicy.maxNumSegmentsFieldLabel,validations:[{validator:ae(v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.forcemerge.numberOfSegmentsRequiredError",{defaultMessage:"A value for number of segments is required."}))},{validator:G}],serializer:le.stringToNumber},ne={snapshot_repository:{label:B.editPolicy.searchableSnapshotsRepoFieldLabel,validations:[{validator:ae(B.editPolicy.errors.searchableSnapshotRepoRequired)}],helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshot.repositoryHelpText",{defaultMessage:"Each phase uses the same snapshot repository."})},storage:{label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshot.storageLabel",{defaultMessage:"Storage"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshot.storageHelpText",{defaultMessage:"Type of snapshot mounted for the searchable snapshot. This is an advanced option. Only change it if you know what you're doing."})}},oe={label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.numberOfReplicasLabel",{defaultMessage:"Number of replicas"}),validations:[{validator:ae(B.editPolicy.errors.numberRequired)},{validator:J}],serializer:le.stringToNumber},re={label:v.i18n.translate("xpack.indexLifecycleMgmt.shrink.numberOfPrimaryShardsLabel",{defaultMessage:"Number of primary shards"}),defaultValue:1,validations:[{validator:ae(B.editPolicy.errors.numberRequired)},{validator:ie({message:B.editPolicy.errors.numberGreatThan0Required,than:0})}],serializer:le.stringToNumber},ce={label:B.editPolicy.maxPrimaryShardSizeLabel,validations:[{validator:ae(B.editPolicy.errors.numberRequired)},{validator:ie({message:B.editPolicy.errors.numberGreatThan0Required,than:0})}],serializer:le.stringToNumber},de=e=>({defaultValue:x.n[e],label:B.editPolicy.indexPriorityFieldLabel,validations:[{validator:ae(B.editPolicy.errors.numberRequired)},{validator:J}],serializer:le.stringToNumber}),ue=(e,t)=>({defaultValue:t,fieldsToValidateOnChange:[],validations:[{validator:ae(B.editPolicy.errors.numberRequired)},{validator:J},{validator:X},{validator:Z(e)}]}),me=(e,t=!0)=>{const a=["hot","warm","cold"];return(i=e,a.slice(a.indexOf(i)+(t?0:1))).map((e=>`_meta.${e}.downsample.fixedIntervalSize`));var i},pe=e=>({enabled:{defaultValue:!1,label:B.editPolicy.downsampleEnabledFieldLabel,fieldsToValidateOnChange:me(e,!1)},fixedIntervalSize:{label:B.editPolicy.downsampleIntervalFieldLabel,fieldsToValidateOnChange:me(e),validations:[{validator:ae(B.editPolicy.errors.numberRequired)},{validator:G},{validator:X},{validator:ee(e)}]},fixedIntervalUnits:{defaultValue:"d",fieldsToValidateOnChange:me(e)}});var he=a(0);const xe=Object(i.createContext)(null),fe="phases.hot.actions.searchable_snapshot.snapshot_repository",ge="phases.cold.actions.searchable_snapshot.snapshot_repository",be=({children:e})=>{const[t]=Object(o.useFormData)({watch:[fe,ge,C,z,A("hot"),A("warm"),A("cold")]}),a=Object(O.get)(t,z),i=Object(O.get)(t,C,!0),l={isUsingRollover:!1!==a||i,isUsingSearchableSnapshotInHotPhase:null!=Object(O.get)(t,fe),isUsingSearchableSnapshotInColdPhase:null!=Object(O.get)(t,ge),isUsingDownsampleInHotPhase:!!Object(O.get)(t,A("hot")),isUsingDownsampleInWarmPhase:!!Object(O.get)(t,A("warm")),isUsingDownsampleInColdPhase:!!Object(O.get)(t,A("cold"))};return Object(he.jsx)(xe.Provider,{value:l},e)},je=()=>{const e=Object(i.useContext)(xe);if(!e)throw new Error("Cannot use configuration outside of configuration context");return e},ye=Object(i.createContext)(null),ve=()=>({hasErrors:!1,hot:{},warm:{},cold:{},frozen:{},delete:{},other:{}}),Oe=({children:e})=>{const[t,a]=Object(i.useState)(ve),l=Object(o.useFormContext)(),{getErrors:s,isSubmitted:n}=l,r=Object(i.useCallback)(((e,t,i)=>{a((a=>({...a,hasErrors:!0,[e]:{...a[e],[t]:i}})))}),[a]),c=Object(i.useCallback)(((e,t)=>{s().length?a((a=>{const{[e]:{[t]:i,...l},hasErrors:s,...n}=a,o=Object.keys(l).length>0||Object.values(n).some((e=>Object.keys(e).length>0));return{...a,hasErrors:o,[e]:l}})):a(ve)}),[s,a]);return Object(he.jsx)(ye.Provider,{value:{errors:t,addError:r,clearError:c,isFormSubmitted:n}},e)},Me=()=>{const e=Object(i.useContext)(ye);if(!e)throw new Error("useFormErrorsContext can only be used inside of FormErrorsProvider");return e},Pe=e=>{var t,a,i,l,s,n;const o=null==e||null===(t=e._meta)||void 0===t||null===(a=t.warm)||void 0===a?void 0:a.enabled,r=null==e||null===(i=e._meta)||void 0===i||null===(l=i.cold)||void 0===l?void 0:l.enabled,c=null==e||null===(s=e._meta)||void 0===s||null===(n=s.frozen)||void 0===n?void 0:n.enabled;return{hot:{isFinalDataPhase:!o&&!r&&!c},warm:{isFinalDataPhase:o&&!r&&!c},cold:{isFinalDataPhase:r&&!c},frozen:{isFinalDataPhase:c}}},_e=Object(i.createContext)(null),we=({children:e})=>{const{deleteEnabled:t}=Ee(),[a]=Object(o.useFormData)({watch:["_meta.warm.enabled","_meta.cold.enabled","_meta.frozen.enabled","_meta.delete.enabled"]});return Object(he.jsx)(_e.Provider,{value:{...Pe(a),isDeletePhaseEnabled:t.value,setDeletePhaseEnabled:t.setValue}},e)},Te=()=>{const e=Object(i.useContext)(_e);if(!e)throw new Error("Cannot use phase timings outside of phase timings context");return e},ke=Object(i.createContext)(null),Le={deleteEnabled:{path:"_meta.delete.enabled"},searchableSnapshotRepo:{path:"_meta.searchableSnapshot.repository"},warmMinAgeMilliSeconds:{path:"_meta.warm.minAgeToMilliSeconds"},coldMinAgeMilliSeconds:{path:"_meta.cold.minAgeToMilliSeconds"},frozenMinAgeMilliSeconds:{path:"_meta.frozen.minAgeToMilliSeconds"},deleteMinAgeMilliSeconds:{path:"_meta.delete.minAgeToMilliSeconds"},hotIsUsingShardSize:{path:"_meta.hot.shrink.isUsingShardSize"},warmIsUsingShardSize:{path:"_meta.warm.shrink.isUsingShardSize"}},Se=({children:e})=>Object(he.jsx)(o.UseMultiFields,{fields:Le},(t=>Object(he.jsx)(ke.Provider,{value:t},e))),Ee=()=>{const e=Object(i.useContext)(ke);if(!e)throw new Error("Cannot use global fields outside of global fields context");return e},Fe=({form:e,children:t})=>Object(he.jsx)(o.Form,{form:e},Object(he.jsx)(be,null,Object(he.jsx)(Oe,null,Object(he.jsx)(Se,null,Object(he.jsx)(we,null,t)))));var Ce=a(34),ze=a.n(Ce);const Ae=e=>t=>t.startsWith(`phases.${e}`)||t.startsWith(`_meta.${e}`),De=Ae("hot"),Ie=Ae("warm"),Ne=Ae("cold"),Re=Ae("frozen"),Ue=Ae("delete"),Be=e=>{const{path:t}=e,a=Object(i.useRef)(!1),l=Object(i.useMemo)((()=>{return De(e=t)?"hot":Ie(e)?"warm":Ne(e)?"cold":Re(e)?"frozen":Ue(e)?"delete":"other";var e}),[t]),{addError:s,clearError:n}=Me(),r=Object(i.useCallback)((e=>{a.current&&(e?s(l,t,e):n(l,t))}),[l,t,s,n]);return Object(i.useEffect)((()=>(a.current=!0,()=>{a.current=!1})),[]),Object(i.useEffect)((()=>()=>{!1===a.current&&n(l,t)}),[l,t,n]),Object(he.jsx)(o.UseField,ze()({},e,{onError:r}))};var $e=a(9),qe=a(15);const Ve=({docPath:e,text:t})=>{const a=t||Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.learnMore",defaultMessage:"Learn more"});return Object(he.jsx)(f.EuiLink,{href:e,target:"_blank",external:!0},a)},We=()=>Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.optionalMessage",defaultMessage:" (optional)"}),He=({policyName:e,close:t})=>{const[a,s]=Object(i.useState)(void 0),{validate:n,getErrors:r}=Object(o.useFormContext)(),[,c]=Object(o.useFormData)(),d=Object(i.useCallback)((async()=>{s(void 0);const e=await n(),t=r(),a=1===t.length&&t[0]===B.editPolicy.errors.policyNameRequiredMessage;var i;s(e||a?{phases:{hot:(i=c()).phases.hot,warm:i.phases.warm,cold:i.phases.cold,frozen:i.phases.frozen,delete:i.phases.delete},_meta:i._meta}:null)}),[s,c,n,r]);let u;switch(Object(i.useEffect)((()=>{d()}),[d]),a){case void 0:u=Object(he.jsx)(f.EuiLoadingSpinner,null);break;case null:u=Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"policyRequestInvalidAlert",iconType:"alert",color:"danger",title:v.i18n.translate("xpack.indexLifecycleMgmt.policyJsonFlyout.validationErrorCallout.title",{defaultMessage:"Invalid policy"})},v.i18n.translate("xpack.indexLifecycleMgmt.policyJsonFlyout.validationErrorCallout.body",{defaultMessage:"To view the JSON for this policy address all validation errors."}));break;default:const t=`PUT _ilm/policy/${e||"<policyName>"}\n${JSON.stringify({policy:{...a}},null,2)}`;u=Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiText,null,Object(he.jsx)("p",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.descriptionText",defaultMessage:"This Elasticsearch request will create or update this index lifecycle policy."}))),Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(f.EuiCodeBlock,{language:"json",isCopyable:!0,"data-test-subj":"policyRequestJson"},t))}return Object(he.jsx)(f.EuiFlyout,{maxWidth:480,onClose:t},Object(he.jsx)(f.EuiFlyoutHeader,null,Object(he.jsx)(f.EuiTitle,null,Object(he.jsx)("h2",null,e?Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.namedTitle",defaultMessage:"Request for '{policyName}'",values:{policyName:e}}):Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.unnamedTitle",defaultMessage:"Request"})))),Object(he.jsx)(f.EuiFlyoutBody,null,u),Object(he.jsx)(f.EuiFlyoutFooter,null,Object(he.jsx)(f.EuiButtonEmpty,{iconType:"cross",onClick:t,flush:"left","data-test-subj":"policyRequestClose"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.closeButtonLabel",defaultMessage:"Close"}))))},Ge=({children:e,switchProps:t,description:a,fieldNotices:s,...n})=>{var o;if(t&&"boolean"!=typeof t.checked&&"boolean"!=typeof t.initialValue)throw new Error("Must specify controlled, uncontrolled component. See SwitchProps interface!");const[r,c]=Object(i.useState)((()=>{var e;return null!==(e=null==t?void 0:t.initialValue)&&void 0!==e&&e})),d=Boolean(void 0===t||(null!==(o=null==t?void 0:t.checked)&&void 0!==o?o:r));return Object(he.jsx)(f.EuiDescribedFormGroup,ze()({},n,{description:Object(he.jsx)(l.a.Fragment,null,a,Object(he.jsx)(f.EuiSpacer,{size:"m"}),(()=>{if(!t)return null;const{onChange:e,checked:a,initialValue:i,...l}=t;return Object(he.jsx)(f.EuiSwitch,ze()({},l,{checked:d,onChange:t=>{const a=t.target.checked;c(a),e&&e(a)}}))})(),s)}),d?"function"==typeof e?e():e:null)},Je=({switchProps:e,...t})=>Object(he.jsx)(Be,{path:e.path},(a=>Object(he.jsx)(Ge,ze()({},t,{switchProps:{...e,label:a.label,checked:a.value,onChange:a.setValue}})))),Ke=e=>{const{title:t,body:a,resendRequest:i}=e;return Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"m"}),Object(he.jsx)(f.EuiCallOut,{"data-test-subj":e["data-test-subj"],iconType:"help",color:"warning",title:Object(he.jsx)(l.a.Fragment,null,t,Object(he.jsx)(f.EuiButtonIcon,{size:"s",color:"warning",onClick:i,iconType:"refresh","aria-label":e["aria-label"]}))},a))},Ye=({phaseName:e,durationInPhase:t})=>Object(he.jsx)(f.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiText,{size:"s"},Object(he.jsx)("strong",null,e))),Object(he.jsx)(f.EuiFlexItem,{grow:!1},"string"==typeof t?Object(he.jsx)(f.EuiText,{size:"s"},t):t));a(44);const Qe=e=>null!=e,Xe=(e,t)=>e/t*100,Ze=(e,t)=>isFinite(e)?0===t?100:Xe(e,t):100,et={title:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.title",{defaultMessage:"Policy summary"}),description:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.description",{defaultMessage:"This policy moves data through the following phases."}),hotPhase:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.hotPhaseSectionTitle",{defaultMessage:"Hot phase"}),warmPhase:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.warmPhaseSectionTitle",{defaultMessage:"Warm phase"}),coldPhase:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.coldPhaseSectionTitle",{defaultMessage:"Cold phase"}),frozenPhase:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.frozenPhaseSectionTitle",{defaultMessage:"Frozen phase"}),deleteIcon:{toolTipContent:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.deleteIconToolTipContent",{defaultMessage:"Policy deletes the index after lifecycle phases complete."})},foreverIcon:{ariaLabel:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.foreverIconToolTipContent",{defaultMessage:"Forever"})}},tt=Object(i.memo)((({hasDeletePhase:e,isUsingRollover:t,...a})=>{const i={hot:{min_age:a.hotPhaseMinAge},warm:a.warmPhaseMinAge?{min_age:a.warmPhaseMinAge}:void 0,cold:a.coldPhaseMinAge?{min_age:a.coldPhaseMinAge}:void 0,frozen:a.frozenPhaseMinAge?{min_age:a.frozenPhaseMinAge}:void 0,delete:a.deletePhaseMinAge?{min_age:a.deletePhaseMinAge}:void 0},l=(s=i,L.reduce(((e,t,a)=>{var i;if("delete"===t)return e;if(!s[t])return e;const l=L.slice(a+1).find((e=>Boolean(s[e])));let n=1/0;if(l&&null!==(i=s[l])&&void 0!==i&&i.min_age){const{units:e,size:t}=y(s[l].min_age);n=E(t,e)}return{total:Math.max(e.total,n),phases:{...e.phases,[t]:Math.max(n-e.total,0)}}}),{total:0,phases:{hot:0,warm:s.warm?0:void 0,cold:s.cold?0:void 0,frozen:s.frozen?0:void 0}}));var s;const n=(e=>{const t=Ze(e.phases.hot,e.total)+50,a=null!=e.phases.warm?Ze(e.phases.warm,e.total)+50:0,i=null!=e.phases.cold?Ze(e.phases.cold,e.total)+50:0,l=null!=e.phases.frozen?Ze(e.phases.frozen,e.total)+50:0,s=t+a+i+l;return{hot:`${Xe(t,s)}%`,warm:`${Xe(a,s)}%`,cold:`${Xe(i,s)}%`,frozen:`${Xe(l,s)}%`}})(l),o=e=>l.phases[e]===1/0?Object(he.jsx)(ct,{color:"subdued","aria-label":et.foreverIcon.ariaLabel}):null,{docLinks:r}=m().services;return Object(he.jsx)(f.EuiFlexGroup,{gutterSize:"s",direction:"column",responsive:!1},Object(he.jsx)(f.EuiFlexItem,null,Object(he.jsx)(f.EuiTitle,{size:"s"},Object(he.jsx)("h2",null,et.title)),Object(he.jsx)(f.EuiText,{size:"s",color:"subdued"},et.description,"Â ",Object(he.jsx)(Ve,{docPath:r.links.elasticsearch.ilmPhaseTransitions,text:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutTimingText",defaultMessage:"Learn about timing"})}))),Object(he.jsx)(f.EuiFlexItem,null,Object(he.jsx)("div",{className:"ilmTimeline",ref:e=>{var t,a,i;e&&(e.style.setProperty("--ilm-timeline-hot-phase-width",n.hot),e.style.setProperty("--ilm-timeline-warm-phase-width",null!==(t=n.warm)&&void 0!==t?t:null),e.style.setProperty("--ilm-timeline-cold-phase-width",null!==(a=n.cold)&&void 0!==a?a:null),e.style.setProperty("--ilm-timeline-frozen-phase-width",null!==(i=n.frozen)&&void 0!==i?i:null))}},Object(he.jsx)(f.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart",responsive:!1},Object(he.jsx)(f.EuiFlexItem,null,Object(he.jsx)("div",{className:"ilmTimeline__phasesContainer"},Object(he.jsx)("div",{"data-test-subj":"ilmTimelinePhase-hot",className:"ilmTimeline__phasesContainer__phase ilmTimeline__hotPhase"},Object(he.jsx)("div",{className:"ilmTimeline__colorBar ilmTimeline__hotPhase__colorBar"}),Object(he.jsx)(Ye,{phaseName:et.hotPhase,durationInPhase:o("hot")})),Qe(l.phases.warm)&&Object(he.jsx)("div",{"data-test-subj":"ilmTimelinePhase-warm",className:"ilmTimeline__phasesContainer__phase ilmTimeline__warmPhase"},Object(he.jsx)("div",{className:"ilmTimeline__colorBar ilmTimeline__warmPhase__colorBar"}),Object(he.jsx)(Ye,{phaseName:et.warmPhase,durationInPhase:o("warm")})),Qe(l.phases.cold)&&Object(he.jsx)("div",{"data-test-subj":"ilmTimelinePhase-cold",className:"ilmTimeline__phasesContainer__phase ilmTimeline__coldPhase"},Object(he.jsx)("div",{className:"ilmTimeline__colorBar ilmTimeline__coldPhase__colorBar"}),Object(he.jsx)(Ye,{phaseName:et.coldPhase,durationInPhase:o("cold")})),Qe(l.phases.frozen)&&Object(he.jsx)("div",{"data-test-subj":"ilmTimelinePhase-frozen",className:"ilmTimeline__phasesContainer__phase ilmTimeline__frozenPhase"},Object(he.jsx)("div",{className:"ilmTimeline__colorBar ilmTimeline__frozenPhase__colorBar"}),Object(he.jsx)(Ye,{phaseName:et.frozenPhase,durationInPhase:o("frozen")})))),e&&Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)("div",{"data-test-subj":"ilmTimelinePhase-delete",className:"ilmTimeline__deleteIconContainer"},Object(he.jsx)(f.EuiIconTip,{type:"trash",content:et.deleteIcon.toolTipContent})))))))})),at=()=>{var e,t,a,i,l,s;const[n]=Object(o.useFormData)(),r=(e=>{var t;const{_meta:a}=e;return a?{hot:{min_age:void 0},warm:a.warm.enabled?S("warm",e):void 0,cold:a.cold.enabled?S("cold",e):void 0,frozen:null!==(t=a.frozen)&&void 0!==t&&t.enabled?S("frozen",e):void 0,delete:a.delete.enabled?S("delete",e):void 0}:{hot:{min_age:void 0}}})(n),{isUsingRollover:c}=je();return Object(he.jsx)(tt,{hotPhaseMinAge:r.hot.min_age,warmPhaseMinAge:null===(e=r.warm)||void 0===e?void 0:e.min_age,coldPhaseMinAge:null===(t=r.cold)||void 0===t?void 0:t.min_age,frozenPhaseMinAge:null===(a=r.frozen)||void 0===a?void 0:a.min_age,deletePhaseMinAge:null===(i=r.delete)||void 0===i?void 0:i.min_age,isUsingRollover:c,hasDeletePhase:Boolean(null===(l=n._meta)||void 0===l||null===(s=l.delete)||void 0===s?void 0:s.enabled)})},it={callout:{title:v.i18n.translate("xpack.indexLifecycleMgmt.policyErrorCalloutTitle",{defaultMessage:"This policy contains errors"}),body:v.i18n.translate("xpack.indexLifecycleMgmt.policyErrorCalloutDescription",{defaultMessage:"Please fix all errors before saving the policy."})}},lt=()=>{const{errors:{hasErrors:e},isFormSubmitted:t}=Me();return t&&e?Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"policyFormErrorsCallout",color:"danger",title:it.callout.title},it.callout.body),Object(he.jsx)(f.EuiSpacer,null)):null},st=e=>Object(he.jsx)("svg",ze()({viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none"},e),Object(he.jsx)("defs",null),Object(he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.44354 9.86928c-.47429.46802-1.12585.75702-1.84475.75702-1.45038 0-2.626143-1.17576-2.626143-2.62614S2.14841 5.37401 3.59879 5.37401c.71899 0 1.37049.28893 1.84473.75702l.00033-.00033.27438.27438L7.31327 8.0001l-.00001.00001.68777.68777.00001-.00002 1.86843 1.86844-.00078.0007c.65021.6442 1.54481 1.042 2.53251 1.042C14.3888 11.599 16 9.98772 16 8.00016s-1.6112-3.59879-3.5988-3.59879c-.9876 0-1.8822.39779-2.53249 1.04188l.00072.00073-.76518.76516.68777.68777.79978-.79975-.0002-.00017c.471-.44801 1.1082-.72298 1.8096-.72298 1.4504 0 2.6262 1.17577 2.6262 2.62615s-1.1758 2.62614-2.6262 2.62614c-.7012 0-1.3384-.2749-1.8094-.72282l.0002-.00024L8.68881 8.0001l.00278-.00277-.68777-.68777-.00278.00278-1.90297-1.90295-.0007.0007c-.64728-.62456-1.52806-1.00872-2.49858-1.00872C1.61124 4.40137 0 6.0126 0 8.00016 0 9.98772 1.61124 11.599 3.59879 11.599c.97055 0 1.85122-.3841 2.49844-1.0086l.00065.0006.80272-.8027-.68777-.68777-.76902.76901-.00027-.00026z"})),nt=v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseTiming.beforeDeleteDescription",{defaultMessage:"Delete data after this phase"}),ot=v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseTiming.foreverTimingDescription",{defaultMessage:"Keep data in this phase forever"}),rt=({phase:e})=>{const{isDeletePhaseEnabled:t,setDeletePhaseEnabled:a,[e]:i}=Te();if(!i.isFinalDataPhase)return null;const l=t?"ilmEnableDeletePhaseButton":"ilmDisableDeletePhaseButton",s=[{id:"ilmDisableDeletePhaseButton",label:ot,iconType:st},{id:"ilmEnableDeletePhaseButton",label:nt,iconType:"trash","data-test-subj":"enableDeletePhaseButton"}];return Object(he.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiText,{size:"s",color:"subdued"},t?nt:ot)),Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiButtonGroup,{legend:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.buttonGroupLegend",{defaultMessage:"Enable or disable delete phase"}),options:s,idSelected:l,onChange:e=>{a("ilmEnableDeletePhaseButton"===e)},isIconOnly:!0})))},ct=e=>Object(he.jsx)(f.EuiIcon,ze()({type:st},e)),dt=Object(i.createContext)(null),ut=({value:e,children:t})=>Object(he.jsx)(dt.Provider,{value:e},t),mt=()=>{const e=Object(i.useContext)(dt);if(!e)throw new Error("useEditPolicyContext can only be called inside of EditPolicyContext!");return e};var pt=a(13),ht=a(17);const xt=({policyName:e,indexTemplates:t,close:a})=>{const{services:{getUrlForApp:i}}=m();return Object(he.jsx)(f.EuiFlyout,{onClose:a},Object(he.jsx)(f.EuiFlyoutHeader,{hasBorder:!0},Object(he.jsx)(f.EuiTitle,{size:"m","data-test-subj":"indexTemplatesFlyoutHeader"},Object(he.jsx)("h2",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.indexTemplatesFlyout.headerText",defaultMessage:"Index templates that apply {policyName}",values:{policyName:e}})))),Object(he.jsx)(f.EuiFlyoutBody,null,Object(he.jsx)(f.EuiInMemoryTable,{pagination:!0,items:null!=t?t:[],columns:[{name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.indexTemplatesTable.nameHeader",{defaultMessage:"Index template name"}),render:e=>{return Object(he.jsx)(f.EuiLink,{"data-test-subj":"indexTemplateLink",className:"eui-textBreakAll",href:(t=e,i("management",{path:`data/index_management${Object(ht.getTemplateDetailsLink)(t)}`}))},e);var t}}]})),Object(he.jsx)(f.EuiFlyoutFooter,null,Object(he.jsx)(f.EuiButtonEmpty,{iconType:"cross",onClick:a,flush:"left"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexTemplatesFlyout.closeButtonLabel",defaultMessage:"Close"}))))},ft=()=>{var e;const{isNewPolicy:t,indices:a,indexTemplates:s,policyName:n,policy:o}=mt(),{services:{getUrlForApp:r}}=m(),[c,d]=Object(i.useState)(!1);if(t)return null;const u=a.length>0?Object(he.jsx)(f.EuiLink,{"data-test-subj":"linkedIndicesLink",external:!0,href:Object(pt.b)(null!=n?n:"",r),target:"_blank"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.linkedIndices",defaultMessage:"{indicesCount, plural, one {# linked index} other {# linked indices}}",values:{indicesCount:a.length}})):null,p=s.length>0?Object(he.jsx)(f.EuiLink,{"data-test-subj":"linkedIndexTemplatesLink",onClick:()=>d(!c)},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.linkedIndexTemplates",defaultMessage:"{indexTemplatesCount, plural, one {# linked index template} other {# linked index templates}}",values:{indexTemplatesCount:s.length}})):null,h=u?Object(he.jsx)(l.a.Fragment,null,u,p?Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.andDependenciesLink",defaultMessage:" and {indexTemplatesLink}",values:{indexTemplatesLink:p}}):null):p,x=null==o||null===(e=o._meta)||void 0===e?void 0:e.managed;return Object(he.jsx)(l.a.Fragment,null,c&&Object(he.jsx)(xt,{policyName:null!=n?n:"",indexTemplates:s,close:()=>d(!1)}),Object(he.jsx)(f.EuiText,{"data-test-subj":"editWarning"},x&&Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiCallOut,{title:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicyModal.proceedWithCautionCallOutTitle",defaultMessage:"Editing a managed policy can break Kibana"}),color:"danger",iconType:"alert","data-test-subj":"editManagedPolicyCallOut"},Object(he.jsx)("p",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicyModal.proceedWithCautionCallOutDescription",defaultMessage:"Managed policies are critical for internal operations."}))),Object(he.jsx)(f.EuiSpacer,null)),Object(he.jsx)("p",null,Object(he.jsx)("strong",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.editingExistingPolicyMessage",defaultMessage:"You are editing an existing policy."})),h?Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.dependenciesMessage",defaultMessage:" Any changes you make will affect {dependenciesLinks} that {count, plural, one {is} other {are}} attached to this policy.",values:{dependenciesLinks:h,count:a.length+s.length}}):null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.saveAsNewMessage",defaultMessage:" Alternatively, you can save these changes in a new policy."}))))},gt=({close:e,selectedNodeAttrs:t})=>{const{data:a,isLoading:i,error:l,resendRequest:s}=Object(j.i)(t);let n;if(i)n=Object(he.jsx)(f.EuiLoadingContent,{lines:3});else if(l){const{statusCode:e,message:t}=l;n=Object(he.jsx)(f.EuiCallOut,{title:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.nodeDetailsLoadingFailedTitle",defaultMessage:"Unable to load node attribute details"}),color:"danger"},Object(he.jsx)("p",null,t," (",e,")"),Object(he.jsx)(f.EuiButton,{onClick:s,iconType:"refresh",color:"danger"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.nodeDetailsReloadButton",defaultMessage:"Try again"})))}else n=Object(he.jsx)(f.EuiInMemoryTable,{items:a||[],columns:[{field:"nodeId",name:v.i18n.translate("xpack.indexLifecycleMgmt.nodeAttrDetails.idField",{defaultMessage:"ID"})},{field:"stats.name",name:v.i18n.translate("xpack.indexLifecycleMgmt.nodeAttrDetails.nameField",{defaultMessage:"Name"})},{field:"stats.host",name:v.i18n.translate("xpack.indexLifecycleMgmt.nodeAttrDetails.hostField",{defaultMessage:"Host"})}],pagination:!0,sorting:!0});return Object(he.jsx)(f.EuiPortal,null,Object(he.jsx)(f.EuiFlyout,{ownFocus:!0,onClose:e},Object(he.jsx)(f.EuiFlyoutBody,null,Object(he.jsx)(f.EuiTitle,null,Object(he.jsx)("h2",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.nodeAttrDetails.title",defaultMessage:"Nodes that contain the attribute {selectedNodeAttrs}",values:{selectedNodeAttrs:t}}))),Object(he.jsx)(f.EuiSpacer,{size:"s"}),n)))},bt={allocateToDataNodesOption:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.nodeAllocation.allocateToDataNodesOption",{defaultMessage:"Any data node"})},jt=({phase:e,nodes:t,isLoading:a,isCloudEnabled:s,isUsingDeprecatedDataRoleConfig:n})=>{const r=`_meta.${e}.allocationNodeAttribute`,[d]=Object(o.useFormData)({watch:[r]}),{docLinks:u}=m().services,p=u.links.elasticsearch.shardAllocationSettings,h=Object(O.get)(d,r),[x,b]=Object(i.useState)(null),j=Object.keys(t).map((e=>({text:`${e} (${t[e].length})`,value:e})));j.sort(((e,t)=>e.value.localeCompare(t.value)));let y=[];if(!s||n){const e={text:bt.allocateToDataNodesOption,value:""};y.push(e)}return y=y.concat(j),Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiText,{size:"s"},Object(he.jsx)("p",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAllocation.customOption.description",defaultMessage:"Use node attributes to control shard allocation. {learnMoreLink}.",values:{learnMoreLink:Object(he.jsx)(Ve,{text:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutShardAllocationLink",defaultMessage:"Learn about shard allocation"}),docPath:p})}}))),Object(he.jsx)(f.EuiSpacer,{size:"m"}),Object(he.jsx)(Be,{path:`_meta.${e}.allocationNodeAttribute`,component:c.SelectField,componentProps:{helpText:h?Object(he.jsx)(f.EuiButtonEmpty,{size:"xs",style:{maxWidth:400},"data-test-subj":`${e}-viewNodeDetailsFlyoutButton`,flush:"left",onClick:()=>b(h)},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.viewNodeDetailsButton",defaultMessage:"View nodes with the selected attribute"})):void 0,euiFieldProps:{"data-test-subj":`${e}-selectedNodeAttrs`,options:y,hasNoInitialSelection:!1,isLoading:a}}}),x?Object(he.jsx)(gt,{selectedNodeAttrs:x,close:()=>b(null)}):null)};a(49);const yt={inputDisplay:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.customOption.input",{defaultMessage:"Custom"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.customOption.helpText",{defaultMessage:"Move data based on node attributes."})},vt={allocationOptions:{warm:{default:{input:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.defaultOption.input",{defaultMessage:"Use warm nodes (recommended)"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.defaultOption.helpText",{defaultMessage:"Move data to nodes in the warm tier."})},none:{inputDisplay:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.noneOption.input",{defaultMessage:"Off"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.noneOption.helpText",{defaultMessage:"Do not move data in the warm phase."})},custom:yt},cold:{default:{input:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.defaultOption.input",{defaultMessage:"Use cold nodes (recommended)"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.defaultOption.helpText",{defaultMessage:"Move data to nodes in the cold tier."})},none:{inputDisplay:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.noneOption.input",{defaultMessage:"Off"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.noneOption.helpText",{defaultMessage:"Do not move data in the cold phase."})},custom:yt},frozen:{default:{input:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.frozen.defaultOption.input",{defaultMessage:"Use frozen nodes (recommended)"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.frozen.defaultOption.helpText",{defaultMessage:"Move data to nodes in the frozen tier."})},none:{inputDisplay:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.frozen.noneOption.input",{defaultMessage:"Off"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.frozen.noneOption.helpText",{defaultMessage:"Do not move data in the frozen phase."})},custom:yt}}},Ot=(e,t)=>[t?void 0:{"data-test-subj":"defaultDataAllocationOption",value:"node_roles",inputDisplay:vt.allocationOptions[e].default.input,dropdownDisplay:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)("strong",null,vt.allocationOptions[e].default.input),Object(he.jsx)(f.EuiText,{size:"s",color:"subdued"},Object(he.jsx)("p",null,vt.allocationOptions[e].default.helpText)))},{"data-test-subj":"customDataAllocationOption",value:"node_attrs",inputDisplay:vt.allocationOptions[e].custom.inputDisplay,dropdownDisplay:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)("strong",null,vt.allocationOptions[e].custom.inputDisplay),Object(he.jsx)(f.EuiText,{size:"s",color:"subdued"},Object(he.jsx)("p",null,vt.allocationOptions[e].custom.helpText)))},{"data-test-subj":"noneDataAllocationOption",value:"none",inputDisplay:vt.allocationOptions[e].none.inputDisplay,dropdownDisplay:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)("strong",null,vt.allocationOptions[e].none.inputDisplay),Object(he.jsx)(f.EuiText,{size:"s",color:"subdued"},Object(he.jsx)("p",null,vt.allocationOptions[e].none.helpText)))}].filter(Boolean),Mt=e=>{const{phase:t,hasNodeAttributes:a,isCloudEnabled:i,isUsingDeprecatedDataRoleConfig:s,isLoading:n}=e,r=Boolean(i&&s),d=`_meta.${t}.dataTierAllocationType`,[u]=Object(o.useFormData)({watch:d}),m=Object(O.get)(u,d);return Object(he.jsx)("div",{"data-test-subj":`${t}-dataTierAllocationControls`},Object(he.jsx)(Be,{path:d},(e=>(r&&"node_roles"===e.value&&e.setValue("node_attrs"),Object(he.jsx)(c.SuperSelectField,{field:e,euiFieldProps:{isLoading:n,hasDividers:!0,"data-test-subj":"dataTierSelect",options:Ot(t,r)}})))),"node_attrs"===m&&a&&Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)("div",{className:"indexLifecycleManagement__phase__dataTierAllocation__controlSection"},Object(he.jsx)(jt,e))))},Pt={data_hot:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.dataTierHotLabel",{defaultMessage:"hot"}),data_warm:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.dataTierWarmLabel",{defaultMessage:"warm"})},_t={warm:{title:v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.willUseFallbackTierTitle",{defaultMessage:"No nodes assigned to the warm tier"}),body:e=>v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.willUseFallbackTierDescription",{defaultMessage:"If no warm nodes are available, data is stored in the {tier} tier.",values:{tier:Pt[e]}})},cold:{title:v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.willUseFallbackTierTitle",{defaultMessage:"No nodes assigned to the cold tier"}),body:e=>v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.willUseFallbackTierDescription",{defaultMessage:"If no cold nodes are available, data is stored in the {tier} tier.",values:{tier:Pt[e]}})}},wt=({phase:e,targetNodeRole:t})=>Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"willUseFallbackTierNotice",title:_t[e].title},_t[e].body(t)),Tt=v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.noCustomAttributesTitle",{defaultMessage:"No custom attributes defined"}),kt=({docLinks:e})=>Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.defaultToDataNodesDescription",defaultMessage:"To allocate data to particular data nodes, {roleBasedGuidance} or configure custom node attributes in elasticsearch.yml.",values:{roleBasedGuidance:Object(he.jsx)(f.EuiLink,{href:e.links.elasticsearch.migrateIndexAllocationFilters,target:"_blank",external:!0},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.defaultToDataNodesDescription.migrationGuidanceMessage",{defaultMessage:"use role-based allocation"}))}}),Lt=({phase:e,targetNodeRole:t})=>Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"willUseFallbackTierUsingNodeAttributesNotice",title:Tt},Object(he.jsx)("p",null,v.i18n.translate("xpack.indexLifecycleMgmt.dataTier.willUseFallbackTierUsingNodeAttributesDescription",{defaultMessage:"No {phase} nodes available. Data will be allocated to the {fallbackTier} tier.",values:{phase:e,fallbackTier:Pt[t]}})),Object(he.jsx)("p",null,kt)),St={warm:{title:v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.noTiersAvailableTitle",{defaultMessage:"No nodes assigned to the warm tier"}),body:v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.noTiersAvailableBody",{defaultMessage:"To use role-based allocation, assign one or more nodes to the warm or hot tiers. Allocation will fail if there are no available nodes."})},cold:{title:v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.noTiersAvailableTitle",{defaultMessage:"No nodes assigned to the cold tier"}),body:v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.noTiersAvailableBody",{defaultMessage:"To use role-based allocation, assign one or more nodes to the cold, warm, or hot tiers. Allocation will fail if there are no available nodes."})}},Et=({phase:e})=>Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"noTiersAvailableNotice",title:St[e].title,color:"warning"},St[e].body),Ft=()=>Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"noTiersAvailableUsingNodeAttributesNotice",title:Tt,color:"warning"},Object(he.jsx)("p",null,v.i18n.translate("xpack.indexLifecycleMgmt.dataTier.noTiersAvailableUsingNodeAttributesDescription",{defaultMessage:"Unable to allocate data: no available data nodes."})),Object(he.jsx)("p",null,kt)),Ct={body:{warm:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)("p",null,v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotAvailableDescription",{defaultMessage:"Data will be allocated to the warm tier."})),kt),cold:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)("p",null,v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.defaultAllocationNotAvailableDescription",{defaultMessage:"Data will be allocated to the cold tier."})),kt)}},zt=({phase:e})=>Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"defaultToDataTiersNotice",style:{maxWidth:400},title:Tt,color:"primary"},Ct.body[e]),At=({phase:e})=>Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"defaultToDataNodesNotice",style:{maxWidth:400},title:Tt,color:"primary"},Object(he.jsx)("p",null,v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultToDataNodesDescription",{defaultMessage:"Data will be allocated to any available data node."})),kt),Dt={title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.title",{defaultMessage:"Migrate to data tiers"}),body:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.body",{defaultMessage:"Migrate your Elastic Cloud deployment to use data tiers."}),linkText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.linkToCloudDeploymentDescription",{defaultMessage:"View cloud deployment"})},It=({linkToCloudDeployment:e})=>Object(he.jsx)(f.EuiCallOut,{title:Dt.title,"data-test-subj":"cloudDataTierCallout"},Dt.body," ",Boolean(e)&&Object(he.jsx)(f.EuiLink,{href:e,external:!0},Dt.linkText)),Nt=({statusCode:e,message:t,onResendRequest:a})=>Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(f.EuiCallOut,{title:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAttributesLoadingFailedTitle",defaultMessage:"Unable to load node data"}),color:"danger"},Object(he.jsx)("p",null,t," (",e,")"),Object(he.jsx)(f.EuiButton,{onClick:a,iconType:"refresh",color:"danger"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAttributesReloadButton",defaultMessage:"Try again"}))),Object(he.jsx)(f.EuiSpacer,{size:"xl"}));a(54);const Rt={title:v.i18n.translate("xpack.indexLifecycleMgmt.common.dataTier.title",{defaultMessage:"Data allocation"})},Ut=({phase:e,description:t})=>{var a;const{services:{cloud:i}}=m(),s=`_meta.${e}.dataTierAllocationType`,[n]=Object(o.useFormData)({watch:s}),r=Object(O.get)(n,s),{data:c,resendRequest:d,error:u,isLoading:p}=Object(j.j)(),{nodesByRoles:h,nodesByAttributes:x,isUsingDeprecatedDataRoleConfig:g}=c,y=Boolean(Object.keys(null!=x?x:{}).length),v=null!==(a=null==i?void 0:i.isCloudEnabled)&&void 0!==a&&a,M=null==i?void 0:i.deploymentUrl,P=((e,t)=>{var a;const i=b.c[e];return null!==(a=t.data)&&void 0!==a&&a.length?i[0]:i.find((e=>{var a;return Boolean(null===(a=t[e])||void 0===a?void 0:a.length)}))})(e,h),_=void 0===P,w=void 0!==P&&!((e,t)=>b.c[e][0]===t)(e,P);return Object(he.jsx)(f.EuiDescribedFormGroup,{title:Object(he.jsx)("h3",null,Rt.title),description:Object(he.jsx)(l.a.Fragment,null,t,p?Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"m"}),Object(he.jsx)(f.EuiLoadingSpinner,{"data-test-subj":"allocationLoadingSpinner",size:"xl"})):u&&Object(he.jsx)(Nt,{onResendRequest:d,message:u.message,statusCode:u.statusCode})),fullWidth:!0},Object(he.jsx)("div",{className:"ilmDataTierAllocationField"},Object(he.jsx)(Mt,{hasNodeAttributes:y,phase:e,nodes:x,isCloudEnabled:v,isUsingDeprecatedDataRoleConfig:g,isLoading:p}),!p&&(()=>{switch(r){case"node_roles":if(v)return null;if(_)return Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(Et,{phase:e}));if(w)return Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(wt,{phase:e,targetNodeRole:P}));break;case"node_attrs":if(!y)return g?Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(At,{phase:e})):_?Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(Ft,null)):w?Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(Lt,{phase:e,targetNodeRole:P})):Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(zt,{phase:e}));if(v&&g)return Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(It,{linkToCloudDeployment:M}));break;default:return null}})()))};var Bt=a(59),$t=a.n(Bt);const qt=({phase:e})=>{const{policy:t}=mt(),a=Object(i.useMemo)((()=>{var a,i;return null!=(null===(a=t.phases[e])||void 0===a||null===(i=a.actions)||void 0===i?void 0:i.forcemerge)}),[t,e]),{docLinks:s}=m().services;return Object(he.jsx)(Ge,{title:Object(he.jsx)("h3",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.forceMerge.enableText",defaultMessage:"Force merge"})),description:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.forceMerge.enableExplanationText",defaultMessage:"Reduce the number of segments in each index shard and clean up deleted documents."})," ",Object(he.jsx)(Ve,{docPath:s.links.elasticsearch.ilmForceMerge})),titleSize:"xs",fullWidth:!0,switchProps:{label:B.editPolicy.forceMergeEnabledFieldLabel,"data-test-subj":`${e}-forceMergeSwitch`,initialValue:a}},Object(he.jsx)(Be,{path:`phases.${e}.actions.forcemerge.max_num_segments`,component:c.NumericField,componentProps:{fullWidth:!1,euiFieldProps:{"data-test-subj":`${e}-selectedForceMergeSegments`,min:1}}}),Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(Be,{path:`_meta.${e}.bestCompression`},(t=>Object(he.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiCheckbox,{label:t.label,checked:t.value,onChange:t.onChange,"data-test-subj":`${e}-bestCompression`,id:$t()()})),Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiIconTip,{content:B.editPolicy.bestCompressionFieldHelpText,position:"right"}))))))};function Vt(e){switch(e){case"warm":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseWarm.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of warm phase"});case"cold":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseCold.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of cold phase"});case"frozen":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseFrozen.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of frozen phase"});case"delete":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseDelete.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of delete phase"})}}function Wt(e){switch(e){case"warm":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseWarm.minimumAgeLabel",{defaultMessage:"Timing for warm phase"});case"cold":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseCold.minimumAgeLabel",{defaultMessage:"Timing for cold phase"});case"frozen":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseFrozen.minimumAgeLabel",{defaultMessage:"Timing for frozen phase"});case"delete":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseDelete.minimumAgeLabel",{defaultMessage:"Timing for delete phase"})}}const Ht={rolloverToolTipDescription:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.minimumAge.rolloverToolTipDescription",{defaultMessage:"Data age is calculated from rollover. Rollover is configured in the hot phase."}),minAgeUnitFieldSuffix:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.minimumAge.minimumAgeFieldSuffixLabel",{defaultMessage:"old"})},Gt=({phase:e})=>{const t=`phases.${e}.min_age`,a=`_meta.${e}.minAgeUnit`,{isUsingRollover:s}=je(),n=Ee(),{setValue:r}=n[`${e}MinAgeMilliSeconds`],[c]=Object(o.useFormData)({watch:[t,a]}),d=Object(O.get)(c,t),u=Object(O.get)(c,a);return Object(i.useEffect)((()=>{if(void 0===d)return;const e=""===d.trim()?-1:E(d,u);r(e)}),[d,u,r]),Object(i.useEffect)((()=>()=>{r(-1)}),[r]),Object(he.jsx)(Be,{path:t},(t=>{const{isInvalid:i,errorMessage:n}=Object(o.getFieldValidityAndErrorMessage)(t);return Object(he.jsx)(f.EuiFormRow,{fullWidth:!0,isInvalid:i,error:n},Object(he.jsx)(f.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"spaceBetween",wrap:!0},Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiText,{className:"eui-textNoWrap",size:"xs"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.minimumAge.minimumAgeFieldLabel",defaultMessage:"Move data into phase when:"}))),Object(he.jsx)(f.EuiFlexItem,{grow:!0},Object(he.jsx)(f.EuiFlexGroup,{gutterSize:"s"},Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiFieldNumber,{style:{minWidth:50},compressed:!0,"aria-label":Wt(e),isInvalid:i,value:t.value,onChange:t.onChange,isLoading:t.isValidating,"data-test-subj":`${e}-selectedMinimumAge`,min:0})),Object(he.jsx)(f.EuiFlexItem,{grow:!0,style:{minWidth:165}},Object(he.jsx)(Be,{path:a},(t=>{const{isInvalid:a}=Object(o.getFieldValidityAndErrorMessage)(t),i=Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)("div",{"data-test-subj":`${e}-rolloverMinAgeInputIconTip`}),Object(he.jsx)(f.EuiIconTip,{type:"iInCircle","aria-label":Ht.rolloverToolTipDescription,content:Ht.rolloverToolTipDescription})),n=s?[Ht.minAgeUnitFieldSuffix,i]:[Ht.minAgeUnitFieldSuffix],r=t.value;let c=R;return r&&!c.some((e=>e.value===r))&&(c=[...R,{value:r,text:r}]),Object(he.jsx)(f.EuiSelect,{compressed:!0,value:r,onChange:e=>{t.setValue(e.target.value)},isInvalid:a,append:n,"data-test-subj":`${e}-selectedMinimumAgeUnits`,"aria-label":Vt(e),options:c})})))))))}))},Jt="phases.delete.actions.wait_for_snapshot.policy",Kt=()=>{const{services:{docLinks:e,getUrlForApp:t}}=m(),{error:a,isLoading:i,data:s,resendRequest:n}=Object(j.l)(),[r]=Object(o.useFormData)({watch:Jt}),d=Object(O.get)(r,Jt),u=s.map((e=>({label:e,value:e}))),p=()=>t("management",{path:"data/snapshot_restore/add_policy"});let h;return a?h=Object(he.jsx)(Ke,{resendRequest:n,"data-test-subj":"policiesErrorCallout","aria-label":v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.reloadPoliciesLabel",{defaultMessage:"Reload policies"}),title:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesLoadedTitle",defaultMessage:"Unable to load existing policies"}),body:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesLoadedMessage",defaultMessage:"Refresh this field and enter the name of an existing snapshot policy."})}):0===s.length?h=Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"m"}),Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"noPoliciesCallout",color:"warning",title:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedTitle",defaultMessage:"No snapshot policies found"})},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedMessage",defaultMessage:"{link} to automate the creation and deletion of cluster snapshots.",values:{link:Object(he.jsx)(f.EuiLink,{href:p(),target:"_blank"},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedLink",{defaultMessage:"Create a snapshot lifecycle policy"}))}}))):d&&!s.includes(d)&&(h=Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"m"}),Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"customPolicyCallout",color:"warning",title:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyTitle",defaultMessage:"Policy name not found"})},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyMessage",defaultMessage:"Enter the name of an existing snapshot policy, or {link} with this name.",values:{link:Object(he.jsx)(f.EuiLink,{href:p(),target:"_blank"},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyLink",{defaultMessage:"create a new policy"}))}})))),Object(he.jsx)(f.EuiDescribedFormGroup,{title:Object(he.jsx)("h3",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotTitle",defaultMessage:"Wait for snapshot policy"})),description:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotDescription",defaultMessage:"Specify a snapshot policy to be executed before the deletion of the index. This ensures that a snapshot of the deleted index is available."})," ",Object(he.jsx)(Ve,{docPath:e.links.elasticsearch.ilmWaitForSnapshot})),titleSize:"xs",fullWidth:!0},Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(Be,{path:Jt,componentProps:{label:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotLabel",defaultMessage:"Snapshot policy name"}),Object(he.jsx)(We,null))}},(e=>{const t=e.value?[e.value]:[];return Object(he.jsx)(c.ComboBoxField,{field:{...e,value:t},euiFieldProps:{"data-test-subj":"snapshotPolicyCombobox",fullWidth:!1,options:u,singleSelection:{asPlainText:!0},isLoading:i,noSuggestions:!(!a&&0!==s.length),onCreateOption:t=>{e.setValue(t)},onChange:t=>{t.length>0?e.setValue(t[0].label):e.setValue("")}}})})),h))},Yt=({path:e,options:t,euiFieldProps:a})=>{const[l,s]=Object(i.useState)(!1);return Object(he.jsx)(Be,{key:e,path:e},(e=>{var i,n;return Object(he.jsx)(f.EuiPopover,ze()({button:Object(he.jsx)(f.EuiButtonEmpty,{size:"xs",color:"text",iconSide:"right",iconType:"arrowDown",onClick:()=>s((e=>!e)),"data-test-subj":"show-filters-button"},null!==(i=null===(n=t.find((t=>t.value===e.value)))||void 0===n?void 0:n.text)&&void 0!==i?i:`${e.value}`),ownFocus:!0,panelPaddingSize:"none",isOpen:l,closePopover:()=>s(!1)},a),t.map((t=>Object(he.jsx)(f.EuiFilterSelectItem,{key:t.value,checked:e.value===t.value?"on":void 0,onClick:()=>{return a=t.value,e.setValue(a),void s(!1);var a},"data-test-subj":`filter-option-${t.value}`},t.text))))}))},Qt=({phase:e})=>{var t,a;const i=Ee(),{setValue:s}=i[`${e}IsUsingShardSize`],{policy:n}=mt(),r=`_meta.${e}.shrink.isUsingShardSize`,[d]=Object(o.useFormData)({watch:[r]}),u=Object(O.get)(d,r),p=`phases.${e}.actions.shrink.${u?"max_primary_shard_size":"number_of_shards"}`,{docLinks:h}=m().services;return Object(he.jsx)(Ge,{title:Object(he.jsx)("h3",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.shrinkText",defaultMessage:"Shrink"})),description:Object(he.jsx)(f.EuiTextColor,{color:"subdued"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.shrinkIndexExplanationText",defaultMessage:"Shrink the index to a new index with fewer primary shards."})," ",Object(he.jsx)(Ve,{docPath:h.links.elasticsearch.ilmShrink})),titleSize:"xs",switchProps:{"data-test-subj":`${e}-shrinkSwitch`,label:B.editPolicy.shrinkLabel,initialValue:Boolean(null===(t=n.phases[e])||void 0===t||null===(a=t.actions)||void 0===a?void 0:a.shrink)},fullWidth:!0},void 0===u?null:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiRadioGroup,{options:[{id:`${e}-configureShardCount`,label:B.editPolicy.shrinkCountLabel,"data-test-subj":`${e}-configureShardCount`},{id:`${e}-configureShardSize`,label:B.editPolicy.shrinkSizeLabel,"data-test-subj":`${e}-configureShardSize`}],idSelected:u?`${e}-configureShardSize`:`${e}-configureShardCount`,onChange:t=>s(t===`${e}-configureShardSize`)}),Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(Be,{path:p,key:p,component:c.NumericField,componentProps:{fullWidth:!1,euiFieldProps:{"data-test-subj":`${e}-primaryShard${u?"Size":"Count"}`,min:1,append:u?Object(he.jsx)(Yt,{path:`_meta.${e}.shrink.maxPrimaryShardSizeUnits`,options:N,euiFieldProps:{"data-test-subj":`${e}-shrinkMaxPrimaryShardSizeUnits`,"aria-label":B.editPolicy.maxPrimaryShardSizeUnitsLabel}}):null}}})))},Xt=({children:e})=>e(Object(j.m)()),Zt=({field:e,isLoading:t,repos:a,noSuggestions:l,globalRepository:s})=>{const n=Object(i.useRef)(!1),{setValue:o}=e,{searchableSnapshotRepo:{setValue:r}}=Ee();return Object(i.useEffect)((()=>{n.current&&o(Boolean(s.trim())?[s]:[]),n.current=!0}),[o,s]),Object(he.jsx)(c.ComboBoxField,{field:e,fullWidth:!1,euiFieldProps:{"data-test-subj":"searchableSnapshotCombobox",options:a.map((e=>({label:e,value:e}))),singleSelection:{asPlainText:!0},isLoading:t,noSuggestions:l,onCreateOption:e=>{r(e)},onChange:e=>{e.length>0?r(e[0].label):r("")}}})};a(62);const ea=({phase:e,canBeDisabled:t=!0})=>{const{services:{cloud:a,docLinks:s,getUrlForApp:n}}=m(),{policy:r,license:c,isNewPolicy:d}=mt(),{isUsingSearchableSnapshotInHotPhase:u}=je(),p=`phases.${e}.actions.searchable_snapshot.snapshot_repository`,[h]=Object(o.useFormData)({watch:Le.searchableSnapshotRepo.path}),x=Object(O.get)(h,Le.searchableSnapshotRepo.path),b="cold"===e||"frozen"===e,j=!c.canUseSearchableSnapshot(),[y,M]=Object(i.useState)((()=>{var t,i,l;return Boolean(b&&d&&(null==a?void 0:a.isCloudEnabled)||(null===(t=r.phases[e])||void 0===t||null===(i=t.actions)||void 0===i||null===(l=i.searchable_snapshot)||void 0===l?void 0:l.snapshot_repository))})),P=s.links.elasticsearch.ilmSearchableSnapshot,_=s.links.elasticsearch.searchableSnapshotSharedCache,w=((e,t,a)=>{switch(e){case"hot":case"cold":return{title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.fullyMountedSearchableSnapshotField.title",{defaultMessage:"Searchable snapshot"}),description:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.fullyMountedSearchableSnapshotField.description",defaultMessage:"Convert to a fully-mounted index that contains a complete copy of your data and is backed by a snapshot. You can reduce the number of replicas and rely on the snapshot for resiliency. {learnMoreLink}",values:{learnMoreLink:Object(he.jsx)(Ve,{docPath:t})}}),toggleLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.fullyMountedSearchableSnapshotField.toggleLabel",{defaultMessage:"Convert to fully-mounted index"})};case"frozen":return{title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.partiallyMountedSearchableSnapshotField.title",{defaultMessage:"Searchable snapshot"}),description:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.frozenPhase.partiallyMountedSearchableSnapshotField.description",defaultMessage:"Convert to a partially-mounted index that caches the index metadata. Data is retrieved from the snapshot as needed to process search requests. This minimizes the index footprint while keeping all of your data fully searchable. {learnMoreLink}",values:{learnMoreLink:Object(he.jsx)(Ve,{docPath:a})}}),toggleLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.partiallyMountedSearchableSnapshotField.toggleLabel",{defaultMessage:"Convert to partially-mounted index"})}}})(e,P,_);return Object(i.useEffect)((()=>{j&&M(!1)}),[j]),Object(he.jsx)(Ge,{"data-test-subj":`searchableSnapshotField-${e}`,switchProps:t?{checked:y,disabled:j,onChange:M,"data-test-subj":"searchableSnapshotToggle",label:w.toggleLabel}:void 0,title:Object(he.jsx)("h3",null,w.title),description:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiTextColor,{color:"subdued"},w.description)),fieldNotices:(()=>{let t;return"hot"===e&&u?t=Object(he.jsx)(f.EuiCallOut,{size:"s",title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotCalloutBody",{defaultMessage:"Force merge, shrink, downsample and read only actions are not allowed when converting data to a fully-mounted index in this phase."}),"data-test-subj":"searchableSnapshotFieldsDisabledCallout"}):j&&(t=Object(he.jsx)(f.EuiCallOut,{"data-test-subj":"searchableSnapshotDisabledDueToLicense",title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotLicenseCalloutTitle",{defaultMessage:"Enterprise license required"}),iconType:"questionInCircle"},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotLicenseCalloutBody",{defaultMessage:"To create a searchable snapshot an enterprise license is required."}))),t?Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,null),t,Object(he.jsx)(f.EuiSpacer,null)):void 0})(),fullWidth:!0},j?Object(he.jsx)("div",null):()=>Object(he.jsx)(Xt,null,(({error:e,isLoading:t,resendRequest:a,data:i})=>{var s;const o=null!==(s=null==i?void 0:i.repositories)&&void 0!==s?s:[];let r;return t||(e?r=Object(he.jsx)(Ke,{resendRequest:a,"data-test-subj":"repositoriesErrorCallout","aria-label":v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.reloadSnapshotRepositoriesLabel",{defaultMessage:"Reload snapshot repositories"}),title:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.loadSnapshotRepositoriesErrorTitle",defaultMessage:"Unable to load snapshot repositories"}),body:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.loadSnapshotRepositoriesErrorBody",defaultMessage:"Refresh this field and enter the name of an existing snapshot repository."})}):0===o.length?r=Object(he.jsx)(f.EuiCallOut,{color:"warning",title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoriesTitle",{defaultMessage:"No snapshot repositories found"})},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoriesFoundBody",defaultMessage:"{link} to use searchable snapshots.",values:{link:Object(he.jsx)(f.EuiLink,{href:n("management",{path:"data/snapshot_restore/add_repository"}),target:"_blank"},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.createSearchableSnapshotLink",{defaultMessage:"Create a snapshot repository"}))}})):x&&!o.includes(x)&&(r=Object(he.jsx)(f.EuiCallOut,{title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoriesWithNameTitle",{defaultMessage:"Repository name not found"}),color:"warning"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoryWithNameBody",defaultMessage:"Enter the name of an existing repository, or {link} with this name.",values:{link:Object(he.jsx)(f.EuiLink,{href:n("management",{path:"data/snapshot_restore/add_repository"}),target:"_blank"},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.createSnapshotRepositoryLink",{defaultMessage:"create a new snapshot repository"}))}})))),Object(he.jsx)("div",{className:"ilmSearchableSnapshotField"},Object(he.jsx)(Be,{path:p,defaultValue:x?[x]:[],component:Zt,componentProps:{globalRepository:x,isLoading:t,repos:o,noSuggestions:!(!e&&0!==o.length)}}),r&&Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),r))})))},ta=({phase:e})=>{const{docLinks:t}=m().services;return Object(he.jsx)(Je,{title:Object(he.jsx)("h3",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.readonlyTitle",defaultMessage:"Read only"})),description:Object(he.jsx)(f.EuiTextColor,{color:"subdued"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.readonlyDescription",defaultMessage:"Enable to make the index and index metadata read only, disable to allow writes and metadata changes."})," ",Object(he.jsx)(Ve,{docPath:t.links.elasticsearch.ilmReadOnly})),fullWidth:!0,titleSize:"xs",switchProps:{"data-test-subj":`${e}-readonlySwitch`,path:`_meta.${e}.readonlyEnabled`}},Object(he.jsx)("div",null))},aa=({phase:e})=>{var t,a,i;const{policy:l}=mt(),s=null!=(null===(t=l.phases[e])||void 0===t||null===(a=t.actions)||void 0===a||null===(i=a.allocate)||void 0===i?void 0:i.number_of_replicas);return Object(he.jsx)(Ge,{title:Object(he.jsx)("h3",null,v.i18n.translate("xpack.indexLifecycleMgmt.numberOfReplicas.formRowTitle",{defaultMessage:"Replicas"})),description:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.numberOfReplicas.formRowDescription",{defaultMessage:"Set the number of replicas. Remains the same as the previous phase by default."}),switchProps:{"data-test-subj":`${e}-setReplicasSwitch`,label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.numberOfReplicas.switchLabel",{defaultMessage:"Set replicas"}),initialValue:s},fullWidth:!0},Object(he.jsx)(Be,{path:`phases.${e}.actions.allocate.number_of_replicas`,component:c.NumericField,componentProps:{fullWidth:!1,euiFieldProps:{"data-test-subj":`${e}-selectedReplicaCount`,min:0}}}))},ia=({phase:e})=>{const{policy:t,isNewPolicy:a}=mt(),l=Object(i.useMemo)((()=>{var i,l,s;return a||!(null!==(i=t.phases[e])&&void 0!==i&&i.actions)||null!=(null===(l=t.phases[e])||void 0===l||null===(s=l.actions)||void 0===s?void 0:s.set_priority)}),[a,t.phases,e]),{docLinks:s}=m().services;return Object(he.jsx)(Ge,{title:Object(he.jsx)("h3",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.indexPriorityText",defaultMessage:"Index priority"})),description:Object(he.jsx)(f.EuiTextColor,{color:"subdued"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.warmPhase.indexPriorityExplanationText",defaultMessage:"Set the priority for recovering your indices after a node restart. Indices with higher priorities are recovered before indices with lower priorities."})," ",Object(he.jsx)(Ve,{docPath:s.links.elasticsearch.ilmSetPriority})),titleSize:"xs",fullWidth:!0,switchProps:{label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.indexPriority.indexPriorityEnabledFieldLabel",{defaultMessage:"Set index priority"}),"data-test-subj":`${e}-indexPrioritySwitch`,initialValue:l}},Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(Be,{path:`phases.${e}.actions.set_priority.priority`,component:c.NumericField,euiFieldProps:{fullWidth:!1,"data-test-subj":`${e}-indexPriority`,min:0}}))},la=({phase:e})=>{const t=`_meta.${e}.downsample.enabled`,a=`_meta.${e}.downsample.fixedIntervalSize`,i=`_meta.${e}.downsample.fixedIntervalUnits`;return Object(he.jsx)(Je,{title:Object(he.jsx)("h3",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.downsampleTitle",defaultMessage:"Downsample"})),description:Object(he.jsx)(f.EuiTextColor,{color:"subdued"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.downsampleDescription",defaultMessage:"Roll up documents within a fixed interval to a single summary document. Reduces the index footprint by storing time series data at reduced granularity."})," "),fullWidth:!0,titleSize:"xs",switchProps:{"data-test-subj":`${e}-downsampleSwitch`,path:t}},Object(he.jsx)(Be,{path:a,key:a,component:c.NumericField,componentProps:{fullWidth:!1,euiFieldProps:{"data-test-subj":`${e}-downsampleFixedInterval`,min:1,append:Object(he.jsx)(Yt,{path:i,options:R,euiFieldProps:{"data-test-subj":`${e}-downsampleFixedIntervalUnits`,"aria-label":B.editPolicy.downsampleIntervalFieldUnitsLabel}})}}}))};a(67);const sa=({enabled:e,phase:t})=>Object(he.jsx)("div",{className:`ilmPhaseIcon ilmPhaseIcon--${t} ${e?"":"ilmPhaseIcon--disabled"}`},e?Object(he.jsx)(f.EuiIcon,{className:`ilmPhaseIcon__inner--${t}`,type:"delete"===t?"trash":"checkInCircleFilled",size:"delete"===t?"m":"l"}):Object(he.jsx)(f.EuiIcon,{className:"ilmPhaseIcon__inner--disabled",type:"dot",size:"s"}));a(72),a(77);const na=({phase:e})=>{const t=`_meta.${e}.enabled`,[a]=Object(o.useFormData)({watch:[t]}),i="hot"===e,l="delete"===e,{setDeletePhaseEnabled:s}=Te(),n=Object(O.get)(a,t)||i,{errors:r}=Me(),d=Object.keys(r[e]).length>0;return Object(he.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"spaceBetween"},Object(he.jsx)(f.EuiFlexItem,{grow:!0},Object(he.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},!i&&!l&&Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(Be,{path:t,component:c.ToggleField,componentProps:{euiFieldProps:{"data-test-subj":`enablePhaseSwitch-${e}`,showLabel:!1}}})),Object(he.jsx)(f.EuiFlexItem,{grow:!1,className:"ilmPhaseTitle"},Object(he.jsx)(f.EuiTitle,{size:"s"},Object(he.jsx)("h2",null,B.editPolicy.titles[e]))),i&&Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiBadge,{className:"ilmPhaseRequiredBadge"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.phaseTitle.requiredBadge",defaultMessage:"Required"}))),l&&Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiButtonEmpty,{onClick:()=>s(!1),"data-test-subj":"disableDeletePhaseButton"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.removeDeletePhaseButtonLabel",defaultMessage:"Remove"}))),d&&Object(he.jsx)(f.EuiFlexItem,{grow:!1,"data-test-subj":`phaseErrorIndicator-${e}`},Object(he.jsx)(f.EuiIconTip,{type:"alert",color:"danger",content:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.phaseErrorIcon.tooltipDescription",defaultMessage:"This phase contains errors."})})))),!i&&n&&Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(Gt,{phase:e})))},oa=({children:e,topLevelSettings:t,phase:a})=>{const i=`_meta.${a}.enabled`,[s]=Object(o.useFormData)({watch:[i]}),n="hot"===a,r="delete"===a,c=Object(O.get)(s,i)||n;return r&&!c?null:Object(he.jsx)(f.EuiTimelineItem,{icon:Object(he.jsx)(sa,{enabled:c,phase:a}),verticalAlign:"top","data-test-subj":`${a}-phase`},Object(he.jsx)(f.EuiSplitPanel.Outer,{color:"transparent",hasBorder:!0,grow:!0},Object(he.jsx)(f.EuiSplitPanel.Inner,{color:c?"transparent":"subdued"},Object(he.jsx)(na,{phase:a})),Object(he.jsx)(f.EuiHorizontalRule,{margin:"none"}),Object(he.jsx)(f.EuiSplitPanel.Inner,null,Object(he.jsx)(f.EuiText,{color:"subdued",size:"s",style:{maxWidth:"50%"}},B.editPolicy.descriptions[a]),c&&Object(he.jsx)(l.a.Fragment,null,t?Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,null),t):Object(he.jsx)(f.EuiSpacer,{size:"m"}),e?Object(he.jsx)(f.EuiAccordion,{id:`${a}-settingsSwitch`,className:"ilmSettingsAccordion",buttonContent:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.phaseSettings.buttonLabel",defaultMessage:"Advanced settings"}),buttonClassName:"ilmSettingsButton",extraAction:!r&&Object(he.jsx)(rt,{phase:a})},Object(he.jsx)(f.EuiSpacer,null),e):!r&&Object(he.jsx)(f.EuiFlexGroup,{justifyContent:"flexEnd"},Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(rt,{phase:a})))))))},ra=Object.values(D),ca=()=>Object(he.jsx)(f.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},Object(he.jsx)(f.EuiFlexItem,{style:{maxWidth:400}},Object(he.jsx)(Be,{path:D.maxPrimaryShardSize,component:c.NumericField,componentProps:{euiFieldProps:{"data-test-subj":"hot-selectedMaxPrimaryShardSize",min:1,append:Object(he.jsx)(Yt,{path:"_meta.hot.customRollover.maxPrimaryShardSizeUnit",options:N,euiFieldProps:{"data-test-subj":"hot-selectedMaxPrimaryShardSizeUnits","aria-label":B.editPolicy.maxPrimaryShardSizeUnitsLabel}})}}}))),da=()=>Object(he.jsx)(f.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},Object(he.jsx)(f.EuiFlexItem,{style:{maxWidth:400}},Object(he.jsx)(Be,{path:D.maxPrimaryShardDocs,component:c.NumericField,componentProps:{euiFieldProps:{"data-test-subj":"hot-selectedMaxPrimaryShardDocs",min:1}}}))),ua=()=>Object(he.jsx)(f.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},Object(he.jsx)(f.EuiFlexItem,{style:{maxWidth:400}},Object(he.jsx)(Be,{path:D.maxAge,component:c.NumericField,componentProps:{euiFieldProps:{"data-test-subj":"hot-selectedMaxAge",min:1,append:Object(he.jsx)(Yt,{path:"_meta.hot.customRollover.maxAgeUnit",options:R,euiFieldProps:{"data-test-subj":"hot-selectedMaxAgeUnits","aria-label":v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumAgeUnitsAriaLabel",{defaultMessage:"Maximum age units"})}})}}}))),ma=()=>Object(he.jsx)(f.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},Object(he.jsx)(f.EuiFlexItem,{style:{maxWidth:400}},Object(he.jsx)(Be,{path:D.maxDocs,component:c.NumericField,componentProps:{euiFieldProps:{"data-test-subj":"hot-selectedMaxDocuments",min:1}}}))),pa={deprecationMessage:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumIndexSizeDeprecationMessage",{defaultMessage:"Maximum index size is deprecated and will be removed in a future version. Use maximum primary shard size instead."}),maxSizeUnit:{ariaLabel:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumIndexSizeUnitsAriaLabel",{defaultMessage:"Maximum index size units"})}},ha=()=>Object(he.jsx)(f.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},Object(he.jsx)(f.EuiFlexItem,{style:{maxWidth:400}},Object(he.jsx)(Be,{path:D.maxSize,component:c.NumericField,componentProps:{euiFieldProps:{"data-test-subj":"hot-selectedMaxSizeStored",min:1,prepend:Object(he.jsx)(f.EuiIconTip,{type:"alert","aria-label":pa.deprecationMessage,content:pa.deprecationMessage}),append:Object(he.jsx)(Yt,{path:"_meta.hot.customRollover.maxStorageSizeUnit",options:N,euiFieldProps:{"data-test-subj":"hot-selectedMaxSizeStoredUnits","aria-label":pa.maxSizeUnit.ariaLabel}})}}}))),xa=Object.values(D),fa=()=>{const{license:e}=mt(),[t]=Object(o.useFormData)({watch:[z,...xa]}),{isUsingRollover:a,isUsingDownsampleInHotPhase:s}=je(),n=Object(O.get)(t,z),r=(()=>{const[e,t]=Object(i.useState)(!1),[a]=Object(o.useFormData)({watch:ra}),{getFields:l}=Object(o.useFormContext)();return Object(i.useEffect)((()=>{var e,a;const i=null!==(e=null===(a=Object(O.get)(l(),D.maxPrimaryShardSize))||void 0===a?void 0:a.errors)&&void 0!==e?e:[];t(i.some((e=>e.code===K)))}),[l,a]),e})(),{docLinks:c}=m().services;return Object(he.jsx)(oa,{phase:"hot"},Object(he.jsx)(Ge,{title:Object(he.jsx)("h3",null,v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.rolloverFieldTitle",{defaultMessage:"Rollover"})),description:Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiTextColor,{color:"subdued"},Object(he.jsx)("p",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.rolloverDescriptionMessage",defaultMessage:"Start writing to a new index when the current index reaches a certain size, document count, or age. Enables you to optimize performance and manage resource usage when working with time series data."}))),Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(f.EuiTextColor,{color:"subdued"},Object(he.jsx)("p",null,Object(he.jsx)("strong",null,v.i18n.translate("xpack.indexLifecycleMgmt.rollover.rolloverOffsetsPhaseTimingDescriptionNote",{defaultMessage:"Note: "})),B.editPolicy.rolloverOffsetsHotPhaseTiming," ",Object(he.jsx)(Ve,{text:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.learnAboutRolloverLinkText",defaultMessage:"Learn more"}),docPath:c.links.elasticsearch.ilmRollover}))),Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(Be,{path:z},(e=>Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiText,{color:"default"},Object(he.jsx)(f.EuiSwitch,{label:e.label,checked:e.value,onChange:t=>e.setValue(t.target.checked),"data-test-subj":"useDefaultRolloverSwitch"})),Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.rolloverDefaultsTipContent",defaultMessage:"Roll over when an index is 30 days old or any primary shard reaches 50 gigabytes."}))))),fullWidth:!0},!1===n?Object(he.jsx)("div",{"aria-live":"polite",role:"region"},Object(he.jsx)(Be,{path:"_meta.hot.customRollover.enabled"},(e=>Object(he.jsx)(f.EuiSwitch,{label:e.label,checked:e.value,onChange:t=>e.setValue(t.target.checked),"data-test-subj":"rolloverSwitch"}))),a&&Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"m"}),r&&Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiCallOut,{size:"s",title:B.editPolicy.errors.rollOverConfigurationCallout.title,"data-test-subj":"rolloverSettingsRequired",color:"danger"},Object(he.jsx)("div",null,B.editPolicy.errors.rollOverConfigurationCallout.body)),Object(he.jsx)(f.EuiSpacer,{size:"s"})),Object(he.jsx)(ca,null),Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(da,null),Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(ua,null),Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(ma,null),Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(ha,null))):Object(he.jsx)("div",null)),a&&Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(qt,{phase:"hot"}),Object(he.jsx)(Qt,{phase:"hot"}),e.canUseSearchableSnapshot()&&Object(he.jsx)(ea,{phase:"hot"}),Object(he.jsx)(la,{phase:"hot"}),!s&&Object(he.jsx)(ta,{phase:"hot"})),Object(he.jsx)(ia,{phase:"hot"}))},ga={dataTierAllocation:{description:v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.description",{defaultMessage:"Move data to nodes optimized for less-frequent, read-only access."})}},ba=()=>{const{isUsingSearchableSnapshotInHotPhase:e,isUsingDownsampleInHotPhase:t,isUsingDownsampleInWarmPhase:a}=je();return Object(he.jsx)(oa,{phase:"warm"},Object(he.jsx)(aa,{phase:"warm"}),!e&&Object(he.jsx)(Qt,{phase:"warm"}),!e&&Object(he.jsx)(qt,{phase:"warm"}),!e&&Object(he.jsx)(la,{phase:"warm"}),!e&&!t&&!a&&Object(he.jsx)(ta,{phase:"warm"}),Object(he.jsx)(Ut,{description:ga.dataTierAllocation.description,phase:"warm"}),Object(he.jsx)(ia,{phase:"warm"}))},ja={dataTierAllocation:{description:v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.description",{defaultMessage:"Move data to nodes optimized for less frequent, read-only access. Store data in the cold phase on less-expensive hardware."})}},ya=()=>{const{isUsingSearchableSnapshotInHotPhase:e,isUsingDownsampleInHotPhase:t,isUsingDownsampleInWarmPhase:a,isUsingDownsampleInColdPhase:i}=je();return Object(he.jsx)(oa,{phase:"cold",topLevelSettings:Object(he.jsx)(ea,{phase:"cold"})},Object(he.jsx)(aa,{phase:"cold"}),!e&&Object(he.jsx)(la,{phase:"cold"}),!e&&!t&&!a&&!i&&Object(he.jsx)(ta,{phase:"cold"}),Object(he.jsx)(Ut,{description:ja.dataTierAllocation.description,phase:"cold"}),Object(he.jsx)(ia,{phase:"cold"}))},va=()=>Object(he.jsx)(oa,{phase:"frozen",topLevelSettings:Object(he.jsx)(ea,{phase:"frozen",canBeDisabled:!1})}),Oa=()=>Object(he.jsx)(oa,{phase:"delete",topLevelSettings:Object(he.jsx)(Kt,null)}),Ma="name",Pa=()=>{Object(i.useEffect)((()=>{window.scrollTo(0,0)}),[]);const[e,t]=Object(i.useState)(!1),{isNewPolicy:a,policy:s,existingPolicies:n,policyName:r,license:d}=mt(),{services:{cloud:u,docLinks:b}}=m(),[T,k]=Object(i.useState)(!1),L=a?"":r,S=d.canUseSearchableSnapshot(),E=Boolean(null==u?void 0:u.isCloudEnabled),C=Object(i.useMemo)((()=>{return e=a?void 0:s,t=>{const{_meta:a,...i}=t;return i.phases={hot:{actions:{}},...i.phases},Object(P.produce)(null!=e?e:x.o,(t=>{var l,s,n;Object(O.merge)(t,i);const o=Boolean((null===(l=a.hot)||void 0===l?void 0:l.isUsingDefaultRollover)||(null===(s=a.hot)||void 0===s?void 0:s.customRollover.enabled));var r,c;if(t.phases.hot&&(t.phases.hot.min_age=null!==(r=t.phases.hot.min_age)&&void 0!==r?r:"0ms",null!==(c=t.phases.hot)&&void 0!==c&&c.actions)){var d,u;const e=t.phases.hot.actions;if(o){var m,p,h,f,g,b,j,y,v,M,P,_,w,T,k,L,S,E;if(null!==(m=a.hot)&&void 0!==m&&m.isUsingDefaultRollover?e.rollover=Object(O.cloneDeep)(x.p):(e.rollover||(e.rollover={}),null!==(P=i.phases.hot.actions.rollover)&&void 0!==P&&P.max_age?e.rollover.max_age=`${e.rollover.max_age}${null===(L=a.hot)||void 0===L?void 0:L.customRollover.maxAgeUnit}`:delete e.rollover.max_age,"number"!=typeof(null===(_=i.phases.hot.actions.rollover)||void 0===_?void 0:_.max_docs)&&delete e.rollover.max_docs,null!==(w=i.phases.hot.actions.rollover)&&void 0!==w&&w.max_primary_shard_size?e.rollover.max_primary_shard_size=`${e.rollover.max_primary_shard_size}${null===(S=a.hot)||void 0===S?void 0:S.customRollover.maxPrimaryShardSizeUnit}`:delete e.rollover.max_primary_shard_size,"number"!=typeof(null===(T=i.phases.hot.actions.rollover)||void 0===T?void 0:T.max_primary_shard_docs)&&delete e.rollover.max_primary_shard_docs,null!==(k=i.phases.hot.actions.rollover)&&void 0!==k&&k.max_size?e.rollover.max_size=`${e.rollover.max_size}${null===(E=a.hot)||void 0===E?void 0:E.customRollover.maxStorageSizeUnit}`:delete e.rollover.max_size),null!==(p=i.phases.hot.actions)&&void 0!==p&&p.forcemerge?null!==(h=a.hot)&&void 0!==h&&h.bestCompression?e.forcemerge.index_codec="best_compression":delete e.forcemerge.index_codec:delete e.forcemerge,null!==(f=a.hot)&&void 0!==f&&f.bestCompression&&e.forcemerge&&(e.forcemerge.index_codec="best_compression"),null!==(g=a.hot)&&void 0!==g&&g.readonlyEnabled?e.readonly=null!==(M=e.readonly)&&void 0!==M?M:{}:delete e.readonly,null!==(b=i.phases.hot)&&void 0!==b&&null!==(j=b.actions)&&void 0!==j&&j.shrink)if(a.hot.shrink.isUsingShardSize){var F,C;delete e.shrink.number_of_shards,e.shrink.max_primary_shard_size=`${null===(F=e.shrink)||void 0===F?void 0:F.max_primary_shard_size}${null===(C=a.hot)||void 0===C?void 0:C.shrink.maxPrimaryShardSizeUnits}`}else delete e.shrink.max_primary_shard_size;else delete e.shrink;null!==(y=a.hot)&&void 0!==y&&null!==(v=y.downsample)&&void 0!==v&&v.enabled?e.downsample={...e.downsample,fixed_interval:`${a.hot.downsample.fixedIntervalSize}${a.hot.downsample.fixedIntervalUnits}`}:delete e.downsample}else delete e.rollover,delete e.forcemerge,delete e.readonly,delete e.shrink;null!==(d=i.phases.hot.actions)&&void 0!==d&&d.set_priority||delete e.set_priority,null!==(u=i.phases.hot.actions)&&void 0!==u&&u.searchable_snapshot?e.searchable_snapshot={...e.searchable_snapshot,snapshot_repository:a.searchableSnapshot.repository}:delete e.searchable_snapshot}if(a.warm.enabled){var z,A,D,I,N,R,B,$,q,V,W,H,G,J,K;t.phases.warm.actions=null!==(z=null===(A=t.phases.warm)||void 0===A?void 0:A.actions)&&void 0!==z?z:{};const l=t.phases.warm;var Y;if(null!==(D=i.phases.warm)&&void 0!==D&&D.min_age&&(l.min_age=`${i.phases.warm.min_age}${a.warm.minAgeUnit}`),l.actions=U(a.warm,l.actions,null==e||null===(I=e.phases.warm)||void 0===I?void 0:I.actions,null===(N=i.phases.warm)||void 0===N||null===(R=N.actions)||void 0===R||null===(B=R.allocate)||void 0===B?void 0:B.number_of_replicas),null!==($=i.phases.warm)&&void 0!==$&&null!==(q=$.actions)&&void 0!==q&&q.forcemerge?a.warm.bestCompression?l.actions.forcemerge.index_codec="best_compression":delete l.actions.forcemerge.index_codec:delete l.actions.forcemerge,a.warm.readonlyEnabled?l.actions.readonly=null!==(Y=l.actions.readonly)&&void 0!==Y?Y:{}:delete l.actions.readonly,null!==(V=i.phases.warm)&&void 0!==V&&null!==(W=V.actions)&&void 0!==W&&W.set_priority||delete l.actions.set_priority,null!==(H=i.phases.warm)&&void 0!==H&&null!==(G=H.actions)&&void 0!==G&&G.shrink)if(a.warm.shrink.isUsingShardSize){var Q,X;delete l.actions.shrink.number_of_shards,l.actions.shrink.max_primary_shard_size=`${null===(Q=l.actions.shrink)||void 0===Q?void 0:Q.max_primary_shard_size}${null===(X=a.warm)||void 0===X?void 0:X.shrink.maxPrimaryShardSizeUnits}`}else delete l.actions.shrink.max_primary_shard_size;else delete l.actions.shrink;null!==(J=a.warm)&&void 0!==J&&null!==(K=J.downsample)&&void 0!==K&&K.enabled?l.actions.downsample={...l.actions.downsample,fixed_interval:`${a.warm.downsample.fixedIntervalSize}${a.warm.downsample.fixedIntervalUnits}`}:delete l.actions.downsample}else delete t.phases.warm;if(a.cold.enabled){var Z,ee,te,ae,ie,le,se,ne,oe,re,ce,de,ue;t.phases.cold.actions=null!==(Z=null===(ee=t.phases.cold)||void 0===ee?void 0:ee.actions)&&void 0!==Z?Z:{};const l=t.phases.cold;var me;null!==(te=i.phases.cold)&&void 0!==te&&te.min_age&&(l.min_age=`${i.phases.cold.min_age}${a.cold.minAgeUnit}`),l.actions=U(a.cold,l.actions,null==e||null===(ae=e.phases.cold)||void 0===ae?void 0:ae.actions,null===(ie=i.phases.cold)||void 0===ie||null===(le=ie.actions)||void 0===le||null===(se=le.allocate)||void 0===se?void 0:se.number_of_replicas),l.actions.freeze&&delete l.actions.freeze,a.cold.readonlyEnabled?l.actions.readonly=null!==(me=l.actions.readonly)&&void 0!==me?me:{}:delete l.actions.readonly,null!==(ne=i.phases.cold)&&void 0!==ne&&null!==(oe=ne.actions)&&void 0!==oe&&oe.set_priority||delete l.actions.set_priority,null!==(re=i.phases.cold)&&void 0!==re&&null!==(ce=re.actions)&&void 0!==ce&&ce.searchable_snapshot?l.actions.searchable_snapshot={...l.actions.searchable_snapshot,snapshot_repository:a.searchableSnapshot.repository}:delete l.actions.searchable_snapshot,null!==(de=a.cold)&&void 0!==de&&null!==(ue=de.downsample)&&void 0!==ue&&ue.enabled?l.actions.downsample={...l.actions.downsample,fixed_interval:`${a.cold.downsample.fixedIntervalSize}${a.cold.downsample.fixedIntervalUnits}`}:delete l.actions.downsample}else delete t.phases.cold;if(null!==(n=a.frozen)&&void 0!==n&&n.enabled){var pe,he,xe,fe,ge;t.phases.frozen.actions=null!==(pe=null===(he=t.phases.frozen)||void 0===he?void 0:he.actions)&&void 0!==pe?pe:{};const e=t.phases.frozen;null!==(xe=i.phases.frozen)&&void 0!==xe&&xe.min_age&&(e.min_age=`${i.phases.frozen.min_age}${a.frozen.minAgeUnit}`),null!==(fe=i.phases.frozen)&&void 0!==fe&&null!==(ge=fe.actions)&&void 0!==ge&&ge.searchable_snapshot?e.actions.searchable_snapshot={...e.actions.searchable_snapshot,snapshot_repository:a.searchableSnapshot.repository}:delete e.actions.searchable_snapshot}else delete t.phases.frozen;if(a.delete.enabled){var be,je,ye,ve,Oe;const e=t.phases.delete;e.actions=null!==(be=e.actions)&&void 0!==be?be:{},e.actions.delete=null!==(je=e.actions.delete)&&void 0!==je?je:{},null!==(ye=i.phases.delete)&&void 0!==ye&&ye.min_age&&(e.min_age=`${i.phases.delete.min_age}${a.delete.minAgeUnit}`),null!==(ve=i.phases.delete)&&void 0!==ve&&null!==(Oe=ve.actions)&&void 0!==Oe&&Oe.wait_for_snapshot||delete e.actions.wait_for_snapshot}else delete t.phases.delete}))};var e}),[a,s]),z=Object(i.useMemo)((()=>(e=>t=>{var a,i,l,s,n,o,r,c,d,u,m,p,h;const{phases:{hot:x,warm:f,cold:g,frozen:b,delete:j}}=t;let v=F([null==x?void 0:x.actions.searchable_snapshot,null==g?void 0:g.actions.searchable_snapshot,null==b?void 0:b.actions.searchable_snapshot]);!v&&e&&(v=I);const O={hot:{isUsingDefaultRollover:w(t),customRollover:{enabled:Boolean(null==x||null===(a=x.actions)||void 0===a?void 0:a.rollover)},bestCompression:"best_compression"===(null==x||null===(i=x.actions)||void 0===i||null===(l=i.forcemerge)||void 0===l?void 0:l.index_codec),readonlyEnabled:Boolean(null==x||null===(s=x.actions)||void 0===s?void 0:s.readonly),shrink:{isUsingShardSize:Boolean(null==x||null===(n=x.actions.shrink)||void 0===n?void 0:n.max_primary_shard_size)},downsample:{enabled:Boolean(null==x||null===(o=x.actions)||void 0===o?void 0:o.downsample)}},warm:{enabled:Boolean(f),warmPhaseOnRollover:void 0===f||Boolean("0ms"===f.min_age),bestCompression:"best_compression"===(null==f||null===(r=f.actions)||void 0===r||null===(c=r.forcemerge)||void 0===c?void 0:c.index_codec),dataTierAllocationType:_(null==f?void 0:f.actions),readonlyEnabled:Boolean(null==f||null===(d=f.actions)||void 0===d?void 0:d.readonly),minAgeToMilliSeconds:-1,shrink:{isUsingShardSize:Boolean(null==f||null===(u=f.actions.shrink)||void 0===u?void 0:u.max_primary_shard_size)},downsample:{enabled:Boolean(null==f||null===(m=f.actions)||void 0===m?void 0:m.downsample)}},cold:{enabled:Boolean(g),dataTierAllocationType:_(null==g?void 0:g.actions),readonlyEnabled:Boolean(null==g||null===(p=g.actions)||void 0===p?void 0:p.readonly),minAgeToMilliSeconds:-1,downsample:{enabled:Boolean(null==g||null===(h=g.actions)||void 0===h?void 0:h.downsample)}},frozen:{enabled:Boolean(b),dataTierAllocationType:_(null==b?void 0:b.actions),minAgeToMilliSeconds:-1},delete:{enabled:Boolean(j),minAgeToMilliSeconds:-1},searchableSnapshot:{repository:v}};return Object(P.produce)({...t,_meta:O},(e=>{var t,a,i,l,s,n;if(null!==(t=e.phases.hot)&&void 0!==t&&null!==(a=t.actions)&&void 0!==a&&a.rollover){if(e.phases.hot.actions.rollover.max_size){const t=y(e.phases.hot.actions.rollover.max_size);e.phases.hot.actions.rollover.max_size=t.size,e._meta.hot.customRollover.maxStorageSizeUnit=t.units}if(e.phases.hot.actions.rollover.max_primary_shard_size){const t=y(e.phases.hot.actions.rollover.max_primary_shard_size);e.phases.hot.actions.rollover.max_primary_shard_size=t.size,e._meta.hot.customRollover.maxPrimaryShardSizeUnit=t.units}if(e.phases.hot.actions.rollover.max_age){const t=y(e.phases.hot.actions.rollover.max_age);e.phases.hot.actions.rollover.max_age=t.size,e._meta.hot.customRollover.maxAgeUnit=t.units}}if(null!==(i=e.phases.hot)&&void 0!==i&&null!==(l=i.actions.shrink)&&void 0!==l&&l.max_primary_shard_size){const t=y(e.phases.hot.actions.shrink.max_primary_shard_size);e.phases.hot.actions.shrink.max_primary_shard_size=t.size,e._meta.hot.shrink.maxPrimaryShardSizeUnits=t.units}if(null!==(s=e.phases.hot)&&void 0!==s&&null!==(n=s.actions.downsample)&&void 0!==n&&n.fixed_interval){const t=y(e.phases.hot.actions.downsample.fixed_interval);e._meta.hot.downsample.fixedIntervalUnits=t.units,e._meta.hot.downsample.fixedIntervalSize=t.size}if(e.phases.warm){var o,r,c,d,u;if(null!==(o=e.phases.warm.actions)&&void 0!==o&&null!==(r=o.allocate)&&void 0!==r&&r.require&&Object.entries(e.phases.warm.actions.allocate.require).forEach((t=>{e._meta.warm.allocationNodeAttribute=t.join(":")})),e.phases.warm.min_age){const t=y(e.phases.warm.min_age);e.phases.warm.min_age=t.size,e._meta.warm.minAgeUnit=t.units}if(null!==(c=e.phases.warm.actions.shrink)&&void 0!==c&&c.max_primary_shard_size){const t=y(e.phases.warm.actions.shrink.max_primary_shard_size);e.phases.warm.actions.shrink.max_primary_shard_size=t.size,e._meta.warm.shrink.maxPrimaryShardSizeUnits=t.units}if(null!==(d=e.phases.warm)&&void 0!==d&&null!==(u=d.actions.downsample)&&void 0!==u&&u.fixed_interval){const t=y(e.phases.warm.actions.downsample.fixed_interval);e._meta.warm.downsample.fixedIntervalUnits=t.units,e._meta.warm.downsample.fixedIntervalSize=t.size}}if(e.phases.cold){var m,p,h,x;if(null!==(m=e.phases.cold.actions)&&void 0!==m&&null!==(p=m.allocate)&&void 0!==p&&p.require&&Object.entries(e.phases.cold.actions.allocate.require).forEach((t=>{e._meta.cold.allocationNodeAttribute=t.join(":")})),e.phases.cold.min_age){const t=y(e.phases.cold.min_age);e.phases.cold.min_age=t.size,e._meta.cold.minAgeUnit=t.units}if(null!==(h=e.phases.cold)&&void 0!==h&&null!==(x=h.actions.downsample)&&void 0!==x&&x.fixed_interval){const t=y(e.phases.cold.actions.downsample.fixed_interval);e._meta.cold.downsample.fixedIntervalUnits=t.units,e._meta.cold.downsample.fixedIntervalSize=t.size}}if(e.phases.frozen&&e.phases.frozen.min_age){const t=y(e.phases.frozen.min_age);e.phases.frozen.min_age=t.size,e._meta.frozen.minAgeUnit=t.units}if(e.phases.delete&&e.phases.delete.min_age){const t=y(e.phases.delete.min_age);e.phases.delete.min_age=t.size,e._meta.delete.minAgeUnit=t.units}}))})(E)),[E]),A=Object(i.useMemo)((()=>({...s,name:L})),[s,L]),D=Object(i.useMemo)((()=>(e=>({_meta:{hot:{isUsingDefaultRollover:{defaultValue:!0,label:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.isUsingDefaultRollover",{defaultMessage:"Use recommended defaults"})},customRollover:{enabled:{defaultValue:!0,label:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.enableRolloverLabel",{defaultMessage:"Enable rollover"})},maxStorageSizeUnit:{defaultValue:"gb"},maxPrimaryShardSizeUnit:{defaultValue:"gb"},maxAgeUnit:{defaultValue:"d"}},bestCompression:{label:B.editPolicy.bestCompressionFieldLabel},readonlyEnabled:{defaultValue:!1,label:B.editPolicy.readonlyEnabledFieldLabel},shrink:{isUsingShardSize:{defaultValue:!1},maxPrimaryShardSizeUnits:{defaultValue:"gb"}},downsample:pe("hot")},warm:{enabled:{defaultValue:!1,label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.activateWarmPhaseSwitchLabel",{defaultMessage:"Activate warm phase"})},minAgeUnit:{defaultValue:"d"},minAgeToMilliSeconds:{defaultValue:-1,fieldsToValidateOnChange:["phases.warm.min_age","phases.cold.min_age","phases.frozen.min_age","phases.delete.min_age"]},bestCompression:{label:B.editPolicy.bestCompressionFieldLabel},dataTierAllocationType:{label:B.editPolicy.allocationTypeOptionsFieldLabel},allocationNodeAttribute:{label:B.editPolicy.allocationNodeAttributeFieldLabel},readonlyEnabled:{defaultValue:!1,label:B.editPolicy.readonlyEnabledFieldLabel},shrink:{isUsingShardSize:{defaultValue:!1},maxPrimaryShardSizeUnits:{defaultValue:"gb"}},downsample:pe("warm")},cold:{enabled:{defaultValue:!1,label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.activateColdPhaseSwitchLabel",{defaultMessage:"Activate cold phase"})},readonlyEnabled:{defaultValue:!1,label:B.editPolicy.readonlyEnabledFieldLabel},minAgeUnit:{defaultValue:"d"},minAgeToMilliSeconds:{defaultValue:-1,fieldsToValidateOnChange:["phases.cold.min_age","phases.frozen.min_age","phases.delete.min_age"]},dataTierAllocationType:{label:B.editPolicy.allocationTypeOptionsFieldLabel},allocationNodeAttribute:{label:B.editPolicy.allocationNodeAttributeFieldLabel},downsample:pe("cold")},frozen:{enabled:{defaultValue:!1,label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.frozenPhase.activateFrozenPhaseSwitchLabel",{defaultMessage:"Activate frozen phase"})},minAgeUnit:{defaultValue:"d"},minAgeToMilliSeconds:{defaultValue:-1,fieldsToValidateOnChange:["phases.frozen.min_age","phases.delete.min_age"]},dataTierAllocationType:{label:B.editPolicy.allocationTypeOptionsFieldLabel},allocationNodeAttribute:{label:B.editPolicy.allocationNodeAttributeFieldLabel}},delete:{enabled:{defaultValue:!1,label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.activateWarmPhaseSwitchLabel",{defaultMessage:"Activate delete phase"})},minAgeUnit:{defaultValue:"d"},minAgeToMilliSeconds:{defaultValue:-1,fieldsToValidateOnChange:["phases.delete.min_age"]}},searchableSnapshot:{repository:{defaultValue:e?I:""}}},phases:{hot:{actions:{rollover:{max_age:{label:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumAgeLabel",{defaultMessage:"Maximum age"}),validations:[{validator:Q},{validator:G},{validator:X}],fieldsToValidateOnChange:te},max_docs:{label:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumDocumentsLabel",{defaultMessage:"Maximum documents"}),validations:[{validator:Q},{validator:G},{validator:X}],serializer:le.stringToNumber,fieldsToValidateOnChange:te},max_primary_shard_size:{label:B.editPolicy.maxPrimaryShardSizeLabel,validations:[{validator:Q},{validator:G}],fieldsToValidateOnChange:te},max_primary_shard_docs:{label:B.editPolicy.maxPrimaryShardDocsLabel,validations:[{validator:Q},{validator:G},{validator:X}],serializer:le.stringToNumber,fieldsToValidateOnChange:te},max_size:{label:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumIndexSizeLabel",{defaultMessage:"Maximum index size"}),validations:[{validator:Q},{validator:G}],fieldsToValidateOnChange:te}},forcemerge:{max_num_segments:se},shrink:{number_of_shards:re,max_primary_shard_size:ce},set_priority:{priority:de("hot")},searchable_snapshot:ne}},warm:{min_age:ue("warm"),actions:{allocate:{number_of_replicas:oe},shrink:{number_of_shards:re,max_primary_shard_size:ce},forcemerge:{max_num_segments:se},set_priority:{priority:de("warm")}}},cold:{min_age:ue("cold"),actions:{allocate:{number_of_replicas:oe},set_priority:{priority:de("cold")},searchable_snapshot:ne}},frozen:{min_age:ue("frozen"),actions:{allocate:{number_of_replicas:oe},set_priority:{priority:de("frozen")},searchable_snapshot:ne}},delete:{min_age:ue("delete","365"),actions:{wait_for_snapshot:{policy:{label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.waitForSnapshot.snapshotPolicyFieldLabel",{defaultMessage:"Policy name (optional)"})}}}}}}))(E)),[E]),{form:N}=Object(o.useForm)({schema:D,defaultValue:A,deserializer:z,serializer:C}),[R]=Object(o.useFormData)({form:N,watch:Ma}),$=()=>a||T?Object(O.get)(R,Ma):L,H=Object(i.useMemo)((()=>(({policies:e,isClonedPolicy:t,originalPolicyName:a})=>[{validator:V(B.editPolicy.errors.policyNameRequiredMessage)},{validator:W({message:B.editPolicy.errors.policyNameStartsWithUnderscoreErrorMessage,char:"_"})},{validator:q({message:B.editPolicy.errors.policyNameContainsInvalidChars,chars:[","," "]})},{validator:e=>{const t=e.value;if(window.TextEncoder&&(new window.TextEncoder).encode(t).length>255)return{message:B.editPolicy.errors.policyNameTooLongErrorMessage}}},{validator:i=>{const l=i.value;return t&&l===a?{message:B.editPolicy.errors.policyNameMustBeDifferentErrorMessage}:l!==a&&e.map((e=>e.name)).includes(l)?{message:B.editPolicy.errors.policyNameAlreadyUsedErrorMessage}:void 0}}])({originalPolicyName:L,policies:n,isClonedPolicy:T})),[L,n,T]),J=Object(p.useHistory)(),K=()=>{J.push("/policies")};return Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiPageHeader,{pageTitle:Object(he.jsx)("span",{"data-test-subj":"policyTitle"},a?v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.createPolicyMessage",{defaultMessage:"Create policy"}):v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.editPolicyMessage",{defaultMessage:"Edit policy {originalPolicyName}",values:{originalPolicyName:L}})),bottomBorder:!0,rightSideItems:[Object(he.jsx)(f.EuiButtonEmpty,{href:b.links.elasticsearch.ilm,target:"_blank",iconType:"help"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.documentationLinkText",defaultMessage:"Documentation"}))]}),Object(he.jsx)(f.EuiSpacer,{size:"l"}),Object(he.jsx)(Fe,{form:N},a?null:Object(he.jsx)(i.Fragment,null,Object(he.jsx)(ft,null),Object(he.jsx)(f.EuiSpacer,null),Object(he.jsx)(f.EuiFormRow,null,Object(he.jsx)(f.EuiSwitch,{"data-test-subj":"saveAsNewSwitch",style:{maxWidth:"100%"},checked:T,onChange:e=>{k(e.target.checked)},label:Object(he.jsx)("span",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.saveAsNewPolicyMessage",defaultMessage:"Save as new policy"}))}))),T||a?Object(he.jsx)(Be,{path:Ma,config:{label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.policyNameLabel",{defaultMessage:"Policy name"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.validPolicyNameMessage",{defaultMessage:"A policy name cannot start with an underscore and cannot contain a comma or a space."}),validations:H},component:c.TextField,componentProps:{fullWidth:!1,euiFieldProps:{"data-test-subj":"policyNameField"}}}):null,Object(he.jsx)(f.EuiHorizontalRule,null),Object(he.jsx)(at,null),Object(he.jsx)(f.EuiSpacer,{size:"l"}),Object(he.jsx)(f.EuiTimeline,{className:"ilmPhases"},Object(he.jsx)(fa,null),Object(he.jsx)(ba,null),Object(he.jsx)(ya,null),S&&Object(he.jsx)(va,null),Object(he.jsx)(Oa,null)),Object(he.jsx)(f.EuiHorizontalRule,null),Object(he.jsx)(lt,null),Object(he.jsx)(f.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiFlexGroup,null,Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiButton,{"data-test-subj":"savePolicyButton",fill:!0,iconType:"check",iconSide:"left",disabled:!1===N.isValid||N.isSubmitting,onClick:async()=>{const{data:e,isValid:t}=await N.submit();t?await(async(e,t)=>{try{await Object(j.g)(e)}catch(t){const a=v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.saveErrorMessage",{defaultMessage:"Error saving lifecycle policy {lifecycleName}",values:{lifecycleName:e.name}});return Object(qe.a)(t,a),!1}const a=Object($e.a)(e.phases);a.push(t?x.j:x.m),Object($e.c)(h.METRIC_TYPE.COUNT,a);const i=v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.successfulSaveMessage",{defaultMessage:'{verb} lifecycle policy "{lifecycleName}"',values:{verb:t?v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.createdMessage",{defaultMessage:"Created"}):v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.updatedMessage",{defaultMessage:"Updated"}),lifecycleName:e.name}});return M.c.addSuccess(i),!0})({...e,name:$()},a||T)&&K():M.c.addDanger(v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.formErrorsMessage",{defaultMessage:"Please fix the errors on this page."}))}},T?Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.saveAsNewButton",defaultMessage:"Save as new policy"}):Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.saveButton",defaultMessage:"Save policy"}))),Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiButtonEmpty,{"data-test-subj":"cancelTestPolicy",onClick:K},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.cancelButton",defaultMessage:"Cancel"}))))),Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiButtonEmpty,{onClick:()=>{t(!e)},"data-test-subj":"requestButton"},e?Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.hidePolicyJsonButton",defaultMessage:"Hide request"}):Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.showPolicyJsonButton",defaultMessage:"Show request"})))),e?Object(he.jsx)(He,{policyName:$(),close:()=>t(!1)}):null))},_a=({match:{params:{policyName:e}}})=>{var t;const{services:{breadcrumbService:a,license:l}}=m(),{error:s,isLoading:n,data:o,resendRequest:r}=Object(j.k)();if(Object(i.useEffect)((()=>{a.setBreadcrumbs("editPolicy")}),[a]),n)return Object(he.jsx)(f.EuiPageContent_Deprecated,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(he.jsx)(f.EuiEmptyPrompt,{title:Object(he.jsx)(f.EuiLoadingSpinner,{size:"xl"}),body:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.policiesLoading",defaultMessage:"Loading policies..."})}));if(s||!o){const{statusCode:e,message:t}=s||{statusCode:"",message:""};return Object(he.jsx)(f.EuiPageContent_Deprecated,{verticalPosition:"center",horizontalPosition:"center",color:"danger"},Object(he.jsx)(f.EuiEmptyPrompt,{title:Object(he.jsx)("h2",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.lifecyclePoliciesLoadingFailedTitle",defaultMessage:"Unable to load existing lifecycle policies"})),body:Object(he.jsx)("p",null,t," (",e,")"),actions:Object(he.jsx)(f.EuiButton,{onClick:r,iconType:"refresh",color:"danger"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.lifecyclePoliciesReloadButton",defaultMessage:"Try again"}))}))}const c=((e,t="")=>{if(e&&e.length>0)return e.find((e=>e.name===t))})(o,Object(d.attemptToURIDecode)(e));return Object(he.jsx)(ut,{value:{isNewPolicy:!(null!=c&&c.policy),policyName:Object(d.attemptToURIDecode)(e),policy:null!==(t=null==c?void 0:c.policy)&&void 0!==t?t:x.o,existingPolicies:o,license:{canUseSearchableSnapshot:()=>l.hasAtLeast(b.a)},indices:c&&c.indices?c.indices:[],indexTemplates:c&&c.indexTemplates?c.indexTemplates:[]}},Object(he.jsx)(Pa,null))};const wa=Object(i.createContext)({listAction:null,setListAction:()=>{}}),Ta=({children:e})=>{const[t,a]=Object(i.useState)(null);return Object(he.jsx)(wa.Provider,{value:{listAction:t,setListAction:a}},e)},ka=()=>{const e=Object(i.useContext)(wa);if(!e)throw new Error("usePolicyListContext can only be called inside of PolicyListContext!");return e},La={deleteEnabled:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.deletePolicyButtonText",{defaultMessage:"Delete policy"}),deleteDisabled:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.deletePolicyButtonDisabledTooltip",{defaultMessage:"You cannot delete a policy that is being used by an index"}),viewIndices:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.viewIndicesButtonText",{defaultMessage:"View indices linked to policy"}),addIndexTemplate:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addPolicyToTemplateButtonText",{defaultMessage:"Add policy to index template"})},Sa={badge:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.templateBadgeType.managedLabel",{defaultMessage:"Managed"}),badgeTooltip:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.templateBadgeType.managedDescription",{defaultMessage:"This policy is preconfigured and managed by Elastic; editing or deleting this policy might break Kibana."})},Ea=({policies:e})=>{const t=Object(p.useHistory)(),{services:{getUrlForApp:a}}=m(),[s,o]=function(e,t){const a=localStorage.getItem(e),[l,s]=Object(i.useState)(function(e,t){if(!e)return t;try{return JSON.parse(e)}catch(e){return t}}(a,t));return Object(i.useEffect)((()=>{localStorage.setItem(e,JSON.stringify(l))}),[e,l]),[l,s]}("ILM_SHOW_MANAGED_POLICIES_BY_DEFAULT",!1),{setListAction:r}=ka(),c=Object(i.useMemo)((()=>({box:{incremental:!0,"data-test-subj":"ilmSearchBar"},toolsRight:Object(he.jsx)(f.EuiFlexItem,{grow:!1},Object(he.jsx)(f.EuiSwitch,{id:"checkboxShowHiddenIndices","data-test-subj":"includeHiddenPoliciesSwitch",checked:s,onChange:e=>o(e.target.checked),label:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.hiddenPoliciesSwitchLabel",defaultMessage:"Include managed system policies"})}))})),[s,o]),d=Object(i.useMemo)((()=>s?e:e.filter((e=>{var t,a;return!(null!==(t=e.policy)&&void 0!==t&&null!==(a=t._meta)&&void 0!==a&&a.managed)}))),[e,s]),u=[{"data-test-subj":"policy-name",field:"name",name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.headers.nameHeader",{defaultMessage:"Name"}),sortable:!0,render:(e,a)=>{var i,s;const o=null===(i=a.policy)||void 0===i||null===(s=i._meta)||void 0===s?void 0:s.managed;return Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(f.EuiLink,ze()({className:"eui-textBreakAll","data-test-subj":"policyTablePolicyNameLink"},Object(n.reactRouterNavigate)(t,Object(pt.e)(e),(()=>Object($e.c)(h.METRIC_TYPE.CLICK,x.f)))),e),o&&Object(he.jsx)(l.a.Fragment,null,"Â ",Object(he.jsx)(f.EuiToolTip,{content:Sa.badgeTooltip},Object(he.jsx)(f.EuiBadge,{color:"hollow","data-test-subj":"managedPolicyBadge"},Sa.badge))))}},{"data-test-subj":"policy-indexTemplates",field:"indexTemplates",name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.headers.indexTemplatesHeader",{defaultMessage:"Linked index templates"}),sortable:({indexTemplates:e})=>(null!=e?e:[]).length,render:(e,t)=>e&&e.length>0?Object(he.jsx)(f.EuiToolTip,{content:La.viewIndices,position:"left"},Object(he.jsx)(f.EuiButtonEmpty,{flush:"both","data-test-subj":"viewIndexTemplates",onClick:()=>r({selectedPolicy:t,actionType:"viewIndexTemplates"})},e.length)):"0"},{"data-test-subj":"policy-indices",field:"indices",name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.headers.linkedIndicesHeader",{defaultMessage:"Linked indices"}),sortable:({indices:e})=>(null!=e?e:[]).length,render:(e,t)=>e&&e.length>0?Object(he.jsx)(f.EuiToolTip,{content:La.viewIndices,position:"left"},Object(he.jsx)(f.EuiLink,{href:Object(pt.b)(t.name,a)},e.length)):"0"},{"data-test-subj":"policy-modifiedDate",field:"modifiedDate",name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.headers.modifiedDateHeader",{defaultMessage:"Modified date"}),sortable:!0,render:e=>e?k()(e).format("MMM D, YYYY"):e},{actions:[{render:e=>Object(he.jsx)(f.EuiToolTip,{content:La.addIndexTemplate},Object(he.jsx)(f.EuiButtonIcon,{"data-test-subj":"addPolicyToTemplate",onClick:()=>r({selectedPolicy:e,actionType:"addIndexTemplate"}),iconType:"plusInCircle","aria-label":La.addIndexTemplate}))},{render:(e,t)=>Object(he.jsx)(f.EuiToolTip,{content:t?La.deleteEnabled:La.deleteDisabled},Object(he.jsx)(f.EuiButtonIcon,{"data-test-subj":"deletePolicy",onClick:()=>r({selectedPolicy:e,actionType:"deletePolicy"}),iconType:"trash","aria-label":La.deleteEnabled,disabled:!t})),enabled:e=>!(e=>Boolean(e.indices&&e.indices.length))(e)}],name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.headers.actionsHeader",{defaultMessage:"Actions"})}];return Object(he.jsx)(f.EuiInMemoryTable,{tableCaption:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.captionText",{defaultMessage:"The table below contains {count, plural, one {# Index Lifecycle policy} other {# Index Lifecycle policies}} .",values:{count:e.length}}),pagination:!0,sorting:{sort:{field:"name",direction:"asc"}},search:c,tableLayout:"auto",items:d,columns:u,rowProps:e=>({"data-test-subj":`policyTableRow-${e.name}`})})};var Fa=a(4),Ca=a.n(Fa);class confirm_delete_ConfirmDelete extends i.Component{constructor(...e){super(...e),Ca()(this,"state",{isDeleteConfirmed:!1}),Ca()(this,"setIsDeleteConfirmed",(e=>{this.setState({isDeleteConfirmed:e})})),Ca()(this,"deletePolicy",(async()=>{const{policyToDelete:e,callback:t}=this.props,a=e.name;try{await Object(j.c)(a);const e=v.i18n.translate("xpack.indexLifecycleMgmt.confirmDelete.successMessage",{defaultMessage:"Deleted policy {policyName}",values:{policyName:a}});M.c.addSuccess(e)}catch(e){const t=v.i18n.translate("xpack.indexLifecycleMgmt.confirmDelete.errorMessage",{defaultMessage:"Error deleting policy {policyName}",values:{policyName:a}});Object(qe.a)(e,t)}t&&t()})),Ca()(this,"isPolicyPolicy",!0)}render(){var e,t;const{policyToDelete:a,onCancel:i}=this.props,{isDeleteConfirmed:l}=this.state,s=null===(e=a.policy)||void 0===e||null===(t=e._meta)||void 0===t?void 0:t.managed,n=v.i18n.translate("xpack.indexLifecycleMgmt.confirmDelete.title",{defaultMessage:'Delete policy "{name}"',values:{name:a.name}});return Object(he.jsx)(f.EuiConfirmModal,{"data-test-subj":"deletePolicyModal",title:n,onCancel:i,onConfirm:this.deletePolicy,cancelButtonText:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.confirmDelete.cancelButton",defaultMessage:"Cancel"}),confirmButtonText:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.confirmDelete.deleteButton",defaultMessage:"Delete"}),buttonColor:"danger",confirmButtonDisabled:!!s&&!l},s?Object(he.jsx)(f.EuiCallOut,{title:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.deletePolicyModal.proceedWithCautionCallOutTitle",defaultMessage:"Deleting a managed policy can break Kibana"}),color:"danger",iconType:"alert","data-test-subj":"deleteManagedPolicyCallOut"},Object(he.jsx)("p",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.deletePolicyModal.proceedWithCautionCallOutDescription",defaultMessage:"Managed policies are critical for internal operations. If you delete this managed policy, you canâ€™t recover it."})),Object(he.jsx)(f.EuiCheckbox,{id:"confirmDeletePolicyCheckbox",label:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.deletePolicyModal.confirmDeleteCheckboxLabel",defaultMessage:"I understand the consequences of deleting a managed policy"}),checked:l,onChange:e=>this.setIsDeleteConfirmed(e.target.checked)})):Object(he.jsx)("div",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.confirmDelete.undoneWarning",defaultMessage:"You can't recover a deleted policy."})))}}const za=({policy:e,onSuccess:t,onCancel:a})=>{const[s,n]=Object(i.useState)(!1),[o,r]=Object(i.useState)(""),[c,d]=Object(i.useState)(""),[u,p]=Object(i.useState)(""),{error:h,isLoading:x,data:b,resendRequest:y}=Object(j.h)(s),O=v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.title",{defaultMessage:'Add policy "{name}" to index template',values:{name:e.name}}),{docLinks:P}=m().services;return Object(he.jsx)(f.EuiConfirmModal,{"data-test-subj":"addPolicyToTemplateModal",title:O,onCancel:a,onConfirm:async()=>{const a=e.name;if(o)try{await Object(j.b)({policyName:a,templateName:o,aliasName:""===c?void 0:c},s);const e=v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.successMessage",{defaultMessage:"Added policy {policyName} to index template {templateName}",values:{policyName:a,templateName:o}});M.c.addSuccess(e),t(o)}catch(e){const t=v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.errorMessage",{defaultMessage:'Error adding policy "{policyName}" to index template {templateName}',values:{policyName:a,templateName:o}});Object(qe.a)(e,t)}else p(v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.noTemplateSelectedErrorMessage",{defaultMessage:"You must select an index template."}))},cancelButtonText:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.confirmButton",{defaultMessage:"Add policy"}),confirmButtonDisabled:x||!!h||!b},Object(he.jsx)(f.EuiText,null,Object(he.jsx)("p",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.explanationText",defaultMessage:"This will apply the lifecycle policy to all indices which match the index template."})," ",Object(he.jsx)(Ve,{docPath:P.links.elasticsearch.indexTemplates,text:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutIndexTemplatesLink",defaultMessage:"Learn about index templates"})}))),Object(he.jsx)(f.EuiSpacer,{size:"m"}),(()=>{let t=[];return b&&(t=b.map((({name:e})=>({label:e})))),Object(he.jsx)(f.EuiForm,null,Object(he.jsx)(f.EuiFormRow,null,Object(he.jsx)(f.EuiSwitch,{label:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.showLegacyTemplates",defaultMessage:"Show legacy index templates"}),checked:s,onChange:e=>{r(""),n(e.target.checked)}})),h?(()=>{const{statusCode:e="",message:t=""}=h;return Object(he.jsx)(i.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(f.EuiCallOut,{style:{maxWidth:400},title:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.errorLoadingTemplatesTitle",defaultMessage:"Unable to load index templates"}),color:"danger"},Object(he.jsx)("p",null,t," (",e,")"),Object(he.jsx)(f.EuiButton,{isLoading:x,color:"danger",onClick:y},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyToTemplateConfirmModal.errorLoadingTemplatesButton",defaultMessage:"Try again"}))),Object(he.jsx)(f.EuiSpacer,{size:"s"}))})():Object(he.jsx)(l.a.Fragment,null,(()=>{var e,t,a;const l=null==b?void 0:b.find((e=>e.name===o)),s=null==l||null===(e=l.settings)||void 0===e||null===(t=e.index)||void 0===t||null===(a=t.lifecycle)||void 0===a?void 0:a.name;if(s)return Object(he.jsx)(i.Fragment,null,Object(he.jsx)(f.EuiSpacer,{size:"s"}),Object(he.jsx)(f.EuiCallOut,{style:{maxWidth:400},title:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.templateHasPolicyWarningTitle",defaultMessage:"Template already has policy"}),color:"warning"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyToTemplateConfirmModal.indexHasNoAliasesWarningMessage",defaultMessage:"This index template already has the policy {existingPolicyName} attached to it. Adding this policy will overwrite that configuration.",values:{existingPolicyName:s}})),Object(he.jsx)(f.EuiSpacer,{size:"s"}))})(),Object(he.jsx)(f.EuiFormRow,{isInvalid:!!u,error:u,label:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.chooseTemplateLabel",defaultMessage:"Index template"})},Object(he.jsx)(f.EuiComboBox,{isLoading:x,placeholder:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.chooseTemplateMessage",{defaultMessage:"Select an index template"}),options:t,selectedOptions:o?[{label:o}]:[],onChange:e=>{p(""),r(e.length>0?e[0].label:"")},singleSelection:{asPlainText:!0},isClearable:!0}))),(null===(a=e.policy.phases.hot)||void 0===a?void 0:a.actions.rollover)?Object(he.jsx)(f.EuiFormRow,{label:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.rolloverAliasLabel",defaultMessage:"Alias for rollover index"})},Object(he.jsx)(f.EuiFieldText,{value:c,onChange:e=>{d(e.target.value)}})):null);var a})())},Aa=({updatePolicies:e})=>{const{listAction:t,setListAction:a}=ka();var i;return"viewIndexTemplates"===(null==t?void 0:t.actionType)?Object(he.jsx)(xt,{policyName:t.selectedPolicy.name,indexTemplates:null!==(i=t.selectedPolicy.indexTemplates)&&void 0!==i?i:[],close:()=>{a(null)}}):"deletePolicy"===(null==t?void 0:t.actionType)?Object(he.jsx)(confirm_delete_ConfirmDelete,{policyToDelete:t.selectedPolicy,callback:()=>{e(),a(null)},onCancel:()=>{a(null)}}):"addIndexTemplate"===(null==t?void 0:t.actionType)?Object(he.jsx)(za,{policy:t.selectedPolicy,onSuccess:e=>{t.selectedPolicy.indexTemplates=[...t.selectedPolicy.indexTemplates||[],e],a(null)},onCancel:()=>a(null)}):null},Da=({policies:e,updatePolicies:t})=>{const a=Object(p.useHistory)(),s=Object(he.jsx)(f.EuiButton,ze()({},Object(n.reactRouterNavigate)(a,Object(pt.d)()),{fill:!0,iconType:"plusInCircle","data-test-subj":"createPolicyButton"}),Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.emptyPrompt.createButtonLabel",defaultMessage:"Create policy"}));return 0===e.length?Object(he.jsx)(f.EuiPageContent_Deprecated,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(he.jsx)(f.EuiEmptyPrompt,{iconType:"managementApp",title:Object(he.jsx)("h1",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.emptyPromptTitle",defaultMessage:"Create your first index lifecycle policy"})),body:Object(he.jsx)(i.Fragment,null,Object(he.jsx)("p",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.emptyPromptDescription",defaultMessage:" An index lifecycle policy helps you manage your indices as they age."}))),actions:s})):Object(he.jsx)(l.a.Fragment,null,Object(he.jsx)(Aa,{updatePolicies:t}),Object(he.jsx)(f.EuiPageHeader,{pageTitle:Object(he.jsx)("span",{"data-test-subj":"ilmPageHeader"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.sectionHeading",defaultMessage:"Index Lifecycle Policies"})),description:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.sectionDescription",defaultMessage:"Manage your indices as they age.  Attach a policy to automate when and how to transition an index through its lifecycle."}),bottomBorder:!0,rightSideItems:[s]}),Object(he.jsx)(f.EuiSpacer,{size:"l"}),Object(he.jsx)(Ea,{policies:e}))},Ia=()=>{const{services:{breadcrumbService:e}}=m(),{data:t,isLoading:a,error:l,resendRequest:s}=Object(j.k)();if(Object(i.useEffect)((()=>{e.setBreadcrumbs("policies")}),[e]),a)return Object(he.jsx)(f.EuiPageContent_Deprecated,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(he.jsx)(f.EuiEmptyPrompt,{title:Object(he.jsx)(f.EuiLoadingSpinner,{size:"xl"}),body:Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.policiesLoading",defaultMessage:"Loading policies..."})}));if(l){const{statusCode:e,message:t}=l||{statusCode:"",message:""};return Object(he.jsx)(f.EuiPageContent_Deprecated,{verticalPosition:"center",horizontalPosition:"center",color:"danger"},Object(he.jsx)(f.EuiEmptyPrompt,{title:Object(he.jsx)("h2",null,Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.policiesLoadingFailedTitle",defaultMessage:"Unable to load existing lifecycle policies"})),body:Object(he.jsx)("p",null,t," (",e,")"),actions:Object(he.jsx)(f.EuiButton,{onClick:s,iconType:"refresh",color:"danger"},Object(he.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.policiesReloadButton",defaultMessage:"Try again"}))}))}return Object(he.jsx)(Ta,null,Object(he.jsx)(Da,{policies:t||[],updatePolicies:s}))},Na=({history:e})=>{const{services:{executionContext:t}}=m();return Object(i.useEffect)((()=>Object($e.c)(h.METRIC_TYPE.LOADED,x.a)),[]),Object(n.useExecutionContext)(t,{type:"application",page:"indexLifecycleManagement"}),Object(he.jsx)(p.Router,{history:e},Object(he.jsx)(p.Switch,null,Object(he.jsx)(p.Redirect,{exact:!0,from:"/",to:pt.a.list}),Object(he.jsx)(p.Route,{exact:!0,path:pt.a.list,component:Ia}),Object(he.jsx)(p.Route,{path:pt.a.edit,component:_a})))},Ra=(e,t,a,i,l,o,r,c,d,m)=>{const{getUrlForApp:p}=i;return Object(s.render)(Object(he.jsx)(n.RedirectAppLinks,{application:i,className:u.APP_WRAPPER_CLASS},Object(he.jsx)(t,null,Object(he.jsx)(n.KibanaThemeProvider,{theme$:r},Object(he.jsx)(n.KibanaContextProvider,{services:{cloud:m,breadcrumbService:l,license:o,getUrlForApp:p,docLinks:c,executionContext:d}},Object(he.jsx)(Na,{history:a}))))),e),()=>Object(s.unmountComponentAtNode)(e)}}])]);