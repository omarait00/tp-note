/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.canvas_bundle_jsonpfunction=window.canvas_bundle_jsonpfunction||[]).push([[9],Array(59).concat([function(e,t,a){"use strict";t.__esModule=!0;var n={batch:!0},r=a(330);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===r[e]||(t[e]=r[e]))}));var s=a(343);t.batch=s.unstable_batchedUpdates,(0,a(216).setBatch)(s.unstable_batchedUpdates)},,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return i}));var n=a(19);function r(e){return Object(n.get)(e,"transient.canUserWrite",!0)}function s(e){return Object(n.get)(e,"transient.fullscreen",!1)}function o(e){return Object(n.get)(e,"transient.zoomScale",1)}function i(e){return e.app.serverFunctions}},,,,,function(e,t,a){"use strict";var n=Array.isArray,r=Object.keys,s=Object.prototype.hasOwnProperty,o="undefined"!=typeof Element;function i(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var a,c,l,u=n(e),d=n(t);if(u&&d){if((c=e.length)!=t.length)return!1;for(a=c;0!=a--;)if(!i(e[a],t[a]))return!1;return!0}if(u!=d)return!1;var p=e instanceof Date,b=t instanceof Date;if(p!=b)return!1;if(p&&b)return e.getTime()==t.getTime();var m=e instanceof RegExp,g=t instanceof RegExp;if(m!=g)return!1;if(m&&g)return e.toString()==t.toString();var f=r(e);if((c=f.length)!==r(t).length)return!1;for(a=c;0!=a--;)if(!s.call(t,f[a]))return!1;if(o&&e instanceof Element&&t instanceof Element)return e===t;for(a=c;0!=a--;)if(!("_owner"===(l=f[a])&&e.$$typeof||i(e[l],t[l])))return!1;return!0}return e!=e&&t!=t}e.exports=function(e,t){try{return i(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}},,function(e,t,a){e.exports=a(12)(2743)},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16);t.default=function(e){var t=n.useRef();return n.useEffect((function(){t.current=e})),t.current}},,,,function(e,t,a){"use strict";var n=a(81).default;t.__esModule=!0,t.default=t.ReactReduxContext=void 0;var r=n(a(16)).default.createContext(null);t.ReactReduxContext=r;var s=r;t.default=s},function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return m})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return h})),a.d(t,"g",(function(){return O})),a.d(t,"b",(function(){return w}));var n=a(16),r=a(21),s=a(3),o=a(60),i=a(77);const c=()=>{const e=Object(o.useWorkpadService)(),t=Object(o.useNotifyService)(),a=Object(r.useHistory)();return Object(n.useCallback)((async n=>{try{let t=await e.get(n);t={...t,name:l.getClonedWorkpadName(t.name),id:Object(i.a)("workpad")},await e.create(t),a.push(`/workpad/${t.id}/page/1`)}catch(e){t.error(e,{title:u.getCloneFailureErrorMessage()})}}),[t,e,a])},l={getClonedWorkpadName:e=>s.i18n.translate("xpack.canvas.useCloneWorkpad.clonedWorkpadName",{defaultMessage:"Copy of {workpadName}",values:{workpadName:e},description:'This suffix is added to the end of the name of a cloned workpad to indicate that this new workpad is a copy of the original workpad. Example: "Copy of Sales Pitch"'})},u={getCloneFailureErrorMessage:()=>s.i18n.translate("xpack.canvas.error.useCloneWorkpad.cloneFailureErrorMessage",{defaultMessage:"Couldn't clone workpad"})};var d=a(93);const p=()=>{const e=Object(o.useWorkpadService)(),t=Object(o.useNotifyService)(),a=Object(r.useHistory)();return Object(n.useCallback)((async n=>{const r=n||Object(d.e)();try{await e.create(r),a.push(`/workpad/${r.id}/page/1`)}catch(e){t.error(e,{title:b.getCreateFailureErrorMessage()})}}),[t,a,e])},b={getCreateFailureErrorMessage:()=>s.i18n.translate("xpack.canvas.error.useCreateWorkpad.createFailureErrorMessage",{defaultMessage:"Couldn't create workpad"})},m=()=>{const e=Object(o.useWorkpadService)(),t=Object(o.useNotifyService)();return Object(n.useCallback)((async a=>{const n=a.map((async t=>{try{return await e.remove(t),{id:t,err:null}}catch(e){return{id:t,err:e}}}));return Promise.all(n).then((e=>{const[n,r]=e.reduce((([e,t],a)=>(a.err?t.push(a.id):e.push(a.id),[e,t])),[[],[]]),s=a.filter((e=>n.includes(e)));return r.length>0&&t.error(g.getDeleteFailureErrorMessage()),{removedIds:s,errored:r}}))}),[e,t])},g={getDeleteFailureErrorMessage:()=>s.i18n.translate("xpack.canvas.error.useDeleteWorkpads.deleteFailureErrorMessage",{defaultMessage:"Couldn't delete all workpads"})},f=()=>{const e=Object(o.useWorkpadService)();return Object(n.useCallback)((async()=>await e.findTemplates()),[e])},h=()=>{const e=Object(o.useWorkpadService)(),t=Object(o.useNotifyService)();return Object(n.useCallback)((async(a="")=>{try{return await e.find(a)}catch(e){t.error(e,{title:v.getFindFailureErrorMessage()})}}),[t,e])},v={getFindFailureErrorMessage:()=>s.i18n.translate("xpack.canvas.error.useFindWorkpads.findFailureErrorMessage",{defaultMessage:"Couldn't find workpad"})};var x=a(19),j=a(58);const y=()=>s.i18n.translate("xpack.canvas.error.useUploadWorkpad.uploadFailureErrorMessage",{defaultMessage:"Couldn't upload workpad"}),O=()=>{const e=Object(o.useNotifyService)(),t=(()=>{const e=Object(o.useWorkpadService)(),t=Object(o.useNotifyService)(),a=Object(r.useHistory)();return Object(n.useCallback)((async n=>{try{const t=await e.import(n);a.push(`/workpad/${t.id}/page/1`)}catch(e){t.error(e,{title:y()})}}),[t,a,e])})();return Object(n.useCallback)(((a,n=(()=>{}))=>{if(!a)return void n();"application/json"!==Object(x.get)(a,"type")&&(e.warning(_.getAcceptJSONOnlyErrorMessage(),{title:a.name?_.getFileUploadFailureWithFileNameErrorMessage(a.name):_.getFileUploadFailureWithoutFileNameErrorMessage()}),n());const r=new FileReader;r.onload=async()=>{try{const e=JSON.parse(r.result);if(e.id=Object(i.a)("workpad"),(e=>!Array.isArray(e.pages)||0===e.pages.length||!e.assets)(e))throw n(),new Error(_.getMissingPropertiesErrorMessage());await t(e),n(e)}catch(t){e.error(t,{title:a.name?_.getFileUploadFailureWithFileNameErrorMessage(a.name):_.getFileUploadFailureWithoutFileNameErrorMessage()}),n()}},r.readAsText(a)}),[e,t])},_={getFileUploadFailureWithoutFileNameErrorMessage:()=>s.i18n.translate("xpack.canvas.error.useImportWorkpad.fileUploadFailureWithoutFileNameErrorMessage",{defaultMessage:"Couldn't upload file"}),getFileUploadFailureWithFileNameErrorMessage:e=>s.i18n.translate("xpack.canvas.errors.useImportWorkpad.fileUploadFileWithFileNameErrorMessage",{defaultMessage:"Couldn't upload '{fileName}'",values:{fileName:e}}),getMissingPropertiesErrorMessage:()=>s.i18n.translate("xpack.canvas.error.useImportWorkpad.missingPropertiesErrorMessage",{defaultMessage:"Some properties required for a {CANVAS} workpad are missing.  Edit your {JSON} file to provide the correct property values, and try again.",values:{CANVAS:j.c,JSON:j.r}}),getAcceptJSONOnlyErrorMessage:()=>s.i18n.translate("xpack.canvas.error.useImportWorkpad.acceptJSONOnlyErrorMessage",{defaultMessage:"Only {JSON} files are accepted",values:{JSON:j.r}})},w=()=>{const e=Object(o.useWorkpadService)(),t=Object(o.useNotifyService)(),a=Object(r.useHistory)();return Object(n.useCallback)((async n=>{try{const t=await e.createFromTemplate(n.id);a.push(`/workpad/${t.id}/page/1`)}catch(e){t.error(e,{title:"Couldn't create workpad from template"})}}),[e,t,a])}},,,,,function(e,t,a){"use strict";e.exports={ShortcutManager:a(344),Shortcuts:a(349)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16);t.default=function(e){n.useEffect(e,[])}},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return x}));var n=a(16),r=a(154),s=a.n(r),o=a(3),i=a(60);const c=()=>{const e=Object(i.useNotifyService)(),t=Object(i.useWorkpadService)(),a=u();return Object(n.useCallback)((async n=>{try{const e=await t.get(n);a(e,`canvas-workpad-${e.name}-${e.id}`)}catch(t){e.error(t,{title:o.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadFailureErrorMessage",{defaultMessage:"Couldn't download workpad"})})}}),[t,e,a])},l=()=>{const e=Object(i.useNotifyService)(),t=u();return Object(n.useCallback)((async a=>{try{t(a,`canvas-embed-workpad-${a.name}-${a.id}`)}catch(t){e.error(t,{title:o.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadRenderedWorkpadFailureErrorMessage",{defaultMessage:"Couldn't download rendered workpad"})})}}),[e,t])},u=()=>Object(n.useCallback)(((e,t)=>{const a=new Blob([JSON.stringify(e)],{type:"application/json"});s.a.saveAs(a,`${t}.json`)}),[]);var d=a(59),p=a(63),b=a(82),m=a(98),g=a(65),f=a(78),h=a(148),v=a(92);const x=e=>{const t=Object(i.useEmbeddablesService)(),a=Object(i.useLabsService)(),r=Object(d.useDispatch)(),s=a.isProjectEnabled("labs:canvas:byValueEmbeddable"),o=t.getStateTransfer().getIncomingEmbeddablePackage(b.CANVAS_APP,!0);Object(n.useEffect)((()=>{if(s&&o){const{embeddableId:t,input:a,type:n}=o,s=e.elements.find((({id:e})=>e===t));if(s){const e=Object(p.d)(s.expression),o=e.chain.findIndex((({function:e})=>"embeddable"===e)),i=Object(m.a)(e.chain[o].arguments.config[0]),c=[t,"expressionRenderable"];r(Object(v.a)({path:c}));const l={...i,...a},u=`embeddable config="${Object(m.b)(l)}"\n  type="${n}"\n| render`;r(Object(h.c)({elementId:s.id,embeddableExpression:u})),r(Object(h.b)(s.id)),r(Object(f.a)([t]))}else{const t=`embeddable config="${Object(m.b)(a)}"\n  type="${n}"\n| render`;r(Object(g.b)(e.id,{expression:t}))}}}),[r,e,o,s])}},,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a(16);var n=a(18),r=a(113),s=a(17);const o=({animated:e=!1,text:t="",backgroundColor:a="#000000"})=>{if(e)return Object(s.jsx)("div",{className:"canvasLoading"},t&&Object(s.jsx)("span",null,t," "),Object(s.jsx)(n.EuiLoadingSpinner,{size:"m"}));const o=Object(r.a)(a);let i="text";return o&&Object(n.isColorDark)(o[0],o[1],o[2])&&(i="ghost"),Object(s.jsx)("div",{className:"canvasLoading"},t&&Object(s.jsx)("span",null,t," "),Object(s.jsx)(n.EuiIcon,{color:i,type:"clock"}))};o.defaultProps={animated:!1,backgroundColor:"#000000",text:""}},function(e,t,a){"use strict";var n,r=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function o(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function i(e,t){for(var a={},n=[],r=0;r<e.length;r++){var i=e[r],c=t.base?i[0]+t.base:i[0],l=a[c]||0,u="".concat(c," ").concat(l);a[c]=l+1;var d=o(u),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(s[d].references++,s[d].updater(p)):s.push({identifier:u,updater:g(p,t),references:1}),n.push(u)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var s=a.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=r(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,u=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,a,n){var r=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function p(e,t,a){var n=a.css,r=a.media,s=a.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var b=null,m=0;function g(e,t){var a,n,r;if(t.singleton){var s=m++;a=b||(b=c(t)),n=d.bind(null,a,s,!1),r=d.bind(null,a,s,!0)}else a=c(t),n=p.bind(null,a,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var a=i(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var r=o(a[n]);s[r].references--}for(var c=i(e,t),l=0;l<a.length;l++){var u=o(a[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}a=c}}}},function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,n,r,s=e[1]||"",o=e[3];if(!o)return s;if(t&&"function"==typeof btoa){var i=(a=o,n=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(r," */")),c=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[s].concat(c).concat([i]).join("\n")}return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(r[o]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);n&&r[c[0]]||(a&&(c[2]?c[2]="".concat(a," and ").concat(c[2]):c[2]=a),t.push(c))}},t}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(63),r=a(1),s=a.n(r);class tag_Tag{constructor(e){s()(this,"name",void 0),s()(this,"color",void 0),this.name=e.name,this.color=e.color}}class tags_registry_TagRegistry extends n.a{wrapper(e){return new tag_Tag(e)}}const o=new tags_registry_TagRegistry},function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return d}));var n=a(16),r=a(18),s=a(21),o=a(17);const i=e=>!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey),c=e=>0===e.button,l=e=>{const t=e.target.getAttribute("target");return t&&"_self"!==t},u=({to:e,...t})=>{const a=Object(s.useHistory)(),u=Object(n.useCallback)((t=>{t.defaultPrevented||i(t)||!c(t)||l(t)||(t.preventDefault(),a.push(e))}),[a,e]),d={...t,href:a.createHref({pathname:e}),onClick:u};return Object(o.jsx)(r.EuiLink,d)},d=({to:e,...t})=>{const a=Object(s.useHistory)(),u=Object(n.useCallback)((t=>{t.defaultPrevented||i(t)||!c(t)||l(t)||(t.preventDefault(),a.push(e))}),[a,e]),d={...t,href:a.createHref({pathname:e}),onClick:u};return Object(o.jsx)(r.EuiButtonIcon,d)}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";t.__esModule=!0,t.createSubscription=function(e,t){var a,s=r;function o(){c.onStateChange&&c.onStateChange()}function i(){var r,i,c;a||(a=t?t.addNestedSub(o):e.subscribe(o),r=(0,n.getBatch)(),i=null,c=null,s={clear:function(){i=null,c=null},notify:function(){r((function(){for(var e=i;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],t=i;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,a=c={callback:e,next:null,prev:c};return a.prev?a.prev.next=a:i=a,function(){t&&null!==i&&(t=!1,a.next?a.next.prev=a.prev:c=a.prev,a.prev?a.prev.next=a.next:i=a.next)}}})}var c={addNestedSub:function(e){return i(),s.subscribe(e)},notifyNestedSubs:function(){s.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(a)},trySubscribe:i,tryUnsubscribe:function(){a&&(a(),a=void 0,s.clear(),s=r)},getListeners:function(){return s}};return c};var n=a(216),r={notify:function(){},get:function(){return[]}}},function(e,t,a){"use strict";t.__esModule=!0,t.useIsomorphicLayoutEffect=void 0;var n=a(16),r="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect;t.useIsomorphicLayoutEffect=r},function(e,t,a){"use strict";e.exports=function(e){return"shift"===e||"ctrl"===e||"alt"===e||"meta"===e}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=a(231).a},function(e,t,a){var n,r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,a=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,s=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},c=function(e){setTimeout((function(){"string"==typeof e?a().revokeObjectURL(e):e.remove()}),4e4)},l=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(t,u,d){d||(t=l(t));var p,b=this,m="application/octet-stream"===t.type,g=function(){!function(e,t,a){for(var n=(t=[].concat(t)).length;n--;){var r=e["on"+t[n]];if("function"==typeof r)try{r.call(e,e)}catch(e){i(e)}}}(b,"writestart progress write writeend".split(" "))};if(b.readyState=b.INIT,r)return p=a().createObjectURL(t),void setTimeout((function(){var e,t;n.href=p,n.download=u,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),g(),c(p),b.readyState=b.DONE}));!function(){if((o||m&&s)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=o?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,b.readyState=b.DONE,g()},n.readAsDataURL(t),void(b.readyState=b.INIT)}p||(p=a().createObjectURL(t)),m?e.location.href=p:e.open(p,"_blank")||(e.location.href=p),b.readyState=b.DONE,g(),c(p)}()},d=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,a){return t=t||e.name||"download",a||(e=l(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,a){return new u(e,t||e.name||"download",a)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */e.exports?e.exports.saveAs=r:null!==a(397)&&null!==a(398)&&(void 0===(n=function(){return r}.call(t,a,t,e))||(e.exports=n))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(12)(2744)},function(e,t,a){"use strict";t.__esModule=!0,t.setBatch=t.getBatch=void 0;var n=function(e){e()};t.setBatch=function(e){return n=e},t.getBatch=function(){return n}},function(e,t,a){"use strict";var n=a(81).default,r=a(215).default;t.__esModule=!0,t.default=function(e,t){void 0===t&&(t={});var a=t,n=a.getDisplayName,r=void 0===n?function(e){return"ConnectAdvanced("+e+")"}:n,d=a.methodName,O=void 0===d?"connectAdvanced":d,_=a.renderCountProp,w=void 0===_?void 0:_,k=a.shouldHandleStateChanges,E=void 0===k||k,S=a.storeKey,C=void 0===S?"store":S,M=(a.withRef,a.forwardRef),P=void 0!==M&&M,T=a.context,N=void 0===T?p.ReactReduxContext:T,A=(0,o.default)(a,b),I=N;return function(t){var a=t.displayName||t.name||"Component",n=r(a),d=(0,s.default)({},A,{getDisplayName:r,methodName:O,renderCountProp:w,shouldHandleStateChanges:E,storeKey:C,displayName:n,wrappedComponentName:a,WrappedComponent:t}),p=A.pure,b=p?c.useMemo:function(e){return e()};function _(a){var n=(0,c.useMemo)((function(){var e=a.reactReduxForwardedRef,t=(0,o.default)(a,m);return[a.context,e,t]}),[a]),r=n[0],i=n[1],p=n[2],O=(0,c.useMemo)((function(){return r&&r.Consumer&&(0,l.isContextConsumer)(c.default.createElement(r.Consumer,null))?r:I}),[r,I]),_=(0,c.useContext)(O),w=Boolean(a.store)&&Boolean(a.store.getState)&&Boolean(a.store.dispatch);Boolean(_)&&Boolean(_.store);var k=w?a.store:_.store,S=(0,c.useMemo)((function(){return function(t){return e(t.dispatch,d)}(k)}),[k]),C=(0,c.useMemo)((function(){if(!E)return f;var e=(0,u.createSubscription)(k,w?null:_.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[k,w,_]),M=C[0],P=C[1],T=(0,c.useMemo)((function(){return w?_:(0,s.default)({},_,{subscription:M})}),[w,_,M]),N=(0,c.useReducer)(h,g,y),A=N[0][0],F=N[1];if(A&&A.error)throw A.error;var D=(0,c.useRef)(),L=(0,c.useRef)(p),R=(0,c.useRef)(),z=(0,c.useRef)(!1),B=b((function(){return R.current&&p===L.current?R.current:S(k.getState(),p)}),[k,A,p]);v(x,[L,D,z,p,B,R,P]),v(j,[E,k,M,S,L,D,z,R,P,F],[k,M,S]);var H=(0,c.useMemo)((function(){return c.default.createElement(t,(0,s.default)({},B,{ref:i}))}),[i,t,B]);return(0,c.useMemo)((function(){return E?c.default.createElement(O.Provider,{value:T},H):H}),[O,H,T])}var k=p?c.default.memo(_):_;if(k.WrappedComponent=t,k.displayName=_.displayName=n,P){var S=c.default.forwardRef((function(e,t){return c.default.createElement(k,(0,s.default)({},e,{reactReduxForwardedRef:t}))}));return S.displayName=n,S.WrappedComponent=t,(0,i.default)(S,t)}return(0,i.default)(k,t)}};var s=n(a(61)),o=n(a(114)),i=n(a(197)),c=r(a(16)),l=a(332),u=a(150),d=a(151),p=a(88),b=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],m=["reactReduxForwardedRef"],g=[],f=[null,null];function h(e,t){var a=e[1];return[t.payload,a+1]}function v(e,t,a){(0,d.useIsomorphicLayoutEffect)((function(){return e.apply(void 0,t)}),a)}function x(e,t,a,n,r,s,o){e.current=n,t.current=r,a.current=!1,s.current&&(s.current=null,o())}function j(e,t,a,n,r,s,o,i,c,l){if(e){var u=!1,d=null,p=function(){if(!u){var e,a,p=t.getState();try{e=n(p,r.current)}catch(e){a=e,d=e}a||(d=null),e===s.current?o.current||c():(s.current=e,i.current=e,o.current=!0,l({type:"STORE_UPDATED",payload:{error:a}}))}};return a.onStateChange=p,a.trySubscribe(),p(),function(){if(u=!0,a.tryUnsubscribe(),a.onStateChange=null,d)throw d}}}var y=function(){return[null,0]}},function(e,t,a){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.__esModule=!0,t.default=function(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(var s=0;s<a.length;s++)if(!Object.prototype.hasOwnProperty.call(t,a[s])||!n(e[a[s]],t[a[s]]))return!1;return!0}},function(e,t,a){"use strict";var n=a(81).default;function r(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}t.__esModule=!0,t.getDependsOnOwnProps=r,t.wrapMapToPropsConstant=function(e){return function(t,a){var n=e(t,a);function r(){return n}return r.dependsOnOwnProps=!1,r}},t.wrapMapToPropsFunc=function(e,t){return function(t,a){a.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,a){n.mapToProps=e,n.dependsOnOwnProps=r(e);var s=n(t,a);return"function"==typeof s&&(n.mapToProps=s,n.dependsOnOwnProps=r(s),s=n(t,a)),s},n}},n(a(220))},function(e,t,a){"use strict";var n=a(81).default;t.__esModule=!0,t.default=function(e,t,a){(0,r.default)(e)||(0,s.default)(a+"() in "+t+" must return a plain object. Instead received "+e+".")};var r=n(a(336)),s=n(a(221))},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},function(e,t,a){"use strict";t.__esModule=!0,t.createStoreHook=o,t.useStore=void 0;var n=a(16),r=a(88),s=a(223);function o(e){void 0===e&&(e=r.ReactReduxContext);var t=e===r.ReactReduxContext?s.useReduxContext:function(){return(0,n.useContext)(e)};return function(){return t().store}}var i=o();t.useStore=i},function(e,t,a){"use strict";t.__esModule=!0,t.useReduxContext=function(){return(0,n.useContext)(r.ReactReduxContext)};var n=a(16),r=a(88)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=a(347))&&n.__esModule?n:{default:n};t.default={getPlatformName:function(){var e=r.default.os.family||"";return e=e.toLowerCase().replace(/ /g,""),/\bwin/.test(e)?"windows":/darwin|osx/.test(e)?"osx":/linux|freebsd|sunos|ubuntu|debian|fedora|redhat|suse/.test(e)?"linux":"other"},getCharacter:function(e){return null==e.which?String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode?String.fromCharCode(e.which):null}},e.exports=t.default},function(e,t){function a(e,t,a,n){return!e.addEventListener&&(t="on"+t),(e.addEventListener||e.attachEvent).call(e,t,a,n),a}e.exports=a,e.exports.on=a,e.exports.off=function(e,t,a,n){return!e.removeEventListener&&(t="on"+t),(e.removeEventListener||e.detachEvent).call(e,t,a,n),a}},function(e,t,a){"use strict";e.exports=function(e){var t,n;if(t=a(227),n=a(361),"keypress"===e.type){var r=String.fromCharCode(e.which);return e.shiftKey||(r=r.toLowerCase()),r}return void 0!==t[e.which]?t[e.which]:void 0!==n[e.which]?n[e.which]:String.fromCharCode(e.which).toLowerCase()}},function(e,t,a){"use strict";e.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",173:"minus",187:"plus",189:"minus",224:"meta"};for(var n=1;n<20;++n)e.exports[111+n]="f"+n;for(n=0;n<=9;++n)e.exports[n+96]=n},function(e,t,a){"use strict";var n=a(385),r={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,s,o,i,c,l,u=!1;t||(t={}),a=t.debug||!1;try{if(o=n(),i=document.createRange(),c=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var s=r[t.format]||r.default;window.clipboardData.setData(s,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(l),i.selectNodeContents(l),c.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),s=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(s,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(i):c.removeAllRanges()),l&&document.body.removeChild(l),o()}return u}},function(e,t,a){"use strict";e.exports=a(388)},function(e,t,a){"use strict";e.exports=a(395)},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(61),r=a.n(n),s=a(18),o=(a(16),a(17));const i=e=>{const{isOpen:t,title:a,message:n,onConfirm:i,onCancel:c,confirmButtonText:l,cancelButtonText:u,className:d,...p}=e;return t?Object(o.jsx)(s.EuiConfirmModal,r()({},p,{className:`canvasConfirmModal ${d||""}`,title:a,onCancel:c,onConfirm:i,confirmButtonText:l,cancelButtonText:u,defaultFocusedButton:"confirm",buttonColor:"danger","data-test-subj":"canvasConfirmModal"}),n):null};i.defaultProps={title:"Confirm",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}},,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(68),r=a(125),s=a(16),o=a(77),i=a(61),c=a.n(i),l=a(18),u=a(17);const d=({name:e,color:t="#666666",type:a="health",...n})=>{switch(a){case"health":return Object(u.jsx)(l.EuiHealth,c()({color:t},n),e);case"badge":return Object(u.jsx)(l.EuiBadge,c()({color:t},n),e)}},p=Object(n.compose)(Object(n.withProps)((()=>({getTag:e=>r.a.get(e)||{name:e,color:void 0}}))))((({tags:e=[],tagType:t="health",getTag:a})=>Object(u.jsx)(s.Fragment,null,e.length?e.map((e=>{const{color:n,name:r}=a(e),s=Object(o.a)("tag");return Object(u.jsx)(d,{key:s,color:n,name:r,type:t})})):null)))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(81).default;t.__esModule=!0;var r=n(a(331));t.Provider=r.default;var s=n(a(217));t.connectAdvanced=s.default;var o=a(88);t.ReactReduxContext=o.ReactReduxContext;var i=n(a(333));t.connect=i.default;var c=a(341);t.useDispatch=c.useDispatch,t.createDispatchHook=c.createDispatchHook;var l=a(342);t.useSelector=l.useSelector,t.createSelectorHook=l.createSelectorHook;var u=a(222);t.useStore=u.useStore,t.createStoreHook=u.createStoreHook;var d=n(a(218));t.shallowEqual=d.default},function(e,t,a){"use strict";var n=a(81).default,r=a(215).default;t.__esModule=!0,t.default=void 0;var s=r(a(16)),o=(n(a(73)),a(88)),i=a(150),c=a(151);t.default=function(e){var t=e.store,a=e.context,n=e.children,r=(0,s.useMemo)((function(){var e=(0,i.createSubscription)(t);return{store:t,subscription:e}}),[t]),l=(0,s.useMemo)((function(){return t.getState()}),[t]);(0,c.useIsomorphicLayoutEffect)((function(){var e=r.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[r,l]);var u=a||o.ReactReduxContext;return s.default.createElement(u.Provider,{value:r},n)}},function(e,t,a){e.exports=a(12)(447)},function(e,t,a){"use strict";var n=a(81).default;t.__esModule=!0,t.createConnect=g,t.default=void 0;var r=n(a(61)),s=n(a(114)),o=n(a(217)),i=n(a(218)),c=n(a(334)),l=n(a(337)),u=n(a(338)),d=n(a(339)),p=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function b(e,t,a){for(var n=t.length-1;n>=0;n--){var r=t[n](e);if(r)return r}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+a+" argument when connecting component "+n.wrappedComponentName+".")}}function m(e,t){return e===t}function g(e){var t=void 0===e?{}:e,a=t.connectHOC,n=void 0===a?o.default:a,g=t.mapStateToPropsFactories,f=void 0===g?l.default:g,h=t.mapDispatchToPropsFactories,v=void 0===h?c.default:h,x=t.mergePropsFactories,j=void 0===x?u.default:x,y=t.selectorFactory,O=void 0===y?d.default:y;return function(e,t,a,o){void 0===o&&(o={});var c=o,l=c.pure,u=void 0===l||l,d=c.areStatesEqual,g=void 0===d?m:d,h=c.areOwnPropsEqual,x=void 0===h?i.default:h,y=c.areStatePropsEqual,_=void 0===y?i.default:y,w=c.areMergedPropsEqual,k=void 0===w?i.default:w,E=(0,s.default)(c,p),S=b(e,f,"mapStateToProps"),C=b(t,v,"mapDispatchToProps"),M=b(a,j,"mergeProps");return n(O,(0,r.default)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:C,initMergeProps:M,pure:u,areStatesEqual:g,areOwnPropsEqual:x,areStatePropsEqual:_,areMergedPropsEqual:k},E))}}var f=g();t.default=f},function(e,t,a){"use strict";var n=a(81).default;t.__esModule=!0,t.default=void 0,t.whenMapDispatchToPropsIsFunction=o,t.whenMapDispatchToPropsIsMissing=i,t.whenMapDispatchToPropsIsObject=c;var r=n(a(335)),s=a(219);function o(e){return"function"==typeof e?(0,s.wrapMapToPropsFunc)(e,"mapDispatchToProps"):void 0}function i(e){return e?void 0:(0,s.wrapMapToPropsConstant)((function(e){return{dispatch:e}}))}function c(e){return e&&"object"==typeof e?(0,s.wrapMapToPropsConstant)((function(t){return(0,r.default)(e,t)})):void 0}var l=[o,i,c];t.default=l},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){var a={},n=function(n){var r=e[n];"function"==typeof r&&(a[n]=function(){return t(r.apply(void 0,arguments))})};for(var r in e)n(r);return a}},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var a=t;null!==Object.getPrototypeOf(a);)a=Object.getPrototypeOf(a);return t===a}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0,t.whenMapStateToPropsIsFunction=r,t.whenMapStateToPropsIsMissing=s;var n=a(219);function r(e){return"function"==typeof e?(0,n.wrapMapToPropsFunc)(e,"mapStateToProps"):void 0}function s(e){return e?void 0:(0,n.wrapMapToPropsConstant)((function(){return{}}))}var o=[r,s];t.default=o},function(e,t,a){"use strict";var n=a(81).default;t.__esModule=!0,t.default=void 0,t.defaultMergeProps=s,t.whenMergePropsIsFunction=i,t.whenMergePropsIsOmitted=c,t.wrapMergePropsFunc=o;var r=n(a(61));function s(e,t,a){return(0,r.default)({},a,e,t)}function o(e){return function(t,a){a.displayName;var n,r=a.pure,s=a.areMergedPropsEqual,o=!1;return function(t,a,i){var c=e(t,a,i);return o?r&&s(c,n)||(n=c):(o=!0,n=c),n}}}function i(e){return"function"==typeof e?o(e):void 0}function c(e){return e?void 0:function(){return s}}n(a(220));var l=[i,c];t.default=l},function(e,t,a){"use strict";var n=a(81).default;t.__esModule=!0,t.default=function(e,t){var a=t.initMapStateToProps,n=t.initMapDispatchToProps,c=t.initMergeProps,l=(0,r.default)(t,s),u=a(e,l),d=n(e,l),p=c(e,l);return(l.pure?i:o)(u,d,p,e,l)},t.impureFinalPropsSelectorFactory=o,t.pureFinalPropsSelectorFactory=i;var r=n(a(114)),s=(n(a(340)),["initMapStateToProps","initMapDispatchToProps","initMergeProps"]);function o(e,t,a,n){return function(r,s){return a(e(r,s),t(n,s),s)}}function i(e,t,a,n,r){var s,o,i,c,l,u=r.areStatesEqual,d=r.areOwnPropsEqual,p=r.areStatePropsEqual,b=!1;return function(r,m){return b?function(r,b){var m,g,f=!d(b,o),h=!u(r,s);return s=r,o=b,f&&h?(i=e(s,o),t.dependsOnOwnProps&&(c=t(n,o)),l=a(i,c,o)):f?(e.dependsOnOwnProps&&(i=e(s,o)),t.dependsOnOwnProps&&(c=t(n,o)),l=a(i,c,o)):h?(m=e(s,o),g=!p(m,i),i=m,g&&(l=a(i,c,o)),l):l}(r,m):(i=e(s=r,o=m),c=t(n,o),l=a(i,c,o),b=!0,l)}}},function(e,t,a){"use strict";var n=a(81).default;t.__esModule=!0,t.default=function(e,t,a,n){s(e,"mapStateToProps",n),s(t,"mapDispatchToProps",n),s(a,"mergeProps",n)};var r=n(a(221));function s(e,t,a){if(!e)throw new Error("Unexpected value for "+t+" in "+a+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||Object.prototype.hasOwnProperty.call(e,"dependsOnOwnProps")||(0,r.default)("The selector for "+t+" of "+a+" did not specify a value for dependsOnOwnProps.")}},function(e,t,a){"use strict";t.__esModule=!0,t.createDispatchHook=s,t.useDispatch=void 0;var n=a(88),r=a(222);function s(e){void 0===e&&(e=n.ReactReduxContext);var t=e===n.ReactReduxContext?r.useStore:(0,r.createStoreHook)(e);return function(){return t().dispatch}}var o=s();t.useDispatch=o},function(e,t,a){"use strict";t.__esModule=!0,t.createSelectorHook=l,t.useSelector=void 0;var n=a(16),r=a(223),s=a(150),o=a(151),i=a(88),c=function(e,t){return e===t};function l(e){void 0===e&&(e=i.ReactReduxContext);var t=e===i.ReactReduxContext?r.useReduxContext:function(){return(0,n.useContext)(e)};return function(e,a){void 0===a&&(a=c);var r=t(),i=function(e,t,a,r){var i,c=(0,n.useReducer)((function(e){return e+1}),0)[1],l=(0,n.useMemo)((function(){return(0,s.createSubscription)(a,r)}),[a,r]),u=(0,n.useRef)(),d=(0,n.useRef)(),p=(0,n.useRef)(),b=(0,n.useRef)(),m=a.getState();try{if(e!==d.current||m!==p.current||u.current){var g=e(m);i=void 0!==b.current&&t(g,b.current)?b.current:g}else i=b.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return(0,o.useIsomorphicLayoutEffect)((function(){d.current=e,p.current=m,b.current=i,u.current=void 0})),(0,o.useIsomorphicLayoutEffect)((function(){function e(){try{var e=a.getState();if(e===p.current)return;var n=d.current(e);if(t(n,b.current))return;b.current=n,p.current=e}catch(e){u.current=e}c()}return l.onStateChange=e,l.trySubscribe(),e(),function(){return l.tryUnsubscribe()}}),[a,l]),i}(e,a,r.store,r.subscription);return(0,n.useDebugValue)(i),i}}var u=l();t.useSelector=u},function(e,t,a){"use strict";t.__esModule=!0,t.unstable_batchedUpdates=void 0;var n=a(22);t.unstable_batchedUpdates=n.unstable_batchedUpdates},function(e,t,a){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=u(a(345)),o=u(a(86)),i=a(346),c=u(a(224)),l=a(348);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t);var a=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._platformName=c.default.getPlatformName(),a._parseShortcutDescriptor=function(e){return(0,l.isPlainObject)(e)?e[a._platformName]:e},a._keymap=e,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"addUpdateListener",value:function(e){(0,o.default)(e,"addUpdateListener: callback argument is not defined or falsy"),this.on(t.CHANGE_EVENT,e)}},{key:"removeUpdateListener",value:function(e){this.removeListener(t.CHANGE_EVENT,e)}},{key:"setKeymap",value:function(e){(0,o.default)(e,"setKeymap: keymap argument is not defined or falsy."),this._keymap=e,this.emit(t.CHANGE_EVENT)}},{key:"extendKeymap",value:function(e){(0,o.default)(e,"extendKeymap: keymap argument is not defined or falsy."),this._keymap=Object.assign({},this._keymap,e),this.emit(t.CHANGE_EVENT)}},{key:"getAllShortcuts",value:function(){return this._keymap}},{key:"getAllShortcutsForPlatform",value:function(e){return function t(a){return(0,s.default)(a,(function(a,n,r){if((0,l.isPlainObject)(r)){if(!r[e])return a[n]=t(r),a;r=r[e]}return a[n]=r,a}),{})}(this._keymap)}},{key:"getAllShortcutsForCurrentPlatform",value:function(){return this.getAllShortcutsForPlatform(this._platformName)}},{key:"getShortcuts",value:function(e){(0,o.default)(e,"getShortcuts: name argument is not defined or falsy.");var t=this._keymap[e];if(t)return(0,l.compact)((0,l.flatten)((0,l.map)(t,this._parseShortcutDescriptor)))}},{key:"_parseShortcutKeyName",value:function(e,t){var a=this;return(0,l.findKey)(e,(function(e){if((0,l.isPlainObject)(e)&&(e=e[a._platformName]),(0,l.isArray)(e)){var n=e.indexOf(t);n>=0&&(e=e[n])}return e===t}))}},{key:"findShortcutName",value:function(e,t){(0,o.default)(e,"findShortcutName: keyName argument is not defined or falsy."),(0,o.default)(t,"findShortcutName: componentName argument is not defined or falsy.");var a=this._keymap[t];return this._parseShortcutKeyName(a,e)}}]),t}(i.EventEmitter);b.CHANGE_EVENT="shortcuts:update",t.default=b,e.exports=t.default}).call(this,a(187))},function(e,t){e.exports=function(e,t){var a=[r],n=2 in arguments;function r(a,r,s,o){return n||(a=e[o[0]],n=!0),t(a,r,e[r],s,o)}return n&&a.push(arguments[2]),Array.prototype.reduce.apply(Object.keys(e),a)}},function(e,t,a){"use strict";var n,r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(e,t,a){return Function.prototype.apply.call(e,t,a)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(a,n){function r(a){e.removeListener(t,s),n(a)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",r),a([].slice.call(arguments))}h(e,t,s,{once:!0}),"error"!==t&&function(e,t,a){"function"==typeof e.on&&h(e,"error",t,{once:!0})}(e,r)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function d(e,t,a,n){var r,s,o,i;if(l(a),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,a.listener?a.listener:a),s=e._events),o=s[t]),void 0===o)o=s[t]=a,++e._eventsCount;else if("function"==typeof o?o=s[t]=n?[a,o]:[o,a]:n?o.unshift(a):o.push(a),(r=u(e))>0&&o.length>r&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,i=c,console&&console.warn&&console.warn(i)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(e,t,a){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},r=p.bind(n);return r.listener=a,n.wrapFn=r,r}function m(e,t,a){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"==typeof r?a?[r.listener||r]:[r]:a?function(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}(r):f(r,r.length)}function g(e){var t=this._events;if(void 0!==t){var a=t[e];if("function"==typeof a)return 1;if(void 0!==a)return a.length}return 0}function f(e,t){for(var a=new Array(t),n=0;n<t;++n)a[n]=e[n];return a}function h(e,t,a,n){if("function"==typeof e.on)n.once?e.once(t,a):e.on(t,a);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(s){n.once&&e.removeEventListener(t,r),a(s)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(e){for(var t=[],a=1;a<arguments.length;a++)t.push(arguments[a]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var i=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw i.context=o,i}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)s(c,this,t);else{var l=c.length,u=f(c,l);for(a=0;a<l;++a)s(u[a],this,t)}return!0},i.prototype.addListener=function(e,t){return d(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return d(this,e,t,!0)},i.prototype.once=function(e,t){return l(t),this.on(e,b(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,b(this,e,t)),this},i.prototype.removeListener=function(e,t){var a,n,r,s,o;if(l(t),void 0===(n=this._events))return this;if(void 0===(a=n[e]))return this;if(a===t||a.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,a.listener||t));else if("function"!=typeof a){for(r=-1,s=a.length-1;s>=0;s--)if(a[s]===t||a[s].listener===t){o=a[s].listener,r=s;break}if(r<0)return this;0===r?a.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(a,r),1===a.length&&(n[e]=a[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,a,n;if(void 0===(a=this._events))return this;if(void 0===a.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==a[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete a[e]),this;if(0===arguments.length){var r,s=Object.keys(a);for(n=0;n<s.length;++n)"removeListener"!==(r=s[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=a[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return m(this,e,!0)},i.prototype.rawListeners=function(e){return m(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},i.prototype.listenerCount=g,i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,a){(function(e,n){var r;
/*!
 * Platform.js <https://mths.be/platform>
 * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <https://mths.be/mit>
 */(function(){"use strict";var s={function:!0,object:!0},o=s[typeof window]&&window||this,i=s[typeof t]&&t,c=s[typeof e]&&e&&!e.nodeType&&e,l=i&&c&&"object"==typeof n&&n;!l||l.global!==l&&l.window!==l&&l.self!==l||(o=l);var u=Math.pow(2,53)-1,d=/\bOpera/,p=Object.prototype,b=p.hasOwnProperty,m=p.toString;function g(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function f(e){return e=y(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:g(e)}function h(e,t){for(var a in e)b.call(e,a)&&t(e[a],a,e)}function v(e){return null==e?g(e):m.call(e).slice(8,-1)}function x(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function j(e,t){var a=null;return function(e,t){var a=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=u)for(;++a<n;)t(e[a],a);else h(e,t)}(e,(function(n,r){a=t(a,n,r,e)})),a}function y(e){return String(e).replace(/^ +| +$/g,"")}var O=function e(t){var a=o,n=t&&"object"==typeof t&&"String"!=v(t);n&&(a=t,t=null);var r=a.navigator||{},s=r.userAgent||"";t||(t=s);var i,c,l,u,p=n?!!r.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(m.toString()),b="Object",g=n?b:"ScriptBridgingProxyObject",O=n?b:"Environment",_=n&&a.java?"JavaPackage":v(a.java),w=n?b:"RuntimeObject",k=/\bJava/.test(_)&&a.java,E=k&&v(a.environment)==O,S=k?"a":"α",C=k?"b":"β",M=a.document||{},P=a.operamini||a.opera,T=d.test(T=n&&P?P["[[Class]]"]:v(P))?T:P=null,N=t,A=[],I=null,F=t==s,D=F&&P&&"function"==typeof P.version&&P.version(),L=j([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,a){return e||RegExp("\\b"+(a.pattern||x(a))+"\\b","i").exec(t)&&(a.label||a)})),R=j(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,a){return e||RegExp("\\b"+(a.pattern||x(a))+"\\b","i").exec(t)&&(a.label||a)})),z=W([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),B=j({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(e,a,n){return e||(a[z]||a[/^[a-z]+(?: +[a-z]+\b)*/i.exec(z)]||RegExp("\\b"+x(n)+"(?:\\b|\\w*\\d)","i").exec(t))&&n})),H=j(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,a){var n=a.pattern||x(a);return!e&&(e=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,a){var n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&a&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&a&&(e=e.replace(RegExp(t,"i"),a)),f(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,n,a.label||a)),e}));function W(e){return j(e,(function(e,a){var n=a.pattern||x(a);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(a.label&&!RegExp(n,"i").test(a.label)?a.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),a=a.label||a,e=f(e[0].replace(RegExp(n,"i"),a).replace(RegExp("; *(?:"+a+"[_-])?","i")," ").replace(RegExp("("+a+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}if(L&&(L=[L]),B&&!z&&(z=W([B])),(i=/\bGoogle TV\b/.exec(z))&&(z=i[0]),/\bSimulator\b/i.test(t)&&(z=(z?z+" ":"")+"Simulator"),"Opera Mini"==R&&/\bOPiOS\b/.test(t)&&A.push("running in Turbo/Uncompressed mode"),"IE"==R&&/\blike iPhone OS\b/.test(t)?(B=(i=e(t.replace(/like iPhone OS/,""))).manufacturer,z=i.product):/^iP/.test(z)?(R||(R="Safari"),H="iOS"+((i=/ OS ([\d_]+)/i.exec(t))?" "+i[1].replace(/_/g,"."):"")):"Konqueror"!=R||/buntu/i.test(H)?B&&"Google"!=B&&(/Chrome/.test(R)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(z))||/\bAndroid\b/.test(H)&&/^Chrome/.test(R)&&/\bVersion\//i.test(t)?(R="Android Browser",H=/\bAndroid\b/.test(H)?H:"Android"):"Silk"==R?(/\bMobi/i.test(t)||(H="Android",A.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&A.unshift("accelerated")):"PaleMoon"==R&&(i=/\bFirefox\/([\d.]+)\b/.exec(t))?A.push("identifying as Firefox "+i[1]):"Firefox"==R&&(i=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(H||(H="Firefox OS"),z||(z=i[1])):!R||(i=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(R))?(R&&!z&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(i+"/")+8))&&(R=null),(i=z||B||H)&&(z||B||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(H))&&(R=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(H)?H:i)+" Browser")):"Electron"==R&&(i=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&A.push("Chromium "+i):H="Kubuntu",D||(D=j(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",x(R),"(?:Firefox|Minefield|NetFront)"],(function(e,a){return e||(RegExp(a+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))),(i=("iCab"==L&&parseFloat(D)>3?"WebKit":/\bOpera\b/.test(R)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(L)&&"WebKit"||!L&&/\bMSIE\b/i.test(t)&&("Mac OS"==H?"Tasman":"Trident")||"WebKit"==L&&/\bPlayStation\b(?! Vita\b)/i.test(R)&&"NetFront")&&(L=[i]),"IE"==R&&(i=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(R+=" Mobile",H="Windows Phone "+(/\+$/.test(i)?i:i+".x"),A.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(R="IE Mobile",H="Windows Phone 8.x",A.unshift("desktop mode"),D||(D=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=R&&"Trident"==L&&(i=/\brv:([\d.]+)/.exec(t))&&(R&&A.push("identifying as "+R+(D?" "+D:"")),R="IE",D=i[1]),F){if("global",u=null!=(l=a)?typeof l.global:"number",/^(?:boolean|number|string|undefined)$/.test(u)||"object"==u&&!l.global)v(i=a.runtime)==g?(R="Adobe AIR",H=i.flash.system.Capabilities.os):v(i=a.phantom)==w?(R="PhantomJS",D=(i=i.version||null)&&i.major+"."+i.minor+"."+i.patch):"number"==typeof M.documentMode&&(i=/\bTrident\/(\d+)/i.exec(t))?(D=[D,M.documentMode],(i=+i[1]+4)!=D[1]&&(A.push("IE "+D[1]+" mode"),L&&(L[1]=""),D[1]=i),D="IE"==R?String(D[1].toFixed(1)):D[0]):"number"==typeof M.documentMode&&/^(?:Chrome|Firefox)\b/.test(R)&&(A.push("masking as "+R+" "+D),R="IE",D="11.0",L=["Trident"],H="Windows");else if(k&&(N=(i=k.lang.System).getProperty("os.arch"),H=H||i.getProperty("os.name")+" "+i.getProperty("os.version")),E){try{D=a.require("ringo/engine").version.join("."),R="RingoJS"}catch(e){(i=a.system)&&i.global.system==a.system&&(R="Narwhal",H||(H=i[0].os||null))}R||(R="Rhino")}else"object"==typeof a.process&&!a.process.browser&&(i=a.process)&&("object"==typeof i.versions&&("string"==typeof i.versions.electron?(A.push("Node "+i.versions.node),R="Electron",D=i.versions.electron):"string"==typeof i.versions.nw&&(A.push("Chromium "+D,"Node "+i.versions.node),R="NW.js",D=i.versions.nw)),R||(R="Node.js",N=i.arch,H=i.platform,D=(D=/[\d.]+/.exec(i.version))?D[0]:null));H=H&&f(H)}if(D&&(i=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(D)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(F&&r.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(I=/b/i.test(i)?"beta":"alpha",D=D.replace(RegExp(i+"\\+?$"),"")+("beta"==I?C:S)+(/\d+\+?/.exec(i)||"")),"Fennec"==R||"Firefox"==R&&/\b(?:Android|Firefox OS)\b/.test(H))R="Firefox Mobile";else if("Maxthon"==R&&D)D=D.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(z))"Xbox 360"==z&&(H=null),"Xbox 360"==z&&/\bIEMobile\b/.test(t)&&A.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(R)&&(!R||z||/Browser|Mobi/.test(R))||"Windows CE"!=H&&!/Mobi/i.test(t))if("IE"==R&&F)try{null===a.external&&A.unshift("platform preview")}catch(e){A.unshift("embedded")}else(/\bBlackBerry\b/.test(z)||/\bBB10\b/.test(t))&&(i=(RegExp(z.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||D)?(H=((i=[i,/BB10/.test(t)])[1]?(z=null,B="BlackBerry"):"Device Software")+" "+i[0],D=null):this!=h&&"Wii"!=z&&(F&&P||/Opera/.test(R)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==R&&/\bOS X (?:\d+\.){2,}/.test(H)||"IE"==R&&(H&&!/^Win/.test(H)&&D>5.5||/\bWindows XP\b/.test(H)&&D>8||8==D&&!/\bTrident\b/.test(t)))&&!d.test(i=e.call(h,t.replace(d,"")+";"))&&i.name&&(i="ing as "+i.name+((i=i.version)?" "+i:""),d.test(R)?(/\bIE\b/.test(i)&&"Mac OS"==H&&(H=null),i="identify"+i):(i="mask"+i,R=T?f(T.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(i)&&(H=null),F||(D=null)),L=["Presto"],A.push(i));else R+=" Mobile";(i=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(i=[parseFloat(i.replace(/\.(\d)$/,".0$1")),i],"Safari"==R&&"+"==i[1].slice(-1)?(R="WebKit Nightly",I="alpha",D=i[1].slice(0,-1)):D!=i[1]&&D!=(i[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(D=null),i[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==i[0]&&537.36==i[2]&&parseFloat(i[1])>=28&&"WebKit"==L&&(L=["Blink"]),F&&(p||i[1])?(L&&(L[1]="like Chrome"),i=i[1]||((i=i[0])<530?1:i<532?2:i<532.05?3:i<533?4:i<534.03?5:i<534.07?6:i<534.1?7:i<534.13?8:i<534.16?9:i<534.24?10:i<534.3?11:i<535.01?12:i<535.02?"13+":i<535.07?15:i<535.11?16:i<535.19?17:i<536.05?18:i<536.1?19:i<537.01?20:i<537.11?"21+":i<537.13?23:i<537.18?24:i<537.24?25:i<537.36?26:"Blink"!=L?"27":"28")):(L&&(L[1]="like Safari"),i=(i=i[0])<400?1:i<500?2:i<526?3:i<533?4:i<534?"4+":i<535?5:i<537?6:i<538?7:i<601?8:"8"),L&&(L[1]+=" "+(i+="number"==typeof i?".x":/[.+]/.test(i)?"":"+")),"Safari"==R&&(!D||parseInt(D)>45)&&(D=i)),"Opera"==R&&(i=/\bzbov|zvav$/.exec(H))?(R+=" ",A.unshift("desktop mode"),"zvav"==i?(R+="Mini",D=null):R+="Mobile",H=H.replace(RegExp(" *"+i+"$"),"")):"Safari"==R&&/\bChrome\b/.exec(L&&L[1])&&(A.unshift("desktop mode"),R="Chrome Mobile",D=null,/\bOS X\b/.test(H)?(B="Apple",H="iOS 4.3+"):H=null),D&&0==D.indexOf(i=/[\d.]+$/.exec(H))&&t.indexOf("/"+i+"-")>-1&&(H=y(H.replace(i,""))),L&&!/\b(?:Avant|Nook)\b/.test(R)&&(/Browser|Lunascape|Maxthon/.test(R)||"Safari"!=R&&/^iOS/.test(H)&&/\bSafari\b/.test(L[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(R)&&L[1])&&(i=L[L.length-1])&&A.push(i),A.length&&(A=["("+A.join("; ")+")"]),B&&z&&z.indexOf(B)<0&&A.push("on "+B),z&&A.push((/^on /.test(A[A.length-1])?"":"on ")+z),H&&(i=/ ([\d.+]+)$/.exec(H),c=i&&"/"==H.charAt(H.length-i[0].length-1),H={architecture:32,family:i&&!c?H.replace(i[0],""):H,version:i?i[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(i=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(N))&&!/\bi686\b/i.test(N)?(H&&(H.architecture=64,H.family=H.family.replace(RegExp(" *"+i),"")),R&&(/\bWOW64\b/i.test(t)||F&&/\w(?:86|32)$/.test(r.cpuClass||r.platform)&&!/\bWin64; x64\b/i.test(t))&&A.unshift("32-bit")):H&&/^OS X/.test(H.family)&&"Chrome"==R&&parseFloat(D)>=39&&(H.architecture=64),t||(t=null);var V={};return V.description=t,V.layout=L&&L[0],V.manufacturer=B,V.name=R,V.prerelease=I,V.product=z,V.ua=t,V.version=R&&D,V.os=H||{architecture:null,family:null,version:null,toString:function(){return"null"}},V.parse=e,V.toString=function(){return this.description||""},V.version&&A.unshift(D),V.name&&A.unshift(R),H&&R&&(H!=String(H).split(" ")[0]||H!=R.split(" ")[0]&&!z)&&A.push(z?"("+H+")":"on "+H),A.length&&(V.description=A.join(" ")),V}();o.platform=O,void 0===(r=function(){return O}.call(t,a,t,e))||(e.exports=r)}).call(this)}).call(this,a(139)(e),a(109))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=t.isArray=function(e){return Array.isArray(e)},s=t.isPlainObject=function(e){if("object"!==(void 0===e?"undefined":n(e))||null===e||r(e)||e.toString&&"[object Object]"!==e.toString())return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var a=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&Function.prototype.toString.call(a)===Function.prototype.toString.call(Object)},o=(t.findKey=function(e,t){if(s(e)||r(e))return Object.keys(e).find((function(a){return t(e[a])}))},t.compact=function(e){return e.filter(Boolean)},function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.reduce((function(t,n){return r(n)&&a?t.concat(e(n,!1)):(t.push(n),t)}),[])});t.flatten=function(e){if(!r(e))throw new Error("flatten expects an array");return o(e)},t.map=function(e,t){if(r(e))return e.map(t);for(var a=[],n=Object.keys(e),s=n.length,o=0;o<s;o+=1){var i=n[o];a.push(t(e[i],i))}return a}},function(e,t,a){"use strict";e.exports=a(350)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=l(a(16)),s=l(a(86)),o=l(a(351)),i=l(a(73)),c=l(a(224));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,a,n;u(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=n=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n._combokeys=null,n._lastEvent=null,n._bindShortcuts=function(e){var t=n._getElementToBind();t.setAttribute("tabindex",n.props.tabIndex),n._combokeys=new o.default(t,{storeInstancesGlobally:!1}),n._decorateCombokeys(),n._combokeys.bind(e,n._handleShortcuts,n.props.eventType),n.props.global&&t.addEventListener("shortcuts:global",n._customGlobalHandler)},n._customGlobalHandler=function(e){var t=e.detail,a=t.character,r=t.modifiers,s=t.event,o=null;n.props.targetNodeSelector&&(o=document.querySelector(n.props.targetNodeSelector)),e.target!==n._domNode&&e.target!==o&&n._combokeys.handleKey(a,r,s,!0)},n._decorateCombokeys=function(){var e=n._getElementToBind(),t=n._combokeys.handleKey.bind(n._combokeys);n._combokeys.stopCallback=function(e,t,a){var r,s="INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.contentEditable&&"true"===t.contentEditable;return r=e.key?1===e.key.length:Boolean(c.default.getCharacter(e)),!(!s||!r||n.props.alwaysFireHandler)},n._combokeys.handleKey=function(a,r,s,o){if(!n._lastEvent||s.timeStamp!==n._lastEvent.timeStamp||s.type!==n._lastEvent.type){n._lastEvent=s;var i=!1;if(n.props.isolate&&!s.__isolateShortcuts&&(s.__isolateShortcuts=!0,i=!0),o||e.dispatchEvent(new CustomEvent("shortcuts:global",{detail:{character:a,modifiers:r,event:s},bubbles:!0,cancelable:!0})),!s.__isolateShortcuts)return n.props.preventDefault&&s.preventDefault(),n.props.stopPropagation&&!o&&s.stopPropagation(),void t(a,r,s);(n.props.global||i)&&t(a,r,s)}}},n._getElementToBind=function(){var e=null;return n.props.targetNodeSelector?(e=document.querySelector(n.props.targetNodeSelector),(0,s.default)(e,"Node selector '"+n.props.targetNodeSelector+"'  was not found.")):e=n._domNode,e},n._unbindShortcuts=function(){n._combokeys&&(n._combokeys.detach(),n._combokeys.reset())},n._onUpdate=function(){var e=n.props.name&&n.context.shortcuts.getShortcuts(n.props.name);n._unbindShortcuts(),n._bindShortcuts(e||[])},n._handleShortcuts=function(e,t){if(n.props.name){var a=n.context.shortcuts.findShortcutName(t,n.props.name);n.props.handler&&n.props.handler(a,e)}},d(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this._onUpdate(),this.props.name&&this.context.shortcuts.addUpdateListener(this._onUpdate)}},{key:"componentWillUnmount",value:function(){this._unbindShortcuts(),this.props.name&&this.context.shortcuts.removeUpdateListener(this._onUpdate),this.props.global&&this._getElementToBind().removeEventListener("shortcuts:global",this._customGlobalHandler)}},{key:"render",value:function(){var e=this;return r.default.createElement("div",{ref:function(t){e._domNode=t},tabIndex:this.props.tabIndex,className:this.props.className},this.props.children)}}]),t}(r.default.Component);p.displayName="Shortcuts",p.contextTypes={shortcuts:i.default.object.isRequired},p.propTypes={children:i.default.node,handler:i.default.func,name:i.default.string,tabIndex:i.default.number,className:i.default.string,eventType:i.default.string,stopPropagation:i.default.bool,preventDefault:i.default.bool,targetNodeSelector:i.default.string,global:i.default.bool,isolate:i.default.bool,alwaysFireHandler:i.default.bool},p.defaultProps={tabIndex:-1,className:null,eventType:null,stopPropagation:!0,preventDefault:!1,targetNodeSelector:null,global:!1,isolate:!1,alwaysFireHandler:!1},t.default=p,e.exports=t.default},function(e,t,a){"use strict";e.exports=function(e,t){var a=this,n=a.constructor;return a.options=Object.assign({storeInstancesGlobally:!0},t||{}),a.callbacks={},a.directMap={},a.sequenceLevels={},a.resetTimer=null,a.ignoreNextKeyup=!1,a.ignoreNextKeypress=!1,a.nextExpectedAction=!1,a.element=e,a.addEvents(),a.options.storeInstancesGlobally&&n.instances.push(a),a},e.exports.prototype.bind=a(352),e.exports.prototype.bindMultiple=a(353),e.exports.prototype.unbind=a(354),e.exports.prototype.trigger=a(355),e.exports.prototype.reset=a(356),e.exports.prototype.stopCallback=a(357),e.exports.prototype.handleKey=a(358),e.exports.prototype.addEvents=a(359),e.exports.prototype.bindSingle=a(363),e.exports.prototype.getKeyInfo=a(364),e.exports.prototype.pickBestAction=a(368),e.exports.prototype.getReverseMap=a(369),e.exports.prototype.getMatches=a(370),e.exports.prototype.resetSequences=a(372),e.exports.prototype.fireCallback=a(373),e.exports.prototype.bindSequence=a(376),e.exports.prototype.resetSequenceTimer=a(377),e.exports.prototype.detach=a(378),e.exports.instances=[],e.exports.reset=a(379),e.exports.REVERSE_MAP=null},function(e,t,a){"use strict";e.exports=function(e,t,a){return e=e instanceof Array?e:[e],this.bindMultiple(e,t,a),this}},function(e,t,a){"use strict";e.exports=function(e,t,a){for(var n=0;n<e.length;++n)this.bindSingle(e[n],t,a)}},function(e,t,a){"use strict";e.exports=function(e,t){return this.bind(e,(function(){}),t)}},function(e,t,a){"use strict";e.exports=function(e,t){return this.directMap[e+":"+t]&&this.directMap[e+":"+t]({},e),this}},function(e,t,a){"use strict";e.exports=function(){return this.callbacks={},this.directMap={},this}},function(e,t,a){"use strict";e.exports=function(e,t){if((" "+t.className+" ").indexOf(" combokeys ")>-1)return!1;var a=t.tagName.toLowerCase();return"input"===a||"select"===a||"textarea"===a||t.isContentEditable}},function(e,t,a){"use strict";e.exports=function(e,t,n){var r,s,o,i,c=this,l={},u=0,d=!1;for(r=c.getMatches(e,t,n),s=0;s<r.length;++s)r[s].seq&&(u=Math.max(u,r[s].level));for(s=0;s<r.length;++s)if(r[s].seq){if(r[s].level!==u)continue;d=!0,l[r[s].seq]=1,c.fireCallback(r[s].callback,n,r[s].combo,r[s].seq)}else d||c.fireCallback(r[s].callback,n,r[s].combo);i="keypress"===n.type&&c.ignoreNextKeypress,o=a(152),n.type!==c.nextExpectedAction||o(e)||i||c.resetSequences(l),c.ignoreNextKeypress=d&&"keydown"===n.type}},function(e,t,a){"use strict";e.exports=function(){var e=this,t=a(225),n=e.element;e.eventHandler=a(360).bind(e),t(n,"keypress",e.eventHandler),t(n,"keydown",e.eventHandler),t(n,"keyup",e.eventHandler)}},function(e,t,a){"use strict";e.exports=function(e){var t,n=this;"number"!=typeof e.which&&(e.which=e.keyCode);var r=a(226)(e);void 0!==r&&("keyup"!==e.type||n.ignoreNextKeyup!==r?(t=a(362),n.handleKey(r,t(e),e)):n.ignoreNextKeyup=!1)}},function(e,t,a){"use strict";e.exports={106:"*",107:"plus",109:"minus",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},function(e,t,a){"use strict";e.exports=function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}},function(e,t,a){"use strict";e.exports=function(e,t,a,n,r){var s=this;s.directMap[e+":"+a]=t;var o,i=(e=e.replace(/\s+/g," ")).split(" ");i.length>1?s.bindSequence(e,i,t,a):(o=s.getKeyInfo(e,a),s.callbacks[o.key]=s.callbacks[o.key]||[],s.getMatches(o.key,o.modifiers,{type:o.action},n,e,r),s.callbacks[o.key][n?"unshift":"push"]({callback:t,modifiers:o.modifiers,action:o.action,seq:n,level:r,combo:e}))}},function(e,t,a){"use strict";e.exports=function(e,t){var n,r,s,o,i,c,l=[];for(n=a(365)(e),o=a(366),i=a(367),c=a(152),s=0;s<n.length;++s)o[r=n[s]]&&(r=o[r]),t&&"keypress"!==t&&i[r]&&(r=i[r],l.push("shift")),c(r)&&l.push(r);return{key:r,modifiers:l,action:t=this.pickBestAction(r,l,t)}}},function(e,t,a){"use strict";e.exports=function(e){return"+"===e?["+"]:e.split("+")}},function(e,t,a){"use strict";e.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},function(e,t,a){"use strict";e.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},function(e,t,a){"use strict";e.exports=function(e,t,a){return a||(a=this.getReverseMap()[e]?"keydown":"keypress"),"keypress"===a&&t.length&&(a="keydown"),a}},function(e,t,a){"use strict";e.exports=function(){var e,t=this.constructor;if(!t.REVERSE_MAP)for(var n in t.REVERSE_MAP={},e=a(227))n>95&&n<112||e.hasOwnProperty(n)&&(t.REVERSE_MAP[e[n]]=n);return t.REVERSE_MAP}},function(e,t,a){"use strict";e.exports=function(e,t,n,r,s,o){var i,c,l,u,d=this,p=[],b=n.type;if("keypress"!==b||n.code&&"Arrow"===n.code.slice(0,5)||(d.callbacks["any-character"]||[]).forEach((function(e){p.push(e)})),!d.callbacks[e])return p;for(l=a(152),"keyup"===b&&l(e)&&(t=[e]),i=0;i<d.callbacks[e].length;++i)if(c=d.callbacks[e][i],(r||!c.seq||d.sequenceLevels[c.seq]===c.level)&&b===c.action&&(u=a(371),"keypress"===b&&!n.metaKey&&!n.ctrlKey||u(t,c.modifiers))){var m=!r&&c.combo===s,g=r&&c.seq===r&&c.level===o;(m||g)&&d.callbacks[e].splice(i,1),p.push(c)}return p}},function(e,t,a){"use strict";e.exports=function(e,t){return e.sort().join(",")===t.sort().join(",")}},function(e,t,a){"use strict";e.exports=function(e){var t=this;e=e||{};var a,n=!1;for(a in t.sequenceLevels)e[a]?n=!0:t.sequenceLevels[a]=0;n||(t.nextExpectedAction=!1)}},function(e,t,a){"use strict";e.exports=function(e,t,n,r){this.stopCallback(t,t.target||t.srcElement,n,r)||!1===e(t,n)&&(a(374)(t),a(375)(t))}},function(e,t,a){"use strict";e.exports=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},function(e,t,a){"use strict";e.exports=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},function(e,t,a){"use strict";e.exports=function(e,t,n,r){var s=this;function o(t){return function(){s.nextExpectedAction=t,++s.sequenceLevels[e],s.resetSequenceTimer()}}function i(t){var o;s.fireCallback(n,t,e),"keyup"!==r&&(o=a(226),s.ignoreNextKeyup=o(t)),setTimeout((function(){s.resetSequences()}),10)}s.sequenceLevels[e]=0;for(var c=0;c<t.length;++c){var l=c+1===t.length?i:o(r||s.getKeyInfo(t[c+1]).action);s.bindSingle(t[c],l,r,e,c)}}},function(e,t,a){"use strict";e.exports=function(){var e=this;clearTimeout(e.resetTimer),e.resetTimer=setTimeout((function(){e.resetSequences()}),1e3)}},function(e,t,a){var n=a(225).off;e.exports=function(){var e=this,t=e.element;n(t,"keypress",e.eventHandler),n(t,"keydown",e.eventHandler),n(t,"keyup",e.eventHandler)}},function(e,t,a){"use strict";e.exports=function(){this.instances.forEach((function(e){e.reset()}))}},function(e,t,a){"use strict";const n=a(381),r=a(382),s=a(383);function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function c(e,t){return t.decode?r(e):e}function l(e){return Array.isArray(e)?e.sort():"object"==typeof e?l(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function b(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=a):n[e]=a};case"bracket":return(e,a,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],a):n[e]=[a]:n[e]=a};case"comma":case"separator":return(t,a,n)=>{const r="string"==typeof a&&a.split("").indexOf(e.arrayFormatSeparator)>-1?a.split(e.arrayFormatSeparator).map((t=>c(t,e))):null===a?a:c(a,e);n[t]=r};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const r of e.split("&")){let[e,o]=s(t.decode?r.replace(/\+/g," "):r,"=");o=void 0===o?null:["comma","separator"].includes(t.arrayFormat)?o:c(o,t),a(c(e,t),o,n)}for(const e of Object.keys(n)){const a=n[e];if("object"==typeof a&&null!==a)for(const e of Object.keys(a))a[e]=p(a[e],t);else n[e]=p(a,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const a=n[t];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?e[t]=l(a):e[t]=a,e}),Object.create(null))}t.extract=d,t.parse=b,t.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>t.skipNull&&null==e[a]||t.skipEmptyString&&""===e[a],n=function(e){switch(e.arrayFormat){case"index":return t=>(a,n)=>{const r=a.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[i(t,e),"[",r,"]"].join("")]:[...a,[i(t,e),"[",i(r,e),"]=",i(n,e)].join("")]};case"bracket":return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[i(t,e),"[]"].join("")]:[...a,[i(t,e),"[]=",i(n,e)].join("")];case"comma":case"separator":return t=>(a,n)=>null==n||0===n.length?a:0===a.length?[[i(t,e),"=",i(n,e)].join("")]:[[a,i(n,e)].join(e.arrayFormatSeparator)];default:return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,i(t,e)]:[...a,[i(t,e),"=",i(n,e)].join("")]}}(t),r={};for(const t of Object.keys(e))a(t)||(r[t]=e[t]);const s=Object.keys(r);return!1!==t.sort&&s.sort(t.sort),s.map((a=>{const r=e[a];return void 0===r?"":null===r?i(a,t):Array.isArray(r)?r.reduce(n(a),[]).join("&"):i(a,t)+"="+i(r,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,n]=s(e,"#");return Object.assign({url:a.split("?")[0]||"",query:b(d(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:c(n,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0},a);const n=u(e.url).split("?")[0]||"",r=t.extract(e.url),s=t.parse(r,{sort:!1}),o=Object.assign(s,e.query);let c=t.stringify(o,a);c&&(c=`?${c}`);let l=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(l=`#${i(e.fragmentIdentifier,a)}`),`${n}${c}${l}`}},function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,a){"use strict";var n="%[a-f0-9]{2}",r=new RegExp(n,"gi"),s=new RegExp("("+n+")+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(a),o(n))}function i(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(r),a=1;a<t.length;a++)t=(e=o(t,a).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},a=s.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var n=i(a[0]);n!==a[0]&&(t[a[0]]=n)}a=s.exec(e)}t["%C2"]="�";for(var r=Object.keys(t),o=0;o<r.length;o++){var c=r[o];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},,function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,a){"use strict";e.exports=a(387)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a(41),a(229),a(230);var n=a(396).default({key:"css"}),r=n.flush,s=n.hydrate,o=n.cx,i=n.merge,c=n.getRegisteredStyles,l=n.injectGlobal,u=n.keyframes,d=n.css,p=n.sheet,b=n.cache;t.cache=b,t.css=d,t.cx=o,t.flush=r,t.getRegisteredStyles=c,t.hydrate=s,t.injectGlobal=l,t.keyframes=u,t.merge=i,t.sheet=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(389),r=a(391),s=a(393);function o(e){return e&&e.__esModule?e:{default:e}}var i=o(n),c=o(r),l=/[A-Z]|^ms/g,u=/_EMO_([^_]+?)_([^]*?)_EMO_/g,d=function(e){return 45===e.charCodeAt(1)},p=function(e){return null!=e&&"boolean"!=typeof e},b=o(s).default((function(e){return d(e)?e:e.replace(l,"-$&").toLowerCase()})),m=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(u,(function(e,t,a){return f={name:t,styles:a,next:f},t}))}return 1===c.default[e]||d(e)||"number"!=typeof t||0===t?t:t+"px"};function g(e,t,a){if(null==a)return"";if(void 0!==a.__emotion_styles)return a;switch(typeof a){case"boolean":return"";case"object":if(1===a.anim)return f={name:a.name,styles:a.styles,next:f},a.name;if(void 0!==a.styles){var n=a.next;if(void 0!==n)for(;void 0!==n;)f={name:n.name,styles:n.styles,next:f},n=n.next;return a.styles+";"}return function(e,t,a){var n="";if(Array.isArray(a))for(var r=0;r<a.length;r++)n+=g(e,t,a[r])+";";else for(var s in a){var o=a[s];if("object"!=typeof o)null!=t&&void 0!==t[o]?n+=s+"{"+t[o]+"}":p(o)&&(n+=b(s)+":"+m(s,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var i=g(e,t,o);switch(s){case"animation":case"animationName":n+=b(s)+":"+i+";";break;default:n+=s+"{"+i+"}"}}else for(var c=0;c<o.length;c++)p(o[c])&&(n+=b(s)+":"+m(s,o[c])+";")}return n}(e,t,a);case"function":if(void 0!==e){var r=f,s=a(e);return f=r,g(e,t,s)}}if(null==t)return a;var o=t[a];return void 0!==o?o:a}var f,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,a){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,r="";f=void 0;var s=e[0];null==s||void 0===s.raw?(n=!1,r+=g(a,t,s)):r+=s[0];for(var o=1;o<e.length;o++)r+=g(a,t,e[o]),n&&(r+=s[o]);h.lastIndex=0;for(var c,l="";null!==(c=h.exec(r));)l+="-"+c[1];return{name:i.default(r)+l,styles:r,next:f}}},function(e,t,a){"use strict";e.exports=a(390)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,a=0,n=0,r=e.length;r>=4;++n,r-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),a=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&a)+(59797*(a>>>16)<<16);switch(r){case 3:a^=(255&e.charCodeAt(n+2))<<16;case 2:a^=(255&e.charCodeAt(n+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(n)))+(59797*(a>>>16)<<16)}return(((a=1540483477*(65535&(a^=a>>>13))+(59797*(a>>>16)<<16))^a>>>15)>>>0).toString(36)}},function(e,t,a){"use strict";e.exports=a(392)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,a){"use strict";e.exports=a(394)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(a){return void 0===t[a]&&(t[a]=e(a)),t[a]}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof document,r=function(e,t,a){var r=e.key+"-"+t.name;(!1===a||!1===n&&void 0!==e.compat)&&void 0===e.registered[r]&&(e.registered[r]=t.styles)};t.getRegisteredStyles=function(e,t,a){var n="";return a.split(" ").forEach((function(a){void 0!==e[a]?t.push(e[a]+";"):n+=a+" "})),n},t.insertStyles=function(e,t,a){r(e,t,a);var s=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o="",i=t;do{var c=e.insert(t===i?"."+s:"",i,e.sheet,!0);n||void 0===c||(o+=c),i=i.next}while(void 0!==i);if(!n&&0!==o.length)return o}},t.registerStyles=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(41),r=a(229),s=a(230);function o(e){return e&&e.__esModule?e:{default:e}}var i=o(n);function c(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function l(e,t,a){var n=[],r=s.getRegisteredStyles(e,n,a);return n.length<2?a:r+t(n)}var u=function e(t){for(var a="",n=0;n<t.length;n++){var r=t[n];if(null!=r){var s=void 0;switch(typeof r){case"boolean":break;case"object":if(Array.isArray(r))s=e(r);else for(var o in s="",r)r[o]&&o&&(s&&(s+=" "),s+=o);break;default:s=r}s&&(a&&(a+=" "),a+=s)}}return a};t.default=function(e){var t=i.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var a=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var o=r.serializeStyles(a,t.registered,void 0);return s.insertStyles(t,o,!1),t.key+"-"+o.name};return{css:a,cx:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return l(t.registered,a,u(n))},injectGlobal:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var s=r.serializeStyles(a,t.registered);c(t,s)},keyframes:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var s=r.serializeStyles(a,t.registered),o="animation-"+s.name;return c(t,{name:s.name,styles:"@keyframes "+o+"{"+s.styles+"}"}),o},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:s.getRegisteredStyles.bind(null,t.registered),merge:l.bind(null,t.registered,a)}}},function(e,t,a){e.exports=a(12)(1689)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,a){e.exports=a(12)(2729)},function(e,t,a){var n,r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function r(e,t){if(!n[e]){n[e]={};for(var a=0;a<e.length;a++)n[e][e.charAt(a)]=a}return n[e][t]}var s={compressToBase64:function(e){if(null==e)return"";var a=s._compress(e,6,(function(e){return t.charAt(e)}));switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:s._decompress(e.length,32,(function(a){return r(t,e.charAt(a))}))},compressToUTF16:function(t){return null==t?"":s._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:s._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=s.compress(e),a=new Uint8Array(2*t.length),n=0,r=t.length;n<r;n++){var o=t.charCodeAt(n);a[2*n]=o>>>8,a[2*n+1]=o%256}return a},decompressFromUint8Array:function(t){if(null==t)return s.decompress(t);for(var a=new Array(t.length/2),n=0,r=a.length;n<r;n++)a[n]=256*t[2*n]+t[2*n+1];var o=[];return a.forEach((function(t){o.push(e(t))})),s.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,(function(e){return a.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),s._decompress(e.length,32,(function(t){return r(a,e.charAt(t))})))},compress:function(t){return s._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,a){if(null==e)return"";var n,r,s,o={},i={},c="",l="",u="",d=2,p=3,b=2,m=[],g=0,f=0;for(s=0;s<e.length;s+=1)if(c=e.charAt(s),Object.prototype.hasOwnProperty.call(o,c)||(o[c]=p++,i[c]=!0),l=u+c,Object.prototype.hasOwnProperty.call(o,l))u=l;else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(n=0;n<b;n++)g<<=1,f==t-1?(f=0,m.push(a(g)),g=0):f++;for(r=u.charCodeAt(0),n=0;n<8;n++)g=g<<1|1&r,f==t-1?(f=0,m.push(a(g)),g=0):f++,r>>=1}else{for(r=1,n=0;n<b;n++)g=g<<1|r,f==t-1?(f=0,m.push(a(g)),g=0):f++,r=0;for(r=u.charCodeAt(0),n=0;n<16;n++)g=g<<1|1&r,f==t-1?(f=0,m.push(a(g)),g=0):f++,r>>=1}0==--d&&(d=Math.pow(2,b),b++),delete i[u]}else for(r=o[u],n=0;n<b;n++)g=g<<1|1&r,f==t-1?(f=0,m.push(a(g)),g=0):f++,r>>=1;0==--d&&(d=Math.pow(2,b),b++),o[l]=p++,u=String(c)}if(""!==u){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(n=0;n<b;n++)g<<=1,f==t-1?(f=0,m.push(a(g)),g=0):f++;for(r=u.charCodeAt(0),n=0;n<8;n++)g=g<<1|1&r,f==t-1?(f=0,m.push(a(g)),g=0):f++,r>>=1}else{for(r=1,n=0;n<b;n++)g=g<<1|r,f==t-1?(f=0,m.push(a(g)),g=0):f++,r=0;for(r=u.charCodeAt(0),n=0;n<16;n++)g=g<<1|1&r,f==t-1?(f=0,m.push(a(g)),g=0):f++,r>>=1}0==--d&&(d=Math.pow(2,b),b++),delete i[u]}else for(r=o[u],n=0;n<b;n++)g=g<<1|1&r,f==t-1?(f=0,m.push(a(g)),g=0):f++,r>>=1;0==--d&&(d=Math.pow(2,b),b++)}for(r=2,n=0;n<b;n++)g=g<<1|1&r,f==t-1?(f=0,m.push(a(g)),g=0):f++,r>>=1;for(;;){if(g<<=1,f==t-1){m.push(a(g));break}f++}return m.join("")},decompress:function(e){return null==e?"":""==e?null:s._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,a,n){var r,s,o,i,c,l,u,d=[],p=4,b=4,m=3,g="",f=[],h={val:n(0),position:a,index:1};for(r=0;r<3;r+=1)d[r]=r;for(o=0,c=Math.pow(2,2),l=1;l!=c;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=n(h.index++)),o|=(i>0?1:0)*l,l<<=1;switch(o){case 0:for(o=0,c=Math.pow(2,8),l=1;l!=c;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=n(h.index++)),o|=(i>0?1:0)*l,l<<=1;u=e(o);break;case 1:for(o=0,c=Math.pow(2,16),l=1;l!=c;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=n(h.index++)),o|=(i>0?1:0)*l,l<<=1;u=e(o);break;case 2:return""}for(d[3]=u,s=u,f.push(u);;){if(h.index>t)return"";for(o=0,c=Math.pow(2,m),l=1;l!=c;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=n(h.index++)),o|=(i>0?1:0)*l,l<<=1;switch(u=o){case 0:for(o=0,c=Math.pow(2,8),l=1;l!=c;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=n(h.index++)),o|=(i>0?1:0)*l,l<<=1;d[b++]=e(o),u=b-1,p--;break;case 1:for(o=0,c=Math.pow(2,16),l=1;l!=c;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=n(h.index++)),o|=(i>0?1:0)*l,l<<=1;d[b++]=e(o),u=b-1,p--;break;case 2:return f.join("")}if(0==p&&(p=Math.pow(2,m),m++),d[u])g=d[u];else{if(u!==b)return null;g=s+s.charAt(0)}f.push(g),d[b++]=s+g.charAt(0),s=g,0==--p&&(p=Math.pow(2,m),m++)}}};return s}();void 0===(n=function(){return r}.call(t,a,t,e))||(e.exports=n)},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(402);case"v8light":return a(404)}},function(e,t,a){var n=a(121),r=a(403);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,a){(t=a(122)(!1)).push([e.i,'.canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover,.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreenWrapper{min-width:100px}@media only screen and (min-width:768px) and (max-width:991px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}@media only screen and (min-width:992px) and (max-width:1199px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}@media only screen and (min-width:1200px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}.canvas.canvasContainer,.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{background-color:#141519;flex-direction:column}.canvasContainer--loading{left:50%;position:fixed;text-align:center;top:50%;transform:translateY(-50%)}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg,#343741 25%,#0000 0),linear-gradient(-45deg,#343741 25%,#0000 0),linear-gradient(45deg,#0000 75%,#343741 0),linear-gradient(-45deg,#0000 75%,#343741 0);background-size:8px 8px;position:relative}.canvasTextArea__code{font-family:Roboto Mono,Consolas,Menlo,Courier,monospace;font-size:14px;max-width:100%;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;width:100%}.canvasTextArea__code::-webkit-scrollbar{height:16px;width:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:#0000}.canvasContextMenu--topBorder{border-top:1px solid #343741}#canvas-app{overflow-y:hidden}#canvas-app .window-error{background-color:#f86b63;bottom:10px;color:#fff;display:block;max-width:500px;padding:10px;position:absolute;right:10px;z-index:2000}#canvas-app .window-error a{color:#fff;font-weight:700}.canvasHomeApp,.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalBody,.canvasHomeApp .canvasHomeApp__modalHeader{width:auto}@media only screen and (max-width:574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width:575px) and (max-width:767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{background:#141519;display:flex;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{align-items:stretch;display:flex;flex-grow:1}.canvasLayout__stage{display:flex;flex-basis:auto;flex-direction:column;flex-grow:1}.canvasLayout__stageHeader{background:#25262e;border-bottom:1px solid #343741;flex-basis:auto;flex-grow:0;font-size:14px;padding:8px 16px;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-basis:auto;flex-grow:1;position:relative}.canvasLayout__stageContentOverflow{align-items:center;bottom:0;display:flex;left:0;overflow:scroll;position:absolute;right:0;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;top:0}.canvasLayout__stageContentOverflow::-webkit-scrollbar{height:16px;width:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:#0000}.canvasLayout__sidebar{background:#25262e;border-left:1px solid #343741;display:flex;flex-basis:auto;flex-grow:0;position:relative;width:350px}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__sidebar .euiPanel.euiSplitPanel__inner{margin-bottom:0}.canvasLayout__footer{background-color:#141519;flex-basis:auto;flex-grow:0;font-size:14px;width:100%;z-index:6000}.canvasExport .canvasPage{box-shadow:none;overflow:hidden;position:relative}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #343741}.canvasArg__add:hover{background-color:#25262e}.canvasArg__add:hover label{color:#d4dae5}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{max-height:500px;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;width:250px}.canvasArg__addPopover::-webkit-scrollbar{height:16px;width:16px}.canvasArg__addPopover::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasArg__addPopover::-webkit-scrollbar-corner,.canvasArg__addPopover::-webkit-scrollbar-track{background-color:#0000}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:6px}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width:574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{padding-bottom:16px;width:100%}}@media only screen and (min-width:575px) and (max-width:767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{padding-bottom:16px;width:100%}}.canvasAssetManager .canvasAssetManager__meterWrapper{align-items:center;flex-grow:0;min-width:40%}@media only screen and (max-width:574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width:575px) and (max-width:767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{margin:32px auto 0;max-width:400px}.canvasAsset{overflow:hidden;text-align:center}.canvasAsset .canvasAsset__thumb{font-size:0;height:164px;margin:-8px -8px 0}.canvasAsset .canvasAsset__img{align-items:center;display:flex;height:100%;justify-content:center}.canvasAsset .canvasAsset__img img{max-height:164px;max-width:100%;width:auto}.canvasAssetPicker{max-height:120px;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.canvasAssetPicker::-webkit-scrollbar{height:16px;width:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:#0000}.canvasAssetPicker .canvasAssetPicker__link{height:100%;position:relative;text-align:center;width:100%}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:4px solid #36a2ef1a}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;right:4px;top:4px}.canvasAssetPicker .euiImage{height:40px;width:40px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;height:32px;position:relative;width:32px}.canvasColorDot .canvasColorDot__background{border-radius:6px;height:32px;left:0;position:absolute;top:0;width:32px}.canvasColorDot .canvasColorDot__foreground{align-items:center;border:1px solid #343741;border-radius:6px;display:flex;height:32px;justify-content:center;left:0;position:absolute;top:0;width:32px}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#98a2b3}.canvasDataSource{background-color:#1d1e24;border-radius:1px solid #343741;color:#dfe5ef;margin:8px;padding:0 8px}.canvasDataSource__list,.canvasDataSource__section{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{color:#dfe5ef;font-size:16px;font-size:1.14286rem;font-weight:700;line-height:1.71429rem;line-height:40px;overflow-wrap:break-word!important;word-break:break-word}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0!important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#7dded8}.canvasDatasourcePreview{height:100%;max-height:60vh;max-width:1000px}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 48px)}.canvasDataTable{display:flex;flex-direction:column;height:100%;justify-content:space-between;width:100%}.canvasDataTable .canvasDataTable__tableWrapper{height:100%;overflow:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;width:100%}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{height:16px;width:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:#0000}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:#0000}.canvasDataTable .canvasDataTable__footer{border-top:1px solid #343741;display:flex;justify-content:space-around;padding:8px;width:100%}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__td,.canvasDataTable .canvasDataTable__th{border-bottom:1px solid #343741;padding:8px 4px}.canvasDataTable .canvasDataTable__th{font-weight:700;white-space:nowrap}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:focus .canvasElementCard__controls,.canvasElementCard__wrapper:hover .canvasElementCard__controls{opacity:1;visibility:visible}.canvasElementCard__wrapper .canvasElementCard__controls{background:#ffffff80;border-radius:6px;opacity:0;position:absolute;right:8px;top:8px;transition:opacity .15s cubic-bezier(.694,.0482,.335,1);transition-delay:.25s;visibility:hidden}.canvasElementCard .euiCard__top{height:85px;margin:-16px -16px 0;text-align:center;width:calc(100% + 32px)}.canvasElementCard .euiCard__image{left:0;max-height:100%;max-width:100%;top:0;width:auto}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{overflow:hidden}.canvasElement,.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{flex-grow:1;height:256px;padding-top:16px}.canvasExpression--fullSize{bottom:0;display:flex;flex-direction:column;left:0;position:fixed;right:0;top:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{display:flex;flex-direction:column;flex-grow:1}.canvasExpression--fullSize .canvasExpressionInput__editor{bottom:57px;height:auto;left:0;position:absolute;right:0;top:0}.canvasExpression--fullSize .canvasExpressionInput__inner{display:flex;flex-grow:1}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{background-color:#1d1e24;border-top:1px solid #343741;padding:12px 16px}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0!important}body.canvas-isFullscreen #globalBannerList,body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasGrid,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__stageHeader{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{bottom:auto;display:block;left:auto;overflow:visible;position:static;right:auto;top:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{margin:0;padding:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__cols,body.canvas-isFullscreen .canvasLayout__rows{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{background:none;display:flex}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}body.canvas-isFullscreen .canvasContainer>.euiCallOut{display:none}.canvasFunctionForm>.canvasLoading{font-size:20px;text-align:center}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{border-left:1px dashed #343741;border-top:1px dashed #343741;height:100%;pointer-events:none;position:absolute;top:0;width:100%}.canvasBorderResizeHandle{background-color:#1d1e24;border:1px solid #98a2b3;box-shadow:0 .8px .8px #0000001a,0 2.3px 2px rgba(0,0,0,.075);display:block;height:8px;margin-left:-4px;margin-top:-4px;width:8px}.canvasBorderResizeHandle,.canvasDragBoxAnnotation{position:absolute;transform-origin:center center;transform-style:preserve-3d}.canvasDragBoxAnnotation{background:none;outline:1px dashed #98a2b3;pointer-events:none}.canvasHoverAnnotation{background:none;outline:1px solid #54b399;pointer-events:none}.canvasHoverAnnotation,.canvasRotationHandle{position:absolute;transform-origin:center center;transform-style:preserve-3d}.canvasRotationHandle{border-left:1px dashed #343741;border-top:1px dashed #343741;display:block;height:24px;margin-left:-1px;margin-top:-12px;width:0}.canvasRotationHandle__handle{background-color:#535966;border-radius:50%;display:block;height:9px;margin-left:-5px;margin-top:-6px;width:9px}.canvasRotationHandle__handle,.tooltipAnnotation{position:absolute;transform-origin:center center;transform-style:preserve-3d}.tooltipAnnotation{background-color:#000;border-radius:6px;box-shadow:0 1px 5px #00000040,0 3.6px 13px rgba(0,0,0,.175),0 8.4px 23px #00000026,0 23px 35px rgba(0,0,0,.125);color:#fff;max-width:256px;outline:none;overflow-wrap:break-word;padding:8px;pointer-events:none;z-index:9000}.tooltipAnnotation .euiHorizontalRule{background-color:#333}.canvasLoading{align-items:center;color:#343741;display:flex}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__addPage,.canvasPageManager .canvasPageManager__pages{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop .25s cubic-bezier(.694,.0482,.335,1);animation-fill-mode:forwards;opacity:0}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{bottom:0;display:flex;left:0;overflow-x:auto;overflow-y:hidden;position:absolute;right:0;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;top:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{height:16px;width:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:#0000}.canvasPageManager .canvasPageManager__addPage{animation:buttonPop .25s cubic-bezier(.694,.0482,.335,1);animation-fill-mode:forwards;background:#7dded8;color:#fff;opacity:0;width:56px}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page-isActive,.canvasPageManager .canvasPageManager__page:focus{background-color:#00000080;outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54b399}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page:hover{text-decoration:none}.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview{box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a}.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls{opacity:1;visibility:visible}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a;outline:2px solid #343741;outline-color:#98a2b3}.canvasPageManager .canvasPageManager__pageNumber{color:#98a2b3}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 .7px 1.4px rgba(0,0,0,.175),0 1.9px 4px rgba(0,0,0,.125),0 4.5px 10px rgba(0,0,0,.125);color:#dfe5ef;overflow:hidden;position:relative}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{background:#ffffff80;border-radius:6px;opacity:0;position:absolute;right:8px;top:8px;transition:opacity .15s cubic-bezier(.694,.0482,.335,1);transition-delay:.25s;visibility:hidden}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}to{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center}.canvasShapePreview{height:40px;width:40px}.canvasShapePreview svg{height:100%;width:100%}.canvasShapePicker{width:192px}.canvasSidebar{bottom:0;max-height:100vh;overflow-x:hidden;overflow-y:auto;position:absolute;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;top:0;width:100%}.canvasSidebar::-webkit-scrollbar{height:16px;width:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:#0000}.canvasSidebar__pop{animation:sidebarPop .15s cubic-bezier(.694,.0482,.335,1)}.canvasSidebarFlyout{min-width:350px;width:350px}.canvasSidebar__elementButtons{background:#1a1a20;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #343741;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable{width:100%}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:1px}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{background:#25262e;margin:0 -12px;padding:12px;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:#0000}.canvasSidebar__accordion:after,.canvasSidebar__accordion:before{background:#343741;content:"";height:1px;left:0;position:absolute;width:100%}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordion.filtersSidebar__accordion{margin:auto}.canvasSidebar__accordionContent{padding-left:28px;padding-top:16px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}to{opacity:1}}.canvasLayout__sidebarHeader{padding:14px 8px}.canvasLayout__sidebarHeaderWorkpad{padding:6px 0}.canvasToolbar{position:relative}.canvasTray__toggle{background-color:#16171c;border-radius:6px 6px 0 0;left:50%;margin:0;position:absolute;top:-20px}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{box-shadow:0 -2px 1px #ffffff1a;padding:4px 12px}.canvasToolbar__home{height:100%;padding:12px 0 12px 24px}.canvasToolbar__controls{height:100%;padding:12px}.canvasToolbar__container{background-color:#1a1a20;height:64px;position:relative;width:100%;z-index:200}.canvasTray{box-shadow:0 0 .8px #00000026,0 0 2px #0000001a,0 0 5px #0000001a,0 0 17px rgba(0,0,0,.075);flex-direction:column}.canvasTray__panel{background-color:#16171c;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{margin:auto;padding:16px}.canvasGrid{background-image:linear-gradient(90deg,#535966 1px,#0000 0),linear-gradient(180deg,#535966 1px,#0000 0);background-size:50px 50px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{overflow-x:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{height:16px;width:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:#0000}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasPage{background-color:#1d1e24;box-shadow:0 0 .8px #00000026,0 0 2px #0000001a,0 0 5px #0000001a,0 0 17px rgba(0,0,0,.075);position:absolute;top:0;transform-style:preserve-3d!important;z-index:auto}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{opacity:0;visibility:hidden}.canvasEditVar__typeOption{align-items:center;display:flex}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}.canvasVarConfig__container{position:relative;width:100%}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:initial}.canvasVarConfig__list tbody tr td,.canvasVarConfig__list thead tr td,.canvasVarConfig__list thead tr th{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr:hover{background-color:initial}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{align-content:stretch;display:flex;flex-direction:row;position:relative;width:calc(200% + 48px)}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{flex-shrink:0;height:100%;width:50%}.canvasVarConfig__listView{flex-shrink:0;width:50%}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn{animation-name:"fadeIn"}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.fadeOut{animation-name:"fadeOut"}@keyframes rotateIn{0%{opacity:0;transform:rotate(45deg);transform-origin:left bottom}to{opacity:1;transform:translateZ(0);transform-origin:left bottom}}.rotateIn{animation-name:"rotateIn"}@keyframes rotateOut{0%{opacity:1;transform-origin:left bottom}to{opacity:0;transform:rotate(-45deg);transform-origin:left bottom}}.rotateOut{animation-name:"rotateOut"}@keyframes slideIn{0%{transform:translate3d(100%,0,0);visibility:visible}to{transform:translateZ(0)}}.slideIn{animation-name:"slideIn"}@keyframes slideOut{0%{transform:translateZ(0)}to{transform:translate3d(-100%,0,0);visibility:hidden}}.slideOut{animation-name:"slideOut"}@keyframes zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}.zoomIn{animation-name:"zoomIn"}@keyframes zoomOut{0%{opacity:1}50%{opacity:0;transform:scale3d(.3,.3,.3)}to{opacity:0}}.zoomOut{animation-name:"zoomOut"}.canvasAdvancedFilter{font-size:inherit;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#1d1e24;border:1px solid #343741;border-radius:6px;font-family:monospace;font-size:inherit;line-height:19px;padding:4px 16px;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{background-color:#1d1e24;border:1px solid #343741;border-radius:6px;font-size:inherit;padding:4px 8px;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#25262e}.canvasDropdownFilter{position:relative}.canvasEmbeddable .embPanel{background:none;border:none;border-style:none!important}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:6px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#dfe5ef}.legendColorBox>div>div{border-radius:16px}.canvasTimeFilter .euiSuperDatePicker__flexWrapper{width:100%}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall,.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall>.euiFlexItem{margin:0}.canvasArgImage .canvasArgImage--preview{border:1px solid #343741;max-height:100px;overflow:hidden}',""]),e.exports=t},function(e,t,a){var n=a(121),r=a(405);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,a){(t=a(122)(!1)).push([e.i,'.canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover,.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreenWrapper{min-width:100px}@media only screen and (min-width:768px) and (max-width:991px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}@media only screen and (min-width:992px) and (max-width:1199px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}@media only screen and (min-width:1200px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}.canvas.canvasContainer,.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{background-color:#fafbfd;flex-direction:column}.canvasContainer--loading{left:50%;position:fixed;text-align:center;top:50%;transform:translateY(-50%)}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg,#d3dae6 25%,#0000 0),linear-gradient(-45deg,#d3dae6 25%,#0000 0),linear-gradient(45deg,#0000 75%,#d3dae6 0),linear-gradient(-45deg,#0000 75%,#d3dae6 0);background-size:8px 8px;position:relative}.canvasTextArea__code{font-family:Roboto Mono,Consolas,Menlo,Courier,monospace;font-size:14px;max-width:100%;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;width:100%}.canvasTextArea__code::-webkit-scrollbar{height:16px;width:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:#0000}.canvasContextMenu--topBorder{border-top:1px solid #d3dae6}#canvas-app{overflow-y:hidden}#canvas-app .window-error{background-color:#bd271e;bottom:10px;color:#fff;display:block;max-width:500px;padding:10px;position:absolute;right:10px;z-index:2000}#canvas-app .window-error a{color:#fff;font-weight:700}.canvasHomeApp,.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalBody,.canvasHomeApp .canvasHomeApp__modalHeader{width:auto}@media only screen and (max-width:574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width:575px) and (max-width:767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{background:#fafbfd;display:flex;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{align-items:stretch;display:flex;flex-grow:1}.canvasLayout__stage{display:flex;flex-basis:auto;flex-direction:column;flex-grow:1}.canvasLayout__stageHeader{background:#f5f7fa;border-bottom:1px solid #d3dae6;flex-basis:auto;flex-grow:0;font-size:14px;padding:8px 16px;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-basis:auto;flex-grow:1;position:relative}.canvasLayout__stageContentOverflow{align-items:center;bottom:0;display:flex;left:0;overflow:scroll;position:absolute;right:0;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;top:0}.canvasLayout__stageContentOverflow::-webkit-scrollbar{height:16px;width:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:#0000}.canvasLayout__sidebar{background:#f5f7fa;border-left:1px solid #d3dae6;display:flex;flex-basis:auto;flex-grow:0;position:relative;width:350px}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__sidebar .euiPanel.euiSplitPanel__inner{margin-bottom:0}.canvasLayout__footer{background-color:#fafbfd;flex-basis:auto;flex-grow:0;font-size:14px;width:100%;z-index:6000}.canvasExport .canvasPage{box-shadow:none;overflow:hidden;position:relative}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #d3dae6}.canvasArg__add:hover{background-color:#f5f7fa}.canvasArg__add:hover label{color:#343741}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{max-height:500px;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;width:250px}.canvasArg__addPopover::-webkit-scrollbar{height:16px;width:16px}.canvasArg__addPopover::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasArg__addPopover::-webkit-scrollbar-corner,.canvasArg__addPopover::-webkit-scrollbar-track{background-color:#0000}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:6px}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width:574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{padding-bottom:16px;width:100%}}@media only screen and (min-width:575px) and (max-width:767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{padding-bottom:16px;width:100%}}.canvasAssetManager .canvasAssetManager__meterWrapper{align-items:center;flex-grow:0;min-width:40%}@media only screen and (max-width:574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width:575px) and (max-width:767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{margin:32px auto 0;max-width:400px}.canvasAsset{overflow:hidden;text-align:center}.canvasAsset .canvasAsset__thumb{font-size:0;height:164px;margin:-8px -8px 0}.canvasAsset .canvasAsset__img{align-items:center;display:flex;height:100%;justify-content:center}.canvasAsset .canvasAsset__img img{max-height:164px;max-width:100%;width:auto}.canvasAssetPicker{max-height:120px;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.canvasAssetPicker::-webkit-scrollbar{height:16px;width:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:#0000}.canvasAssetPicker .canvasAssetPicker__link{height:100%;position:relative;text-align:center;width:100%}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:4px solid #0077cc1a}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;right:4px;top:4px}.canvasAssetPicker .euiImage{height:40px;width:40px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;height:32px;position:relative;width:32px}.canvasColorDot .canvasColorDot__background{border-radius:6px;height:32px;left:0;position:absolute;top:0;width:32px}.canvasColorDot .canvasColorDot__foreground{align-items:center;border:1px solid #d3dae6;border-radius:6px;display:flex;height:32px;justify-content:center;left:0;position:absolute;top:0;width:32px}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#69707d}.canvasDataSource{background-color:#fff;border-radius:1px solid #d3dae6;color:#343741;margin:8px;padding:0 8px}.canvasDataSource__list,.canvasDataSource__section{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{color:#1a1c21;font-size:16px;font-size:1.14286rem;font-weight:700;line-height:1.71429rem;line-height:40px;overflow-wrap:break-word!important;word-break:break-word}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0!important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#00bfb3}.canvasDatasourcePreview{height:100%;max-height:60vh;max-width:1000px}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 48px)}.canvasDataTable{display:flex;flex-direction:column;height:100%;justify-content:space-between;width:100%}.canvasDataTable .canvasDataTable__tableWrapper{height:100%;overflow:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;width:100%}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{height:16px;width:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:#0000}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:#0000}.canvasDataTable .canvasDataTable__footer{border-top:1px solid #d3dae6;display:flex;justify-content:space-around;padding:8px;width:100%}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__td,.canvasDataTable .canvasDataTable__th{border-bottom:1px solid #d3dae6;padding:8px 4px}.canvasDataTable .canvasDataTable__th{font-weight:700;white-space:nowrap}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:focus .canvasElementCard__controls,.canvasElementCard__wrapper:hover .canvasElementCard__controls{opacity:1;visibility:visible}.canvasElementCard__wrapper .canvasElementCard__controls{background:#ffffff80;border-radius:6px;opacity:0;position:absolute;right:8px;top:8px;transition:opacity .15s cubic-bezier(.694,.0482,.335,1);transition-delay:.25s;visibility:hidden}.canvasElementCard .euiCard__top{height:85px;margin:-16px -16px 0;text-align:center;width:calc(100% + 32px)}.canvasElementCard .euiCard__image{left:0;max-height:100%;max-width:100%;top:0;width:auto}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{overflow:hidden}.canvasElement,.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{flex-grow:1;height:256px;padding-top:16px}.canvasExpression--fullSize{bottom:0;display:flex;flex-direction:column;left:0;position:fixed;right:0;top:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{display:flex;flex-direction:column;flex-grow:1}.canvasExpression--fullSize .canvasExpressionInput__editor{bottom:57px;height:auto;left:0;position:absolute;right:0;top:0}.canvasExpression--fullSize .canvasExpressionInput__inner{display:flex;flex-grow:1}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{background-color:#fff;border-top:1px solid #d3dae6;padding:12px 16px}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0!important}body.canvas-isFullscreen #globalBannerList,body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasGrid,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__stageHeader{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{bottom:auto;display:block;left:auto;overflow:visible;position:static;right:auto;top:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{margin:0;padding:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__cols,body.canvas-isFullscreen .canvasLayout__rows{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{background:none;display:flex}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}body.canvas-isFullscreen .canvasContainer>.euiCallOut{display:none}.canvasFunctionForm>.canvasLoading{font-size:20px;text-align:center}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{border-left:1px dashed #d3dae6;border-top:1px dashed #d3dae6;height:100%;pointer-events:none;position:absolute;top:0;width:100%}.canvasBorderResizeHandle{background-color:#fff;border:1px solid #69707d;box-shadow:0 .8px .8px #0000000a,0 2.3px 2px #00000008;display:block;height:8px;margin-left:-4px;margin-top:-4px;width:8px}.canvasBorderResizeHandle,.canvasDragBoxAnnotation{position:absolute;transform-origin:center center;transform-style:preserve-3d}.canvasDragBoxAnnotation{background:none;outline:1px dashed #69707d;pointer-events:none}.canvasHoverAnnotation{background:none;outline:1px solid #54b399;pointer-events:none}.canvasHoverAnnotation,.canvasRotationHandle{position:absolute;transform-origin:center center;transform-style:preserve-3d}.canvasRotationHandle{border-left:1px dashed #d3dae6;border-top:1px dashed #d3dae6;display:block;height:24px;margin-left:-1px;margin-top:-12px;width:0}.canvasRotationHandle__handle{background-color:#98a2b3;border-radius:50%;display:block;height:9px;margin-left:-5px;margin-top:-6px;width:9px}.canvasRotationHandle__handle,.tooltipAnnotation{position:absolute;transform-origin:center center;transform-style:preserve-3d}.tooltipAnnotation{background-color:#404040;border-radius:6px;box-shadow:0 1px 5px #0000001a,0 3.6px 13px #00000012,0 8.4px 23px #0000000f,0 23px 35px #0000000d;color:#fff;max-width:256px;outline:none;overflow-wrap:break-word;padding:8px;pointer-events:none;z-index:9000}.tooltipAnnotation .euiHorizontalRule{background-color:#595959}.canvasLoading{align-items:center;color:#d3dae6;display:flex}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__addPage,.canvasPageManager .canvasPageManager__pages{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop .25s cubic-bezier(.694,.0482,.335,1);animation-fill-mode:forwards;opacity:0}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{bottom:0;display:flex;left:0;overflow-x:auto;overflow-y:hidden;position:absolute;right:0;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;top:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{height:16px;width:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:#0000}.canvasPageManager .canvasPageManager__addPage{animation:buttonPop .25s cubic-bezier(.694,.0482,.335,1);animation-fill-mode:forwards;background:#00bfb3;color:#fff;opacity:0;width:56px}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page-isActive,.canvasPageManager .canvasPageManager__page:focus{background-color:#8fa5c780;outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54b399}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page:hover{text-decoration:none}.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview{box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a}.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls{opacity:1;visibility:visible}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a;outline:2px solid #d3dae6;outline-color:#69707d}.canvasPageManager .canvasPageManager__pageNumber{color:#69707d}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 .7px 1.4px #00000012,0 1.9px 4px #0000000d,0 4.5px 10px #0000000d;color:#343741;overflow:hidden;position:relative}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{background:#ffffff80;border-radius:6px;opacity:0;position:absolute;right:8px;top:8px;transition:opacity .15s cubic-bezier(.694,.0482,.335,1);transition-delay:.25s;visibility:hidden}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}to{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center}.canvasShapePreview{height:40px;width:40px}.canvasShapePreview svg{height:100%;width:100%}.canvasShapePicker{width:192px}.canvasSidebar{bottom:0;max-height:100vh;overflow-x:hidden;overflow-y:auto;position:absolute;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;top:0;width:100%}.canvasSidebar::-webkit-scrollbar{height:16px;width:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:#0000}.canvasSidebar__pop{animation:sidebarPop .15s cubic-bezier(.694,.0482,.335,1)}.canvasSidebarFlyout{min-width:350px;width:350px}.canvasSidebar__elementButtons{background:#e4e9f2;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #d3dae6;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable{width:100%}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:1px}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{background:#f5f7fa;margin:0 -12px;padding:12px;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:#0000}.canvasSidebar__accordion:after,.canvasSidebar__accordion:before{background:#d3dae6;content:"";height:1px;left:0;position:absolute;width:100%}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordion.filtersSidebar__accordion{margin:auto}.canvasSidebar__accordionContent{padding-left:28px;padding-top:16px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}to{opacity:1}}.canvasLayout__sidebarHeader{padding:14px 8px}.canvasLayout__sidebarHeaderWorkpad{padding:6px 0}.canvasToolbar{position:relative}.canvasTray__toggle{background-color:#fbfcfd;border-radius:6px 6px 0 0;left:50%;margin:0;position:absolute;top:-20px}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{box-shadow:0 -2px 1px #0000001a;padding:4px 12px}.canvasToolbar__home{height:100%;padding:12px 0 12px 24px}.canvasToolbar__controls{height:100%;padding:12px}.canvasToolbar__container{background-color:#e4e9f2;height:64px;position:relative;width:100%;z-index:200}.canvasTray{box-shadow:0 0 .8px #0000000f,0 0 2px #0000000a,0 0 5px #0000000a,0 0 17px #00000008;flex-direction:column}.canvasTray__panel{background-color:#fbfcfd;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{margin:auto;padding:16px}.canvasGrid{background-image:linear-gradient(90deg,#98a2b3 1px,#0000 0),linear-gradient(180deg,#98a2b3 1px,#0000 0);background-size:50px 50px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{overflow-x:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{height:16px;width:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:#0000}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasPage{background-color:#fff;box-shadow:0 0 .8px #0000000f,0 0 2px #0000000a,0 0 5px #0000000a,0 0 17px #00000008;position:absolute;top:0;transform-style:preserve-3d!important;z-index:auto}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{opacity:0;visibility:hidden}.canvasEditVar__typeOption{align-items:center;display:flex}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}.canvasVarConfig__container{position:relative;width:100%}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:initial}.canvasVarConfig__list tbody tr td,.canvasVarConfig__list thead tr td,.canvasVarConfig__list thead tr th{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr:hover{background-color:initial}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{align-content:stretch;display:flex;flex-direction:row;position:relative;width:calc(200% + 48px)}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{flex-shrink:0;height:100%;width:50%}.canvasVarConfig__listView{flex-shrink:0;width:50%}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn{animation-name:"fadeIn"}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.fadeOut{animation-name:"fadeOut"}@keyframes rotateIn{0%{opacity:0;transform:rotate(45deg);transform-origin:left bottom}to{opacity:1;transform:translateZ(0);transform-origin:left bottom}}.rotateIn{animation-name:"rotateIn"}@keyframes rotateOut{0%{opacity:1;transform-origin:left bottom}to{opacity:0;transform:rotate(-45deg);transform-origin:left bottom}}.rotateOut{animation-name:"rotateOut"}@keyframes slideIn{0%{transform:translate3d(100%,0,0);visibility:visible}to{transform:translateZ(0)}}.slideIn{animation-name:"slideIn"}@keyframes slideOut{0%{transform:translateZ(0)}to{transform:translate3d(-100%,0,0);visibility:hidden}}.slideOut{animation-name:"slideOut"}@keyframes zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}.zoomIn{animation-name:"zoomIn"}@keyframes zoomOut{0%{opacity:1}50%{opacity:0;transform:scale3d(.3,.3,.3)}to{opacity:0}}.zoomOut{animation-name:"zoomOut"}.canvasAdvancedFilter{font-size:inherit;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#fff;border:1px solid #d3dae6;border-radius:6px;font-family:monospace;font-size:inherit;line-height:19px;padding:4px 16px;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{background-color:#fff;border:1px solid #d3dae6;border-radius:6px;font-size:inherit;padding:4px 8px;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#f5f7fa}.canvasDropdownFilter{position:relative}.canvasEmbeddable .embPanel{background:none;border:none;border-style:none!important}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:6px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#343741}.legendColorBox>div>div{border-radius:16px}.canvasTimeFilter .euiSuperDatePicker__flexWrapper{width:100%}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall,.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall>.euiFlexItem{margin:0}.canvasArgImage .canvasArgImage--preview{border:1px solid #d3dae6;max-height:100px;overflow:hidden}',""]),e.exports=t},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return iu})),a.d(t,"initializeCanvas",(function(){return cu})),a.d(t,"teardownCanvas",(function(){return lu}));var n=a(16),r=a.n(n),s=a(22),o=a.n(s),i=a(25),c=a(3),l=a(59),u=a(19),d=a(23),p=a(1),b=a.n(p),m=a(73),g=a.n(m),f=a(60),h=a(94),v=a(97);const x=v.a.getShortcutHelp(),j=v.a.getNamespaceDisplayNames(),y=(e,{modifiers:t=[],help:a})=>{Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);let n=[...e];return t.includes("shift")&&(n=n.map((e=>`shift+${e}`)),e=e.map((e=>`shift+${e}`))),(t.includes("alt")||t.includes("option"))&&(n=n.map((e=>`option+${e}`)),e=e.map((e=>`alt+${e}`))),(t.includes("ctrl")||t.includes("command"))&&(n=n.map((e=>`command+${e}`)),e=e.map((e=>`ctrl+${e}`))),{osx:n,windows:e,linux:e,other:e,help:a}},O=y("r",{modifiers:"alt",help:x.REFRESH}),_=y("[",{modifiers:"alt",help:x.PREV}),w=y("]",{modifiers:"alt",help:x.NEXT}),k=y(["f","p"],{modifiers:"alt",help:x.FULLSCREEN}),E={ELEMENT:{displayName:j.ELEMENT,CUT:y("x",{modifiers:"ctrl",help:x.CUT}),COPY:y("c",{modifiers:"ctrl",help:x.COPY}),PASTE:y("v",{modifiers:"ctrl",help:x.PASTE}),CLONE:y("d",{modifiers:"ctrl",help:x.CLONE}),DELETE:y(["del","backspace"],{help:x.DELETE}),BRING_FORWARD:y("up",{modifiers:"ctrl",help:x.BRING_TO_FRONT}),BRING_TO_FRONT:y("up",{modifiers:["ctrl","shift"],help:x.BRING_FORWARD}),SEND_BACKWARD:y("down",{modifiers:"ctrl",help:x.SEND_BACKWARD}),SEND_TO_BACK:y("down",{modifiers:["ctrl","shift"],help:x.SEND_TO_BACK}),GROUP:y("g",{help:x.GROUP}),UNGROUP:y("u",{help:x.UNGROUP}),SHIFT_UP:y("up",{help:x.SHIFT_UP}),SHIFT_DOWN:y("down",{help:x.SHIFT_DOWN}),SHIFT_LEFT:y("left",{help:x.SHIFT_LEFT}),SHIFT_RIGHT:y("right",{help:x.SHIFT_RIGHT}),NUDGE_UP:y("up",{modifiers:["shift"],help:x.NUDGE_UP}),NUDGE_DOWN:y("down",{modifiers:["shift"],help:x.NUDGE_DOWN}),NUDGE_LEFT:y("left",{modifiers:["shift"],help:x.NUDGE_LEFT}),NUDGE_RIGHT:y("right",{modifiers:["shift"],help:x.NUDGE_RIGHT})},EXPRESSION:{displayName:j.EXPRESSION,RUN:y("enter",{modifiers:"ctrl",help:x.RUN})},EDITOR:{displayName:j.EDITOR,MULTISELECT:y("click",{modifiers:"shift",help:x.MULTISELECT}),RESIZE_FROM_CENTER:y("drag",{modifiers:"alt",help:x.RESIZE_FROM_CENTER}),IGNORE_SNAP:y("drag",{modifiers:"ctrl",help:x.IGNORE_SNAP}),SELECT_BEHIND:y("click",{modifiers:"ctrl",help:x.SELECT_BEHIND}),UNDO:y("z",{modifiers:"ctrl",help:x.UNDO}),REDO:y("z",{modifiers:["ctrl","shift"],help:x.REDO}),PREV:_,NEXT:w,EDITING:y("e",{modifiers:"alt",help:x.EDITING}),GRID:y("g",{modifiers:"alt",help:x.GRID}),REFRESH:O,ZOOM_IN:y("plus",{modifiers:["ctrl","alt"],help:x.ZOOM_IN}),ZOOM_OUT:y("minus",{modifiers:["ctrl","alt"],help:x.ZOOM_OUT}),ZOOM_RESET:y("[",{modifiers:["ctrl","alt"],help:x.ZOOM_RESET}),FULLSCREEN:k},PRESENTATION:{displayName:j.PRESENTATION,FULLSCREEN:k,FULLSCREEN_EXIT:y("esc",{help:x.FULLSCREEN_EXIT}),PREV:Object(u.mapValues)(_,((e,t)=>"help"===t?e:e.concat(["backspace","left"]))),NEXT:Object(u.mapValues)(w,((e,t)=>"help"===t?e:e.concat(["space","right"]))),REFRESH:O,PAGE_CYCLE_TOGGLE:y("p",{help:x.PAGE_CYCLE_TOGGLE})}},S=new h.ShortcutManager(E);var C=a(21),M=a(380),P=a(104);const T=e=>({text:"Canvas",href:e.createHref({pathname:"/"}),onClick:t=>{t.defaultPrevented||(e=>!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey))(t)||!(e=>0===e.button)(t)||(e=>{const t=e.target.getAttribute("target");return t&&"_self"!==t})(t)||(t.preventDefault(),e.push("/"))}}),N=({name:e})=>({text:e||Object(P.a)()});var A=a(75),I=a(20),F=a(61),D=a.n(F),L=a(74),R=a(89),z=a(18),B=a(17);const H=({canUserWrite:e,disabled:t,...a})=>Object(B.jsx)(z.EuiButton,D()({},a,{iconType:"plusInCircleFilled",fill:!0,disabled:!e&&!t,"data-test-subj":"create-workpad-button"}),W.getWorkpadCreateButtonLabel()),W={getWorkpadCreateButtonLabel:()=>c.i18n.translate("xpack.canvas.workpadCreate.createButtonLabel",{defaultMessage:"Create workpad"})},V=e=>{const t=Object(R.c)(),{canUserWrite:a}=Object(l.useSelector)((e=>({canUserWrite:Object(L.a)(e)})));return Object(B.jsx)(H,D()({},e,{onClick:async()=>{await t()},canUserWrite:a}))},G=r.a.lazy((()=>a.e(14).then(a.bind(null,461)))),U=r.a.lazy((()=>a.e(11).then(a.bind(null,459)))),K=Object(I.withSuspense)(G),q=Object(I.withSuspense)(U),Z=({activeTab:e="workpads"})=>{const[t,a]=Object(n.useState)(e);return Object(B.jsx)(d.KibanaPageTemplate,{pageHeader:{pageTitle:"Canvas",rightSideItems:[Object(B.jsx)(V,null)],tabs:[{label:X.getMyWorkpadsTabLabel(),id:"myWorkpads",isSelected:"workpads"===t,onClick:()=>a("workpads")},{label:X.getWorkpadTemplatesTabLabel(),id:"workpadTemplates","data-test-subj":"workpadTemplates",isSelected:"templates"===t,onClick:()=>a("templates")}]}},"workpads"===t?Object(B.jsx)(q,null):Object(B.jsx)(K,null))},X={getMyWorkpadsTabLabel:()=>c.i18n.translate("xpack.canvas.home.myWorkpadsTabLabel",{defaultMessage:"My workpads"}),getWorkpadTemplatesTabLabel:()=>c.i18n.translate("xpack.canvas.home.workpadTemplatesTabLabel",{defaultMessage:"Templates",description:"The label for the tab that displays a list of designed workpad templates."})},Y=()=>{const[e,t]=Object(n.useState)(!1),a=Object(l.useDispatch)();return Object(n.useEffect)((()=>{e||(a(Object(A.e)()),t(!0))}),[a,e,t]),Object(B.jsx)(Z,null)},J=({onLoad:e=(()=>{})})=>(e(),Object(P.b)("Canvas"),Object(B.jsx)(Y,null)),Q=()=>{const{setBreadcrumbs:e}=Object(f.usePlatformService)(),t=Object(l.useDispatch)(),a=Object(C.useHistory)();return Object(n.useEffect)((()=>{e([T(a)])}),[e,a]),Object(B.jsx)(J,{onLoad:()=>t(Object(A.e)())})};var ee=a(62),te=a(57),ae=a(79),ne=a.n(ae),re=a(65),se=a(83),oe=a(0),ie=a(7);const ce=e=>{Object(ie.a)().set(oe.y,JSON.stringify(e))},le=()=>Object(ie.a)().get(oe.y);var ue=a(147),de=a(77);const pe=e=>e.id,be={cloneNodes:({insertNodes:e,pageId:t,selectToplevelNodes:a,selectedNodes:n})=>()=>{const r=n&&Object(ue.a)(n);r&&(e(r,t),a(r))},deleteNodes:({pageId:e,removeNodes:t,selectedNodes:a})=>()=>{a.length&&t(a.map(pe),e)},createCustomElement:({selectedNodes:e})=>(t="",a="",n="")=>{const r=f.pluginServices.getServices().notify,s=f.pluginServices.getServices().customElement;if(e.length){const o=JSON.stringify({selectedNodes:e}),i={id:Object(de.a)("custom-element"),name:Object(u.camelCase)(t),displayName:t,help:a,image:n,content:o};s.create(i).then((()=>r.success(`Custom element '${i.displayName||i.id}' was saved`,{"data-test-subj":"canvasCustomElementCreate-success"}))).catch((e=>r.warning(e,{title:`Custom element '${i.displayName||i.id}' was not saved`})))}}},me=Object.assign({},...["alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom","distributeHorizontally","distributeVertically"].map((e=>({[e]:({commit:t})=>()=>{t("actionEvent",{event:e})}})))),ge={groupNodes:({commit:e})=>()=>{e("actionEvent",{event:"group"})},ungroupNodes:({commit:e})=>()=>{e("actionEvent",{event:"ungroup"})}},fe={cutNodes:({pageId:e,removeNodes:t,selectedNodes:a})=>()=>{const n=f.pluginServices.getServices().notify;a.length&&(ce({selectedNodes:a}),t(a.map(pe),e),n.success("Cut element to clipboard"))},copyNodes:({selectedNodes:e})=>()=>{const t=f.pluginServices.getServices().notify;e.length&&(ce({selectedNodes:e}),t.success("Copied element to clipboard"))},pasteNodes:({insertNodes:e,pageId:t,selectToplevelNodes:a})=>()=>{const{selectedNodes:n=[]}=JSON.parse(le())||{},r=n&&Object(ue.a)(n);r&&(e(r,t),a(r))}},he={bringToFront:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,1/0)},bringForward:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,1)},sendBackward:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,-1)},sendToBack:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,-1/0)}},ve={shiftUp:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top-=oe.t,e))))},shiftDown:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top+=oe.t,e))))},shiftLeft:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left-=oe.t,e))))},shiftRight:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left+=oe.t,e))))},nudgeUp:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top-=oe.s,e))))},nudgeDown:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top+=oe.s,e))))},nudgeLeft:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left-=oe.s,e))))},nudgeRight:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left+=oe.s,e))))}};var xe=a(68),je=a(78);const ye=[NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN],Oe=[0,0,0,1],_e=[1,0,0,1],we=[0,1,0,1],ke=[-1,1,0,1],Ee=[1,1,0,1],Se=[-1,-1,0,1],Ce=[1,-1,0,1],Me=(e,t,a)=>[1,0,0,0,0,1,0,0,0,0,1,0,e,t,a,1],Pe=(e,t,a)=>[e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1],Te=e=>{const t=Math.sin(e),a=Math.cos(e);return[a,-t,0,0,t,a,0,0,0,0,1,0,0,0,0,1]},Ne=(e,...t)=>t.reduce(((e,t)=>(([e,t,a,n,r,s,o,i,c,l,u,d,p,b,m,g],[f,h,v,x,j,y,O,_,w,k,E,S,C,M,P,T])=>[e*f+r*h+c*v+p*x,t*f+s*h+l*v+b*x,a*f+o*h+u*v+m*x,n*f+i*h+d*v+g*x,e*j+r*y+c*O+p*_,t*j+s*y+l*O+b*_,a*j+o*y+u*O+m*_,n*j+i*y+d*O+g*_,e*w+r*k+c*E+p*S,t*w+s*k+l*E+b*S,a*w+o*k+u*E+m*S,n*w+i*k+d*E+g*S,e*C+r*M+c*P+p*T,t*C+s*M+l*P+b*T,a*C+o*M+u*P+m*T,n*C+i*M+d*P+g*T])(e,t)),e),Ae=([e,t,a,n,r,s,o,i,c,l,u,d,p,b,m,g],[f,h,v,x])=>[e*f+r*h+c*v+p*x,t*f+s*h+l*v+b*x,a*f+o*h+u*v+m*x,n*f+i*h+d*v+g*x],Ie=([e,t,a,n])=>1===n?[e,t,a,n]:[e/n,t/n,a/n,1],Fe=([e,t,a,n,r,s,o,i,c,l,u,d,p,b,m,g])=>{const f=[s*u*g-s*d*m-l*o*g+l*i*m+b*o*d-b*i*u,-t*u*g+t*d*m+l*a*g-l*n*m-b*a*d+b*n*u,t*o*g-t*i*m-s*a*g+s*n*m+b*a*i-b*n*o,-t*o*d+t*i*u+s*a*d-s*n*u-l*a*i+l*n*o,-r*u*g+r*d*m+c*o*g-c*i*m-p*o*d+p*i*u,e*u*g-e*d*m-c*a*g+c*n*m+p*a*d-p*n*u,-e*o*g+e*i*m+r*a*g-r*n*m-p*a*i+p*n*o,e*o*d-e*i*u-r*a*d+r*n*u+c*a*i-c*n*o,r*l*g-r*d*b-c*s*g+c*i*b+p*s*d-p*i*l,-e*l*g+e*d*b+c*t*g-c*n*b-p*t*d+p*n*l,e*s*g-e*i*b-r*t*g+r*n*b+p*t*i-p*n*s,-e*s*d+e*i*l+r*t*d-r*n*l-c*t*i+c*n*s,-r*l*m+r*u*b+c*s*m-c*o*b-p*s*u+p*o*l,e*l*m-e*u*b-c*t*m+c*a*b+p*t*u-p*a*l,-e*s*m+e*o*b+r*t*m-r*a*b-p*t*o+p*a*s,e*s*u-e*o*l-r*t*u+r*a*l+c*t*o-c*a*s],h=e*f[0]+t*f[4]+a*f[8]+n*f[12];if(0===h)return ye;{const e=1/h;for(let t=0;t<16;t++)f[t]*=e;return f}},De=e=>[1,0,0,0,0,1,0,0,0,0,1,0,e[12],e[13],e[14],1],Le=([e,t,a,n,r,s,o,i,c,l,u,d,p,b,m,g])=>[e,t,a,n,r,s,o,i,c,l,u,d,0,0,0,g],Re=e=>1===e.length?e[0]:e.slice(1).reduce(((e,t)=>Ne(e,t)),e[0]),ze=(e,t,a)=>Math.min(t,Math.max(e,a)),Be=e=>{const t=Math.acos(ze(-1,1,e[0]));return Math.asin(ze(-1,1,e[1]))>0?t:-t},He=[1,0,0,0,1,0,0,0,1],We=(e,t)=>[1,0,0,0,1,0,e,t,1],Ve=(e,...t)=>t.reduce(((e,t)=>(([e,t,a,n,r,s,o,i,c],[l,u,d,p,b,m,g,f,h])=>[e*l+n*u+o*d,t*l+r*u+i*d,a*l+s*u+c*d,e*p+n*b+o*m,t*p+r*b+i*m,a*p+s*b+c*m,e*g+n*f+o*h,t*g+r*f+i*h,a*g+s*f+c*h])(e,t)),e),Ge=([e,t,a],[n,r,s])=>[e*n,t*r,a*s],Ue=({transformMatrix:e,a:t,b:a},n,r)=>{const{inverseProjection:s,planeVector:o}=((e,t,a)=>{const n=Ie(Ae(e,Oe)),r=Ie(Ae(e,_e)),s=Ie(Ae(e,we)),o=r[0]-n[0],i=r[1]-n[1],c=s[0]-n[0],l=s[1]-n[1]||1e-11,u=l?r[2]-n[2]:0,d=l?s[2]-n[2]:0,p=Fe(e),b=1/(o-i/l*c),m=-b*c/l,g=-b*n[0]-m*n[1],f=-1/l,h=n[2]+u*g+d*f*(n[1]+g*i),v=b*(u+d*i*f),x=-d*f+m*(u+d*i*f);return{inverseProjection:p,planeVector:0===l?[t,a,n[2],1]:[v,x,h]}})(e,n,r),i=(([e,t,a],[n,r,s])=>e*n+t*r+a*s)(o,[n,r,1]),c=Ie(Ae(s,[n,r,i,1])),[l,u]=c;return{z:i,intersection:c,inside:Math.abs(l)<=t&&Math.abs(u)<=a}},$e=(e,t,a,n,r)=>((e,t,a)=>Ie(Ae(e,[t,a,0,1])))(a,n*e,r*t),Ke={},qe=[[-1,-1,315],[1,-1,45],[1,1,135],[-1,1,225],[0,-1,0],[1,0,90],[0,1,180],[-1,0,270]],Ze=[[[-1,-1],[0,-1]],[[0,-1],[1,-1]],[[1,-1],[1,0]],[[1,0],[1,1]],[[1,1],[0,1]],[[0,1],[-1,1]],[[-1,1],[-1,0]],[[-1,0],[-1,-1]]],Xe=[[-1,-1],[1,-1],[-1,1],[1,1]],Ye={left:-1,center:0,right:1},Je={top:-1,center:0,bottom:1},Qe={"-1":"left",0:"center",1:"right"},et={"-1":"top",0:"center",1:"bottom"},tt={0:"ns-resize",45:"nesw-resize",90:"ew-resize",135:"nwse-resize",180:"ns-resize",225:"nesw-resize",270:"ew-resize",315:"nwse-resize"},at=([[e,t],[a,n]],[r,s],[o,i])=>[[Math.min(e,r,o),Math.min(t,s,i)],[Math.max(a,r,o),Math.max(n,s,i)]],nt=(e,t)=>Xe.reduce(((t,a)=>{const n=Ie(Ae(e.transformMatrix,[e.a*a[0],e.b*a[1],0,1]));return at(t,n,n)}),t),rt={deltaX:0,deltaY:0,transform:null,cumulativeTransform:null},st=e=>t=>"annotation"===t.type?st(e)(e.find((e=>e.id===t.parent))):t,ot=e=>"annotation"===e.type?e.parent:e.id,it=(e,{a:t,b:a,baseAB:n},r)=>[Math.max(n?e-n[0]:e-t,r[0]),Math.max(n?e-n[1]:e-a,r[1])],ct=e=>({gesture:t,shape:a,directShape:n})=>{const r=t.cumulativeTransform;if(!a||!n)return{transforms:[],shapes:[]};const s=Ae(Ne(Fe(Le(a.localTransformMatrix)),r),Oe),o=[Ye[n.horizontalPosition],Je[n.verticalPosition],0],i=Ge(s,o),c=it(e.minimumElementSize,a,i);return{cumulativeTransforms:[],cumulativeSizes:[t.sizes||We(...c)],shapes:[a.id]}},lt=e=>({gesture:t,shape:a,directShape:n})=>{const r=t.cumulativeTransform;if(!a||!n)return{transforms:[],shapes:[]};const s=Le(a.localTransformMatrix),o=Fe(s),i=Ae(Ne(o,r),Oe),c=[Ye[n.horizontalPosition]/2,Je[n.verticalPosition]/2,0],l=Ge(i,c),u=it(e.minimumElementSize,a,l),d=Ae(Ne(s,Pe(Ye[n.horizontalPosition],Je[n.verticalPosition],1),Me(u[0],u[1],0)),Oe),p=t.sizes||We(...u);return{cumulativeTransforms:[Me(d[0],d[1],0)],cumulativeSizes:[p],shapes:[a.id]}},ut=(e,t)=>[{cumulativeTransforms:e,shapes:t.map((e=>"annotation"!==e.type&&e.id)).filter(se.d)}],dt=(e,t,a,n,r,s)=>{const o=a.map((t=>"annotation"===t.type&&t.subtype===e.rotationHandleName&&t.parent)).map((e=>e&&n.find((t=>t.id===e))));return Object(se.c)(o.map(((e,n)=>t.map((t=>({transform:t,shape:e,directShape:a[n],cursorPosition:r,alterSnapGesture:s})))))).map((e=>({shape:t,directShape:a,cursorPosition:{x:n,y:r},alterSnapGesture:s})=>{if(!t||!a)return{transforms:[],shapes:[]};const o=t.transformMatrix,i=Ae(o,Oe),c=Ae(Ne(o,a.localTransformMatrix),Oe),l=Math.atan2(i[1]-c[1],i[0]-c[0]),u=Math.atan2(i[1]-r,i[0]-n),d=Math.round(u/(Math.PI/12))*Math.PI/12,p=Math.sqrt(Math.pow(i[0]-n,2)+Math.pow(i[1]-r,2)),b=[Math.cos(d)*p,Math.sin(d)*p],m=Math.sqrt(Math.pow(b[0]-(i[0]-n),2)+Math.pow(b[1]-(i[1]-r),2)),g=-1!==s.indexOf("relax"),f=m<e.rotateSnapInPixels&&!g?d:u;return{transforms:[Te(l-f)],shapes:[t.id]}})(e))},pt=(e,t,a,n,r)=>{const s=a.map((t=>"annotation"===t.type&&t.subtype===e.resizeHandleName&&t.parent)).map((e=>e&&n.find((t=>t.id===e))));return Object(se.c)(s.map(((e,n)=>t.map((t=>({gesture:t,shape:e,directShape:a[n]})))))).map(r)},bt=e=>t=>{if(0!==t[12]||0!==t[13]){const a=Le(e),n=Fe(a);return De(Ne(n,t))}return t},mt=e=>e?0:1,gt=(e,t,a)=>{const n=mt(a);return 0===t?(e[0][n]+e[1][n])/2:e[(t+1)/2][n]},ft=(e,t)=>t.parent?ft(e,e.find((e=>e.id===t.parent))).concat([t]):[t],ht=e=>e.a+(e.snapResizeVector?e.snapResizeVector[0]:0),vt=e=>e.b+(e.snapResizeVector?e.snapResizeVector[1]:0),xt=(e,t)=>{if(!t.parent)return t.localTransformMatrix;const a=ft(e,t).map((e=>e.localTransformMatrix));return Re(a)},jt=(e,t)=>{const a=e=>e.snapDeltaMatrix?Ne(e.localTransformMatrix,e.snapDeltaMatrix):e.localTransformMatrix;if(!t.parent)return a(t);const n=ft(e,t).map(a);return Re(n)},yt=e=>"horizontal"===e.dimension,Ot=e=>"vertical"===e.dimension,_t=(e={distance:1/0},t)=>t.distance<e.distance?{constraint:t,distance:t.distance}:e,wt=(e,t)=>{const a=e.filter(t).reduce(_t,void 0);return a&&a.constraint},kt=(e,t,a,n,r)=>{const s=t.find((e=>n.id===e.id));if(!s)return!1;if("annotation"===s.type)return kt(e,t,a,t.find((e=>s.parent===e.id)),r);const o=vt(s),i=Me(0,-o,0),c=Me(0,-e.rotateAnnotationOffset,e.atopZ),l=Ne(i,c);return{id:e.rotationHandleName+"_"+r,type:"annotation",subtype:e.rotationHandleName,interactive:!0,parent:s.id,localTransformMatrix:l,a:e.rotationHandleSize,b:e.rotationHandleSize}};function Et(e,t,a,n){const r=t.find((e=>n.id===e.id)),s=r&&(r.subtype===e.resizeHandleName?t.find((e=>n.parent===e.id)):r);if(!r)return[];if(r.subtype===e.resizeHandleName)return r.interactive?St(e,{shapes:t,selectedShapes:[t.find((e=>n.parent===e.id))]}):[];if("annotation"===r.type)return Et(e,t,a,t.find((e=>r.parent===e.id)));const o=ht(s),i=vt(s),c=("group"!==s.type||e.groupResize&&((e,t,a)=>{const n=e.rotationEpsilon,r=2*Math.PI;function s(e){return a.filter((t=e,e=>e.parent===t.id)).every(o);var t}function o(e){return(e=>{const t=Be(e.localTransformMatrix)/r;return Math.abs(Math.round(t)-t)<n})(e)&&s(e)}return s(t)})(e,s,t.filter((e=>"annotation"!==e.type)))?qe:[]).map(((e,t,a,n)=>([r,s,o])=>{const i=Me(r*a,s*n,e.resizeAnnotationOffsetZ),c=Me(-r*e.resizeAnnotationOffset,-s*e.resizeAnnotationOffset,e.atopZ+10),l=Ne(i,c),u=Qe[r],d=et[s];return{id:[e.resizeHandleName,u,d,t.id].join("_"),type:"annotation",subtype:e.resizeHandleName,horizontalPosition:u,verticalPosition:d,cursorAngle:o,interactive:!0,parent:t.id,localTransformMatrix:l,backgroundColor:"rgb(0,255,0,1)",a:e.resizeAnnotationSize,b:e.resizeAnnotationSize}})(e,n,o,i)),l=Ze.map(((e,t,a,n)=>([[r,s],[o,i]])=>{const c=a*Object(se.e)(r,o),l=n*Object(se.e)(s,i),u=Me(c,l,e.atopZ-10),d=s===i,p=d?a*Math.abs(o-r):n*Math.abs(i-s),b=Math.max(0,p/2-e.resizeAnnotationConnectorOffset);return{id:[e.resizeConnectorName,Qe[r],et[s],Qe[o],et[i],t].join("_"),type:"annotation",subtype:e.resizeConnectorName,interactive:!0,parent:t.id,localTransformMatrix:u,backgroundColor:e.devColor,a:d?b:.5,b:d?.5:b}})(e,n,o,i));return[...c,...l]}function St(e,{shapes:t,selectedShapes:a}){const n=a;return Object(se.c)(n.map((n=>Et(e,t,a,n))).filter(se.d))}const Ct=e=>{const t={...e};return e.snapDeltaMatrix&&(t.localTransformMatrix=Ne(e.localTransformMatrix,e.snapDeltaMatrix),t.snapDeltaMatrix=null),e.snapResizeVector&&(t.a=ht(e),t.b=vt(e),t.snapResizeVector=null),t},Mt=(e,t,a)=>({shapes:t.filter((t=>!e.find((e=>t.id===e.id)))).map((a=>{const n=e.find((e=>e.id===a.parent));return n?{...a,parent:null,localTransformMatrix:Ne(t.find((e=>e.id===n.id)).localTransformMatrix,a.localTransformMatrix)}:a})),selectedShapes:a.filter((t=>!e.find((e=>e.id===t.id))))}),Pt=(e,t)=>{return t.filter((a=e,e=>!a.some((t=>e.parent===t.id))));var a},Tt=e=>{e.childBaseAB&&(e.childBaseAB=null,e.baseLocalTransformMatrix=null)},Nt=({a:e,b:t},a)=>{const n=1e-6,r=Math.max(e/a[0],n),s=Math.max(t/a[1],n);return Pe(r,s,1)},At=e=>t=>{const a=t.childBaseAB||[t.a,t.b],n=Pe(...a,1),r=Fe(n),s=t.baseLocalTransformMatrix||t.localTransformMatrix,o=Ne(s,n),i=Ne(e,o),c=e.map((e=>Math.abs(e))),l=Fe(c),u=Ae(Ne(c,n),[1,1,1,1]);t.localTransformMatrix=Ne(i,Ne(r,l)),t.a=u[0],t.b=u[1],t.childBaseAB=a,t.baseLocalTransformMatrix=s},It=(e,t)=>{const a={};for(const t of e)a[t.id]=t;const n={},r=e=>e.parent?r(a[e.parent])+1:0;for(const t of e)n[t.id]=r(t);const s={[t.id]:t},o=e.slice().sort(((e,t)=>n[e.id]-n[t.id]));for(const e of o){const t=s[e.parent];t&&(s[e.id]=e,i=t,Boolean(i.childBaseAB||i.baseAB)?At(Nt(t,t.childBaseAB||t.baseAB))(e):Tt(e))}var i;return o},Ft=(e,t)=>({shapes:e,selectedShapes:t}),Dt=(e,t,a,n,r,s,o)=>{const i=!t.depthSelect||!n||a.length&&"annotation"===a[0].type?0:(e.depthIndex+(e.down?0:1))%a.length;return{shapes:a.length?[a[i]]:[],uid:r,depthIndex:a.length?i:0,down:!0,boxHighlightedShapes:o}},Lt=(e,t,a,n,r,s,o)=>({shapes:a.length>0?Object(se.b)((e=>e.id),s,a.slice(0,1)):[],uid:r,depthIndex:0,down:!1,boxHighlightedShapes:o}),Rt=(e,t)=>a=>({...a,id:e+"_"+a.id,type:"annotation",subtype:e,interactive:!1,localTransformMatrix:Ne(a.localTransformMatrix,Me(0,0,t)),parent:a.parent}),zt={alignLeft:{type:"alignLeftAction",horizontal:!0,controlledAnchor:-1,controllingAnchor:-1},alignCenter:{type:"alignCenterAction",horizontal:!0,controlledAnchor:0,controllingAnchor:0},alignRight:{type:"alignRightAction",horizontal:!0,controlledAnchor:1,controllingAnchor:1},alignTop:{type:"alignTopAction",horizontal:!1,controlledAnchor:-1,controllingAnchor:-1},alignMiddle:{type:"alignMiddleAction",horizontal:!1,controlledAnchor:0,controllingAnchor:0},alignBottom:{type:"alignBottomAction",horizontal:!1,controlledAnchor:1,controllingAnchor:1}},Bt={distributeHorizontally:{type:"distributeHorizontallyAction",horizontal:!0},distributeVertically:{type:"distributeVerticallyAction",horizontal:!1}};var Ht=a(101);const Wt=e=>Object(Ht.a)(e)?{id:e,type:"group",subtype:"persistentGroup"}:{id:e,type:"rectangleElement",subtype:""},Vt=({top:e,left:t,width:a,height:n,angle:r},s)=>Ne(Me(t+a/2,e+n/2,s),Te(-r/180*Math.PI)),Gt=({id:e,position:t,filter:a},n)=>({...Wt(e),width:t.width,height:t.height,transformMatrix:Vt(t,n),filter:a}),Ut=({elements:e})=>({elements:e.map(Gt)}),$t=e=>({left:e.transformMatrix[12]-e.a,top:e.transformMatrix[13]-e.b,width:2*e.a,height:2*e.b,angle:Math.round(180*Be(e.transformMatrix)/Math.PI),parent:e.parent||null,type:"group"===e.type?"group":"element"}),Kt=(e,t,a)=>a.findIndex((t=>t.id===e.id))===t,qt=(e,t)=>a=>{const n=a.currentScene,r=Object(ee.r)(t),s=Object(ee.j)(t,r),o=n.shapes,i=o.filter((e=>"persistentGroup"===e.subtype)).filter(Kt),c=s.filter((e=>Object(Ht.a)(e.id))).filter(Kt);i.forEach((t=>{if(!c.find((e=>{if(!e.id)throw new Error("Element has no id");return e.id===t.id}))){const a={id:t.id,filter:void 0,expression:'shape fill="rgba(255,255,255,0)" | render',position:{...$t(t)}};e(Object(re.b)(r,a))}}));const l=c.filter((e=>!i.find((t=>e.id===t.id))||!s.find((t=>t.position.parent===e.id))));((e,t,a)=>{const n=((e,{shapes:t,gestureEnd:a},n)=>{const r=(e,t)=>e.id<t.id?-1:1,s=e=>"annotation"!==e.type&&"adHocGroup"!==e.subtype,o=n.filter(s).sort(r);return t.filter(s).sort(r).map(((e,t)=>{const n=o[t],r=n&&n.position;if(r&&a){const t={left:r.left,top:r.top,width:r.width,height:r.height,angle:Math.round(r.angle),type:r.type,parent:r.parent||null},a=$t(e);return 1/a.angle==-1/0&&(a.angle=0),Object(xe.shallowEqual)(t,a)?null:{position:a,elementId:e.id}}})).filter(se.d)})(0,t,a);n.length&&e(n)})((t=>e(Object(re.p)(t.map((e=>({...e,pageId:r})))))),n,s),l.length&&e(Object(re.k)(l.map((e=>e.id)),r));const u=n.selectedPrimaryShapes;Object(xe.shallowEqual)(u,t.transient.selectedToplevelNodes)||e(Object(je.a)(Object(se.c)(u.map((e=>e.startsWith("group")&&"adHocGroup"===(o.find((t=>t.id===e))||{}).subtype?o.filter((t=>"annotation"!==t.type&&t.parent===e)).map((e=>e.id)):[e])))))},Zt=e=>t=>{const a=t=>[t,...Object(se.c)(e.filter((e=>e.position.parent===t)).map((e=>a(e.id))))];return a(t)},Xt=()=>{const e=navigator.platform.toLowerCase();return e.indexOf("mac")>=0?"osx":e.indexOf("win")>=0?"windows":e.indexOf("linux")>=0?"linux":"other"},Yt=e=>{if(!e)return"";let t=e.toUpperCase();return t=t.replace(/command/i,"⌘"),t=t.replace(/option/i,"⌥"),t=t.replace(/left/i,"←"),t=t.replace(/right/i,"→"),t=t.replace(/up/i,"↑"),t=t.replace(/down/i,"↓"),t=t.replace(/plus/i,"+"),t=t.replace(/minus/i,"-"),t},Jt=Xt(),Qt=Object(xe.compose)(Object(xe.mapProps)((({namespace:e,action:t})=>{const a=E[e][t];if("string"==typeof a)return{shortcut:""};const n=a[Jt]||[];return{shortcut:Yt(n[0])}})))((({shortcut:e})=>Object(B.jsx)(z.EuiText,{size:"xs",textAlign:"center",color:"ghost"},e.replace(/\+/g," + ")))),ea=v.a.getShortcutHelp(),ta=({title:e,showLayerControls:t=!1,bringToFront:a,bringForward:n,sendBackward:r,sendToBack:s})=>Object(B.jsx)(z.EuiFlexGroup,{className:"canvasLayout__sidebarHeader",gutterSize:"none",alignItems:"center",justifyContent:"spaceBetween"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiTitle,{size:"xs"},Object(B.jsx)("h3",null,e))),t?Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{position:"bottom",content:Object(B.jsx)("span",null,ea.BRING_TO_FRONT,Object(B.jsx)(Qt,{namespace:"ELEMENT",action:"BRING_TO_FRONT"}))},Object(B.jsx)(z.EuiButtonIcon,{color:"text",iconType:"sortUp",onClick:a,"aria-label":c.i18n.translate("xpack.canvas.sidebarHeader.bringToFrontArialLabel",{defaultMessage:"Move element to top layer"})}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{position:"bottom",content:Object(B.jsx)("span",null,ea.BRING_FORWARD,Object(B.jsx)(Qt,{namespace:"ELEMENT",action:"BRING_FORWARD"}))},Object(B.jsx)(z.EuiButtonIcon,{color:"text",iconType:"arrowUp",onClick:n,"aria-label":c.i18n.translate("xpack.canvas.sidebarHeader.bringForwardArialLabel",{defaultMessage:"Move element up one layer"})}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{position:"bottom",content:Object(B.jsx)("span",null,ea.SEND_BACKWARD,Object(B.jsx)(Qt,{namespace:"ELEMENT",action:"SEND_BACKWARD"}))},Object(B.jsx)(z.EuiButtonIcon,{color:"text",iconType:"arrowDown",onClick:r,"aria-label":c.i18n.translate("xpack.canvas.sidebarHeader.sendBackwardArialLabel",{defaultMessage:"Move element down one layer"})}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{position:"bottom",content:Object(B.jsx)("span",null,ea.SEND_TO_BACK,Object(B.jsx)(Qt,{namespace:"ELEMENT",action:"SEND_TO_BACK"}))},Object(B.jsx)(z.EuiButtonIcon,{color:"text",iconType:"sortDown",onClick:s,"aria-label":c.i18n.translate("xpack.canvas.sidebarHeader.sendToBackArialLabel",{defaultMessage:"Move element to bottom layer"})}))))):null),aa=e=>{const t=Object(l.useSelector)((e=>Object(ee.r)(e))),a=Object(l.useSelector)((e=>((e,t)=>{const a=Object(ee.j)(e,t),n=Object(ee.t)(e).map((e=>a.find((t=>t.id===e)))).filter((e=>e)),r=Object(se.c)(n.map((e=>a.find((t=>t.id===(null==e?void 0:e.id)))?[null==e?void 0:e.id]:a.filter((t=>{var a;return(null===(a=t.position)||void 0===a?void 0:a.parent)===(null==e?void 0:e.id)})).map((e=>e.id)))));return Object(se.c)(r.map(Zt(a))).map((e=>a.find((t=>t.id===e))))})(e,t)),ne.a),n=Object(l.useDispatch)(),r={...e,pageId:t,selectedNodes:a,elementLayer:(e,t,a)=>{n(Object(re.d)({pageId:e,elementId:t,movement:a}))}},s=(o=he,i=r,Object.keys(o).reduce(((e,t)=>(e[t]=o[t](i),e)),{}));var o,i;return Object(B.jsx)(ta,D()({},e,s))},na=()=>Object(B.jsx)("div",{className:"canvasSidebar__panel canvasSidebar__panel--isEmpty"},Object(B.jsx)(z.EuiText,{size:"s"},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.groupSettings.multipleElementsDescription",{defaultMessage:"Multiple elements are currently selected."})),Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.groupSettings.multipleElementsActionsDescription",{defaultMessage:"Deselect these elements to edit their individual settings, press ({gKey}) to group them, or save this selection as a new element to re-use it throughout your workpad.",values:{gKey:"G"}})))),ra=()=>Object(B.jsx)("div",{className:"canvasSidebar__panel canvasSidebar__panel--isEmpty"},Object(B.jsx)(z.EuiText,{size:"s"},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.groupSettings.ungroupDescription",{defaultMessage:"Ungroup ({uKey}) to edit individual element settings.",values:{uKey:"U"}})),Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.groupSettings.saveGroupDescription",{defaultMessage:"Save this group as a new element to re-use it throughout your workpad."})))),sa=Object(l.connect)((e=>({elementStats:Object(ee.e)(e)})))((({elementStats:e})=>{if(!e)return null;const{total:t,ready:a,error:n}=e,r=t>0?Math.round((a+n)/t*100):100;return Object(B.jsx)("div",{className:"canvasSidebar__expandable"},Object(B.jsx)(z.EuiAccordion,{id:"canvas-element-stats",buttonContent:c.i18n.translate("xpack.canvas.elementConfig.title",{defaultMessage:"Element status",description:'"Elements" refers to the individual text, images, or visualizations that you can add to a Canvas workpad'}),initialIsOpen:!1,className:"canvasSidebar__accordion"},Object(B.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(B.jsx)(z.EuiFlexGroup,{gutterSize:"none"},Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiStat,{title:t,description:c.i18n.translate("xpack.canvas.elementConfig.totalLabel",{defaultMessage:"Total",description:"The label for the total number of elements in a workpad"}),titleSize:"xs"})),Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiStat,{title:a,description:c.i18n.translate("xpack.canvas.elementConfig.loadedLabel",{defaultMessage:"Loaded",description:"The label for the number of elements in a workpad that have loaded"}),titleSize:"xs"})),Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiStat,{title:n,description:c.i18n.translate("xpack.canvas.elementConfig.failedLabel",{defaultMessage:"Failed",description:"The label for the total number of elements in a workpad that have thrown an error or failed to load"}),titleSize:"xs"})),Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiStat,{title:r+"%",description:c.i18n.translate("xpack.canvas.elementConfig.progressLabel",{defaultMessage:"Progress",description:"The label for the percentage of elements that have finished loading"}),titleSize:"xs"}))))))}));var oa=a(63);function ia(e){this.name=e.name,this.displayName=e.displayName||this.name,this.help=e.help||"",this.enter=e.enter||"",this.exit=e.exit||""}class transitions_registry_TransitionsRegistry extends oa.a{wrapper(e){return new ia(e)}}const ca=new transitions_registry_TransitionsRegistry;var la=a(87),ua=a(96);const da=e=>{const t=Object(l.useDispatch)(),a=Object(n.useCallback)((e=>t(Object(A.a)(e))),[t]),r=Object(n.useCallback)((e=>t(Object(A.d)(e))),[t]),s=Object(l.useSelector)(ee.w);return Object(B.jsx)(ua.a,D()({},e,{onAddColor:a,onRemoveColor:r,colors:s,hasButtons:!0,ariaLabel:c.i18n.translate("xpack.canvas.workpadConfig.backgroundColorLabel",{defaultMessage:"Background color"})}))},pa={stylePage:la.g,setPageTransition:la.f},ba=Object(l.connect)((e=>{const t=Object(ee.s)(e);return{page:Object(ee.l)(e)[t],pageIndex:t}}),pa,((e,t)=>({pageIndex:e.pageIndex,setBackground:a=>{const n={...e.page.style,background:a};t.stylePage(e.page.id,n)},background:Object(u.get)(e,"page.style.background"),transition:ca.get(Object(u.get)(e,"page.transition.name")),transitions:[{value:"",text:c.i18n.translate("xpack.canvas.pageConfig.transitions.noneDropDownOptionLabel",{defaultMessage:"None",description:"This is the option the user should choose if they do not want any page transition (i.e. fade in, fade out, etc) to be applied to the current page."})}].concat(ca.toArray().map((({name:e,displayName:t})=>({value:e,text:t})))),setTransition:a=>{t.setPageTransition(e.page.id,{name:a})}})))((({pageIndex:e,setBackground:t,background:a,transition:r,transitions:s,setTransition:o})=>Object(B.jsx)(n.Fragment,null,Object(B.jsx)(z.EuiTitle,{size:"xs",className:"canvasSidebar__panelTitleHeading"},Object(B.jsx)("h4",null,c.i18n.translate("xpack.canvas.pageConfig.title",{defaultMessage:"Page settings"}))),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(z.EuiFormRow,{display:"columnCompressed",label:Object(B.jsx)(z.EuiToolTip,{content:c.i18n.translate("xpack.canvas.pageConfig.backgroundColorDescription",{defaultMessage:"Accepts HEX, RGB or HTML color names"})},Object(B.jsx)("span",null,c.i18n.translate("xpack.canvas.pageConfig.backgroundColorLabel",{defaultMessage:"Background"})," ",Object(B.jsx)(z.EuiIcon,{type:"questionInCircle",color:"subdued"})))},Object(B.jsx)(da,{onChange:t,value:a})),e>0?Object(B.jsx)(n.Fragment,null,Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.pageConfig.transitionLabel",{defaultMessage:"Transition",description:"This refers to the transition effect, such as fade in or rotate,  applied to a page in presentation mode."}),display:"rowCompressed"},Object(B.jsx)(z.EuiSelect,{value:r?r.name:"",options:s,compressed:!0,onChange:e=>o(e.target.value)})),r?Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.pageConfig.transitionPreviewLabel",{defaultMessage:"Preview",description:"This is the label for a preview of the transition effect selected."}),display:"rowCompressed"},Object(B.jsx)(z.EuiCard,{title:"",description:"",className:r.enter,style:{height:"72px",width:"128px",background:a,animationDuration:"1s"}})):""):"")));var ma=a(228),ga=a.n(ma);const fa=({type:e,value:t,onChange:a})=>{const r=Object(z.htmlIdGenerator)()(),s=[{id:`${r}-true`,label:c.i18n.translate("xpack.canvas.varConfigVarValueField.trueOption",{defaultMessage:"True"})},{id:`${r}-false`,label:c.i18n.translate("xpack.canvas.varConfigVarValueField.falseOption",{defaultMessage:"False"})}],o=Object(n.useCallback)((e=>{const t=parseFloat(e.target.value),n=isNaN(t)?"":t;a(n)}),[a]);return"number"===e?Object(B.jsx)(z.EuiFieldNumber,{compressed:!0,name:"value",value:t,onChange:o}):"boolean"===e?Object(B.jsx)(z.EuiButtonGroup,{name:"value",options:s,idSelected:`${r}-${t}`,onChange:e=>{const t="true"===e.replace(`${r}-`,"");a(t)},buttonSize:"compressed",isFullWidth:!0,legend:c.i18n.translate("xpack.canvas.varConfigVarValueField.booleanOptionsLegend",{defaultMessage:"Boolean value"})}):Object(B.jsx)(z.EuiFieldText,{compressed:!0,name:"value",value:String(t),onChange:e=>a(e.target.value)})},ha=({variables:e,selectedVar:t,onCancel:a,onSave:s})=>{const o=null===t,[i,l]=Object(n.useState)(o?"string":t.type),[u,d]=Object(n.useState)(o?"":t.name),[p,b]=Object(n.useState)(o?"":t.value),m=((e,t,a)=>!!a.find((a=>e===a.name&&(!t||a.name!==t))))(u,t&&t.name,e),g=""===p.toString().trim(),f=!u,h=[{value:"string",inputDisplay:Object(B.jsx)("div",{className:"canvasEditVar__typeOption"},Object(B.jsx)(z.EuiToken,{iconType:"tokenString",className:"canvasEditVar__tokenIcon"})," ",Object(B.jsx)("span",null,c.i18n.translate("xpack.canvas.varConfigEditVar.typeStringLabel",{defaultMessage:"String"})))},{value:"number",inputDisplay:Object(B.jsx)("div",{className:"canvasEditVar__typeOption"},Object(B.jsx)(z.EuiToken,{iconType:"tokenNumber",className:"canvasEditVar__tokenIcon"})," ",Object(B.jsx)("span",null,c.i18n.translate("xpack.canvas.varConfigEditVar.typeNumberLabel",{defaultMessage:"Number"})))},{value:"boolean",inputDisplay:Object(B.jsx)("div",{className:"canvasEditVar__typeOption"},Object(B.jsx)(z.EuiToken,{iconType:"tokenBoolean",className:"canvasEditVar__tokenIcon"})," ",Object(B.jsx)("span",null,c.i18n.translate("xpack.canvas.varConfigEditVar.typeBooleanLabel",{defaultMessage:"Boolean"})))}];return Object(B.jsx)(r.a.Fragment,null,Object(B.jsx)("div",{className:"canvasVarHeader__triggerWrapper"},Object(B.jsx)("button",{className:"canvasVarHeader__button",type:"button",onClick:()=>a()},Object(B.jsx)("span",{className:"canvasVarHeader__iconWrapper"},Object(B.jsx)(z.EuiIcon,{type:"sortLeft",style:{verticalAlign:"top"}})),Object(B.jsx)("span",null,Object(B.jsx)("span",{className:"canvasVarHeader__anchor"},o?c.i18n.translate("xpack.canvas.varConfigEditVar.addTitleLabel",{defaultMessage:"Add variable"}):c.i18n.translate("xpack.canvas.varConfigEditVar.editTitleLabel",{defaultMessage:"Edit variable"}))))),Object(B.jsx)("div",{className:"canvasSidebar__accordionContent"},!o&&Object(B.jsx)("div",null,Object(B.jsx)(z.EuiCallOut,{title:c.i18n.translate("xpack.canvas.varConfigEditVar.editWarning",{defaultMessage:"Editing a variable in use may adversely affect your workpad"}),color:"warning",iconType:"alert",size:"s"}),Object(B.jsx)(z.EuiSpacer,{size:"m"})),Object(B.jsx)(z.EuiForm,{component:"form"},Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.varConfigEditVar.typeFieldLabel",{defaultMessage:"Type"}),display:"rowCompressed"},Object(B.jsx)(z.EuiSuperSelect,{options:h,valueOfSelected:i,onChange:e=>{l(e),b("boolean"===e||("number"===e?0:""))},compressed:!0})),Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.varConfigEditVar.nameFieldLabel",{defaultMessage:"Name"}),display:"rowCompressed",isInvalid:m,error:m&&c.i18n.translate("xpack.canvas.varConfigEditVar.duplicateNameError",{defaultMessage:"Variable name already in use"})},Object(B.jsx)(z.EuiFieldText,{name:"name",value:u,compressed:!0,onChange:e=>d(e.target.value),isInvalid:m})),Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.varConfigEditVar.valueFieldLabel",{defaultMessage:"Value"}),display:"rowCompressed"},Object(B.jsx)(fa,{type:i,value:p,onChange:e=>b(e)})),Object(B.jsx)(z.EuiSpacer,{size:"m"}),Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButton,{color:"success",size:"s",fill:!0,onClick:()=>s({name:u,value:p,type:i}),disabled:m||g||f,iconType:"save"},c.i18n.translate("xpack.canvas.varConfigEditVar.saveButtonLabel",{defaultMessage:"Save changes"}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButtonEmpty,{size:"s",onClick:()=>a()},c.i18n.translate("xpack.canvas.varConfigEditVar.cancelButtonLabel",{defaultMessage:"Cancel"})))))))},va=({selectedVar:e,onCancel:t,onDelete:a})=>Object(B.jsx)(r.a.Fragment,null,Object(B.jsx)("div",{className:"canvasVarHeader__triggerWrapper"},Object(B.jsx)("button",{className:"canvasVarHeader__button",type:"button",onClick:()=>t()},Object(B.jsx)("span",{className:"canvasVarHeader__iconWrapper"},Object(B.jsx)(z.EuiIcon,{type:"sortLeft",style:{verticalAlign:"top"}})),Object(B.jsx)("span",null,Object(B.jsx)("span",{className:"canvasVarHeader__anchor"},c.i18n.translate("xpack.canvas.varConfigDeleteVar.titleLabel",{defaultMessage:"Delete variable?"}))))),Object(B.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(B.jsx)("div",null,Object(B.jsx)(z.EuiFlexGroup,null,Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiText,{color:"subdued",size:"s"},c.i18n.translate("xpack.canvas.varConfigDeleteVar.warningDescription",{defaultMessage:"Deleting this variable may adversely affect the workpad. Are you sure you wish to continue?"})))),Object(B.jsx)(z.EuiSpacer,{size:"m"}),Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButton,{color:"danger",size:"s",fill:!0,onClick:()=>a(e),iconType:"trash"},c.i18n.translate("xpack.canvas.varConfigDeleteVar.deleteButtonLabel",{defaultMessage:"Delete variable"}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButtonEmpty,{size:"s",onClick:()=>t()},c.i18n.translate("xpack.canvas.varConfigDeleteVar.cancelButtonLabel",{defaultMessage:"Cancel"})))))));var xa;!function(e){e[e.List=0]="List",e[e.Edit=1]="Edit",e[e.Delete=2]="Delete"}(xa||(xa={}));const ja={number:"tokenNumber",boolean:"tokenBoolean",string:"tokenString"},ya=()=>c.i18n.translate("xpack.canvas.varConfig.addTooltipLabel",{defaultMessage:"Add a variable"}),Oa=({variables:e,onCopyVar:t,onDeleteVar:a,onAddVar:r,onEditVar:s})=>{const[o,i]=Object(n.useState)(xa.List),[l,u]=Object(n.useState)(null),d=[{type:"icon",name:c.i18n.translate("xpack.canvas.varConfig.copyActionButtonLabel",{defaultMessage:"Copy snippet"}),description:c.i18n.translate("xpack.canvas.varConfig.copyActionTooltipLabel",{defaultMessage:"Copy variable syntax to clipboard"}),icon:"copyClipboard",onClick:t,isPrimary:!0},{type:"icon",name:c.i18n.translate("xpack.canvas.varConfig.editActionButtonLabel",{defaultMessage:"Edit variable"}),description:"",icon:"pencil",onClick:e=>{u(e),i(xa.Edit)}},{type:"icon",name:c.i18n.translate("xpack.canvas.varConfig.deleteActionButtonLabel",{defaultMessage:"Delete variable"}),description:"",icon:"trash",color:"danger",onClick:e=>{u(e),i(xa.Delete)}}],p=[{field:"type",name:c.i18n.translate("xpack.canvas.varConfig.tableTypeLabel",{defaultMessage:"Type"}),sortable:!0,render:(e,t)=>Object(B.jsx)(z.EuiToken,{iconType:ja[e]}),width:"50px"},{field:"name",name:c.i18n.translate("xpack.canvas.varConfig.tableNameLabel",{defaultMessage:"Name"}),sortable:!0},{field:"value",name:c.i18n.translate("xpack.canvas.varConfig.tableValueLabel",{defaultMessage:"Value"}),sortable:!0,truncateText:!0,render:(e,t)=>""+e},{actions:d,width:"60px"}];return Object(B.jsx)("div",{className:"canvasSidebar__expandable canvasVarConfig__container "+(o!==xa.List?"canvasVarConfig-isEditMode":"")},Object(B.jsx)("div",{className:"canvasVarConfig__innerContainer"},Object(B.jsx)(z.EuiAccordion,{id:"accordion-variables",className:"canvasVarConfig__listView canvasSidebar__accordion",buttonContent:Object(B.jsx)(z.EuiToolTip,{content:c.i18n.translate("xpack.canvas.varConfig.titleTooltip",{defaultMessage:"Add variables to store and edit common values"}),position:"left",className:"canvasArg__tooltip"},Object(B.jsx)("span",null,c.i18n.translate("xpack.canvas.varConfig.titleLabel",{defaultMessage:"Variables"}))),extraAction:Object(B.jsx)(z.EuiToolTip,{position:"top",content:ya()},Object(B.jsx)(z.EuiButtonIcon,{color:"primary",iconType:"plusInCircle","aria-label":ya(),onClick:()=>{u(null),i(xa.Edit)}}))},0!==e.length&&Object(B.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(B.jsx)(z.EuiInMemoryTable,{className:"canvasVarConfig__list",items:e,columns:p,hasActions:!0,pagination:!1,sorting:!0,compressed:!0})),0===e.length&&Object(B.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(B.jsx)(z.EuiText,{color:"subdued",size:"s"},c.i18n.translate("xpack.canvas.varConfig.emptyDescription",{defaultMessage:"This workpad has no variables currently. You may add variables to store and edit common values. These variables can then be used in elements or within the expression editor."})),Object(B.jsx)(z.EuiSpacer,{size:"m"}),Object(B.jsx)(z.EuiButton,{size:"s",iconType:"plusInCircle",onClick:()=>i(xa.Edit)},c.i18n.translate("xpack.canvas.varConfig.addButtonLabel",{defaultMessage:"Add a variable"})))),Object(B.jsx)("div",{className:"canvasVarConfig__editView canvasSidebar__accordion"},o===xa.Edit&&Object(B.jsx)(ha,{variables:e,selectedVar:l,onSave:e=>{l?s(l,e):r(e),u(null),i(xa.List)},onCancel:()=>{u(null),i(xa.List)}}),o===xa.Delete&&l&&Object(B.jsx)(va,{selectedVar:l,onDelete:e=>{a(e),u(null),i(xa.List)},onCancel:()=>{u(null),i(xa.List)}}))))},_a=({variables:e,setVariables:t})=>{const{success:a}=Object(f.useNotifyService)();return Object(B.jsx)(Oa,{variables:e,onCopyVar:e=>{const t=`{var "${e.name}"}`;ga()(t,{debug:!0}),a(c.i18n.translate("xpack.canvas.varConfig.copyNotificationDescription",{defaultMessage:"Variable syntax copied to clipboard"}))},onDeleteVar:n=>{const r=e.findIndex((e=>e.name===n.name));if(-1!==r){const n=[...e];n.splice(r,1),t(n),a(c.i18n.translate("xpack.canvas.varConfig.deleteNotificationDescription",{defaultMessage:"Variable successfully deleted"}))}},onAddVar:a=>{t([...e,a])},onEditVar:(a,n)=>{const r=e.findIndex((e=>a.name===e.name)),s=[...e];s[r]=n,t(s)}})},wa=()=>c.i18n.translate("xpack.canvas.workpadConfig.globalCSSTooltip",{defaultMessage:"Apply styles to all pages in this workpad"}),ka=e=>c.i18n.translate("xpack.canvas.workpadConfig.pageSizeBadgeOnClickAriaLabel",{defaultMessage:"Set page size to {sizeName}",values:{sizeName:e}}),Ea={setSize:A.n,setName:A.h,setWorkpadCSS:A.k,setWorkpadVariables:e=>Object(A.o)(e)},Sa=Object(l.connect)((e=>{const t=Object(ee.u)(e);return{name:Object(u.get)(t,"name"),size:{width:Object(u.get)(t,"width"),height:Object(u.get)(t,"height")},css:Object(u.get)(t,"css",oe.r),variables:Object(u.get)(t,"variables",[])}}),Ea)((e=>{const[t,a]=Object(n.useState)(e.css),{size:r,name:s,setSize:o,setName:i,setWorkpadCSS:l,variables:u,setWorkpadVariables:d}=e,p=[{name:"1080p",size:{height:1080,width:1920}},{name:"720p",size:{height:720,width:1280}},{name:"A4",size:{height:842,width:590}},{name:c.i18n.translate("xpack.canvas.workpadConfig.USLetterButtonLabel",{defaultMessage:"US Letter",description:"This is referring to the dimensions of U.S. standard letter paper."}),size:{height:792,width:612}}];return Object(B.jsx)("div",null,Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.workpadConfig.nameLabel",{defaultMessage:"Name"}),display:"rowCompressed"},Object(B.jsx)(z.EuiFieldText,{compressed:!0,value:s,onChange:e=>i(e.target.value),"data-test-subj":"canvas-workpad-name-text-field"})),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(z.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.workpadConfig.widthLabel",{defaultMessage:"Width"}),display:"rowCompressed"},Object(B.jsx)(z.EuiFieldNumber,{compressed:!0,onChange:e=>o({width:Number(e.target.value),height:r.height}),value:r.width}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFormRow,{display:"rowCompressed",hasEmptyLabelSpace:!0},Object(B.jsx)(z.EuiToolTip,{position:"bottom",content:c.i18n.translate("xpack.canvas.workpadConfig.swapDimensionsTooltip",{defaultMessage:"Swap the width and height"})},Object(B.jsx)(z.EuiButtonIcon,{iconType:"merge",color:"text",onClick:()=>o({width:r.height,height:r.width}),"aria-label":c.i18n.translate("xpack.canvas.workpadConfig.swapDimensionsAriaLabel",{defaultMessage:"Swap the page's width and height"})})))),Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.workpadConfig.heightLabel",{defaultMessage:"Height"}),display:"rowCompressed"},Object(B.jsx)(z.EuiFieldNumber,{compressed:!0,onChange:e=>o({height:Number(e.target.value),width:r.width}),value:r.height})))),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)("div",null,p.map(((e,t)=>{return Object(B.jsx)(z.EuiBadge,{key:`page-size-badge-${t}`,color:"hollow",onClick:()=>o(e.size),"aria-label":(a=e.name,c.i18n.translate("xpack.canvas.workpadConfig.pageSizeBadgeAriaLabel",{defaultMessage:"Preset page size: {sizeName}",values:{sizeName:a}})),onClickAriaLabel:ka(e.name)},e.name);var a}))),Object(B.jsx)(z.EuiSpacer,{size:"m"}),Object(B.jsx)(_a,{variables:u,setVariables:d}),Object(B.jsx)("div",{className:"canvasSidebar__expandable"},Object(B.jsx)(z.EuiAccordion,{id:"accordion-global-css",className:"canvasSidebar__accordion",style:{marginBottom:0},buttonContent:Object(B.jsx)(z.EuiToolTip,{content:wa(),position:"left",className:"canvasArg__tooltip"},Object(B.jsx)("span",null,c.i18n.translate("xpack.canvas.workpadConfig.globalCSSLabel",{defaultMessage:"Global CSS overrides"})))},Object(B.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(B.jsx)(z.EuiTextArea,{"aria-label":wa(),value:t,compressed:!0,onChange:e=>a(e.target.value),rows:10}),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(z.EuiButton,{size:"s",onClick:()=>l(t||oe.r)},c.i18n.translate("xpack.canvas.workpadConfig.applyStylesheetButtonLabel",{defaultMessage:"Apply stylesheet",description:'"stylesheet" refers to the collection of CSS style rules entered by the user.'})),Object(B.jsx)(z.EuiSpacer,{size:"xs"})))))})),Ca=({children:e})=>Object(B.jsx)("div",{className:"canvasSidebar__panel"},e),Ma=()=>Object(B.jsx)(n.Fragment,null,Object(B.jsx)(Ca,null,Object(B.jsx)(Sa,null),Object(B.jsx)(sa,null)),Object(B.jsx)(Ca,null,Object(B.jsx)(ba,null)));var Pa=a(103),Ta=a(214),Na=a(82),Aa=a(69);const Ia={timefilter:Aa.FilterType.time,exactly:Aa.FilterType.exactly},Fa=e=>e.toString(),Da=(e,t=Fa)=>null!=e&&e[0]?t(e[0]):null,La=e=>{const t=Object.keys(e);return t.length?t.reduce(((t,a)=>({...t,[a]:Da(e[a],u.identity)})),{}):null};function Ra(e){var t;const{function:a,arguments:n}=e,{column:r,filterGroup:s,value:o,type:i,...c}=null!=n?n:{};return{type:(l=a,null!==(u=Ia[l])&&void 0!==u?u:Aa.FilterType.exactly),column:Da(r),filterGroup:Da(s),value:null!==(t=Da(o))&&void 0!==t?t:La(c)};var l,u}const za={width:"30%"},Ba={width:"70%"},Ha=({filter:e,...t})=>{const a=Object.values(e).map((e=>{const a=e.component?((e,{updateFilter:t,...a})=>Object(B.jsx)(e,D()({},a,{onChange:t})))(e.component,{value:e.formattedValue,...t}):e.formattedValue;return{title:Object(B.jsx)(z.EuiText,{size:"s"},Object(B.jsx)("h4",null,e.label)),description:Object(B.jsx)(z.EuiText,{size:"s"},a)}}));return Object(B.jsx)(z.EuiPanel,{grow:!1,hasShadow:!1,paddingSize:"m"},Object(B.jsx)(z.EuiDescriptionList,{type:"column",className:"workpadFilter",compressed:!0,listItems:a,titleProps:{style:za,className:"eui-textBreakWord"},descriptionProps:{style:Ba,className:"eui-textBreakWord"}}))},Wa={type:e=>{var t;const a={exactly:c.i18n.translate("xpack.canvas.workpadFilters.defaultFilter.typeLabel",{defaultMessage:"Dropdown"}),time:c.i18n.translate("xpack.canvas.workpadFilters.timeFilter.typeLabel",{defaultMessage:"Time"})};return"string"==typeof e?null!==(t=a[e])&&void 0!==t?t:e:null}},Va=e=>Wa[e],Ga={name:"default",view:{column:{label:c.i18n.translate("xpack.canvas.workpadFilters.defaultFilter.column",{defaultMessage:"Column"})},value:{label:c.i18n.translate("xpack.canvas.workpadFilters.defaultFilter.value",{defaultMessage:"Value"})},type:{label:c.i18n.translate("xpack.canvas.workpadFilters.defaultFilter.type",{defaultMessage:"Type"}),formatter:Va("type")},filterGroup:{label:c.i18n.translate("xpack.canvas.workpadFilters.defaultFilter.filterGroup",{defaultMessage:"Filter group"})}}};var Ua=a(28),$a=a.n(Ua);const{column:Ka,type:qa,filterGroup:Za}=Ga.view,Xa=(e,t)=>{const a=$a.a.parse(e,{roundUp:t});return a&&a.isValid()?a.format("YYYY-MM-DD HH:mm:ss"):(n=e,c.i18n.translate("xpack.canvas.workpadFilters.timeFilter.invalidDate",{defaultMessage:"Invalid date: {date}",values:{date:n}}));var n},Ya={name:Aa.FilterType.time,view:{column:Ka,value:({to:e,from:t})=>({from:{label:c.i18n.translate("xpack.canvas.workpadFilters.timeFilter.from",{defaultMessage:"From"}),formatter:()=>Xa(t,!1)},to:{label:c.i18n.translate("xpack.canvas.workpadFilters.timeFilter.to",{defaultMessage:"To"}),formatter:()=>Xa(e,!0)}}),type:{label:qa.label,formatter:Va("type")},filterGroup:Za}},Ja={[Ga.name]:Ga,[Ya.name]:Ya},Qa={paddingTop:"15px"},en=({filtersGroup:e,id:t})=>{const{name:a,filters:n}=e,r=n.map((e=>{var t;const a=null!==(t=Ja[e.type])&&void 0!==t?t:Ja.default;return Object(Pa.a)(a.view,e)})).map(((e,t)=>Object(B.jsx)(Ha,{key:`filter-${a}-${t}`,filter:e})));return Object(B.jsx)("div",{className:"canvasSidebar__expandable"},Object(B.jsx)(z.EuiAccordion,{id:`canvas-filter-group-${t}`,buttonContent:a,initialIsOpen:!0,className:"canvasSidebar__accordion filtersSidebar__accordion",style:{marginLeft:"0px"}},Object(B.jsx)("div",{style:Qa},r)))},tn=[{value:"filterGroup",text:c.i18n.translate("xpack.canvas.workpadFilters.groupByFilterGroup",{defaultMessage:"Filter group"})},{value:"type",text:c.i18n.translate("xpack.canvas.workpadFilters.groupByFilterType",{defaultMessage:"Filter type"})},{value:"column",text:c.i18n.translate("xpack.canvas.workpadFilters.groupByColumn",{defaultMessage:"Column"})}],an=({filtersGroups:e,onGroupByChange:t,groupFiltersByField:a})=>{var r;const s="filterGroup"===a,o=a&&null!==(r=Va(a))&&void 0!==r?r:u.identity,i=e.map((e=>{var t;return{...e,name:null!==(t=o(e.name))&&void 0!==t?t:s?c.i18n.translate("xpack.canvas.workpadFilters.filters_group.withoutGroup",{defaultMessage:"Without group"}):c.i18n.translate("xpack.canvas.workpadFilters.filters_group.blankValue",{defaultMessage:"(Blank)"})}})),l=i.map(((e,t)=>Object(B.jsx)(en,{key:`filter-group-${t}`,id:t,filtersGroup:e})));return Object(B.jsx)(n.Fragment,null,Object(B.jsx)("div",{className:"canvasSidebar__panel canvasSidebar__expandable"},Object(B.jsx)(z.EuiFlexGroup,{gutterSize:"l",alignItems:"center"},Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiText,null,Object(B.jsx)("h5",null,c.i18n.translate("xpack.canvas.workpadFilters.groupBySelect",{defaultMessage:"Group by"})))),Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiSelect,{compressed:!0,options:tn,value:a,onChange:e=>t(e.target.value),"aria-label":"Use aria labels when no actual label is in use"})))),l)},nn=({element:e})=>{const t=Object(l.useSelector)((e=>(e=>{var t;return null!==(t=e.transient.sidebar.groupFiltersByOption)&&void 0!==t?t:Na.DEFAULT_GROUP_BY_FIELD})(e))),a=Object(l.useDispatch)(),r=Object(n.useCallback)((e=>{a(Object(Ta.b)(e))}),[a]),s=function(e=[]){const t=Object(f.useFiltersService)(),a=Object(l.useSelector)((e=>t.getFilters(e)),l.shallowEqual);var n;return(n=Object(Pa.b)(a,e),Object(oa.d)(n.join(" | "))).chain.map(Ra)}(e?Object(Pa.c)(e.expression):[]),o=t?Object(Pa.d)(s,t):[];return Object(B.jsx)(an,{filtersGroups:o,onGroupByChange:r,groupFiltersByField:t})},rn=()=>Object(B.jsx)(nn,null),sn=()=>{const e=[{id:"general",name:c.i18n.translate("xpack.canvas.globalConfig.general",{defaultMessage:"General"}),content:Object(B.jsx)("div",{className:"canvasSidebar__pop"},Object(B.jsx)(z.EuiSpacer,{size:"m"}),Object(B.jsx)(Ma,null))},{id:"filter",name:c.i18n.translate("xpack.canvas.globalConfig.filter",{defaultMessage:"Filter"}),content:Object(B.jsx)("div",{className:"canvasSidebar__pop"},Object(B.jsx)(rn,null))}];return Object(B.jsx)(n.Fragment,null,Object(B.jsx)("div",{className:"canvasLayout__sidebarHeader"},Object(B.jsx)(z.EuiTitle,{size:"xs"},Object(B.jsx)("h4",null,c.i18n.translate("xpack.canvas.globalConfig.title",{defaultMessage:"Workpad settings"})))),Object(B.jsx)(z.EuiTabbedContent,{tabs:e,initialSelectedTab:e[0],size:"s"}))};var on=a(95),cn=a.n(on),ln=a(84),un=a.n(ln);class base_form_BaseForm{constructor(e){if(b()(this,"name",void 0),b()(this,"displayName",void 0),b()(this,"help",void 0),!e.name)throw new Error("Expression specs require a name property");this.name=e.name,this.displayName=e.displayName||this.name,this.help=e.help||""}}const dn=e=>Object(s.createPortal)(Object(B.jsx)("div",null,Object(B.jsx)("p",null,"This datasource has no interface. Use the expression editor to make changes.")),e),pn=e=>{const t=Object(n.useRef)(null),a=Object(n.useRef)(),[r,s]=Object(n.useState)(),{spec:o,datasourceProps:i,handlers:c}=e,l=un()(o),u=Object(n.useCallback)((e=>{a.current=null!=e?e:void 0}),[]),d=Object(n.useCallback)((e=>{const{template:t}=o;return t?t(e,i,c,u):null}),[i,c,u,o]);return Object(n.useEffect)((()=>{if(!r&&t.current){const e=d(t.current);e&&s(e)}}),[r,d]),Object(n.useEffect)((()=>{r&&(null==l?void 0:l.name)!==(null==o?void 0:o.name)&&(s(void 0),a.current=void 0)}),[r,null==l?void 0:l.name,null==o?void 0:o.name]),Object(n.useEffect)((()=>{a.current&&a.current.updateProps(i)}),[i]),cn()((()=>(a.current=void 0,()=>{a.current=void 0,c.destroy()}))),Object(B.jsx)("div",{className:"render_to_dom",ref:t},r)},bn=Object(n.memo)(pn,((e,t)=>ne()(e,t)));class datasource_Datasource extends base_form_BaseForm{constructor(e){var t;super(e),b()(this,"template",void 0),b()(this,"image",void 0),b()(this,"requiresContext",void 0),this.template=null!==(t=e.template)&&void 0!==t?t:dn,this.image=e.image,this.requiresContext=e.requiresContext}render(e){const t=new Na.ExpressionFormHandlers;return Object(B.jsx)(bn,{spec:this,handlers:t,datasourceProps:e})}}class datasource_registry_DatasourceRegistry extends oa.a{wrapper(e){return new datasource_Datasource(e)}}const mn=new datasource_registry_DatasourceRegistry;var gn=a(90);const fn=({onValueAdd:e=(()=>{}),displayName:t,help:a})=>Object(B.jsx)("button",{className:"canvasArg__add",onClick:e},Object(B.jsx)(z.EuiDescriptionList,{compressed:!0},Object(B.jsx)(z.EuiDescriptionListTitle,null,t),Object(B.jsx)(z.EuiDescriptionListDescription,null,Object(B.jsx)("small",null,a)))),hn=({options:e})=>Object(B.jsx)(gn.a,{id:"arg-add-popover",panelClassName:"canvasArg__addPopover",panelPaddingSize:"none",button:e=>Object(B.jsx)(z.EuiButtonIcon,{iconType:"plusInCircle","aria-label":c.i18n.translate("xpack.canvas.argAddPopover.addAriaLabel",{defaultMessage:"Add argument"}),onClick:e,className:"canvasArg__addArg"})},(({closePopover:t})=>e.map((e=>{var a,n;return Object(B.jsx)(fn,{key:`${e.name}-add`,displayName:null!==(a=e.displayName)&&void 0!==a?a:"",help:null!==(n=e.help)&&void 0!==n?n:"",onValueAdd:()=>{e.onValueAdd(),t()}})})))),vn=({title:e,tip:t,children:a})=>{const n=Object(B.jsx)(z.EuiTitle,{size:"xxxs",className:"canvasSidebar__panelTitleHeading"},Object(B.jsx)("h4",null,e));return Object(B.jsx)(z.EuiFlexGroup,{className:"canvasSidebar__panelTitle",gutterSize:"xs",alignItems:"center",justifyContent:"spaceBetween"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},t?Object(B.jsx)(z.EuiToolTip,{position:"left",content:t},n):n),Object(B.jsx)(z.EuiFlexItem,{grow:!1},a))};var xn=a(102),jn=a(119),yn=a(161);const On=()=>c.i18n.translate("xpack.canvas.argFormArgSimpleForm.removeAriaLabel",{defaultMessage:"Remove"}),_n=({children:e,required:t,valueMissing:a,onRemove:n})=>Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center",gutterSize:"s",className:"canvasArg__form"},Object(B.jsx)(z.EuiFlexItem,null,e),a&&Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(yn.b,{position:"left",icon:yn.a.error,content:c.i18n.translate("xpack.canvas.argFormArgSimpleForm.requiredTooltip",{defaultMessage:"This argument is required, you should specify a value."})})),!t&&Object(B.jsx)(z.EuiToolTip,{position:"top",content:On()},Object(B.jsx)(z.EuiButtonIcon,{color:"text",onClick:n,iconType:"cross",iconSize:"s","aria-label":On(),className:"canvasArg__remove"})));var wn=a(134);const kn=e=>Object.assign(new wn.a,e),En=({template:e,argumentProps:t,handlers:a,error:s,errorTemplate:o})=>{const[i,c]=Object(n.useState)(kn(a)),l=un()(s),[u,d]=Object(n.useState)(),p=Object(n.useRef)(),b=Object(n.useRef)(null);cn()((()=>()=>{p.current=void 0}));const m=Object(n.useCallback)((e=>{!p.current&&e&&(p.current=e)}),[]),g=Object(n.useCallback)((a=>e&&e(a,t,i,m)),[t,m,e,i]),f=Object(n.useCallback)((()=>r.a.createElement(o,t)),[o,t]);return Object(n.useEffect)((()=>{if(!u&&b.current){const e=g(b.current);e&&d(e)}}),[u,g]),Object(n.useEffect)((()=>{c(kn(a))}),[a]),Object(n.useEffect)((()=>{var e;p.current&&(null===(e=p.current)||void 0===e||e.updateProps(t))}),[t]),Object(n.useEffect)((()=>{!l&&s&&i.destroy()}),[l,s,i]),s?(p.current=void 0,f()):(e||(p.current=void 0),Object(B.jsx)("div",{className:"render_to_dom",ref:b},u))},Sn=Object(n.memo)(En,((e,t)=>ne()(e,t))),Cn=()=>Object(B.jsx)("div",{className:"canvasArg--error canvasArg--error-simple"},Object(B.jsx)(yn.b,{position:"left",icon:yn.a.warning,content:c.i18n.translate("xpack.canvas.argFormSimpleFailure.failureTooltip",{defaultMessage:"The interface for this argument could not parse the value, so a fallback input is being used"})})),Mn=e=>{try{return Object(oa.d)(e,"argument"),!0}catch(e){return!1}},Pn=e=>{const{onValueChange:t,defaultValue:a,argValue:r,resetErrorState:s,argId:o}=e,[i,l]=Object(n.useState)(Object(oa.h)(r,"argument")),[u,d]=Object(n.useState)(Mn(i));return Object(n.useEffect)((()=>{const e=Object(oa.h)(r,"argument");l(e),d(Mn(e))}),[r]),Object(B.jsx)("div",null,Object(B.jsx)(z.EuiFormRow,{display:"rowCompressed",id:o,isInvalid:!u,error:c.i18n.translate("xpack.canvas.argFormAdvancedFailure.rowErrorMessage",{defaultMessage:"Invalid Expression"})},Object(B.jsx)(z.EuiTextArea,{id:o,isInvalid:!u,value:i,compressed:!0,onChange:e=>l(e.target.value),rows:3})),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)("div",null,Object(B.jsx)(z.EuiButton,{disabled:!u,onClick:e=>(e=>{if(e.preventDefault(),s(),u)return t(Object(oa.d)(i.trim(),"argument"))})(e),size:"s",type:"submit"},c.i18n.translate("xpack.canvas.argFormAdvancedFailure.applyButtonLabel",{defaultMessage:"Apply"})),a&&a.length&&Object(B.jsx)(z.EuiButtonEmpty,{size:"s",color:"danger",onClick:e=>{e.preventDefault(),s(),t(Object(oa.d)(a,"argument"))}},c.i18n.translate("xpack.canvas.argFormAdvancedFailure.resetButtonLabel",{defaultMessage:"Reset"}))),Object(B.jsx)(z.EuiSpacer,{size:"s"}))},Tn=e=>{const{argId:t,className:a,label:n,help:r,expandable:s,children:o,simpleArg:i,initialIsOpen:c}=e;return Object(B.jsx)("div",{className:`canvasArg--header${a&&` ${a}`}`},s?Object(B.jsx)(z.EuiAccordion,{id:`accordion-${t}`,className:"canvasSidebar__accordion",buttonContent:Object(B.jsx)(z.EuiToolTip,{content:r,position:"left",className:"canvasArg__tooltip"},Object(B.jsx)("span",null,n)),extraAction:i,initialIsOpen:c},Object(B.jsx)("div",{className:"canvasSidebar__accordionContent"},o)):Object(B.jsx)(z.EuiFormRow,{display:"columnCompressed",label:Object(B.jsx)(z.EuiToolTip,{content:r},Object(B.jsx)("span",null,n," ",Object(B.jsx)(z.EuiIcon,{type:"iInCircle",color:"subdued"}))),id:t},i||o))};var Nn=a(120);class pending_arg_value_PendingArgValue extends r.a.PureComponent{componentDidMount(){const{setResolvedArgValue:e,templateProps:t}=this.props,{argResolver:a,argValue:n}=t;null==n?e(null):a(n).then((t=>e(null!=t?t:null))).catch((()=>e(null)))}render(){const{label:e,argTypeInstance:t}=this.props;return Object(B.jsx)("div",{className:"canvasArg"},Object(B.jsx)(Tn,{className:"resolve-pending",label:e,help:t.help,expandable:!1},Object(B.jsx)("div",{className:"canvasArg--pending"},Object(B.jsx)(Nn.a,{animated:!0,text:c.i18n.translate("xpack.canvas.argFormPendingArgValue.loadingMessage",{defaultMessage:"Loading"})}))))}}const An=e=>{const{argId:t,argTypeInstance:a,templateProps:r,valueMissing:s,label:o,setLabel:i,onValueRemove:c,workpad:l,assets:u,resolvedArgValue:d}=e,[p,b]=Object(n.useState)(!1),m=Object(n.useRef)();return Object(n.useEffect)((()=>(m.current=!0,()=>{m.current=!1})),[]),((e,t)=>{const{argType:a}=e;return!!a.resolveArgValue&&void 0===t})(a,d)?Object(B.jsx)(pending_arg_value_PendingArgValue,e):Object(B.jsx)(jn.a,null,(({error:e,resetErrorState:n})=>{const{template:g,simpleTemplate:f}=a.argType,h=Boolean(e)||p,v={...r,resolvedArgValue:d,defaultValue:a.default,renderError:()=>{m.current&&b(!0)},error:h,setLabel:e=>m.current&&i(e),resetErrorState:()=>{n(),m.current&&b(!1)},label:o,workpad:l,argId:t,assets:u},x=Boolean(h||g),j=Object(B.jsx)(_n,{required:a.required,valueMissing:s,onRemove:c},Object(B.jsx)(Sn,{template:f,errorTemplate:Cn,error:h,argumentProps:v})),y=Object(B.jsx)("div",{className:"canvasArg--controls"},Object(B.jsx)(Sn,{template:g,errorTemplate:Pn,error:h,argumentProps:v}));return Object(B.jsx)("div",{className:`canvasArg ${x?"canvasSidebar__expandable":null}`},Object(B.jsx)(Tn,{className:"resolved",argId:t,label:o,help:a.help,expandable:x,simpleArg:j,initialIsOpen:!f},y))}))},In=e=>{const{argTypeInstance:t,label:a,templateProps:r}=e,[s,o]=Object(n.useState)(((e,t)=>e||t.displayName||t.name)(a,t)),[i,c]=Object(n.useState)(null),u=Object(l.useSelector)(ee.y),d=Object(l.useSelector)(xn.b);return Object(n.useEffect)((()=>{c()}),[null==r?void 0:r.argValue]),Object(B.jsx)(An,D()({},e,{workpad:u,assets:d,label:s,setLabel:o,resolvedArgValue:i,setResolvedArgValue:c}))};class arg_type_ArgType extends base_form_BaseForm{constructor(e){super(e),b()(this,"simpleTemplate",void 0),b()(this,"template",void 0),b()(this,"default",void 0),b()(this,"resolveArgValue",void 0),this.simpleTemplate=e.simpleTemplate,this.template=e.template,this.default=e.default,this.resolveArgValue=Boolean(e.resolveArgValue)}}class arg_type_registry_ArgTypeRegistry extends oa.a{wrapper(e){return new arg_type_ArgType(e)}}const Fn=new arg_type_registry_ArgTypeRegistry;class arg_Arg{constructor(e){b()(this,"argType",void 0),b()(this,"multi",void 0),b()(this,"required",void 0),b()(this,"types",void 0),b()(this,"default",void 0),b()(this,"resolve",void 0),b()(this,"options",void 0),b()(this,"name",""),b()(this,"displayName",void 0),b()(this,"help",void 0);const t=Fn.get(e.argType);if(!t)throw new Error(`Invalid arg type: ${e.argType}`);if(!e.name)throw new Error("Args must have a name property");const a={multi:!1,required:!1,types:[],default:null!=t.default?t.default:null,options:{},resolve:()=>({})},{name:n,displayName:r,help:s,multi:o,types:i,options:c}=e;Object(u.merge)(this,a,t,{argType:t,name:n,displayName:r,help:s,multi:o,types:i,default:e.default,resolve:e.resolve,required:e.required,options:c})}render(e){var t;const{onValueChange:a,onValueRemove:r,key:s,label:o,...i}=e,c=null===(t=this.resolve)||void 0===t?void 0:t.call(this,i),{argValue:l,onAssetAdd:u,resolved:d,filterGroups:p,argResolver:b}=i,m=s,g={argValue:l,argId:m,onAssetAdd:u,onValueChange:a,typeInstance:this,resolved:{...d,...c},argResolver:b,filterGroups:p},f={key:s,argTypeInstance:this,valueMissing:this.required&&null==e.argValue,label:o,onValueChange:a,onValueRemove:r,templateProps:g,argId:m,options:this.options};return Object(n.createElement)(In,f)}}function Dn(e){return Un.get(e)||$n.get(e)||Wn.get(e)}const Ln=(e,t)=>`${e.name}=${Rn(t)}`,Rn=e=>{if(Bn(e)){const t=zn(e);return Object(oa.h)(Object(oa.d)(t))}return e},zn=e=>Bn(e)?e.substring(1,e.length-1):e,Bn=e=>"{"===e[0]&&"}"===e[e.length-1];function Hn(e){const t=Dn(e.argType);if(e.default)return Ln(e,e.default);if(!t)return;const a=t.args.map((e=>{const t=Dn(e.argType);return e.default&&t&&Array.isArray(t.args)?Ln(e,e.default):Hn(e)})).filter((e=>void 0!==e));return a.length?`{${e.argType} ${a.join(" ")}}`:`{${e.argType}}`}class function_form_FunctionForm extends base_form_BaseForm{constructor(e){super({...e}),b()(this,"args",void 0),b()(this,"resolve",void 0),this.args=e.args||[],this.resolve=e.resolve||(()=>({}))}renderArg(e,t){const{onValueRemove:a,onValueChange:n,onContainerRemove:r,id:s,...o}=t,{arg:i,argValues:c}=e;if(!i)return null;const l=(e,t)=>i.render({key:`${s}.${i.name}.${t}`,...o,valueIndex:t,onValueChange:n(i.name,t),onValueRemove:a(i.name,t),argValue:null!=e?e:null});return!c&&i.required?l(null,0):c&&c.map(l)}getArgDescription({name:e,displayName:t,help:a},n){var r,s,o,i;return{name:null!==(r=null!==(s=n.name)&&void 0!==s?s:e)&&void 0!==r?r:"",displayName:null!==(o=n.displayName)&&void 0!==o?o:t,help:null!==(i=n.help)&&void 0!==i?i:a}}getAddableArgComplex(e,t,a){if(t&&!e.multi)return null;const n=Hn(e),r=Dn(e.argType);if(!r||void 0===n)return null;const s=null===n?null:Object(oa.d)(n,"argument");return{...this.getArgDescription(r,e),onValueAdd:a(e.name,s)}}getAddableArgSimple(e,t,a){const n=new arg_Arg(e);if(!n||n.required)return null;if(t&&!n.multi)return null;const r=null===n.default||void 0===n.default?null:Object(oa.d)(n.default,"argument");return{...this.getArgDescription(n,e),onValueAdd:a(n.name,r)}}getAddableArgs(e={},t={},a){const n=null===e?{}:e,r=null===t?{}:t;return this.args.reduce(((e,t)=>{if(!t.type||"argument"===t.type){const r=this.getAddableArgSimple(t,n[t.name],a);return r?[...e,r]:e}const s=this.getAddableArgComplex(t,r[t.name],a);return s?[...e,s]:e}),[])}getArgsWithValues(e,t){let a=[];if(this.isExpressionFunctionForm(t)){const e=t.args.map((({name:e})=>e));a=this.args.filter((t=>e.includes(t.name))).map((e=>new arg_Arg(e)))}else a=this.args.map((e=>new arg_Arg(e)));if(null===e||!Object(u.isPlainObject)(e))throw new Error(`Form "${this.name}" expects "args" object`);return Object(u.uniq)(this.args.map((e=>e.name)).concat(Object.keys(e))).map((t=>{var n;const r=a.find((e=>e.name===t)),s=r&&r.multi;return{arg:r,argValues:e[t]&&!s?[null!==(n=Object(u.last)(e[t]))&&void 0!==n?n:null]:e[t]}}))}resolveArg(...e){return{}}isExpressionFunctionForm(e){return!!e&&(e instanceof view_View||e instanceof model_Model||e instanceof transform_Transform)}render(e={args:null,argTypeDef:void 0}){const{args:t,argTypeDef:a,nestedFunctionsArgs:n={},removable:r}=e,s=this.getArgsWithValues(t,a);try{const o={...e,resolved:this.resolve(e),typeInstance:this},i=s.map((e=>({...e,...this.resolveArg(e,o)}))),c=Object(u.compact)(i.map((e=>this.renderArg(e,o)))),l=this.getAddableArgs(t,n,o.onValueAdd);return l.length||c.length?Object(B.jsx)(Ca,null,Object(B.jsx)(vn,{title:null==a?void 0:a.displayName,tip:null==a?void 0:a.help},Object(B.jsx)(z.EuiFormRow,null,Object(B.jsx)(z.EuiFlexGroup,{direction:"row",gutterSize:"s"},r&&Object(B.jsx)(z.EuiToolTip,{position:"top",content:"Remove"},Object(B.jsx)(z.EuiButtonIcon,{color:"text",onClick:()=>{o.onContainerRemove()},iconType:"cross",iconSize:"s","aria-label":"Remove",className:"canvasArg__remove"})),0===l.length?null:Object(B.jsx)(hn,{options:l})))),c):null}catch(e){return Object(B.jsx)(z.EuiCallOut,{color:"danger",iconType:"cross",title:"Expression rendering error"},Object(B.jsx)("p",null,e.message))}}}class transform_Transform extends function_form_FunctionForm{constructor(e){super(e),b()(this,"requiresContext",void 0);const{requiresContext:t}=e;Object(u.merge)(this,{requiresContext:!0},{requiresContext:t})}}class transform_registry_TransformRegistry extends oa.a{wrapper(e){return new transform_Transform(e)}}const Wn=new transform_registry_TransformRegistry,Vn="no next expression",Gn="missing model args";class model_Model extends function_form_FunctionForm{constructor(e){super(e),b()(this,"requiresContext",void 0);const{requiresContext:t}=e;Object(u.merge)(this,{requiresContext:!0},{requiresContext:t})}resolveArg(e,t){var a,n;const{nextExpressionType:r}=t,s=(o=r)?null!=o&&o.modelArgs&&(null==o?void 0:o.modelArgs.length)>0?null==o?void 0:o.modelArgs:Gn:Vn;var o;if(s===Vn||s===Gn)return{skipRender:!1};const i=null==e||null===(a=e.arg)||void 0===a?void 0:a.name,c="string"!=typeof s&&s.find((e=>Array.isArray(e)?e[0]===i:e===i));return{label:Array.isArray(c)?null===(n=c[1])||void 0===n?void 0:n.label:null,skipRender:!c}}}class model_registry_ModelRegistry extends oa.a{wrapper(e){return new model_Model(e)}}const Un=new model_registry_ModelRegistry;class view_View extends function_form_FunctionForm{constructor(e){super(e),b()(this,"modelArgs",[]),b()(this,"requiresContext",void 0);const{help:t,modelArgs:a,requiresContext:n}=e,r={help:`Element: ${e.name}`,requiresContext:!0};if(Object(u.merge)(this,r,{help:t,modelArgs:a||[],requiresContext:n}),!Array.isArray(this.modelArgs))throw new Error(`${this.name} element is invalid, modelArgs must be an array`)}}class view_registry_ViewRegistry extends oa.a{wrapper(e){return new view_View(e)}}const $n=new view_registry_ViewRegistry,Kn=()=>Object(B.jsx)("div",{className:"canvasDataSource__section"},Object(B.jsx)(z.EuiCallOut,{title:c.i18n.translate("xpack.canvas.datasourceNoDatasource.panelTitle",{defaultMessage:"No data source present"}),iconType:"iInCircle"},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.datasourceNoDatasource.panelDescription",{defaultMessage:"This element does not have an attached data source. This is usually because the element is an image or other static asset. If that's not the case you might want to check your expression to make sure it is not malformed."}))));var qn=a(386);const Zn=({onSelect:e,datasources:t,current:a})=>{const n=Object(qn.css)({name:"18fk4ve",styles:"padding-bottom:60px;position:relative;&>button{position:absolute;left:0;right:0;bottom:0;border-radius:0;}"});return Object(B.jsx)("div",{className:"canvasDataSource__list"},t.map((t=>Object(B.jsx)(z.EuiCard,{key:t.name,title:t.displayName,titleElement:"h5",titleSize:"xs",icon:Object(B.jsx)(z.EuiIcon,{type:t.image,size:"l"}),description:t.help,layout:"horizontal",className:`canvasDataSource__card ${n}`,selectable:{isSelected:t.name===a,onClick:()=>e(t.name)}}))))};var Xn=a(29),Yn=a(244);const Jn=Object(I.withSuspense)(Xn.LazyErrorComponent),Qn=({done:e,datatable:t})=>Object(B.jsx)(z.EuiModal,{onClose:e,maxWidth:"1000px",className:"canvasModal--fixedSize"},Object(B.jsx)(z.EuiModalHeader,null,Object(B.jsx)(z.EuiModalHeaderTitle,null,c.i18n.translate("xpack.canvas.datasourceDatasourcePreview.modalTitle",{defaultMessage:"Datasource preview"}))),Object(B.jsx)(z.EuiModalBody,{className:"canvasDatasourcePreview"},Object(B.jsx)(z.EuiText,{size:"s"},Object(B.jsx)("p",null,Object(B.jsx)(i.FormattedMessage,{id:"xpack.canvas.datasourceDatasourcePreview.modalDescription",defaultMessage:"The following data will be available to the selected element upon clicking {saveLabel} in the sidebar.",values:{saveLabel:Object(B.jsx)("strong",null,c.i18n.translate("xpack.canvas.datasourceDatasourcePreview.saveButtonLabel",{defaultMessage:"Save"}))}}))),Object(B.jsx)(z.EuiSpacer,null),"error"===t.type?Object(B.jsx)(Jn,{payload:t}):Object(B.jsx)(z.EuiPanel,{className:"canvasDatasourcePreview__panel",paddingSize:"none"},t.rows.length>0?Object(B.jsx)(Yn.a,{datatable:t,showHeader:!0,paginate:!0}):Object(B.jsx)(z.EuiEmptyPrompt,{title:Object(B.jsx)("h2",null,c.i18n.translate("xpack.canvas.datasourceDatasourcePreview.emptyTitle",{defaultMessage:"No documents found"})),titleSize:"s",body:Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.datasourceDatasourcePreview.emptyFirstLineDescription",{defaultMessage:"We couldn't find any documents matching your search criteria."}),Object(B.jsx)("br",null),c.i18n.translate("xpack.canvas.datasourceDatasourcePreview.emptySecondLineDescription",{defaultMessage:"Check your datasource settings and try again."}))})))),er=e=>{const[t,a]=Object(n.useState)(),r=Object(f.useExpressionsService)();return Object(n.useEffect)((()=>{r.interpretAst({type:"expression",chain:[e.function]},{}).then(a)}),[r,e.function,a]),t?Object(B.jsx)(Qn,D()({},e,{datatable:t,setDatatable:a})):Object(B.jsx)(Nn.a,e)};class datasource_component_DatasourceComponent extends n.PureComponent{constructor(...e){super(...e),b()(this,"state",{defaultIndex:""}),b()(this,"getDatasourceFunctionNode",((e,t)=>({arguments:t,function:e,type:"function"}))),b()(this,"setSelectedDatasource",(e=>{const{datasource:t,resetArgs:a,updateArgs:n,selectDatasource:r,datasources:s,setSelecting:o}=this.props;t.name===e?a&&a():n&&n({}),r&&r(s.find((t=>t.name===e))),o(!1)})),b()(this,"save",(()=>{const{stateDatasource:e,stateArgs:t,setDatasourceAst:a}=this.props,n=this.getDatasourceFunctionNode(e.name,t);a&&a(n)}))}componentDidMount(){f.pluginServices.getServices().dataViews.getDefaultDataView().then((e=>{this.setState({defaultIndex:e.title})}))}componentDidUpdate(e){const{args:t,resetArgs:a,datasource:n,selectDatasource:r}=this.props;Object(u.isEqual)(e.args,t)||a(),Object(u.isEqual)(e.datasource,n)||r(n)}render(){const{datasources:e,datasourceDef:t,stateDatasource:a,stateArgs:s,updateArgs:o,selecting:i,setSelecting:l,previewing:u,setPreviewing:d,isInvalid:p,setInvalid:b,renderError:m}=this.props,{defaultIndex:g}=this.state;if(i)return Object(B.jsx)(Zn,{datasources:e,onSelect:this.setSelectedDatasource,current:a.name});const f=u?Object(B.jsx)(er,{show:u,done:()=>d(!1),function:this.getDatasourceFunctionNode(a.name,s)}):null,h=Object.values(s).some((e=>e&&"object"==typeof e[0]));return Object(B.jsx)(n.Fragment,null,Object(B.jsx)("div",{className:"canvasDataSource__section"},Object(B.jsx)(z.EuiButtonEmpty,{iconSide:"right",iconType:"arrowRight",onClick:()=>l(!i),className:"canvasDataSource__triggerButton",flush:"left",size:"s"},Object(B.jsx)(z.EuiIcon,{type:a.image,className:"canvasDataSource__triggerButtonIcon"}),a.displayName),Object(B.jsx)(z.EuiSpacer,{size:"s"}),h?Object(B.jsx)(z.EuiCallOut,{color:"warning"},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.datasourceDatasourceComponent.expressionArgDescription",{defaultMessage:"The datasource has an argument controlled by an expression. Use the expression editor to modify the datasource."}))):Object(B.jsx)(r.a.Fragment,null,a.render({args:s,updateArgs:o,datasourceDef:t,isInvalid:p,setInvalid:b,defaultIndex:g,renderError:m}),Object(B.jsx)(z.EuiHorizontalRule,{margin:"m"}),Object(B.jsx)(z.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButtonEmpty,{size:"s",onClick:()=>d(!0)},c.i18n.translate("xpack.canvas.datasourceDatasourceComponent.previewButtonLabel",{defaultMessage:"Preview data"}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButton,{disabled:p,size:"s",onClick:this.save,fill:!0,color:"success"},c.i18n.translate("xpack.canvas.datasourceDatasourceComponent.saveButtonLabel",{defaultMessage:"Save"})))))),f)}}const tr=e=>{const{datasource:t,stateDatasource:a}=e;return t&&a?Object(B.jsx)(datasource_component_DatasourceComponent,e):Object(B.jsx)(Kn,e)},ar=Object(l.connect)((e=>({element:Object(ee.p)(e),pageId:Object(ee.r)(e),functionDefinitions:Object(L.c)(e)})),(e=>({dispatchAstAtIndex:({index:t,element:a,pageId:n})=>r=>{e(Object(re.h)(a.id)),e(Object(re.m)(t,r,a,n))}})),((e,t,a)=>{const{element:n,pageId:r,functionDefinitions:s}=e,{dispatchAstAtIndex:o}=t,i=Object(u.get)(n,"ast.chain",[]).map(((e,t)=>{if("function"!==e.type)return;const a=e.arguments,n=mn.get(e.function);var r;return n?{datasource:n,datasourceDef:(r=n.name,s.find((e=>e.name===r&&"datatable"===e.type))),args:a,expressionIndex:t}:void 0})).filter(Boolean)[0];return{...a,...e,...t,...i,datasources:mn.toArray(),setDatasourceAst:o({pageId:r,element:n,index:i&&i.expressionIndex})}}))((e=>{const{args:t,datasource:a}=e,[r,s]=Object(n.useState)(t),[o,i]=Object(n.useState)(!1),[c,l]=Object(n.useState)(!1),[u,d]=Object(n.useState)(!1),[p,b]=Object(n.useState)(a),m=Object(n.useCallback)((()=>{s(t)}),[s,t]);return Object(B.jsx)(tr,D()({},e,{stateArgs:r,updateArgs:s,selecting:o,setSelecting:i,previewing:c,setPreviewing:l,isInvalid:u,setInvalid:d,stateDatasource:p,selectDatasource:b,resetArgs:m}))}));ar.propTypes={done:m.PropTypes.func};const nr=["view","model","transform","datasource"];function rr(e,t){const a=nr.filter((e=>null==t||e===t)).reduce(((t,a)=>{let n;switch(a){case"view":return n=$n.get(e),n?t.concat(n):t;case"model":return n=Un.get(e),n?t.concat(n):t;case"transform":return n=Wn.get(e),n?t.concat(n):t;default:return t}}),[]);if(a.length>1)throw new Error(`Found multiple expressions with name "${e}"`);return a[0]||null}var sr=a(105);const or=(e,t,a)=>Object.keys(a).find((n=>a[n].type===e&&a[n].value===t)),ir=e=>{const t={name:e.name,removable:e.removable,argResolver:e.argResolver,args:e.args,id:e.id,nestedFunctionsArgs:e.nestedFunctionsArgs,argType:e.argType,argTypeDef:e.argTypeDef,filterGroups:e.filterGroups,context:e.context,expressionType:e.expressionType,nextArgType:e.nextArgType,nextExpressionType:e.nextExpressionType,onAssetAdd:e.onAssetAdd,onValueAdd:e.onValueAdd,onValueChange:e.onValueChange,onValueRemove:e.onValueRemove,onContainerRemove:e.onContainerRemove,updateContext:e.updateContext};return Object(B.jsx)("div",{className:"canvasFunctionForm"},e.expressionType.render(t))},cr=({argType:e})=>{return Object(B.jsx)("div",{className:"canvasFunctionForm canvasFunctionForm--unknown-expression"},(t=e,c.i18n.translate("xpack.canvas.functionForm.functionUnknown.unknownArgumentTypeError",{defaultMessage:'Unknown expression type "{expressionType}"',values:{expressionType:t}})));var t},lr=e=>{const{contextExpression:t,expressionType:a,context:r,updateContext:s}=e,o=un()(t),i=Object(n.useCallback)(((e=!1)=>{(e||null==r&&a.requiresContext)&&s()}),[r,a.requiresContext,s]);return Object(n.useEffect)((()=>{const e=a.requiresContext&&o!==t;i(e)}),[t,a,i,o]),Object(B.jsx)("div",{className:"canvasFunctionForm canvasFunctionForm--loading"},Object(B.jsx)(Nn.a,null))},ur=({context:e})=>Object(B.jsx)("div",{className:"canvasFunctionForm canvasFunctionForm--error"},((e="")=>c.i18n.translate("xpack.canvas.functionForm.contextError",{defaultMessage:"ERROR: {errorMessage}",values:{errorMessage:e}}))(e.error));function dr(e,t,a){const n=!a||a.state===e;return t&&t.requiresContext&&n}const pr=e=>{const{expressionType:t,context:a}=e;return t?dr("pending",t,a)?Object(B.jsx)(lr,{context:e.context,expressionType:e.expressionType,updateContext:e.updateContext}):dr("error",t,a)?Object(B.jsx)(ur,{context:null!=a?a:{state:"error",error:"Error occured",value:t}}):Object(B.jsx)(ir,e):Object(B.jsx)(cr,{argType:e.argType})},br=()=>c.i18n.translate("xpack.canvas.error.esPersist.saveFailureTitle",{defaultMessage:"Couldn't save your changes to Elasticsearch"}),mr=(e,t)=>({id:Object(de.a)("asset"),type:e,value:t,"@created":(new Date).toISOString()}),gr=(e,t)=>{switch(e.response&&e.response.status){case 400:return t(e.response,{title:br()});case 413:return t(c.i18n.translate("xpack.canvas.error.esPersist.tooLargeErrorMessage",{defaultMessage:"The server gave a response that the workpad data was too large. This usually means uploaded image assets that are too large for Kibana or a proxy. Try removing some assets in the asset manager."}),{title:br()});default:return t(e,{title:c.i18n.translate("xpack.canvas.error.esPersist.updateFailureTitle",{defaultMessage:"Couldn't update workpad"})})}},fr=e=>{const{expressionIndex:t,...a}=e,{nextArgType:r,path:s,parentPath:o,argType:i}=a,c=Object(f.useWorkpadService)(),u=Object(f.useNotifyService)(),d=Object(l.useDispatch)(),p=Object(l.useSelector)((e=>Object(ee.b)(e,o,t)),ne.a),b=Object(l.useSelector)((e=>Object(ee.p)(e)),ne.a),m=Object(l.useSelector)((e=>Object(ee.r)(e)),l.shallowEqual),g=Object(l.useSelector)((e=>Object(xn.b)(e)),l.shallowEqual),h=Object(l.useSelector)((e=>Object(ee.g)(e)),l.shallowEqual),v=Object(l.useSelector)((e=>Object(ee.f)(e))),x=Object(n.useCallback)(((e,t)=>()=>{d(Object(re.a)({elementId:null==b?void 0:b.id,pageId:m,argName:e,value:t,path:s}))}),[d,null==b?void 0:b.id,m,s]),j=Object(n.useCallback)((()=>d(Object(re.f)(t,b,!1,o))),[d,b,t,o]),y=Object(n.useCallback)(((e,t)=>a=>{d(Object(re.l)({elementId:null==b?void 0:b.id,pageId:m,argName:e,value:a,valueIndex:t,path:s}))}),[d,null==b?void 0:b.id,m,s]),O=Object(n.useCallback)(((e,t)=>()=>{d(Object(re.c)({element:b,pageId:m,argName:e,argIndex:t,path:s}))}),[d,b,m,s]),_=Object(n.useCallback)((()=>{d(Object(re.c)({element:b,pageId:m,path:o}))}),[d,b,m,o]),w=Object(n.useCallback)(((e,t)=>{const a=mr(e,t);return c.updateAssets(v.id,{...v.assets,[a.id]:a}).then((e=>(d(Object(sr.c)(a)),a.id))).catch((e=>gr(e,u.error)))}),[d,u,c,v.assets,v.id]),k=Object(n.useCallback)(((e,t)=>or(e,t,g)||w(e,t)),[g,w]);return Object(B.jsx)(pr,D()({},a,{id:s,context:p,filterGroups:h,expressionType:rr(i),nextExpressionType:r?rr(r):void 0,onValueAdd:x,updateContext:j,onValueChange:y,onValueRemove:O,onContainerRemove:_,onAssetAdd:k}))},hr=e=>!e.type||"argument"===e.type,vr=(e,t)=>Object.keys(e).reduce(((a,n)=>t(n)?{...a,[n]:e[n]}:a),{}),xr=({context:e=[],mapped:t=[]},{context:a=[],mapped:n=[]})=>({mapped:[...t,...n],context:[...e,...a]}),jr=(e="",t,a,n=!1)=>{const r=void 0===a?t:`${t}.${a}`;return{path:e.length?`${e}.${r}`:r,removable:n}};function yr(e,{path:t,removable:a},n){const r=t,s=t?`${t}.chain`:"chain";return e.reduce(((t,o,i)=>{const c=`${s}.${i}.arguments`,l=Dn(o.function);if(t.context=t.context.concat(o),!l)return t;const{argumentsView:u,args:d}=((e,t)=>{const a=e.args.filter((e=>hr(e))),n=a.map((e=>e.name));return{args:vr(t,(e=>n.includes(e))),argumentsView:a}})(l,o.arguments),{argumentsView:p,args:b}=((e,t)=>{const a=e.args.filter((e=>!hr(e))),n=a.map((e=>e.name));return{args:vr(t,(e=>n.includes(e))),argumentsView:a}})(l,o.arguments),m=(({args:e,argsWithExprFunctions:t,argType:a,argTypeDef:n,argumentsView:r,argUiConfig:s,prevContext:o,expressionIndex:i,nextArg:c,path:l,parentPath:u,removable:d})=>{var p,b,m;const{expressions:g}=f.pluginServices.getServices();return{args:e,nestedFunctionsArgs:t,argType:a.function,argTypeDef:Object.assign(n,{args:r,name:null!==(p=null==s?void 0:s.name)&&void 0!==p?p:n.name,displayName:null!==(b=null==s?void 0:s.displayName)&&void 0!==b?b:n.displayName,help:null!==(m=null==s?void 0:s.help)&&void 0!==m?m:n.name}),argResolver:e=>g.interpretAst(e,o),contextExpression:(h=o,null!=h&&"expression"===h.type?Object(oa.h)(h):h),expressionIndex:i,nextArgType:c&&c.function,path:l,parentPath:u,removable:d};var h})({args:d,argsWithExprFunctions:b,argType:o,argTypeDef:l,argumentsView:u,argUiConfig:n,prevContext:(g=t.context,Array.isArray(g)&&g.length?{type:"expression",chain:g}:null),expressionIndex:i,nextArg:e[i+1]||null,path:c,parentPath:r,removable:a});var g;const h=((e,t,a)=>Object.keys(e).reduce(((n,r)=>{const s=e[r].map((({chain:e},n)=>yr(e,jr(a,r,n,!0),null==t?void 0:t.find((e=>e.name===r))))).reduce(((e,t)=>xr(e,t)),{mapped:[],context:[]});return xr(n,s)}),{mapped:[],context:[]}))(b,p,c);return xr(t,{...h,mapped:[m,...h.mapped]})}),{mapped:[],context:[]})}const Or=Object(xe.withProps)((e=>{const t=e.element;return{functionFormItems:yr(Object(u.get)(t,"ast.chain",[]),jr("","ast")).mapped}})),_r=Object(xe.compose)(Or)((({functionFormItems:e})=>{const t=e.map((e=>Object(B.jsx)(fr,D()({},e,{key:`${e.argType}-${e.expressionIndex}`}))));return Object(B.jsx)("div",null,t)})),wr=({element:e})=>{const t=Object(n.useMemo)((()=>{const t=Object(Pa.e)(e.expression)&&{id:"filters",name:c.i18n.translate("xpack.canvas.elementSettings.filtersTabLabel",{defaultMessage:"Filters",description:"This tab contains information about filters related to a Canvas element"}),content:Object(B.jsx)("div",{className:"canvasSidebar__pop"},Object(B.jsx)(nn,{element:e}))};return[{id:"edit",name:c.i18n.translate("xpack.canvas.elementSettings.displayTabLabel",{defaultMessage:"Display",description:"This tab contains the settings for how data is displayed in a Canvas element"}),content:Object(B.jsx)("div",{className:"canvasSidebar__pop"},Object(B.jsx)("div",{className:"canvasSidebar--args"},Object(B.jsx)(_r,{element:e})))},{id:"data",name:c.i18n.translate("xpack.canvas.elementSettings.dataTabLabel",{defaultMessage:"Data",description:"This tab contains the settings for the data (i.e. Elasticsearch query) used as the source for a Canvas element"}),content:Object(B.jsx)("div",{className:"canvasSidebar__pop"},Object(B.jsx)(ar,null))},...t?[t]:[]]}),[e]),[a,s]=Object(n.useState)(t[0].id),o=t.map((e=>Object(B.jsx)(z.EuiTab,{key:e.id,onClick:()=>{return t=e.id,void s(t);var t},isSelected:e.id===a},e.name))),i=Object(n.useMemo)((()=>t.map((({id:e,content:t})=>e===a?t:Object(B.jsx)("div",{style:{display:"none"}},t)))),[a,t]);return Object(B.jsx)(r.a.Fragment,null,Object(B.jsx)(z.EuiTabs,{size:"s"},o),i)},kr=({selectedElementId:e})=>{const t=Object(l.useSelector)((t=>Object(ee.c)(t,e,Object(ee.r)(t))),ne.a);return t?Object(B.jsx)(wr,{element:t}):null},Er=()=>Object(B.jsx)(n.Fragment,null,Object(B.jsx)(aa,{title:c.i18n.translate("xpack.canvas.sidebarContent.multiElementSidebarTitle",{defaultMessage:"Multiple elements",description:'The title displayed when multiple elements are selected. "elements" refer to the different visualizations, images, text, etc that can be added in a Canvas workpad.'})}),Object(B.jsx)(z.EuiSpacer,null),Object(B.jsx)(na,null)),Sr=()=>Object(B.jsx)(n.Fragment,null,Object(B.jsx)(aa,{title:c.i18n.translate("xpack.canvas.sidebarContent.groupedElementSidebarTitle",{defaultMessage:"Grouped element",description:'The title displayed when a grouped element is selected. "elements" refer to the different visualizations, images, text, etc that can be added in a Canvas workpad. These elements can be grouped into a larger "grouped element" that contains multiple individual elements.'})}),Object(B.jsx)(z.EuiSpacer,null),Object(B.jsx)(ra,null)),Cr=({selectedElementId:e})=>Object(B.jsx)(n.Fragment,null,Object(B.jsx)(aa,{title:c.i18n.translate("xpack.canvas.sidebarContent.singleElementSidebarTitle",{defaultMessage:"Selected element",description:'The title displayed when a single element are selected. "element" refer to the different visualizations, images, text, etc that can be added in a Canvas workpad.'}),showLayerControls:!0}),Object(B.jsx)(kr,{selectedElementId:e})),Mr=({selectedToplevelNodes:e,selectedElementId:t})=>e.length>1?Object(B.jsx)(Er,null):1===e.length&&e[0].includes("group")?Object(B.jsx)(Sr,null):1===e.length?Object(B.jsx)(Cr,{selectedElementId:t}):Object(B.jsx)(sn,null),Pr=({commit:e})=>{const t=Object(l.useSelector)((e=>Object(ee.t)(e)),l.shallowEqual),a=Object(l.useSelector)((e=>Object(ee.q)(e)),l.shallowEqual);return Object(B.jsx)(Mr,{commit:e,selectedToplevelNodes:t,selectedElementId:a})},Tr=({commit:e})=>Object(B.jsx)("div",{className:"canvasSidebar"},Object(B.jsx)(Pr,{commit:e}));var Nr=a(153),Ar=a(126);class dom_preview_DomPreview extends n.PureComponent{constructor(...e){super(...e),b()(this,"_container",null),b()(this,"_content",null),b()(this,"_observer",null),b()(this,"_original",null),b()(this,"_updateTimeout",0),b()(this,"update",(()=>{if(!this._content||!this._container)return;const e=document.querySelector(`#${this.props.elementId}`);if(e!==this._original){if(this._observer&&this._observer.disconnect(),this._original=e,!this._original)return clearTimeout(this._updateTimeout),void(this._updateTimeout=window.setTimeout(this.update,30));{const e=Object(u.debounce)(this.update,100);this._observer=new MutationObserver(e);const t={attributes:!0,childList:!0,subtree:!0};this._observer.observe(this._original,t)}}if(!this._original)return;const t=this._original.cloneNode(!0);t.id+="-thumb";const a=window.getComputedStyle(this._original,null),n=parseInt(a.getPropertyValue("width"),10),r=parseInt(a.getPropertyValue("height"),10);let s=0,o=0,i=1;this.props.height?(s=this.props.height,i=s/r,o=n*i):this.props.width&&(o=this.props.width,i=o/n,s=r*i),this._content.firstChild&&this._content.removeChild(this._content.firstChild),this._content.appendChild(t),this._content.style.cssText=`transform: scale(${i}); transform-origin: top left;`,this._container.style.cssText=`width: ${o}px; height: ${s}px;`;const c=this._original.querySelectorAll("canvas"),l=t.querySelectorAll("canvas");c.length>0&&Array.from(c).map(((e,t)=>{const a=l[t].getContext("2d");a&&a.drawImage(e,0,0)}))}))}componentDidMount(){this.update()}componentWillUnmount(){clearTimeout(this._updateTimeout),this._observer&&this._observer.disconnect()}render(){return Object(B.jsx)("div",{ref:e=>{this._container=e},className:"dom-preview"},Object(B.jsx)("div",{ref:e=>{this._content=e}}))}}const Ir=({pageId:e,onRemove:t,onDuplicate:a})=>Object(B.jsx)(z.EuiFlexGroup,{className:"canvasPageManager__controls",gutterSize:"xs",justifyContent:"spaceBetween"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{content:c.i18n.translate("xpack.canvas.pagePreviewPageControls.clonePageTooltip",{defaultMessage:"Clone"})},Object(B.jsx)(z.EuiButtonIcon,{iconType:"copy","aria-label":c.i18n.translate("xpack.canvas.pagePreviewPageControls.clonePageAriaLabel",{defaultMessage:"Clone page"}),onClick:t=>{t.preventDefault(),a(e)}}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{content:c.i18n.translate("xpack.canvas.pagePreviewPageControls.deletePageTooltip",{defaultMessage:"Delete"})},Object(B.jsx)(z.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":c.i18n.translate("xpack.canvas.pagePreviewPageControls.deletePageAriaLabel",{defaultMessage:"Delete page"}),onClick:a=>{a.preventDefault(),t(e)}})))),Fr=({isWriteable:e,page:t,height:a,onDuplicate:n,onRemove:r})=>Object(B.jsx)("div",{className:"canvasPageManager__pagePreview",style:{backgroundColor:t.style.background}},Object(B.jsx)(dom_preview_DomPreview,{elementId:t.id,height:a}),e&&Object(B.jsx)(Ir,{pageId:t.id,onDuplicate:n,onRemove:r})),Dr=e=>{const t=Object(l.useDispatch)(),a=Object(l.useSelector)((e=>({isWriteable:Object(ee.C)(e)&&Object(L.a)(e)}))),{gotoPage:r}=Object(n.useContext)(fi),s=Object(n.useCallback)((e=>{t(la.b({id:e,gotoPage:r}))}),[t,r]);return Object(B.jsx)(Fr,D()({},e,{onDuplicate:s,isWriteable:a.isWriteable}))};class page_manager_component_PageManager extends n.Component{constructor(e){super(e),b()(this,"_isMounted",!1),b()(this,"_activePageRef",null),b()(this,"_pageListRef",null),b()(this,"scrollToActivePage",(()=>{if(this._activePageRef&&this._pageListRef){if(!this._pageListRef.scrollTo)return;const e=this._activePageRef.offsetLeft,{left:t,right:a,width:n}=this._activePageRef.getBoundingClientRect(),{left:r,right:s,width:o}=this._pageListRef.getBoundingClientRect();t<r&&this._pageListRef.scrollTo({left:e,behavior:"smooth"}),a>s&&this._pageListRef.scrollTo({left:e-o+n,behavior:"smooth"})}})),b()(this,"onConfirmRemove",(e=>{this._isMounted&&this.setState({removeId:e})})),b()(this,"resetRemove",(()=>this._isMounted&&this.setState({removeId:null}))),b()(this,"doRemove",(()=>{const{onRemovePage:e}=this.props,{removeId:t}=this.state;this.resetRemove(),null!==t&&e(t)})),b()(this,"onDragEnd",(({draggableId:e,source:t,destination:a})=>{if(!a)return;const n=a.index-t.index;this.props.onMovePage(e,n)})),b()(this,"renderPage",((e,t)=>{const{isWriteable:a,selectedPage:n}=this.props,r=t+1;return Object(B.jsx)(z.EuiDraggable,{key:e.id,draggableId:e.id,index:t,isDragDisabled:!a,className:"canvasPageManager__page "+(e.id===n?"canvasPageManager__page-isActive":"")},Object(B.jsx)(z.EuiFlexGroup,{gutterSize:"s"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiText,{size:"xs",className:"canvasPageManager__pageNumber"},r)),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(fi.Consumer,null,(({getUrl:t})=>Object(B.jsx)(Ar.b,{to:t(r)},Object(B.jsx)("div",null,Object(B.jsx)(Dr,{height:100,page:e,onRemove:this.onConfirmRemove}))))))))})),this.state={showTrayPop:!0,removeId:null}}componentDidMount(){this._isMounted=!0,setTimeout((()=>{this.scrollToActivePage(),this._isMounted&&this.setState({showTrayPop:!1})}),1e3)}componentDidUpdate(e){e.selectedPage!==this.props.selectedPage&&setTimeout(this.scrollToActivePage,0)}componentWillUnmount(){this._isMounted=!1}render(){const{pages:e,onAddPage:t,isWriteable:a}=this.props,{showTrayPop:r,removeId:s}=this.state;return Object(B.jsx)(n.Fragment,null,Object(B.jsx)(z.EuiFlexGroup,{gutterSize:"none",className:"canvasPageManager"},Object(B.jsx)(z.EuiFlexItem,{className:"canvasPageManager__pages"},Object(B.jsx)(z.EuiDragDropContext,{onDragEnd:this.onDragEnd},Object(B.jsx)(z.EuiDroppable,{droppableId:"droppable-page-manager",grow:!0,direction:"horizontal"},Object(B.jsx)("div",{className:"canvasPageManager__pageList "+(r?"canvasPageManager--trayPop":"")},e.map(this.renderPage))))),a&&Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{anchorClassName:"canvasPageManager__addPageTip",content:c.i18n.translate("xpack.canvas.pageManager.addPageTooltip",{defaultMessage:"Add a new page to this workpad"}),position:"left"},Object(B.jsx)("button",{onClick:t,className:"canvasPageManager__addPage kbn-resetFocusState","data-test-subj":"canvasAddPageButton"},Object(B.jsx)(z.EuiIcon,{color:"ghost",type:"plusInCircle",size:"l"}))))),Object(B.jsx)(Nr.a,{isOpen:null!==s,title:c.i18n.translate("xpack.canvas.pageManager.confirmRemoveTitle",{defaultMessage:"Remove Page"}),message:c.i18n.translate("xpack.canvas.pageManager.confirmRemoveDescription",{defaultMessage:"Are you sure you want to remove this page?"}),confirmButtonText:c.i18n.translate("xpack.canvas.pageManager.removeButtonLabel",{defaultMessage:"Remove"}),onConfirm:this.doRemove,onCancel:this.resetRemove}))}}const Lr=({onPreviousPage:e})=>{const t=Object(l.useDispatch)(),a=Object(l.useSelector)((e=>({isWriteable:Object(ee.C)(e)&&Object(L.a)(e),pages:Object(ee.l)(e),selectedPage:Object(ee.r)(e),workpadId:Object(ee.u)(e).id,workpadCSS:Object(ee.u)(e).css||oe.r}))),{gotoPage:r}=Object(n.useContext)(fi),s=Object(n.useCallback)((()=>t(la.a({gotoPage:r}))),[t,r]),o=Object(n.useCallback)(((e,a)=>t(la.c(e,a,r))),[t,r]),i=Object(n.useCallback)((e=>t(la.d({id:e,gotoPage:r}))),[t,r]);return Object(B.jsx)(page_manager_component_PageManager,D()({onPreviousPage:e,onAddPage:s,onMovePage:o,onRemovePage:i},a))},Rr=({done:e})=>Object(B.jsx)("div",null,Object(B.jsx)("div",null,c.i18n.translate("xpack.canvas.expressionElementNotSelected.selectDescription",{defaultMessage:"Select an element to show expression input"})),e&&Object(B.jsx)(z.EuiButton,{size:"s",onClick:e}," ",c.i18n.translate("xpack.canvas.expressionElementNotSelected.closeButtonLabel",{defaultMessage:"Close"})));var zr=a(42);const Br=Object(I.withSuspense)(I.LazyExpressionInput),Hr=({error:e,...t})=>Object(B.jsx)("div",{className:"canvasExpressionInput"},Object(B.jsx)(z.EuiFormRow,{className:"canvasExpressionInput__inner",fullWidth:!0,isInvalid:Boolean(e),error:e},Object(B.jsx)("div",{className:"canvasExpressionInput__editor"},Object(B.jsx)(Br,D()({height:"100%"},t))))),Wr=({functionDefinitions:e,formState:t,updateValue:a,setExpression:r,done:s,error:o,isCompact:i,toggleCompactView:l})=>{const u=Object(n.useRef)(null),d=Object(B.jsx)(z.EuiPanel,{className:"canvasTray__panel canvasTray__panel--holdingExpression canvasExpression--"+(i?"compactSize":"fullSize"),paddingSize:"none"},(p=u,"RUN",b=()=>{o||r(t.expression)},Object(B.jsx)(h.Shortcuts,{name:"EXPRESSION",handler:e=>{p.current&&p.current&&p.current.hasTextFocus()&&"RUN"===e&&b()},targetNodeSelector:"body",global:!0,stopPropagation:!0})),Object(B.jsx)(Hr,{isCompact:i,expressionFunctions:e,error:o||" ",expression:t.expression,onChange:a,onEditorDidMount:e=>{null==e||e._standaloneKeybindingService.addDynamicKeybinding("-editor.action.insertLineAfter",zr.monaco.KeyMod.CtrlCmd|zr.monaco.KeyCode.Enter,(()=>{}))},editorRef:u}),Object(B.jsx)("div",{className:"canvasExpression__settings"},Object(B.jsx)(z.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{content:Object(B.jsx)("span",null,c.i18n.translate("xpack.canvas.expression.runTooltip",{defaultMessage:"Run the expression"})," ",Object(B.jsx)(Qt,{namespace:"EXPRESSION",action:"RUN"}))},Object(B.jsx)(z.EuiButton,{fill:!0,disabled:!!o,onClick:()=>{r(t.expression),i||o||l()},size:"s"},c.i18n.translate("xpack.canvas.expression.runButtonLabel",{defaultMessage:"Run"})))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButtonEmpty,{size:"s",color:t.dirty?"danger":"primary",onClick:s},t.dirty?c.i18n.translate("xpack.canvas.expression.cancelButtonLabel",{defaultMessage:"Cancel"}):c.i18n.translate("xpack.canvas.expression.closeButtonLabel",{defaultMessage:"Close"}))))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiLink,{href:"https://www.elastic.co/guide/en/kibana/current/canvas-function-reference.html",target:"_blank"},c.i18n.translate("xpack.canvas.expression.learnLinkText",{defaultMessage:"Learn expression syntax"}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButtonEmpty,{iconType:"fullScreen",onClick:l,size:"s"},i?c.i18n.translate("xpack.canvas.expression.maximizeButtonLabel",{defaultMessage:"Maximize editor"}):c.i18n.translate("xpack.canvas.expression.minimizeButtonLabel",{defaultMessage:"Minimize Editor"}))))))));var p,b;return i?d:Object(B.jsx)(z.EuiPortal,null,d)},Vr=({done:e})=>{const{element:t,pageId:a}=Object(l.useSelector)((e=>({pageId:Object(ee.r)(e),element:Object(ee.p)(e)})));return t?Object(B.jsx)(Gr,{key:t.id,done:e,element:t,pageId:a}):Object(B.jsx)(Rr,{done:e})},Gr=({done:e,element:t,pageId:a})=>{const r=Object(f.useExpressionsService)(),s=Object(l.useDispatch)(),[o,i]=Object(n.useState)(!0),c=Object(n.useCallback)((()=>{i(!o)}),[o,i]),u=Object(n.useCallback)((e=>{s(Object(re.h)(t.id)),s(Object(re.n)(e,t.id,a))}),[s,t,a]),[d,p]=Object(n.useState)({dirty:!1,expression:t.expression}),b=Object(n.useCallback)(((e="")=>{p({expression:e,dirty:!0})}),[p]),m=Object(n.useCallback)((e=>{p({...d,dirty:!1}),u(e)}),[p,u,d]),g=d.expression,h=Object(n.useMemo)((()=>{try{return Object(oa.d)(g),null}catch(e){return e.message}}),[g]);Object(n.useEffect)((()=>{t.expression===d.expression||d.dirty||p({dirty:!1,expression:t.expression})}),[t,p,d]);const v=Object(n.useMemo)((()=>Object.values(r.getFunctions())),[r]);return Object(B.jsx)(Wr,{done:e,isCompact:o,functionDefinitions:v,formState:d,setExpression:m,toggleCompactView:c,updateValue:b,error:h})},Ur=({children:e,done:t})=>Object(B.jsx)(r.a.Fragment,null,Object(B.jsx)(z.EuiFlexGroup,{className:"canvasTray__toggle",justifyContent:"spaceAround"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButtonIcon,{size:"s",onClick:t,"aria-label":c.i18n.translate("xpack.canvas.toolbarTray.closeTrayAriaLabel",{defaultMessage:"Close tray"}),iconType:"arrowDown"}))),Object(B.jsx)("div",{className:"canvasTray"},e)),$r=Object(l.connect)((e=>({workpadName:Object(ee.z)(e),workpadId:Object(ee.u)(e).id,totalPages:Object(ee.u)(e).pages.length,selectedPageNumber:Object(ee.s)(e)+1,selectedElement:Object(ee.p)(e),isWriteable:Object(ee.C)(e)&&Object(L.a)(e)})))((({isWriteable:e,selectedElement:t,selectedPageNumber:a,totalPages:r,workpadName:s})=>{const[o,i]=Object(n.useState)(null),{getUrl:l,previousPage:u}=Object(n.useContext)(fi);Object(n.useEffect)((()=>{e||"expression"!==o||i(null)}),[e,o]);const d=Boolean(t),p=t=>{if(o===t)i(null);else{if(!e&&"expression"===t)return;i(t)}},b={pageManager:Object(B.jsx)(Lr,{onPreviousPage:u}),expression:d?Object(B.jsx)(Vr,{done:()=>i(null)}):null};return Object(B.jsx)("div",{className:"canvasToolbar hide-for-sharing"},null!==o&&Object(B.jsx)(Ur,{done:()=>i(null)},b[o]),Object(B.jsx)("div",{className:"canvasToolbar__container"},Object(B.jsx)(z.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(B.jsx)(z.EuiFlexItem,{grow:!1,className:"canvasToolbar__home"},s),Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center",gutterSize:"none",className:"canvasToolbar__controls"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(Ar.a,{color:"text",to:l(a-1),iconType:"arrowLeft",isDisabled:a<=1,"aria-label":c.i18n.translate("xpack.canvas.toolbar.previousPageAriaLabel",{defaultMessage:"Previous Page"})})),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButtonEmpty,{color:"text",onClick:()=>p("pageManager"),"data-test-subj":"canvasPageManagerButton"},((e,t)=>c.i18n.translate("xpack.canvas.toolbar.pageButtonLabel",{defaultMessage:"Page {pageNum}{rest}",values:{pageNum:e,rest:t>1?` of ${t}`:""}}))(a,r))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(Ar.a,{color:"text",to:l(a+1),iconType:"arrowRight",isDisabled:a>=r,"aria-label":c.i18n.translate("xpack.canvas.toolbar.nextPageAriaLabel",{defaultMessage:"Next Page"})})),Object(B.jsx)(z.EuiFlexItem,null),d&&e&&Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButtonEmpty,{color:"text",iconType:"editorCodeBlock",onClick:()=>p("expression"),"data-test-subj":"canvasExpressionEditorButton"},c.i18n.translate("xpack.canvas.toolbar.editorButtonLabel",{defaultMessage:"Expression editor"}))))))))}));var Kr=a(196),qr=a.n(Kr);const Zr={zoomIn:({zoomScale:e,setZoomScale:t})=>()=>{const a=oe.E.find((t=>e<t))||oe.z;t(a)},zoomOut:({zoomScale:e,setZoomScale:t})=>()=>{const a=oe.E.slice().reverse().find((t=>e>t))||oe.A;t(a)},resetZoom:({setZoomScale:e})=>()=>{e(1)}};var Xr=a(43);let Yr;function Jr(e,t){Yr&&Yr("canvas",e,t)}var Qr=a(72),es=a(148),ts=a(92);const as=(e=(()=>({done(){},reload(){},update(){},event(){},onDestroy(){},getRenderMode:()=>"view",isSyncColorsEnabled:()=>!1,isSyncTooltipsEnabled:()=>!1,isSyncCursorEnabled:()=>!0,isInteractive:()=>!0,getExecutionContext:()=>{}}))())=>({...e,destroy(){},getElementId:()=>"",getFilter:()=>"",onComplete(e){this.done=e},onDestroy(e){this.destroy=e},onEmbeddableDestroyed(){},onEmbeddableInputChange(){},onResize(e){this.resize=e},resize(e){}}),ns=e=>{let t,a=!1,n=()=>{};return r=>{Object(u.isEqual)(t,r)||(a=!1,t=r);const{filters:s}=f.pluginServices.getServices();return{...as(),event(e){switch(e.name){case"embeddableInputChange":this.onEmbeddableInputChange(e.data);break;case"applyFilterAction":s.updateFilter(r.id,e.data);break;case"onComplete":this.onComplete(e.data);break;case"embeddableDestroyed":this.onEmbeddableDestroyed();break;case"resize":this.resize(e.data);break;case"onResize":this.onResize(e.data)}},getFilter:()=>r.filter||"",onComplete(e){n=e},getElementId:()=>r.id,onEmbeddableInputChange(t){e(Object(es.c)({elementId:r.id,embeddableExpression:t}))},onEmbeddableDestroyed(){const t=[r.id,"expressionRenderable"];e(Object(ts.a)({path:t})),e(Object(es.b)(r.id))},done(){a||(a=!0,n())}}}},rs=e=>e?"matrix3d("+e.join(",")+")":"translate3d(0,0,0)",ss=({children:e,transformMatrix:t,width:a,height:n})=>{const s=r.a.Children.only(e),o=t.map(((e,t)=>t<12?e:Math.round(e))),i={width:a,height:n,marginLeft:-a/2,marginTop:-n/2,position:"absolute",transform:rs(o)};return Object(B.jsx)("div",{className:"canvasPositionable canvasInteractable",style:i},s)},os=({render:e,style:t})=>{const a=Object(n.useCallback)((t=>{null!==t&&e(t)}),[e]);return Object(B.jsx)("div",{className:"render_to_dom",ref:a,style:t})},{RenderWithFn:is}=te.f,cs={height:"100%",width:"100%"},ls=({name:e,renderFn:t,reuseNode:a=!1,handlers:r,config:s,width:o,height:i})=>{const{error:c}=Object(f.useNotifyService)(),[l,d]=Object(n.useState)(null),p=Object(n.useRef)(!0),b=Object(n.useRef)(null),m=Object(n.useRef)(r),g=Object(n.useCallback)((()=>{if(!l)return;for(p.current||m.current.destroy();l.firstChild;)l.removeChild(l.firstChild);const e=document.createElement("div");e.style.width="100%",e.style.height="100%",l.appendChild(e),b.current=e,p.current=!0}),[l]);Object(n.useEffect)((()=>m.current.resize({height:i,width:o})),[i,o]),Object(n.useEffect)((()=>()=>{m.current.destroy()}),[]);const h=Object(n.useCallback)((async()=>{Object(u.isEqual)(m.current,r)||(m.current=r),await t(b.current,s,m.current)}),[b,s,t,r]);return Object(n.useEffect)((()=>{l&&(a&&b.current||g(),h().then((()=>{p.current=!1})).catch((t=>{c(t,{title:is.getRenderErrorMessage(e)})})))}),[l,e,c,h,g,a]),Object(B.jsx)("div",{className:"canvasWorkpad--element_render canvasRenderEl",style:cs},Object(B.jsx)(os,{style:cs,render:e=>{d(e)}}))};class element_share_container_ElementShareContainer extends r.a.PureComponent{constructor(...e){super(...e),b()(this,"state",{renderComplete:!1}),b()(this,"createDoneChecker",(()=>{})),b()(this,"clearDoneChecker",(()=>{clearTimeout(this.timeout)}))}componentDidMount(){const{onComplete:e}=this.props;this.createDoneChecker(),e((()=>{if(this.clearDoneChecker(),!this.sharedItemRef)return;const e=new CustomEvent("renderComplete");this.sharedItemRef.dispatchEvent(e),this.setState({renderComplete:!0})}))}getSnapshotBeforeUpdate(e){return{functionName:e.functionName}}componentDidUpdate(e,t,a){a.functionName!==this.props.functionName&&(this.clearDoneChecker(),this.createDoneChecker())}componentWillUnmount(){this.clearDoneChecker()}render(){const e="embeddable"!==this.props.functionName;return Object(B.jsx)("div",{"data-shared-item":e?this.state.renderComplete:void 0,"data-render-complete":e?this.state.renderComplete:void 0,className:this.props.className,ref:e=>this.sharedItemRef=e},this.props.children)}}const us=({selectElement:e})=>Object(B.jsx)("h3",{onClick:e},"Invalid expression"),ds=({renderableType:e,selectElement:t})=>Object(B.jsx)("h3",{onClick:t},"Element not found: ",e),ps=e=>{const{renderable:t,renderFunction:a,width:n,height:r,handlers:s,backgroundColor:o,state:i}=e,{onComplete:c}=s;if(!i||!t)return Object(B.jsx)(Nn.a,{backgroundColor:o});if(t&&"render"!==Object(oa.e)(t)&&!a)return Object(B.jsx)(ds,D()({},e,{renderableType:null==t?void 0:t.as}));if("error"===i||"render"!==Object(oa.e)(t)||!a)return Object(B.jsx)(us,e);const l=Object(u.omitBy)(t.containerStyle,u.isNil);return Object(B.jsx)("div",{css:Object(B.css)(t.css,"",""),className:"canvas__element canvasElement",style:{...l,width:n,height:r},"data-test-subj":"canvasWorkpadPageElementContent"},Object(B.jsx)(element_share_container_ElementShareContainer,{className:"canvasElement__content",onComplete:c,functionName:a.name},Object(B.jsx)(ls,{name:a.name,renderFn:a.render,reuseNode:a.reuseDomNode,config:t.value,width:n,height:r,handlers:s})))},bs=e=>{const t=Object(f.useExpressionsService)(),a=Object(l.useSelector)(ee.r),n=Object(l.useSelector)((e=>{var t;return null===(t=Object(ee.k)(e,a))||void 0===t?void 0:t.style.background}))||"",{renderable:r}=e,s=r?t.getRenderer(r.as):null;return Object(B.jsx)(ps,D()({},e,{renderFunction:s,backgroundColor:n}))},ms=Object(xe.compose)(Object(l.connectAdvanced)((function(e){let t={};const a=ns(e);return(e,n)=>{const{element:r,...s}=n,{transformMatrix:o,width:i,height:c}=r,l=Object(ee.o)(e,r.id,"expressionRenderable"),u={...s,selectedPage:Object(ee.r)(e),state:Object(Qr.b)(l),renderable:Object(Qr.c)(l),createHandlers:a,transformMatrix:o,width:i,height:c,element:{id:r.id,filter:r.filter,expression:r.expression}};return ne()(t,u)||(t=u),t}})),Object(xe.withPropsOnChange)(((e,t)=>!ne()(e.element,t.element)),(e=>{const{element:t,createHandlers:a}=e;return{handlers:a(t)}})),Object(xe.mapProps)((e=>{const{element:t,createHandlers:a,selectedPage:n,...r}=e;return r})))((e=>{const{renderable:t,transformMatrix:a,width:n,height:r,state:s,handlers:o}=e;return Object(B.jsx)(ss,{transformMatrix:a,width:n,height:r},Object(B.jsx)(bs,{renderable:t,state:s,handlers:o,width:n,height:r}))}));ms.propTypes={element:g.a.shape({id:g.a.string.isRequired,transformMatrix:g.a.arrayOf(g.a.number).isRequired,width:g.a.number.isRequired,height:g.a.number.isRequired,expression:g.a.string,filter:g.a.string}).isRequired},g.a.string.isRequired,g.a.object,g.a.string.isRequired,g.a.object.isRequired,g.a.arrayOf(g.a.shape({id:g.a.string.isRequired,transformMatrix:g.a.arrayOf(g.a.number).isRequired,width:g.a.number.isRequired,height:g.a.number.isRequired,type:g.a.string})).isRequired,g.a.number.isRequired,g.a.number.isRequired,g.a.func,g.a.string,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func,g.a.func.isRequired,g.a.func.isRequired,g.a.func.isRequired,g.a.number.isRequired;class static_workpad_page_StaticWorkpadPage extends n.PureComponent{render(){const{pageId:e,pageStyle:t,className:a,animationStyle:n,elements:r,height:s,width:o}=this.props;return Object(B.jsx)("div",{key:e,id:e,"data-test-subj":"canvasWorkpadPage",className:`canvasPage kbn-resetFocusState canvasStaticPage ${a}`,"data-shared-items-container":!0,style:{...t,...n,height:s,width:o}},r.filter((e=>!Object(Ht.a)(e.id))).map((e=>Object(B.jsx)(ms,{key:e.id,element:e}))))}}let gs=0;const fs=e=>(...t)=>{let a=NaN,n=null;return r=>a===(a=r.primaryUpdate.payload.uid)?n:n=e(...t.map((e=>e(r))))},hs=e=>e,vs=fs((e=>e.currentScene))(hs),xs=fs((e=>e.primaryUpdate))(hs),js=Boolean(window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.match("Macintosh|iPhone|iPad")),ys=e=>e.primaryUpdate,Os=fs((e=>e.gestureState))(vs),_s=fs((e=>"cursorPosition"===e.type?e.payload:null))(ys),ws=fs((e=>"mouseEvent"===e.type?e.payload:null))(ys),ks=fs((({type:e,payload:{altKey:t,metaKey:a,shiftKey:n,ctrlKey:r}})=>"cursorPosition"===e||"mouseEvent"===e?{altKey:t,metaKey:a,shiftKey:n,ctrlKey:r}:{}))(ys),Es=fs(js?e=>e.metaKey:e=>e.altKey)(ks),Ss=fs(js?e=>e.altKey:e=>e.ctrlKey)(ks),Cs=fs((e=>e.shiftKey))(ks),Ms=fs((({cursor:e},t)=>t||e))(Os,_s),Ps=fs((e=>{if(!e)return{down:!1,up:!1,uid:null};const{event:t,uid:a}=e;return"mouseDown"===t?{down:!0,up:!1,uid:a}:"mouseUp"===t?{down:!1,up:!0,uid:a}:{down:!1,up:!1,uid:null}}))(ws),Ts=fs((({mouseIsDown:e},t)=>t?"mouseDown"===t.event:e))(Os,ws),Ns=fs((e=>e&&("actionEvent"===e.type||"mouseEvent"===e.type&&"mouseUp"===e.payload.event)))(ys),As=fs((({mouseButtonState:{buttonState:e,downX:t,downY:a}},n,{x:r,y:s})=>{const o=((e,t,a)=>{switch(e){case"up":return t?"downed":"up";case"downed":return t?a?"dragging":"downed":"up";case"dragging":return t?"dragging":"up"}})(e,n,r!==t||s!==a);return{buttonState:o,downX:"downed"===o?r:t,downY:"downed"===o?s:a}}))(Os,Ts,Ms),Is=fs((e=>"downed"===e.buttonState))(As),Fs=fs((e=>"dragging"===e.buttonState))(As),Ds=fs((({buttonState:e,downX:t,downY:a},{x:n,y:r})=>({down:"up"!==e,x0:t,y0:a,x1:n,y1:r})))(As,Ms),Ls=fs((e=>"actionEvent"===e.type?e.payload:null))(ys),Rs=fs(((e,t,a)=>({cursor:e,mouseIsDown:t,mouseButtonState:a})))(Ms,Ts,As),zs=fs((e=>e.shapes))(vs),Bs=fs((e=>e.configuration))(vs),Hs=fs(((e,t,a)=>((e,{x:t,y:a})=>((e,t,a)=>e.map(((e,n)=>({...Ue(e,t,a),shape:e,index:n}))))(e,t,a).filter((e=>e.inside)).sort(((e,t)=>t.z-e.z||t.index-e.index)).map((e=>e.shape)))(t.filter((t=>("annotation"!==t.type||t.interactive)&&(e.intraGroupManipulation||!t.parent||"annotation"===t.type))),a)))(Bs,zs,Ms),Ws=fs((e=>e.length?e[0]:null))(Hs),Vs=fs((({draggedShape:e,shapes:t},a,n,r)=>n&&t.reduce(((t,a)=>t||e&&a.id===e.id),!1)&&e||n&&r&&a))(vs,Ws,Ts,Is),Gs=fs(((e,t)=>e||t))(Vs,Ws),Us=fs((e=>e?["relax"]:[]))(Es),$s=Cs,Ks=fs((({mouseTransformState:e})=>e||rt))(vs),qs=fs(((e,t,{x0:a,y0:n,x1:r,y1:s})=>{if(!t||isNaN(a)||isNaN(n)||isNaN(r)||isNaN(s))return rt;{const t=r-a,o=s-n;return{deltaX:t,deltaY:o,transform:Me(t-e.deltaX,o-e.deltaY,0),cumulativeTransform:Me(t,o,0)}}}))(Ks,Fs,Ds),Zs=fs((e=>[e].filter((e=>e.transform)).map((({transform:e,cumulativeTransform:t})=>({transform:e,cumulativeTransform:t})))))(qs),Xs=fs(((e,t,{x0:a,y0:n,x1:r,y1:s})=>e&&!t&&{x:(a+r)/2,y:(n+s)/2,a:Math.abs(r-a)/2,b:Math.abs(s-n)/2}))(Fs,Vs,Ds),Ys=fs(((e,t)=>(e.selectedShapes||[]).map((e=>t.find((t=>t.id===e))))))(vs,zs),Js=fs((e=>e.selectionState))(vs),Qs=fs(((e,t)=>{if(!e)return[];const a=(({x:e,y:t,a:a,b:n})=>(r,s,o)=>{const i=((e,t,a)=>[ke,Ee,Ce,Se].map((n=>Ae(e,(([e,t,a,n],[r,s,o,i])=>[e*r,t*s,a*o,n*i])(n,[t,a,0,1])))))(r,s,o);return i.every((([r,s])=>e-a<=r&&r<=e+a&&t-n<=s&&s<=t+n))})(e);return t.filter((e=>"annotation"!==e.type&&!e.parent&&a(e.transformMatrix,e.a,e.b)))}))(Xs,zs),eo=fs(((e,t,a,n,{up:r,down:s,uid:o},i,c,l)=>{const u=o===e.uid,d=!s;return a&&(e.shapes=a.slice()),d||u?{...e,shapes:r&&e.boxHighlightedShapes.length?e.shapes.concat(e.boxHighlightedShapes).filter(((e,t,a)=>a.findIndex((t=>t.id===e.id))===t)):e.shapes,down:s,uid:o,metaHeld:i,boxHighlightedShapes:l}:(t.singleSelect||!c?Dt:Lt)(e,t,n,i,o,a,l)}))(Js,Bs,Ys,Hs,Ps,Es,$s,Qs),to=fs((({uid:e,depthIndex:t,down:a,metaHeld:n,boxHighlightedShapes:r})=>({uid:e,depthIndex:t,down:a,metaHeld:n,boxHighlightedShapes:r})))(eo),ao=fs((e=>e.shapes))(eo),no=fs((e=>e.map(ot)))(ao),ro=Ss,so=fs(((e,t)=>(t?ct:lt)(e)))(Bs,ro),oo=fs(((e,t,a,n,r,s,o)=>[...ut(t.map((e=>e.cumulativeTransform)),a),...dt(e,t.map((e=>e.transform)),a,n,r,s),...pt(e,t,a,n,o)]))(Bs,Zs,ao,zs,Ms,Us,so),io=fs((e=>zt[e&&e.event]||null))(Ls),co=fs((e=>Bt[e&&e.event]||null))(Ls),lo=fs(((e,t,a,n)=>{if(1!==n.length||"adHocGroup"!==n[0].subtype)return[];const r=n[0],s=a.filter((e=>e.parent===r.id&&"annotation"!==e.type));if(e&&s.length>1){const{controlledAnchor:t,horizontal:a}=e,n=nt(r,[[1/0,1/0],[-1/0,-1/0]]),o=gt(n,t,a);return s.map((e=>{const n=nt(e,[[1/0,1/0],[-1/0,-1/0]]),r=gt(n,t,a),s=o-r;return{cumulativeTransforms:[Me(a?s:0,a?0:s,0)],shapes:[e.id]}}))}if(t&&s.length>2){const{horizontal:e}=t,{a:a,b:n}=r,o=nt(r,[[1/0,1/0],[-1/0,-1/0]]),i=gt(o,-1,e),c=mt(e),l=s.map((e=>nt(e,[[1/0,1/0],[-1/0,-1/0]]))),u=l.map((t=>gt(t,-1,e))),d=l.map((e=>[e[0][c],e[1][c]])),p=d.map((e=>(e[1]+e[0])/2)),b=d.map((e=>e[1]-e[0])),m=b.reduce(((e,t)=>e+t),0),g=((e?2*a:2*n)-m)/(s.length-1),f=[...Array(s.length)].map(((e,t)=>t)).sort(((e,t)=>p[e]-p[t]));return f.reduce((({cursor:e,deltas:t},a)=>{const n=b[a],r=u[a];return{cursor:e+n+g,deltas:[...t,e-r]}}),{cursor:i,deltas:[]}).deltas.map(((t,a)=>{const n=f[a];return{cumulativeTransforms:[Me(e?t:0,e?0:t,0)],shapes:[s[n].id]}}))}return[]}))(io,co,zs,ao),uo=fs(((e,t)=>e.concat(t)))(oo,lo),po=fs(((e,t)=>{return e.map((a=t,e=>{const t=Object(se.c)(a.map((t=>t.transforms&&t.transforms.length&&t.shapes.find((t=>t===e.id))&&t.transforms.map(bt(e.localTransformMatrix)))).filter(se.d)),n=Object(se.c)(a.map((t=>t.sizes&&t.sizes.length&&t.shapes.find((t=>t===e.id))&&t.sizes)).filter(se.d)),r=Object(se.c)(a.map((t=>t.cumulativeTransforms&&t.cumulativeTransforms.length&&t.shapes.find((t=>t===e.id))&&t.cumulativeTransforms.map(bt(e.localTransformMatrix)))).filter(se.d)),s=Object(se.c)(a.map((t=>t.cumulativeSizes&&t.cumulativeSizes.length&&t.shapes.find((t=>t===e.id))&&t.cumulativeSizes)).filter(se.d)),o=Ne(e.baselineLocalTransformMatrix||e.localTransformMatrix,...t),i=Ne(...r),c=Ve(...n)||He,l=r.length?Ne(o,i):o,u=Ve(...s),d=(([e,t,a,n,r,s,o,i,c],[l,u,d])=>[e*l+n*u+o*d,t*l+r*u+i*d,a*l+s*u+c*d])(s.length?Ve(c,u):c,e.baseAB?[...e.baseAB,1]:[e.a,e.b,1]),p=!(t.length||n.length||r.length||s.length);return{...e,baselineLocalTransformMatrix:p?null:o,baselineSizeMatrix:p?null:c,localTransformMatrix:p?e.localTransformMatrix:l,a:p?e.a:d[0],b:p?e.b:d[1],baseAB:p?null:e.baseAB||[e.a,e.b]}}));var a}))(zs,uo),bo=fs(((e,t)=>t&&e.find((e=>e.id===ot(t)))))(zs,Vs),mo=fs(((e,t,a,n)=>{const r=a?[t.find((e=>e.id===a.id))].filter(se.d):[];return r.length?((e,t,a,n)=>{const r={};let s=0;const o=Ye[n.horizontalPosition],i=Je[n.verticalPosition];for(const c of a){if("annotation"===c.type)continue;const a=e.pageWidth/2+1,l=e.pageHeight/2+1,u=[{a:a,b:l,localTransformMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,a-1,l-1,0,1]}];for(const a of t.concat(u)){if("annotation"===a.type)continue;if(!e.intraGroupManipulation&&a.parent)continue;if(e.intraGroupSnapOnly&&c.parent!==a.parent&&c.parent!==a.id)continue;const l=c.id===a.id?{...c,localTransformMatrix:c.baselineLocalTransformMatrix||c.localTransformMatrix,a:c.baseAB?c.baseAB[0]:c.a,b:c.baseAB?c.baseAB[1]:c.b}:a;for(let a=-1;a<2;a++)for(let u=-1;u<2;u++){if(a&&!u||!a&&u)continue;if(n.subtype===e.resizeHandleName&&!(o===a&&i===u||0===o&&0!==a&&i===u||0===i&&0!==u&&o===a))continue;const d=$e(c.a,c.b,xt(t,c),a,u);for(let n=-1;n<2;n++)for(let o=-1;o<2;o++){if(n&&!o||!n&&o)continue;const i=$e(l.a,l.b,xt(t,l),n,o);for(let t=0;t<2;t++){const n=1-t,o=d[t],p=i[t],b=a+"|"+u+"|"+t,m=o-p,g=Math.abs(m),f=r[b];if(Math.round(g)<=e.guideDistance&&(!f||g<=f.distance)){const a=[d[n],i[n],...f?[f.lowPoint,f.highPoint]:[]],o=Math.min(...a),u=Math.max(...a),h=(o+u)/2,v=h-o;r[b]={id:s++,localTransformMatrix:Me(t?h:p,t?p:h,e.atopZ),a:t?v:.5,b:t?.5:v,lowPoint:o,highPoint:u,distance:g,signedDistance:m,dimension:t?"vertical":"horizontal",constrained:c.id,constrainer:l.id}}}}}}}return Object.values(r)})(e,t,r,n).map((t=>({...t,id:e.alignmentGuideName+"_"+t.id,type:"annotation",subtype:e.alignmentGuideName,interactive:!1,backgroundColor:"magenta",parent:null}))):[]}))(Bs,po,bo,Vs),go=fs(((e,t,a)=>e?a:t.slice(0,1)))(Xs,Hs,Qs),fo=fs(((e,t,a,n)=>t.filter((e=>e&&"annotation"!==e.type&&-1===a.indexOf(e.id)&&!n)).map(Rt(e.hoverAnnotationName,e.hoverLift))))(Bs,go,no,Vs),ho=fs(((e,t,a,n,r,s,o)=>{const i=t.filter((e=>"annotation"!==e.type)),c=a&&a.subtype;if(c&&-1===[e.resizeHandleName,e.adHocGroupName,e.persistentGroupName].indexOf(c))return i;const l=r,u=-1!==s.indexOf("relax"),d=e.snapConstraint&&!u,p=d&&wt(l,yt),b=d&&wt(l,Ot),m=c===e.resizeHandleName?((e,t,a,n,r,s)=>o=>{const i=a&&o.id===a.id,c=e&&e.constrained===o.id,l=t&&t.constrained===o.id,u=c?e.signedDistance:0,d=l?-t.signedDistance:0;if(c||l){const e=n?1:.5,t=Be(a.localTransformMatrix),i=-Ye[r],c=Je[s],l=Math.sin(t),p=Math.cos(t),b=i*(p*u-l*d),m=c*(l*u+p*d),g=De(Ne(Te(t),Me((1-e)*-u,(1-e)*d,0))),f=[e*b,e*m];return{...o,snapDeltaMatrix:g,snapResizeVector:f}}return i?{...o,snapDeltaMatrix:null,snapResizeVector:null}:Ct(o)})(p,b,n,o,a.horizontalPosition,a.verticalPosition):((e,t,a)=>n=>{const r=e&&e.constrained===n.id,s=t&&t.constrained===n.id,o=r?-e.signedDistance:0,i=s?-t.signedDistance:0;if(r||s){if(!o&&!i)return n;const e=De(Ne(Te(Be(a.localTransformMatrix)),Me(o,i,0)));return{...n,snapDeltaMatrix:e}}return n.snapDeltaMatrix||n.snapResizeVector?Ct(n):n})(p,b,n);return i.map(m)}))(Bs,po,Vs,bo,mo,Us,ro),vo=fs(((e,t)=>e.concat(t.filter((e=>"annotation"===e.type)))))(ho,po),xo=fs(((e,t,a,n,r)=>a&&a.subtype===e.rotationHandleName?[{id:e.rotationTooltipName+"_"+t.id,type:"annotation",subtype:e.rotationTooltipName,interactive:!1,parent:null,localTransformMatrix:Me(r.x,r.y,e.tooltipZ),a:0,b:0,text:String(Math.round(Be(t.transformMatrix)/Math.PI*180))}]:[]))(Bs,bo,Vs,uo,Ms),jo=fs(((e,t)=>{const a=e&&e.event;return t||"group"!==a&&"ungroup"!==a?null:a}))(Ls,Ts),yo=fs(((e,t,a)=>{const n=t.filter((t=>t.type===e.groupName&&t.subtype===e.adHocGroupName)),r=(e=>t=>e.find((e=>t=>t.id===e.id)(t)))(a),s=e=>r(e)&&"annotation"!==e.type,o=t.filter(s),i=t.filter(Object(se.f)(s));return{selectionOutsideGroup:!a.some((t=>(t=>t.type===e.groupName)(t)||(t=>t.parent&&t.parent.startsWith(e.groupName))(t))),freshSelectedShapes:o,freshNonSelectedShapes:i,preexistingAdHocGroups:n}}))(Bs,vo,ao),Oo=fs(((e,t,a,n,r)=>{const{selectionOutsideGroup:s,freshSelectedShapes:o,freshNonSelectedShapes:i,preexistingAdHocGroups:c}=r;if("group"===n){const n=a.filter((t=>t.subtype===e.adHocGroupName));return{shapes:t.map((t=>t.subtype===e.adHocGroupName?{...t,subtype:e.persistentGroupName}:t)),selectedShapes:a.filter((t=>t.subtype!==e.adHocGroupName)).concat(n.map((t=>({...t,subtype:e.persistentGroupName}))))}}if("ungroup"===n)return Mt(a.filter((t=>t.subtype===e.persistentGroupName)),t,Pt(c,o));if(c.length&&s)return Mt(c,t,Pt(c,o));const l=((e,t)=>{const a=Object(se.a)(e.map((e=>e.id)));return t.filter((e=>a[e.id])).map(st(e))})(t,a);if(1===l.length&&"group"===l[0].type)return e.groupResize?{shapes:[...It(t.filter((e=>"annotation"!==e.type)),l[0]),...t.filter((e=>"annotation"===e.type))],selectedShapes:a}:Ft(t,a);if(a.length<2)return Ft(t,a);{const a=((e,t)=>{const a=t.reduce(((e,t)=>at(e,...nt(t,e))),[[1/0,1/0],[-1/0,-1/0]]),{a:n,b:r,localTransformMatrix:s,rigTransform:o}=(([[e,t],[a,n]])=>{const r=(a-e)/2,s=(n-t)/2,o=e+r,i=t+s;return{a:r,b:s,localTransformMatrix:Me(o,i,0),rigTransform:Me(-o,-i,-0)}})(a);return{id:((e,t)=>{const a=e+"|"+t;return Ke[a]||(Ke[a]=Object(de.a)(e))})(e.groupName,t.map((e=>e.id)).join("|")),type:e.groupName,subtype:e.adHocGroupName,a:n,b:r,localTransformMatrix:s,rigTransform:o,parent:null}})(e,o),n=((t,a,n)=>Object(se.g)((e=>e.id),Object(se.c)(n.map((t=>(t=>t.subtype===e.adHocGroupName)(t)?a.filter((e=>e.parent===t.id)):t)))))(0,t,o),r=n.map((e=>({...e,parent:a.id,localTransformMatrix:Ne(a.rigTransform,e.transformMatrix)}))),s=t=>t.subtype!==e.adHocGroupName&&!r.find((e=>t.id===e.id)),l=t=>t.parent&&t.parent.startsWith(e.groupName)&&c.find((e=>e.id===t.parent))?{...t,parent:null}:t;return{shapes:r.concat(i.filter(s).map(l)).concat([a]),selectedShapes:[a]}}}))(Bs,vo,ao,jo,yo),_o=fs((({selectedShapes:e})=>e))(Oo),wo=fs((e=>e.map((e=>e.id))))(_o),ko=fs((e=>e.map(ot)))(_o),Eo=fs(((e,{shapes:t})=>{const a=t.filter((t=>t.subtype===e.adHocGroupName));return t.filter((e=>"annotation"!==e.type&&e.parent&&a.find((t=>t.id===e.parent)))).map(Rt(e.getAdHocChildAnnotationName,e.hoverLift))}))(Bs,Oo),So=fs(St)(Bs,Oo),Co=fs(((e,{shapes:t,selectedShapes:a})=>a.map(((n,r)=>kt(e,t,a,n,r))).filter(se.d)))(Bs,Oo),Mo=fs(((e,t)=>t?[{id:e.dragBoxAnnotationName,type:"annotation",subtype:e.dragBoxAnnotationName,interactive:!1,parent:null,localTransformMatrix:Me(t.x,t.y,e.dragBoxZ),a:t.a,b:t.b}]:[]))(Bs,Xs),Po=fs((({shapes:e},t,a,n,r,s,o,i)=>{const c=[].concat(t,a,n,r,s,o,i);return e.filter((e=>"annotation"!==e.type)).concat(c)}))(Oo,mo,fo,Co,So,xo,Eo,Mo),To=fs((e=>e.map((e=>t=>({...t,transformMatrix:jt(e,t),width:2*ht(t),height:2*vt(t)}))(e))))(Po),No=fs(((e,t,a)=>{if(!t)return"auto";switch(t.subtype){case e.rotationHandleName:return"crosshair";case e.resizeHandleName:const n=(180*Be(t.transformMatrix)/Math.PI+360)%360+t.cursorAngle,r=(45*Math.round(n/45)+360)%360;return tt[r];default:return a?"grabbing":"grab"}}))(Bs,Gs,bo),Ao=fs(((e,t,a,n,r,s,o,i,c,l,u)=>({configuration:e,hoveredShape:t,selectedShapes:a,selectedPrimaryShapes:n,shapes:r,gestureEnd:s,draggedShape:o,cursor:i,selectionState:c,mouseTransformState:l,gestureState:u})))(Bs,Ws,wo,ko,To,Ns,Vs,No,to,qs,Rs),Io=fs(((e,t)=>({primaryUpdate:t,currentScene:e})))(Ao,xs),Fo=({transformMatrix:e,width:t,height:a})=>Object(B.jsx)("div",{className:"canvasAlignmentGuide canvasInteractable canvasLayoutAnnotation",style:{background:"magenta",height:a,marginLeft:-t/2,marginTop:-a/2,position:"absolute",transform:rs(e),width:t}}),Do=({transformMatrix:e,width:t,height:a})=>Object(B.jsx)("div",{className:"canvasDragBoxAnnotation canvasLayoutAnnotation",style:{height:a,marginLeft:-t/2,marginTop:-a/2,transform:rs(e),width:t}}),Lo=({transformMatrix:e,width:t,height:a})=>Object(B.jsx)("div",{className:"canvasHoverAnnotation canvasLayoutAnnotation",style:{width:t,height:a,marginLeft:-t/2,marginTop:-a/2,transform:rs(e)}}),Ro=({transformMatrix:e,text:t})=>{const a={transform:`${rs(e)} translate(1em, -1em)`};return Object(B.jsx)("div",{className:"tooltipAnnotation canvasLayoutAnnotation",style:a},Object(B.jsx)("p",null,t,"°"))},zo=({transformMatrix:e,zoomScale:t=1})=>Object(B.jsx)("div",{className:"canvasRotationHandle canvasLayoutAnnotation",style:{transform:rs(e)}},Object(B.jsx)("div",{className:"canvasRotationHandle__handle",style:{transform:`scale3d(${1/t},${1/t},1)`}})),Bo=({transformMatrix:e,width:t,height:a})=>Object(B.jsx)("div",{className:"canvasBorderConnection canvasLayoutAnnotation",style:{height:a,marginLeft:-t/2,marginTop:-a/2,position:"absolute",transform:rs(e),width:t}}),Ho=({transformMatrix:e,zoomScale:t=1})=>Object(B.jsx)("div",{className:"canvasBorderResizeHandle canvasLayoutAnnotation",style:{transform:`${rs(e)} scale3d(${1/t},${1/t}, 1)`}}),Wo=["button","checkbox","color","file","image","radio","range","reset","submit"],Vo=({tagName:e,type:t})=>{switch(e.toLowerCase()){case"input":return!Wo.includes(t);case"textarea":return!0;default:return!1}};class workpad_shortcuts_WorkpadShortcuts extends n.Component{constructor(...e){super(...e),b()(this,"_keyMap",{CUT:this.props.cutNodes,COPY:this.props.copyNodes,PASTE:this.props.pasteNodes,CLONE:this.props.cloneNodes,DELETE:this.props.deleteNodes,BRING_TO_FRONT:this.props.bringToFront,BRING_FORWARD:this.props.bringForward,SEND_BACKWARD:this.props.sendBackward,SEND_TO_BACK:this.props.sendToBack,GROUP:this.props.groupNodes,UNGROUP:this.props.ungroupNodes,SHIFT_UP:this.props.shiftUp,SHIFT_DOWN:this.props.shiftDown,SHIFT_LEFT:this.props.shiftLeft,SHIFT_RIGHT:this.props.shiftRight,NUDGE_UP:this.props.nudgeUp,NUDGE_DOWN:this.props.nudgeDown,NUDGE_LEFT:this.props.nudgeLeft,NUDGE_RIGHT:this.props.nudgeRight})}render(){return Object(B.jsx)(h.Shortcuts,{name:"ELEMENT",handler:(e,t)=>{Vo(t.target)||"function"!=typeof this._keyMap[e]||(t.preventDefault(),this._keyMap[e]())},targetNodeSelector:"body",global:!0})}shouldComponentUpdate(e){return!ne()(e,this.props)}}const Go=Object(xe.compose)(Object(xe.withHandlers)(ge),Object(xe.withHandlers)(he),Object(xe.withHandlers)(be),Object(xe.withHandlers)(fe),Object(xe.withHandlers)(ve))(workpad_shortcuts_WorkpadShortcuts);Go.propTypes={pageId:g.a.string.isRequired,selectedNodes:g.a.arrayOf(g.a.object),elementLayer:g.a.func.isRequired,insertNodes:g.a.func.isRequired,removeNodes:g.a.func.isRequired,selectToplevelNodes:g.a.func.isRequired,commit:g.a.func.isRequired};class interaction_boundary_InteractionBoundary extends n.PureComponent{constructor(){super(),this.state={height:"0",width:"0",marginLeft:"0",marginTop:"0"}}componentDidMount(){const e=$("#"+rl),t=e.height(),a=e.width();t&&a&&this.setState({height:t-24+"px",width:a-24+"px",marginLeft:-(a-24)/2+"px",marginTop:-(t-24)/2+"px"})}render(){const e={top:"50%",left:"50%",position:"absolute",...this.state};return Object(B.jsx)("div",{id:"canvasInteractionBoundary",style:e})}}class interactive_workpad_page_InteractiveWorkpadPage extends n.PureComponent{componentWillUnmount(){this.props.resetHandler()}render(){const{pageId:e,pageStyle:t,className:a,elements:n,cursor:r="auto",height:s,width:o,onDoubleClick:i,onKeyDown:c,onMouseDown:l,onMouseLeave:u,onMouseMove:d,onMouseUp:p,onAnimationEnd:b,onWheel:m,selectedNodes:g,selectToplevelNodes:f,insertNodes:h,removeNodes:v,elementLayer:x,canvasOrigin:j,saveCanvasOrigin:y,commit:O,setMultiplePositions:_,zoomScale:w}=this.props;let k=null;const E={elementLayer:x,insertNodes:h,pageId:e,removeNodes:v,selectedNodes:g,selectToplevelNodes:f,commit:O,setMultiplePositions:_};return k=Object(B.jsx)(Go,E),Object(B.jsx)("div",{key:e,id:e,ref:e=>{!j&&e&&e.getBoundingClientRect&&y((()=>()=>e.getBoundingClientRect()))},"data-test-subj":"canvasWorkpadPage",className:`canvasPage kbn-resetFocusState canvasInteractivePage ${a}`,"data-shared-items-container":!0,style:{...t,height:s,width:o,cursor:r},onKeyDown:c,onMouseMove:d,onMouseUp:p,onMouseDown:l,onMouseLeave:u,onDoubleClick:i,onAnimationEnd:b,onWheel:m},Object(B.jsx)(interaction_boundary_InteractionBoundary,null),k,n.map((e=>{if("annotation"===e.type){const t={key:e.id,type:e.type,transformMatrix:e.transformMatrix,width:e.width,height:e.height,text:e.text,zoomScale:w};switch(e.subtype){case"alignmentGuide":return Object(B.jsx)(Fo,t);case"adHocChildAnnotation":case"hoverAnnotation":return Object(B.jsx)(Lo,t);case"dragBoxAnnotation":return Object(B.jsx)(Do,t);case"rotationHandle":return Object(B.jsx)(zo,t);case"resizeHandle":return Object(B.jsx)(Ho,t);case"resizeConnector":return Object(B.jsx)(Bo,t);case"rotationTooltip":return Object(B.jsx)(Ro,t);default:return[]}}else if("group"!==e.type)return Object(B.jsx)(ms,{key:e.id,element:e})})).filter((e=>!!e)))}}const Uo=e=>e instanceof Element&&e.closest(`#${rl}`),$o=(e,t,a,n=1)=>{const{left:r,top:s}=e();return{x:(t-r)/n,y:(a-s)/n}},Ko=()=>{window.onmousemove=null,window.onmouseup=null},qo=(e,{clientX:t,clientY:a,altKey:n,metaKey:r,shiftKey:s,ctrlKey:o,target:i},c,l)=>{if(!Uo(i))return;const{x:u,y:d}=$o(c,t,a,l);e&&e("cursorPosition",{x:u,y:d,altKey:n,metaKey:r,shiftKey:s,ctrlKey:o})},Zo={onMouseDown:e=>t=>((e,t,a,n,r=!0)=>{const{clientX:s,clientY:o,buttons:i,altKey:c,metaKey:l,shiftKey:u,ctrlKey:d,target:p}=t;if(!Uo(p))return;if(1!==i||!e)return void Ko();r&&((e,t,a)=>{window.onmousemove=({buttons:n,clientX:r,clientY:s,altKey:o,metaKey:i,shiftKey:c,ctrlKey:l,target:u})=>{if(!Uo(u))return;const{x:d,y:p}=$o(t,r,s,a);e("cursorPosition",1===n||t?{x:d,y:p,altKey:o,metaKey:i,shiftKey:c,ctrlKey:l}:{})},window.onmouseup=n=>{const{clientX:r,clientY:s,altKey:o,metaKey:i,shiftKey:c,ctrlKey:l,target:u}=n;if(!Uo(u))return;const{x:d,y:p}=$o(t,r,s,a);e("mouseEvent",{event:"mouseUp",x:d,y:p,altKey:o,metaKey:i,shiftKey:c,ctrlKey:l}),Ko()}})(e,a,n);const{x:b,y:m}=$o(a,s,o,n);e("mouseEvent",{event:"mouseDown",x:b,y:m,altKey:c,metaKey:l,shiftKey:u,ctrlKey:d}),r||e("mouseEvent",{event:"mouseUp",x:b,y:m,altKey:c,metaKey:l,shiftKey:u,ctrlKey:d})})(e.commit,t,e.canvasOrigin,e.zoomScale,e.canDragElement(t.target)),onMouseMove:e=>t=>qo(e.commit,t,e.canvasOrigin,e.zoomScale),onMouseLeave:e=>t=>((e,{buttons:t,target:a})=>{Uo(a)&&1!==t&&e&&e("cursorPosition",{})})(e.commit,t),onWheel:e=>t=>qo(e.commit,t,e.canvasOrigin),resetHandler:()=>()=>Ko()},Xo={getAdHocChildAnnotationName:"adHocChildAnnotation",adHocGroupName:"adHocGroup",alignmentGuideName:"alignmentGuide",atopZ:1e3,depthSelect:!0,devColor:"magenta",dragBoxAnnotationName:"dragBoxAnnotation",dragBoxZ:1050,groupName:"group",groupResize:!0,guideDistance:3,hoverAnnotationName:"hoverAnnotation",hoverLift:100,intraGroupManipulation:!1,intraGroupSnapOnly:!1,minimumElementSize:2,persistentGroupName:"persistentGroup",resizeAnnotationConnectorOffset:0,resizeAnnotationOffset:0,resizeAnnotationOffsetZ:.1,resizeAnnotationSize:10,resizeConnectorName:"resizeConnector",resizeHandleName:"resizeHandle",rotateAnnotationOffset:12,rotateSnapInPixels:10,rotationEpsilon:.001,rotationHandleName:"rotationHandle",rotationHandleSize:14,rotationTooltipName:"rotationTooltip",shortcuts:!1,singleSelect:!1,snapConstraint:!0,tooltipZ:1100};function Yo(e){let t=this;const a=t.matches?"matches":"msMatchesSelector";do{if(t[a](e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}const Jo=Object(xe.compose)(Object(l.connect)(((e,t)=>{const a=e.transient.selectedToplevelNodes,n=Object(ee.j)(e,t.pageId),r=a.map((e=>n.find((t=>t.id===e)))).filter((e=>e)),s=Object(se.c)(r.map((e=>n.find((t=>t.id===e.id))?[e.id]:n.filter((t=>t.parent===e.id)).map((e=>e.id))))),o=Object(se.c)(s.map(Zt(n)));return{state:e,isEditable:!Object(L.b)(e)&&Object(ee.C)(e)&&Object(L.a)(e),elements:n,selectedToplevelNodes:a,selectedNodes:o.map((e=>n.find((t=>t.id===e)))),pageStyle:Object(ee.k)(e,t.pageId).style,zoomScale:Object(L.d)(e)}}),(e=>({dispatch:e,insertNodes:(t,a)=>e(Object(re.j)(t,a)),removeNodes:(t,a)=>e(Object(re.k)(t,a)),selectToplevelNodes:t=>e(Object(je.a)(t.filter((e=>!e.position.parent)).map((e=>e.id)))),elementLayer:(t,a,n)=>e(Object(re.d)({pageId:t,elementId:a,movement:n})),setMultiplePositions:t=>a=>e(Object(re.p)(a.map((e=>({...e,pageId:t,elementId:e.id})))))})),(({state:e,...t},{dispatch:a,...n},r)=>({...r,...n,...t,updateGlobalState:qt(a,e),setMultiplePositions:n.setMultiplePositions(r.pageId)}))),Object(xe.withState)("aeroStore","setAeroStore"),Object(xe.withProps)((({aeroStore:e,setAeroStore:t,elements:a,selectedToplevelNodes:n,height:r,width:s})=>{const o=(e=>{const t=e.map((()=>null)),a=n=>{if(t[n])return t[n];const r=e[n].id,s=e.map(((e,t)=>[e,t])).filter((([e])=>e.position.parent===r)).map((([,e])=>e));if(0===s.length)t[n]=n;else{const e=Math.max(...s.map(a));t[n]=e}return t[n]},n=e.map(((e,t)=>(({id:e,position:t},a)=>({...Wt(e),parent:t&&t.parent||null,transformMatrix:Vt(t,a),a:t.width/2,b:t.height/2}))(e,a(t)))).filter(((e,t,a)=>!Object(Ht.a)(e.id)||a.find((t=>t.parent===e.id)))).filter(Kt);(e=>{const t=Object(se.a)(e.map((e=>e.id)));e.forEach((e=>{e.parent&&!t[e.parent]&&(e.parent=null)}))})(n);const r=(s=n,e=>e.parent?Ne(Fe(s.find((t=>t.id===e.parent)).transformMatrix),e.transformMatrix):e.transformMatrix);var s;return n.map((e=>({...e,localTransformMatrix:r(e)})))})(a),i=n.filter((e=>o.find((t=>t.id===e)))),c={primaryUpdate:null,currentScene:{shapes:o,configuration:{...Xo,pageHeight:r,pageWidth:s},selectedShapes:i,selectionState:e?e.getCurrentState().currentScene.selectionState:{uid:0,depthIndex:0,down:!1},gestureState:e?e.getCurrentState().currentScene.gestureState:{cursor:{x:1/0,y:1/0},mouseIsDown:!1,mouseButtonState:{buttonState:"up",downX:null,downY:null}}}};return e?e.setCurrentState(c):t(e=((e,t)=>{let a=e;const n=(e,n)=>a=t({...a,primaryUpdate:{type:e,payload:{...n,uid:gs++}}});return{getCurrentState:()=>a,setCurrentState:e=>{a=e,n("flush",{})},commit:n}})(c,Io)),{aeroStore:e}})),Object(xe.withProps)((({aeroStore:e,updateGlobalState:t})=>({commit:(a,n)=>{const r=e.commit(a,n);r.currentScene.gestureEnd&&t(r)}}))),Object(xe.lifecycle)({componentWillUnmount(){this.props.unregisterLayout(this.props.aeroStore)}}),Object(xe.withState)("canvasOrigin","saveCanvasOrigin"),Object(xe.withState)("_forceRerender","forceRerender"),Object(xe.withProps)((({registerLayout:e,aeroStore:t,updateGlobalState:a,forceRerender:n})=>(e(((e,r)=>{const s=t.commit(e,r);return s.currentScene.gestureEnd&&a(s),n(s),s})),{cursor:t.getCurrentState().currentScene.cursor}))),Object(xe.withProps)((({aeroStore:e,elements:t})=>{const a=new Map(t.map((e=>[e.id,e])));return{elements:e.getCurrentState().currentScene.shapes.map((e=>{const t=a.get(e.id);return t?{...e,width:2*e.a,height:2*e.b,filter:t.filter}:e}))}})),Object(xe.withProps)((({commit:e,forceRerender:t})=>({commit:(...a)=>t(e(...a))}))),Object(xe.withProps)(((...e)=>({...e,canDragElement:e=>!(e=>"function"==typeof e.closest?e.closest(`.${Na.CANVAS_EMBEDDABLE_CLASSNAME}`)&&!e.closest(".embPanel__header"):Yo.call(e,`.${Na.CANVAS_EMBEDDABLE_CLASSNAME}`)&&!Yo.call(e,".embPanel__header"))(e)&&!(e=>"function"==typeof e.closest?e.closest(".euiSelect"):Yo.call(e,".euiSelect"))(e)&&(e=>{const t=".canvasWorkpadContainer";return"function"==typeof e.closest?!!e.closest(t):!!Yo.call(e,t)})(e)}))),Object(xe.withHandlers)(Zo),(()=>interactive_workpad_page_InteractiveWorkpadPage)),Qo=Object(xe.compose)(Object(xe.shouldUpdate)(Object(se.f)(ne.a)),Object(xe.withProps)((({animation:e,isSelected:t})=>e?{className:e.name+" "+(t?"isActive":"isInactive"),animationStyle:{animationDirection:e.direction,animationDuration:"1s"}}:{className:t?"isActive":"isInactive",animationStyle:{}})),Object(l.connect)(((e,{isSelected:t,pageId:a,isFullscreen:n})=>({isInteractive:t&&!n&&Object(ee.C)(e)&&Object(L.a)(e),elements:Object(ee.j)(e,a),pageStyle:Object(ee.k)(e,a).style}))),Object(xe.branch)((({isInteractive:e})=>e),Jo,(()=>Object(xe.withProps)(Ut)(static_workpad_page_StaticWorkpadPage))))(),ei=e=>{const{isFullscreen:t}=Object(n.useContext)(fi);return Object(B.jsx)(Qo,D()({},e,{isFullscreen:t}))};var ti=a(6);const ai=({isFullscreen:e=!1,children:t})=>{const[a,r]=Object(n.useState)(Object(ti.a)().innerWidth),[s,o]=Object(n.useState)(Object(ti.a)().innerHeight),i=Object(u.debounce)((({target:e})=>{const{innerWidth:t,innerHeight:a}=e;r(t),o(a)}),100);return Object(n.useEffect)((()=>{const e=Object(ti.a)();return e.addEventListener("resize",i),()=>e.removeEventListener("resize",i)})),t({isFullscreen:e,windowSize:{width:a,height:s}})},ni=({children:e})=>{const{isFullscreen:t}=Object(n.useContext)(fi);return Object(B.jsx)(ai,{isFullscreen:t,children:e})};class workpad_shortcuts_component_WorkpadShortcuts extends r.a.Component{constructor(...e){super(...e),b()(this,"_toggleFullscreen",(()=>{const{setFullscreen:e,isFullscreen:t}=this.props;e(!t)})),b()(this,"nextPage",(()=>{this.props.nextPage()})),b()(this,"previousPage",(()=>{this.props.previousPage()})),b()(this,"zoomIn",(()=>{this.props.zoomIn()})),b()(this,"zoomOut",(()=>{this.props.zoomOut()})),b()(this,"resetZoom",(()=>{this.props.resetZoom()})),b()(this,"_keyMap",{REFRESH:this.props.fetchAllRenderables,UNDO:this.props.undoHistory,REDO:this.props.redoHistory,GRID:()=>this.props.setGrid(!this.props.grid),ZOOM_IN:this.zoomIn,ZOOM_OUT:this.zoomOut,ZOOM_RESET:this.resetZoom,PREV:this.previousPage,NEXT:this.nextPage,FULLSCREEN:this._toggleFullscreen}),b()(this,"_keyHandler",((e,t)=>{Vo(t.target)||"function"!=typeof this._keyMap[e]||(t.preventDefault(),this._keyMap[e]())}))}render(){return Object(B.jsx)(h.Shortcuts,{name:"EDITOR",handler:this._keyHandler,targetNodeSelector:"body",global:!0})}}const ri=({fetchAllRenderables:e,getAnimation:t,grid:a,hasHeaderBanner:n,height:r,isFullscreen:s,nextPage:o,onTransitionEnd:i,pages:c,previousPage:l,redoHistory:u,registerLayout:d,resetZoom:p,selectedPageNumber:b,setFullscreen:m,setGrid:g,totalElementCount:f,width:h,workpadCss:v,undoHistory:x,unregisterLayout:j,zoomIn:y,zoomOut:O,zoomScale:_})=>{const w=n?oe.v:0,k={height:s?r:(r+2*oe.D)*_,width:s?h:(h+2*oe.D)*_};return Object(B.jsx)("div",{className:"canvasWorkpad__buffer",style:k},Object(B.jsx)("div",{className:"canvasCheckered",style:{height:r,width:h,transformOrigin:"0 0",transform:s?void 0:`scale3d(${_}, ${_}, 1)`}},!s&&Object(B.jsx)(workpad_shortcuts_component_WorkpadShortcuts,{fetchAllRenderables:e,grid:a,isFullscreen:s,nextPage:o,previousPage:l,redoHistory:u,resetZoom:p,setFullscreen:m,setGrid:g,undoHistory:x,zoomIn:y,zoomOut:O}),Object(B.jsx)(ni,null,(({isFullscreen:e,windowSize:s})=>{const o=Math.min((s.height-w)/r,s.width/h),l=e?{transform:`scale3d(${o}, ${o}, 1)`,WebkitTransform:`scale3d(${o}, ${o}, 1)`,msTransform:`scale3d(${o}, ${o}, 1)`,height:s.height<r?"auto":r,width:s.width<h?"auto":h,top:n?w/2+"px":void 0}:{};return Object(B.jsx)("div",{css:Object(B.css)(v||oe.r,"",""),className:"canvasWorkpad "+(e?"fullscreen":""),style:l,"data-shared-items-count":f},c.map(((e,a)=>Object(B.jsx)(ei,{key:e.id,pageId:e.id,height:r,width:h,isSelected:a+1===b,animation:t(a+1),onAnimationEnd:i,registerLayout:d,unregisterLayout:j}))),Object(B.jsx)("div",{className:"canvasGrid",style:{height:r,width:h,display:a?"block":"none"}}))}))))};var si=a(107);const oi=e=>{const t=Object(l.useDispatch)(),[a,r]=Object(n.useState)(!1),[s,o]=Object(n.useState)(null),[i]=Object(n.useState)(0),{isFullscreen:c,setFullscreen:u,undo:d,redo:p,autoplayInterval:b,nextPage:m,previousPage:g}=Object(n.useContext)(fi),h=Object(f.usePlatformService)(),v=qr()(h.hasHeaderBanner$()),x=Object(l.useSelector)((e=>{const{width:t,height:a,id:n,css:r}=Object(ee.u)(e);return{pages:Object(ee.l)(e),selectedPageNumber:Object(ee.s)(e)+1,totalElementCount:Object(ee.a)(e).length,width:t,height:a,workpadCss:r,workpadId:n,isFullscreen:Object(L.b)(e),zoomScale:Object(L.d)(e)}})),j=x.pages[x.selectedPageNumber-1];Object(si.c)(j);const y=Object(n.useCallback)((()=>{t(Object(re.e)())}),[t]),O=Object(n.useCallback)((e=>{t(Object(je.e)(e))}),[t]),_=Object(n.useCallback)((e=>{if(!s||!s.name)return null;if(![x.selectedPageNumber,i].includes(e))return null;const{enter:t,exit:a}=ca.get(s.name);return{name:e===Math.max(x.selectedPageNumber,i)?t:a,direction:i>x.selectedPageNumber?"reverse":"normal"}}),[x.selectedPageNumber,s,i]),w=Object(n.useCallback)((()=>o(null)),[o]),k=Object(n.useCallback)((e=>{u(e),!0===e&&Jr(Xr.METRIC_TYPE.COUNT,b>0?[oe.w,oe.x]:oe.w)}),[u,b]),E=(({zoomScale:e,setZoomScale:t})=>({zoomIn:Object(n.useCallback)((()=>{const a=oe.E.find((t=>e<t))||oe.z;t(a)}),[e,t]),zoomOut:Object(n.useCallback)((()=>{const a=oe.E.slice().reverse().find((t=>e>t))||oe.A;t(a)}),[e,t]),resetZoom:Object(n.useCallback)((()=>{t(1)}),[t])}))({setZoomScale:O,zoomScale:x.zoomScale});return Object(B.jsx)(ri,D()({},e,x,{setFullscreen:k,isFullscreen:c,undoHistory:d,redoHistory:p,hasHeaderBanner:v,grid:a,setGrid:r,nextPage:m,previousPage:g,fetchAllRenderables:y,getAnimation:_,onTransitionEnd:w},E))};class element_Element{constructor(e){b()(this,"name",void 0),b()(this,"displayName",void 0),b()(this,"type",void 0),b()(this,"icon",void 0),b()(this,"help",void 0),b()(this,"expression",void 0),b()(this,"filter",void 0),b()(this,"width",void 0),b()(this,"height",void 0);const{name:t,icon:a,displayName:n,type:r,expression:s,filter:o,help:i,width:c,height:l}=e;if(this.name=t,this.displayName=n||t,this.icon=a||"empty",this.help=i||"",!e.expression)throw new Error("Element types must have a default expression");this.type=r,this.expression=s,this.filter=o,this.width=c||500,this.height=l||300}}class elements_registry_ElementsRegistry extends oa.a{wrapper(e){return new element_Element(e)}}const ii=new elements_registry_ElementsRegistry;var ci=a(118);const li=()=>{const e=Object(l.useDispatch)(),t=Object(l.useSelector)(ci.b),a=Object(n.useCallback)((()=>e(Object(re.e)())),[e]);return Object(B.jsx)(z.EuiToolTip,{position:"bottom",content:Object(B.jsx)("span",null,c.i18n.translate("xpack.canvas.workpadHeaderRefreshControlSettings.refreshTooltip",{defaultMessage:"Refresh data"}),Object(B.jsx)(Qt,{namespace:"EDITOR",action:"REFRESH"}))},Object(B.jsx)(z.EuiButtonIcon,{disabled:t,iconType:"refresh","aria-label":c.i18n.translate("xpack.canvas.workpadHeaderRefreshControlSettings.refreshAriaLabel",{defaultMessage:"Refresh Elements"}),onClick:a,"data-test-subj":"canvas-refresh-control"}))};var ui;!function(e){e.SECONDS="s",e.MINUTES="m",e.HOURS="h",e.DAYS="d"}(ui||(ui={}));const di={[ui.SECONDS]:1e3,[ui.MINUTES]:6e4,[ui.HOURS]:36e5,[ui.DAYS]:864e5},pi=(e="")=>!!String(e).match(/^([0-9]{1,})([hmsd])$/),bi=(e="")=>{if(!isNaN(Number(e)))return;const t=String(e).match(/^([0-9]{1,})([hmsd])$/);if(!t)return;const a=parseInt(t[1],10),n=t[2],r=function(e){return void 0!==e}(n)?di[n]:null;return a&&r?a*r:void 0},mi=e=>e<di[ui.MINUTES]?e/di[ui.SECONDS]+ui.SECONDS:e<di[ui.HOURS]?e/di[ui.MINUTES]+ui.MINUTES:e<di[ui.DAYS]?e/di[ui.HOURS]+ui.HOURS:e/di[ui.DAYS]+ui.DAYS,gi={gotoPage:e=>{},getUrl:e=>"",isFullscreen:!1,setFullscreen:e=>{},autoplayInterval:0,setAutoplayInterval:e=>{},isAutoplayPaused:!0,setIsAutoplayPaused:e=>{},nextPage:()=>{},previousPage:()=>{},refreshInterval:0,setRefreshInterval:e=>{},undo:()=>{},redo:()=>{}},fi=Object(n.createContext)(gi),hi=({children:e})=>{const t=(()=>{const[e,t]=Object(n.useState)(!1),a=Object(C.useHistory)(),{search:r}=a.location,s=Object(C.useParams)(),o=Object(l.useSelector)(ee.u),i=new URLSearchParams(r),c=parseInt(s.pageNumber,10),u=isNaN(c)?o.page+1:c,d=o.pages.length,p=Object(n.useCallback)((e=>`/workpad/${s.id}/page/${e}${a.location.search}`),[s.id,a.location.search]),b=Object(n.useCallback)((e=>{a.push(p(e))}),[p,a]),m=Object(n.useCallback)((()=>{let e=u+1;e>d&&(e=1),b(e)}),[u,d,b]),g=Object(n.useCallback)((()=>{let e=u-1;e<1&&(e=d),b(e)}),[u,d,b]),f="true"===i.get("__fullScreen"),h=i.get("__autoplayInterval"),v=h&&pi(h)&&bi(h)||0,x=i.get("__refreshInterval"),j=x&&pi(x)&&bi(x)||0,y=Object(n.useCallback)((e=>{const n=new URLSearchParams(a.location.search);e?n.set("__fullScreen","true"):(t(!1),n.delete("__fullScreen")),a.push(`${a.location.pathname}?${n.toString()}`)}),[a,t]),O=Object(n.useCallback)((e=>{const t=new URLSearchParams(a.location.search);e>0?t.set("__autoplayInterval",mi(e)):t.delete("__autoplayInterval"),a.push(`${a.location.pathname}?${t.toString()}`)}),[a]),_=Object(n.useCallback)((e=>{const t=new URLSearchParams(a.location.search);e>0?t.set("__refreshInterval",mi(e)):t.delete("__refreshInterval"),a.push(`${a.location.pathname}?${t.toString()}`)}),[a]),w=Object(n.useCallback)((()=>{a.goBack()}),[a]),k=Object(n.useCallback)((()=>{a.goForward()}),[a]),E=Object(n.useCallback)((()=>({gotoPage:b,getUrl:p,isFullscreen:f,setFullscreen:y,autoplayInterval:v,setAutoplayInterval:O,nextPage:m,previousPage:g,refreshInterval:j,setRefreshInterval:_,isAutoplayPaused:e,setIsAutoplayPaused:t,undo:w,redo:k})),[b,p,f,y,v,O,m,g,j,_,e,t,w,k]);return Object(n.useMemo)((()=>E()),[E])})();return Object(B.jsx)(fi.Provider,{value:t},e)};class fullscreen_control_FullscreenControl extends r.a.PureComponent{constructor(...e){super(...e),b()(this,"_toggleFullscreen",(()=>{const{setFullscreen:e,isFullscreen:t}=this.props;e(!t)})),b()(this,"toggleAutoplay",(()=>{this.props.toggleAutoplay()})),b()(this,"nextPage",(()=>{this.props.nextPage()})),b()(this,"previousPage",(()=>{this.props.previousPage()})),b()(this,"_keyMap",{REFRESH:this.props.fetchAllRenderables,PREV:this.previousPage,NEXT:this.nextPage,FULLSCREEN:this._toggleFullscreen,FULLSCREEN_EXIT:this._toggleFullscreen,PAGE_CYCLE_TOGGLE:this.toggleAutoplay}),b()(this,"_keyHandler",((e,t)=>{Object.keys(this._keyMap).indexOf(e)<0||Vo(t.target)||"function"!=typeof this._keyMap[e]||(t.preventDefault(),this._keyMap[e]())}))}render(){const{children:e,isFullscreen:t}=this.props;return Object(B.jsx)("span",null,t&&Object(B.jsx)(h.Shortcuts,{name:"PRESENTATION",handler:this._keyHandler,targetNodeSelector:"body",global:!0,isolate:!0}),e({isFullscreen:t,toggleFullscreen:this._toggleFullscreen}))}}const vi=Object(xe.compose)(Object(xe.getContext)({router:g.a.object}),Object(l.connect)((e=>({workpadId:Object(ee.u)(e).id,pages:Object(ee.l)(e),selectedPageNumber:Object(ee.s)(e)+1})),(e=>({fetchAllRenderables:()=>e(Object(re.e)())}))),Object(xe.withState)("transition","setTransition",null),Object(xe.withState)("prevSelectedPageNumber","setPrevSelectedPageNumber",0),Object(xe.withProps)((({selectedPageNumber:e,prevSelectedPageNumber:t,transition:a})=>({getAnimation:function(n){if(!a||!a.name)return null;if(![e,t].includes(n))return null;const{enter:r,exit:s}=ca.get(a.name);return{name:n===Math.max(e,t)?r:s,direction:t>e?"reverse":"normal"}}}))),Object(xe.withHandlers)({onTransitionEnd:({setTransition:e})=>()=>e(null)}))((e=>{const{isFullscreen:t,autoplayInterval:a,nextPage:r,previousPage:s,setFullscreen:o,setIsAutoplayPaused:i,isAutoplayPaused:c}=Object(n.useContext)(fi),u=a>0,d=Object(l.useDispatch)(),p=Object(n.useCallback)((e=>{e&&d(Object(je.a)([])),o(e),!0===e&&Jr(Xr.METRIC_TYPE.COUNT,u?[oe.w,oe.x]:oe.w)}),[d,o,u]),b=Object(n.useCallback)((()=>{i(!c)}),[i,c]);return Object(B.jsx)(fullscreen_control_FullscreenControl,D()({isFullscreen:t,nextPage:r,previousPage:s,autoplayEnabled:u,setFullscreen:p,toggleAutoplay:b},e))})),xi=(e,t=[])=>(t.push(e),e.items&&e.items.forEach((e=>{const{panel:a}=e;a&&(xi(a,t),e.panel=a.id)})),t);var ji=a(245);const yi=({title:e,description:t,image:a,tags:n=[],onClick:r,...s})=>Object(B.jsx)(z.EuiCard,D()({className:a?"canvasElementCard":"canvasElementCard canvasElementCard--hasIcon",textAlign:"left",title:e,description:t,footer:Object(B.jsx)(ji.a,{tags:n,tagType:"badge"}),image:a,icon:a?void 0:Object(B.jsx)(z.EuiIcon,{type:"canvasApp",size:"xxl"}),onClick:r},s)),Oi=e=>c.i18n.translate("xpack.canvas.customElementModal.remainingCharactersDescription",{defaultMessage:"{numberOfRemainingCharacter} characters remaining",values:{numberOfRemainingCharacter:e}});class custom_element_modal_CustomElementModal extends n.PureComponent{constructor(...e){super(...e),b()(this,"state",{name:this.props.name||"",description:this.props.description||"",image:this.props.image||""}),b()(this,"_handleChange",((e,t)=>{this.setState({[e]:t})})),b()(this,"_handleUpload",(e=>{if(null==e)return;const t=e[0],[a,n]=Object(u.get)(t,"type","").split("/");"image"===a&&oe.C.indexOf(n)>=0&&Object(I.encode)(t).then((e=>this._handleChange("image",e)))}))}render(){const{onSave:e,onCancel:t,title:a,...n}=this.props,{name:r,description:s,image:o}=this.state;return Object(B.jsx)(z.EuiModal,D()({},n,{className:"canvasCustomElementModal",maxWidth:700,onClose:t,initialFocus:".canvasCustomElementForm__name"}),Object(B.jsx)(z.EuiModalHeader,null,Object(B.jsx)(z.EuiModalHeaderTitle,null,Object(B.jsx)("h3",null,a))),Object(B.jsx)(z.EuiModalBody,null,Object(B.jsx)(z.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexStart"},Object(B.jsx)(z.EuiFlexItem,{className:"canvasCustomElementForm",grow:2},Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.customElementModal.nameInputLabel",{defaultMessage:"Name"}),helpText:Oi(40-r.length),display:"rowCompressed"},Object(B.jsx)(z.EuiFieldText,{value:r,className:"canvasCustomElementForm__name",onChange:e=>e.target.value.length<=40&&this._handleChange("name",e.target.value),required:!0,"data-test-subj":"canvasCustomElementForm-name"})),Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.customElementModal.descriptionInputLabel",{defaultMessage:"Description"}),helpText:Oi(100-s.length)},Object(B.jsx)(z.EuiTextArea,{value:s,rows:2,onChange:e=>e.target.value.length<=100&&this._handleChange("description",e.target.value),"data-test-subj":"canvasCustomElementForm-description"})),Object(B.jsx)(z.EuiFormRow,{className:"canvasCustomElementForm__thumbnail",label:c.i18n.translate("xpack.canvas.customElementModal.imageInputLabel",{defaultMessage:"Thumbnail image"}),display:"rowCompressed"},Object(B.jsx)(z.EuiFilePicker,{initialPromptText:c.i18n.translate("xpack.canvas.customElementModal.imageFilePickerPlaceholder",{defaultMessage:"Select or drag and drop an image"}),onChange:this._handleUpload,className:"canvasImageUpload",accept:"image/*"})),Object(B.jsx)(z.EuiText,{className:"canvasCustomElementForm__thumbnailHelp",size:"xs"},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.customElementModal.imageInputDescription",{defaultMessage:"Take a screenshot of your element and upload it here. This can also be done after saving."})))),Object(B.jsx)(z.EuiFlexItem,{className:"canvasElementCard__wrapper canvasCustomElementForm__preview",grow:1},Object(B.jsx)(z.EuiTitle,{size:"xxxs"},Object(B.jsx)("h4",null,c.i18n.translate("xpack.canvas.customElementModal.elementPreviewTitle",{defaultMessage:"Element preview"}))),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(yi,{title:r,description:s,image:o})))),Object(B.jsx)(z.EuiModalFooter,null,Object(B.jsx)(z.EuiFlexGroup,{justifyContent:"flexEnd"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButtonEmpty,{onClick:t},c.i18n.translate("xpack.canvas.customElementModal.cancelButtonLabel",{defaultMessage:"Cancel"}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiButton,{fill:!0,onClick:()=>{e(r,s,o)},"data-test-subj":"canvasCustomElementForm-submit"},c.i18n.translate("xpack.canvas.customElementModal.saveButtonLabel",{defaultMessage:"Save"}))))))}}const _i=v.a.getShortcutHelp(),wi=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.alignmentMenuItemLabel",{defaultMessage:"Alignment",description:"This refers to the vertical (i.e. left, center, right) and horizontal (i.e. top, middle, bottom) alignment options of the selected elements"}),ki=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.orderMenuItemLabel",{defaultMessage:"Order",description:"Refers to the order of the elements displayed on the page from front to back"}),Ei=({cutNodes:e,copyNodes:t,pasteNodes:a,deleteNodes:r,cloneNodes:s,bringToFront:o,bringForward:i,sendBackward:l,sendToBack:u,alignLeft:d,alignCenter:p,alignRight:b,alignTop:m,alignMiddle:g,alignBottom:f,distributeHorizontally:h,distributeVertically:v,createCustomElement:x,selectedNodes:j,groupIsSelected:y,groupNodes:O,ungroupNodes:_,undoHistory:w,redoHistory:k,hasPasteData:E})=>{const[S,C]=Object(n.useState)(!1),M=()=>C(!1),P=n=>{const x=y?{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.ungroupMenuItemLabel",{defaultMessage:"Ungroup",description:"This refers to ungrouping a grouped element"}),className:oe.n,icon:Object(B.jsx)(z.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{_(),n()}}:{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.groupMenuItemLabel",{defaultMessage:"Group",description:"This refers to grouping multiple selected elements."}),className:oe.n,icon:Object(B.jsx)(z.EuiIcon,{type:"empty",size:"m"}),disabled:j.length<2,onClick:()=>{O(),n()}},S={name:ki(),disabled:1!==j.length,icon:Object(B.jsx)(z.EuiIcon,{type:"empty",size:"m"}),panel:{id:1,title:ki(),items:[{name:_i.BRING_TO_FRONT,icon:"sortUp",onClick:o},{name:_i.BRING_FORWARD,icon:"arrowUp",onClick:i},{name:_i.SEND_BACKWARD,icon:"arrowDown",onClick:l},{name:_i.SEND_TO_BACK,icon:"sortDown",onClick:u}]}},M={name:wi(),className:"canvasContextMenu",disabled:y||j.length<2,icon:Object(B.jsx)(z.EuiIcon,{type:"empty",size:"m"}),panel:{id:2,title:wi(),items:[{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.leftAlignMenuItemLabel",{defaultMessage:"Left"}),icon:"editorItemAlignLeft",onClick:()=>{d(),n()}},{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.centerAlignMenuItemLabel",{defaultMessage:"Center",description:"This refers to alignment centered horizontally."}),icon:"editorItemAlignCenter",onClick:()=>{p(),n()}},{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.rightAlignMenuItemLabel",{defaultMessage:"Right"}),icon:"editorItemAlignRight",onClick:()=>{b(),n()}},{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.topAlignMenuItemLabel",{defaultMessage:"Top"}),icon:"editorItemAlignTop",onClick:()=>{m(),n()}},{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.middleAlignMenuItemLabel",{defaultMessage:"Middle",description:"This refers to alignment centered vertically."}),icon:"editorItemAlignMiddle",onClick:()=>{g(),n()}},{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.bottomAlignMenuItemLabel",{defaultMessage:"Bottom"}),icon:"editorItemAlignBottom",onClick:()=>{f(),n()}}]}},P={name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.distributionMenutItemLabel",{defaultMessage:"Distribution",description:"This refers to the options to evenly spacing the selected elements horizontall or vertically."}),className:"canvasContextMenu",disabled:y||j.length<3,icon:Object(B.jsx)(z.EuiIcon,{type:"empty",size:"m"}),panel:{id:3,title:wi(),items:[{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.horizontalDistributionMenutItemLabel",{defaultMessage:"Horizontal"}),icon:"editorDistributeHorizontal",onClick:()=>{h(),n()}},{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.verticalDistributionMenutItemLabel",{defaultMessage:"Vertical"}),icon:"editorDistributeVertical",onClick:()=>{v(),n()}}]}},T={name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.savedElementMenuItemLabel",{defaultMessage:"Save as new element"}),icon:Object(B.jsx)(z.EuiIcon,{type:"indexOpen",size:"m"}),disabled:j.length<1,className:oe.n,"data-test-subj":"canvasWorkpadEditMenu__saveElementButton",onClick:()=>{C(!0),n()}};return{id:0,items:[{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.undoMenuItemLabel",{defaultMessage:"Undo"}),icon:Object(B.jsx)(z.EuiIcon,{type:"editorUndo",size:"m"}),onClick:()=>{w()}},{name:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.redoMenuItemLabel",{defaultMessage:"Redo"}),icon:Object(B.jsx)(z.EuiIcon,{type:"editorRedo",size:"m"}),onClick:()=>{k()}},{name:_i.CUT,icon:Object(B.jsx)(z.EuiIcon,{type:"cut",size:"m"}),className:oe.n,disabled:j.length<1,onClick:()=>{e(),n()}},{name:_i.COPY,disabled:j.length<1,icon:Object(B.jsx)(z.EuiIcon,{type:"copy",size:"m"}),onClick:()=>{t()}},{name:_i.PASTE,icon:Object(B.jsx)(z.EuiIcon,{type:"copyClipboard",size:"m"}),disabled:!E,onClick:()=>{a(),n()}},{name:_i.DELETE,icon:Object(B.jsx)(z.EuiIcon,{type:"trash",size:"m"}),disabled:j.length<1,onClick:()=>{r(),n()},"data-test-subj":"canvasEditMenuDeleteButton"},{name:_i.CLONE,icon:Object(B.jsx)(z.EuiIcon,{type:"empty",size:"m"}),disabled:j.length<1,onClick:()=>{s(),n()}},x,S,M,P,T]}};return Object(B.jsx)(n.Fragment,null,Object(B.jsx)(gn.a,{button:e=>Object(B.jsx)(z.EuiButtonEmpty,{size:"s","aria-label":c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.editMenuLabel",{defaultMessage:"Edit options"}),onClick:e,"data-test-subj":"canvasWorkpadEditMenuButton"},c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.editMenuButtonLabel",{defaultMessage:"Edit"})),panelPaddingSize:"none",anchorPosition:"downLeft"},(({closePopover:e})=>Object(B.jsx)(z.EuiContextMenu,{initialPanelId:0,panels:xi(P(e))}))),S?Object(B.jsx)(custom_element_modal_CustomElementModal,{title:c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.createElementModalTitle",{defaultMessage:"Create new element"}),onSave:(e,t,a)=>{x(e,t,a),M()},onCancel:M}):null)},Si=(e,t)=>(a,n)=>{const r=e(a,n);r.currentScene.gestureEnd&&t(r)},Ci=Object(xe.compose)(Object(l.connect)((e=>{const t=Object(ee.r)(e),a=Object(ee.j)(e,t),n=Object(ee.t)(e),r=n.map((e=>a.find((t=>t.id===e)))).filter((e=>e)),s=Object(se.c)(r.map((e=>a.find((t=>t.id===e.id))?[e.id]:a.filter((t=>t.position.parent===e.id)).map((e=>e.id)))));return{pageId:t,selectedToplevelNodes:n,selectedNodes:Object(se.c)(s.map(Zt(a))).map((e=>a.find((t=>t.id===e)))).filter((e=>!!e)),state:e}}),(e=>({insertNodes:(t,a)=>e(Object(re.j)(t,a)),removeNodes:(t,a)=>e(Object(re.k)(t,a)),selectToplevelNodes:t=>e(Object(je.a)(t.filter((e=>!e.position.parent)).map((e=>e.id)))),elementLayer:(t,a,n)=>{e(Object(re.d)({pageId:t,elementId:a,movement:n}))},dispatch:e})),(({state:e,selectedToplevelNodes:t,...a},{dispatch:n,...r},{commit:s})=>{const o=qt(n,e);return{...r,...a,commit:Si(s,o),groupIsSelected:1===t.length&&t[0].includes("group")}})),Object(xe.withProps)((()=>({hasPasteData:Boolean(le())}))),Object(xe.withHandlers)(be),Object(xe.withHandlers)(fe),Object(xe.withHandlers)(he),Object(xe.withHandlers)(ge),Object(xe.withHandlers)(me))((e=>{const{undo:t,redo:a}=Object(n.useContext)(fi);return Object(B.jsx)(Ei,D()({},e,{undoHistory:t,redoHistory:a}))}));var Mi=a(32);class clipboard_Clipboard extends r.a.PureComponent{constructor(...e){super(...e),b()(this,"onClick",(e=>{const{content:t,onCopy:a}=this.props;e.preventDefault(),a(ga()(t.toString(),{debug:!0}))}))}render(){return Object(B.jsx)("div",{className:"canvasClipboard",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},this.props.children)}}const Pi=clipboard_Clipboard;var Ti=a(399),Ni=a(154),Ai=a.n(Ni);class download_Download extends r.a.PureComponent{constructor(...e){super(...e),b()(this,"onClick",(()=>{const{fileName:e,content:t}=this.props,a=Object(I.parseDataUrl)(t,!0);if(a&&a.data){const t=new Blob([Object(Ti.toByteArray)(a.data)],{type:a.mimetype}),n=a.extension?`.${a.extension}`:"";Ai.a.saveAs(t,`canvas-${e}${n}`)}}))}render(){return Object(B.jsx)("div",{className:"canvasDownload",onClick:this.onClick,onKeyPress:this.onClick,tabIndex:0,role:"button"},this.props.children)}}const Ii=download_Download,Fi=()=>c.i18n.translate("xpack.canvas.asset.copyAssetTooltip",{defaultMessage:"Copy id to clipboard"}),Di=()=>c.i18n.translate("xpack.canvas.asset.createImageTooltip",{defaultMessage:"Create image element"}),Li=()=>c.i18n.translate("xpack.canvas.asset.deleteAssetTooltip",{defaultMessage:"Delete"}),Ri=()=>c.i18n.translate("xpack.canvas.asset.downloadAssetTooltip",{defaultMessage:"Download"}),zi=Object(l.connect)((e=>({selectedPage:Object(ee.r)(e)})),(e=>({onCreate:t=>a=>{const n=ii.get("image"),r=Object(oa.d)(n.expression),s=[{type:"expression",chain:[{type:"function",function:"asset",arguments:{_:[a]}}]}],o=Object(Mi.set)(r,["chain","0","arguments","dataurl"],s);n.expression=Object(oa.h)(o),e(Object(re.b)(t,n))},onDelete:t=>e(Object(sr.a)(t.id))})),((e,t,a)=>{const{onCreate:n,onDelete:r}=t;return{...a,onCreate:n(e.selectedPage),onDelete:r}}))((({asset:e,onCreate:t,onDelete:a})=>{const{success:r}=Object(f.useNotifyService)(),[s,o]=Object(n.useState)(!1),i=Object(B.jsx)(Nr.a,{isOpen:s,title:c.i18n.translate("xpack.canvas.asset.confirmModalTitle",{defaultMessage:"Remove Asset"}),message:c.i18n.translate("xpack.canvas.asset.confirmModalDetail",{defaultMessage:"Are you sure you want to remove this asset?"}),confirmButtonText:c.i18n.translate("xpack.canvas.asset.confirmModalButtonLabel",{defaultMessage:"Remove"}),onConfirm:()=>{o(!1),a(e)},onCancel:()=>o(!1)}),l=Object(B.jsx)(z.EuiFlexItem,{className:"asset-create-image",grow:!1},Object(B.jsx)(z.EuiToolTip,{content:Di()},Object(B.jsx)(z.EuiButtonIcon,{iconType:"vector","aria-label":Di(),onClick:()=>t(e.id)}))),u=Object(B.jsx)(z.EuiFlexItem,{className:"asset-download",grow:!1},Object(B.jsx)(z.EuiToolTip,{content:Ri()},Object(B.jsx)(Ii,{fileName:e.id,content:e.value},Object(B.jsx)(z.EuiButtonIcon,{iconType:"sortDown","aria-label":Ri()})))),d=Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{content:Fi()},Object(B.jsx)(Pi,{content:e.id,onCopy:t=>t&&r(`Copied '${e.id}' to clipboard`)},Object(B.jsx)(z.EuiButtonIcon,{iconType:"copyClipboard","aria-label":Fi()})))),p=Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{content:Li()},Object(B.jsx)(z.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":Li(),onClick:()=>o(!0)}))),b=Object(B.jsx)("div",{className:"canvasAsset__thumb canvasCheckered"},Object(B.jsx)(z.EuiImage,{className:"canvasAsset__img",size:"original",url:e.value,fullScreenIconColor:"dark",alt:c.i18n.translate("xpack.canvas.asset.thumbnailAltText",{defaultMessage:"Asset thumbnail"})})),m=Object(B.jsx)(z.EuiText,{size:"xs",className:"eui-textBreakAll"},Object(B.jsx)("p",{className:"eui-textBreakAll"},Object(B.jsx)("strong",null,e.id),Object(B.jsx)("br",null),Object(B.jsx)(z.EuiTextColor,{color:"subdued"},Object(B.jsx)("small",null,"(",Math.round(e.value.length/1024)," kb)"))));return Object(B.jsx)(z.EuiFlexItem,{key:e.id},Object(B.jsx)(z.EuiPanel,{className:"canvasAsset",paddingSize:"s"},b,Object(B.jsx)(z.EuiSpacer,{size:"s"}),m,Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(z.EuiFlexGroup,{alignItems:"baseline",justifyContent:"center",responsive:!1},l,u,d,p)),s?i:null)})),Bi=Object(l.connect)((e=>({assets:Object(xn.b)(e),workpad:Object(ee.f)(e)})),(e=>({onAddAsset:(t,a,n)=>{const r=mr(a,n),{notify:s,workpad:o}=f.pluginServices.getServices();return o.updateAssets(t.id,{...t.assets,[r.id]:r}).then((t=>(e(Object(sr.c)(r)),r.id))).catch((e=>gr(e,s.error)))}})),((e,t,a)=>{const{assets:n,workpad:r}=e,{onAddAsset:s}=t,o=Object.values(n).filter((e=>!!e));return{...a,assets:o,onAddAsset:async e=>{const[t,a]=Object(u.get)(e,"type","").split("/");if("image"===t&&oe.C.indexOf(a)>=0)return await Object(I.encode)(e).then((e=>{const t="dataurl";return or(t,e,o)||s(r,t,e)}))}}}))((e=>{const{assets:t,onClose:a,onAddAsset:r}=e,[s,o]=Object(n.useState)(!1),i=Math.round(t.reduce(((e,{value:t})=>e+t.length),0)/1024),l=Math.round(i/oe.j*100),u=Object(B.jsx)(z.EuiPanel,{className:"canvasAssetManager__emptyPanel"},Object(B.jsx)(z.EuiEmptyPrompt,{iconType:"importAction",title:Object(B.jsx)("h2",null,c.i18n.translate("xpack.canvas.assetModal.emptyAssetsDescription",{defaultMessage:"Import your assets to get started"})),titleSize:"xs"}));return Object(B.jsx)(z.EuiModal,{onClose:()=>a(),className:"canvasAssetManager canvasModal--fixedSize",maxWidth:"1000px"},Object(B.jsx)(z.EuiModalHeader,{className:"canvasAssetManager__modalHeader"},Object(B.jsx)(z.EuiModalHeaderTitle,{className:"canvasAssetManager__modalHeaderTitle"},c.i18n.translate("xpack.canvas.assetModal.modalTitle",{defaultMessage:"Manage workpad assets"})),Object(B.jsx)(z.EuiFlexGroup,{className:"canvasAssetManager__fileUploadWrapper"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},s?Object(B.jsx)(Nn.a,{animated:!0,text:c.i18n.translate("xpack.canvas.assetModal.loadingText",{defaultMessage:"Uploading images"})}):Object(B.jsx)(z.EuiFilePicker,{initialPromptText:c.i18n.translate("xpack.canvas.assetModal.filePickerPromptText",{defaultMessage:"Select or drag and drop images"}),compressed:!0,display:"default",multiple:!0,onChange:e=>{null!==e&&(o(!0),Promise.all(Array.from(e).map((e=>r(e)))).finally((()=>{o(!1)})))},accept:"image/*"})))),Object(B.jsx)(z.EuiModalBody,null,Object(B.jsx)(z.EuiText,{size:"s",color:"subdued"},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.assetModal.modalDescription",{defaultMessage:"Below are the image assets in this workpad. Any assets that are currently in use cannot be determined at this time. To reclaim space, delete assets."}))),Object(B.jsx)(z.EuiSpacer,null),t.length?Object(B.jsx)(z.EuiFlexGrid,{columns:4},t.map((e=>Object(B.jsx)(zi,{asset:e,key:e.id})))):u),Object(B.jsx)(z.EuiModalFooter,{className:"canvasAssetManager__modalFooter"},Object(B.jsx)(z.EuiFlexGroup,{className:"canvasAssetManager__meterWrapper",responsive:!1},Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiProgress,{value:i,max:oe.j,color:l<90?"success":"danger",size:"s","aria-labelledby":"CanvasAssetManagerLabel"})),Object(B.jsx)(z.EuiFlexItem,{grow:!1,className:"eui-textNoWrap"},Object(B.jsx)(z.EuiText,{id:"CanvasAssetManagerLabel"},(e=>c.i18n.translate("xpack.canvas.assetModal.spacedUsedText",{defaultMessage:"{percentageUsed}% space used",values:{percentageUsed:e}}))(l)))),Object(B.jsx)(z.EuiButton,{size:"s",onClick:()=>a()},c.i18n.translate("xpack.canvas.assetModal.modalCloseButtonLabel",{defaultMessage:"Close"}))))}));var Hi=a(231);const Wi=({onDelete:e,onEdit:t})=>Object(B.jsx)(z.EuiFlexGroup,{className:"canvasElementCard__controls",gutterSize:"xs",justifyContent:"spaceBetween"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{content:c.i18n.translate("xpack.canvas.elementControls.editToolTip",{defaultMessage:"Edit"})},Object(B.jsx)(z.EuiButtonIcon,{iconType:"pencil","aria-label":c.i18n.translate("xpack.canvas.elementControls.editAriaLabel",{defaultMessage:"Edit element"}),onClick:t,"data-test-subj":"canvasElementCard__editButton"}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{content:c.i18n.translate("xpack.canvas.elementControls.deleteToolTip",{defaultMessage:"Delete"})},Object(B.jsx)(z.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":c.i18n.translate("xpack.canvas.elementControls.deleteAriaLabel",{defaultMessage:"Delete element"}),onClick:e,"data-test-subj":"canvasElementCard__deleteButton"})))),Vi=({elements:e,filterText:t,onClick:a,onEdit:n,onDelete:r})=>(t=t.toLowerCase(),Object(B.jsx)(z.EuiFlexGrid,{gutterSize:"l",columns:4},Object(u.map)(e,((e,s)=>{const{name:o,displayName:i="",help:c="",image:l}=e;return!t.length||o.toLowerCase().includes(t)||i.toLowerCase().includes(t)||c.toLowerCase().includes(t)?Object(B.jsx)(z.EuiFlexItem,{key:s,className:"canvasElementCard__wrapper"},Object(B.jsx)(yi,{title:i||o,description:c,image:l,onClick:()=>a(e)}),Object(B.jsx)(Wi,{onEdit:()=>n(e),onDelete:()=>r(e)})):null}))));Vi.defaultProps={filterText:""};const Gi=({customElements:e,onAddCustomElement:t,onClose:a,onRemoveCustomElement:r,onUpdateCustomElement:s,onSearch:o,initialSearch:i=""})=>{const l=Object(n.useRef)(!1),[d,p]=Object(n.useState)(null),[b,m]=Object(n.useState)(null),[g,f]=Object(n.useState)(i);Object(n.useEffect)((()=>{l.current||(l.current=!0,o(""))}),[o,l]);const h=()=>m(null),v=()=>p(null);let x=Object(B.jsx)(z.EuiEmptyPrompt,{iconType:"vector",title:Object(B.jsx)("h2",null,c.i18n.translate("xpack.canvas.savedElementsModal.addNewElementTitle",{defaultMessage:"Add new elements"})),body:Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.savedElementsModal.addNewElementDescription",{defaultMessage:"Group and save workpad elements to create new elements"})),titleSize:"s"});var j,y;return e.length&&(x=Object(B.jsx)(Vi,{elements:(j=e,Object(u.sortBy)(j,"displayName")),filterText:g,onClick:t,onEdit:e=>m(e),onDelete:e=>p(e)})),Object(B.jsx)(n.Fragment,null,Object(B.jsx)(z.EuiModal,{onClose:a,className:"canvasModal--fixedSize",maxWidth:"1000px",initialFocus:".canvasElements__filter input"},Object(B.jsx)(z.EuiModalHeader,{className:"canvasAssetManager__modalHeader"},Object(B.jsx)(z.EuiModalHeaderTitle,{className:"canvasAssetManager__modalHeaderTitle"},c.i18n.translate("xpack.canvas.savedElementsModal.modalTitle",{defaultMessage:"My elements"}))),Object(B.jsx)(z.EuiModalBody,{style:{paddingRight:"1px"}},Object(B.jsx)(z.EuiFieldSearch,{fullWidth:!0,value:g,placeholder:c.i18n.translate("xpack.canvas.savedElementsModal.findElementPlaceholder",{defaultMessage:"Find element"}),onChange:e=>f(e.target.value)}),Object(B.jsx)(z.EuiSpacer,null),x),Object(B.jsx)(z.EuiModalFooter,null,Object(B.jsx)(z.EuiButton,{size:"s",onClick:a,"data-test-subj":"saved-elements-modal-close-button"},c.i18n.translate("xpack.canvas.workpadHeader.addElementModalCloseButtonLabel",{defaultMessage:"Close"})))),d?Object(B.jsx)(Hi.a,{isOpen:!0,title:(y=d.displayName,c.i18n.translate("xpack.canvas.savedElementsModal.deleteElementTitle",{defaultMessage:"Delete element '{elementName}'?",values:{elementName:y}})),message:c.i18n.translate("xpack.canvas.savedElementsModal.deleteElementDescription",{defaultMessage:"Are you sure you want to delete this element?"}),confirmButtonText:c.i18n.translate("xpack.canvas.savedElementsModal.deleteButtonLabel",{defaultMessage:"Delete"}),cancelButtonText:c.i18n.translate("xpack.canvas.savedElementsModal.cancelButtonLabel",{defaultMessage:"Cancel"}),onConfirm:async()=>{d&&r(d.id),v()},onCancel:v}):null,b?Object(B.jsx)(custom_element_modal_CustomElementModal,{title:c.i18n.translate("xpack.canvas.savedElementsModal.editElementTitle",{defaultMessage:"Edit element"}),name:b.displayName,description:b.help,image:b.image,onSave:async(e,t,a)=>{b&&s(b.id,e,t,a),h()},onCancel:h}):null)},Ui=({onClose:e})=>{const t=Object(f.useNotifyService)(),a=Object(f.useCustomElementService)(),r=Object(l.useDispatch)(),s=Object(l.useSelector)(ee.r),[o,i]=Object(n.useState)([]),c=async(e="")=>{try{const{customElements:t}=await a.find(e);i(t)}catch(e){t.error(e,{title:"Couldn't find custom elements"})}};return Object(B.jsx)(Gi,{onAddCustomElement:t=>{const{selectedNodes:a=[]}=JSON.parse(t.content)||{},n=a&&Object(ue.a)(a);n&&(r(Object(re.j)(n,s)),r(Object(je.a)(n.filter((e=>!e.position.parent)).map((e=>e.id))))),e(),Jr(Xr.METRIC_TYPE.LOADED,"elements-custom-added")},onClose:e,onRemoveCustomElement:async e=>{try{await a.remove(e),await c()}catch(e){t.error(e,{title:"Couldn't delete custom elements"})}},onSearch:c,onUpdateCustomElement:async(e,n,r,s)=>{try{await a.update(e,{name:Object(u.camelCase)(n),displayName:n,image:s,help:r}),await c()}catch(e){t.error(e,{title:"Couldn't update custom elements"})}},customElements:o})},$i={chart:{name:c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.chartMenuItemLabel",{defaultMessage:"Chart"}),icon:"visArea"},filter:{name:c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.filterMenuItemLabel",{defaultMessage:"Filter"}),icon:"filter"},image:{name:c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.imageMenuItemLabel",{defaultMessage:"Image"}),icon:"image"},other:{name:c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.otherMenuItemLabel",{defaultMessage:"Other"}),icon:"empty"},progress:{name:c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.progressMenuItemLabel",{defaultMessage:"Progress"}),icon:"visGoal"},shape:{name:c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.shapeMenuItemLabel",{defaultMessage:"Shape"}),icon:"node"},text:{name:c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.textMenuItemLabel",{defaultMessage:"Text"}),icon:"visText"}},Ki=e=>e&&e.type&&Object.keys($i).includes(e.type)?e.type:"other",qi=({elements:e,addElement:t})=>{const[a,s]=Object(n.useState)(!1),[o,i]=Object(n.useState)(!1),{chart:l,filter:d,image:p,other:b,progress:m,shape:g,text:f}=(e=>{e=Object(u.sortBy)(e,"displayName");const t={other:[]};return e.forEach((e=>{const a=Ki(e);t[a]?t[a].push(e):t[a]=[e]})),t})(Object.values(e)),h=e=>{const a=a=>({name:a.displayName||a.name,icon:a.icon,onClick:()=>{t(a),e()}}),n=e=>{const t=Ki(e[0]),{name:n,icon:r}=$i[t]||$i.other;return e.length>1?{name:n,icon:Object(B.jsx)(z.EuiIcon,{type:r,size:"m"}),panel:{id:Object(de.a)("element-type"),title:n,items:e.map(a)}}:a(e[0])};return{id:0,items:[n(f),n(g),n(l),n(p),n(d),n(m),n(b),{name:c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.myElementsMenuItemLabel",{defaultMessage:"My elements"}),className:Na.CONTEXT_MENU_TOP_BORDER_CLASSNAME,"data-test-subj":"saved-elements-menu-option",icon:Object(B.jsx)(z.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{i(!0),e()}},{name:c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.manageAssetsMenuItemLabel",{defaultMessage:"Manage assets"}),icon:Object(B.jsx)(z.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{s(!0),e()}}]}};return Object(B.jsx)(r.a.Fragment,null,Object(B.jsx)(I.PrimaryActionPopover,{panelPaddingSize:"none",label:c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.elementMenuButtonLabel",{defaultMessage:"Add element"}),iconType:"plusInCircle","data-test-subj":"add-element-button"},(({closePopover:e})=>Object(B.jsx)(z.EuiContextMenu,{initialPanelId:0,panels:xi(h(e))}))),a?Object(B.jsx)(Bi,{onClose:()=>s(!1)}):null,o?Object(B.jsx)(Ui,{onClose:()=>i(!1)}):null)};var Zi=a(58);const Xi=({onDownload:e})=>Object(B.jsx)(z.EuiText,{size:"s"},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.workpadStep.description",{defaultMessage:"The workpad will be exported as a single {JSON} file for sharing in another site.",values:{JSON:Zi.r}})),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(z.EuiButton,{onClick:()=>{e("share")},size:"s"},c.i18n.translate("xpack.canvas.shareWebsiteFlyout.workpadStep.downloadLabel",{defaultMessage:"Download workpad"}))),Yi=({onDownload:e})=>Object(B.jsx)(z.EuiText,{size:"s"},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.runtimeStep.description",{defaultMessage:"In order to render a Shareable Workpad, you also need to include the {CANVAS} Shareable Workpad Runtime. You can skip this step if the runtime is already included on your website.",values:{CANVAS:Zi.c}})),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(z.EuiButton,{onClick:()=>{e("shareRuntime")},size:"s"},c.i18n.translate("xpack.canvas.shareWebsiteFlyout.runtimeStep.downloadLabel",{defaultMessage:"Download runtime"}))),Ji=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.requiredLabel",{defaultMessage:"required"}),Qi=`\x3c!-- ${c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.includeRuntimeLabel",{defaultMessage:"Include Runtime"})} --\x3e\n<script src="kbn_canvas.js"><\/script>\n\n\x3c!-- ${c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.placeholderLabel",{defaultMessage:"Placeholder"})} --\x3e\n<div kbn-canvas-shareable="canvas" kbn-canvas-url="workpad.json" />\n\n\x3c!-- ${c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.callRuntimeLabel",{defaultMessage:"Call Runtime"})} --\x3e\n<script type="text/javascript">\n  KbnCanvas.share();\n<\/script>`,ec=({onCopy:e})=>Object(B.jsx)("div",null,Object(B.jsx)(z.EuiText,{size:"s"},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.description",{defaultMessage:"The Workpad is placed within the {HTML} of the site by using an {HTML} placeholder. Parameters for the runtime are included inline. See the full list of parameters below. You can include more than one workpad on the page.",values:{HTML:Qi}}))),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(Pi,{content:Qi,onCopy:e},Object(B.jsx)(z.EuiCodeBlock,{className:"canvasShareMenu__reportingConfig",paddingSize:"s",fontSize:"s",language:"html"},Qi)),Object(B.jsx)(z.EuiSpacer,null),Object(B.jsx)(z.EuiText,null,Object(B.jsx)("h4",null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.parametersLabel",{defaultMessage:"Parameters"})),Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.parametersDescription",{defaultMessage:"There are a number of inline parameters to configure the Shareable Workpad."}))),Object(B.jsx)(z.EuiHorizontalRule,null),Object(B.jsx)(z.EuiDescriptionList,null,Object(B.jsx)(z.EuiDescriptionListTitle,null,Object(B.jsx)(z.EuiCode,null,'kbn-canvas-shareable="canvas"')," (",Ji(),")"),Object(B.jsx)(z.EuiDescriptionListDescription,null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.shareableParameterDescription",{defaultMessage:"The type of shareable. In this case, a {CANVAS} Workpad.",values:{CANVAS:Zi.c}})),Object(B.jsx)(z.EuiDescriptionListTitle,null,Object(B.jsx)(z.EuiCode,null,"kbn-canvas-url")," (",Ji(),")"),Object(B.jsx)(z.EuiDescriptionListDescription,null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.urlParameterDescription",{defaultMessage:"The {URL} of the Shareable Workpad {JSON} file.",values:{URL:Zi.K,JSON:Zi.r}})),Object(B.jsx)(z.EuiDescriptionListTitle,null,Object(B.jsx)(z.EuiCode,null,"kbn-canvas-height")),Object(B.jsx)(z.EuiDescriptionListDescription,null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.heightParameterDescription",{defaultMessage:"The height of the Workpad. Defaults to the Workpad height."})),Object(B.jsx)(z.EuiDescriptionListTitle,null,Object(B.jsx)(z.EuiCode,null,"kbn-canvas-width")),Object(B.jsx)(z.EuiDescriptionListDescription,null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.widthParameterDescription",{defaultMessage:"The width of the Workpad. Defaults to the Workpad width."})),Object(B.jsx)(z.EuiDescriptionListTitle,null,Object(B.jsx)(z.EuiCode,null,"kbn-canvas-page")),Object(B.jsx)(z.EuiDescriptionListDescription,null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.pageParameterDescription",{defaultMessage:"The page to display. Defaults to the page specified by the Workpad."})),Object(B.jsx)(z.EuiDescriptionListTitle,null,Object(B.jsx)(z.EuiCode,null,"kbn-canvas-autoplay")),Object(B.jsx)(z.EuiDescriptionListDescription,null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.autoplayParameterDescription",{defaultMessage:"Should the runtime automatically move through the pages of the workpad?"})),Object(B.jsx)(z.EuiDescriptionListTitle,null,Object(B.jsx)(z.EuiCode,null,"kbn-canvas-interval")),Object(B.jsx)(z.EuiDescriptionListDescription,null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.intervalParameterDescription",{defaultMessage:"The interval upon which the pages will advance in time format, (e.g. {twoSeconds}, {oneMinute})",values:{twoSeconds:"2s",oneMinute:"1m"}})),Object(B.jsx)(z.EuiDescriptionListTitle,null,Object(B.jsx)(z.EuiCode,null,"kbn-canvas-toolbar")),Object(B.jsx)(z.EuiDescriptionListDescription,null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.toolbarParameterDescription",{defaultMessage:"Should the toolbar be hidden?"})))),tc=(e,t)=>[{title:c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.downloadWorkpadTitle",{defaultMessage:"Download workpad"}),children:Object(B.jsx)(Xi,{onDownload:e})},{title:c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.downloadRuntimeTitle",{defaultMessage:"Download runtime"}),children:Object(B.jsx)(Yi,{onDownload:e})},{title:c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.addSnippetsTitle",{defaultMessage:"Add snippets to website"}),children:Object(B.jsx)(ec,{onCopy:t})}],ac=({onClose:e,unsupportedRenderers:t,renderedWorkpad:a})=>{const r=Object(f.useNotifyService)(),s=Object(n.useCallback)((()=>r.info(c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.copyShareConfigMessage",{defaultMessage:"Copied share markup to clipboard"}))),[r]),o=Object(si.a)(),l=(()=>{const e=Object(f.usePlatformService)(),t=Object(f.useNotifyService)();return Object(n.useCallback)((()=>{try{const t=`${e.getBasePath()}${oe.c}`;return void window.open(t)}catch(e){t.error(e,{title:c.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadRuntimeFailureErrorMessage",{defaultMessage:"Couldn't download Shareable Runtime"})})}}),[e,t])})(),u=(()=>{const e=Object(f.useWorkpadService)(),t=Object(f.useNotifyService)();return Object(n.useCallback)((a=>{(async()=>{try{let r;try{r=await e.getRuntimeZip(a)}catch(e){t.error(e,{title:(n=a.name,c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareWebsiteErrorTitle",{defaultMessage:"Failed to create {ZIP} file for '{workpadName}'. The workpad may be too large. You'll need to download the files separately.",values:{ZIP:Zi.L,workpadName:n}}))})}r&&Ai.a.saveAs(r,"canvas-workpad-embed.zip")}catch(e){t.error(e,{title:c.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadZippedRuntimeFailureErrorMessage",{defaultMessage:"Couldn't download ZIP file"})})}var n})()}),[t,e])})(),d=Object(n.useCallback)((e=>{switch(e){case"share":return void o(a);case"shareRuntime":return void l();case"shareZip":return void u(a);default:throw new Error((e=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.unknownExportErrorMessage",{defaultMessage:"Unknown export type: {type}",values:{type:e}}))(e))}}),[o,l,u,a]),p=Object(B.jsx)(z.EuiLink,{style:{textDecoration:"underline"},onClick:()=>{d("shareZip")}},Object(B.jsx)(i.FormattedMessage,{id:"xpack.canvas.shareWebsiteFlyout.zipDownloadLinkLabel",defaultMessage:"download an example {ZIP} file",values:{ZIP:Zi.L}})),b=Object(B.jsx)("div",null,Object(B.jsx)(i.FormattedMessage,{id:"xpack.canvas.shareWebsiteFlyout.flyoutCalloutDescription",defaultMessage:"To try sharing, you can {link} containing this workpad, the {CANVAS} Shareable Workpad runtime, and a sample {HTML} file.",values:{CANVAS:Zi.c,HTML:Zi.n,link:p}}));let m=null;if(t&&t.length>0){const e=[Object(B.jsx)(z.EuiText,{size:"s",key:"text"},Object(B.jsx)("span",null,c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.unsupportedRendererWarning",{defaultMessage:"This workpad contains render functions that are not supported by the {CANVAS} Shareable Workpad Runtime. These elements will not be rendered:",values:{CANVAS:Zi.c}})),t.map(((e,a)=>[Object(B.jsx)(z.EuiCode,{key:`item-${a}`},e),a<t.length-1?", ":""]))),Object(B.jsx)(z.EuiSpacer,{size:"xs",key:"spacer"})];m=[Object(B.jsx)(z.EuiCallOut,{title:e,color:"warning",size:"s",iconType:"alert",key:"callout"}),Object(B.jsx)(z.EuiSpacer,{key:"spacer"})]}return Object(B.jsx)(z.EuiFlyout,{onClose:()=>e("share"),maxWidth:!0},Object(B.jsx)(z.EuiFlyoutHeader,{hasBorder:!0},Object(B.jsx)(z.EuiTitle,{size:"m"},Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center"},Object(B.jsx)("h2",{id:"flyoutTitle"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},c.i18n.translate("xpack.canvas.shareWebsiteFlyout.flyoutTitle",{defaultMessage:"Share on a website"}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiBetaBadge,{label:"Beta",color:"accent"}))))),Object(B.jsx)(z.EuiFlyoutBody,null,Object(B.jsx)(z.EuiText,{size:"s"},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.shareWebsiteFlyout.description",{defaultMessage:"Follow these steps to share a static version of this workpad on an external website. It will be a visual snapshot of the current workpad, and will not have access to live data."}))),Object(B.jsx)(z.EuiSpacer,null),Object(B.jsx)(z.EuiCallOut,{size:"s",title:b,iconType:"iInCircle"}),Object(B.jsx)(z.EuiSpacer,null),m,Object(B.jsx)(z.EuiSteps,{steps:tc(d,s)})))};var nc=a(37),rc=a(39),sc=a(40),oc=a(30),ic=a(38),cc=a(203),lc=a(204),uc=a(200),dc=a(199);const pc=[a(198).a,cc.a,lc.a,Xn.getErrorRenderer,Xn.getDebugRenderer,nc.getImageRenderer,oc.getShapeRenderer,oc.getProgressRenderer,rc.getRevealImageRenderer,sc.getRepeatImageRenderer,ic.getMetricRenderer],bc=[...[dc.a,uc.a,...pc.map((e=>e()))].map((e=>e().name))],mc=e=>{const t=[];return Object(ee.n)(e).forEach((e=>{bc.includes(e)||t.push(e)})),t},gc=({onClose:e})=>{const{renderedWorkpad:t,unsupportedRenderers:a}=Object(l.useSelector)((e=>({renderedWorkpad:Object(ee.m)(e),unsupportedRenderers:mc(e),workpad:Object(ee.u)(e)})));return Object(B.jsx)(ac,{onClose:e,unsupportedRenderers:a,renderedWorkpad:t})},fc=()=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareDownloadPDFTitle",{defaultMessage:"{PDF} reports",values:{PDF:Zi.y}}),hc=({ReportingComponent:e,onExport:t})=>{const[a,r]=Object(n.useState)(!1),s=a=>({id:0,items:[{name:c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareDownloadJSONTitle",{defaultMessage:"Download as {JSON}",values:{JSON:Zi.r}}),icon:Object(B.jsx)(z.EuiIcon,{type:"exportAction",size:"m"}),onClick:()=>{t("json"),a()}},null!==e&&{name:fc(),icon:"document",panel:{id:1,title:fc(),content:Object(B.jsx)(e,{onClose:a})},"data-test-subj":"sharePanel-PDFReports"},{name:c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareWebsiteTitle",{defaultMessage:"Share on a website"}),icon:Object(B.jsx)(z.EuiIcon,{type:"globe",size:"m"}),onClick:()=>{r(!0),a()}}].filter(Boolean)}),o=a?Object(B.jsx)(gc,{onClose:()=>{r(!1)}}):null;return Object(B.jsx)("div",null,Object(B.jsx)(gn.a,{button:e=>Object(B.jsx)(z.EuiButtonEmpty,{size:"s","aria-label":c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareWorkpadMessage",{defaultMessage:"Share this workpad"}),onClick:e,"data-test-subj":"shareTopNavButton"},c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareMenuButtonLabel",{defaultMessage:"Share"})),panelPaddingSize:"none",anchorPosition:"downLeft"},(({closePopover:e})=>Object(B.jsx)(z.EuiContextMenu,{initialPanelId:0,panels:xi(s(e))}))),o)};var vc=a(5);const xc=()=>{const e=Object(si.b)(),t=Object(f.useReportingService)(),a=Object(f.usePlatformService)(),{workpad:r,pageCount:s}=Object(l.useSelector)((e=>({workpad:Object(ee.u)(e),pageCount:Object(ee.l)(e).length}))),o=t.getReportingPanelPDFComponent(),i={workpad:r,pageCount:s},u=null!==o?({onClose:e})=>Object(B.jsx)(o,{getJobParams:()=>function({workpad:{id:e,name:t,width:a,height:n},pageCount:r},s){const o=[];for(let t=1;t<=r;t++)o.push({id:vc.a,version:s,params:{view:"workpadPDF",id:e,page:t}});return{layout:{dimensions:{width:a,height:n},id:"canvas"},objectType:"canvas workpad",locatorParams:o,title:t}}(i,a.getKibanaVersion()),layoutOption:"canvas",onClose:e,objectId:r.id}):null,d=Object(n.useCallback)((t=>{switch(t){case"pdf":break;case"json":return void e(r.id);default:throw new Error((e=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.unknownExportErrorMessage",{defaultMessage:"Unknown export type: {type}",values:{type:e}}))(t))}}),[e,r]);return Object(B.jsx)(hc,{ReportingComponent:u,onExport:d})},jc=(e,t)=>{const a=e/1e3,n=a/60,r=n/60,s=r/24;return"days"===t||s>=1?{length:s,format:"days"}:"hours"===t||r>=1?{length:r,format:"hours"}:"minutes"===t||n>=1?{length:a/60,format:"minutes"}:{length:a,format:"seconds"}},yc=({gutterSize:e,buttonSize:t,onSubmit:a,defaultValue:r})=>{const[s,o]=Object(n.useState)(r),i=bi(s),l=Boolean(s.length&&!i);return Object(B.jsx)("form",{onSubmit:e=>{e.preventDefault(),!l&&i&&a(i)}},Object(B.jsx)(z.EuiFlexGroup,{gutterSize:e},Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiFormRow,{label:c.i18n.translate("xpack.canvas.workpadHeaderCustomInterval.formLabel",{defaultMessage:"Set a custom interval"}),helpText:c.i18n.translate("xpack.canvas.workpadHeaderCustomInterval.formDescription",{defaultMessage:"Use shorthand notation, like {secondsExample}, {minutesExample}, or {hoursExample}",values:{secondsExample:"30s",minutesExample:"10m",hoursExample:"1h"}}),display:"rowCompressed"},Object(B.jsx)(z.EuiFieldText,{isInvalid:l,value:s,onChange:e=>o(e.target.value),compressed:!0}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFormRow,{hasEmptyLabelSpace:!0,display:"rowCompressed"},Object(B.jsx)(z.EuiButton,{disabled:l,size:t,type:"submit",minWidth:"auto"},c.i18n.translate("xpack.canvas.workpadHeaderCustomInterval.confirmButtonLabel",{defaultMessage:"Set"}))))))};yc.defaultProps={buttonSize:"s",gutterSize:"s",defaultValue:""};const{time:Oc}=te.q,{getSecondsText:_c,getMinutesText:wc,getHoursText:kc}=Oc,Ec=()=>c.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.disableTooltip",{defaultMessage:"Disable auto-refresh"}),Sc=({children:e,...t})=>Object(B.jsx)("ul",D()({style:{listStyle:"none",margin:0}},t),[e]),Cc=Object(z.htmlIdGenerator)(),Mc=({refreshInterval:e,setRefresh:t,disableInterval:a})=>{const n=({duration:e,label:a,descriptionId:n})=>Object(B.jsx)("li",null,Object(B.jsx)(z.EuiLink,{onClick:()=>t(e),"aria-describedby":n},a)),s=jc(e),o=Cc();return Object(B.jsx)(z.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",className:"canvasViewMenu__kioskSettings"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"xs"},Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiDescriptionList,{textStyle:"reverse"},Object(B.jsx)(z.EuiDescriptionListTitle,null,c.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.refreshListTitle",{defaultMessage:"Refresh elements"})),Object(B.jsx)(z.EuiDescriptionListDescription,null,e>0?Object(B.jsx)(r.a.Fragment,null,Oc.getCycleTimeText(s.length,s.format)):Object(B.jsx)(r.a.Fragment,null,c.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.refreshListDurationManualText",{defaultMessage:"Manually"}))))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e>0?Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{position:"bottom",content:Ec()},Object(B.jsx)(z.EuiButtonIcon,{iconType:"cross",onClick:a,"aria-label":Ec()}))):null))),Object(B.jsx)(z.EuiHorizontalRule,{margin:"m"}),Object(B.jsx)(z.EuiTitle,{size:"xxxs",id:o},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.intervalFormLabel",{defaultMessage:"Change auto-refresh interval"}))),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(z.EuiText,{size:"s"},Object(B.jsx)(Sc,{"aria-labelledby":o,className:"canvasControlSettings__list"},Object(B.jsx)(n,{duration:3e4,label:_c(30),descriptionId:o}),Object(B.jsx)(n,{duration:6e4,label:wc(1),descriptionId:o}),Object(B.jsx)(n,{duration:3e5,label:wc(5),descriptionId:o}),Object(B.jsx)(n,{duration:18e5,label:wc(30),descriptionId:o}),Object(B.jsx)(n,{duration:36e5,label:kc(1),descriptionId:o}),Object(B.jsx)(n,{duration:432e5,label:kc(12),descriptionId:o}),Object(B.jsx)(n,{duration:864e5,label:kc(24),descriptionId:o})))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(yc,{onSubmit:e=>t(e)})))},{time:Pc}=te.q,{getSecondsText:Tc,getMinutesText:Nc}=Pc,Ac=()=>c.i18n.translate("xpack.canvas.workpadHeaderKioskControl.disableTooltip",{defaultMessage:"Disable auto-play"}),Ic=({children:e,...t})=>Object(B.jsx)("ul",D()({style:{listStyle:"none",margin:0}},t),[e]),Fc=Object(z.htmlIdGenerator)(),Dc=({autoplayInterval:e,onSetInterval:t})=>{const a=Object(n.useCallback)((()=>{t(0)}),[t]),s=({duration:e,label:a,descriptionId:n})=>Object(B.jsx)("li",null,Object(B.jsx)(z.EuiLink,{onClick:()=>t(e),"aria-describedby":n},a)),o=jc(e),i=Fc();return Object(B.jsx)(z.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",className:"canvasViewMenu__kioskSettings"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"xs"},Object(B.jsx)(z.EuiFlexItem,null,Object(B.jsx)(z.EuiDescriptionList,{textStyle:"reverse"},Object(B.jsx)(z.EuiDescriptionListTitle,null,c.i18n.translate("xpack.canvas.workpadHeaderKioskControl.controlTitle",{defaultMessage:"Cycle fullscreen pages"})),Object(B.jsx)(z.EuiDescriptionListDescription,null,e>0?Object(B.jsx)(r.a.Fragment,null,Pc.getCycleTimeText(o.length,o.format)):Object(B.jsx)(r.a.Fragment,null,c.i18n.translate("xpack.canvas.workpadHeaderKioskControl.autoplayListDurationManual",{defaultMessage:"Manually"}))))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e>0?Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiToolTip,{position:"bottom",content:Ac()},Object(B.jsx)(z.EuiButtonIcon,{iconType:"cross",onClick:a,"aria-label":Ac()}))):null))),Object(B.jsx)(z.EuiHorizontalRule,{margin:"m"}),Object(B.jsx)(z.EuiTitle,{size:"xxxs",id:i},Object(B.jsx)("p",null,c.i18n.translate("xpack.canvas.workpadHeaderKioskControl.cycleFormLabel",{defaultMessage:"Change cycling interval"}))),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(z.EuiText,{size:"s"},Object(B.jsx)(Ic,{"aria-labelledby":i,className:"canvasControlSettings__list"},Object(B.jsx)(s,{duration:5e3,label:Tc(5),descriptionId:i}),Object(B.jsx)(s,{duration:1e4,label:Tc(10),descriptionId:i}),Object(B.jsx)(s,{duration:3e4,label:Tc(30),descriptionId:i}),Object(B.jsx)(s,{duration:6e4,label:Nc(1),descriptionId:i}),Object(B.jsx)(s,{duration:3e5,label:Nc(5),descriptionId:i}),Object(B.jsx)(s,{duration:9e5,label:Nc(15),descriptionId:i})))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(yc,{onSubmit:e=>t(e)})))},Lc=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.autoplaySettingsMenuItemLabel",{defaultMessage:"Autoplay settings"}),Rc=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.refreshSettingsMenuItemLabel",{defaultMessage:"Auto refresh settings"}),zc=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomMenuItemLabel",{defaultMessage:"Zoom"}),Bc=e=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomResetText",{defaultMessage:"{scalePercentage}%",values:{scalePercentage:100*e}}),Hc=[.5,1,2],Wc=({enterFullscreen:e,fitToWindow:t,isWriteable:a,resetZoom:n,setZoomScale:r,toggleWriteable:s,zoomIn:o,zoomOut:i,zoomScale:l,doRefresh:u,refreshInterval:d,setRefreshInterval:p,autoplayEnabled:b,autoplayInterval:m,setAutoplayInterval:g})=>{const f=e=>p(e),h=p=>({id:0,items:[{name:c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.refreshMenuItemLabel",{defaultMessage:"Refresh data"}),icon:"refresh",onClick:()=>{u()}},{name:Rc(),icon:"empty",panel:{id:1,title:Rc(),content:Object(B.jsx)(Mc,{refreshInterval:d,setRefresh:e=>f(e),disableInterval:()=>{f(0)}})}},{name:c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.fullscreenMenuLabel",{defaultMessage:"Enter fullscreen mode"}),icon:Object(B.jsx)(z.EuiIcon,{type:"fullScreen",size:"m"}),className:oe.n,onClick:()=>{e(),p()}},{name:Lc(),icon:"empty",panel:{id:2,title:Lc(),content:Object(B.jsx)(Dc,{autoplayInterval:m,onSetInterval:g})}},{name:a?c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.hideEditModeLabel",{defaultMessage:"Hide editing controls"}):c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.showEditModeLabel",{defaultMessage:"Show editing controls"}),icon:Object(B.jsx)(z.EuiIcon,{type:a?"eyeClosed":"eye",size:"m"}),className:oe.n,onClick:()=>{s(),p()}},{name:zc(),icon:"magnifyWithPlus",panel:{id:3,title:zc(),items:[{name:c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomFitToWindowText",{defaultMessage:"Fit to window"}),icon:"empty",onClick:t,disabled:l===oe.z},...Hc.map((e=>({name:Bc(e),icon:"empty",onClick:()=>r(e)}))),{name:c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomInText",{defaultMessage:"Zoom in"}),icon:"magnifyWithPlus",onClick:o,disabled:l===oe.z,className:"canvasContextMenu--topBorder"},{name:c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomOutText",{defaultMessage:"Zoom out"}),icon:"magnifyWithMinus",onClick:i,disabled:l<=oe.A},{name:c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomPrecentageValue",{defaultMessage:"Reset"}),icon:"empty",onClick:n,disabled:l>=oe.z,className:"canvasContextMenu--topBorder"}]}}]});return Object(B.jsx)(gn.a,{button:e=>Object(B.jsx)(z.EuiButtonEmpty,{size:"s","aria-label":c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.viewMenuLabel",{defaultMessage:"View options"}),onClick:e},c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.viewMenuButtonLabel",{defaultMessage:"View"})),panelPaddingSize:"none",anchorPosition:"downLeft"},(({closePopover:e})=>Object(B.jsx)(z.EuiContextMenu,{initialPanelId:0,panels:xi(h(e)),className:"canvasViewMenu"})))},Vc=Object(xe.compose)(Object(l.connect)((e=>({zoomScale:Object(L.d)(e),boundingBox:Object(ee.v)(e),workpadWidth:Object(ee.B)(e),workpadHeight:Object(ee.x)(e),isWriteable:Object(ee.C)(e)&&Object(L.a)(e)})),(e=>({setZoomScale:t=>e(Object(je.e)(t)),setWriteable:t=>e(Object(A.m)(t)),doRefresh:()=>e(Object(re.e)())})),((e,t,a)=>{const{boundingBox:n,workpadWidth:r,workpadHeight:s,...o}=e;return{...o,...t,...a,toggleWriteable:()=>t.setWriteable(!e.isWriteable),fitToWindow:()=>t.setZoomScale(((e,t,a)=>{const n=document.querySelector(`#${Na.CANVAS_LAYOUT_STAGE_CONTENT_SELECTOR}`),r=n.clientWidth,s=n.clientHeight,o=e.left,i=e.top,c=e.right-t,l=e.bottom-a,u=r/(t+2*Math.max(Math.abs(o),Math.abs(c))+Na.WORKPAD_CANVAS_BUFFER),d=s/(a+2*Math.max(Math.abs(i),Math.abs(l))+Na.WORKPAD_CANVAS_BUFFER);return Math.min(u,d)})(n,r,s))}})),Object(xe.withHandlers)(Zr))((e=>{const t=Object(l.useDispatch)(),{autoplayInterval:a,setAutoplayInterval:r,setFullscreen:s,setRefreshInterval:o,refreshInterval:i}=Object(n.useContext)(fi),c=Object(n.useCallback)((()=>{t(Object(je.a)([])),s(!0)}),[t,s]);return Object(B.jsx)(Wc,D()({},e,{enterFullscreen:c,setAutoplayInterval:r,autoplayEnabled:!0,autoplayInterval:a,setRefreshInterval:o,refreshInterval:i}))})),Gc=Object(I.withSuspense)(I.LazyLabsFlyout,null),Uc=()=>{const{isLabsEnabled:e,getProjects:t}=Object(f.useLabsService)(),[a,s]=Object(n.useState)(!1);if(!e())return null;const o=t(["canvas"]),i=Object.values(o).filter((e=>e.status.isOverride)).length;return Object(B.jsx)(r.a.Fragment,null,Object(B.jsx)(z.EuiButtonEmpty,{onClick:()=>s(!a),size:"xs"},c.i18n.translate("xpack.canvas.workpadHeaderLabsControlSettings.labsButtonLabel",{defaultMessage:"Labs"}),i>0?Object(B.jsx)(z.EuiNotificationBadge,{color:"subdued",style:{marginLeft:4}},i):null),a?Object(B.jsx)(Gc,{solutions:["canvas"],onClose:()=>s(!1)}):null)};var $c=a(53),Kc=a(98);const qc=({factories:e,isDarkThemeEnabled:t,promotedVisTypes:a,visTypeAliases:n,createNewVisType:r,createNewEmbeddable:s})=>{const o={},i=[];let l=1;e.forEach(((e,t)=>{const{grouping:a}=e;a?a.forEach((t=>{o[t.id]?o[t.id].factories.push(e):(o[t.id]={id:t.id,appName:t.getDisplayName?t.getDisplayName({}):t.id,icon:t.getIconType?t.getIconType({}):"empty",factories:[e],panelId:l},l++)})):i.push(e)}));const u=e=>{const t=null!=e&&e.getIconType?e.getIconType():"empty",a=null!=e&&e.getDescription?e.getDescription():void 0;return{name:e.getDisplayName(),icon:t,toolTipContent:a,onClick:s(e),"data-test-subj":`createNew-${e.type}`}},d=[{id:0,items:[...n.map((e=>{const{name:t,title:a,description:n,icon:s="empty"}=e;return{name:a,icon:s,onClick:r(e),"data-test-subj":`visType-${t}`,toolTipContent:n}})),...Object.values(o).map((({id:e,appName:t,icon:a,panelId:n})=>({name:t,icon:a,panel:n,"data-test-subj":`canvasEditorMenu-${e}Group`}))),...i.map(u),...a.map((e=>{const{name:t,title:a,titleInWizard:n,description:s,icon:o="empty"}=e;return{name:n||a,icon:o,onClick:r(e),"data-test-subj":`visType-${t}`,toolTipContent:s}}))]},...Object.values(o).map((({appName:e,panelId:t,factories:a})=>({id:t,title:e,items:a.map(u)})))];return Object(B.jsx)(I.SolutionToolbarPopover,{ownFocus:!0,label:c.i18n.translate("xpack.canvas.solutionToolbar.editorMenuButtonLabel",{defaultMessage:"Select type"}),iconType:"arrowDown",iconSide:"right",panelPaddingSize:"none","data-test-subj":"canvasEditorMenuButton"},(()=>Object(B.jsx)(z.EuiContextMenu,{initialPanelId:0,panels:d,className:"canvasSolutionToolbar__editorContextMenu "+(t?"canvasSolutionToolbar__editorContextMenu--dark":"canvasSolutionToolbar__editorContextMenu--light"),"data-test-subj":"canvasEditorContextMenu"})))},Zc=({addElement:e})=>{const t=Object(f.useEmbeddablesService)(),{pathname:a,search:r,hash:s}=Object(C.useLocation)(),o=Object(f.usePlatformService)(),i=t.getStateTransfer(),c=Object(f.useVisualizationsService)(),l=o.getUISetting("theme:darkMode"),u=Object(n.useMemo)((()=>t?Array.from(t.getEmbeddableFactories()):[]),[t]),[d,p]=Object(n.useState)([]);Object(n.useEffect)((()=>{Promise.all(u.map((async e=>({factory:e,isEditable:await e.isEditable()})))).then((e=>{p(e)}))}),[u]);const b=Object(n.useCallback)((e=>()=>{let t="",n="";e?(Jr&&Jr(Xr.METRIC_TYPE.CLICK,`${e.name}:create`),"aliasPath"in e?(n=e.aliasApp,t=e.aliasPath):(n="visualize",t=`#/create?type=${encodeURIComponent(e.name)}`)):(n="visualize",t="#/create?"),i.navigateToEditor(n,{path:t,state:{originatingApp:Na.CANVAS_APP,originatingPath:`${a}${r}${s}`}})}),[i,a,r,s]),m=Object(n.useCallback)((t=>async()=>{let a;if(Jr&&Jr(Xr.METRIC_TYPE.CLICK,t.type),t.getExplicitInput)a=await t.getExplicitInput();else{const e=await t.create({});a=null==e?void 0:e.getInput()}if(a){const n=`embeddable config="${Object(Kc.b)(a)}"\n  type="${t.type}"\n| render`;e({expression:n})}}),[e]),g=c.getAliases().sort((({promotion:e=!1},{promotion:t=!1})=>e===t?0:e?-1:1)),h=d.filter((({isEditable:e,factory:{type:t,canCreateNew:a,isContainerType:n}})=>e&&!n&&a()&&!["visualization","ml"].some((e=>t.includes(e))))).map((({factory:e})=>e)),v=(x=$c.VisGroups.PROMOTED,c.getByGroup(x).sort((({name:e},{name:t})=>e<t?-1:e>t?1:0)).filter((({hidden:e})=>!e)));var x;return Object(B.jsx)(qc,{createNewVisType:b,createNewEmbeddable:m,promotedVisTypes:v,isDarkThemeEnabled:l,factories:h,visTypeAliases:g})},Xc=Object(te.s)();var Yc=a(54);const Jc=({onSelect:e,availableEmbeddables:t,onClose:a,isByValueEnabled:r})=>{const s=Object(f.useEmbeddablesService)(),o=Object(f.usePlatformService)(),{getEmbeddableFactories:i}=s,{getSavedObjects:l,getUISettings:u}=o,d=Object(n.useCallback)(((t,a)=>{const n=i(),s=Array.from(n).find((e=>Boolean(e.savedObjectMetaData&&e.savedObjectMetaData.type===a))),o=s?s.type:"unknown";e(t,o,r)}),[r,i,e]),p=i(),b=Array.from(p).filter((e=>r||t.includes(e.type))).map((e=>e.savedObjectMetaData)).filter((function(e){return void 0!==e}));return Object(B.jsx)(z.EuiFlyout,{ownFocus:!0,onClose:a,"data-test-subj":"dashboardAddPanel"},Object(B.jsx)(z.EuiFlyoutHeader,{hasBorder:!0},Object(B.jsx)(z.EuiTitle,{size:"m"},Object(B.jsx)("h2",null,c.i18n.translate("xpack.canvas.embedObject.titleText",{defaultMessage:"Add from library"})))),Object(B.jsx)(z.EuiFlyoutBody,null,Object(B.jsx)(Yc.SavedObjectFinderUi,{onChoose:d,savedObjectMetaData:b,showFilter:!0,noItemsMessage:c.i18n.translate("xpack.canvas.embedObject.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."}),savedObjects:l(),uiSettings:u()})))};var Qc=a(124);const el={[Qc.b.map]:e=>`savedMap id="${e}" | render`,[Qc.b.lens]:e=>`savedLens id="${e}" | render`,[Qc.b.visualization]:e=>`savedVisualization id="${e}" | render`},tl=e=>{const t=Object(n.useMemo)((()=>document.createElement("div")),[]);return Object(n.useEffect)((()=>{let e=document.querySelector("body");return e&&t&&e.appendChild(t),()=>{e=document.querySelector("body"),e&&t&&e.removeChild(t)}}),[t]),t?Object(s.createPortal)(Object(B.jsx)(Jc,D()({},e,{availableEmbeddables:Object.keys(el)})),t):null},al=({availableEmbeddables:e,...t})=>{const a=Object(f.useLabsService)().isProjectEnabled("labs:canvas:byValueEmbeddable"),r=Object(l.useDispatch)(),s=Object(l.useSelector)((e=>Object(ee.r)(e))),o=Object(n.useCallback)(((e,t)=>r(Object(re.b)(e,t))),[r]),i=Object(n.useCallback)(((e,n)=>{const r={expression:`markdown "Could not find embeddable for type ${n}" | render`};if(a){const t=Object(Kc.b)({savedObjectId:e});r.expression=`embeddable config="${t}" \n  type="${n}" \n| render`}else el[n]&&(r.expression=el[n](e));o(s,r),t.onClose()}),[o,s,t,a]);return Object(B.jsx)(tl,D()({},t,{availableEmbeddables:e||[],onSelect:i,isByValueEnabled:a}))},nl=Object(l.connect)((e=>({isWriteable:Object(ee.C)(e)&&Object(L.a)(e),canUserWrite:Object(L.a)(e),selectedPage:Object(ee.r)(e),pageId:Object(ee.r)(e)})),(e=>({onSetWriteable:t=>e(Object(A.m)(t)),addElement:t=>a=>e(Object(re.b)(t,a))})),((e,t,a)=>({...e,...t,...a,renderEmbedPanel:e=>Object(B.jsx)(al,{onClose:e}),addElement:t.addElement(e.pageId),elements:ii.toJS()})))((({isWriteable:e,canUserWrite:t,commit:a,onSetWriteable:s=(()=>{}),renderEmbedPanel:o,elements:i,addElement:l})=>{const[u,d]=Object(n.useState)(!1),p=()=>s(!e),b=()=>t?e?c.i18n.translate("xpack.canvas.workpadHeader.hideEditControlTooltip",{defaultMessage:"Hide editing controls"}):c.i18n.translate("xpack.canvas.workpadHeader.showEditControlTooltip",{defaultMessage:"Show editing controls"}):c.i18n.translate("xpack.canvas.workpadHeader.noWritePermissionTooltip",{defaultMessage:"You don't have permission to edit this workpad"}),m=Object(n.useCallback)((e=>()=>{i[e]&&l(i[e])}),[l,i]),g=[{iconType:"visText",createType:Xc.markdown.displayName,onClick:m("markdown")},{iconType:"node",createType:Xc.shape.displayName,onClick:m("shape")},{iconType:"image",createType:Xc.image.displayName,onClick:m("image")}];return Object(B.jsx)(r.a.Fragment,null,Object(B.jsx)(z.EuiFlexGroup,{gutterSize:"none",alignItems:"center",className:"canvasLayout__stageHeaderInner"},e&&Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(I.SolutionToolbar,null,{primaryActionButton:Object(B.jsx)(qi,{addElement:l,elements:i}),quickButtonGroup:Object(B.jsx)(I.QuickButtonGroup,{buttons:g}),extraButtons:[Object(B.jsx)(I.AddFromLibraryButton,{onClick:()=>d(!0),"data-test-subj":"canvas-add-from-library-button"}),Object(B.jsx)(Zc,{addElement:l})]})),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(Vc,null)),e&&Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(Ci,{commit:a})),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(xc,null)),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(Uc,null)))),Object(B.jsx)(z.EuiFlexItem,null),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(z.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(B.jsx)(z.EuiFlexItem,{grow:!1},t&&Object(B.jsx)(h.Shortcuts,{name:"EDITOR",handler:e=>{"EDITING"===e&&p()},targetNodeSelector:"body",global:!0,isolate:!0}),Object(B.jsx)(z.EuiToolTip,{position:"bottom",content:(({textOnly:e}={textOnly:!1})=>{const t=b();return e?t:Object(B.jsx)("span",null,t," ",Object(B.jsx)(Qt,{namespace:"EDITOR",action:"EDITING"}))})()},Object(B.jsx)(z.EuiButtonIcon,{iconType:e?"eyeClosed":"eye",onClick:p,size:"s","aria-label":b(),isDisabled:!t}))),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(li,null)),Object(B.jsx)(z.EuiFlexItem,{grow:!1},Object(B.jsx)(vi,null,(({toggleFullscreen:e})=>Object(B.jsx)(z.EuiToolTip,{position:"bottom",content:Object(B.jsx)("span",null,c.i18n.translate("xpack.canvas.workpadHeader.fullscreenTooltip",{defaultMessage:"Enter fullscreen mode"})," ",Object(B.jsx)(Qt,{namespace:"PRESENTATION",action:"FULLSCREEN"}))},Object(B.jsx)(z.EuiButtonIcon,{iconType:"fullScreen","aria-label":c.i18n.translate("xpack.canvas.workpadHeader.fullscreenButtonAriaLabel",{defaultMessage:"View fullscreen"}),onClick:e})))))))),u?o((()=>d(!1))):null)})),rl="canvasWorkpadContainer",sl="workpad-loaded",ol=((e,t=Jr)=>function(a){const{workpad:r}=a,[s,o]=Object(n.useState)(void 0),[i,c]=Object(n.useState)(!1),u=Object(l.useSelector)((e=>Object(ee.d)(e)),l.shallowEqual),d=Object(l.useSelector)((e=>Object(ci.a)(e)),ne.a),p=function(e,t){const a=Object.keys(t);return e.pages.reduce(((e,t)=>[...e,...t.elements.map((e=>e.id))]),[]).every((e=>a.includes(e)))}(r,d),{error:b,pending:m}=u,g=p&&0===m;return Object(n.useEffect)((()=>{if(r.id!==s){const e=r.pages.reduce(((e,t)=>e+t.elements.length),0);o(r.id),c(0===e||g)}else!i&&g&&(t(Xr.METRIC_TYPE.LOADED,b>0?[sl,"workpad-loaded-with-errors"]:sl),c(!0))}),[s,i,b,r.id,g,r.pages]),Object(B.jsx)(e,a)})((({deselectElement:e,isWriteable:t,workpad:a})=>{const r=Object(n.useRef)(null),s=Object(n.useRef)(null);Object(n.useEffect)((()=>{var e;null===(e=s.current)||void 0===e||e.focus()}),[s]);const o=Object(n.useCallback)((e=>{r.current!==e&&(r.current=e)}),[]),i=Object(n.useCallback)((e=>{r.current===e&&(r.current=null)}),[]),c=r.current||(()=>{}),l=Object(n.useMemo)((()=>Object(P.a)()),[]);return Object(B.jsx)("div",{className:"canvasLayout"},Object(B.jsx)("div",{className:"canvasLayout__rows"},Object(B.jsx)("div",{className:"canvasLayout__cols"},Object(B.jsx)("div",{className:"canvasLayout__stage"},Object(B.jsx)("div",{className:"canvasLayout__stageHeader"},Object(B.jsx)("h1",{id:"canvasWorkpadTitle",className:"euiScreenReaderOnly",ref:s,tabIndex:-1},`${te.c} - ${a.name||l}`),Object(B.jsx)(nl,{commit:c})),Object(B.jsx)("div",{id:oe.m,className:oe.m},Object(B.jsx)("div",{id:rl,className:"canvasWorkpadContainer canvasLayout__stageContentOverflow"},Object(B.jsx)(oi,{registerLayout:o,unregisterLayout:i})))),t&&Object(B.jsx)("div",{className:"canvasLayout__sidebar hide-for-sharing"},Object(B.jsx)(Tr,{commit:c}))),Object(B.jsx)("div",{className:"canvasLayout__footer hide-for-sharing"},Object(B.jsx)($r,null))))})),il=Object(l.connect)((e=>({isWriteable:Object(ee.C)(e)&&Object(L.a)(e),workpad:Object(ee.u)(e)})))(ol),cl=Object(l.connect)((e=>({workpad:Object(ee.u)(e),selectedPageIndex:Object(ee.s)(e)})),(e=>({initializeWorkpad:()=>e(Object(A.c)())})))((({workpad:e,selectedPageIndex:t,initializeWorkpad:a})=>{const{id:r,pages:s,height:o,width:i}=e,c=s[t],l=c.elements.length;return Object(n.useEffect)((()=>a())),Object(B.jsx)("div",{className:"canvasExport","data-shared-page":t+1},Object(B.jsx)("div",{className:"canvasExport__stage"},Object(B.jsx)("div",{className:"canvasLayout__stageHeader"},Object(B.jsx)(Ar.b,{to:`/workpad/${r}`},"Edit Workpad")),Object(B.jsx)("div",{css:Object(B.css)(e.css,"",""),className:"canvasExport__stageContent","data-shared-items-count":l},Object(B.jsx)(ei,{isSelected:!0,key:c.id,pageId:c.id,height:o,width:i,registerLayout:()=>{},unregisterLayout:()=>{}}))))})),ll=()=>c.i18n.translate("xpack.canvas.canvasLoading.loadingMessage",{defaultMessage:"Loading"}),ul=({msg:e=`${ll()}...`})=>Object(B.jsx)("div",{className:"canvasContainer--loading"},Object(B.jsx)(z.EuiPanel,null,Object(B.jsx)(z.EuiLoadingChart,{size:"m"}),Object(B.jsx)(z.EuiSpacer,{size:"s"}),Object(B.jsx)(z.EuiText,{color:"default",size:"s"},Object(B.jsx)("p",null,e))));var dl=a(146),pl=a(400),bl=a.n(pl);const ml=e=>{try{const t=JSON.stringify(e);return bl.a.compress(t)}catch(e){throw new Error(`Could not encode state: ${e.message}`)}},gl=e=>{try{var t;const a=null!==(t=bl.a.decompress(e))&&void 0!==t?t:"null";return JSON.parse(a)}catch(e){return null}};var fl=a(55);const hl=()=>{const e=Object(C.useParams)(),t=Object(l.useSelector)(ee.u),a=Object(l.useDispatch)(),r=parseInt(e.pageNumber,10);let s=t.page;isNaN(r)||(s=r-1),Object(n.useEffect)((()=>{s!==t.page&&a(Object(la.e)(s))}),[s,t.page,a])},vl="canvas-isFullscreen",xl=({children:e})=>{var t;const a=Object(f.usePlatformService)(),s=Object(l.useSelector)(ee.u);(()=>{const{isFullscreen:e}=Object(n.useContext)(fi),{setFullscreen:t}=Object(f.usePlatformService)();Object(n.useEffect)((()=>{const a=document.querySelector("body").classList,n=a.contains(vl);e&&!n?(t(!1),a.add(vl)):!e&&n&&(a.remove(vl),t(!0))}),[e,t]),cn()((()=>()=>{var e;t(!0),null===(e=document.querySelector("body"))||void 0===e||e.classList.remove(vl)}))})(),(()=>{const{nextPage:e,isFullscreen:t,autoplayInterval:a,isAutoplayPaused:r}=Object(n.useContext)(fi),s=Object(n.useRef)(void 0);Object(n.useEffect)((()=>((s.current||!t||r)&&clearTimeout(s.current),t&&!r&&a>0&&(s.current=window.setTimeout((()=>{e()}),a)),()=>clearTimeout(s.current))),[t,e,a,r])})(),(()=>{const e=Object(l.useDispatch)(),{refreshInterval:t}=Object(n.useContext)(fi),a=Object(n.useRef)(void 0),r=Object(l.useSelector)(ci.b);Object(n.useEffect)((()=>(clearTimeout(a.current),t>0&&!r&&(a.current=window.setTimeout((()=>{e(Object(re.e)())}),t)),()=>{clearTimeout(a.current)})),[r,e,t])})();const o=Object(C.useHistory)();Object(n.useEffect)((()=>{a.setBreadcrumbs([T(o),N({name:s.name})])}),[s.name,a,o]),Object(n.useEffect)((()=>{Object(P.b)(s.name||Object(P.a)())}),[s.name,s.id]);const i=s.aliasId?null===(t=a.getLegacyUrlConflict)||void 0===t?void 0:t.call(a,{objectNoun:c.i18n.translate("xpack.canvas.workpadConflict.redirectLabel",{defaultMessage:"Workpad"}),currentObjectId:s.id,otherObjectId:s.aliasId,otherObjectPath:`/workpad/${s.aliasId}`}):null;return Object(B.jsx)(r.a.Fragment,null,i,e)},{workpadRoutes:jl}=te.f,yl=({route:e})=>{const t=Object(n.useCallback)((t=>`/workpad/${t}${e.match.params.pageNumber?`/page/${e.match.params.pageNumber}`:""}`),[e.match.params.pageNumber]);return Object(B.jsx)(kl,{params:e.match.params,key:"workpad-loader",getRedirectPath:t},(t=>Object(B.jsx)(C.Switch,null,Object(B.jsx)(C.Route,{path:"/workpad/:id/page/:pageNumber",children:e=>Object(B.jsx)(wl,null,Object(B.jsx)(hi,null,Object(B.jsx)(xl,null,Object(B.jsx)(il,null))))}),Object(B.jsx)(C.Route,{path:"/workpad/:id",strict:!1,exact:!0},Object(B.jsx)(C.Redirect,{to:`/workpad/${e.match.params.id}/page/${t.page+1}`})))))},Ol=({route:{match:e}})=>{const t=Object(n.useCallback)((t=>`/export/workpad/pdf/${t}/page/${e.params.pageNumber}`),[e.params.pageNumber]);return Object(B.jsx)(kl,{loadPages:!1,params:e.params,getRedirectPath:t},(()=>Object(B.jsx)(_l,null,Object(B.jsx)(cl,null))))},_l=({children:e})=>{const t=Object(C.useParams)();hl();const a=Object(l.useDispatch)();return Object(n.useEffect)((()=>{a(Object(re.e)({onlyActivePage:!0}))}),[a,t.pageNumber]),Object(B.jsx)(r.a.Fragment,null,e)},wl=({children:e})=>((()=>{const e=Object(C.useHistory)(),t=Object(C.useLocation)(),a=Object(l.useDispatch)(),{state:r}=t,s=Object(n.useRef)(r),o=e.action.toLowerCase();Object(n.useEffect)((()=>{"pop"===o&&null!=r&&r!==s.current&&(s.current=r,a(Object(dl.a)(gl(r))),a(Object(A.c)())),s.current=r}),[a,o,r])})(),(()=>{const e=Object(C.useHistory)(),t=Object(l.useSelector)((e=>e.persistent)),a=Object(n.useRef)(!1);Object(n.useEffect)((()=>{const n=!a.current,r=e.location.state,s=r?gl(r):{},o=Object(u.isEqual)(t,s),i=Object(fl.createPath)(e.location);a.current=!0,void 0===r?e.replace(i,ml(t)):n||o||e.push(i,ml(t))}),[e,t,e.location.search])})(),hl(),(()=>{const e=Object(f.useWorkpadService)(),t=Object(f.useNotifyService)(),[a,r]=Object(l.useSelector)((e=>[Object(ee.u)(e),Object(L.a)(e)])),s=un()(a),o=s&&a!==s;Object(n.useEffect)((()=>{r&&o&&e.updateWorkpad(a.id,a).catch((e=>{gr(e,t.error)}))}),[e,a,o,r,t.error])})(),Object(B.jsx)(r.a.Fragment,null,e)),kl=({params:e,children:t,loadPages:a,getRedirectPath:r})=>{const[s,o]=((e,t=!0,a)=>{const r=Object(f.useWorkpadService)().resolve,s=Object(f.usePlatformService)(),o=Object(l.useDispatch)(),i=Object(l.useSelector)(ee.u),[u,d]=Object(n.useState)(void 0),[p,b]=Object(n.useState)(void 0);return Object(n.useEffect)((()=>{(async()=>{try{const{workpad:{assets:a,...n},...s}=await r(e);b({id:e,...s}),i.id!==e&&"aliasMatch"!==s.outcome&&(n.aliasId=s.aliasId,o(Object(sr.e)(a)),o(Object(A.j)(n,{loadPages:t})),o(Object(je.e)(1)))}catch(e){d(e)}})()}),[e,o,d,t,r,i.id]),Object(n.useEffect)((()=>{p&&p.id!==e||(async()=>{if(!p)return;const{aliasId:e,outcome:t,aliasPurpose:n}=p;if("aliasMatch"===t&&s.redirectLegacyUrl&&e){const t=a(e);await s.redirectLegacyUrl({path:`#${t}`,aliasPurpose:n,objectNoun:c.i18n.translate("xpack.canvas.workpadResolve.redirectLabel",{defaultMessage:"Workpad"})})}})()}),[e,p,a,s]),[i.id===e?i:void 0,u]})(e.id,a,r),i=Object(f.useNotifyService)();return Object(n.useEffect)((()=>{o&&i.error(o,{title:jl.getLoadFailureErrorMessage()})}),[o,i]),o?Object(B.jsx)(C.Redirect,{to:"/"}):s?t(s):Object(B.jsx)(ul,null)},El=({history:e})=>Object(B.jsx)(C.Router,{history:e},Object(B.jsx)(C.Route,{path:"/",children:e=>{if(0===e.location.hash.indexOf("#/")){const[t,a]=e.location.hash.split("?");let n=e.location.search||"?";return void 0!==a&&(n=((e,t)=>{const a=Object(M.parse)(e),n=Object(M.parse)(t);return Object(M.stringify)({...a,...n})})(n,`?${a}`)),Object(B.jsx)(C.Redirect,{to:`${t.substr(1)}${n.length>1?`?${n}`:""}`})}return Object(B.jsx)(C.Switch,null,Object(B.jsx)(C.Route,{path:"/export/workpad/pdf/:id/page/:pageNumber",children:e=>Object(B.jsx)(Ol,{route:e})}),Object(B.jsx)(C.Route,{path:["/workpad/:id/page/:pageNumber","/workpad/:id"],exact:!1,children:e=>Object(B.jsx)(yl,{route:e})}),Object(B.jsx)(C.Route,{path:"/"},Object(B.jsx)(Q,null)))}})),Sl=Xt(),Cl=e=>e.map((e=>{const t=e[Sl];return{title:e.help,description:t.reduce(((e,t,a)=>(t=t.replace(/\+/g," "),0!==a&&e.push(Object(B.jsx)("span",{key:Object(de.a)("span")}," ",c.i18n.translate("xpack.canvas.keyboardShortcutsDoc.shortcutListSeparator",{defaultMessage:"or",description:'Separates which keyboard shortcuts can be used for a single action. Example: "{shortcut1} or {shortcut2} or {shortcut3}"'})," ")),e.push(Object(B.jsx)("span",{key:Object(de.a)("span")},Yt(t).split(/( )/g).map((e=>" "===e?e:Object(B.jsx)(z.EuiCode,{key:Object(de.a)("shortcut")},e))))),e)),[])}})),Ml=({onClose:e})=>Object(B.jsx)(z.EuiFlyout,{closeButtonAriaLabel:c.i18n.translate("xpack.canvas.keyboardShortcutsDoc.flyout.closeButtonAriaLabel",{defaultMessage:"Closes keyboard shortcuts reference"}),size:"s",onClose:e},Object(B.jsx)(z.EuiFlyoutHeader,{hasBorder:!0},Object(B.jsx)(z.EuiTitle,{size:"s"},Object(B.jsx)("h2",null,c.i18n.translate("xpack.canvas.keyboardShortcutsDoc.flyoutHeaderTitle",{defaultMessage:"Keyboard shortcuts"})))),Object(B.jsx)(z.EuiFlyoutBody,null,Object.values(E).map((e=>{const{displayName:t,...a}=e;return Object(B.jsx)("div",{key:Object(de.a)("shortcuts"),className:"canvasKeyboardShortcut"},Object(B.jsx)(z.EuiTitle,{size:"xs"},Object(B.jsx)("h4",null,t)),Object(B.jsx)(z.EuiHorizontalRule,{margin:"s"}),Object(B.jsx)(z.EuiDescriptionList,{textStyle:"reverse",type:"column",listItems:Cl(Object.values(a)),compressed:!0}),Object(B.jsx)(z.EuiSpacer,null))})))),Pl=({isVisible:e,hidePanel:t})=>Object(B.jsx)(r.a.Fragment,null,e&&Object(B.jsx)(z.EuiPortal,null,Object(B.jsx)(Ml,{onClose:t})));var Tl=a(149);const Nl=()=>{const e=Object(l.useDispatch)(),t=Object(l.useSelector)((e=>(e=>e.transient.flyouts.keyboardShortcutsDoc.isVisible)(e))),a=Object(n.useCallback)((()=>e(Object(Tl.b)(!1))),[e]);return Object(B.jsx)(Pl,{isVisible:t,hidePanel:a})},Al=()=>Object(B.jsx)(r.a.Fragment,null,Object(B.jsx)(Nl,null));class app_ShortcutManagerContextWrapper extends r.a.Component{getChildContext(){return{shortcuts:S}}render(){return Object(B.jsx)(r.a.Fragment,null,this.props.children)}}b()(app_ShortcutManagerContextWrapper,"childContextTypes",{shortcuts:g.a.object.isRequired});const Il=({history:e})=>{const{updatePath:t}=Object(f.useNavLinkService)();return Object(n.useEffect)((()=>e.listen((({pathname:e,search:a})=>{t(e+a)})))),Object(B.jsx)(app_ShortcutManagerContextWrapper,null,Object(B.jsx)("div",{className:"canvas canvasContainer"},Object(B.jsx)(El,{history:e}),Object(B.jsx)(Al,null)))};var Fl=a(93),Dl=a(125);const Ll=Object(Fl.e)();function Rl(e){this.name=e.name,this.displayName=e.displayName||this.name,this.id=e.id||Object(de.a)("workpad"),this.help=e.help||"",this.tags=e.tags||[],this.tags.forEach((e=>{Dl.a.get(e)||Dl.a.register((()=>({name:e,color:"#666666"})))})),this.width=e.width||Ll.width,this.height=e.height||Ll.height,this.page=e.page||Ll.page,this.pages=e.pages||Ll.pages,this.colors=e.colors||Ll.colors,this["@timestamp"]=e["@timestamp"]||Ll["@timestamp"],this["@created"]=e["@created"]||Ll["@created"],this.assets=e.assets||{},this.css=e.css||Ll.css}class templates_registry_TemplateRegistry extends oa.a{wrapper(e){return new Rl(e)}}const zl=new templates_registry_TemplateRegistry;let Bl={};const Hl=({hideHelpMenu:e,showKeyboardShortcutsDocFlyout:t})=>{const a=Object(n.useCallback)((()=>{e(),t()}),[e,t]);return Object(B.jsx)(r.a.Fragment,null,Object(B.jsx)(z.EuiButtonEmpty,{size:"s",flush:"left",iconType:"keyboard",onClick:a},c.i18n.translate("xpack.canvas.helpMenu.keyboardShortcutsLinkLabel",{defaultMessage:"Keyboard shortcuts"})))},Wl=e=>{const t=Object(l.useDispatch)(),a=Object(n.useCallback)((()=>t(Object(Tl.b)(!0))),[t]);return Object(B.jsx)(Hl,D()({},e,{showKeyboardShortcutsDocFlyout:a}))};var Vl=a(158);function Gl(){const{help:e,args:t}=Object(te.u)().asset,a=Object(te.t)().asset;return{name:"asset",aliases:[],type:"string",inputTypes:["null"],help:e,args:{id:{aliases:["_"],types:["string"],help:t.id,required:!0}},fn:(e,t)=>{const n=t.id,r=Object(xn.a)(Object(Vl.d)(),n);if(void 0!==r)return r.value;throw a.invalidAssetId(n)}}}function Ul(e){return t=(t,{group:a,ungrouped:n})=>{const{expressions:r,filters:s}=f.pluginServices.getServices(),o=function(e,t,a=!1){return t&&0!==t.length?e.filter((e=>{const a=Object(oa.d)(e),n=Object(u.get)(a,"chain[0].arguments.filterGroup",[]);return n.length>0&&n.every((e=>t.includes(e)))})):a?e.filter((e=>{const t=Object(oa.d)(e);return 0===Object(u.get)(t,"chain[0].arguments.filterGroup",[]).length})):e}(s.getFilters(),a,n);if(o&&o.length){const e=o.join(" | "),t=Object(oa.d)(e),{variables:a}=s.getFiltersContext();return r.interpretAst(t,a)}{const t=e.types.filter;return null==t?void 0:t.from(null,{})}},function(){const{help:e,args:a}=Object(te.u)().filters;return{name:"filters",type:"filter",help:e,context:{types:["null"]},args:{group:{aliases:["_"],types:["string"],help:a.group,multi:!0},ungrouped:{aliases:["nogroup","nogroups"],types:["boolean"],help:a.ungrouped,default:!1}},fn:t,migrations:void 0}};var t}var $l=a(56),Kl=a.n($l),ql=a(135),Zl=a(160);function Xl(e){return()=>{const{help:t,args:a}=Object(te.u)().timelion;return{name:"timelion",type:"datatable",inputTypes:["filter"],help:t,args:{query:{types:["string"],aliases:["_","q"],help:a.query,default:'".es(*)"'},interval:{types:["string"],help:a.interval,default:"auto"},from:{types:["string"],help:a.from,default:"now-1y"},to:{types:["string"],help:a.to,default:"now"},timezone:{types:["string"],help:a.timezone,default:"UTC"}},fn:async(t,a)=>{const n=t.and.find((e=>"time"===e.filterType)),r=n?{min:n.from,max:n.to}:function(e,t,a){const n=Kl()().zoneName();Kl.a.tz.setDefault(t);const r=a.calculateBounds(e);return Kl.a.tz.setDefault(n),r}({from:a.from,to:a.to},a.timezone,e.timefilter),s={extended:{es:{filter:{bool:{must:Object(Zl.a)(t.and)}}}},sheet:[a.query],time:{from:r.min,to:r.max,interval:a.interval,timezone:a.timezone}};let o;try{o=await Object(ql.a)(e.prependBasePath("/api/timelion/run"),{method:"POST",responseType:"json",data:s})}catch(e){throw new Error(c.i18n.translate("xpack.canvas.functions.timelion.executionError",{defaultMessage:"There was an error executing the Timelion query.  Check your syntax and try again."}))}const i=o.data.sheet[0].list;return{type:"datatable",meta:{source:"timelion"},columns:[{id:"@timestamp",name:"@timestamp",meta:{type:"date"}},{id:"value",name:"value",meta:{type:"number"}},{id:"label",name:"label",meta:{type:"string"}}],rows:Object(u.flatten)(i.map((e=>e.data.map((t=>({"@timestamp":t[0],value:t[1],label:e.label}))))))}}}}}function Yl(e){return function(){const{help:t,args:a}=Object(te.u)().to,n=Object(te.t)().to;return{name:"to",aliases:[],help:t,args:{type:{types:["string"],help:a.type,aliases:["_"],multi:!0}},fn:(t,a)=>{if(!a.type)throw n.missingType();return Object(oa.c)(e.types)(t,a.type)}}}}var Jl=a(112);const Ql=(e,t,{columns:a,ticks:n,font:r}={})=>{if(!t||Object(Aa.isAxisConfig)(t)&&!1===t.show)return{show:!1};const s={show:!0},o=Object(u.get)(a,`${e}.type`);if(Object(Aa.isAxisConfig)(t)){const{position:a,min:n,max:r,tickSize:i}=t,c="x"===e?["bottom","top"]:["left","right"];s.position=a&&c.includes(a)?a:c[0],"number"!==o&&"date"!==o||(null!=n&&(s.min=n),null!=r&&(s.max=r)),i&&"number"===o&&(s.tickSize=i)}if("string"===o&&n){const t=n[e];t&&(s.ticks=Object(u.map)(t.hash,((e,t)=>[e,t])))}return"date"===o&&(s.mode="time"),"object"==typeof r&&(s.font=r),s},eu={size:14,lHeight:21,style:"normal",weight:"normal",family:a(71).openSans.value,color:"#000"},tu=e=>{if(!e)return{};const t=Object(u.get)(e,"lines"),a=Object(u.get)(e,"bars"),n=Object(u.get)(e,"fill"),r=Object(u.get)(e,"color"),s=Object(u.get)(e,"stack"),o={numbers:{show:!0},lines:{show:t>0,lineWidth:t,fillColor:r,fill:n/10},bars:{show:a>0,barWidth:a,fill:1,align:"center",horizontal:Object(u.get)(e,"horizontalBars",!1)},points:{show:!1},bubbles:{show:!0,fill:n}};return null!=s&&(o.stack=s),r&&(o.color=r),o};function au(e){return()=>{const{help:t,args:a}=Object(te.u)().plot;return{name:"plot",aliases:[],type:"render",inputTypes:["pointseries"],help:t,args:{defaultStyle:{multi:!1,types:["seriesStyle"],help:a.defaultStyle,default:"{seriesStyle points=5}"},font:{types:["style"],help:a.font,default:"{font}"},legend:{types:["string","boolean"],help:a.legend,default:"ne",options:[...Object.values(Aa.Legend),!1]},palette:{types:["palette"],help:a.palette,default:"{palette}"},seriesStyle:{multi:!0,types:["seriesStyle"],help:a.seriesStyle},xaxis:{types:["boolean","axisConfig"],help:a.xaxis,default:!0},yaxis:{types:["boolean","axisConfig"],help:a.yaxis,default:!0}},fn:(t,a)=>{const n=Object(u.keyBy)(a.seriesStyle||[],"label")||{},r=t.rows,s=((e,t)=>{const a={x:{hash:{},counter:0},y:{hash:{},counter:0}};return"string"===Object(u.get)(e,"x.type")&&t.forEach((e=>{a.x.hash[e.x]||(a.x.hash[e.x]=a.x.counter++)})),"string"===Object(u.get)(e,"y.type")&&t.reverse().forEach((e=>{a.y.hash[e.y]||(a.y.hash[e.y]=a.y.counter++)})),a})(t.columns,r),o=a.font?(e=>{if(!e||!e.spec)return eu;const{fontSize:t,lineHeight:a,fontStyle:n,fontWeight:r,fontFamily:s,color:o}=e.spec,i=t&&Number(t.replace("px","")),c="string"==typeof a&&Number(a.replace("px",""));return{size:i&&!isNaN(i)?i:eu.size,lHeight:i&&!isNaN(i)?c:eu.lHeight,style:n||eu.style,weight:r||eu.weight,family:s||eu.family,color:o||eu.color}})(a.font):{},i=Object(u.map)(Object(u.groupBy)(r,"color"),((e,r)=>{const o={...a.defaultStyle,...n[r]},i=o?tu(o):{};return{...i,label:r,data:e.map((e=>{const a={},n="string"===Object(u.get)(t.columns,"x.type")?s.x.hash[e.x]:e.x,r="string"===Object(u.get)(t.columns,"y.type")?s.y.hash[e.y]:e.y;return null!=e.size?a.size=e.size:Object(u.get)(o,"points")&&(a.size=o.points,Object(Mi.set)(i,"bubbles.size.min",o.points)),null!=e.text&&(a.text=e.text),[n,r,a]}))}})),c={type:"render",as:"plot",value:{font:a.font,data:Object(u.sortBy)(i,"label"),options:{canvas:!1,colors:e.get(a.palette.name||"custom").getCategoricalColors(i.length,a.palette.params),legend:Object(Jl.a)(a.legend,i.length),grid:{borderWidth:0,borderColor:null,color:"rgba(0,0,0,0)",labelMargin:30,margin:{right:30,top:20,bottom:0,left:0}},xaxis:Ql("x",a.xaxis,{columns:t.columns,ticks:s,font:o}),yaxis:Ql("y",a.yaxis,{columns:t.columns,ticks:s,font:o}),series:{shadowSize:0,...tu(a.defaultStyle)}}}};return JSON.parse(JSON.stringify(c))}}}}var nu=a(213),ru=a(201),su=a(202);a(401);const{ReadOnlyBadge:ou}=te.d,iu=({coreStart:e,startPlugins:t,params:a,canvasStore:n,pluginServices:r})=>{const{presentationUtil:s}=t,{element:c}=a;c.classList.add("canvas"),c.classList.add("canvasContainerWrapper");const u=r.getContextProvider();return o.a.render(Object(B.jsx)(d.KibanaContextProvider,{services:{...t,...e}},Object(B.jsx)(u,null,Object(B.jsx)(f.LegacyServicesProvider,{providers:f.services},Object(B.jsx)(s.ContextProvider,null,Object(B.jsx)(i.I18nProvider,null,Object(B.jsx)(d.KibanaThemeProvider,{theme$:e.theme.theme$},Object(B.jsx)(l.Provider,{store:n},Object(B.jsx)(Il,{history:a.history})))))))),c),()=>{o.a.unmountComponentAtNode(c),n.dispatch(Object(nu.c)())}},cu=async(e,t,a,n,r,s)=>{await Object(f.startLegacyServices)(e,t,a,n,s);const{expressions:i}=a,p=[Gl,Ul(b={timefilter:a.data.query.timefilter.timefilter,prependBasePath:t.http.basePath.prepend,types:a.expressions.getTypes(),paletteService:await a.charts.palettes.getPalettes()}),Xl(b),Yl(b),(m=b.paletteService,()=>{const{help:e,args:t}=Object(te.u)().pie;return{name:"pie",aliases:[],type:"render",inputTypes:["pointseries"],help:e,args:{font:{types:["style"],help:t.font,default:"{font}"},hole:{types:["number"],default:0,help:t.hole},labelRadius:{types:["number"],default:100,help:t.labelRadius},labels:{types:["boolean"],default:!0,help:t.labels},legend:{types:["string","boolean"],help:t.legend,default:!1,options:[...Object.values(Aa.Legend),!1]},palette:{types:["palette"],help:t.palette,default:"{palette}"},radius:{types:["string","number"],help:t.radius,default:"auto"},seriesStyle:{multi:!0,types:["seriesStyle"],help:t.seriesStyle},tilt:{types:["number"],default:1,help:t.tilt}},fn:(e,t)=>{const{tilt:a,radius:n,labelRadius:r,labels:s,hole:o,legend:i,palette:c,font:l,seriesStyle:d}=t,p=Object(u.keyBy)(d||[],"label")||{},b=Object(u.map)(Object(u.groupBy)(e.rows,"color"),((e,t="")=>{const a={label:t,data:e.map((e=>e.size||1))},n=p[t];return n&&(a.color=Object(u.get)(n,"color")),a}));return{type:"render",as:"pie",value:{font:l,data:b,options:{canvas:!1,colors:m.get(c.name||"custom").getCategoricalColors(b.length,c.params),legend:Object(Jl.a)(i,b.length),grid:{show:!1},series:{pie:{show:!0,innerRadius:Math.max(o,0)/100,stroke:{width:0},label:{show:s,radius:(r>=0?r:100)/100},tilt:a,radius:n},bubbles:{show:!1},shadowSize:0}}}}}}}),au(b.paletteService)];var b,m;for(const e of p)i.registerFunction(e);const g=await async function(e){return Object(Vl.e)()?Object(Vl.a)():async function(e){const t=(e=>{const t=f.pluginServices.getServices().platform,{getHasWriteAccess:a}=t;return{app:{},assets:{},transient:{canUserWrite:a(),zoomScale:1,elementStats:{total:0,ready:0,pending:0,error:0},fullscreen:!1,selectedToplevelNodes:[],resolvedArgs:{},refresh:{interval:0},autoplay:{enabled:!1,interval:1e4},sidebar:Object(Fl.d)(),flyouts:Object(Fl.b)()},persistent:{schemaVersion:2,workpad:Object(Fl.e)()}}})(),a=e.http.basePath.get(),n=await e.http.get(oe.b),r=Object.values(n);return t.app={basePath:a,serverFunctions:r,ready:!1},Object(Vl.b)(t)}(e)}(e);Object(oa.b)(Bl,{elements:ii,transformUIs:Wn,datasourceUIs:mn,modelUIs:Un,viewUIs:$n,argumentUIs:Fn,templates:zl,tagUIs:Dl.a,transitions:ca}),await async function(e){const t={},a=Object.entries(e).map((async([e,a])=>{const n=await(await Promise.all(a.map((e=>"function"==typeof e?e():e)))).flat();t[e]=n}));await Promise.all(a),Object(oa.f)(Bl,t)}(r),t.chrome.setBadge(t.application.capabilities.canvas&&t.application.capabilities.canvas.save?void 0:{text:ou.getText(),tooltip:ou.getTooltip(),iconType:"glasses"});const{docLinks:h}=t;var v;return t.chrome.setHelpExtension({appName:c.i18n.translate("xpack.canvas.helpMenu.appName",{defaultMessage:"Canvas"}),links:[{linkType:"documentation",href:h.links.canvas.guide}],content:(e,{hideHelpMenu:a})=>(o.a.render(Object(B.jsx)(d.KibanaThemeProvider,{theme$:t.theme.theme$},Object(B.jsx)(l.Provider,{store:g},Object(B.jsx)(Wl,{hideHelpMenu:a}))),e),()=>o.a.unmountComponentAtNode(e))}),a.usageCollection&&(v=a.usageCollection.reportUiCounter,Yr=v),g},lu=e=>{Bl={},Object(u.includes)($.plot.plugins,ru.a)&&Object(u.remove)($.plot.plugins,ru.a),Object(u.includes)($.plot.plugins,su.a)&&Object(u.remove)($.plot.plugins,su.a),e.chrome.setBadge(void 0),e.chrome.setHelpExtension(void 0)}}])]);