/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[14],{211:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return w}));var a=i(0),n=i.n(a),s=i(5),l=i(17),o=i.n(l),r=i(87),c=i(140),p=i(118),u=i(15),d=i(110),b=i(129),g=i(142),y=i(151),v=i(1),m=i(6),h=i(92),x=i(30);var f=i(157),T=i(10);function w({appId:e,appendTitle:t,attributes:i=[],axisTitlesVisibility:l,customHeight:o,customLensAttrs:w,customTimeRange:O,dataViewState:I,legendIsVisible:j,legendPosition:C,lens:V,onBrushEnd:k,caseOwner:A=T.observabilityFeatureId,reportConfigMap:S={},reportType:M,showCalculationMethod:N=!1,title:R,withActions:_=!0,lensFormulaHelper:H,hideTicks:L,align:z}){var $;const B=null==V?void 0:V.EmbeddableComponent,D=null==V?void 0:V.SaveModalComponent,[F,P]=Object(a.useState)(!1),[J,W]=Object(a.useState)(!1),G=null===($=Object.entries(i)[0])||void 0===$?void 0:$[1],[K,q]=Object(a.useState)(null==G?void 0:G.operationType),Q=Object(u.useTheme)(),U=Object(b.b)(i,M,Q,I,{...S,...y.b});let X,Y=w;if(!w)try{var Z;if(M===u.ReportTypes.SINGLE_METRIC)X=new p.a(U,M,H),Y=null===(Z=X)||void 0===Z?void 0:Z.getJSON("lnsLegacyMetric");else if(M===u.ReportTypes.HEATMAP){var ee;X=new c.a(U,M,H),Y=null===(ee=X)||void 0===ee?void 0:ee.getJSON("lnsHeatmap")}else{var te;X=new d.a(U,M,H),Y=null===(te=X)||void 0===te?void 0:te.getJSON()}}catch(e){}const ie=null!=O?O:null==G?void 0:G.time,ae=function({withActions:e,attributes:t,reportType:i,setIsSaveOpen:n,setAddToCaseOpen:s,appId:l="observability",timeRange:o,lensAttributes:r}){const c=Object(m.useKibana)().services,{lens:p}=c,[u,d]=Object(a.useState)(["explore","save","addToCase"]);Object(a.useEffect)((()=>{!1===e&&d([]),Array.isArray(e)&&d(e)}),[e]);const{http:b,application:g}=Object(m.useKibana)().services,y=Object(x.b)({reportType:i,allSeries:t},null==b?void 0:b.basePath.get(),l),f=Object(h.d)({reportType:i,allSeries:t}),T=Object(a.useCallback)((()=>{r&&p.navigateToPrefilledEditor({id:"",timeRange:o,attributes:r},{openInNewTab:!0})}),[p,r,o]),w=Object(a.useCallback)((()=>{null==g||g.navigateToApp(l,{path:f})}),[l,g,f]),E=Object(a.useCallback)((()=>{n(!0)}),[n]),O=Object(a.useCallback)((()=>{s(!0)}),[s]);return u.map((e=>"save"===e?(({callback:e})=>({id:"expViewSave",getDisplayName:e=>v.i18n.translate("xpack.observability.expView.save",{defaultMessage:"Save visualization"}),getIconType:e=>"save",type:"actionButton",isCompatible:async e=>!0,async execute(t){e()},order:49}))({callback:E}):"addToCase"===e?(({callback:e})=>({id:"expViewAddToCase",getDisplayName:e=>v.i18n.translate("xpack.observability.expView.addToCase",{defaultMessage:"Add to case"}),getIconType:e=>"link",type:"actionButton",isCompatible:async e=>!0,async execute(t){e()},order:48}))({callback:O}):"openInLens"===e?(({callback:e})=>({id:"expViewOpenInLens",getDisplayName:e=>v.i18n.translate("xpack.observability.expView.openInLens",{defaultMessage:"Open in Lens"}),getIconType:e=>"visArea",type:"link",isCompatible:async e=>!0,async execute(t){e()}}))({callback:T}):(({href:e,callback:t})=>({id:"expViewExplore",getDisplayName:e=>v.i18n.translate("xpack.observability.expView.explore",{defaultMessage:"Explore"}),getIconType:e=>"visArea",type:"link",isCompatible:async e=>!0,getHref:async t=>e,async execute(e){t()},order:50}))({href:y,callback:w})))}({withActions:_,attributes:i,reportType:M,appId:e,setIsSaveOpen:P,setAddToCaseOpen:W,lensAttributes:Y,timeRange:ie});return Y?(void 0!==l&&(Y.state.visualization.axisTitlesVisibilitySettings=l),void 0!==j&&(Y.state.visualization.legend.isVisible=j),void 0!==C&&(Y.state.visualization.legend.position=C),L&&(Y.state.visualization.tickLabelsVisibilitySettings={x:!1,yRight:!1,yLeft:!1}),!Y&&U.length<1?null:B?n.a.createElement(E,{$customHeight:o,align:z},(R||N||t)&&n.a.createElement(s.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},R&&n.a.createElement(s.EuiFlexItem,{"data-test-subj":"exploratoryView-title"},n.a.createElement(s.EuiTitle,{size:"xs"},n.a.createElement("h3",null,R))),N&&n.a.createElement(s.EuiFlexItem,{grow:!1,style:{minWidth:150}},n.a.createElement(g.a,{operationType:K,onChange:e=>{q(e)}})),t&&t),n.a.createElement(B,{id:"exploratoryView","data-test-subj":"exploratoryView",style:{height:"100%"},timeRange:ie,attributes:{...Y,title:void 0,hidePanelTitles:!0,description:""},onBrushEnd:k,withDefaultActions:Boolean(_),extraActions:ae,viewMode:r.ViewMode.VIEW}),F&&Y&&n.a.createElement(D,{initialInput:Y,onClose:()=>P(!1),onSave:()=>{}}),n.a.createElement(f.a,{lensAttributes:Y,timeRange:null!=O?O:null==G?void 0:G.time,autoOpen:J,setAutoOpen:W,appId:e,owner:A})):n.a.createElement(s.EuiText,null,"No lens component")):null}const E=o.a.div.withConfig({displayName:"Wrapper",componentId:"sc-1sjndm2-0"})(["height:",";position:relative;&&&{> :nth-child(2){height:",";}.expExpressionRenderer__expression{padding:0 !important;}.legacyMtrVis{> :first-child{justify-content:",";}justify-content:flex-end;.legacyMtrVis__container{padding:0;}.legacyMtrVis__value{line-height:32px !important;font-size:27px !important;}> :first-child{transform:none !important;}}.euiLoadingChart{position:absolute;top:50%;right:50%;transform:translate(50%,-50%);}}"],(e=>e.$customHeight?`${e.$customHeight};`:"100%;"),(e=>e.$customHeight?`${e.$customHeight};`:"calc(100% - 32px);"),(e=>"left"===e.align?"flex-start;":"right"===e.align?"flex-end;":"center;"))}}]);