/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[15],{109:function(e,l,t){"use strict";t.r(l),t.d(l,"FieldValueSelection",(function(){return p}));var a=t(17),i=t.n(a),n=t(0),o=t.n(n),s=t(5),c=t(1),u=t(13);const r=t(45).euiStyled.div`
  border-radius: ${({theme:e})=>e.eui.euiBorderRadius};
  background: ${({theme:e})=>e.eui.euiColorLightShade};
  padding: 0 ${({theme:e})=>e.eui.euiSizeXS};
`,d=(e,l,t,a)=>{const i={};return null==e||e.forEach((({label:e,count:l})=>{i[e]=l})),Object.entries(i).map((([e,i])=>({label:e,append:a?o.a.createElement(r,null,o.a.createElement(s.EuiText,{size:"xs"},i)):null,...null!=l&&l.includes(e)?{checked:"on"}:{},...null!=t&&t.includes(e)?{checked:"off"}:{}})))};function p({fullWidth:e,label:l,loading:t,query:a,setQuery:i,button:r,width:p,forceOpen:g,setForceOpen:m,anchorPosition:E,singleSelection:v,asFilterButton:S,showCount:y=!0,values:w=[],selectedValue:j,excludedValue:x,allowExclusions:k=!0,compressed:O=!0,useLogicalAND:C,showLogicalConditionSwitch:F=!1,onChange:_}){const{euiTheme:z}=Object(s.useEuiTheme)(),[B,P]=Object(n.useState)((()=>d(w,j,x,y))),[V,T]=Object(n.useState)(!1),[A,D]=Object(n.useState)(C);Object(n.useEffect)((()=>{D(C)}),[C]),Object(n.useEffect)((()=>{P(d(w,j,x,y))}),[w,j,y,x]);const L=()=>{T(!V)},$=o.a.createElement(s.EuiButton,{style:p?{width:p}:{},size:"m",color:"text",iconType:"arrowDown",iconSide:"right",onClick:L,"data-test-subj":"fieldValueSelectionBtn",fullWidth:e},l),M=(j||[]).length+(x||[]).length,N=o.a.createElement(s.EuiFilterButton,{"aria-label":c.i18n.translate("xpack.observability.filterButton.label",{defaultMessage:"expands filter group for {label} filter",values:{label:l}}),hasActiveFilters:M>0,iconType:"arrowDown",numActiveFilters:M,numFilters:B.length,onClick:L},l),I=()=>{const e=(null!=B?B:[]).filter((e=>"on"===(null==e?void 0:e.checked))).map((({label:e})=>e)),l=(null!=B?B:[]).filter((e=>"off"===(null==e?void 0:e.checked))).map((({label:e})=>e)),t=(null!=j?j:[]).length>0||(null!=x?x:[]).length>0;return Object(u.isEqual)(null!=j?j:[],e)&&Object(u.isEqual)(null!=x?x:[],l)&&!(A!==C&&t)};return o.a.createElement(b,null,o.a.createElement(s.EuiPopover,{id:"popover",panelPaddingSize:"none",button:r||(S?N:$),isOpen:V||g,closePopover:()=>{T(!1),null==m||m(!1)},anchorPosition:E,style:{width:"100%"}},o.a.createElement(s.EuiSelectable,{searchable:!0,singleSelection:v,searchProps:{placeholder:c.i18n.translate("xpack.observability.fieldValueSelection.placeholder",{defaultMessage:"Filter {label}",values:{label:l}}),compressed:O,onInput:e=>{i(e.target.value)},"data-test-subj":"suggestionInputField"},listProps:{onFocusBadge:!1},options:B,onChange:e=>{P(e)},allowExclusions:k,isLoading:t&&!a&&0===B.length},((e,i)=>o.a.createElement("div",{style:{width:240}},o.a.createElement(s.EuiPopoverTitle,{paddingSize:"s"},i),e,t&&a&&o.a.createElement(s.EuiText,{className:"eui-textCenter",color:"subdued"},c.i18n.translate("xpack.observability.fieldValueSelection.loading",{defaultMessage:"Loading"})," ",o.a.createElement(s.EuiLoadingSpinner,{size:"m"})),o.a.createElement(s.EuiPopoverFooter,{paddingSize:"s"},F&&o.a.createElement(o.a.Fragment,null,o.a.createElement(s.EuiSpacer,{size:"xs"}),o.a.createElement(h,null,o.a.createElement(f,{label:c.i18n.translate("xpack.observability.fieldValueSelection.logicalAnd",{defaultMessage:"Use logical AND"}),"data-test-subj":"tagsLogicalOperatorSwitch",checked:Boolean(A),compressed:!0,onChange:e=>{D(e.target.checked)},$_css:z.size.s,$_css2:z.colors.subduedText})),o.a.createElement(s.EuiSpacer,{size:"m"})),o.a.createElement(s.EuiButton,{"aria-label":c.i18n.translate("xpack.observability.fieldValueSelection.apply.label",{defaultMessage:"Apply the selected filters for {label}",values:{label:l}}),fill:!0,fullWidth:!0,size:"s",isDisabled:I(),onClick:()=>{const e=B.filter((e=>"on"===(null==e?void 0:e.checked))),l=B.filter((e=>"off"===(null==e?void 0:e.checked)));F?_(Object(u.map)(e,"label"),Object(u.map)(l,"label"),A):_(Object(u.map)(e,"label"),Object(u.map)(l,"label")),T(!1),null==m||m(!1)}},c.i18n.translate("xpack.observability.fieldValueSelection.apply",{defaultMessage:"Apply"}))))))))}l.default=p;const b=i.a.div.withConfig({displayName:"Wrapper",componentId:"sc-o6ohvj-0"})(["&&&{div.euiPopover__anchor{width:100%;.euiButton{width:100%;}}}"]);var h=i()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-o6ohvj-1"})({display:"flex",justifyContent:"flex-end"}),f=i()(s.EuiSwitch).withConfig({displayName:"_StyledEuiSwitch",componentId:"sc-o6ohvj-2"})((e=>({flexDirection:"row-reverse",gap:e.$_css,color:e.$_css2})))}}]);