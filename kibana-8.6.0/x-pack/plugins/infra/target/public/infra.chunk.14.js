/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.infra_bundle_jsonpfunction=window.infra_bundle_jsonpfunction||[]).push([[14],{204:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(12),i=a(1),l=a(2),n=a.n(l);const o=({options:e,onChange:t,fields:a,errorOptions:o})=>{const s=Object(l.useCallback)((e=>{const a=e.map((e=>e.label));t(a)}),[t]),c=Array.isArray(e.groupBy)?e.groupBy.map((e=>({label:e,color:null!=o&&o.includes(e)?"danger":void 0}))):e.groupBy?[{label:e.groupBy,color:null!=o&&o.includes(e.groupBy)?"danger":void 0}]:[];return n.a.createElement(r.EuiComboBox,{"data-test-subj":"metricsExplorer-groupBy",placeholder:i.i18n.translate("xpack.infra.metricsExplorer.groupByLabel",{defaultMessage:"Everything"}),"aria-label":i.i18n.translate("xpack.infra.metricsExplorer.groupByAriaLabel",{defaultMessage:"Graph per"}),fullWidth:!0,singleSelection:!1,selectedOptions:c,options:a.filter((e=>e.aggregatable&&"string"===e.type)).map((e=>({label:e.name}))),onChange:s,isClearable:!0})}},205:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var r=a(10),i=a.n(r),l=a(2),n=a(25),o=a(9),s=a(94),c=a(113),u=a(21),d=a(71);function m(e,t,a,r,m,p,g=!0){var f;const b=null===(f=Object(o.useKibana)().services.http)||void 0===f?void 0:f.fetch,[h,E]=Object(l.useState)(null),[y,v]=Object(l.useState)(!0),[x,O]=Object(l.useState)(null),[T,k]=Object(l.useState)(null),[j,C]=Object(l.useState)(null),F=i.a.parse(r.from),M=i.a.parse(r.to,{roundUp:!0}),[,w]=Object(d.c)({cancelPreviousOn:"creation",createPromise:()=>(v(!0),F&&M?b?t?b?b("/api/infra/metrics_explorer",{method:"POST",body:JSON.stringify({forceInterval:e.forceInterval,dropLastBucket:null==e.dropLastBucket||e.dropLastBucket,metrics:"count"===e.aggregation?[{aggregation:"count"}]:e.metrics.map((e=>({aggregation:e.aggregation,field:e.field}))),groupBy:e.groupBy,afterKey:m,limit:e.limit,indexPattern:t.metricAlias,filterQuery:e.filterQuery&&Object(c.a)(e.filterQuery,a)||void 0,timerange:{...r,from:F.valueOf(),to:M.valueOf()}})}):Promise.reject(new Error("HTTP service is unavailable")):Promise.reject(new Error("Source is unavailable")):Promise.reject(new Error("HTTP service is unavailable")):Promise.reject(new Error("Unalble to parse timerange"))),onResolve:t=>{v(!1);const a=Object(u.b)(s.e)(t);if(a){if(x&&T&&x.pageInfo.afterKey!==a.pageInfo.afterKey&&(i=T,l=e,Object(n.isEqual)(i,l))&&Object(n.isEqual)(r,j)&&m){const{series:e}=x;O({...a,series:[...e,...a.series]})}else O(a);k(e),C(r),E(null)}var i,l},onReject:e=>{E(e),v(!1)}},[t,r,e,p,m]);return Object(l.useEffect)((()=>{g&&w()}),[w,g]),{error:h,loading:y,data:x,loadData:w}}},481:function(e,t,a){"use strict";a.r(t),a.d(t,"defaultExpression",(function(){return P})),a.d(t,"Expressions",(function(){return N}));var r=a(2),i=a.n(r),l=a(12),n=a(1),o=a(19),s=a(25),c=a(61),u=a(7),d=a(129),m=a(13),p=a(204),g=a(157),f=a(113),b=a(52),h=a(82),E=a(125),y=a(84),v=a(124),x=a(123),O=a(205),T=a(156),k=a(158),j=a(273);const C=({expression:e,derivedIndexPattern:t,source:a,filterQuery:n,groupBy:c})=>{var u,d;const{loading:p,data:g}=((e,t,a,i,l)=>{const{timeSize:n,timeUnit:o}=e||{timeSize:1,timeUnit:"m"},s=Object(r.useMemo)((()=>({limit:1,forceInterval:!0,dropLastBucket:!1,groupBy:l,filterQuery:i,metrics:[{field:e.metric,aggregation:e.aggType}],aggregation:e.aggType||"avg"})),[e.aggType,e.metric,i,l]),c=Object(r.useMemo)((()=>({interval:`>=${n||1}${o}`,from:`now-${20*(n||1)}${o}`,to:"now"})),[n,o]);return Object(O.a)(s,null==a?void 0:a.configuration,t,c,null,null)})(e,t,a,n,c),{uiSettings:f}=Object(m.b)().services,C={field:e.metric,aggregation:e.aggType,color:h.a.color0},F=(null==f?void 0:f.get("theme:darkMode"))||!1,M=Object(r.useMemo)((()=>{var e,t;const a=Object(s.first)(null==g?void 0:g.series),r=null===(e=Object(s.first)(null==a?void 0:a.rows))||void 0===e?void 0:e.timestamp,i=null===(t=Object(s.last)(null==a?void 0:a.rows))||void 0===t?void 0:t.timestamp;return null==r||null==i?e=>`${e}`:Object(b.niceTimeFormatter)([r,i])}),[null==g?void 0:g.series]),w=Object(r.useCallback)(Object(v.a)(C),[e]);if(p||!g)return i.a.createElement(k.c,null);const S=e.threshold.slice().sort(),A=null!==(u=null===(d=e.warningThreshold)||void 0===d?void 0:d.slice().sort())&&void 0!==u?u:[],B=[...S,...A].sort(),z=Object(s.first)(g.series);if(!z||!z.rows||0===z.rows.length)return i.a.createElement(k.e,null);const I={...z,rows:z.rows.map((e=>{const t={...e};return B.forEach(((e,a)=>{t[Object(T.a)(C,`threshold_${a}`)]=e})),t}))},L=Object(s.first)(z.rows).timestamp,R=Object(s.last)(z.rows).timestamp,P=Object(x.a)(I,[C],!1),N={max:1.1*Math.max(P.max,Object(s.last)(B)||P.max),min:.9*Math.min(P.min,Object(s.first)(B)||P.min)};N.min===Object(s.first)(e.threshold)&&(N.min=.9*N.min);const{timeSize:D,timeUnit:G}=e,Q=k.f[G];return i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,null,i.a.createElement(b.Chart,null,i.a.createElement(E.a,{type:y.b.bar,metric:C,id:"0",series:I,stack:!1}),i.a.createElement(j.a,{comparator:e.comparator,threshold:e.threshold,sortedThresholds:S,color:h.a.color1,id:"critical",firstTimestamp:L,lastTimestamp:R,domain:N}),e.warningComparator&&e.warningThreshold&&i.a.createElement(j.a,{comparator:e.warningComparator,threshold:e.warningThreshold,sortedThresholds:A,color:h.a.color5,id:"warning",firstTimestamp:L,lastTimestamp:R,domain:N}),i.a.createElement(b.Axis,{id:"timestamp",position:b.Position.Bottom,showOverlappingTicks:!0,tickFormat:M}),i.a.createElement(b.Axis,{id:"values",position:b.Position.Left,tickFormat:w,domain:N}),i.a.createElement(b.Settings,{tooltip:k.i,theme:Object(k.g)(F)}))),i.a.createElement("div",{style:{textAlign:"center"}},"ALL"!==I.id?i.a.createElement(l.EuiText,{size:"xs",color:"subdued"},i.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alerts.dataTimeRangeLabelWithGrouping",defaultMessage:"Last {lookback} {timeLabel} of data for {id}",values:{id:I.id,timeLabel:Q,lookback:20*D}})):i.a.createElement(l.EuiText,{size:"xs",color:"subdued"},i.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alerts.dataTimeRangeLabel",defaultMessage:"Last {lookback} {timeLabel}",values:{timeLabel:Q,lookback:20*D}}))))};var F=a(20);const M=(e,t)=>{const a=t?new RegExp(/0?\./):".",r=String(e).replace(a,"").length;return parseFloat((t?100*e:e/100).toPrecision(r))};let w;!function(e){e.COUNT="count",e.AVERAGE="avg",e.SUM="sum",e.MIN="min",e.MAX="max",e.RATE="rate",e.CARDINALITY="cardinality",e.P95="p95",e.P99="p99"}(w||(w={}));const S={...c.builtInComparators,[u.b.OUTSIDE_RANGE]:{text:n.i18n.translate("xpack.infra.metrics.alertFlyout.outsideRangeLabel",{defaultMessage:"Is not between"}),value:u.b.OUTSIDE_RANGE,requiredValues:2}},A=Object(F.euiStyled)(l.EuiFlexGroup)`
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  margin: 0 -4px;
`,B=F.euiStyled.div`
  padding: 0 4px;
`,z=Object(F.euiStyled)(l.EuiHealth)`
  margin-left: 4px;
`,I=e=>{var t,a;const[d,m]=Object(r.useState)(!0),p=Object(r.useCallback)((()=>m(!d)),[d]),{children:g,setRuleParams:f,expression:b,errors:h,expressionId:E,remove:y,fields:v,canDelete:x}=e,{aggType:O=w.MAX,metric:T,comparator:k=u.b.GT,threshold:j=[],warningThreshold:C=[],warningComparator:F}=b,[S,I]=Object(r.useState)(Boolean(null==C?void 0:C.length)),P=Object(r.useMemo)((()=>Boolean(T&&T.endsWith(".pct"))),[T]),N=Object(r.useCallback)((e=>{f(E,{...b,aggType:e,metric:"count"===e?void 0:b.metric})}),[E,b,f]),D=Object(r.useCallback)((e=>{f(E,{...b,metric:e})}),[E,b,f]),G=Object(r.useCallback)((e=>{f(E,{...b,comparator:e})}),[E,b,f]),Q=Object(r.useCallback)((e=>{f(E,{...b,warningComparator:e})}),[E,b,f]),U=Object(r.useCallback)((e=>P?e.map((e=>(e=>M(e,!1))(e))):e),[P]),q=Object(r.useCallback)((e=>{const t=U(e);t.join()!==b.threshold.join()&&f(E,{...b,threshold:t})}),[E,b,U,f]),W=Object(r.useCallback)((e=>{var t;const a=U(e);a.join()!==(null===(t=b.warningThreshold)||void 0===t?void 0:t.join())&&f(E,{...b,warningThreshold:a})}),[E,b,U,f]),$=Object(r.useCallback)((()=>{S?(I(!1),f(E,Object(s.omit)(b,"warningComparator","warningThreshold"))):(I(!0),f(E,{...b,warningComparator:k,warningThreshold:[]}))}),[S,I,f,k,b,E]),_=i.a.createElement(L,{comparator:k,threshold:j,updateComparator:G,updateThreshold:q,errors:null!==(t=h.critical)&&void 0!==t?t:{},isMetricPct:P}),H=S&&i.a.createElement(L,{comparator:F||k,threshold:C,updateComparator:Q,updateThreshold:W,errors:null!==(a=h.warning)&&void 0!==a?a:{},isMetricPct:P});return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(l.EuiFlexItem,{grow:!1},i.a.createElement(l.EuiButtonIcon,{iconType:d?"arrowDown":"arrowRight",onClick:p,"aria-label":n.i18n.translate("xpack.infra.metrics.alertFlyout.expandRowLabel",{defaultMessage:"Expand row."})})),i.a.createElement(l.EuiFlexItem,{grow:!0},i.a.createElement(A,null,i.a.createElement(B,null,i.a.createElement(c.WhenExpression,{customAggTypesOptions:R,aggType:O,onChangeSelectedAggType:N})),"count"!==O&&i.a.createElement(B,null,i.a.createElement(c.OfExpression,{customAggTypesOptions:R,aggField:T,fields:v.map((e=>({normalizedType:e.type,name:e.name}))),aggType:O,errors:h,onChangeSelectedAggField:D,helpText:i.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.ofExpression.helpTextDetail",defaultMessage:"Can't find a metric? {documentationLink}.",values:{documentationLink:i.a.createElement(l.EuiLink,{href:"https://www.elastic.co/guide/en/observability/current/configure-settings.html",target:"BLANK"},i.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.ofExpression.popoverLinkLabel",defaultMessage:"Learn how to add more data"}))}}),"data-test-subj":"ofExpression"})),!S&&_),S&&i.a.createElement(i.a.Fragment,null,i.a.createElement(A,null,_,i.a.createElement(z,{color:"danger"},i.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.criticalThreshold",defaultMessage:"Alert"}))),i.a.createElement(A,null,H,i.a.createElement(z,{color:"warning"},i.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.warningThreshold",defaultMessage:"Warning"})),i.a.createElement(l.EuiButtonIcon,{"aria-label":n.i18n.translate("xpack.infra.metrics.alertFlyout.removeWarningThreshold",{defaultMessage:"Remove warningThreshold"}),iconSize:"s",color:"text",iconType:"crossInACircleFilled",onClick:$}))),!S&&i.a.createElement(i.a.Fragment,null," ",i.a.createElement(l.EuiSpacer,{size:"xs"}),i.a.createElement(A,null,i.a.createElement(l.EuiButtonEmpty,{color:"primary",flush:"left",size:"xs",iconType:"plusInCircleFilled",onClick:$},i.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.addWarningThreshold",defaultMessage:"Add warning threshold"}))))),x&&i.a.createElement(l.EuiFlexItem,{grow:!1},i.a.createElement(l.EuiButtonIcon,{"aria-label":n.i18n.translate("xpack.infra.metrics.alertFlyout.removeCondition",{defaultMessage:"Remove condition"}),color:"danger",iconType:"trash",onClick:()=>y(E)}))),d?i.a.createElement("div",{style:{padding:"0 0 0 28px"}},g):null,i.a.createElement(l.EuiSpacer,{size:"s"}))},L=({updateComparator:e,updateThreshold:t,threshold:a,isMetricPct:n,comparator:o,errors:s})=>{const d=Object(r.useMemo)((()=>n?a.map((e=>(e=>M(e,!0))(e))):a),[a,n]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(B,null,i.a.createElement(c.ThresholdExpression,{thresholdComparator:o||u.b.GT,threshold:d,customComparators:S,onChangeSelectedThresholdComparator:e,onChangeSelectedThreshold:t,errors:s})),n&&i.a.createElement("div",{style:{alignSelf:"center"}},i.a.createElement(l.EuiText,{size:"s"},"%")))},R={avg:{text:n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.avg",{defaultMessage:"Average"}),fieldRequired:!0,validNormalizedTypes:["number","histogram"],value:w.AVERAGE},max:{text:n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.max",{defaultMessage:"Max"}),fieldRequired:!0,validNormalizedTypes:["number","date","histogram"],value:w.MAX},min:{text:n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.min",{defaultMessage:"Min"}),fieldRequired:!0,validNormalizedTypes:["number","date","histogram"],value:w.MIN},cardinality:{text:n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.cardinality",{defaultMessage:"Cardinality"}),fieldRequired:!1,value:w.CARDINALITY,validNormalizedTypes:["number"]},rate:{text:n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.rate",{defaultMessage:"Rate"}),fieldRequired:!1,value:w.RATE,validNormalizedTypes:["number"]},count:{text:n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.count",{defaultMessage:"Document count"}),fieldRequired:!1,value:w.COUNT,validNormalizedTypes:["number"]},sum:{text:n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.sum",{defaultMessage:"Sum"}),fieldRequired:!1,value:w.SUM,validNormalizedTypes:["number","histogram"]},p95:{text:n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.p95",{defaultMessage:"95th Percentile"}),fieldRequired:!1,value:w.P95,validNormalizedTypes:["number","histogram"]},p99:{text:n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.p99",{defaultMessage:"99th Percentile"}),fieldRequired:!1,value:w.P99,validNormalizedTypes:["number","histogram"]}},P={aggType:u.a.AVERAGE,comparator:u.b.GT,threshold:[],timeSize:1,timeUnit:"m"},N=e=>{const{setRuleParams:t,ruleParams:a,errors:b,metadata:h}=e,{http:E,notifications:y,docLinks:v}=Object(m.b)().services,{source:x,createDerivedIndexPattern:O}=Object(d.a)({sourceId:"default",fetch:E.fetch,toastWarning:y.toasts.addWarning}),[T,k]=Object(r.useState)(1),[j,F]=Object(r.useState)("m"),M=Object(r.useMemo)((()=>O()),[O]),w=Object(r.useMemo)((()=>{var e;return null!=h&&null!==(e=h.currentOptions)&&void 0!==e&&e.metrics?h.currentOptions:{metrics:[],aggregation:"avg"}}),[h]),S=Object(r.useCallback)(((e,r)=>{const i=a.criteria?a.criteria.slice():[];i[e]=r,t("criteria",i)}),[t,a.criteria]),A=Object(r.useCallback)((()=>{var e;const r=(null===(e=a.criteria)||void 0===e?void 0:e.slice())||[];r.push({...P,timeSize:null!=T?T:P.timeSize,timeUnit:null!=j?j:P.timeUnit}),t("criteria",r)}),[t,a.criteria,T,j]),B=Object(r.useCallback)((e=>{var r;const i=(null===(r=a.criteria)||void 0===r?void 0:r.slice())||[];i.length>1&&(i.splice(e,1),t("criteria",i))}),[t,a.criteria]),z=Object(r.useCallback)((e=>{t("filterQueryText",e);try{t("filterQuery",Object(f.a)(e,M,!1)||"")}catch(e){t("filterQuery",u.f)}}),[t,M]),L=Object(r.useCallback)(Object(s.debounce)(z,500),[z]),R=Object(r.useCallback)((e=>{t("groupBy",e&&e.length?e:"")}),[t]),N=Object(r.useMemo)((()=>({aggField:[],timeSizeUnit:[],timeWindowSize:[]})),[]),G=Object(r.useCallback)((e=>{var r;const i=(null===(r=a.criteria)||void 0===r?void 0:r.map((t=>({...t,timeSize:e}))))||[];k(e||void 0),t("criteria",i)}),[a.criteria,t]),Q=Object(r.useCallback)((e=>{var r;const i=(null===(r=a.criteria)||void 0===r?void 0:r.map((t=>({...t,timeUnit:e}))))||[];F(e),t("criteria",i)}),[a.criteria,t]),U=Object(r.useCallback)((()=>{var e,a;const r=h;null!=r&&null!==(e=r.currentOptions)&&void 0!==e&&null!==(a=e.metrics)&&void 0!==a&&a.length?t("criteria",r.currentOptions.metrics.map((e=>({metric:e.field,comparator:u.b.GT,threshold:[],timeSize:T,timeUnit:j,aggType:e.aggregation})))):t("criteria",[P])}),[h,t,T,j]),q=Object(r.useCallback)((()=>{var e,a;const r=h;if(r&&null!==(e=r.currentOptions)&&void 0!==e&&e.filterQuery)t("filterQueryText",r.currentOptions.filterQuery),t("filterQuery",Object(f.a)(r.currentOptions.filterQuery,M)||"");else if(r&&null!==(a=r.currentOptions)&&void 0!==a&&a.groupBy&&r.series){const{groupBy:e}=r.currentOptions,a=Array.isArray(e)?e.map(((e,t)=>{var a,i;return`${e}: "${null===(a=r.series)||void 0===a||null===(i=a.keys)||void 0===i?void 0:i[t]}"`})).join(" and "):`${e}: "${r.series.id}"`;t("filterQueryText",a),t("filterQuery",Object(f.a)(a,M)||"")}}),[h,M,t]),W=Object(r.useCallback)((()=>{var e;const a=h;a&&null!==(e=a.currentOptions)&&void 0!==e&&e.groupBy&&!a.series&&t("groupBy",a.currentOptions.groupBy)}),[h,t]);Object(r.useEffect)((()=>{a.criteria&&a.criteria.length?(k(a.criteria[0].timeSize),F(a.criteria[0].timeUnit)):U(),a.filterQuery||q(),a.groupBy||W(),a.sourceId||t("sourceId",(null==x?void 0:x.id)||"default"),void 0===a.alertOnNoData&&t("alertOnNoData",!0),void 0===a.alertOnGroupDisappear&&t("alertOnGroupDisappear",!0)}),[h,x]);const $=Object(r.useCallback)((e=>z(e.target.value)),[z]),_=Object(r.useMemo)((()=>a.groupBy&&a.groupBy.length>0),[a.groupBy]),H=Object(r.useMemo)((()=>{var e;return null===(e=a.criteria)||void 0===e?void 0:e.every((e=>e.aggType===u.a.COUNT))}),[a.criteria]),K=Object(r.useMemo)((()=>a.groupBy?(Array.isArray(a.groupBy)?a.groupBy:[a.groupBy]).map((e=>({groupName:e,pattern:new RegExp(`{"match(_phrase)?":{"${e}":"(.*?)"}}`)}))):null),[a.groupBy]),V=Object(r.useMemo)((()=>{const{filterQuery:e}=a;return"string"==typeof e&&K?K.map((({groupName:t,pattern:a})=>{if(a.test(e))return t})).filter((e=>"string"==typeof e)):[]}),[a,K]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.EuiSpacer,{size:"m"}),i.a.createElement(l.EuiText,{size:"xs"},i.a.createElement("h4",null,i.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.conditions",defaultMessage:"Conditions"}))),i.a.createElement(l.EuiSpacer,{size:"xs"}),a.criteria&&a.criteria.map(((e,t)=>i.a.createElement(I,{canDelete:a.criteria&&a.criteria.length>1||!1,fields:M.fields,remove:B,addExpression:A,key:t,expressionId:t,setRuleParams:S,errors:b[t]||N,expression:e||{}},i.a.createElement(C,{expression:e,derivedIndexPattern:M,source:x,filterQuery:a.filterQueryText,groupBy:a.groupBy})))),i.a.createElement("div",{style:{marginLeft:28}},i.a.createElement(c.ForLastExpression,{timeWindowSize:T,timeWindowUnit:j,errors:N,onChangeWindowSize:G,onChangeWindowUnit:Q})),i.a.createElement(l.EuiSpacer,{size:"m"}),i.a.createElement("div",null,i.a.createElement(l.EuiButtonEmpty,{color:"primary",iconSide:"left",flush:"left",iconType:"plusInCircleFilled",onClick:A},i.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.addCondition",defaultMessage:"Add condition"}))),i.a.createElement(l.EuiSpacer,{size:"m"}),i.a.createElement(l.EuiAccordion,{id:"advanced-options-accordion",buttonContent:n.i18n.translate("xpack.infra.metrics.alertFlyout.advancedOptions",{defaultMessage:"Advanced options"})},i.a.createElement(l.EuiPanel,{color:"subdued"},i.a.createElement(l.EuiCheckbox,{disabled:H,id:"metrics-alert-no-data-toggle",label:i.a.createElement(i.a.Fragment,null,n.i18n.translate("xpack.infra.metrics.alertFlyout.alertOnNoData",{defaultMessage:"Alert me if there's no data"})," ",i.a.createElement(l.EuiToolTip,{content:(H?`${D} `:"")+n.i18n.translate("xpack.infra.metrics.alertFlyout.noDataHelpText",{defaultMessage:"Enable this to trigger the action if the metric(s) do not report any data over the expected time period, or if the alert fails to query Elasticsearch"})},i.a.createElement(l.EuiIcon,{type:"questionInCircle",color:"subdued"}))),checked:a.alertOnNoData,onChange:e=>t("alertOnNoData",e.target.checked)}))),i.a.createElement(l.EuiSpacer,{size:"m"}),i.a.createElement(l.EuiFormRow,{label:n.i18n.translate("xpack.infra.metrics.alertFlyout.filterLabel",{defaultMessage:"Filter (optional)"}),helpText:n.i18n.translate("xpack.infra.metrics.alertFlyout.filterHelpText",{defaultMessage:"Use a KQL expression to limit the scope of your alert trigger."}),fullWidth:!0,display:"rowCompressed"},h&&i.a.createElement(g.a,{derivedIndexPattern:M,onChange:L,onSubmit:z,value:a.filterQueryText})||i.a.createElement(l.EuiFieldSearch,{onChange:$,value:a.filterQueryText,fullWidth:!0})),i.a.createElement(l.EuiSpacer,{size:"m"}),i.a.createElement(l.EuiFormRow,{label:n.i18n.translate("xpack.infra.metrics.alertFlyout.createAlertPerText",{defaultMessage:"Group alerts by (optional)"}),helpText:n.i18n.translate("xpack.infra.metrics.alertFlyout.createAlertPerHelpText",{defaultMessage:'Create an alert for every unique value. For example: "host.id" or "cloud.region".'}),fullWidth:!0,display:"rowCompressed"},i.a.createElement(p.a,{onChange:R,fields:M.fields,options:{...w,groupBy:a.groupBy||void 0},errorOptions:V})),V.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l.EuiSpacer,{size:"s"}),i.a.createElement(l.EuiText,{size:"xs",color:"danger"},i.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.alertPerRedundantFilterError",defaultMessage:"This rule may alert on {matchedGroups} less than expected, because the filter query contains a match for {groupCount, plural, one {this field} other {these fields}}. For more information, refer to {filteringAndGroupingLink}.",values:{matchedGroups:i.a.createElement("strong",null,V.join(", ")),groupCount:V.length,filteringAndGroupingLink:i.a.createElement(l.EuiLink,{href:`${v.links.observability.metricsThreshold}#filtering-and-grouping`},n.i18n.translate("xpack.infra.metrics.alertFlyout.alertPerRedundantFilterError.docsLink",{defaultMessage:"the docs"}))}}))),i.a.createElement(l.EuiSpacer,{size:"s"}),i.a.createElement(l.EuiCheckbox,{id:"metrics-alert-group-disappear-toggle",label:i.a.createElement(i.a.Fragment,null,n.i18n.translate("xpack.infra.metrics.alertFlyout.alertOnGroupDisappear",{defaultMessage:"Alert me if a group stops reporting data"})," ",i.a.createElement(l.EuiToolTip,{content:(H?`${D} `:"")+n.i18n.translate("xpack.infra.metrics.alertFlyout.groupDisappearHelpText",{defaultMessage:"Enable this to trigger the action if a previously detected group begins to report no results. This is not recommended for dynamically scaling infrastructures that may rapidly start and stop nodes automatically."})},i.a.createElement(l.EuiIcon,{type:"questionInCircle",color:"subdued"}))),disabled:H||!_,checked:Boolean(_&&a.alertOnGroupDisappear),onChange:e=>t("alertOnGroupDisappear",e.target.checked)}),i.a.createElement(l.EuiSpacer,{size:"m"}))},D=n.i18n.translate("xpack.infra.metrics.alertFlyout.docCountNoDataDisabledHelpText",{defaultMessage:"[This setting is not applicable to the Document Count aggregator.]"});t.default=N},89:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(53).__importDefault(a(117));t.default=function(e){r.default((function(){e()}))}}}]);