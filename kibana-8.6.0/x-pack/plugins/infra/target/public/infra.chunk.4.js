/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.infra_bundle_jsonpfunction=window.infra_bundle_jsonpfunction||[]).push([[4],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(9);function o(e,t){const[n,o]=Object(i.useUiSetting$)(e);return[Object(r.useMemo)((()=>n||t),[n,t]),o]}},108:function(e,t,n){"use strict";n.d(t,"a",(function(){return InfraLoadingPanel}));var r=n(12),i=n(2),o=n(20);class InfraLoadingPanel extends i.PureComponent{render(){const{height:e,text:t,width:n}=this.props;return i.createElement(s,{style:{height:e,width:n}},i.createElement(a,null,i.createElement(r.EuiPanel,null,i.createElement(r.EuiLoadingChart,{size:"m"}),i.createElement(r.EuiText,null,i.createElement("p",null,t)))))}}const s=o.euiStyled.div`
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
`,a=o.euiStyled.div`
  flex: 0 0 auto;
  align-self: center;
  text-align: center;
`},121:function(e,t,n){"use strict";n.d(t,"a",(function(){return AutoSizer}));var r=n(6),i=n.n(r),o=n(25),s=n(2),a=n.n(s),l=n(301),u=n.n(l);class AutoSizer extends a.a.PureComponent{constructor(e){super(e),i()(this,"element",null),i()(this,"resizeObserver",null),i()(this,"windowWidth",-1),i()(this,"windowHeight",-1),i()(this,"state",{boundsMeasurement:{height:void 0,width:void 0},contentMeasurement:{height:void 0,width:void 0}}),i()(this,"measure",(e=>{if(!this.element)return;const{content:t=!0,bounds:n=!1}=this.props,{boundsMeasurement:r,contentMeasurement:i}=this.state,s=n?this.element.getBoundingClientRect():null,a=s?{height:s.height,width:s.width}:r;if(this.props.detectAnyWindowResize&&a){if(a.width&&-1!==this.windowWidth&&this.windowWidth>window.innerWidth){const e=this.windowWidth-window.innerWidth;a.width=a.width-e}if(a.height&&-1!==this.windowHeight&&this.windowHeight>window.innerHeight){const e=this.windowHeight-window.innerHeight;a.height=a.height-e}}this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight;const l=t&&e&&e.contentRect&&e?{height:e.contentRect.height,width:e.contentRect.width}:i;Object(o.isEqual)(a,r)&&Object(o.isEqual)(l,i)||requestAnimationFrame((()=>{this.resizeObserver&&(this.setState({boundsMeasurement:a,contentMeasurement:l}),this.props.onResize&&this.props.onResize({bounds:a,content:l}))}))})),i()(this,"updateMeasurement",(()=>requestAnimationFrame((()=>{const{detectAnyWindowResize:e}=this.props;if(e)switch(e){case"height":this.windowHeight!==window.innerHeight&&this.measure(null);break;case"width":this.windowWidth!==window.innerWidth&&this.measure(null);break;default:this.measure(null)}})))),i()(this,"storeRef",(e=>{this.element&&this.resizeObserver&&this.resizeObserver.unobserve(this.element),e&&this.resizeObserver&&this.resizeObserver.observe(e),this.element=e})),this.props.detectAnyWindowResize&&window.addEventListener("resize",this.updateMeasurement),this.resizeObserver=new u.a((e=>{e.forEach((e=>{e.target===this.element&&this.measure(e)}))}))}componentWillUnmount(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.props.detectAnyWindowResize&&window.removeEventListener("resize",this.updateMeasurement)}render(){const{children:e}=this.props,{boundsMeasurement:t,contentMeasurement:n}=this.state;return e({bounds:t,content:n,measureRef:this.storeRef})}}},130:function(e,t,n){"use strict";n.d(t,"c",(function(){return g})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n(0),i=n(135);n(21);const o=r.type({time:r.number,tiebreaker:r.number}),s=r.type({before:r.union([o,r.literal("last")])}),a=r.type({after:r.union([o,r.literal("first")])}),l=(r.type({center:o}),r.type({constant:r.string})),u=r.type({field:r.string,value:i.a,highlights:r.array(r.string)}),c=r.union([l,u]),d=r.type({columnId:r.string,timestamp:r.number}),m=r.type({columnId:r.string,field:r.string,value:i.a,highlights:r.array(r.string)}),h=r.type({columnId:r.string,message:r.array(c)}),f=r.union([d,m,h]),g=r.union([r.type({}),r.type({"container.id":r.string}),r.type({"host.name":r.string,"log.file.path":r.string})]),p=r.type({field:r.string,value:i.a}),b=r.type({id:r.string,index:r.string,cursor:o,columns:r.array(f),context:g})},135:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var r=n(0);const i=r.union([r.null,r.boolean,r.number,r.string]),o=r.recursion("JsonValue",(()=>r.union([i,s,a]))),s=r.recursion("JsonArray",(()=>r.array(o))),a=r.recursion("JsonObject",(()=>r.record(r.string,o)))},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2);const i=e=>{const[t,n]=Object(r.useState)(e),i=Object(r.useCallback)((()=>n(!1)),[]),o=Object(r.useCallback)((()=>n(!0)),[]),s=Object(r.useCallback)((()=>n((e=>!e))),[]);return Object(r.useMemo)((()=>({hide:i,isVisible:t,show:o,toggle:s})),[i,t,o,s])}},146:function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},147:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return m}));var r=n(2),i=n.n(r),o=n(20);const s=e=>o.css`
  font-family: ${e=>e.theme.eui.euiCodeFontFamily};
  font-size: ${t=>{switch(e){case"large":return t.theme.eui.euiFontSizeM;case"medium":return t.theme.eui.euiFontSizeS;case"small":return t.theme.eui.euiFontSizeXS;default:return t.theme.eui.euiFontSize}}};
  line-height: ${e=>e.theme.eui.euiLineHeight};
`,a=o.css`
  background-color: ${e=>e.theme.eui.euiFocusBackgroundColor};
`,l=o.css`
  background-color: ${e=>e.theme.eui.euiColorHighlight};
`,u=o.css`
  overflow: visible;
  white-space: pre-wrap;
  word-break: break-all;
`,c=o.css`
  overflow: hidden;
  white-space: pre;
`,d=o.css`
  overflow: hidden;
  white-space: nowrap;
`,m=e=>{const[t,n]=Object(r.useState)({height:0,width:0}),o=Object(r.useCallback)((e=>{if(!e)return;const t=e.getBoundingClientRect();n({height:t.height,width:t.width})}),[]);return{CharacterDimensionsProbe:Object(r.useMemo)((()=>()=>i.a.createElement(h,{scale:e,ref:o},"X")),[o,e]),dimensions:t}},h=o.euiStyled.div.attrs((()=>({"aria-hidden":!0})))`
  visibility: hidden;
  position: absolute;
  height: auto;
  width: auto;
  padding: 0;
  margin: 0;

  ${e=>s(e.scale)};
`},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n.n(r),o=n(1),s=n(12),a=n(20),l=n(85);const u=o.i18n.translate("xpack.infra.logEntryItemView.logEntryActionsMenuToolTip",{defaultMessage:"View actions for line"}),c=({"aria-label":e,isOpen:t,onOpen:n,onClose:o,items:a})=>{const l=Object(r.useMemo)((()=>e=>t=>{o(),e(t)}),[o]),c=i.a.createElement(h,null,i.a.createElement(s.EuiButton,{size:"s",fill:!0,"aria-label":e||u,onClick:t?o:n,minWidth:"auto"},i.a.createElement(s.EuiIcon,{type:"boxesHorizontal"}))),f=Object(r.useMemo)((()=>a.map(((e,t)=>i.a.createElement(s.EuiContextMenuItem,{key:t,onClick:l(e.onClick),href:e.href},e.label)))),[a,l]);return i.a.createElement(d,null,i.a.createElement(m,null,i.a.createElement(s.EuiPopover,{panelPaddingSize:"none",closePopover:o,isOpen:t,button:c,ownFocus:!0},i.a.createElement(s.EuiContextMenuPanel,{items:f}))))},d=Object(a.euiStyled)(l.b)`
  overflow: hidden;
  user-select: none;
`,m=a.euiStyled.div`
  position: absolute;
`,h=a.euiStyled.div`
  transform: translate(-6px, -6px);
`},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"h",(function(){return r.c})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return scrollable_log_text_stream_view_ScrollableLogTextStreamView})),n.d(t,"b",(function(){return C.a}));var r=n(85),i=n(2),o=n.n(i),s=n(20),a=n(171),l=n(211),u=n(147);const c=({columnValue:e,highlights:[t],isActiveHighlight:n,wrapMode:r,render:i})=>Object(a.e)(e)?o.a.createElement(d,{wrapMode:r},o.a.createElement(l.a,{highlightTerms:Object(a.g)(t)?t.highlights:[],isActiveHighlight:n,value:e.value,render:i})):null,d=Object(s.euiStyled)(r.b)`
  text-overflow: ellipsis;

  ${e=>"long"===e.wrapMode?u.c:"pre-wrapped"===e.wrapMode?u.e:u.f};
`,m=Object(i.memo)((({columnValue:e,highlights:t,isActiveHighlight:n,wrapMode:r,render:s})=>{const l=Object(i.useMemo)((()=>Object(a.j)(e)?f(e.message,t,n):null),[e,t,n]),u=Object(i.useMemo)((()=>Object(a.j)(e)?g(e.message):""),[e]);return o.a.createElement(h,{wrapMode:r},s?s(u):l)})),h=Object(s.euiStyled)(r.b)`
  text-overflow: ellipsis;
  ${e=>"long"===e.wrapMode?u.c:"pre-wrapped"===e.wrapMode?u.e:u.f};
`,f=(e,t,n)=>e.map(((e,r)=>{if(Object(a.f)(e)){const[i=[]]=t.map((e=>{if(Object(a.i)(e)){const t=e.message[r];if(Object(a.h)(t))return t.highlights}return[]}));return o.a.createElement(l.a,{highlightTerms:i,isActiveHighlight:n,key:`MessageSegment-${r}`,value:e.value})}return Object(a.d)(e)?e.constant:"failed to format message"})),g=e=>e.map((e=>Object(a.d)(e)?e.constant:Object(a.f)(e)?e.value.toString():void 0)).join(" ");var p=n(30),b=n.n(p),v=n(1),y=n(25),E=n(17),w=n(230);const O=Object(i.memo)((({format:e="time",time:t,render:n})=>{const r=Object(w.a)(t,{format:e});return o.a.createElement(x,null,n?n(t):r)})),x=Object(s.euiStyled)(r.b)`
  color: ${e=>e.theme.eui.euiColorDarkShade};
  overflow: hidden;
  text-overflow: clip;
  white-space: pre;
`;var C=n(148),j=n(185);const M=v.i18n.translate("xpack.infra.logEntryItemView.logEntryActionsMenuToolTip",{defaultMessage:"View actions for line"}),S=v.i18n.translate("xpack.infra.logs.logEntryActionsDetailsButton",{defaultMessage:"View details"}),R=v.i18n.translate("xpack.infra.lobs.logEntryActionsViewInContextButton",{defaultMessage:"View in context"}),k=Object(i.memo)((({boundingBoxRef:e,columnConfigurations:t,columnWidths:n,highlights:s,isActiveHighlight:l,isHighlighted:u,logEntry:d,openFlyoutWithItem:h,openViewLogInContext:f,scale:g,wrap:p})=>{const v=Object(E.useUiTracker)({app:"infra_logs"}),[w,x]=Object(i.useState)(!1),[k,T]=Object(i.useState)(!1),F=Object(i.useCallback)((()=>T(!0)),[]),L=Object(i.useCallback)((()=>T(!1)),[]),A=Object(i.useCallback)((()=>x(!0)),[]),I=Object(i.useCallback)((()=>x(!1)),[]),q=Object(i.useCallback)((()=>null==h?void 0:h(d.id)),[h,d.id]),P=Object(i.useCallback)((()=>{null==f||f(d),v({metric:"view_in_context__stream"})}),[f,d,v]),B=Object(i.useMemo)((()=>!Object(y.isEmpty)(d.context)),[d]),$=void 0!==h,z=B&&void 0!==f,D=$||z,V=Object(i.useMemo)((()=>{const e=[];return $&&e.push({label:S,onClick:q}),z&&e.push({label:R,onClick:P}),e}),[$,z,q,P]),W=Object(i.useMemo)((()=>d.columns.reduce(((e,t)=>({...e,[t.columnId]:t})),{})),[d.columns]),H=Object(i.useMemo)((()=>s.reduce(((e,t)=>t.columns.reduce(((e,t)=>({...e,[t.columnId]:[...e[t.columnId]||[],t]})),e)),{})),[s]);return o.a.createElement(_,{"data-test-subj":"streamEntry logTextStreamEntry",ref:e,onMouseEnter:A,onMouseLeave:I,isHighlighted:u,scale:g},t.map((e=>{if(Object(j.d)(e)){const t=W[e.timestampColumn.id],i=n[e.timestampColumn.id];return o.a.createElement(r.a,b()({"data-test-subj":"logColumn timestampLogColumn",key:e.timestampColumn.id},i),Object(a.k)(t)?o.a.createElement(O,{time:t.timestamp,render:e.timestampColumn.render}):null)}if(Object(j.c)(e)){const t=W[e.messageColumn.id],i=n[e.messageColumn.id];return o.a.createElement(r.a,b()({"data-test-subj":"logColumn messageLogColumn",key:e.messageColumn.id},i),t?o.a.createElement(m,{columnValue:t,highlights:H[t.columnId]||[],isActiveHighlight:l,wrapMode:p?"long":"pre-wrapped",render:e.messageColumn.render}):null)}if(Object(j.b)(e)){const t=W[e.fieldColumn.id],i=n[e.fieldColumn.id];return o.a.createElement(r.a,b()({"data-test-subj":`logColumn fieldLogColumn fieldLogColumn:${e.fieldColumn.field}`,key:e.fieldColumn.id},i),t?o.a.createElement(c,{columnValue:t,highlights:H[t.columnId]||[],isActiveHighlight:l,wrapMode:p?"long":"pre-wrapped",render:e.fieldColumn.render}):null)}})),D?o.a.createElement(r.a,b()({key:"logColumn iconLogColumn iconLogColumn:details"},n[r.c]),w||k?o.a.createElement(C.a,{"aria-label":M,isOpen:k,onOpen:F,onClose:L,items:V}):null):null)})),_=s.euiStyled.div.attrs((()=>({role:"row"})))`
  align-items: stretch;
  color: ${e=>e.theme.eui.euiTextColor};
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  overflow: hidden;

  ${e=>Object(u.d)(e.scale)};
  ${e=>e.isHighlighted?u.a:""}

  &:hover {
    ${u.b}
  }
`;var T=n(6),F=n.n(T),L=n(19),A=n(49),I=n.n(A),q=n(121),P=n(96),B=n(108),$=n(116),z=n(169);function D(e){if("logEntry"===e.kind)return`${e.logEntry.cursor.time}:${e.logEntry.cursor.tiebreaker}:${e.logEntry.id}`}function V(e){const t=e.split(":");return{gid:t.slice(2).join(":"),tiebreaker:parseInt(t[1],10),time:parseInt(t[0],10)}}const W=Object($.bisector)(Object(z.a)((function(e){if("logEntry"===e.kind)return e.logEntry.cursor})));var H=n(235),N=n(12);const U=({children:e})=>o.a.createElement(N.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},o.a.createElement(N.EuiFlexItem,{grow:!1},e),o.a.createElement(N.EuiFlexItem,null,o.a.createElement(N.EuiHorizontalRule,null)));var J=n(27);const K={hour12:!1,month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};class loading_item_view_LogTextStreamLoadingItemView extends i.PureComponent{render(){const{position:e,timestamp:t,startDateExpression:n,endDateExpression:r,className:o,hasMore:s,isLoading:a,isStreaming:l,onExtendRange:u,onStreamStart:c}=this.props,d=!s&&!l,m=i.createElement(G,{justifyContent:"center",alignItems:"center",gutterSize:"m"},a||l?i.createElement(Y,{kind:l?"streaming":"loading"}):d?i.createElement(Z,{position:e,onStreamStart:c,onExtendRange:u,startDateExpression:n,endDateExpression:r}):null);return i.createElement(Q,{className:o,position:e},"start"===e?m:null,i.createElement(X,{timestamp:t,position:e,isStreaming:l}),"end"===e?m:null)}}const G=Object(s.euiStyled)(N.EuiFlexGroup)`
  height: 40px;
`,Q=s.euiStyled.div`
  padding-left: ${e=>e.theme.eui.euiSizeS};
  padding-top: ${e=>"start"===e.position?e.theme.eui.euiSizeL:e.theme.eui.euiSizeM};
  padding-bottom: ${e=>"end"===e.position?e.theme.eui.euiSizeL:e.theme.eui.euiSizeM};
`,X=({timestamp:e,position:t,isStreaming:n})=>{const r=n&&"end"===t?i.createElement(L.FormattedRelative,{units:"second",value:e,updateInterval:1}):i.createElement(L.FormattedTime,b()({value:e},K)),o="start"===t?i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.showingEntriesFromTimestamp",defaultMessage:"Showing entries from {timestamp}",values:{timestamp:r}}):n?i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.lastUpdate",defaultMessage:"Last update {timestamp}",values:{timestamp:r}}):i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.showingEntriesUntilTimestamp",defaultMessage:"Showing entries until {timestamp}",values:{timestamp:r}});return i.createElement(U,null,i.createElement(N.EuiTitle,{size:"xxs"},o))},Y=({kind:e})=>i.createElement(i.Fragment,null,i.createElement(N.EuiFlexItem,{grow:!1},i.createElement(N.EuiLoadingSpinner,{size:"l"})),i.createElement(N.EuiFlexItem,{grow:!1},i.createElement(N.EuiText,{size:"s"},"streaming"===e?i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.streamingNewEntriesText",defaultMessage:"Streaming new entries"}):i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.loadingNewEntriesText",defaultMessage:"Loading new entries"})))),Z=({position:e,startDateExpression:t,endDateExpression:n,onExtendRange:r,onStreamStart:o})=>{if("now"===("start"===e?t:n)&&"end"===e)return i.createElement(N.EuiButton,{onClick:o,size:"s"},i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.streamLive",defaultMessage:"Stream live"}));const s="start"===e?"arrowUp":"arrowDown",a="start"===e?Object(J.c)(t,"before",n):Object(J.c)(n,"after",t);return a&&"diffUnit"in a?i.createElement(N.EuiButton,{onClick:()=>{"function"==typeof r&&r(a.value)},iconType:s,size:"s"},i.createElement(ee,{amount:a.diffAmount,unit:a.diffUnit})):null},ee=({amount:e,unit:t})=>{switch(t){case"ms":return i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.extendTimeframeByMillisecondsButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {millisecond} other {milliseconds}}",values:{amount:e}});case"s":return i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.extendTimeframeBySecondsButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {second} other {seconds}}",values:{amount:e}});case"m":return i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.extendTimeframeByMinutesButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {minute} other {minutes}}",values:{amount:e}});case"h":return i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.extendTimeframeByHoursButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {hour} other {hours}}",values:{amount:e}});case"d":return i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.extendTimeframeByDaysButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {day} other {days}}",values:{amount:e}});case"w":return i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.extendTimeframeByWeeksButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {week} other {weeks}}",values:{amount:e}});case"M":return i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.extendTimeframeByMonthsButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {month} other {months}}",values:{amount:e}});case"y":return i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.extendTimeframeByYearsButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {year} other {years}}",values:{amount:e}});default:throw new TypeError("Unhandled unit: "+t)}};class jump_to_tail_LogTextStreamJumpToTail extends i.PureComponent{render(){const{onClickJump:e,width:t}=this.props;return i.createElement(te,{width:t},i.createElement(ne,null,i.createElement(N.EuiText,{color:"subdued"},i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.streamingNewEntriesText",defaultMessage:"Streaming new entries"}))),i.createElement(N.EuiButtonEmpty,{size:"xs",onClick:e,iconType:"arrowDown"},i.createElement(L.FormattedMessage,{id:"xpack.infra.logs.jumpToTailText",defaultMessage:"Jump to most recent entries"})))}}const te=s.euiStyled.div`
  align-items: center;
  display: flex;
  min-height: ${e=>e.theme.eui.euiSizeXXL};
  width: ${e=>e.width}px;
  position: fixed;
  bottom: 0;
  background-color: ${e=>e.theme.eui.euiColorEmptyShade};
`,ne=s.euiStyled.div`
  padding: 8px 16px;
`;class measurable_item_view_MeasurableItemView extends i.PureComponent{constructor(...e){super(...e),F()(this,"childRef",i.createRef()),F()(this,"getOffsetRect",(()=>{const e=this.childRef.current;return null===e?null:{height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth}}))}componentDidMount(){this.props.register(this.props.registrationKey,this)}componentWillUnmount(){this.props.register(this.props.registrationKey,null)}componentDidUpdate(e){e.registrationKey!==this.props.registrationKey&&(this.props.register(e.registrationKey,null),this.props.register(this.props.registrationKey,this))}render(){return this.props.children(this.childRef)}}var re=n(236),ie=n(190);const oe=({timestamp:e})=>{const t=Object(ie.a)(e);return o.a.createElement(N.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},o.a.createElement(N.EuiFlexItem,{grow:!1},o.a.createElement(N.EuiTitle,{size:"xxs"},o.a.createElement("h2",{style:{paddingLeft:8}},t))),o.a.createElement(N.EuiFlexItem,null,o.a.createElement(N.EuiHorizontalRule,null)))};class scrollable_log_text_stream_view_ScrollableLogTextStreamView extends o.a.PureComponent{static getDerivedStateFromProps(e,t){const n=e.target&&e.target!==t.target,r=e.items.length>0,i=r&&t.isScrollLocked?t.items:e.items;return e.isStreaming&&r?{target:e.target,targetId:D(e.items[e.items.length-1]),items:i}:n&&r?{target:e.target,targetId:D((o=e.items,s=e.target,o[Math.min(W.left(o,s),o.length-1)])),items:i}:r?!r||i.length===t.items.length&&i[0]===t.items[0]?null:{...t,items:i}:{target:null,targetId:null,items:[]};var o,s}constructor(e){super(e),F()(this,"handleOpenFlyout",(e=>{var t,n;null===(t=(n=this.props).onOpenLogEntryFlyout)||void 0===t||t.call(n,e)})),F()(this,"handleOpenViewLogInContext",(e=>{const{setContextEntry:t}=this.props;t&&t(e)})),F()(this,"handleReload",(()=>{const{reloadItems:e}=this.props;e&&e()})),F()(this,"handleVisibleChildrenChange",function(e,t=y.isEqual){let n,r;return(...i)=>(t(i,n)||(n=i,r=e(...i)),r)}((({topChild:e,middleChild:t,bottomChild:n,pagesAbove:r,pagesBelow:i,fromScroll:o})=>{o&&this.props.isStreaming&&this.setState({isScrollLocked:0!==i}),this.props.reportVisibleInterval({endKey:V(n),middleKey:V(t),pagesAfterEnd:i,pagesBeforeStart:r,startKey:V(e),fromScroll:o})}))),F()(this,"handleJumpToTail",(()=>{const{items:e}=this.props,t=D(e[e.length-1]);this.setState({targetId:t,isScrollLocked:!1})})),this.state={target:null,targetId:null,items:e.items,isScrollLocked:!1}}render(){var e;const{columnConfigurations:t,currentHighlightKey:n,hasMoreAfterEnd:r,hasMoreBeforeStart:s,highlightedItem:a,isLoadingMore:l,isReloading:u,isStreaming:c,scale:d,wrap:m,startDateExpression:h,endDateExpression:f,lastLoadedTime:g,updateDateRange:p,startLiveStreaming:b,onOpenLogEntryFlyout:y,setContextEntry:E}=this.props,w=null===(e=this.props.hideScrollbar)||void 0===e||e,{targetId:O,items:x,isScrollLocked:C}=this.state,j=x.length>0,M=!!y,S=!!E;return o.a.createElement(ae,null,!u||c&&j?j?o.a.createElement(se,{columnConfigurations:t,scale:d},(({columnWidths:e,CharacterDimensionsProbe:u})=>o.a.createElement(o.a.Fragment,null,o.a.createElement(u,null),o.a.createElement(H.b,{columnConfigurations:t,columnWidths:e}),o.a.createElement(q.a,{bounds:!0,content:!0,detectAnyWindowResize:"height"},(({measureRef:u,bounds:{height:v=0},content:{width:y=0}})=>o.a.createElement(le,{ref:u},o.a.createElement(re.b,{height:v,width:y,onVisibleChildrenChange:this.handleVisibleChildrenChange,target:O,hideScrollbar:w,"data-test-subj":"logStream",isLocked:C,entriesCount:x.length},(u=>x.length>0?o.a.createElement(o.a.Fragment,null,o.a.createElement(loading_item_view_LogTextStreamLoadingItemView,{position:"start",isLoading:l,hasMore:s,timestamp:x[0].logEntry.cursor.time,isStreaming:!1,startDateExpression:h,endDateExpression:f,onExtendRange:e=>p({startDateExpression:e})}),x.map(((r,s)=>{const l=r.logEntry.cursor.time;let c=!1;if(s>0){const e=x[s-1].logEntry.cursor.time;c=!I()(l).isSame(e,"day")}return o.a.createElement(i.Fragment,{key:D(r)},c&&o.a.createElement(oe,{timestamp:l}),o.a.createElement(measurable_item_view_MeasurableItemView,{register:u,registrationKey:D(r)},(i=>o.a.createElement(k,{columnConfigurations:t,columnWidths:e,openFlyoutWithItem:M?this.handleOpenFlyout:void 0,openViewLogInContext:S?this.handleOpenViewLogInContext:void 0,boundingBoxRef:i,logEntry:r.logEntry,highlights:r.highlights,isActiveHighlight:!!n&&n.gid===r.logEntry.id,scale:d,wrap:m,isHighlighted:!!a&&r.logEntry.id===a}))))})),o.a.createElement(loading_item_view_LogTextStreamLoadingItemView,{position:"end",isLoading:c||l,hasMore:r,isStreaming:c,timestamp:c&&g?g.valueOf():x[x.length-1].logEntry.cursor.time,startDateExpression:h,endDateExpression:f,onExtendRange:e=>p({endDateExpression:e}),onStreamStart:()=>b()}),C&&o.a.createElement(jump_to_tail_LogTextStreamJumpToTail,{width:y,onClickJump:this.handleJumpToTail})):null)))))))):o.a.createElement(P.a,{titleText:v.i18n.translate("xpack.infra.logs.emptyView.noLogMessageTitle",{defaultMessage:"There are no log messages to display."}),bodyText:v.i18n.translate("xpack.infra.logs.emptyView.noLogMessageDescription",{defaultMessage:"Try adjusting your filter."}),refetchText:v.i18n.translate("xpack.infra.logs.emptyView.checkForNewDataButtonLabel",{defaultMessage:"Check for new data"}),onRefetch:this.handleReload,testString:"logsNoDataPrompt"}):o.a.createElement(B.a,{width:"100%",height:"100%",text:o.a.createElement(L.FormattedMessage,{id:"xpack.infra.logs.scrollableLogTextStreamView.loadingEntriesLabel",defaultMessage:"Loading entries"})}))}}const se=({children:e,columnConfigurations:t,scale:n})=>e(Object(r.d)({columnConfigurations:t,scale:n})),ae=s.euiStyled.div`
  overflow: hidden;
  display: flex;
  flex: 1 1 0%;
  flex-direction: column;
  align-items: stretch;
`,le=s.euiStyled.div`
  overflow: hidden;
  flex: 1 1 0%;
`},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return h}));var r=n(32);const i=({abortController:e,options:t,request:n,response$:i})=>i.pipe(Object(r.map)((r=>({abortController:e,options:t,request:n,response:r}))));var o=n(15),s=n(54);const a=(e,t)=>n=>n.pipe(Object(r.map)((e=>{var n,r;const{data:i,errors:o=[]}=t(e.rawResponse);return{data:i,errors:o,isPartial:null!==(n=e.isPartial)&&void 0!==n&&n,isRunning:null!==(r=e.isRunning)&&void 0!==r&&r,loaded:e.loaded,total:e.total}})),Object(r.startWith)({data:e,errors:[],isPartial:!0,isRunning:!0,loaded:0,total:void 0}),Object(r.catchError)((t=>{var n;return Object(o.of)({data:e,errors:[t instanceof s.AbortError?{type:"aborted"}:{type:"generic",message:`${null!==(n=t.message)&&void 0!==n?n:t}`}],isPartial:!0,isRunning:!1,loaded:0,total:void 0})})));var l=n(2),u=n(13),c=n(88);const d=({getRequest:e,parseResponses:t})=>{const{services:n}=Object(u.b)(),i=Object(c.b)((()=>new o.ReplaySubject(1)),[]),s=Object(l.useCallback)(((...o)=>{const s=e(...o);if(null==s)return;const a=new AbortController;let l=!0;const u={...s,abortController:a,response$:n.data.search.search(s.request,{abortSignal:a.signal,...s.options}).pipe(Object(r.tap)({error:()=>{l=!1},complete:()=>{l=!1}}),Object(c.a)((()=>{l&&a.abort()})),t,Object(r.share)())};return i.next(u),u}),[e,n.data.search,t,i]);return{requests$:i,search:s}},m=e=>{var t,n;const{latestValue:r}=Object(c.c)(e,void 0);return{cancelRequest:Object(l.useCallback)((()=>{null==r||r.abortController.abort()}),[r]),isRequestRunning:null!==(t=null==r?void 0:r.response.isRunning)&&void 0!==t&&t,isResponsePartial:null!==(n=null==r?void 0:r.response.isPartial)&&void 0!==n&&n,latestResponseData:null==r?void 0:r.response.data,latestResponseErrors:null==r?void 0:r.response.errors,loaded:null==r?void 0:r.response.loaded,total:null==r?void 0:r.response.total}},h=e=>{const t=Object(c.d)(e,f),{cancelRequest:n,isRequestRunning:r,isResponsePartial:i,latestResponseData:o,latestResponseErrors:s,loaded:a,total:l}=m(t);return{cancelRequest:n,isRequestRunning:r,isResponsePartial:i,latestResponseData:o,latestResponseErrors:s,loaded:a,total:l}},f=Object(r.switchMap)(i)},171:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"k",(function(){return c})),n.d(t,"j",(function(){return d})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"i",(function(){return g})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return b}));var r=n(116),i=n(169);const o=e=>e.cursor,s=e=>({...e.cursor,gid:e.id}),a=Object(r.bisector)(Object(i.a)(o)),l=a.left,u=(a.right,Object(i.b)(o)),c=e=>null!=e&&"timestamp"in e,d=e=>null!=e&&"message"in e,m=e=>null!=e&&"field"in e,h=e=>"constant"in e,f=e=>"field"in e&&"value"in e,g=e=>null!=e&&"message"in e,p=e=>null!=e&&"field"in e,b=e=>e&&"field"in e&&"highlights"in e},184:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default=function(e){var t=r.useRef();return r.useEffect((function(){t.current=e})),t.current}},185:function(e,t,n){"use strict";function r(e){return"timestampColumn"in e}function i(e){return"messageColumn"in e}function o(e){return"fieldColumn"in e}function s(e){return"number"==typeof e?`${e}px`:e}n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}))},190:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1);function i(e,t=r.i18n.getLocale()){return new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(e)}},207:function(e,t,n){"use strict";n.d(t,"b",(function(){return H})),n.d(t,"a",(function(){return N}));var r=n(12),i=n(1),o=n(19),s=n(2),a=n.n(s),l=n(9),u=n(21),c=n(0),d=n(130),m=n(229);const h=c.type({sourceId:c.string,logEntryId:c.string}),f=c.type({id:c.string,index:c.string,fields:c.array(d.e),cursor:d.d}),g=c.intersection([c.type({data:c.union([f,c.null])}),c.partial({errors:c.array(m.a)})]);var p=n(167);const b=Object(p.b)(null,Object(u.b)(g));var v=n(20);const y=Object(v.euiStyled)(r.EuiFlyoutBody)`
  & .euiFlyoutBody__overflow {
    display: flex;
    flex-direction: column;
  }

  & .euiFlyoutBody__overflowContent {
    align-items: center;
    align-self: stretch;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    justify-content: center;
    overflow: hidden;
  }
`,E=({errors:e,onRetry:t,title:n})=>{const i=e.some((e=>"aborted"!==e.type))?"danger":"warning";return a.a.createElement(r.EuiCallOut,{color:i,iconType:"alert",title:n},null==e?void 0:e.map(((e,t)=>a.a.createElement(w,{key:t,error:e}))),t?a.a.createElement(r.EuiButton,{color:i,size:"s",onClick:t},a.a.createElement(o.FormattedMessage,{id:"xpack.infra.dataSearch.loadingErrorRetryButtonLabel",defaultMessage:"Retry"})):null)},w=({error:e})=>"aborted"===e.type?a.a.createElement(O,{error:e}):"shardFailure"===e.type?a.a.createElement(C,{error:e}):a.a.createElement(x,{error:e}),O=({})=>a.a.createElement(o.FormattedMessage,{tagName:"p",id:"xpack.infra.dataSearch.abortedRequestErrorMessage",defaultMessage:"The request was aborted."}),x=({error:e})=>{var t;return a.a.createElement("p",null,null!==(t=e.message)&&void 0!==t?t:`${e}`)},C=({error:e})=>a.a.createElement(o.FormattedMessage,{tagName:"p",id:"xpack.infra.dataSearch.shardFailureErrorMessage",defaultMessage:"Index {indexName}: {errorMessage}",values:{indexName:e.shardInfo.index,errorMessage:e.message}}),j=({label:e,maxValue:t,onCancel:n,value:i})=>{const o=Object(s.useMemo)((()=>Number.isFinite(t)&&Number.isFinite(i)?`${i} / ${t}`:void 0),[i,t]);return a.a.createElement(r.EuiFlexGroup,{alignItems:"center"},a.a.createElement(r.EuiFlexItem,null,a.a.createElement(r.EuiProgress,{label:e,size:"s",max:t,value:i,valueText:o})),n?a.a.createElement(r.EuiFlexItem,{grow:!1},a.a.createElement(r.EuiButtonIcon,{color:"danger",iconType:"cross",onClick:n,title:M,"aria-label":M})):null)},M=i.i18n.translate("xpack.infra.dataSearch.cancelButtonLabel",{defaultMessage:"Cancel request"});var S=n(30),R=n.n(S),k=n(17),_=n(145);const T=["container.id","host.ip","kubernetes.pod.uid"],F=({logEntry:e})=>{const{hide:t,isVisible:n,toggle:i}=Object(_.a)(!1),l=Object(s.useMemo)((()=>A(e)),[e]),u=Object(s.useMemo)((()=>L(e)),[e]),c=Object(k.useLinkProps)({app:"uptime",...u||{}}),d=Object(k.useLinkProps)({app:"apm",...l||{}}),m=Object(s.useMemo)((()=>[a.a.createElement(r.EuiContextMenuItem,R()({"data-test-subj":"logEntryActionsMenuItem uptimeLogEntryActionsMenuItem",disabled:!u,icon:"uptimeApp",key:"uptimeLink"},c),a.a.createElement(o.FormattedMessage,{id:"xpack.infra.logEntryActionsMenu.uptimeActionLabel",defaultMessage:"View status in Uptime"})),a.a.createElement(r.EuiContextMenuItem,R()({"data-test-subj":"logEntryActionsMenuItem apmLogEntryActionsMenuItem",disabled:!l,icon:"apmApp",key:"apmLink"},d),a.a.createElement(o.FormattedMessage,{id:"xpack.infra.logEntryActionsMenu.apmActionLabel",defaultMessage:"View in APM"}))]),[u,l,d,c]),h=Object(s.useMemo)((()=>m.length>0),[m]);return a.a.createElement(r.EuiPopover,{anchorPosition:"downRight",button:a.a.createElement(r.EuiButton,{"data-test-subj":"logEntryActionsMenuButton",disabled:!h,iconSide:"right",iconType:"arrowDown",onClick:i},a.a.createElement(o.FormattedMessage,{id:"xpack.infra.logEntryActionsMenu.buttonLabel",defaultMessage:"Investigate"})),closePopover:t,id:"logEntryActionsMenu",isOpen:n,panelPaddingSize:"none"},a.a.createElement(r.EuiContextMenuPanel,{items:m}))},L=e=>{const t=e.fields.filter((({field:e,value:t})=>null!=t&&T.includes(e))).reduce(((e,t)=>{const{field:n,value:r}=t;return e.concat(r.map((e=>`${n}:${e}`)))}),[]);if(0!==t.length)return{app:"uptime",hash:"/",search:{search:`${t.join(" or ")}`}}},A=e=>{var t,n;const r=null===(t=e.fields.find((({field:e,value:t})=>"string"==typeof t[0]&&"trace.id"===e)))||void 0===t||null===(n=t.value)||void 0===n?void 0:n[0];if("string"!=typeof r)return;const i=e.fields.find((({field:e})=>"@timestamp"===e)),o=i?i.value[0]:null,{rangeFrom:s,rangeTo:a}="number"==typeof o?(()=>{const e=new Date(o),t=new Date(o);return e.setMinutes(e.getMinutes()-10),t.setMinutes(t.getMinutes()+10),{rangeFrom:e.toISOString(),rangeTo:t.toISOString()}})():{rangeFrom:"now-1y",rangeTo:"now"};return{app:"apm",pathname:Object(k.getApmTraceUrl)({traceId:r,rangeFrom:s,rangeTo:a})}};var I=n(135),q=n(211);const P=({logEntry:e,onSetFieldFilter:t})=>{const n=Object(s.useMemo)((()=>t?n=>()=>{c.array(I.c).is(n.value)&&(null==t||t({language:"kuery",query:`${W(n.field)}:${n.value.map(W).join(" OR ")}`},e.id,e.cursor))}:void 0),[e,t]),o=Object(s.useMemo)((()=>[{field:"field",name:i.i18n.translate("xpack.infra.logFlyout.fieldColumnLabel",{defaultMessage:"Field"}),sortable:!0},{actions:[{type:"icon",icon:"filter",name:D,description:V,available:()=>!!n,onClick:e=>null==n?void 0:n(e)()}]},{field:"value",name:i.i18n.translate("xpack.infra.logFlyout.valueColumnLabel",{defaultMessage:"Value"}),render:(e,t)=>a.a.createElement(q.a,{highlightTerms:B,isActiveHighlight:!1,value:t.value})}]),[n]);return a.a.createElement(r.EuiInMemoryTable,{columns:o,items:e.fields,search:z,sorting:$})},B=[],$={sort:{field:"field",direction:"asc"}},z={box:{incremental:!0,schema:!0}},D=i.i18n.translate("xpack.infra.logFlyout.filterAriaLabel",{defaultMessage:"Filter"}),V=i.i18n.translate("xpack.infra.logFlyout.setFilterTooltip",{defaultMessage:"View event with filter"}),W=e=>"string"==typeof e?`"${e.replace(/"/g,'\\"')}"`:e,H=e=>{const t=Object(s.useRef)(),{services:{http:n,data:r,uiSettings:i,application:o},overlays:{openFlyout:u}}=Object(l.useKibana)(),c=Object(s.useCallback)((()=>{var e;null===(e=t.current)||void 0===e||e.close()}),[]),d=Object(s.useCallback)((s=>{const{Provider:d}=Object(l.createKibanaReactContext)({http:n,data:r,uiSettings:i,application:o});t.current=u(a.a.createElement(d,null,a.a.createElement(N,{logEntryId:s,onCloseFlyout:c,sourceId:e})))}),[n,r,i,o,u,e,c]);return Object(s.useEffect)((()=>()=>{c()}),[c]),{openLogEntryFlyout:d,closeLogEntryFlyout:c}},N=({logEntryId:e,onCloseFlyout:t,onSetFieldFilter:n,sourceId:i})=>{var l;const{cancelRequest:u,errors:c,fetchLogEntry:d,isRequestRunning:m,loaded:f,logEntry:g,total:v}=(({sourceId:e,logEntryId:t})=>{const{search:n,requests$:r}=Object(p.c)({getRequest:Object(s.useCallback)((()=>t&&e?{request:{params:h.encode({sourceId:e,logEntryId:t})},options:{strategy:"infra-log-entry"}}:null),[e,t]),parseResponses:b}),{cancelRequest:i,isRequestRunning:o,isResponsePartial:a,latestResponseData:l,latestResponseErrors:u,loaded:c,total:d}=Object(p.e)(r);return{cancelRequest:i,errors:u,fetchLogEntry:n,isRequestRunning:o,isResponsePartial:a,loaded:c,logEntry:null!=l?l:null,total:d}})({sourceId:i,logEntryId:e});return Object(s.useEffect)((()=>{i&&e&&d()}),[d,i,e]),a.a.createElement(r.EuiFlyout,{onClose:t,size:"m"},a.a.createElement(r.EuiFlyoutHeader,{hasBorder:!0},a.a.createElement(r.EuiFlexGroup,{alignItems:"center"},a.a.createElement(r.EuiFlexItem,null,a.a.createElement(r.EuiTitle,{size:"s"},a.a.createElement("h3",{id:"flyoutTitle"},a.a.createElement(o.FormattedMessage,{defaultMessage:"Details for log entry {logEntryId}",id:"xpack.infra.logFlyout.flyoutTitle",values:{logEntryId:e?a.a.createElement("code",null,e):""}}))),g?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"s"}),a.a.createElement(r.EuiTextColor,{color:"subdued"},a.a.createElement(o.FormattedMessage,{id:"xpack.infra.logFlyout.flyoutSubTitle",defaultMessage:"From index {indexName}",values:{indexName:a.a.createElement("code",null,g.index)}}))):null),a.a.createElement(r.EuiFlexItem,{style:{padding:8},grow:!1},g?a.a.createElement(F,{logEntry:g}):null))),m?a.a.createElement(y,null,a.a.createElement("div",{style:{width:"75%"}},a.a.createElement(j,{label:U,maxValue:v,onCancel:u,value:f}))):g?a.a.createElement(r.EuiFlyoutBody,{banner:(null!==(l=null==c?void 0:c.length)&&void 0!==l?l:0)>0?a.a.createElement(E,{title:J,errors:null!=c?c:[],onRetry:d}):void 0},a.a.createElement(P,{logEntry:g,onSetFieldFilter:n})):a.a.createElement(y,null,a.a.createElement("div",{style:{width:"75%"}},a.a.createElement(E,{title:J,errors:null!=c?c:[],onRetry:d}))))},U=i.i18n.translate("xpack.infra.logFlyout.loadingMessage",{defaultMessage:"Searching log entry in shards"}),J=i.i18n.translate("xpack.infra.logFlyout.loadingErrorCalloutTitle",{defaultMessage:"Error while searching the log entry"})},209:function(e,t,n){"use strict";n.d(t,"b",(function(){return q})),n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return B}));var r=n(70),i=n.n(r),o=n(25),s=n(2),a=n(184),l=n.n(a),u=n(296),c=n.n(u),d=n(88),m=n(32),h=n(21),f=n(0),g=n(130),p=n(5),b=n(135),v=n(229);const y="infra-log-entries",E=f.intersection([f.type({sourceId:f.string,startTimestamp:f.number,endTimestamp:f.number,size:f.number}),f.partial({query:b.b,columns:f.array(p.i),highlightPhrase:f.string})]),w=f.intersection([E,g.b]),O=f.intersection([E,g.a]),x=f.union([E,w,O]),C=f.intersection([f.type({data:f.intersection([f.type({entries:f.array(g.f),topCursor:f.union([g.d,f.null]),bottomCursor:f.union([g.d,f.null])}),f.partial({hasMoreBefore:f.boolean,hasMoreAfter:f.boolean})])}),f.partial({errors:f.array(v.a)})]);var j=n(167);const M=({columnOverrides:e,endTimestamp:t,highlightPhrase:n,query:r,sourceId:i,startTimestamp:o})=>{const{search:a,requests$:l}=Object(j.c)({getRequest:Object(s.useCallback)(((s,a)=>{var l;return i?{request:{params:x.encode({after:s,columns:e,endTimestamp:null!==(l=null==a?void 0:a.extendTo)&&void 0!==l?l:t,highlightPhrase:n,query:r,size:a.size,sourceId:i,startTimestamp:o})},options:{strategy:y}}:null}),[e,t,n,r,i,o]),parseResponses:S});return{fetchLogEntriesAfter:a,logEntriesAfterSearchRequests$:l}},S=Object(j.b)(null,Object(h.b)(C)),R=Object(m.exhaustMap)(j.a);var k=n(15);const _=({columnOverrides:e,endTimestamp:t,highlightPhrase:n,query:r,sourceId:i,startTimestamp:o})=>{const{search:a,requests$:l}=Object(j.c)({getRequest:Object(s.useCallback)(((s,a)=>{var l;return i?{request:{params:x.encode({before:s,columns:e,endTimestamp:t,highlightPhrase:n,query:r,size:a.size,sourceId:i,startTimestamp:null!==(l=a.extendTo)&&void 0!==l?l:o})},options:{strategy:y}}:null}),[e,t,n,r,i,o]),parseResponses:T});return{fetchLogEntriesBefore:a,logEntriesBeforeSearchRequests$:l}},T=Object(j.b)(null,Object(h.b)(C)),F=Object(m.exhaustMap)(j.a),L={before:void 0,after:void 0,combined:void 0},A={entries:[],topCursor:null,bottomCursor:null,hasMoreBefore:!0,hasMoreAfter:!0},I=200;function q({sourceId:e,startTimestamp:t,endTimestamp:n,query:r,center:i,columns:a}){const[u,h]=c()(A),[f,g]=Object(s.useState)(!1),p=l()(t),b=l()(n),[v,y]=Object(s.useState)(r);Object(o.isEqual)(r,v)||y(r),Object(s.useEffect)((()=>{p&&p>t&&h({hasMoreBefore:!0})}),[p,t,h]),Object(s.useEffect)((()=>{b&&b<n&&h({hasMoreAfter:!0})}),[b,n,h]);const E=Object(s.useMemo)((()=>({sourceId:e,startTimestamp:t,endTimestamp:n,query:v,columnOverrides:a})),[a,n,v,e,t]),{fetchLogEntriesAround:w,isRequestRunning:O,logEntriesAroundSearchResponses$:x}=(({columnOverrides:e,endTimestamp:t,highlightPhrase:n,query:r,sourceId:i,startTimestamp:o})=>{var a,l;const{fetchLogEntriesBefore:u}=_({columnOverrides:e,endTimestamp:t,highlightPhrase:n,query:r,sourceId:i,startTimestamp:o}),{fetchLogEntriesAfter:c}=M({columnOverrides:e,endTimestamp:t,highlightPhrase:n,query:r,sourceId:i,startTimestamp:o}),h=Object(d.b)((()=>new k.ReplaySubject),[]),f=Object(s.useCallback)(((e,t)=>{const n=u(e,{size:Math.floor(t/2)});if(null==n)return;const r=Object(j.a)(n).pipe(Object(m.last)(),Object(m.map)((n=>{var r,i;const o=null!==(r=null===(i=n.response.data)||void 0===i?void 0:i.bottomCursor)&&void 0!==r?r:{time:e.time-1,tiebreaker:0},s=c(o,{size:Math.ceil(t/2)});if(null==s)throw new Error("Failed to create request: no request args given");return s})));h.next([n,r])}),[c,u,h]),g=Object(d.b)((e=>e.pipe(Object(m.switchMap)((([e])=>e.pipe(Object(m.switchMap)((([e,t])=>{const n=Object(j.a)(e),r=t.pipe(Object(m.switchMap)(j.a),Object(m.startWith)(void 0));return Object(k.combineLatest)([n,r])})),Object(m.map)((([e,t])=>{var n,r,i,o,s,a,l,u,c,d,m,h;const f=e.response.loaded,g=null==t?void 0:t.response.loaded,p=e.response.total,b=null==t?void 0:t.response.total;return{before:e,after:t,combined:{isRunning:null!==(n=e.response.isRunning||(null==t?void 0:t.response.isRunning))&&void 0!==n&&n,isPartial:null!==(r=e.response.isPartial||(null==t?void 0:t.response.isPartial))&&void 0!==r&&r,loaded:null!=f||null!=g?(null!=f?f:0)+(null!=g?g:0):void 0,total:null!=p||null!=b?(null!=p?p:0)+(null!=b?b:0):void 0,entries:[...null!==(i=null===(o=e.response.data)||void 0===o?void 0:o.entries)&&void 0!==i?i:[],...null!==(s=null==t||null===(a=t.response.data)||void 0===a?void 0:a.entries)&&void 0!==s?s:[]],errors:[...null!==(l=e.response.errors)&&void 0!==l?l:[],...null!==(u=null==t?void 0:t.response.errors)&&void 0!==u?u:[]],hasMoreBefore:null===(c=e.response.data)||void 0===c?void 0:c.hasMoreBefore,hasMoreAfter:null==t||null===(d=t.response.data)||void 0===d?void 0:d.hasMoreAfter,topCursor:null===(m=e.response.data)||void 0===m?void 0:m.topCursor,bottomCursor:null==t||null===(h=t.response.data)||void 0===h?void 0:h.bottomCursor}}}))))))),[h]),{latestValue:{before:p,after:b,combined:v}}=Object(d.c)(g,L);return{cancelRequest:Object(s.useCallback)((()=>{null==p||p.abortController.abort(),null==b||b.abortController.abort()}),[p,b]),fetchLogEntriesAround:f,isRequestRunning:null!==(a=null==v?void 0:v.isRunning)&&void 0!==a&&a,isResponsePartial:null!==(l=null==v?void 0:v.isPartial)&&void 0!==l&&l,loaded:null==v?void 0:v.loaded,logEntriesAroundSearchResponses$:g,total:null==v?void 0:v.total}})(E);Object(d.e)(x,{next:({before:e,after:t,combined:n})=>{null==e.response.data&&null==(null==t?void 0:t.response.data)||n.isPartial||(h((e=>{var t,r;const i=f?A:e;return{...f?A:i,entries:n.entries,hasMoreAfter:null!==(t=n.hasMoreAfter)&&void 0!==t?t:i.hasMoreAfter,hasMoreBefore:null!==(r=n.hasMoreAfter)&&void 0!==r?r:i.hasMoreAfter,bottomCursor:n.bottomCursor,topCursor:n.topCursor,lastLoadedTime:new Date}})),f&&g(!1))}});const{fetchLogEntriesBefore:C,isRequestRunning:S,logEntriesBeforeSearchResponse$:T}=(({columnOverrides:e,endTimestamp:t,highlightPhrase:n,query:r,sourceId:i,startTimestamp:o})=>{const{fetchLogEntriesBefore:s,logEntriesBeforeSearchRequests$:a}=_({columnOverrides:e,endTimestamp:t,highlightPhrase:n,query:r,sourceId:i,startTimestamp:o}),{cancelRequest:l,isRequestRunning:u,isResponsePartial:c,loaded:m,logEntriesBeforeSearchResponse$:h,total:f}=(e=>{const t=Object(d.d)(e,F),{cancelRequest:n,isRequestRunning:r,isResponsePartial:i,loaded:o,total:s}=Object(j.d)(t);return{cancelRequest:n,isRequestRunning:r,isResponsePartial:i,loaded:o,logEntriesBeforeSearchRequests$:e,logEntriesBeforeSearchResponse$:t,total:s}})(a);return{cancelRequest:l,fetchLogEntriesBefore:s,isRequestRunning:u,isResponsePartial:c,loaded:m,logEntriesBeforeSearchResponse$:h,total:f}})(E);Object(d.e)(T,{next:({response:{data:e,isPartial:t}})=>{null==e||t||(h((t=>{var n,r,i;const o=f?A:t;return{...f?A:o,entries:[...e.entries,...o.entries],hasMoreBefore:null!==(n=e.hasMoreBefore)&&void 0!==n?n:o.hasMoreBefore,topCursor:null!==(r=e.topCursor)&&void 0!==r?r:o.topCursor,bottomCursor:null!==(i=o.bottomCursor)&&void 0!==i?i:e.bottomCursor,lastLoadedTime:new Date}})),f&&g(!1))}});const q=Object(s.useCallback)((e=>{if(null===u.topCursor)throw new Error("useLogStream: Cannot fetch previous entries. No cursor is set.\nEnsure you have called `fetchEntries` at least once.");(u.hasMoreBefore||null!=e&&e.force)&&C(u.topCursor,{size:I,extendTo:null==e?void 0:e.extendTo})}),[C,u.topCursor,u.hasMoreBefore]),{fetchLogEntriesAfter:P,isRequestRunning:B,logEntriesAfterSearchResponse$:$}=(({columnOverrides:e,endTimestamp:t,highlightPhrase:n,query:r,sourceId:i,startTimestamp:o})=>{const{fetchLogEntriesAfter:s,logEntriesAfterSearchRequests$:a}=M({columnOverrides:e,endTimestamp:t,highlightPhrase:n,query:r,sourceId:i,startTimestamp:o}),{cancelRequest:l,isRequestRunning:u,isResponsePartial:c,loaded:m,logEntriesAfterSearchResponse$:h,total:f}=(e=>{const t=Object(d.d)(e,R),{cancelRequest:n,isRequestRunning:r,isResponsePartial:i,loaded:o,total:s}=Object(j.d)(t);return{cancelRequest:n,isRequestRunning:r,isResponsePartial:i,loaded:o,logEntriesAfterSearchRequests$:e,logEntriesAfterSearchResponse$:t,total:s}})(a);return{cancelRequest:l,fetchLogEntriesAfter:s,isRequestRunning:u,isResponsePartial:c,loaded:m,logEntriesAfterSearchResponse$:h,total:f}})(E);Object(d.e)($,{next:({response:{data:e,isPartial:t}})=>{null==e||t||(h((t=>{var n,r,i;const o=f?A:t;return{...f?A:o,entries:[...o.entries,...e.entries],hasMoreAfter:null!==(n=e.hasMoreAfter)&&void 0!==n?n:o.hasMoreAfter,topCursor:null!==(r=o.topCursor)&&void 0!==r?r:e.topCursor,bottomCursor:null!==(i=e.bottomCursor)&&void 0!==i?i:o.bottomCursor,lastLoadedTime:new Date}})),f&&g(!1))}});const z=Object(s.useCallback)((e=>{if(null===u.bottomCursor)throw new Error("useLogStream: Cannot fetch next entries. No cursor is set.\nEnsure you have called `fetchEntries` at least once.");(u.hasMoreAfter||null!=e&&e.force)&&P(u.bottomCursor,{size:I,extendTo:null==e?void 0:e.extendTo})}),[P,u.bottomCursor,u.hasMoreAfter]),D=Object(s.useCallback)((()=>{h(A),i?w(i,I):C("last",{size:I})}),[i,w,C,h]),V=Object(s.useCallback)((()=>{g(!0),C("last",{size:I})}),[C]),W=Object(s.useMemo)((()=>O||null==u.bottomCursor&&null==u.topCursor&&S),[O,S,u.bottomCursor,u.topCursor]),H=Object(s.useMemo)((()=>S||B),[B,S]);return{...u,fetchEntries:D,fetchNextEntries:z,fetchPreviousEntries:q,fetchNewestEntries:V,isLoadingMore:H,isReloading:W}}const[P,B]=i()(q)},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(297),i=n.n(r),o=n(2),s=n.n(o),a=n(20),l=n(25),u=n(106);const c=Object.assign(((e,t)=>n=>{const r=("function"==typeof(i=e)?i:(e,t)=>Object(l.get)(e,i,t))(n,c.default);var i;if(void 0!==r)return t instanceof Map?t.get(r):Object(l.get)(t,r)}),{default:Symbol("default")}),d=(e,t,n,r)=>Object(u.parseToHsl)(e).lightness>.5?Object(u.shade)(1-r,t):Object(u.tint)(1-n,t),m=(e,t)=>{const n=Object(u.getLuminance)(e),r=Object(u.getLuminance)(t);return parseFloat((n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)).toFixed(2))},h=(e,t,n)=>m(e,t)>m(e,n)?t:n,f=a.euiStyled.mark`
  color: ${e=>h(e.theme.eui.euiColorAccent,e.theme.eui.euiColorEmptyShade,e.theme.eui.euiColorDarkestShade)};
  background-color: ${e=>e.theme.eui.euiColorAccent};
  outline: 1px solid ${e=>e.theme.eui.euiColorAccent};
  };
`,g=a.euiStyled.mark`
  color: ${e=>h(d(e.theme.eui.euiTextColor,e.theme.eui.euiColorAccent,.7,.5),e.theme.eui.euiColorEmptyShade,e.theme.eui.euiColorDarkestShade)};
  background-color: ${e=>d(e.theme.eui.euiTextColor,e.theme.eui.euiColorAccent,.7,.5)};
  outline: 1px solid ${e=>d(e.theme.eui.euiTextColor,e.theme.eui.euiColorAccent,.7,.5)};
  };
`,p=(e,t,n)=>t.reduce(((e,t,r)=>{const i=e[e.length-1];if("string"!=typeof i)return e;const o=i.indexOf(t);return o>-1?[...e.slice(0,e.length-1),i.slice(0,o),s.a.createElement(n,{key:`highlight-${t}-${r}`},t),i.slice(o+t.length)]:e}),[e]),b=s.a.memo((({highlightTerms:e,isActiveHighlight:t,value:n,render:r})=>r?s.a.createElement(s.a.Fragment,null,r(1===n.length?n[0]:n)):1===n.length?s.a.createElement(s.a.Fragment,null,p(v(n[0]),e,t?f:g)):n.length>1?s.a.createElement("ul",{"data-test-subj":"LogEntryFieldValues"},n.map(((n,r)=>s.a.createElement(y,{key:`LogEntryFieldValue-${r}`,"data-test-subj":`LogEntryFieldValue-${r}`},p(v(n),e,t?f:g))))):null)),v=e=>"string"==typeof e?e:i()(e),y=a.euiStyled.li`
  display: inline;
  &:not(:last-child) {
    margin-right: 1ex;
    &::after {
      content: ',';
    }
  }
`},229:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);const i=r.type({type:r.literal("aborted")}),o=r.type({type:r.literal("generic"),message:r.string}),s=r.type({type:r.literal("shardFailure"),shardInfo:r.type({shard:r.union([r.number,r.null]),index:r.union([r.string,r.null]),node:r.union([r.string,r.null])}),message:r.union([r.string,r.null])}),a=r.union([i,o,s])},230:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(49),i=n.n(r),o=n(2),s=n(107);const a=(e,{format:t="dateTime",fallbackFormat:n}={})=>{const r=Object(s.a)("dateFormat:scaled")[0]||[["",void 0]],a={dateTime:Object(s.a)("dateFormat")[0],time:r.find((([e])=>""===e))[1]}[t];return Object(o.useMemo)((()=>((e,t,n="Y-MM-DD HH:mm:ss.SSS")=>t?i()(e).format(t):i()(e).format(n))(e,a,n)),[e,a,n])}},235:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return b}));var r=n(30),i=n.n(r),o=n(1),s=n(2),a=n.n(s),l=n(106),u=n(20),c=n(85),d=n(236),m=n(91),h=n(190),f=n(185);const g=({columnConfigurations:e,columnWidths:t})=>{const{firstVisiblePosition:n}=Object(m.c)();return a.a.createElement(b,null,e.map((e=>{if(Object(f.d)(e)){let r;return r=!1===e.timestampColumn.header?null:"string"==typeof e.timestampColumn.header?e.timestampColumn.header:n?Object(h.a)(n.time):o.i18n.translate("xpack.infra.logs.stream.timestampColumnTitle",{defaultMessage:"Timestamp"}),a.a.createElement(p,{key:e.timestampColumn.id,columnWidth:t[e.timestampColumn.id],"data-test-subj":"logColumnHeader timestampLogColumnHeader"},r)}if(Object(f.c)(e)){let n;return n=!1===e.messageColumn.header?null:"string"==typeof e.messageColumn.header?e.messageColumn.header:o.i18n.translate("xpack.infra.logs.stream.messageColumnTitle",{defaultMessage:"Message"}),a.a.createElement(p,{columnWidth:t[e.messageColumn.id],"data-test-subj":"logColumnHeader messageLogColumnHeader",key:e.messageColumn.id},n)}if(Object(f.b)(e)){let n;return n=!1===e.fieldColumn.header?null:"string"==typeof e.fieldColumn.header?e.fieldColumn.header:e.fieldColumn.field,a.a.createElement(p,{columnWidth:t[e.fieldColumn.id],"data-test-subj":"logColumnHeader fieldLogColumnHeader",key:e.fieldColumn.id},n)}})))},p=({children:e,columnWidth:t,"data-test-subj":n})=>a.a.createElement(v,i()({"data-test-subj":n},t),a.a.createElement(y,null,e)),b=u.euiStyled.div.attrs((e=>{var t;return{role:null!==(t=e.role)&&void 0!==t?t:"row"}}))`
  align-items: stretch;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  overflow: hidden;
  padding-right: ${d.a}px;
  border-bottom: ${e=>e.theme.eui.euiBorderThin};
  box-shadow: 0 2px 2px -1px ${e=>Object(l.transparentize)(.3,e.theme.eui.euiColorLightShade)};
  position: relative;
  z-index: 1;
`,v=Object(u.euiStyled)(c.a).attrs((e=>{var t;return{role:null!==(t=e.role)&&void 0!==t?t:"columnheader"}}))`
  align-items: center;
  display: flex;
  flex-direction: row;
  height: 32px;
  overflow: hidden;
`,y=Object(u.euiStyled)(c.b)`
  color: ${e=>e.theme.eui.euiTitleColor};
  font-size: ${e=>e.theme.eui.euiFontSizeS};
  font-weight: ${e=>e.theme.eui.euiFontWeightSemiBold};
  line-height: ${e=>e.theme.eui.euiLineHeight};
  text-overflow: clip;
  white-space: pre;
`},236:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return VerticalScrollPanel}));var r=n(6),i=n.n(r),o=n(116),s=n(25),a=n(2),l=n(20);const u=20;class VerticalScrollPanel extends a.PureComponent{constructor(...e){super(...e),i()(this,"scrollRef",a.createRef()),i()(this,"childRefs",new Map),i()(this,"childDimensions",new Map),i()(this,"nextScrollEventFromCenterTarget",!1),i()(this,"handleScroll",Object(s.throttle)((()=>{this.reportVisibleChildren(!this.nextScrollEventFromCenterTarget),this.nextScrollEventFromCenterTarget=!1}),250)),i()(this,"registerChild",((e,t)=>{null===t?this.childRefs.delete(e):this.childRefs.set(e,t)})),i()(this,"updateChildDimensions",(()=>{this.childDimensions=new Map(Object(s.sortBy)(Array.from(this.childRefs.entries()).reduce(((e,[t,n])=>{const r=n.getOffsetRect();return null!==r&&e.push([t,r]),e}),[]),"1.top"))})),i()(this,"getVisibleChildren",(()=>{if(null===this.scrollRef.current||this.childDimensions.size<=0)return;const{childDimensions:e,props:{height:t},scrollRef:{current:{scrollTop:n}}}=this;return d(Array.from(e.entries()),t,n)})),i()(this,"getScrollPosition",(()=>{if(null===this.scrollRef.current)return;const{props:{height:e},scrollRef:{current:{scrollHeight:t,scrollTop:n}}}=this;return{pagesAbove:n/e,pagesBelow:(t-n-e)/e}})),i()(this,"reportVisibleChildren",((e=!1)=>{const{onVisibleChildrenChange:t}=this.props,n=this.getVisibleChildren(),r=this.getScrollPosition();n&&r&&"function"==typeof t&&t({bottomChild:n.bottomChild,middleChild:n.middleChild,topChild:n.topChild,fromScroll:e,...r})})),i()(this,"centerTarget",((e,t)=>{const{props:{height:n},childDimensions:r,scrollRef:i}=this;if(null===i.current||!e||r.size<=0)return!1;const o=r.get(e);if(o){const e=void 0===t?o.height/2:t;this.nextScrollEventFromCenterTarget=!0;const r=i.current.scrollTop,s=o.top+e-n/2;return i.current.scrollTop=s,r!==s}return!1})),i()(this,"handleUpdatedChildren",((e,t)=>{this.updateChildDimensions();let n=!1;e&&(n=this.centerTarget(e,t)),n||this.reportVisibleChildren()}))}componentDidMount(){this.handleUpdatedChildren(this.props.target,void 0)}getSnapshotBeforeUpdate(e){if(0===e.height&&this.props.height>0||e.target!==this.props.target&&this.props.target)return{scrollOffset:void 0,scrollTarget:this.props.target};if(this.props.height>0){const e=this.getVisibleChildren();if(e)return{scrollOffset:e.middleChildOffset,scrollTarget:e.middleChild}}return{scrollOffset:void 0,scrollTarget:void 0}}componentDidUpdate(e,t,n){e.height===this.props.height&&e.target===this.props.target&&e.entriesCount===this.props.entriesCount||this.handleUpdatedChildren(n.scrollTarget,n.scrollOffset),e.isLocked&&!this.props.isLocked&&this.scrollRef.current&&(this.scrollRef.current.scrollTop=this.scrollRef.current.scrollHeight)}componentWillUnmount(){this.childRefs.clear()}render(){const{children:e,height:t,width:n,hideScrollbar:r,"data-test-subj":i}=this.props,o=r?u:0;return a.createElement(c,{"data-test-subj":i,style:{height:t,width:n+o},scrollbarOffset:o,onScroll:this.handleScroll,ref:this.scrollRef},"function"==typeof e?e(this.registerChild):null)}}i()(VerticalScrollPanel,"defaultProps",{hideScrollbar:!1});const c=l.euiStyled.div`
  overflow-x: hidden;
  overflow-y: scroll;
  position: relative;
  padding-right: ${e=>e.scrollbarOffset||0}px;

  & * {
    overflow-anchor: none;
  }
`,d=(e,t,n)=>{const r=Math.min(m(e,n+t/2),e.length-1),i=Math.min(m(e,n,0,r),e.length-1),o=Math.min(m(e,n+t,r),e.length-1);return{bottomChild:e[o][0],bottomChildOffset:e[o][1].top-n-t,middleChild:e[r][0],middleChildOffset:n+t/2-e[r][1].top,topChild:e[i][0],topChildOffset:e[i][1].top-n}},m=Object(o.bisector)((([e,t])=>t.top+t.height)).left},277:function(e,t,n){"use strict";n.r(t),n.d(t,"LogStream",(function(){return j})),n.d(t,"LogStreamContent",(function(){return M}));var r=n(55),i=n(2),o=n.n(i),s=n(20),a=n(9),l=n(25),u=n(5),c=n(209),d=n(74),m=n(39),h=n(173),f=n(161),g=n(12),p=n(19),b=n(6),v=n.n(b),y=n(146),E=n.n(y);class resettable_error_boundary_ResettableErrorBoundary extends o.a.Component{constructor(...e){super(...e),v()(this,"state",{latestError:void 0}),v()(this,"resetError",(()=>{this.setState((e=>({...e,latestError:void 0})))}))}componentDidUpdate({resetOnChange:e}){const{resetOnChange:t}=this.props,{latestError:n}=this.state;null==n||E()(t,e)||this.resetError()}static getDerivedStateFromError(e){return{latestError:e}}render(){const{children:e,renderError:t}=this.props,{latestError:n}=this.state;return null!=n?t({latestError:n,resetError:this.resetError}):e}}const w=({children:e,resetOnChange:t=null})=>o.a.createElement(resettable_error_boundary_ResettableErrorBoundary,{renderError:x,resetOnChange:t},e),O=({error:e})=>e instanceof r.KQLSyntaxError?o.a.createElement(g.EuiEmptyPrompt,{title:o.a.createElement(p.FormattedMessage,{id:"xpack.infra.logStream.kqlErrorTitle",defaultMessage:"Invalid KQL expression",tagName:"h2"}),body:o.a.createElement(g.EuiCodeBlock,{className:"eui-textLeft"},e.message)}):o.a.createElement(g.EuiEmptyPrompt,{title:o.a.createElement(p.FormattedMessage,{id:"xpack.infra.logStream.unknownErrorTitle",defaultMessage:"An error occurred",tagName:"h2"}),body:o.a.createElement(g.EuiCodeBlock,{className:"eui-textLeft"},e.message)}),x=({latestError:e})=>o.a.createElement(O,{error:e});var C=n(207);const j=({height:e=400,...t})=>o.a.createElement(S,{style:{height:e}},o.a.createElement(w,{resetOnChange:[t.query]},o.a.createElement(M,t))),M=({logView:e,startTimestamp:t,endTimestamp:n,query:s,filters:g,center:p,highlight:b,columns:v,showFlyoutAction:y=!1})=>{const E=Object(i.useMemo)((()=>v?function(e){return e.map((e=>{switch(e.type){case"timestamp":{const{width:t,header:n,render:r}=e;return{timestampColumn:{id:"___#timestamp",width:t,header:n,render:r}}}case"message":{const{width:t,header:n,render:r}=e;return{messageColumn:{id:"___#message",width:t,header:n,render:r}}}case"field":{const{width:t,header:n,render:r}=e;return{fieldColumn:{id:`___#${e.field}`,field:e.field,width:t,header:n,render:r}}}}}))}(v):void 0),[v]),{services:{http:w,data:O}}=Object(a.useKibana)();if(null==w||null==O)throw new Error("<LogStream /> cannot access kibana core services.\n\nEnsure the component is mounted within kibana-react's <KibanaContextProvider> hierarchy.\nRead more at https://github.com/elastic/kibana/blob/main/src/plugins/kibana_react/README.md\"\n");const{openLogEntryFlyout:x}=Object(C.b)(e.logViewId),j=Object(h.a)(),M=Object(i.useMemo)((()=>new m.a(O.dataViews,w,O.search.search,u.e)),[O.dataViews,O.search.search,w]),{derivedDataView:S,isLoading:_,load:T,resolvedLogView:F}=Object(d.b)({logViewId:e.logViewId,logViews:M,fetch:w.fetch}),L=Object(i.useMemo)((()=>"object"==typeof s&&"bool"in s?R(s,Object(r.buildEsQuery)(S,[],null!=g?g:[],j)):Object(r.buildEsQuery)(S,k(s),null!=g?g:[],j)),[S,g,j,s]),{entries:A,fetchEntries:I,fetchNextEntries:q,fetchPreviousEntries:P,hasMoreAfter:B,hasMoreBefore:$,isLoadingMore:z,isReloading:D}=Object(c.b)({sourceId:e.logViewId,startTimestamp:t,endTimestamp:n,query:L,center:p,columns:E}),V=Object(i.useMemo)((()=>F?null!=E?E:F.columns:[]),[F,E]),W=Object(i.useMemo)((()=>A.map((e=>({kind:"logEntry",logEntry:e,highlights:[]})))),[A]);Object(i.useEffect)((()=>{T()}),[T]),Object(i.useEffect)((()=>{I()}),[I]);const H=Object(i.useCallback)((({fromScroll:e,pagesBeforeStart:t,pagesAfterEnd:n})=>{e&&(z||(t<2?P():n<2&&q()))}),[z,P,q]);return o.a.createElement(f.g,{target:p||(A.length?A[A.length-1].cursor:null),columnConfigurations:V,items:W,scale:"medium",wrap:!0,isReloading:_||D,isLoadingMore:z,hasMoreBeforeStart:$,hasMoreAfterEnd:B,isStreaming:!1,jumpToTarget:l.noop,reportVisibleInterval:H,reloadItems:I,onOpenLogEntryFlyout:y?x:void 0,highlightedItem:null!=b?b:null,currentHighlightKey:null,startDateExpression:"",endDateExpression:"",updateDateRange:l.noop,startLiveStreaming:l.noop,hideScrollbar:!1})},S=s.euiStyled.div`
  display: flex;
  background-color: ${e=>e.theme.eui.euiColorEmptyShade};
`,R=(e,t)=>({bool:{must:[...e.bool.must,...t.bool.must],filter:[...e.bool.filter,...t.bool.filter],should:[...e.bool.should,...t.bool.should],must_not:[...e.bool.must_not,...t.bool.must_not]}}),k=e=>null==e?[]:"string"==typeof e?[{language:"kuery",query:e}]:"language"in e&&"query"in e?[e]:[];t.default=j},296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default=function(e){void 0===e&&(e={});var t=r.useState(e),n=t[0],i=t[1];return[n,r.useCallback((function(e){i((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[i])]}},297:function(e,t,n){var r="undefined"!=typeof JSON?JSON:n(298);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var s,a="boolean"==typeof t.cycles&&t.cycles,l=t.replacer||function(e,t){return t},u=t.cmp&&(s=t.cmp,function(e){return function(t,n){var r={key:t,value:e[t]},i={key:n,value:e[n]};return s(r,i)}}),c=[];return function e(t,s,d,m){var h=n?"\n"+new Array(m+1).join(n):"",f=n?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),void 0!==(d=l.call(t,s,d))){if("object"!=typeof d||null===d)return r.stringify(d);if(i(d)){for(var g=[],p=0;p<d.length;p++){var b=e(d,p,d[p],m+1)||r.stringify(null);g.push(h+n+b)}return"["+g.join(",")+h+"]"}if(-1!==c.indexOf(d)){if(a)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(d);var v=o(d).sort(u&&u(d));for(g=[],p=0;p<v.length;p++){var y=e(d,s=v[p],d[s],m+1);if(y){var E=r.stringify(s)+f+y;g.push(h+n+E)}}return c.splice(c.indexOf(d),1),"{"+g.join(",")+h+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},298:function(e,t,n){t.parse=n(299),t.stringify=n(300)},299:function(e,t){var n,r,i,o,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(e){throw{name:"SyntaxError",message:e,at:n,text:i}},l=function(e){return e&&e!==r&&a("Expected '"+e+"' instead of '"+r+"'"),r=i.charAt(n),n+=1,r},u=function(){var e,t="";for("-"===r&&(t="-",l("-"));r>="0"&&r<="9";)t+=r,l();if("."===r)for(t+=".";l()&&r>="0"&&r<="9";)t+=r;if("e"===r||"E"===r)for(t+=r,l(),"-"!==r&&"+"!==r||(t+=r,l());r>="0"&&r<="9";)t+=r,l();if(e=+t,isFinite(e))return e;a("Bad number")},c=function(){var e,t,n,i="";if('"'===r)for(;l();){if('"'===r)return l(),i;if("\\"===r)if(l(),"u"===r){for(n=0,t=0;t<4&&(e=parseInt(l(),16),isFinite(e));t+=1)n=16*n+e;i+=String.fromCharCode(n)}else{if("string"!=typeof s[r])break;i+=s[r]}else i+=r}a("Bad string")},d=function(){for(;r&&r<=" ";)l()};o=function(){switch(d(),r){case"{":return function(){var e,t={};if("{"===r){if(l("{"),d(),"}"===r)return l("}"),t;for(;r;){if(e=c(),d(),l(":"),Object.hasOwnProperty.call(t,e)&&a('Duplicate key "'+e+'"'),t[e]=o(),d(),"}"===r)return l("}"),t;l(","),d()}}a("Bad object")}();case"[":return function(){var e=[];if("["===r){if(l("["),d(),"]"===r)return l("]"),e;for(;r;){if(e.push(o()),d(),"]"===r)return l("]"),e;l(","),d()}}a("Bad array")}();case'"':return c();case"-":return u();default:return r>="0"&&r<="9"?u():function(){switch(r){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}a("Unexpected '"+r+"'")}()}},e.exports=function(e,t){var s;return i=e,n=0,r=" ",s=o(),d(),r&&a("Syntax error"),"function"==typeof t?function e(n,r){var i,o,s=n[r];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(void 0!==(o=e(s,i))?s[i]=o:delete s[i]);return t.call(n,r,s)}({"":s},""):s}},300:function(e,t){var n,r,i,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,(function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function l(e,t){var o,s,u,c,d,m=n,h=t[e];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(e)),"function"==typeof i&&(h=i.call(t,e,h)),typeof h){case"string":return a(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(n+=r,d=[],"[object Array]"===Object.prototype.toString.apply(h)){for(c=h.length,o=0;o<c;o+=1)d[o]=l(o,h)||"null";return u=0===d.length?"[]":n?"[\n"+n+d.join(",\n"+n)+"\n"+m+"]":"["+d.join(",")+"]",n=m,u}if(i&&"object"==typeof i)for(c=i.length,o=0;o<c;o+=1)"string"==typeof(s=i[o])&&(u=l(s,h))&&d.push(a(s)+(n?": ":":")+u);else for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(u=l(s,h))&&d.push(a(s)+(n?": ":":")+u);return u=0===d.length?"{}":n?"{\n"+n+d.join(",\n"+n)+"\n"+m+"}":"{"+d.join(",")+"}",n=m,u}}e.exports=function(e,t,o){var s;if(n="",r="","number"==typeof o)for(s=0;s<o;s+=1)r+=" ";else"string"==typeof o&&(r=o);if(i=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return l("",{"":e})}},301:function(e,t,n){(function(t){var n;n=function(){"use strict";var e=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},o=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,a=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function s(){n&&(n=!1,e()),r&&l()}function a(){i(s)}function l(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(a,20);o=e}return l}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;o.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),l=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},u=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||r},c=g(0,0,0,0);function d(e){return parseFloat(e)||0}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+d(e["border-"+n+"-width"])}),0)}var h="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof u(e).SVGGraphicsElement}:function(e){return e instanceof u(e).SVGElement&&"function"==typeof e.getBBox};function f(e){return n?h(e)?function(e){var t=e.getBBox();return g(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return c;var r=u(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=d(o)}return t}(r),o=i.left+i.right,s=i.top+i.bottom,a=d(r.width),l=d(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==t&&(a-=m(r,"left","right")+o),Math.round(l+s)!==n&&(l-=m(r,"top","bottom")+s)),!function(e){return e===u(e).document.documentElement}(e)){var h=Math.round(a+o)-t,f=Math.round(l+s)-n;1!==Math.abs(h)&&(a-=h),1!==Math.abs(f)&&(l-=f)}return g(i.left,i.top,a,l)}(e):c}function g(e,t,n,r){return{x:e,y:t,width:n,height:r}}var p=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=f(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,r,i,o,s,a,u,c=(r=(n=t).x,i=n.y,o=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(a.prototype),l(u,{x:r,y:i,width:o,height:s,top:i,right:r+o,bottom:s+i,left:r}),u);l(this,{target:e,contentRect:c})},v=function(){function t(t,n,r){if(this.activeObservations_=[],this.observations_=new e,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new p(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new b(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),y="undefined"!=typeof WeakMap?new WeakMap:new e,E=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=a.getInstance(),r=new v(t,n,this);y.set(this,r)};return["observe","unobserve","disconnect"].forEach((function(e){E.prototype[e]=function(){var t;return(t=y.get(this))[e].apply(t,arguments)}})),void 0!==r.ResizeObserver?r.ResizeObserver:E},e.exports=n()}).call(this,n(302))},302:function(e,t,n){e.exports=n(26)(171)},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return d}));var r=n(2),i=n(20),o=n(185),s=n(230),a=n(147);const l=i.euiStyled.div.attrs((()=>({role:"cell"})))`
  align-items: stretch;
  display: flex;
  flex-basis: ${e=>e.baseWidth||"0%"};
  flex-direction: row;
  flex-grow: ${e=>e.growWeight||0};
  flex-shrink: ${e=>e.shrinkWeight||0};
  overflow: hidden;
`,u=i.euiStyled.div.attrs({"data-test-subj":"LogEntryColumnContent"})`
  flex: 1 0 0%;
  padding: 2px ${8}px;
`,c=Symbol("iconColumnId"),d=({columnConfigurations:e,scale:t,timeFormat:n="time"})=>{const{CharacterDimensionsProbe:i,dimensions:l}=Object(a.g)(t),u=Object(r.useMemo)((()=>Date.now()),[]),d=Object(s.a)(u,{format:n}),m=Object(r.useMemo)((()=>{return t=e,n=l.width,r=d.length,t.reduce(((e,t)=>{if(Object(o.d)(t)){const i=t.timestampColumn.width?Object(o.a)(t.timestampColumn.width):void 0;return{...e,[t.timestampColumn.id]:{growWeight:0,shrinkWeight:0,baseWidth:null!=i?i:`${Math.ceil(n*r*1.1)+16}px`}}}if(Object(o.c)(t)){const n=t.messageColumn.width?Object(o.a)(t.messageColumn.width):void 0;return{...e,[t.messageColumn.id]:{growWeight:5,shrinkWeight:0,baseWidth:null!=n?n:"0%"}}}{const r=t.fieldColumn.width?Object(o.a)(t.fieldColumn.width):void 0;return{...e,[t.fieldColumn.id]:{growWeight:r?0:1,shrinkWeight:0,baseWidth:null!=r?r:`${Math.ceil(10*n)+16}px`}}}}),{[c]:{growWeight:0,shrinkWeight:0,baseWidth:"48px"}});var t,n,r}),[e,l.width,d]);return Object(r.useMemo)((()=>({columnWidths:m,CharacterDimensionsProbe:i})),[m,i])}}}]);