/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.monitoring_bundle_jsonpfunction=window.monitoring_bundle_jsonpfunction||[]).push([[2],Array(36).concat([function(e,t,s){"use strict";var a,i=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),n=[];function r(e){for(var t=-1,s=0;s<n.length;s++)if(n[s].identifier===e){t=s;break}return t}function o(e,t){for(var s={},a=[],i=0;i<e.length;i++){var o=e[i],l=t.base?o[0]+t.base:o[0],c=s[l]||0,u="".concat(l," ").concat(c);s[l]=c+1;var d=r(u),m={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(n[d].references++,n[d].updater(m)):n.push({identifier:u,updater:j(m,t),references:1}),a.push(u)}return a}function l(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var n=s.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,s,a){var i=s?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var n=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(n,r[t]):e.appendChild(n)}}function m(e,t,s){var a=s.css,i=s.media,n=s.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var g=null,p=0;function j(e,t){var s,a,i;if(t.singleton){var n=p++;s=g||(g=l(t)),a=d.bind(null,s,n,!1),i=d.bind(null,s,n,!0)}else s=l(t),a=m.bind(null,s,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var s=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<s.length;a++){var i=r(s[a]);n[i].references--}for(var l=o(e,t),c=0;c<s.length;c++){var u=r(s[c]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}s=l}}}},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s,a,i,n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(i," */")),l=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(l).concat([o]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var n=0;n<this.length;n++){var r=this[n][0];null!=r&&(i[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);a&&i[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),t.push(l))}},t}},,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);function i(e,t){if(null==e)return{};var s,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)s=n[a],t.indexOf(s)>=0||(i[s]=e[s]);return i}var n={};function r(e){return function(){return a.useContext(e)}}t.default=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),o=1;o<t;o++)s[o-1]=arguments[o];var l=[],c=[],u=function(e){var t=a.createContext(n);l.push(t),c.push(r(t))};s.length?s.forEach((function(e){return u(e.name)})):u(e.name);var d=function(t){for(var n=t.children,r=i(t,["children"]),o=e(r),c=n,u=0;u<l.length;u+=1){var d=l[u],m=s[u]||function(e){return e};c=a.createElement(d.Provider,{value:m(o)},c)}return c};return[d].concat(c)}},function(e,t,s){var a,i,n,r,o;
/*! Moment Duration Format v2.2.2
 *  https://github.com/jsmreese/moment-duration-format
 *  Date: 2018-02-16
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2018 John Madhavan-Reese
 *  Released under the MIT license
 */r=this,o=function(e){var t=!1,s=!1,a=!1,i=!1,n="escape years months weeks days hours minutes seconds milliseconds general".split(" "),r=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function o(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function l(e){for(var t="";e;)t+="0",e-=1;return t}function c(e,t){var s=e+"+"+h(S(t).sort(),(function(e){return e+":"+t[e]})).join(",");return c.cache[s]||(c.cache[s]=Intl.NumberFormat(e,t)),c.cache[s]}function u(e,t,n){var r,o,d,m=t.useToLocaleString,g=t.useGrouping,p=g&&t.grouping.slice(),j=t.maximumSignificantDigits,b=t.minimumIntegerDigits||1,x=t.fractionDigits||0,h=t.groupingSeparator,f=t.decimalSeparator;if(m&&n){var O,v={minimumIntegerDigits:b,useGrouping:g};return x&&(v.maximumFractionDigits=x,v.minimumFractionDigits=x),j&&e>0&&(v.maximumSignificantDigits=j),a?(i||((O=k({},t)).useGrouping=!1,O.decimalSeparator=".",e=parseFloat(u(e,O),10)),c(n,v).format(e)):(s||((O=k({},t)).useGrouping=!1,O.decimalSeparator=".",e=parseFloat(u(e,O),10)),e.toLocaleString(n,v))}var E=(j?e.toPrecision(j+1):e.toFixed(x+1)).split("e");d=E[1]||"",o=(E=E[0].split("."))[1]||"";var M=(r=E[0]||"").length,y=o.length,S=M+y,_=r+o;(j&&S===j+1||!j&&y===x+1)&&((_=function(e){for(var t=e.split("").reverse(),s=0,a=!0;a&&s<t.length;)s?"9"===t[s]?t[s]="0":(t[s]=(parseInt(t[s],10)+1).toString(),a=!1):(parseInt(t[s],10)<5&&(a=!1),t[s]="0"),s+=1;return a&&t.push("1"),t.reverse().join("")}(_)).length===S+1&&(M+=1),y&&(_=_.slice(0,-1)),r=_.slice(0,M),o=_.slice(M)),j&&(o=o.replace(/0*$/,""));var T=parseInt(d,10);T>0?o.length<=T?(r+=o+=l(T-o.length),o=""):(r+=o.slice(0,T),o=o.slice(T)):T<0&&(o=l(Math.abs(T)-r.length)+r+o,r="0"),j||((o=o.slice(0,x)).length<x&&(o+=l(x-o.length)),r.length<b&&(r=l(b-r.length)+r));var w,C="";if(g)for(E=r;E.length;)p.length&&(w=p.shift()),C&&(C=h+C),C=E.slice(-w)+C,E=E.slice(0,-w);else C=r;return o&&(C=C+f+o),C}function d(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}function m(e,t){var s=[];return x(S(t),(function(a){if("_durationLabels"===a.slice(0,15)){var i=a.slice(15).toLowerCase();x(S(t[a]),(function(n){n.slice(0,1)===e&&s.push({type:i,key:n,label:t[a][n]})}))}})),s}c.cache={};var g={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,s){return 1===t&&null===s?e:e+e}};function p(e){return"[object Array]"===Object.prototype.toString.call(e)}function j(e){return"[object Object]"===Object.prototype.toString.call(e)}function b(e,t){var s,a=0,i=e&&e.length||0;for("function"!=typeof t&&(s=t,t=function(e){return e===s});a<i;){if(t(e[a]))return e[a];a+=1}}function x(e,t){var s=0,a=e.length;if(e&&a)for(;s<a;){if(!1===t(e[s],s))return;s+=1}}function h(e,t){var s=0,a=e.length,i=[];if(!e||!a)return i;for(;s<a;)i[s]=t(e[s],s),s+=1;return i}function f(e,t){return h(e,(function(e){return e[t]}))}function O(e){var t=[];return x(e,(function(e){e&&t.push(e)})),t}function v(e){var t=[];return x(e,(function(e){b(t,e)||t.push(e)})),t}function E(e,t){var s=[];return x(e,(function(e){x(t,(function(t){e===t&&s.push(e)}))})),v(s)}function M(e,t){var s=[];return x(e,(function(a,i){if(!t(a))return s=e.slice(i),!1})),s}function y(e,t){return M(e.slice().reverse(),t).reverse()}function k(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}function S(e){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s);return t}function _(e,t){var s=0,a=e.length;if(!e||!a)return!1;for(;s<a;){if(!0===t(e[s],s))return!0;s+=1}return!1}function T(e){var t=[];return x(e,(function(e){t=t.concat(e)})),t}function w(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function C(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function I(){var e,t=[].slice.call(arguments),s={};if(x(t,(function(t,a){if(!a){if(!p(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?j(t)&&k(s,t):s.precision=t:s.template=t})),!e||!e.length)return[];s.returnMomentTypes=!0;var a=h(e,(function(e){return e.format(s)})),i=E(n,v(f(T(a),"type"))),r=s.largest;return r&&(i=i.slice(0,r)),s.returnMomentTypes=!1,s.outputTypes=i,h(e,(function(e){return e.format(s)}))}function L(){var s=[].slice.call(arguments),i=k({},this.format.defaults),l=this.asMilliseconds(),c=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(l=0,c=0);var T=l<0,w=e.duration(Math.abs(l),"milliseconds"),C=e.duration(Math.abs(c),"months");x(s,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?j(e)&&k(i,e):i.precision=e:i.template=e}));var I={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},L={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};i.types=n;var F=function(e){return b(n,(function(t){return L[t].test(e)}))},P=new RegExp(h(n,(function(e){return L[e].source})).join("|"),"g");i.duration=this;var N="function"==typeof i.template?i.template.apply(i):i.template,D=i.outputTypes,R=i.returnMomentTypes,z=i.largest,A=[];D||(p(i.stopTrim)&&(i.stopTrim=i.stopTrim.join("")),i.stopTrim&&x(i.stopTrim.match(P),(function(e){var t=F(e);"escape"!==t&&"general"!==t&&A.push(t)})));var B=e.localeData();B||(B={}),x(S(g),(function(e){"function"!=typeof g[e]?B["_"+e]||(B["_"+e]=g[e]):B[e]||(B[e]=g[e])})),x(S(B._durationTimeTemplates),(function(e){N=N.replace("_"+e+"_",B._durationTimeTemplates[e])}));var V=i.userLocale||e.locale(),U=i.useLeftUnits,$=i.usePlural,G=i.precision,q=i.forceLength,H=i.useGrouping,W=i.trunc,K=i.useSignificantDigits&&G>0,J=K?i.precision:0,Y=J,Q=i.minValue,X=!1,Z=i.maxValue,ee=!1,te=i.useToLocaleString,se=i.groupingSeparator,ae=i.decimalSeparator,ie=i.grouping;te=te&&(t||a);var ne=i.trim;p(ne)&&(ne=ne.join(" ")),null===ne&&(z||Z||K)&&(ne="all"),null!==ne&&!0!==ne&&"left"!==ne&&"right"!==ne||(ne="large"),!1===ne&&(ne="");var re=function(e){return e.test(ne)},oe=/large/,le=/small/,ce=/both/,ue=/mid/,de=/^all|[^sm]all/,me=/final/,ge=z>0||_([oe,ce,de],re),pe=_([le,ce,de],re),je=_([ue,de],re),be=_([me,de],re),xe=h(N.match(P),(function(e,t){var s=F(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==s&&"general"!==s&&A.push(s)),{index:t,length:e.length,text:"",token:"escape"===s?e.replace(L.escape,"$1"):e,type:"escape"===s||"general"===s?null:s}})),he={index:0,length:0,token:"",text:"",type:null},fe=[];U&&xe.reverse(),x(xe,(function(e){if(e.type)return(he.type||he.text)&&fe.push(he),void(he=e);U?he.text=e.token+he.text:he.text+=e.token})),(he.type||he.text)&&fe.push(he),U&&fe.reverse();var Oe=E(n,v(O(f(fe,"type"))));if(!Oe.length)return f(fe,"text").join("");Oe=h(Oe,(function(e,t){var s,a=t+1===Oe.length,n=!t;s="years"===e||"months"===e?C.as(e):w.as(e);var r=Math.floor(s),o=s-r,l=b(fe,(function(t){return e===t.type}));return n&&Z&&s>Z&&(ee=!0),a&&Q&&Math.abs(i.duration.as(e))<Q&&(X=!0),n&&null===q&&l.length>1&&(q=!0),w.subtract(r,e),C.subtract(r,e),{rawValue:s,wholeValue:r,decimalValue:a?o:0,isSmallest:a,isLargest:n,type:e,tokenLength:l.length}}));var ve=W?Math.floor:Math.round,Ee=function(e,t){var s=Math.pow(10,t);return ve(e*s)/s},Me=!1,ye=!1,ke=function(e,t){var s={useGrouping:H,groupingSeparator:se,decimalSeparator:ae,grouping:ie,useToLocaleString:te};return K&&(J<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(s.maximumSignificantDigits=J,e.significantDigits=J)),ee&&!ye&&(e.isLargest?(e.wholeValue=Z,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),X&&!ye&&(e.isSmallest?(e.wholeValue=Q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?G<0?e.value=Ee(e.wholeValue,G):0===G?e.value=ve(e.wholeValue+e.decimalValue):K?(e.value=W?Ee(e.rawValue,J-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(J-=e.wholeValue.toString().length)):(s.fractionDigits=G,e.value=W?e.wholeValue+Ee(e.decimalValue,G):e.wholeValue+e.decimalValue):K&&e.wholeValue?(e.value=Math.round(Ee(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),J-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&(q||Me)&&(s.minimumIntegerDigits=e.tokenLength,ye&&s.maximumSignificantDigits<e.tokenLength&&delete s.maximumSignificantDigits),!Me&&(e.value>0||""===ne||b(A,e.type)||b(D,e.type))&&(Me=!0),e.formattedValue=u(e.value,s,V),s.useGrouping=!1,s.decimalSeparator=".",e.formattedValueEn=u(e.value,s,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=u(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((Oe=O(Oe=h(Oe,ke))).length>1){var Se=function(e){return b(Oe,(function(t){return t.type===e}))},_e=function(e){var t=Se(e.type);t&&x(e.targets,(function(e){var s=Se(e.type);s&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,s.rawValue+=1,s.wholeValue+=1,s.decimalValue=0,s.formattedValueEn=s.wholeValue.toString(),ye=!0)}))};x(r,_e)}return ye&&(Me=!1,J=Y,Oe=O(Oe=h(Oe,ke))),!D||ee&&!i.trim?(ge&&(Oe=M(Oe,(function(e){return!e.isSmallest&&!e.wholeValue&&!b(A,e.type)}))),z&&Oe.length&&(Oe=Oe.slice(0,z)),pe&&Oe.length>1&&(Oe=y(Oe,(function(e){return!e.wholeValue&&!b(A,e.type)&&!e.isLargest}))),je&&(Oe=O(Oe=h(Oe,(function(e,t){return t>0&&t<Oe.length-1&&!e.wholeValue?null:e})))),!be||1!==Oe.length||Oe[0].wholeValue||!W&&Oe[0].isSmallest&&Oe[0].rawValue<Q||(Oe=[])):Oe=O(Oe=h(Oe,(function(e){return b(D,(function(t){return e.type===t}))?e:null}))),R?Oe:(x(fe,(function(e){var t=I[e.type],s=b(Oe,(function(t){return t.type===e.type}));if(t&&s){var a=s.formattedValueEn.split(".");a[0]=parseInt(a[0],10),a[1]?a[1]=parseFloat("0."+a[1],10):a[1]=null;var i=B.durationPluralKey(t,a[0],a[1]),n=m(t,B),r=!1,l={};x(B._durationLabelTypes,(function(t){var s=b(n,(function(e){return e.type===t.type&&e.key===i}));s&&(l[s.type]=s.label,o(e.text,t.string)&&(e.text=e.text.replace(t.string,s.label),r=!0))})),$&&!r&&(n.sort(d),x(n,(function(t){return l[t.type]===t.label?!o(e.text,t.label)&&void 0:o(e.text,t.label)?(e.text=e.text.replace(t.label,l[t.type]),!1):void 0})))}})),(fe=h(fe,(function(e){if(!e.type)return e.text;var t=b(Oe,(function(t){return t.type===e.type}));if(!t)return"";var s="";return U&&(s+=e.text),(T&&ee||!T&&X)&&(s+="< ",ee=!1,X=!1),(T&&X||!T&&ee)&&(s+="> ",ee=!1,X=!1),T&&(t.value>0||""===ne||b(A,t.type)||b(D,t.type))&&(s+="-",T=!1),"milliseconds"===e.type&&t.formattedValueMS?s+=t.formattedValueMS:s+=t.formattedValue,U||(s+=e.text),s}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function F(){var e=this.duration,t=function(t){return e._data[t]},s=b(this.types,t),a=function(e,t){for(var s=e.length;s-=1;)if(t(e[s]))return e[s]}(this.types,t);switch(s){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(s===a)return"d __";case"weeks":return s===a?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(s===a)return"M __";case"years":return s===a?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function P(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=I,e.duration.fn.format=L,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:F,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",g)}var N=function(e,t,s){return e.toLocaleString(t,s)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&C(N),s=t&&w(N);var D=function(e,t,s){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,s).format(e)};return a=C(D),i=a&&w(D),P(e),P},i=[s(18)],void 0===(n="function"==typeof(a=o)?a.apply(t,i):a)||(e.exports=n),r&&(r.momentDurationFormatSetup=r.moment?o(r.moment):o)},function(e,t,s){(function(t){const s="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=s}).call(this,s(102))},function(e,t){const s=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:s,MAX_SAFE_COMPONENT_LENGTH:16}},,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(27),i=s(5),n=a.__importDefault(s(48));t.default=function(e){var t=i.useRef(e);t.current=e,n.default((function(){return function(){return t.current()}}))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);t.default=function(e){a.useEffect(e,[])}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);t.default=function(e,t){var s=a.useRef((function(){}));a.useEffect((function(){s.current=e})),a.useEffect((function(){if(null!==t){var e=setInterval((function(){return s.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(51);case"v8light":return s(53)}},function(e,t,s){var a=s(36),i=s(52);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monNoData__content{max-width:600px;position:relative;text-align:center}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(54);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monNoData__content{max-width:600px;position:relative;text-align:center}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(56);case"v8light":return s(58)}},function(e,t,s){var a=s(36),i=s(57);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(59);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(61);case"v8light":return s(63)}},function(e,t,s){var a=s(36),i=s(62);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monRhythmChart__legendItem{align-items:center;color:#dfe5ef;cursor:pointer;display:flex;flex-direction:row;font-size:12px}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{align-items:center;display:flex;flex-direction:row;overflow:hidden;white-space:nowrap}.monRhythmChart__legendValue{margin-left:4px;overflow:hidden;white-space:nowrap}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(64);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monRhythmChart__legendItem{align-items:center;color:#343741;cursor:pointer;display:flex;flex-direction:row;font-size:12px}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{align-items:center;display:flex;flex-direction:row;overflow:hidden;white-space:nowrap}.monRhythmChart__legendValue{margin-left:4px;overflow:hidden;white-space:nowrap}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(66);case"v8light":return s(68)}},function(e,t,s){var a=s(36),i=s(67);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monRhythmChart{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__content{bottom:0;display:flex;flex:1 0 auto;left:0;position:absolute;right:0;top:0}.monRhythmChart__visualization{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__visualization>div{height:100%;min-width:1px;width:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(69);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monRhythmChart{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__content{bottom:0;display:flex;flex:1 0 auto;left:0;position:absolute;right:0;top:0}.monRhythmChart__visualization{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__visualization>div{height:100%;min-width:1px;width:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(71);case"v8light":return s(73)}},function(e,t,s){var a=s(36),i=s(72);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{word-wrap:break-word;font-size:12px;padding:4px;text-align:left;white-space:normal}.monChart__tooltipLabel{font-weight:700}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(74);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{word-wrap:break-word;font-size:12px;padding:4px;text-align:left;white-space:normal}.monChart__tooltipLabel{font-weight:700}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(76);case"v8light":return s(78)}},function(e,t,s){var a=s(36),i=s(77);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{padding-right:12px;visibility:hidden}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(79);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{padding-right:12px;visibility:hidden}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(81);case"v8light":return s(83)}},function(e,t,s){var a=s(36),i=s(82);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monClusterTitle{font-size:22px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monAssigned__children,.monCluster .monUnassigned__children{padding-top:24px}.monCluster .monChild{align-self:center;background-color:#25262e;border:1px solid #535966;border-radius:4px;float:left;margin:8px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #7dded8}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #f86b63}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #f3d371}.monCluster .monChild .monChild__title{align-items:center;color:#fff;display:flex;flex-direction:row;font-size:12px;padding:4px 8px;text-align:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;display:inline-block;font-size:12px;padding:4px 8px;position:relative}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(84);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monClusterTitle{font-size:22px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monAssigned__children,.monCluster .monUnassigned__children{padding-top:24px}.monCluster .monChild{align-self:center;background-color:#f5f7fa;border:1px solid #98a2b3;border-radius:4px;float:left;margin:8px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #00bfb3}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #bd271e}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #fec514}.monCluster .monChild .monChild__title{align-items:center;color:#fff;display:flex;flex-direction:row;font-size:12px;padding:4px 8px;text-align:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;display:inline-block;font-size:12px;padding:4px 8px;position:relative}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(86);case"v8light":return s(88)}},function(e,t,s){var a=s(36),i=s(87);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monElasticsearchIndicesTable__status{align-items:center;display:flex}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(89);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monElasticsearchIndicesTable__status{align-items:center;display:flex}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(91);case"v8light":return s(93)}},function(e,t,s){var a=s(36),i=s(92);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(94);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(96);case"v8light":return s(98)}},function(e,t,s){var a=s(36),i=s(97);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#dfe5ef}.monTableCell__clusterCellLicense{font-size:14px}.monTableCell__clusterCellExpiration{color:#98a2b3}.monTableCell__name,.monTableCell__status{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{color:#98a2b3;font-size:14px;font-size:1rem;line-height:1.71429rem}.monTableCell__number{font-size:22px;font-size:1.57143rem;line-height:2.28571rem}.monTableCell__splitNumber{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(99);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#343741}.monTableCell__clusterCellLicense{font-size:14px}.monTableCell__clusterCellExpiration{color:#69707d}.monTableCell__name,.monTableCell__status{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{color:#69707d;font-size:14px;font-size:1rem;line-height:1.71429rem}.monTableCell__number{font-size:22px;font-size:1.57143rem;line-height:2.28571rem}.monTableCell__splitNumber{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}",""]),e.exports=t},function(e,t,s){const a=s(101);e.exports=(e,t)=>new a(e,t).major},function(e,t,s){const a=s(42),{MAX_LENGTH:i,MAX_SAFE_INTEGER:n}=s(43),{re:r,t:o}=s(103),l=s(104),{compareIdentifiers:c}=s(105);class SemVer{constructor(e,t){if(t=l(t),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);a("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const s=e.trim().match(t.loose?r[o.LOOSE]:r[o.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(a("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const s=this.prerelease[t],i=e.prerelease[t];if(a("prerelease compare",t,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return c(s,i)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const s=this.build[t],i=e.build[t];if(a("prerelease compare",t,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return c(s,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=SemVer},function(e,t,s){e.exports=s(9)(477)},function(e,t,s){const{MAX_SAFE_COMPONENT_LENGTH:a}=s(43),i=s(42),n=(t=e.exports={}).re=[],r=t.src=[],o=t.t={};let l=0;const c=(e,t,s)=>{const a=l++;i(e,a,t),o[e]=a,r[a]=t,n[a]=new RegExp(t,s?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${r[o.NUMERICIDENTIFIER]})\\.(${r[o.NUMERICIDENTIFIER]})\\.(${r[o.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${r[o.NUMERICIDENTIFIERLOOSE]})\\.(${r[o.NUMERICIDENTIFIERLOOSE]})\\.(${r[o.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${r[o.NUMERICIDENTIFIER]}|${r[o.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${r[o.NUMERICIDENTIFIERLOOSE]}|${r[o.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${r[o.PRERELEASEIDENTIFIER]}(?:\\.${r[o.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${r[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${r[o.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${r[o.BUILDIDENTIFIER]}(?:\\.${r[o.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${r[o.MAINVERSION]}${r[o.PRERELEASE]}?${r[o.BUILD]}?`),c("FULL",`^${r[o.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${r[o.MAINVERSIONLOOSE]}${r[o.PRERELEASELOOSE]}?${r[o.BUILD]}?`),c("LOOSE",`^${r[o.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${r[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${r[o.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${r[o.XRANGEIDENTIFIER]})(?:\\.(${r[o.XRANGEIDENTIFIER]})(?:\\.(${r[o.XRANGEIDENTIFIER]})(?:${r[o.PRERELEASE]})?${r[o.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${r[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[o.XRANGEIDENTIFIERLOOSE]})(?:${r[o.PRERELEASELOOSE]})?${r[o.BUILD]}?)?)?`),c("XRANGE",`^${r[o.GTLT]}\\s*${r[o.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${r[o.GTLT]}\\s*${r[o.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?(?:$|[^\\d])`),c("COERCERTL",r[o.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${r[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${r[o.LONETILDE]}${r[o.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${r[o.LONETILDE]}${r[o.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${r[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${r[o.LONECARET]}${r[o.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${r[o.LONECARET]}${r[o.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${r[o.GTLT]}\\s*(${r[o.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${r[o.GTLT]}\\s*(${r[o.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${r[o.GTLT]}\\s*(${r[o.LOOSEPLAIN]}|${r[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${r[o.XRANGEPLAIN]})\\s+-\\s+(${r[o.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${r[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${r[o.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},function(e,t){const s=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:s.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},function(e,t){const s=/^[0-9]+$/,a=(e,t)=>{const a=s.test(e),i=s.test(t);return a&&i&&(e=+e,t=+t),e===t?0:a&&!i?-1:i&&!a?1:e<t?-1:1};e.exports={compareIdentifiers:a,rcompareIdentifiers:(e,t)=>a(t,e)}},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(107);case"v8light":return s(109)}},function(e,t,s){var a=s(36),i=s(108);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{background:#d4dae5b3;border-radius:6px;font-size:12px;font-weight:400;padding:4px;pointer-events:none}.monSparklineTooltip__xValue{color:#ffffffb3}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{color:#d4dae5b3;display:none;font-size:22px}.monSparklineTooltip__container{align-items:center;display:flex;flex-direction:row;justify-content:center;position:fixed;z-index:2000}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(110);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{background:#343741b3;border-radius:6px;font-size:12px;font-weight:400;padding:4px;pointer-events:none}.monSparklineTooltip__xValue{color:#ffffffb3}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{color:#343741b3;display:none;font-size:22px}.monSparklineTooltip__container{align-items:center;display:flex;flex-direction:row;justify-content:center;position:fixed;z-index:2000}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(112);case"v8light":return s(114)}},function(e,t,s){var a=s(36),i=s(113);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(115);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(117);case"v8light":return s(119)}},function(e,t,s){var a=s(36),i=s(118);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monPipelineViewer__queueMessage{color:#98a2b3;margin-left:24px}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(120);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monPipelineViewer__queueMessage{color:#69707d;margin-left:24px}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(122);case"v8light":return s(124)}},function(e,t,s){var a=s(36),i=s(123);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(125);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(127);case"v8light":return s(129)}},function(e,t,s){var a=s(36),i=s(128);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width:768px) and (max-width:991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px!important}.monPipelineViewer__metric{padding-left:32px;text-align:left}}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(130);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width:768px) and (max-width:991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px!important}.monPipelineViewer__metric{padding-left:32px;text-align:left}}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(132);case"v8light":return s(134)}},function(e,t,s){var a=s(36),i=s(133);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(135);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(137);case"v8light":return s(139)}},function(e,t,s){var a=s(36),i=s(138);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monPipelineViewer__spaceContainer{align-self:stretch;background-color:#1d1e24;border-bottom:2px solid #1d1e24;display:flex}.monPipelineViewer__spacer{align-self:stretch;border-left:1px dashed #343741;margin-left:12px;width:12px}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{align-items:center;display:flex;min-height:32px;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(odd){background:#24252d}.monPipelineViewer__conditional{font-weight:700}@media only screen and (min-width:768px) and (max-width:991px){.monPipelineViewer__spacer{border:none}}",""]),e.exports=t},function(e,t,s){var a=s(36),i=s(140);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(37)(!1)).push([e.i,".monPipelineViewer__spaceContainer{align-self:stretch;background-color:#fff;border-bottom:2px solid #fff;display:flex}.monPipelineViewer__spacer{align-self:stretch;border-left:1px dashed #d3dae6;margin-left:12px;width:12px}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{align-items:center;display:flex;min-height:32px;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(odd){background:#f5f7fa}.monPipelineViewer__conditional{font-weight:700}@media only screen and (min-width:768px) and (max-width:991px){.monPipelineViewer__spacer{border:none}}",""]),e.exports=t},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(27),i=s(5),n=a.__importDefault(s(142));t.default=function(e,t){var s=i.useState(t),a=s[0],r=s[1];return n.default((function(){var t=e.subscribe(r);return function(){return t.unsubscribe()}}),[e]),a}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5),i="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=i},,,,,,,,function(e,t,s){"use strict";s.r(t),s.d(t,"renderApp",(function(){return Or}));var a=s(20),i=s(16),n=s(5),r=s.n(n),o=s(29),l=s.n(o),c=s(17),u=s(141),d=s.n(u),m=s(1);const g=Object(n.createContext)({});var p=s(47),j=s.n(p),b=s(8),x=s.n(b),h=s(25),f=s(26),O=s(21),v=s(7);class url_state_GlobalState{constructor(e,t,s){x()(this,"stateSyncRef",void 0),x()(this,"stateContainer",void 0),x()(this,"stateStorage",void 0),x()(this,"stateContainerChangeSub",void 0),x()(this,"syncQueryStateWithUrlManager",void 0),x()(this,"timefilterRef",void 0),x()(this,"lastAssignedState",{}),this.timefilterRef=e.timefilter.timefilter;const a=Object(h.createHashHistory)();this.stateStorage=Object(O.createKbnUrlStateStorage)({useHash:!1,history:a,...Object(O.withNotifyOnErrors)(t)});const i=this.stateStorage.get("_g");this.stateContainer=Object(O.createStateContainer)(i,{set:e=>(t,s)=>({...e,[t]:s})}),this.stateSyncRef=Object(O.syncState)({storageKey:"_g",stateContainer:this.stateContainer,stateStorage:this.stateStorage}),this.stateContainerChangeSub=this.stateContainer.state$.subscribe((()=>{this.lastAssignedState=this.getState(),v.a.isInitializated()&&v.a.shims.breadcrumbs.update(),this.syncExternalState(s)})),this.syncQueryStateWithUrlManager=Object(f.syncQueryStateWithUrl)(e,this.stateStorage),this.stateSyncRef.start(),this.lastAssignedState=this.getState()}syncExternalState(e){const t=this.stateContainer.get();for(const s in t)({save:1,time:1,refreshInterval:1,filters:1})[s]||t[s]!==e[s]&&(e[s]=t[s])}setState(e){const t=this.getState(),s={...t,...e};if(e&&(a=s,i=t,JSON.stringify(a)===JSON.stringify(i)))return;var a,i;const n={...s,refreshInterval:this.timefilterRef.getRefreshInterval(),time:this.timefilterRef.getTime()};this.lastAssignedState=n,this.stateContainer.set(n)}getState(){const e={...this.lastAssignedState,...this.stateContainer.get()};delete e.filters;const{refreshInterval:t,time:s,...a}=e;return a||{}}destroy(){this.syncQueryStateWithUrlManager.stop(),this.stateContainerChangeSub.unsubscribe(),this.stateSyncRef.stop()}}var E=s(2);const M=Object(n.createContext)({}),y={pause:!1,value:1e4},k=({uiSettings:e,query:t,toasts:s,children:a})=>{const i={},[r]=Object(n.useState)((()=>new url_state_GlobalState(t,s,i))),o=r.getState();for(const e in o)o.hasOwnProperty(e)&&(i[e]=o[e]);return i.save=()=>{const e={...i};delete e.save,r.setState(e)},((e,t)=>{if(t.isRefreshIntervalTouched()||!e.isDefault(f.UI_SETTINGS.TIMEPICKER_REFRESH_INTERVAL_DEFAULTS))return!1;const s=t.getRefreshInterval();return s.pause||0===s.value})(e,v.a.shims.timefilter)&&(i.refreshInterval=y,v.a.shims.timefilter.setRefreshInterval(i.refreshInterval),i.save()),j()((()=>{r.destroy()})),Object(E.jsx)(M.Provider,{value:i},a)},S=r.a.createContext({});var _=s(0),T=s(40),w=s.n(T);const C=(e,t,s,a=!1)=>{const i={url:e,label:t,ignoreGlobalState:a};return s&&(i.testSubj=s),i};const[I,L]=w()((({history:e})=>{const t=Object(i.useKibana)().services.chrome,[s,a]=Object(n.useState)([]),r=Object(n.useCallback)((e=>{var s,a;if(!t)return;if(!e){var i;const s=null===(i=t.getBreadcrumbs$())||void 0===i?void 0:i.source;s&&s.value&&(e=s.value)}const n=location.hash.split("?")[1];null!==(s=e)&&void 0!==s&&s.length&&0===(null==n?void 0:n.indexOf("_g"))&&(null===(a=e[0].href)||void 0===a?void 0:a.split("?")[1])!==n&&(e.forEach((e=>{var t;const s=null===(t=e.href)||void 0===t?void 0:t.split("?")[0];s&&!e.ignoreGlobalState&&(e.href=`${s}?${n}`),delete e.ignoreGlobalState})),t.setBreadcrumbs(e.slice(0)))}),[t]),o=Object(n.useCallback)(((e,t)=>{const s=function(e,t){const s=_.i18n.translate("xpack.monitoring.breadcrumbs.clustersLabel",{defaultMessage:"Clusters"});let a=[C("#/home",s,"breadcrumbClusters",!0)];return null!=t&&t.inOverview||!e||a.push(C("#/overview",e)),null!=t&&t.inElasticsearch&&(a=a.concat(function(e){const t=[];return e.instance?(t.push(C("#/elasticsearch","Elasticsearch")),"indices"===e.name?t.push(C("#/elasticsearch/indices",_.i18n.translate("xpack.monitoring.breadcrumbs.es.indicesLabel",{defaultMessage:"Indices"}),"breadcrumbEsIndices")):"nodes"===e.name?t.push(C("#/elasticsearch/nodes",_.i18n.translate("xpack.monitoring.breadcrumbs.es.nodesLabel",{defaultMessage:"Nodes"}),"breadcrumbEsNodes")):"ml"===e.name?t.push(C("#/elasticsearch/ml_jobs",_.i18n.translate("xpack.monitoring.breadcrumbs.es.jobsLabel",{defaultMessage:"Machine learning jobs"}))):"ccr_shard"===e.name&&t.push(C("#/elasticsearch/ccr",_.i18n.translate("xpack.monitoring.breadcrumbs.es.ccrLabel",{defaultMessage:"CCR"}))),t.push(C(null,e.instance))):t.push(C(null,"Elasticsearch")),t}(t))),null!=t&&t.inKibana&&(a=a.concat(function(e){const t=[];return e.instance?(t.push(C("#/kibana","Kibana")),t.push(C("#/kibana/instances",_.i18n.translate("xpack.monitoring.breadcrumbs.kibana.instancesLabel",{defaultMessage:"Instances"}))),t.push(C(null,e.instance))):t.push(C(null,"Kibana")),t}(t))),null!=t&&t.inLogstash&&(a=a.concat(function(e){const t=_.i18n.translate("xpack.monitoring.breadcrumbs.logstashLabel",{defaultMessage:"Logstash"}),s=[];return e.instance?(s.push(C("#/logstash",t)),"nodes"===e.name&&s.push(C("#/logstash/nodes",_.i18n.translate("xpack.monitoring.breadcrumbs.logstash.nodesLabel",{defaultMessage:"Nodes"}))),s.push(C(null,e.instance))):"pipeline"===e.page?(s.push(C("#/logstash",t)),s.push(C("#/logstash/pipelines",_.i18n.translate("xpack.monitoring.breadcrumbs.logstash.pipelinesLabel",{defaultMessage:"Pipelines"})))):s.push(C(null,t)),s}(t))),null!=t&&t.inBeats&&(a=a.concat(function(e){const t=_.i18n.translate("xpack.monitoring.breadcrumbs.beatsLabel",{defaultMessage:"Beats"}),s=[];return e.instance?(s.push(C("#/beats",t)),s.push(C("#/beats/beats",_.i18n.translate("xpack.monitoring.breadcrumbs.beats.instancesLabel",{defaultMessage:"Instances"}))),s.push(C(null,e.instance))):s.push(C(null,t)),s}(t))),null!=t&&t.inApm&&(a=a.concat(function(e){const t=_.i18n.translate("xpack.monitoring.breadcrumbs.apmLabel",{defaultMessage:"APM server"}),s=[];return e.instance?(s.push(C("#/apm",t)),s.push(C("#/apm/instances",_.i18n.translate("xpack.monitoring.breadcrumbs.apm.instancesLabel",{defaultMessage:"Instances"}))),s.push(C(null,e.instance))):s.push(C(null,t)),s}(t))),null!=t&&t.inEnterpriseSearch&&(a=a.concat(function(e){const t=_.i18n.translate("xpack.monitoring.breadcrumbs.entSearchLabel",{defaultMessage:"Enterprise Search"}),s=[];return s.push(C("#/enterprise_search",t)),s}())),a}(e,t);a(s),r(s.map((e=>({text:e.label,href:e.url?e.url:void 0,"data-test-subj":e.testSubj,ignoreGlobalState:e.ignoreGlobalState}))))}),[a,r]);return Object(n.useEffect)((()=>{e.listen(((e,t)=>{r()}))}),[e,r]),{generate:o,update:r,breadcrumbs:s}})),F={from:"now-1h",to:"now",interval:">=10s"},[P,N]=w()((()=>{var e,t;const{services:s}=Object(i.useKibana)(),a=Object(n.useContext)(M),r={...F,...null===(e=s.data)||void 0===e?void 0:e.query.timefilter.timefilter.getTime()},{value:o,pause:l}=null===(t=s.data)||void 0===t?void 0:t.query.timefilter.timefilter.getRefreshInterval(),[c,u]=Object(n.useState)(o),[d,m]=Object(n.useState)(l),[g,p]=Object(n.useState)(r),[j,b]=Object(n.useState)(!1),x=Object(n.useCallback)(((e,t)=>{var s;p({...g,from:e,to:t}),a.time={from:e,to:t},v.a.shims.timefilter.setTime(a.time),null===(s=a.save)||void 0===s||s.call(a)}),[g,p,a]);return Object(n.useEffect)((()=>{const e=v.a.shims.timefilter.getTimeUpdate$().subscribe((function(){var e;const t=v.a.shims.timefilter.getTime();p({...g,...t}),a.time={...t},null===(e=a.save)||void 0===e||e.call(a)}));return()=>e.unsubscribe()}),[]),{currentTimerange:g,setTimeRange:p,handleTimeChange:x,setRefreshInterval:u,refreshInterval:c,setIsPaused:m,isPaused:d,setIsDisabled:b,isDisabled:j}}));var D=s(15),R=s(6),z=s(49),A=s.n(z);const B=()=>{const{isCcsEnabled:e}=Object(n.useContext)(g),{services:t}=Object(i.useKibana)(),[s,a]=Object(n.useState)(!1);A()((()=>{!async function(){var e;if(null!==(e=t.http)&&void 0!==e&&e.fetch)try{var s;const e=await(null===(s=t.http)||void 0===s?void 0:s.fetch("../api/monitoring/v1/check_access"));a(e.has_access)}catch(e){a(!1)}}()}),5e3);const r=_.i18n.translate("xpack.monitoring.accessDeniedTitle",{defaultMessage:"Access Denied"});return s?Object(E.jsx)(c.Redirect,{to:"/home"}):Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiCallOut,{title:r,color:"danger",iconType:"alert","data-test-subj":"accessDeniedTitle"},Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.accessDenied.notAuthorizedDescription",defaultMessage:"You are not authorized to access Monitoring. To use Monitoring, you need the privileges granted by both the `{kibanaAdmin}` and `{monitoringUser}` roles.",values:{kibanaAdmin:"kibana_admin",monitoringUser:"monitoring_user "}})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.accessDenied.clusterNotConfiguredDescription",defaultMessage:"If you are attempting to access a dedicated monitoring cluster, this might be because you are logged in as a user that is not configured on the monitoring cluster."})),e&&Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.accessDenied.noRemoteClusterClientDescription",defaultMessage:"Since Cross Cluster Search is enabled (`monitoring.ui.ccs.enabled` is set to `true`), make sure your cluster has the `remote_cluster_client` role on at least one node."})),Object(E.jsx)("p",null,Object(E.jsx)(R.EuiButton,{href:"../app/home"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.accessDenied.backToKibanaButtonLabel",defaultMessage:"Back to Kibana"})))))};var V=s(3),U=s.n(V),$=s(14),G=s.n($),q=s(22),H=s(30);const W=({pageTitle:e,onRefresh:t})=>{const{services:s}=Object(i.useKibana)(),a=s.uiSettings.get(H.UI_SETTINGS.TIMEPICKER_QUICK_RANGES),r=Object(n.useMemo)((()=>a.map((({from:e,to:t,display:s})=>({start:e,end:t,label:s})))),[a]),{currentTimerange:o,handleTimeChange:l,setRefreshInterval:c,refreshInterval:u,setIsPaused:d,isPaused:m,isDisabled:g}=N(),p=Object(n.useContext)(M),j=Object(n.useCallback)((e=>{e.isInvalid||l(e.start,e.end)}),[l]),b=Object(n.useCallback)((({refreshInterval:e,isPaused:t})=>{var s;c(e),d(t),p.refreshInterval={pause:t,value:e},v.a.shims.timefilter.setRefreshInterval(p.refreshInterval),null===(s=p.save)||void 0===s||s.call(p)}),[c,d,p]);return Object(E.jsx)(R.EuiPageHeader,{pageTitle:e,rightSideItems:[Object(E.jsx)(R.EuiSuperDatePicker,{isDisabled:g,start:o.from,end:o.to,onTimeChange:j,onRefresh:t,isPaused:m,refreshInterval:u,onRefreshChange:b,commonlyUsedRanges:r})]})};var K=s(4);let J,Y,Q;const X={supported:!1,enabled:!1,data:null,callback:null,hideBottomBar:!1},Z=()=>X,ee=()=>X.callback&&X.callback(),te=async(e,t=!1)=>{const s=await(async(e,t=!1)=>{const s=J.cluster_uuid,a=J.ccs;let i="../api/monitoring/v1/setup/collection";i+=e?`/node/${e}`:!t&&s?`/cluster/${s}`:"/cluster";try{return await Y.post(i,{body:JSON.stringify({ccs:a})})}catch(e){throw Q(e),e}})(e,t);X.data=s;const a=Object($.get)(s,"_meta.hasPermissions",!1);if(!a){let e="";return a||(e=_.i18n.translate("xpack.monitoring.setupMode.notAvailablePermissions",{defaultMessage:"You do not have the necessary permissions to do this."})),v.a.shims.toastNotifications.addDanger({title:_.i18n.translate("xpack.monitoring.setupMode.notAvailableTitle",{defaultMessage:"Setup mode is not available"}),text:e}),se(!1)}if(ee(),!J.cluster_uuid){const e=Object($.get)(s,"_meta.liveClusterUuid"),t=Object.values(Object($.get)(s,"elasticsearch.byUuid",{})).filter((e=>e.isPartiallyMigrated||e.isFullyMigrated));e&&t.length>0&&(i=e,J.cluster_uuid=i,null===(n=(r=J).save)||void 0===n||n.call(r))}var i,n,r},se=e=>{var t,s;X.enabled=e,J.inSetupMode=e,null===(t=(s=J).save)||void 0===t||t.call(s),ee(),e&&te()},ae=async(e,t,s,a)=>{J=e,Y=t,Q=s,a&&(X.callback=a),J.inSetupMode&&se(!0)},ie=(e,t=J)=>!1!==(null==e?void 0:e.setupModeSupported)&&(!!X.enabled||t.inSetupMode),ne=e=>!(!X.enabled||e===K.d.MetricbeatMigration&&v.a.shims.isCloud),re=()=>Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiTitle,{size:"l"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.lookingForMonitoringDataTitle",defaultMessage:"We're looking for your monitoring data"}))),Object(E.jsx)(R.EuiTextColor,{color:"subdued"},Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.lookingForMonitoringDataDescription",defaultMessage:"Monitoring provides insight to your hardware performance and load."}))))),oe=()=>Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiTitle,{size:"l"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.monitoringIsOffTitle",defaultMessage:"Monitoring is currently off"}))),Object(E.jsx)(R.EuiTextColor,{color:"subdued"},Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.monitoringIsOffDescription",defaultMessage:"Monitoring provides insight to your hardware performance and load."}))))),le=()=>Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiTitle,{size:"l"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.changesNeededTitle",defaultMessage:"You need to make some adjustments"}))),Object(E.jsx)(R.EuiTextColor,{color:"subdued"},Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.changesNeededDescription",defaultMessage:"To run monitoring please perform the following steps"}))))),ce=()=>{const{ELASTIC_WEBSITE_URL:e}=v.a.shims.docLinks;return Object(E.jsx)(R.EuiTextColor,{color:"subdued"},Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription",defaultMessage:"Configure monitoring through "}),Object(E.jsx)(R.EuiLink,{href:"https://cloud.elastic.co/deployments",target:"_blank"},"Elasticsearch Service Console")," ",Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription2",defaultMessage:"Go to "}),Object(E.jsx)(R.EuiLink,{href:"https://cloud.elastic.co/deployments",target:"_blank"},"Logs and metrics")," ",Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription3",defaultMessage:"section for a deployment to configure monitoring. For more information visit "}),Object(E.jsx)(R.EuiLink,{href:`${e}guide/en/cloud/current/ec-enable-logging-and-monitoring.html`,target:"_blank"},"the documentation page."))))};function ue({checkMessage:e}){const t=e||Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.defaultLoadingMessage",defaultMessage:"Loading, please wait..."});return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(re,null),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiLoadingSpinner,{size:"m"})),Object(E.jsx)(R.EuiFlexItem,{grow:!1},t)))}class collection_enabled_ExplainCollectionEnabled extends r.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.waitedTooLongTimer=null,this.state={waitedTooLong:!1}}componentWillUnmount(){clearInterval(this.waitedTooLongTimer)}handleClick(){const{enabler:e}=this.props;e.enableCollectionEnabled(),this.waitedTooLongTimer=setTimeout((()=>{this.setState({waitedTooLong:!0})}),22e3)}render(){const{reason:e,isCollectionEnabledUpdated:t,isCollectionEnabledUpdating:s}=this.props,{property:a,data:i,context:r}=e,o=this.state.waitedTooLong?Object(E.jsx)("p",null,Object(E.jsx)("a",{href:"#/"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.stillWaitingLinkText",defaultMessage:"Still waiting?"}))):null;return Object(E.jsx)(n.Fragment,null,t?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiTitle,{size:"l","data-test-subj":"monitoringCollectionEnabledMessage"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.monitoringTurnedOnTitle",defaultMessage:"Success! Getting your monitoring data."}))),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.monitoringTurnedOnDescription",defaultMessage:"When the data is in your cluster, your monitoring dashboard will show up here. This might take a few seconds."}))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiLoadingSpinner,{size:"l"}),Object(E.jsx)(R.EuiSpacer,null),o):(()=>Object(E.jsx)(n.Fragment,null,Object(E.jsx)(oe,null),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabledDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data}.",values:{context:r,property:Object(E.jsx)(R.EuiCode,null,a),data:Object(E.jsx)(R.EuiCode,null,i)}})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.turnItOnDescription",defaultMessage:"Would you like to turn it on?"}))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiButton,{fill:!0,onClick:this.handleClick,type:"button","data-test-subj":"enableCollectionEnabled",isLoading:s},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.turnOnMonitoringButtonLabel",defaultMessage:"Turn on monitoring"}))))))())}}class collection_interval_ExplainCollectionInterval extends r.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{enabler:e}=this.props;e.enableCollectionInterval()}render(){const{reason:e,isCollectionIntervalUpdated:t,isCollectionIntervalUpdating:s}=this.props,{context:a,property:i,data:r}=e;return Object(E.jsx)(n.Fragment,null,t?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiTitle,{size:"l"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.monitoringTurnedOnTitle",defaultMessage:"Success! Wait a moment please."}))),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.monitoringTurnedOnDescription",defaultMessage:"As soon as monitoring data appears in your cluster the page will automatically refresh with your monitoring dashboard. This only takes only a few seconds."}))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiLoadingSpinner,{size:"l"})):(()=>Object(E.jsx)(n.Fragment,null,Object(E.jsx)(oe,null),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionIntervalDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data}.",values:{context:a,property:Object(E.jsx)(R.EuiCode,null,i),data:Object(E.jsx)(R.EuiCode,null,r)}})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.wrongIntervalValueDescription",defaultMessage:"The collection interval setting needs to be a positive integer (10s is recommended) in order for the collection agents to be active."})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.changeIntervalDescription",defaultMessage:"Would you like us to change it and enable monitoring?"}))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiButton,{fill:!0,onClick:this.handleClick,type:"button","data-test-subj":"enableCollectionInterval",isLoading:s},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.turnOnMonitoringButtonLabel",defaultMessage:"Turn on monitoring"}))))))())}}function de({reason:e}){const{context:t,property:s,data:a}=e;return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(le,null),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.pluginEnabledDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data} set, which disables monitoring. Removing the {monitoringEnableFalse} setting from your configuration will put the default into effect and enable Monitoring.",values:{context:t,property:Object(E.jsx)(R.EuiCode,null,s),data:Object(E.jsx)(R.EuiCode,null,a),monitoringEnableFalse:Object(E.jsx)(R.EuiCode,null,"xpack.monitoring.enabled: false")}}))))}function me({reason:e}){const{context:t,property:s,data:a}=e;return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(le,null),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiText,{className:"eui-textLeft"},Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exportersDescription",defaultMessage:"We checked the {context} settings for {property}, and found the reason: {data}.",values:{context:Object(E.jsx)(R.EuiCode,null,t),property:Object(E.jsx)(R.EuiCode,null,s),data:Object(E.jsx)(R.EuiCode,null,a)}})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exporters.problemWithConfigDescription",defaultMessage:"Using monitoring exporters to ship the monitoring data to a remote monitoring cluster is highly recommended as it keeps the integrity of the monitoring data safe no matter what the state of the production cluster. However, as this instance of Kibana could not find any monitoring data, there seems to be a problem with the {property} configuration, or the {monitoringEs} settings in {kibanaConfig}.",values:{property:Object(E.jsx)(R.EuiCode,null,s),monitoringEs:Object(E.jsx)(R.EuiCode,null,"xpack.monitoring.elasticsearch"),kibanaConfig:Object(E.jsx)(R.EuiCode,null,"kibana.yml")}})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exporters.checkConfigDescription",defaultMessage:"Check that the intended exporters are enabled for sending statistics to the monitoring cluster, and that the monitoring cluster host matches the {monitoringEs} setting in {kibanaConfig} to see monitoring data in this instance of Kibana.",values:{monitoringEs:Object(E.jsx)(R.EuiCode,null,"xpack.monitoring.elasticsearch"),kibanaConfig:Object(E.jsx)(R.EuiCode,null,"kibana.yml")}}))))}function ge(){return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(ce,null),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiText,{className:"eui-textLeft"},Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exportersCloudDescription",defaultMessage:"In Elastic Cloud, your monitoring data is stored in your dedicated monitoring cluster."}))))}const pe=e=>{const{reason:t}=e,{property:s,data:a,context:i}=t;switch(s){case"xpack.monitoring.collection.enabled":return Object(E.jsx)(collection_enabled_ExplainCollectionEnabled,e);case"xpack.monitoring.collection.interval":return Object(E.jsx)(collection_interval_ExplainCollectionInterval,e);case"xpack.monitoring.exporters":return Object(E.jsx)(me,e);case"xpack.monitoring.exporters.cloud_enabled":return Object(E.jsx)(ge,null);case"xpack.monitoring.enabled":return Object(E.jsx)(de,e);case"custom":return Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,t.message));default:return Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.reasons.explainWhyNoDataDescription",defaultMessage:"There is a {context} setting that has {property} set to {data}.",values:{context:Object(E.jsx)(R.EuiCode,null,i),property:Object(E.jsx)(R.EuiCode,null,s),data:Object(E.jsx)(R.EuiCode,null,a)}})))}};function je(e){return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(pe,e))}function be(){return Object(E.jsx)("div",{"data-test-subj":"weTriedContainer"},Object(E.jsx)(R.EuiTitle,{size:"l"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.reasons.couldNotActivateMonitoringTitle",defaultMessage:"We couldn't activate monitoring"}))),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiText,{className:"eui-textLeft"},Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.reasons.noMonitoringDataFoundDescription",defaultMessage:'No monitoring data found. Try setting the time filter to "Last 1 hour" or check if data is available for a different time period.'})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.reasons.ifDataInClusterDescription",defaultMessage:"If data is in your cluster, your monitoring dashboards will show up here."}))))}const xe=({errors:e})=>{const t={};return e.filter((e=>{const{statusCode:s,error:a,message:i}=e,n=`${s}${a}${i}`;if(!t[n])return t[n]=!0,!0})).map(((e,t)=>{const{message:s,statusCode:a,error:i}=e;return Object(E.jsx)(n.Fragment,{key:`checker-error-${t}`},Object(E.jsx)(R.EuiDescriptionListTitle,null,a," ",i),Object(E.jsx)(R.EuiDescriptionListDescription,null,s))}))};function he(e){return void 0===e.errors||0===e.errors.length?null:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiCallOut,{title:"Errors found",color:"danger",className:"eui-textLeft"},Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.checkerErrors.checkEsSettingsErrorMessage",defaultMessage:"There were some errors encountered in trying to check Elasticsearch settings. You need administrator rights to check the settings and, if needed, to enable the monitoring collection setting."})),Object(E.jsx)(R.EuiDescriptionList,null,Object(E.jsx)(xe,e))))}function fe(e,t={},s=window.location){let a=s.hash?s.hash.split("?")[1]:"";const i=/_g=\((.+)\)$/.exec(a);if(!i||!i.length)return a?`${e.split("?")[0]}?${a}`:e;let n=i[1];return Object.keys(t).forEach((e=>{let s=t[e];"cluster_uuid"===e&&(s=`'${s}'`);const a=new RegExp(`${e}:([^,]+)`).exec(n);a&&a.length?n=n.replace(a[0],`${e}:${s}`):n+=`,${e}:${s}`})),a=a.replace(i[0],`_g=(${n})`),`${e.split("?")[0]}?${a}`}function Oe(e){const{isLoading:t,reason:s,checkMessage:a,isCollectionEnabledUpdated:i}=e;return i&&!s||t?Object(E.jsx)(ue,{checkMessage:a}):s?Object(E.jsx)(je,e):Object(E.jsx)(be,null)}function ve(e){const[t,s]=Object(n.useState)(!1),[a,i]=Object(n.useState)(!1),r=({children:e})=>Object(E.jsx)(R.EuiPage,{"data-test-subj":"noDataContainer"},e);return e.isCloudEnabled?Object(E.jsx)(r,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.cloud.heading",defaultMessage:"No monitoring data found."}))),Object(E.jsx)(R.EuiPageBody,{restrictWidth:600},Object(E.jsx)(R.EuiPageContent_Deprecated,{verticalPosition:"center",horizontalPosition:"center",className:"eui-textCenter"},Object(E.jsx)(R.EuiIcon,{type:"monitoringApp",size:"xxl"}),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiTitle,{size:"l"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.cloud.title",defaultMessage:"Monitoring data not available"}))),Object(E.jsx)(R.EuiTextColor,{color:"subdued"},Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.cloud.description",defaultMessage:"Monitoring provides insight to your hardware performance and load."})))),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(ce,null)))):a?Object(E.jsx)(r,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.no_data.internal_collection.heading",defaultMessage:"No monitoring data found."}))),Object(E.jsx)(R.EuiPageBody,{restrictWidth:600},Object(E.jsx)(R.EuiPageContent_Deprecated,{verticalPosition:"center",horizontalPosition:"center",className:"eui-textCenter"},Object(E.jsx)(R.EuiIcon,{type:"monitoringApp",size:"xxl"}),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(Oe,e),Object(E.jsx)(he,{errors:e.errors}),e.isCloudEnabled?null:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiButtonEmpty,{isDisabled:e.isCollectionEnabledUpdated,onClick:()=>i(!1)},Object(E.jsx)(R.EuiTextColor,{color:"default"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.setupMetricbeatInstead",defaultMessage:"Or, set up with Metricbeat (recommended)"}))))))):Object(E.jsx)(r,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.no_data.heading",defaultMessage:"No monitoring data found."}))),Object(E.jsx)(R.EuiPageBody,{restrictWidth:600},Object(E.jsx)(R.EuiPageContent_Deprecated,{verticalPosition:"center",horizontalPosition:"center",className:"eui-textCenter"},Object(E.jsx)(R.EuiIcon,{type:"monitoringApp",size:"xxl"}),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiTitle,{size:"l"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.noMonitoringDetected",defaultMessage:"No monitoring data found"}))),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.noMonitoringDataFound",defaultMessage:"Have you set up monitoring yet? If so, make sure that the selected time period in the upper right includes monitoring data."})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.remoteCollectionNotice",defaultMessage:"If you have configured monitoring data to be sent to a dedicated monitoring cluster you should access that data with the Kibana instance attached to the monitoring cluster."}))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiButton,{fill:!0,onClick:async function(){s(!0),await se(!0),window.location.hash=fe("#/elasticsearch/nodes")},type:"button","data-test-subj":"enableCollectionInterval",isLoading:t},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.collectionInterval.turnOnMonitoringButtonLabel",defaultMessage:"Set up monitoring with Metricbeat"})))),Object(E.jsx)(R.EuiHorizontalRule,{size:"half"}),Object(E.jsx)(R.EuiButtonEmpty,{onClick:()=>i(!0),"data-test-subj":"useInternalCollection"},Object(E.jsx)(R.EuiTextColor,{color:"subdued"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.noData.setupInternalInstead",defaultMessage:"Or, set up with self monitoring"}))))))}const Ee=({uploadPath:e})=>Object(E.jsx)(R.EuiCard,{title:Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.updateLicenseTitle",defaultMessage:"Update your license"}),description:Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.useAvailableLicenseDescription",defaultMessage:"If you already have a new license, upload it now."}),footer:Object(E.jsx)(R.EuiButton,{"data-test-subj":"updateLicenseButton",href:e},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.updateLicenseButtonLabel",defaultMessage:"Update license"}))});class license_LicenseStatus extends r.a.PureComponent{render(){const{isExpired:e,status:t,type:s,expiryDate:a}=this.props,i=s.charAt(0).toUpperCase()+s.substr(1).toLowerCase();let r,o,l;return e?(r=Object(E.jsx)(R.EuiIcon,{color:"danger",type:"alert"}),l=Object(E.jsx)(n.Fragment,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.expiredLicenseStatusDescription",defaultMessage:"Your license expired on {expiryDate}",values:{expiryDate:Object(E.jsx)("strong",null,a)}})),o=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.expiredLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license has expired",values:{typeTitleCase:i}})):(r=Object(E.jsx)(R.EuiIcon,{color:"success",type:"checkInCircleFilled",size:"l"}),l=a?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.activeLicenseStatusDescription",defaultMessage:"Your license will expire on {expiryDate}",values:{expiryDate:Object(E.jsx)("strong",null,a)}})):Object(E.jsx)(n.Fragment,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.permanentActiveLicenseStatusDescription",defaultMessage:"Your license will never expire."})),o=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.activeLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license is {status}",values:{typeTitleCase:i,status:t.toLowerCase()}})),Object(E.jsx)(R.EuiTextAlign,{textAlign:"center"},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"s"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},r),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"m"},Object(E.jsx)("h1",{"data-test-subj":"licenseText"},o)))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiText,{"data-test-subj":"licenseSubText"},l))}}const Me=({isPrimaryCluster:e,uploadLicensePath:t})=>e?Object(E.jsx)(Ee,{uploadPath:t}):null,ye=({isPrimaryCluster:e})=>e?null:Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.license.howToUpdateLicenseDescription",defaultMessage:"To update the license for this cluster, provide the license file through the Elasticsearch {apiText}:",values:{apiText:"API"}})),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiCodeBlock,null,"curl -XPUT -u <user> 'https://<host>:<port>/_license' -H 'Content-Type: application/json' -d @license.json")),ke=e=>{const{status:t,type:s,isExpired:a,expiryDate:i}=e,n=`${v.a.shims.getBasePath()}/app/management/stack/license_management`;return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.license.heading",defaultMessage:"License"}))),Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(license_LicenseStatus,{isExpired:a,status:t,type:s,expiryDate:i}),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(Me,e),Object(E.jsx)(ye,e))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiText,{size:"s",textAlign:"center"},Object(E.jsx)("p",null,"For more license options please visit",Object(E.jsx)(R.EuiLink,{href:n},"License Management"),"."))))};function Se(){return Object(E.jsx)(R.EuiPage,{style:{height:"calc(100vh - 50px)"}},Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPageContent_Deprecated,{verticalPosition:"center",horizontalPosition:"center",className:"monNoData__content"},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceAround"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiLoadingSpinner,{size:"xl"})),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.pageLoadingTitle",defaultMessage:"Loading"}))))))))}s(50);const _e=({pageViewTitle:e})=>{const t=e.toLowerCase().replace(/-/g,"").replace(/\s+/g,"_");return Object(q.useTrackPageview)({app:"stack_monitoring",path:t}),Object(q.useTrackPageview)({app:"stack_monitoring",path:t,delay:15e3}),Object(E.jsx)(Se,null)},Te=({pageViewTitle:e})=>e?Object(E.jsx)(_e,{pageViewTitle:e}):Object(E.jsx)(Se,null),we={RED:"RED",YELLOW:"YELLOW",GREEN:"GREEN",GRAY:"GRAY"},Ce={[we.RED]:"danger",[we.YELLOW]:"warning",[we.GREEN]:"success",[we.GRAY]:"subdued"},Ie=({type:e,label:t})=>{const s=Ce[e];return Object(E.jsx)(R.EuiIcon,{alt:t,size:"l","data-test-subj":"statusIcon",type:"dot",color:s})},Le=r.a.createContext({setupModeSupported:!1});var Fe=s(18),Pe=s.n(Fe);function Ne(e,t,s){let a,i;if(s=s||Pe()(),t===m.c)a=Pe.a.duration(s-Pe()(e));else{if(t!==m.d)throw new Error('[formatTimestampToDuration] requires a [calculationFlag] parameter to specify format as "since" or "until" the given time.');a=Pe.a.duration(Pe()(e)-s)}return i=Math.abs(s.diff(e,"months"))>=1?Pe.a.duration(a).format(m.t):Math.abs(s.diff(e,"minutes"))>=1?Pe.a.duration(a).format(m.u):Pe.a.duration(a).format(m.v),i.replace(/ -?0 mins$/,"").replace(/ -?0 hrs$/,"").replace(/ -?0 days$/,"")}function De(e){if(!e)return null;let t=e.text;if(!e.tokens||!e.tokens.length)return t;const s=e.tokens.filter((e=>e.type===K.a.Time)),a=e.tokens.filter((e=>e.type===K.a.Link)),i=e.tokens.filter((e=>e.type===K.a.DocLink));for(const e of s){const s=e;t=t.replace(s.startToken,s.isRelative?Ne(s.timestamp,m.d):Pe.a.tz(s.timestamp,Pe.a.tz.guess()).format("LLL z"))}let r=Object(E.jsx)(n.Fragment,null,t);for(const e of a){const s=e,a=new RegExp(`${s.startToken}(.+?)${s.endToken}`).exec(t);if(!a||a.length<2)continue;const i=t.indexOf(a[0]),o=t.substring(0,i),l=t.substring(i+a[0].length),c=fe(`#/${s.url}`);r=Object(E.jsx)(n.Fragment,null,o,Object(E.jsx)(R.EuiLink,{href:c},a[1]),l)}for(const e of i){const s=e,a=new RegExp(`${s.startToken}(.+?)${s.endToken}`).exec(t);if(!a||a.length<2)continue;const i=s.partialUrl.replace("{basePath}",v.a.shims.getBasePath()).replace("{elasticWebsiteUrl}",v.a.shims.docLinks.ELASTIC_WEBSITE_URL).replace("{docLinkVersion}",v.a.shims.docLinks.DOC_LINK_VERSION),o=t.indexOf(a[0]),l=t.substring(0,o),c=t.substring(o+a[0].length);r=Object(E.jsx)(n.Fragment,null,l,Object(E.jsx)(R.EuiLink,{href:i,target:"_blank",external:!0},a[1]),c)}return r}s(41);var Re=s(31);const ze=e=>{const{alert:t,compressed:s}=e,[a,i]=r.a.useState(!1),[o,l]=r.a.useState(t.enabled),[c,u]=r.a.useState(t.muteAll),[d,m]=r.a.useState(!1),g=Object(n.useMemo)((()=>a&&v.a.shims.triggersActionsUi.getEditAlertFlyout({initialRule:{...t,ruleTypeId:t.alertTypeId},onClose:()=>{i(!1),X.hideBottomBar=!1,ee()}})),[a]);return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiFlexGroup,{justifyContent:s?"flexStart":"spaceBetween",gutterSize:s?"m":"xs",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiButton,{size:s?"s":"m",onClick:()=>{i(!0),X.hideBottomBar=!0,ee()}},_.i18n.translate("xpack.monitoring.alerts.panel.editAlert",{defaultMessage:"Edit rule"}))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiSwitch,{name:"disable",disabled:d,checked:!o,onChange:async()=>{o?(l(!1),await async function(){m(!0);try{await v.a.shims.http.post(`${Re.BASE_ALERTING_API_PATH}/rule/${t.id}/_disable`)}catch(e){v.a.shims.toastNotifications.addDanger({title:_.i18n.translate("xpack.monitoring.alerts.panel.disableAlert.errorTitle",{defaultMessage:"Unable to disable rule"}),text:e.message})}m(!1)}()):(l(!0),await async function(){m(!0);try{await v.a.shims.http.post(`${Re.BASE_ALERTING_API_PATH}/rule/${t.id}/_enable`)}catch(e){v.a.shims.toastNotifications.addDanger({title:_.i18n.translate("xpack.monitoring.alerts.panel.enableAlert.errorTitle",{defaultMessage:"Unable to enable rule"}),text:e.message})}m(!1)}())},label:Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.panel.disableTitle",defaultMessage:"Disable"})})),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiSwitch,{name:"mute",disabled:d,checked:c,"data-test-subj":"muteSwitch",onChange:async()=>{c?(u(!1),await async function(){m(!0);try{await v.a.shims.http.post(`${Re.BASE_ALERTING_API_PATH}/rule/${t.id}/_unmute_all`)}catch(e){v.a.shims.toastNotifications.addDanger({title:_.i18n.translate("xpack.monitoring.alerts.panel.ummuteAlert.errorTitle",{defaultMessage:"Unable to unmute rule"}),text:e.message})}m(!1)}()):(u(!0),await async function(){m(!0);try{await v.a.shims.http.post(`${Re.BASE_ALERTING_API_PATH}/rule/${t.id}/_mute_all`)}catch(e){v.a.shims.toastNotifications.addDanger({title:_.i18n.translate("xpack.monitoring.alerts.panel.muteAlert.errorTitle",{defaultMessage:"Unable to mute rule"}),text:e.message})}m(!1)}())},label:Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.panel.muteTitle",defaultMessage:"Mute"})}))),g)},Ae=e=>{const{alert:t,alertState:s}=e,a=ie(r.a.useContext(Le));if(!t)return null;if(a||!s)return Object(E.jsx)("div",{style:{padding:"1rem"}},Object(E.jsx)(ze,{alert:t}));const i=s.state.ui.message.nextSteps&&s.state.ui.message.nextSteps.length?Object(E.jsx)(R.EuiListGroup,null,s.state.ui.message.nextSteps.map(((e,t)=>Object(E.jsx)(R.EuiListGroupItem,{size:"s",key:t,label:De(e)})))):null,{code:o}=s.state.ui.message;return Object(E.jsx)(n.Fragment,null,Object(E.jsx)("div",{style:{padding:"1rem"}},Object(E.jsx)(R.EuiTitle,{size:"xs"},Object(E.jsx)("h5",null,De(s.state.ui.message))),null!=o&&o.length?Object(E.jsx)(R.EuiCodeBlock,{fontSize:"s",paddingSize:"s",language:"json",isCopyable:!0,overflowHeight:150},o):null,i?Object(E.jsx)(R.EuiSpacer,{size:"s"}):null,i),Object(E.jsx)(R.EuiHorizontalRule,{margin:"s"}),Object(E.jsx)("div",{style:{padding:"0 1rem 1rem 1rem"}},Object(E.jsx)(ze,{alert:t})))};var Be=s(23),Ve=s.n(Be);const Ue="0,0.[00]",$e="0,0.0 b",Ge="0,0.[0]a";function qe(e,t=!1,s=null){return t?Ve.a.utc(e).format("LL LTS"):Ve.a.tz(e,s||Ve.a.tz.guess()).format("LL LTS")}function He(e,t){return Ve()(e).tz("Browser"===t?Ve.a.tz.guess():t).fromNow()}function We(e,t){return Ve()(e).tz("Browser"===t?Ve.a.tz.guess():t).calendar()}function Ke(e,t){return e.state.ui.triggeredMS===t.state.ui.triggeredMS?0:e.state.ui.triggeredMS<t.state.ui.triggeredMS?1:-1}const Je=e=>`${e} alert${e>1?"s":""}`,Ye=e=>`${e} rule${e>1?"s":""}`,Qe=_.i18n.translate("xpack.monitoring.alerts.badge.panelTitle",{defaultMessage:"Alerts"}),Xe=_.i18n.translate("xpack.monitoring.rules.badge.panelTitle",{defaultMessage:"Rules"}),Ze=_.i18n.translate("xpack.monitoring.alerts.badge.groupByNode",{defaultMessage:"Group by node"}),et=_.i18n.translate("xpack.monitoring.alerts.badge.groupByType",{defaultMessage:"Group by alert type"}),tt=e=>{const{stateFilter:t=(()=>!0)}=e,s=Object.values(e.alerts).flat().filter((e=>Boolean(null==e?void 0:e.sanitizedRule))),[a,i]=r.a.useState(null),o=ie(r.a.useContext(Le)),l=o?s.length:s.reduce(((e,{states:s})=>e+s.filter((({state:e})=>t(e))).length),0),[c,u]=r.a.useState(!o&&l>8),d=o?Xe:Qe;if(r.a.useEffect((()=>{o&&c&&u(!1)}),[o,c]),0===l)return null;const g=Ze,p=c?function(e,t,s){const a={},i={};for(const{states:e,sanitizedRule:n}of t){const{id:t}=n;for(const r of e.filter((({state:e})=>s(e)))){const{state:e}=r;i[e.nodeId]=i[e.nodeId]||[],i[e.nodeId].push(r),a[e.nodeId]=a[e.nodeId]||{},a[e.nodeId][t]=a[r.state.nodeId][t]||{alert:n,states:[],count:0},a[e.nodeId][t].count++,a[e.nodeId][t].states.push(r)}}for(const e of Object.values(a))for(const{states:t}of Object.values(e))t.sort(Ke);const r=Object.keys(i).length;let o=r,l=r;return[{id:0,title:e,items:[...Object.keys(i).map(((e,t)=>{const a=i[e].filter((({state:e})=>s(e))),{nodeName:n,itemLabel:r}=a[0].state;return{name:Object(E.jsx)(R.EuiText,null,n||r," (",a.length,")"),panel:t+1}}))]},...Object.keys(i).reduce(((e,t,s)=>{const i=Object.values(a[t]),r=[];let l="";for(const{alert:e,states:t}of i)for(const s of t){const{nodeName:t,itemLabel:a}=s.state;l=t||a,r.push({name:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiToolTip,{position:"top",content:We(s.state.ui.triggeredMS,v.a.shims.uiSettings.get("dateFormat:tz"))},Object(E.jsx)(R.EuiText,{size:"s"},He(s.state.ui.triggeredMS,v.a.shims.uiSettings.get("dateFormat:tz")))),Object(E.jsx)(R.EuiText,{size:"s"},e.name)),panel:++o})}return e.push({id:s+1,title:l,items:r}),e}),[]),...Object.keys(i).reduce(((e,t,s)=>{const i=Object.values(a[t]);for(const{alert:t,states:s}of i)for(const a of s)e.push({id:++l,title:t.name,width:400,content:Object(E.jsx)(Ae,{alert:t,alertState:a})});return e}),[])]}(d,s,t):function(e,t,s,a){const i=t?m.U.reduce(((e,t)=>{const a=t.rules.filter((e=>s.find((({sanitizedRule:t})=>t.alertTypeId===e.ruleName))));return a.length>0&&e.push({...t,alerts:a.map((({ruleName:e})=>s.filter((({sanitizedRule:t})=>t.alertTypeId===e)).map((t=>({alert:t.sanitizedRule,states:[],ruleName:e}))))).flat(),alertCount:0}),e}),[]):m.U.reduce(((e,t)=>{const i=[];let n=0;for(const{ruleName:e}of t.rules){const t=s.filter((({sanitizedRule:t,states:s})=>e===t.alertTypeId&&s.length>0));t.length>0&&t.forEach((t=>{const s=t.states.filter((({state:e})=>a(e)));s.length>0&&(i.push({alert:t.sanitizedRule,states:s,ruleName:e}),n+=s.length)}))}return i.length>0&&e.push({...t,alertCount:n,alerts:i}),e}),[]);for(const e of i)for(const t of e.alerts)t.states.sort(Ke);const r=[{id:0,title:e,items:[...i.map(((e,s)=>({name:t?Object(E.jsx)(R.EuiText,null,e.label):Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,e.label," (",e.alertCount,")")),panel:s+1})))]}];if(t){let e=i.length,t=i.length,s=0;for(const t of i)r.push({id:s+1,title:`${t.label}`,items:t.alerts.map((t=>({name:Object(E.jsx)(R.EuiText,null,t.alert.name),panel:++e}))).flat()}),s++;for(const e of i)for(const{alert:s}of e.alerts)r.push({id:++t,title:`${s.name}`,width:400,content:Object(E.jsx)(Ae,{alert:s})})}else{let e=i.length,s=0;for(const n of i)r.push({id:s+1,title:`${n.label}`,items:n.alerts.map((({alert:s,ruleName:i,states:n})=>{const r=n.filter((({state:e})=>a(e)));return{name:t?Object(E.jsx)(R.EuiText,null,s.name):Object(E.jsx)(R.EuiText,null,s.name," (",r.length,")"),panel:++e}}))}),s++;let o=i.length,l=i.reduce(((e,t)=>e+t.alerts.length),i.length);for(const e of i)for(const{alert:t,states:s}of e.alerts){const e=[];for(const t of s.filter((({state:e})=>a(e)))){const{nodeName:s,itemLabel:a}=t.state;e.push({name:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiToolTip,{position:"top",content:We(t.state.ui.triggeredMS,v.a.shims.uiSettings.get("dateFormat:tz"))},Object(E.jsx)(R.EuiText,{size:"s"},He(t.state.ui.triggeredMS,v.a.shims.uiSettings.get("dateFormat:tz")))),Object(E.jsx)(R.EuiText,{size:"s"},s||a)),panel:++l}),e.push({isSeparator:!0})}r.push({id:++o,title:`${t.name}`,items:e})}let c=i.reduce(((e,t)=>e+t.alerts.length),i.length);for(const e of i)for(const{alert:t,states:s}of e.alerts)for(const e of s.filter((({state:e})=>a(e))))r.push({id:++c,title:`${t.name}`,width:400,content:Object(E.jsx)(Ae,{alert:t,alertState:e})})}return r}(d,!!o,s,t);p.length&&!o&&p[0].items&&p[0].items.push({isSeparator:!0},{name:Object(E.jsx)(R.EuiSwitch,{checked:!1,onChange:()=>u(!c),label:c?et:g})});const j=Object(E.jsx)(R.EuiBadge,{iconType:"bell",color:o?"default":"danger","data-test-subj":"alertsBadge",onClickAriaLabel:o?Ye(l):Je(l),onClick:()=>i(!0)},o?Ye(l):Je(l));return Object(E.jsx)(R.EuiPopover,{id:"monitoringAlertMenu",button:j,isOpen:!0===a,closePopover:()=>i(null),panelPaddingSize:"none",anchorPosition:"downLeft"},Object(E.jsx)(R.EuiContextMenu,{key:`${c?"byNode":"byType"}_${p.length}`,initialPanelId:0,panels:p}))},st=e=>{const{alerts:t,showBadge:s=!1,showOnlyCount:a=!1,stateFilter:i=(()=>!0)}=e,n=ie(r.a.useContext(Le));if(!t)return null;let o=!1;const l=Object.values(t).flat().reduce(((e,t)=>{const s=t.states.filter((e=>e.firing));if(e+=s.filter((e=>i(e.state))).length,s.length&&!o)for(const e of t.states)if(i(e.state)&&e.state.ui.severity===K.c.Danger){o=!0;break}return e}),0);if(0===l&&(!n||a))return Object(E.jsx)(R.EuiToolTip,{content:_.i18n.translate("xpack.monitoring.alerts.status.clearToolip",{defaultMessage:"No alerts firing"}),position:"bottom"},Object(E.jsx)(R.EuiHealth,{color:"success","data-test-subj":"alertIcon"},a?l:Object(E.jsx)("span",{"data-test-subj":"alertStatusText"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.status.clearText",defaultMessage:"Clear"}))));if(s||n)return Object(E.jsx)(tt,{alerts:t,stateFilter:i});const c=o?K.c.Danger:K.c.Warning,u=(()=>{switch(c){case K.c.Danger:return _.i18n.translate("xpack.monitoring.alerts.status.highSeverityTooltip",{defaultMessage:"There are some critical issues that require your immediate attention!"});case K.c.Warning:return _.i18n.translate("xpack.monitoring.alerts.status.mediumSeverityTooltip",{defaultMessage:"There are some issues that might have impact on the stack."});default:return _.i18n.translate("xpack.monitoring.alerts.status.lowSeverityTooltip",{defaultMessage:"There are some low-severity issues."})}})();return Object(E.jsx)(R.EuiToolTip,{content:u,position:"bottom"},Object(E.jsx)(R.EuiHealth,{color:c,"data-test-subj":"alertIcon"},a?l:Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.status.alertsTooltip",defaultMessage:"Alerts"})))};s(55);const at=({label:e,value:t,...s},a)=>Object(E.jsx)(R.EuiFlexItem,U()({style:{maxWidth:200},key:`summary-status-item-${a}`,grow:!1},s),Object(E.jsx)(R.EuiStat,{title:t,className:"monSummaryStatusNoWrap__stat",titleSize:"xxxs",textAlign:"left",description:e?`${e}`:""})),it=({status:e})=>Object(E.jsx)(n.Fragment,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.summaryStatus.statusIconTitle",defaultMessage:"Status: {statusIcon}",values:{statusIcon:Object(E.jsx)(Ie,{type:e.toUpperCase(),label:_.i18n.translate("xpack.monitoring.summaryStatus.statusIconLabel",{defaultMessage:"Status: {status}",values:{status:e}})})}})),nt=({status:e,isOnline:t,IconComponent:s})=>Object($.isEmpty)(e)?null:Object(E.jsx)(R.EuiStat,{"data-test-subj":"status",title:Object(E.jsx)(r.a.Fragment,null,Object(E.jsx)(s,{status:e,isOnline:t}),"",Object($.capitalize)(e)),titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat",description:_.i18n.translate("xpack.monitoring.summaryStatus.statusDescription",{defaultMessage:"Status"})});function rt({StatusIndicator:e=nt,status:t,isOnline:s,IconComponent:a=it,alerts:i,metrics:n,...r}){return Object(E.jsx)("div",U()({},r,{className:"monSummaryStatusNoWrap"}),Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"m",alignItems:"center",justifyContent:"spaceBetween"},Object(E.jsx)(R.EuiFlexItem,{className:"eui-textTruncate",style:{maxWidth:200},key:"summary-status-item-status",grow:!1},Object(E.jsx)(e,{status:t,isOnline:s,IconComponent:a})),i?Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiStat,{title:Object(E.jsx)(st,{showOnlyCount:!0,alerts:i}),titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat",description:_.i18n.translate("xpack.monitoring.summaryStatus.alertsDescription",{defaultMessage:"Alerts"})})):null,n.map(at)))}function ot({status:e}){const t=(()=>{const t=e.toUpperCase();return we[t]||we.GRAY})();return Object(E.jsx)(Ie,{type:t,label:_.i18n.translate("xpack.monitoring.elasticsearch.healthStatusLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}var lt=s(19),ct=s.n(lt);function ut(e,t){return mt(e,"byte")+" / "+mt(t,"byte")}function dt(e,t){return mt(e/t,"0.00%")}function mt(e,t){const s=Number.isNaN(e);let a="0,0.0";if("number"!=typeof e||s){if(void 0!==e&&!s)return e;e=0,a="0"}let i="";switch(t){case"time_since":return Pe()(Pe()()-e).from(Pe()(),!0);case"time":return Pe()(e).format("H:mm:ss");case"int_commas":a="0,0";break;case"byte":case"bytes":a+=" b";break;case"ms":i="ms";break;default:t&&(a=t)}return ct()(e).format(a)+i}function gt(e,t,s,a={}){const{prependSpace:i=!0}=a;if(Boolean(e)||0===e){let a="";return void 0!==s&&(a=i?` ${s}`:s),mt(e,t)+a}return _.i18n.translate("xpack.monitoring.formatNumbers.notAvailableLabel",{defaultMessage:"N/A"})}function pt({stats:e,alerts:t}){const{dataSize:s,nodesCount:a,indicesCount:i,memUsed:n,memMax:r,totalShards:o,unassignedShards:l,documentCount:c,status:u}=e,d=[{label:_.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.nodesLabel",{defaultMessage:"Nodes"}),value:a,"data-test-subj":"nodesCount"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.indicesLabel",{defaultMessage:"Indices"}),value:i,"data-test-subj":"indicesCount"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.memoryLabel",{defaultMessage:"JVM Heap"}),value:gt(n,"byte")+" / "+gt(r,"byte"),"data-test-subj":"memory"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.totalShardsLabel",{defaultMessage:"Total shards"}),value:o,"data-test-subj":"totalShards"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.unassignedShardsLabel",{defaultMessage:"Unassigned shards"}),value:l,"data-test-subj":"unassignedShards"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.documentsLabel",{defaultMessage:"Documents"}),value:gt(c,"int_commas"),"data-test-subj":"documentCount"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.dataLabel",{defaultMessage:"Data"}),value:gt(s,"byte"),"data-test-subj":"dataSize"}];return Object(E.jsx)(rt,{metrics:d,status:u,alerts:t,IconComponent:({status:e})=>Object(E.jsx)(ot,{status:e}),"data-test-subj":"elasticsearchClusterStatus"})}const jt=_.i18n.translate("xpack.monitoring.setupMode.node",{defaultMessage:"node"}),bt=_.i18n.translate("xpack.monitoring.setupMode.nodes",{defaultMessage:"nodes"}),xt=_.i18n.translate("xpack.monitoring.setupMode.instance",{defaultMessage:"instance"}),ht=_.i18n.translate("xpack.monitoring.setupMode.instances",{defaultMessage:"instances"}),ft=_.i18n.translate("xpack.monitoring.setupMode.server",{defaultMessage:"server"}),Ot=_.i18n.translate("xpack.monitoring.setupMode.servers",{defaultMessage:"servers"});function vt(e){return e===m.a?e.toUpperCase():Object($.capitalize)(e)}const Et=[m.F,m.r],Mt=[m.B,m.b];function yt(e,t=!1){return Mt.includes(e)?t?ht:xt:Et.includes(e)?t?bt:jt:e===m.a?t?Ot:ft:e}const kt=({rows:e,search:t={},columns:s,setupMode:a,productName:i,...o})=>{const[l,c]=r.a.useState(e.length>0);if(t.box&&!t.box["data-test-subj"]&&(t.box["data-test-subj"]="monitoringTableToolBar"),t.box&&!t.box.schema&&(t.box.schema=!0),t){const s=t.onChange;t.onChange=t=>{const a=R.EuiSearchBar.Query.execute(t.query,e,o.executeQueryOptions);return c(a.length>0),s&&s(t),!0}}const u=s.map((e=>("sortable"in e||(e.sortable=!0),e)));let d=null;return a&&ne(K.d.MetricbeatMigration)&&(d=Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiButton,{iconType:"flag",onClick:()=>a.openFlyout({},!0)},_.i18n.translate("xpack.monitoring.euiTable.setupNewButtonLabel",{defaultMessage:"Monitor another {identifier} with Metricbeat",values:{identifier:yt(i)}})))),Object(E.jsx)("div",{"data-test-subj":`${o.className}Container`},Object(E.jsx)(R.EuiInMemoryTable,U()({"data-test-subj":e.length&&!0===l?"monitoringTableHasData":"monitoringTableNoData",items:e,search:t,columns:u},o)),d)};function St({rows:e,search:t={},pagination:s,columns:a,onTableChange:i,setupMode:o,productName:l,...c}){const[u,d]=r.a.useState(""),[m,g]=r.a.useState(!1),[p,j]=r.a.useState({index:s.pageIndex,size:s.pageSize});s.totalItemCount||(s.totalItemCount=e&&e.length||0);const[b,x]=r.a.useState(c.sorting);t.box&&!t.box["data-test-subj"]&&(t.box["data-test-subj"]="monitoringTableToolBar");const h=a.map((e=>("sortable"in e||(e.sortable=!0),e)));let f=null;return o&&o.enabled&&ne(K.d.MetricbeatMigration)&&(f=Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiButton,{iconType:"flag",onClick:()=>o.openFlyout({},!0)},_.i18n.translate("xpack.monitoring.euiSSPTable.setupNewButtonLabel",{defaultMessage:"Set up monitoring for new {identifier}",values:{identifier:yt(l)}})))),Object(E.jsx)("div",{"data-test-subj":`${c.className}Container`},Object(E.jsx)(R.EuiSearchBar,U()({},t,{onChange:async({queryText:e})=>{const t={...p,index:0};j(t),d(e),c.fetchMoreData?(g(!0),await c.fetchMoreData({page:t,sort:b,queryText:e}),g(!1)):i({page:p,sort:b.sort,queryText:e})}})),Object(E.jsx)(R.EuiSpacer,{size:"l"}),Object(E.jsx)(R.EuiBasicTable,U()({},c,{"data-test-subj":e.length?"monitoringTableHasData":"monitoringTableNoData",items:e,pagination:s,onChange:async({page:e,sort:t})=>{j(e),x({sort:t}),c.fetchMoreData?(g(!0),await c.fetchMoreData({page:e,sort:{sort:t},queryText:u}),g(!1),i({page:e,sort:t})):i({page:e,sort:t,queryText:u})},columns:h,loading:c.isLoading||m})),f)}var _t=s(32);const Tt=({isSnapshot:e,repo:t,snapshot:s})=>e?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.snapshotTitle",defaultMessage:"Repo: {repo} / Snapshot: {snapshot}",values:{repo:t,snapshot:s}})):null,wt=e=>{const{name:t,shard:s,relocationType:a}=e;return Object(E.jsx)("div",null,Object(E.jsx)(R.EuiLink,{href:fe(`#/elasticsearch/indices/${t}`)},t),Object(E.jsx)("br",null),Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.recoveryIndex.shardDescription",defaultMessage:"Shard: {shard}",values:{shard:s}}),Object(E.jsx)("br",null),Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.recoveryIndex.recoveryTypeDescription",defaultMessage:"Recovery type: {relocationType}",values:{relocationType:a}}),Object(E.jsx)("div",null,Object(E.jsx)(Tt,e)))},Ct=({startTime:e,totalTime:t})=>Object(E.jsx)(R.EuiToolTip,{content:Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.totalTimeTooltip",defaultMessage:"Started: {startTime}",values:{startTime:e}}),position:"bottom"},Object(E.jsx)(R.EuiLink,null,t)),It=({isCopiedFromPrimary:e,sourceTransportAddress:t,children:s})=>{if(!t)return s;const a=Object(E.jsx)(n.Fragment,null,t,Object(E.jsx)("br",null),Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip",defaultMessage:"Copied from {copiedFrom} shard",values:{copiedFrom:e?Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip.primarySourceText",defaultMessage:"primary"}):Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip.replicaSourceText",defaultMessage:"replica"})}}));return Object(E.jsx)(R.EuiToolTip,{content:a,position:"bottom"},Object(E.jsx)(R.EuiLink,null,s))},Lt=e=>{const{sourceName:t,targetName:s,targetTransportAddress:a}=e,i=a||_.i18n.translate("xpack.monitoring.elasticsearch.shardActivity.unknownTargetAddressContent",{defaultMessage:"Unknown"});return Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s",alignItems:"center",wrap:!0},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(It,e,t)),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiIcon,{type:"arrowRight",size:"s"})),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiToolTip,{content:i,position:"bottom"},Object(E.jsx)(R.EuiLink,null,s))))},Ft=({filesPercent:e,filesDone:t,filesTotal:s})=>Object(E.jsx)(n.Fragment,null,e,Object(E.jsx)("br",null),t," / ",s),Pt=({bytesPercent:e,bytesDone:t,bytesTotal:s})=>Object(E.jsx)(n.Fragment,null,e,Object(E.jsx)("br",null),t," / ",s),Nt=({hasTranslog:e,translogPercent:t,translogDone:s,translogTotal:a})=>e?Object(E.jsx)(n.Fragment,null,t,Object(E.jsx)("br",null),s," / ",a):Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.progress.noTranslogProgressLabel",defaultMessage:"n/a"}),Dt=e=>{if(void 0!==e){const t=e.match(/([\d\.:]+)\]$/);if(t)return t[1]}return e},Rt=e=>Object($.capitalize)(e.toLowerCase()),zt=[{name:_.i18n.translate("xpack.monitoring.kibana.shardActivity.indexTitle",{defaultMessage:"Index"}),field:"name",render:(e,t)=>Object(E.jsx)(wt,t)},{name:_.i18n.translate("xpack.monitoring.kibana.shardActivity.stageTitle",{defaultMessage:"Stage"}),field:"stage"},{name:_.i18n.translate("xpack.monitoring.kibana.shardActivity.totalTimeTitle",{defaultMessage:"Total Time"}),field:null,render:e=>Object(E.jsx)(Ct,e)},{name:_.i18n.translate("xpack.monitoring.kibana.shardActivity.sourceDestinationTitle",{defaultMessage:"Source / Destination"}),field:null,render:e=>Object(E.jsx)(Lt,e)},{name:_.i18n.translate("xpack.monitoring.kibana.shardActivity.filesTitle",{defaultMessage:"Files"}),field:null,render:e=>Object(E.jsx)(Ft,e)},{name:_.i18n.translate("xpack.monitoring.kibana.shardActivity.bytesTitle",{defaultMessage:"Bytes"}),field:null,render:e=>Object(E.jsx)(Pt,e)},{name:_.i18n.translate("xpack.monitoring.kibana.shardActivity.translogTitle",{defaultMessage:"Translog"}),field:null,render:e=>Object(E.jsx)(Nt,e)}],At=e=>{var t;const{data:s,sorting:a,pagination:r,onTableChange:o,toggleShardActivityHistory:l,showShardActivityHistory:c}=e,{services:u}=Object(i.useKibana)(),d=null===(t=u.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),m=s.map((e=>(e=>{const{id:t,stage:s,index:a,index_name:i,name:n,primary:r,start_time_in_millis:o,total_time_in_millis:l,source:c,target:u,translog:d,type:m,timezone:g}=e,{files:p,size:j}=a;return{name:i||n,shard:`${t} / ${r?"Primary":"Replica"}`,relocationType:"PRIMARY_RELOCATION"===m?"Primary Relocation":Rt(m),stage:Rt(s),startTime:qe(o,g),totalTime:gt(Math.floor(l/1e3),"00:00:00"),isCopiedFromPrimary:!r||"PRIMARY_RELOCATION"===m,sourceName:void 0===c.name?"n/a":c.name,targetName:u.name,sourceTransportAddress:Dt(c.transport_address),targetTransportAddress:Dt(u.transport_address),isSnapshot:"SNAPSHOT"===m,repo:c.repository,snapshot:c.snapshot,filesPercent:p.percent,filesDone:p.reused?p.reused:p.recovered,filesTotal:p.total,bytesPercent:j.percent,bytesDone:gt(j.recovered_in_bytes+j.reused_in_bytes,"byte"),bytesTotal:gt(j.total_in_bytes,"byte"),hasTranslog:d.total>0,translogPercent:d.percent,translogDone:d.total,translogTotal:d.total_on_start}})({...e,timezone:d})));return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivityTitle",defaultMessage:"Shard Activity"})))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiSwitch,{id:"monitoring_completed_recoveries",label:Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.completedRecoveriesLabel",defaultMessage:"Completed recoveries"}),onChange:l,checked:c}),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(kt,{className:"esShardActivityTable",rows:m,columns:zt,message:c?_.i18n.translate("xpack.monitoring.elasticsearch.shardActivity.noDataMessage",{defaultMessage:"There are no historical shard activity records for the selected time range."}):Object(E.jsx)(n.Fragment,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkTextProblem",defaultMessage:"There are no active shard recoveries for this cluster."}),Object(E.jsx)("br",null),Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkTextSolution",defaultMessage:"Try viewing {shardActivityHistoryLink}.",values:{shardActivityHistoryLink:Object(E.jsx)(R.EuiLink,{onClick:l},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkText",defaultMessage:"completed recoveries"}))}})),sorting:a,search:!1,pagination:r,onTableChange:o,executeQueryOptions:{defaultFields:["name"]}}))};var Bt=s(33);function Vt(e,t){let s;return s="elasticsearch"===e?["#3ebeb0","#3b73ac","#f08656","#6c478f"]:"apm"===e?Object(Bt.euiPaletteColorBlind)():["#e8488b","#3b73ac","#3cab63","#6c478f"],s[t]?s[t]:"#000"}var Ut=s(24),$t=s.n(Ut);const Gt=$t()({});class chart_target_ChartTarget extends r.a.Component{shouldComponentUpdate(){return!this.plot}shutdownChart(){if(!this.plot)return;const{target:e}=this.refs;$t()(e).off("plothover"),$t()(e).off("mouseleave"),$t()(e).off("plotselected"),$t()(e).off("plotselecting"),this.plot.shutdown(),Gt.off("thorPlotHover"),Gt.off("thorPlotLeave"),Gt.off("thorPlotSelecting"),Gt.off("thorPlotBrush")}componentWillUnmount(){this.shutdownChart(),window.removeEventListener("resize",this._handleResize),this.componentUnmounted=!0}filterByShow(e){return e?t=>e.some((e=>e.toLowerCase()===t.id.toLowerCase())):()=>!0}UNSAFE_componentWillReceiveProps(e){if(this.plot&&!Object($.isEqual)(e,this.props)){const{series:t,timeRange:s}=e,a=this.plot.getAxes().xaxis.options;a.min=Object($.get)(s,"min"),a.max=Object($.get)(s,"max"),this.plot.setData(this.filterData(t,e.seriesToShow)),this.plot.setupGrid(),this.plot.draw()}}componentDidMount(){this.renderChart()}componentDidUpdate(){this.shutdownChart(),this.renderChart()}filterData(e,t){return Object($.filter)(e,this.filterByShow(t))}async getOptions(){return{...await async function(e){var t;const s=null===(t=v.a.shims.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),a={legend:{show:!1},xaxis:{color:m.f,timezone:"Browser"===s?"browser":"utc",mode:"time",font:{color:m.g}},yaxis:{color:m.f,font:{color:m.g}},series:{points:{show:!0,radius:1},lines:{show:!0,lineWidth:2},shadowSize:0},grid:{margin:0,borderWidth:1,borderColor:m.f,hoverable:!0},crosshair:{mode:"x",color:"#c66",lineWidth:2},selection:{mode:"x",color:m.g}};return Object($.merge)(a,e)}({yaxis:{tickFormatter:this.props.tickFormatter},xaxis:this.props.timeRange}),...this.props.options}}async renderChart(){const{target:e}=this.refs,{series:t}=this.props,s=this.filterData(t,this.props.seriesToShow);this.plot=$t.a.plot(e,s,await this.getOptions()),!this.componentUnmounted&&this.plot&&(this._handleResize=()=>{if(this.plot)try{this.plot.resize(),this.plot.setupGrid(),this.plot.draw()}catch(e){}},window.addEventListener("resize",this._handleResize,!1),this.handleMouseLeave=()=>{Gt.trigger("thorPlotLeave",[])},this.handlePlotHover=(e,t,s)=>{Gt.trigger("thorPlotHover",[t,s,this.plot])},this.handleThorPlotHover=(e,t,s,a)=>{this.plot!==a&&this.plot.setCrosshair({x:Object($.get)(t,"x")}),this.props.updateLegend(t,s)},this.handleThorPlotLeave=()=>{this.plot.clearCrosshair(),this.props.updateLegend()},this.handleThorPlotSelecting=(e,t,s)=>{if(this.plot!==s){const e=!0;this.plot.setSelection({xaxis:t},e)}},this.handleThorPlotBrush=()=>{this.plot.clearSelection()},this.selectingChart=(e,t)=>{if(t){const e=t.xaxis;Gt.trigger("thorPlotSelecting",[e,this.plot])}},this.brushChart=(e,t)=>{this.props.onBrush(t),Gt.trigger("thorPlotBrush")},$t()(e).on("plothover",this.handlePlotHover),$t()(e).on("mouseleave",this.handleMouseLeave),$t()(e).on("plotselected",this.brushChart),$t()(e).on("plotselecting",this.selectingChart),Gt.on("thorPlotHover",this.handleThorPlotHover),Gt.on("thorPlotLeave",this.handleThorPlotLeave),Gt.on("thorPlotSelecting",this.handleThorPlotSelecting),Gt.on("thorPlotBrush",this.handleThorPlotBrush))}render(){return Object(E.jsx)("div",{ref:"target",style:{position:"relative",display:"flex",rowDirection:"column",flex:"1 0 auto"}})}}function qt(e){return Object(E.jsx)("div",{style:{display:"flex",rowDirection:"column",flex:"1 0 auto",position:"relative"}},Object(E.jsx)(chart_target_ChartTarget,e))}s(60);class horizontal_legend_HorizontalLegend extends r.a.Component{constructor(){super(),this.formatter=this.formatter.bind(this),this.createSeries=this.createSeries.bind(this)}displayValue(e){return Object(E.jsx)("span",{className:"monRhythmChart__legendValue"},e)}validValue(e){return null!=e&&("string"==typeof e||!isNaN(e))}formatter(e,t){return this.validValue(e)?t&&t.tickFormatter?this.displayValue(t.tickFormatter(e)):Object($.isFunction)(this.props.tickFormatter)?this.displayValue(this.props.tickFormatter(e)):this.displayValue(e):Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.chart.horizontalLegend.notAvailableLabel",defaultMessage:"N/A"})}createSeries(e,t){const s=["monRhythmChart__legendItem"];return Object($.includes)(this.props.seriesFilter,e.id)||s.push("monRhythmChart__legendItem-isDisabled"),e.label&&!1!==e.legend?Object(E.jsx)(R.EuiFlexItem,{grow:!1,key:t},Object(E.jsx)("button",{className:s.join(" "),onClick:t=>this.props.onToggle(t,e.id)},Object(E.jsx)("span",{className:"monRhythmChart__legendLabel"},Object(E.jsx)(R.EuiIcon,{className:"monRhythmChart__legendIndicator","aria-label":_.i18n.translate("xpack.monitoring.chart.horizontalLegend.toggleButtonAriaLabel",{defaultMessage:"toggle button"}),size:"l",type:"dot",color:e.color})," "+e.label+" "),this.formatter(this.props.seriesValues[e.id],e))):Object(E.jsx)("div",{key:t,style:{display:"none"}})}render(){const e=this.props.series.map(this.createSeries);return Object(E.jsx)("div",{className:"monRhythmChart__legendHorizontal"},Object(E.jsx)(R.EuiFlexGroup,{wrap:!0,gutterSize:"s",className:"monRhythmChart__legendSeries"},e))}}function Ht(e,t,s){for(let a=0;a<e.length;a++){const i=e[a],n=i.data;let r=null;n.length>t&&n[t]&&(r=n[t][1]),s(i.id,r)}}function Wt(e,t){const s=e.length;if(1===s)return 0;if(0!==s){let a=null;e[0]&&(a=0);for(let i=1;i<s;++i)if(e[i]){if(e[i][0]>t){const s=e[i][0]-t;return null!==a&&s>Math.abs(t-e[a][0])?a:i}a=i}}return s-1}s(65);class timeseries_visualization_TimeseriesVisualization extends r.a.Component{constructor(e){super(e),this.debouncedUpdateLegend=Object($.debounce)(this.updateLegend,m.q),this.debouncedUpdateLegend=this.debouncedUpdateLegend.bind(this),this.toggleFilter=this.toggleFilter.bind(this);const t=this.getLastValues(e);this.state={values:{},seriesToShow:Object($.keys)(t),ignoreVisibilityUpdates:!1}}filterLegend(e){if(!Object($.has)(this.state.values,e))return[];const t=Object($.keys)(this.state.values).length!==this.state.seriesToShow.length,s=Object($.includes)(this.state.seriesToShow,e),a=[];return t&&s?this.setState({ignoreVisibilityUpdates:!1,seriesToShow:Object.keys(this.state.values)}):(a.push(e),this.setState({ignoreVisibilityUpdates:!0,seriesToShow:[e]})),a}toggleFilter(e,t){const s=this.filterLegend(t);Object($.isFunction)(this.props.onFilter)&&this.props.onFilter(s)}getLastValues(e){e=e||this.props;const t={};return e.series.forEach((e=>{e.id||(e.id=e.label),t[e.id]=function(e){if(Object($.isNumber)(e))return e;if(!Array.isArray(e))return null;const t=Object($.get)(Object($.last)(e),"[1]");return Object($.isNumber)(t)?t:null}(e.data)})),t}updateLegend(e,t){const s={};if(e){const a=(e,t)=>{s[e]=t};t?Ht(this.props.series,t.dataIndex,a):function(e,t,s){for(let a=0;a<e.length;a++){const i=Wt(e[a].data,t);if(-1!==i){Ht(e,i,s);break}}}(this.props.series,e.x,a)}else Object($.assign)(s,this.getLastValues());this.setState({values:s})}UNSAFE_componentWillReceiveProps(e){const t=this.getLastValues(e),s=Object($.keys)(this.state.values),a=Object($.keys)(t),i={values:t};Object($.difference)(a,s).length&&!this.state.ignoreVisibilityUpdates&&(i.seriesToShow=a),this.setState(i)}render(){const e=this.props.hasLegend?Object(E.jsx)(horizontal_legend_HorizontalLegend,U()({seriesFilter:this.state.seriesToShow,seriesValues:this.state.values,onToggle:this.toggleFilter},this.props)):null;return Object(E.jsx)("div",{className:"monRhythmChart"},Object(E.jsx)("div",{style:{flexDirection:"column"},className:"monRhythmChart__content"},Object(E.jsx)("div",{className:"monRhythmChart__visualization"},Object(E.jsx)(qt,U()({seriesToShow:this.state.seriesToShow,updateLegend:this.debouncedUpdateLegend},this.props))),e))}}function Kt({series:e,onBrush:t}){const s=e.map(((e,t)=>({color:Vt(e.metric.app,t),data:e.data,label:e.metric.label}))),a=Object($.first)(e),i=Object($.get)(a,"timeRange"),n=function(e){const t=Object($.get)(e,"metric.format","0,0.0"),s=Object($.get)(e,"metric.units","");return function(e){let a=ct()(e).format(t);return"B"!==s&&""!==s&&(a+=" "+s),a}}(a);return Object(E.jsx)(timeseries_visualization_TimeseriesVisualization,{series:s,timeRange:i,tickFormatter:n,onBrush:t})}function Jt({series:e,bucketSize:t}){const s=e.map(((e,t)=>Object(E.jsx)("tr",{key:`chart-tooltip-${t}`,"data-debug-metric-agg":e.metric.metricAgg,"data-debug-metric-field":e.metric.field,"data-debug-metric-is-derivative":e.metric.isDerivative,"data-debug-metric-has-calculation":e.metric.hasCalculation},Object(E.jsx)("td",{className:"monChart__tooltipLabel"},e.metric.label),Object(E.jsx)("td",{className:"monChart__tooltipValue"},e.metric.description))));return Object(E.jsx)("table",null,Object(E.jsx)("tbody",null,Object(E.jsx)("tr",null,Object(E.jsx)("td",{className:"monChart__tooltipLabel"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.chart.infoTooltip.intervalLabel",defaultMessage:"Interval"})),Object(E.jsx)("td",{className:"monChart__tooltipValue"},t)),s))}function Yt(e=[]){return Object($.chain)(e.map((e=>e.metric.title||e.metric.label))).first().value()}function Qt({series:e,onBrush:t,zoomInfo:s}){if(void 0===e)return null;const a=Yt(e),i=function(e=[]){return Object($.chain)(e.map((e=>Boolean(e.metric.technicalPreview)))).first().value()}(e),r=a.replace(/\s+/,"--"),o=function(e){let t=Object($.get)(e,"[0].metric.units");if("B"===t){let s=0;Object($.forEach)(e,(e=>{const t=Object($.last)(e.data)||[null,0];s=Math.max(s,t[1])})),t=ct()(s).byteUnits()}return t}(e),l=Object($.get)(Object($.first)(e),"bucket_size"),c=[_.i18n.translate("xpack.monitoring.chart.seriesScreenReaderListDescription",{defaultMessage:"Interval: {bucketSize}",values:{bucketSize:l}})].concat(e.map((e=>`${e.metric.label}: ${e.metric.description}`)));let u=null;return e.alerts&&(u=Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(tt,{alerts:e.alerts}))),Object(E.jsx)(R.EuiFlexGroup,{direction:"column",gutterSize:"s",className:"monRhythmChart__wrapper"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s",tabIndex:"0"},Object(E.jsx)("h2",null,Yt(e),o?` (${o})`:"",Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("span",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.chart.screenReaderUnaccessibleTitle",defaultMessage:"This chart is not screen reader accessible"})))))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiIconTip,{anchorClassName:"eui-textRight eui-alignMiddle monChart__tooltipTrigger",type:"iInCircle",position:"right",content:Object(E.jsx)(Jt,{series:e,bucketSize:l})}),Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("span",{id:`monitoringChart${r}`},c.join(". "))))),(e=>e?Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiBadge,{color:"hollow",iconType:"cheer"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.chart.timeSeries.technicalPreview",defaultMessage:"Technical Preview"}))):null)(i),(e=>e&&e.showZoomOutBtn()?Object(E.jsx)(R.EuiFlexItem,{className:"monRhythmChart__zoom"},Object(E.jsx)(R.EuiTextAlign,{textAlign:"right"},Object(E.jsx)(R.EuiButtonEmpty,{color:"primary",size:"s",iconType:"magnifyWithMinus",onClick:e.zoomOutHandler},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.chart.timeSeries.zoomOut",defaultMessage:"Zoom out"})))):null)(s))),u)),Object(E.jsx)(R.EuiFlexItem,{style:{minHeight:"200px"}},Object(E.jsx)(Kt,{series:e,onBrush:t})))}timeseries_visualization_TimeseriesVisualization.defaultProps={hasLegend:!0},s(70),s(75);const Xt=({children:e})=>Object(E.jsx)("span",{style:{fontFamily:"monospace"}},e),Zt=({reason:e})=>{const t=v.a.shims.docLinks.links.filebeat.installation,s=v.a.shims.docLinks.links.filebeat.elasticsearchModule,a=v.a.shims.docLinks.links.monitoring.troubleshootKibana;let i=_.i18n.translate("xpack.monitoring.logs.reason.defaultTitle",{defaultMessage:"No log data found"}),n=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.reason.defaultMessage",defaultMessage:"We did not find any log data and we are unable to diagnose why. {link}",values:{link:Object(E.jsx)(R.EuiLink,{target:"_blank",href:t},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.reason.defaultMessageLink",defaultMessage:"Please verify your setup is correct."}))}});return!1===e.indexPatternExists?(i=_.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternTitle",{defaultMessage:"No log data found"}),n=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexPatternMessage",defaultMessage:"Set up {link}, then configure your Elasticsearch output to your monitoring cluster.",values:{link:Object(E.jsx)(R.EuiLink,{target:"_blank",href:t},_.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternLink",{defaultMessage:"Filebeat"}))}})):!1===e.indexPatternInTimeRangeExists||!1===e.typeExists&&e.typeExistsAtAnyTime?(i=_.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternInTimePeriodTitle",{defaultMessage:"No logs for the selected time"}),n=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexPatternInTimePeriodMessage",defaultMessage:"Use the time filter to adjust your timeframe."})):!1===e.typeExists?(i=_.i18n.translate("xpack.monitoring.logs.reason.noTypeTitle",{defaultMessage:"No logs for Elasticsearch"}),n=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.reason.noTypeMessage",defaultMessage:"Follow {link} to set up Elasticsearch.",values:{link:Object(E.jsx)(R.EuiLink,{target:"_blank",href:s},_.i18n.translate("xpack.monitoring.logs.reason.noTypeLink",{defaultMessage:"these directions"}))}})):!1===e.usingStructuredLogs?(i=_.i18n.translate("xpack.monitoring.logs.reason.notUsingStructuredLogsTitle",{defaultMessage:"No structured logs found"}),n=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.reason.notUsingStructuredLogsMessage",defaultMessage:"Check if the {varPaths} setting {link}.",values:{varPaths:Object(E.jsx)(Xt,null,"var.paths"),link:Object(E.jsx)(R.EuiLink,{target:"_blank",href:s},_.i18n.translate("xpack.monitoring.logs.reason.notUsingStructuredLogsLink",{defaultMessage:"points to JSON logs"}))}})):!1===e.clusterExists?(i=_.i18n.translate("xpack.monitoring.logs.reason.noClusterTitle",{defaultMessage:"No logs for this cluster"}),n=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.reason.noClusterMessage",defaultMessage:"Check that your {link} is correct.",values:{link:Object(E.jsx)(R.EuiLink,{target:"_blank",href:s},_.i18n.translate("xpack.monitoring.logs.reason.noClusterLink",{defaultMessage:"setup"}))}})):!1===e.nodeExists?(i=_.i18n.translate("xpack.monitoring.logs.reason.noNodeTitle",{defaultMessage:"No logs for this Elasticsearch node"}),n=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.reason.noNodeMessage",defaultMessage:"Check that your {link} is correct.",values:{link:Object(E.jsx)(R.EuiLink,{target:"_blank",href:s},_.i18n.translate("xpack.monitoring.logs.reason.noNodeLink",{defaultMessage:"setup"}))}})):!1===e.indexExists?(i=_.i18n.translate("xpack.monitoring.logs.reason.noIndexTitle",{defaultMessage:"No logs for this index"}),n=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexMessage",defaultMessage:"We found logs, but none for this index. If this problem continues, check that your {link} is correct.",values:{link:Object(E.jsx)(R.EuiLink,{target:"_blank",href:s},_.i18n.translate("xpack.monitoring.logs.reason.noIndexLink",{defaultMessage:"setup"}))}})):!1===e.correctIndexName&&(i=_.i18n.translate("xpack.monitoring.logs.reason.correctIndexNameTitle",{defaultMessage:"Corrupted filebeat index"}),n=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.reason.correctIndexNameMessage",defaultMessage:"There is an issue reading from your filebeat indices.  {link}.",values:{link:Object(E.jsx)(R.EuiLink,{target:"_blank",href:a},_.i18n.translate("xpack.monitoring.logs.reason.correctIndexNameLink",{defaultMessage:"Click here for more information"}))}})),Object(E.jsx)(R.EuiCallOut,{title:i,color:"warning",iconType:"help"},Object(E.jsx)("p",null,n))},es=e=>{var t;return qe(e,null===(t=v.a.shims.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"))},ts=_.i18n.translate("xpack.monitoring.logs.listing.timestampTitle",{defaultMessage:"Timestamp"}),ss=_.i18n.translate("xpack.monitoring.logs.listing.levelTitle",{defaultMessage:"Level"}),as=_.i18n.translate("xpack.monitoring.logs.listing.typeTitle",{defaultMessage:"Type"}),is=_.i18n.translate("xpack.monitoring.logs.listing.messageTitle",{defaultMessage:"Message"}),ns=_.i18n.translate("xpack.monitoring.logs.listing.componentTitle",{defaultMessage:"Component"}),rs=_.i18n.translate("xpack.monitoring.logs.listing.nodeTitle",{defaultMessage:"Node"}),os=[{field:"timestamp",name:ts,width:"12%",render:e=>es(e)},{field:"level",name:ss,width:"5%"},{field:"type",name:as,width:"10%",render:e=>Object($.upperFirst)(e)},{field:"message",name:is,width:"55%"},{field:"component",name:ns,width:"18%"}],ls=[{field:"timestamp",name:ts,width:"12%",render:e=>es(e)},{field:"level",name:ss,width:"5%"},{field:"type",name:as,width:"10%",render:e=>Object($.upperFirst)(e)},{field:"message",name:is,width:"45%"},{field:"component",name:ns,width:"15%"},{field:"node",name:rs,width:"13%"}];function cs(e,t,s){const a=`${v.a.shims.getBasePath()}/app/logs/link-to/${m.A}/logs`,i=[];return e&&i.push(`elasticsearch.cluster.uuid:${e}`),t&&i.push(`elasticsearch.node.id:${t}`),s&&i.push(`elasticsearch.index.name:${s}`),0===i.length?a:`${a}?filter=${i.join(" and ")}`}class logs_Logs extends n.PureComponent{renderLogs(){const{logs:{enabled:e,logs:t},nodeId:s,indexUuid:a}=this.props;return e?Object(E.jsx)(R.EuiBasicTable,{items:t||[],columns:s||a?os:ls}):null}renderNoLogs(){const{logs:{enabled:e,reason:t}}=this.props;return e?null:Object(E.jsx)(Zt,{reason:t})}renderCallout(){const e=v.a.shims.capabilities,t=e.logs&&e.logs.show,{logs:{enabled:s},nodeId:a,clusterUuid:i,indexUuid:n}=this.props;return s&&t?Object(E.jsx)(R.EuiCallOut,{size:"m",title:_.i18n.translate("xpack.monitoring.logs.listing.calloutTitle",{defaultMessage:"Want to see more log entries?"}),iconType:"logsApp"},Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logs.listing.linkText",defaultMessage:"Visit {link} to dive deeper.",values:{link:Object(E.jsx)(R.EuiLink,{href:cs(i,a,n)},_.i18n.translate("xpack.monitoring.logs.listing.calloutLinkText",{defaultMessage:"Logs"}))}}))):null}render(){const{nodeId:e,indexUuid:t,logs:{limit:s}}=this.props;let a;return a=e?_.i18n.translate("xpack.monitoring.logs.listing.nodePageDescription",{defaultMessage:"Showing the most recent log entries for this node, up to {limit} total log entries.",values:{limit:s}}):t?_.i18n.translate("xpack.monitoring.logs.listing.indexPageDescription",{defaultMessage:"Showing the most recent log entries for this index, up to {limit} total log entries.",values:{limit:s}}):_.i18n.translate("xpack.monitoring.logs.listing.clusterPageDescription",{defaultMessage:"Showing the most recent log entries for this cluster, up to {limit} total log entries.",values:{limit:s}}),Object(E.jsx)("div",null,Object(E.jsx)(R.EuiTitle,null,Object(E.jsx)("h1",null,_.i18n.translate("xpack.monitoring.logs.listing.pageTitle",{defaultMessage:"Recent Log Entries"}))),Object(E.jsx)(R.EuiText,{size:"s"},Object(E.jsx)("p",null,a)),Object(E.jsx)(R.EuiSpacer,{size:"m"}),this.renderLogs(),this.renderNoLogs(),Object(E.jsx)(R.EuiSpacer,{size:"m"}),this.renderCallout())}}function us({clusterStatus:e,metrics:t,logs:s,cluster:a,shardActivity:i,...n}){const r=[t.cluster_search_request_rate,t.cluster_query_latency,t.cluster_index_request_rate,t.cluster_index_latency];return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(pt,{stats:e})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},r.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},n)),Object(E.jsx)(R.EuiSpacer,null)))))),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(logs_Logs,{logs:s,clusterUuid:a.cluster_uuid})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(At,U()({data:i},n)))))}const ds=_.i18n.translate("xpack.monitoring.elasticsearch.node.cells.trendingDownText",{defaultMessage:"down"}),ms=_.i18n.translate("xpack.monitoring.elasticsearch.node.cells.trendingUpText",{defaultMessage:"up"});function gs(){return Object(E.jsx)("div",{className:"monTableCell__offline"},"N/A")}const ps=e=>e||0===e?e>0?ms:ds:null,js=e=>e||0===e?e>0?"sortUp":"sortDown":null,bs=(e,t,s,a)=>s?gt(e,t,"%",{prependSpace:!1}):gt(e,t,a);function xs({isOnline:e,metric:t={},isPercent:s,...a}){const[i,r]=Object(n.useState)(!1);if(!e)return Object(E.jsx)(gs,null);const{lastVal:o,maxVal:l,minVal:c,slope:u}=Object($.get)(t,"summary",{}),d=Object($.get)(t,"metric.format"),m=Object($.get)(t,"metric.units"),g=[{title:_.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.trending",{defaultMessage:"Trending"}),description:ps(u)},{title:_.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.max",{defaultMessage:"Max value"}),description:bs(l,d,s,m)},{title:_.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.min",{defaultMessage:"Min value"}),description:bs(c,d,s,m)}],p=_.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.iconLabel",{defaultMessage:"More information about this metric"}),j=Object(E.jsx)(R.EuiButtonIcon,{color:"text",onClick:()=>r((e=>!e)),iconType:js(u),"data-test-subj":`monitoringCellIcon-${a["data-test-subj"]}`,title:p,"aria-label":p});return Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(E.jsx)(R.EuiFlexItem,{grow:!1}),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{"data-test-subj":a["data-test-subj"],gutterSize:"xs"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiPopover,{ownFocus:!0,button:j,isOpen:i,closePopover:()=>r(!1)},Object(E.jsx)("div",{"data-test-subj":`monitoringCellPopover-${a["data-test-subj"]}`},Object(E.jsx)(R.EuiDescriptionList,{type:"column",compressed:!0,listItems:g,style:{maxWidth:"150px"}}),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,{size:"xs"},_.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.preface",{defaultMessage:"Applies to current time period"}))))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiText,null,bs(o,d,s))))))}const hs=_.i18n.translate("xpack.monitoring.setupMode.clickToMonitorWithMetricbeat",{defaultMessage:"Monitor with Metricbeat"}),fs=_.i18n.translate("xpack.monitoring.setupMode.clickToDisableInternalCollection",{defaultMessage:"Disable self monitoring"}),Os=_.i18n.translate("xpack.monitoring.setupMode.usingMetricbeatCollection",{defaultMessage:"Monitored with Metricbeat"}),vs=_.i18n.translate("xpack.monitoring.setupMode.unknown",{defaultMessage:"N/A"});function Es({setupMode:e,productName:t,status:s,instance:a,clusterUuid:i}){let r=null,o=null;const l=e.data||{},c=e.meta||{},u=l.totalUniquePartiallyMigratedCount===l.totalUniqueInstanceCount;if(s.isPartiallyMigrated&&t===m.r){if(!u)return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiIcon,{type:"flag"}),"",Object(E.jsx)(R.EuiTextColor,{color:"warning",size:"xs"},_.i18n.translate("xpack.monitoring.setupMode.monitorAllNodes",{defaultMessage:"Some nodes use only self monitoring"})));o=fs,c.liveClusterUuid===i&&(r=e.shortcutToFinishMigration)}const d={};(s.isInternalCollector||s.isPartiallyMigrated||s.isNetNewUser)&&(d.onClick=r||(()=>e.openFlyout(a)));let g=null;return s.isInternalCollector?(d.onClick&&(d.onClickAriaLabel=o||hs),g=Object(E.jsx)(R.EuiBadge,U()({color:"danger",iconType:"flag"},d),o||hs)):s.isPartiallyMigrated?(d.onClick&&(d.onClickAriaLabel=o||fs),g=Object(E.jsx)(R.EuiBadge,U()({color:"warning",iconType:"flag"},d),o||fs)):s.isFullyMigrated?(d.onClick&&(d.onClickAriaLabel=o||Os),g=Object(E.jsx)(R.EuiBadge,U()({color:"primary",iconType:"flag"},d),o||Os)):s.isNetNewUser?(d.onClick&&(d.onClickAriaLabel=o||hs),g=Object(E.jsx)(R.EuiBadge,U()({color:"danger",iconType:"flag"},d),o||hs)):(d.onClick&&(d.onClickAriaLabel=o||vs),g=Object(E.jsx)(R.EuiBadge,U()({color:"danger",iconType:"flag"},d),o||vs)),g}const Ms=_.i18n.translate("xpack.monitoring.setupMode.migrateToMetricbeat",{defaultMessage:"Monitor with Metricbeat"});function ys({setupModeData:e,productName:t,customRenderer:s=null}){if(s){const{shouldRender:e,componentToRender:t}=s();if(e)return t}const a=Object($.get)(e,"detected.mightExist");return e.totalUniqueInstanceCount>0?e.totalUniqueFullyMigratedCount===e.totalUniqueInstanceCount?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCallOut,{title:_.i18n.translate("xpack.monitoring.setupMode.metricbeatAllNodes",{defaultMessage:"Metricbeat is monitoring all {identifier}.",values:{identifier:yt(t,!0)}}),color:"success",iconType:"flag"}),Object(E.jsx)(R.EuiSpacer,{size:"m"})):e.totalUniquePartiallyMigratedCount===e.totalUniqueInstanceCount?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCallOut,{title:_.i18n.translate("xpack.monitoring.setupMode.disableInternalCollectionTitle",{defaultMessage:"Disable self monitoring"}),color:"warning",iconType:"flag"},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.setupMode.disableInternalCollectionDescription",{defaultMessage:"Metricbeat is now monitoring your {product} {identifier}. Disable self monitoring to finish the migration.",values:{product:vt(t),identifier:yt(t,!0)}}))),Object(E.jsx)(R.EuiSpacer,{size:"m"})):e.totalUniqueInstanceCount>0?0===e.totalUniqueFullyMigratedCount&&0===e.totalUniquePartiallyMigratedCount?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCallOut,{title:Ms,color:"danger",iconType:"flag"},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.setupMode.migrateToMetricbeatDescription",{defaultMessage:"These {product} {identifier} are self monitored.\n                Click 'Monitor with Metricbeat' to migrate.",values:{product:vt(t),identifier:yt(t,!0)}}))),Object(E.jsx)(R.EuiSpacer,{size:"m"})):Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCallOut,{title:Ms,color:"danger",iconType:"flag"},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.setupMode.migrateSomeToMetricbeatDescription",{defaultMessage:"Some {product} {identifier} are monitored through self monitoring. Migrate to monitor with Metricbeat.",values:{product:vt(t),identifier:yt(t,!0)}}))),Object(E.jsx)(R.EuiSpacer,{size:"m"})):null:a?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCallOut,{title:_.i18n.translate("xpack.monitoring.setupMode.detectedNodeTitle",{defaultMessage:"{product} {identifier} detected",values:{product:vt(t),identifier:yt(t)}}),color:"warning",iconType:"flag"},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.setupMode.detectedNodeDescription",{defaultMessage:"Click 'Set up monitoring' below to start monitoring this {identifier}.",values:{identifier:yt(t)}}))),Object(E.jsx)(R.EuiSpacer,{size:"m"})):Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCallOut,{title:_.i18n.translate("xpack.monitoring.setupMode.noMonitoringDataFound",{defaultMessage:"No {product} {identifier} detected",values:{product:vt(t),identifier:yt(t,!0)}}),iconType:"flag"},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.setupMode.netNewUserDescription",{defaultMessage:"Click 'Set up monitoring' to start monitoring with Metricbeat."}))),Object(E.jsx)(R.EuiSpacer,{size:"m"}))}const ks=e=>t=>Object($.get)(t,[e,"summary","lastVal"]);function Ss({clusterStatus:e,showCgroupMetricsElasticsearch:t,...s}){const{sorting:a,pagination:i,onTableChange:o,clusterUuid:l,setupMode:c,alerts:u}=s,d=((e,t,s,a)=>{const i=[],n=_.i18n.translate("xpack.monitoring.elasticsearch.nodes.cpuUsageColumnTitle",{defaultMessage:"CPU Usage"});return i.push({name:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.nameColumnTitle",{defaultMessage:"Name"}),field:"name",sortable:!0,render:(e,a)=>{let i=Object(E.jsx)(R.EuiLink,{href:fe(`#/elasticsearch/nodes/${a.resolver}`),"data-test-subj":`nodeLink-${a.resolver}`},e),n=null;if(ne(K.d.MetricbeatMigration)){const r=Object($.get)(t,"data.byUuid",{})[a.resolver]||{},o={uuid:a.resolver,name:a.name};n=Object(E.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(E.jsx)(Es,{setupMode:t,status:r,instance:o,productName:m.r,clusterUuid:s})),r.isNetNewUser&&(i=e)}return Object(E.jsx)("div",null,Object(E.jsx)("div",{className:"monTableCell__name"},Object(E.jsx)(R.EuiText,{size:"m"},(e=>{const{nodeTypeLabel:t,nodeTypeClass:s}=e,a=t||_.i18n.translate("xpack.monitoring.elasticsearch.nodes.unknownNodeTypeLabel",{defaultMessage:"Unknown"}),i=s||"empty";return t?Object(E.jsx)(r.a.Fragment,null,Object(E.jsx)(R.EuiToolTip,{position:"bottom",content:a},Object(E.jsx)(R.EuiIcon,{type:i}))," ",""):null})(a),Object(E.jsx)("span",{"data-test-subj":"name"},i))),Object(E.jsx)("div",{className:"monTableCell__transportAddress"},function(e){if("string"!=typeof e)return null;const t=e.match(/inet\[[^\/]*\/([^\/\]]+)\]/);return t?t[1]:e}(a.transport_address)),n)}}),i.push({name:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts",sortable:!0,render:(e,t)=>Object(E.jsx)(st,{showBadge:!0,alerts:a,stateFilter:e=>(e.nodeId||e.nodeUuid)===t.resolver})}),i.push({name:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumnTitle",{defaultMessage:"Status"}),dataType:"boolean",field:"isOnline",sortable:!0,render:e=>{const t=e?_.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumn.onlineLabel",{defaultMessage:"Online"}):_.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumn.offlineLabel",{defaultMessage:"Offline"});return Object(E.jsx)(R.EuiToolTip,{content:t,position:"bottom",trigger:"hover"},Object(E.jsx)(R.EuiHealth,{color:e?"success":"subdued","data-test-subj":"statusIcon",alt:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.healthAltIcon",{defaultMessage:"Status: {status}",values:{status:t}})},t))}}),i.push({name:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.shardsColumnTitle",{defaultMessage:"Shards"}),dataType:"number",field:"shardCount",sortable:!0,render:(e,t)=>t.isOnline?Object(E.jsx)("span",{"data-test-subj":"shards"},e):Object(E.jsx)(gs,null)}),e?(i.push({name:n,dataType:"number",field:"node_cgroup_quota",sortable:ks("node_cgroup_quota"),render:(e,t)=>Object(E.jsx)(xs,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"cpuQuota"})}),i.push({name:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.cpuThrottlingColumnTitle",{defaultMessage:"CPU Throttling"}),dataType:"number",field:"node_cgroup_throttled",sortable:ks("node_cgroup_throttled"),render:(e,t)=>Object(E.jsx)(xs,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"cpuThrottled"})})):(i.push({name:n,dataType:"number",field:"node_cpu_utilization",sortable:ks("node_cpu_utilization"),render:(e,t)=>Object(E.jsx)(xs,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"cpuUsage"})}),i.push({name:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.loadAverageColumnTitle",{defaultMessage:"Load Average"}),dataType:"number",field:"node_load_average",sortable:ks("node_load_average"),render:(e,t)=>Object(E.jsx)(xs,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"loadAverage"})})),i.push({name:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.jvmMemoryColumnTitle",{defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}}),dataType:"number",field:"node_jvm_mem_percent",sortable:ks("node_jvm_mem_percent"),render:(e,t)=>Object(E.jsx)(xs,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"jvmMemory"})}),i.push({name:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.diskFreeSpaceColumnTitle",{defaultMessage:"Disk Free Space"}),dataType:"number",field:"node_free_space",sortable:ks("node_free_space"),render:(e,t)=>Object(E.jsx)(xs,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"diskFreeSpace"})}),i})(t,c,l,u),g=s.nodes||[];if(c&&c.enabled&&ne(K.d.MetricbeatMigration)){const e=g.reduce(((e,t)=>({...e,[t.id||t.resolver]:t})),{});g.push(...Object.entries(c.data.byUuid).reduce(((t,[s,a])=>(!e[s]&&a.node&&t.push(a.node),t)),[]))}let p=null;return ne(K.d.MetricbeatMigration)&&(p=Object(E.jsx)(ys,{setupModeData:c.data,useNodeIdentifier:!0,productName:m.r,customRenderer:()=>{const e={shouldRender:!1,componentToRender:null},t=0===c.data.totalUniqueInstanceCount,s=0===c.data.totalUniqueInternallyCollectedCount&&0===c.data.totalUniqueFullyMigratedCount&&0===c.data.totalUniquePartiallyMigratedCount;if(t||s)e.shouldRender=!0,e.componentToRender=Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCallOut,{title:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.detectedNodeTitle",{defaultMessage:"Elasticsearch node detected"}),color:c.data.totalUniqueInstanceCount>0?"danger":"warning",iconType:"flag"},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.detectedNodeDescription",{defaultMessage:"The following nodes are not monitored. Click 'Monitor with Metricbeat' below to start monitoring."}))),Object(E.jsx)(R.EuiSpacer,{size:"m"}));else if(c.data.totalUniquePartiallyMigratedCount===c.data.totalUniqueInstanceCount){const t=Object($.get)(c.meta,"liveClusterUuid")===l?c.shortcutToFinishMigration:c.openFlyout;e.shouldRender=!0,e.componentToRender=Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCallOut,{title:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionTitle",{defaultMessage:"Metricbeat is now monitoring your Elasticsearch nodes"}),color:"warning",iconType:"flag"},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionDescription",{defaultMessage:"Disable self monitoring to finish the migration."})),Object(E.jsx)(R.EuiButton,{onClick:t,size:"s",color:"warning",fill:!0},_.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionMigrationButtonLabel",{defaultMessage:"Disable self monitoring"}))),Object(E.jsx)(R.EuiSpacer,{size:"m"}))}return e}})),Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.nodes.heading",defaultMessage:"Elasticsearch nodes"}))),e?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(pt,{stats:e,alerts:u})),Object(E.jsx)(R.EuiSpacer,{size:"m"})):null,p,Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(St,U()({className:"elasticsearchNodesTable",rows:g,columns:d,sorting:a,pagination:i,setupMode:c,productName:m.r,search:{box:{incremental:!0,placeholder:_.i18n.translate("xpack.monitoring.elasticsearch.nodes.monitoringTablePlaceholder",{defaultMessage:"Filter Nodes"})}},onTableChange:o},s)))))}function _s({isOnline:e,status:t}){const s=e?we.GREEN:we.GRAY;return Object(E.jsx)(Ie,{type:s,label:_.i18n.translate("xpack.monitoring.elasticsearch.node.statusIconLabel",{defaultMessage:"Status: {status}",values:{status:t}})})}function Ts({stats:e,alerts:t={}}){const{transport_address:s,usedHeap:a,freeSpace:i,totalSpace:r,documents:o,dataSize:l,indexCount:c,totalShards:u,nodeTypeLabel:d,status:m,isOnline:g}=e,p=i/r*100,j=[{label:_.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.alerts",{defaultMessage:"Alerts"}),value:Object(E.jsx)(st,{alerts:t,showOnlyCount:!0})},{label:_.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.transportAddress",{defaultMessage:"Transport Address"}),value:s,"data-test-subj":"transportAddress"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.jvmHeapLabel",{defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}}),value:gt(a,"0,0.[00]","%",{prependSpace:!1}),"data-test-subj":"jvmHeap"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.freeDiskSpaceLabel",{defaultMessage:"Free Disk Space"}),value:gt(i,"0.0 b")+" ("+gt(p,"0,0.[00]","%",{prependSpace:!1})+")","data-test-subj":"freeDiskSpace"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.documentsLabel",{defaultMessage:"Documents"}),value:gt(o,"0.[0]a"),"data-test-subj":"documentCount"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.dataLabel",{defaultMessage:"Data"}),value:gt(l,"0.0 b"),"data-test-subj":"dataSize"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.indicesLabel",{defaultMessage:"Indices"}),value:gt(c,"int_commas"),"data-test-subj":"indicesCount"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.shardsLabel",{defaultMessage:"Shards"}),value:gt(u,"int_commas"),"data-test-subj":"shardsCount"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.typeLabel",{defaultMessage:"Type"}),value:d,"data-test-subj":"nodeType"}];return Object(E.jsx)(rt,{metrics:j,status:m,isOnline:g,IconComponent:({status:e,isOnline:t})=>Object(E.jsx)(n.Fragment,null,Object(E.jsx)(_s,{status:e,isOnline:t})),"data-test-subj":"elasticsearchNodeDetailStatus"})}const ws=e=>{const{alerts:t}=e;if(ie(r.a.useContext(Le)))return null;const s=Object.values(t).flat().map((e=>e.states.map((t=>({alert:e,state:t}))))).flat();if(0===s.length)return null;const a=s.map(((e,t)=>{const a=Object(E.jsx)("div",null,Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiIcon,{type:"alert",size:"m",color:"danger"})),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiTextColor,{color:"danger"},De(e.state.state.ui.message))))),{code:i}=e.state.state.ui.message,n=Object(E.jsx)(R.EuiAccordion,{id:`monitoringAlertCallout_${t}`,buttonContent:a,paddingSize:"s"},null!=i&&i.length?Object(E.jsx)(R.EuiCodeBlock,{fontSize:"s",paddingSize:"s",language:"json",isCopyable:!0,overflowHeight:300},i):null,Object(E.jsx)(R.EuiListGroup,{flush:!0,bordered:!0,gutterSize:"m",size:"xs",style:{marginTop:"0.5rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"0.5rem"}},(e.state.state.ui.message.nextSteps||[]).map(((e,s)=>Object(E.jsx)(R.EuiListGroupItem,{onClick:()=>{},label:De(e),key:t+s}))),Object(E.jsx)(R.EuiListGroupItem,{label:Object(E.jsx)(ze,{alert:e.alert.sanitizedRule,key:t,compressed:!0})}))),r=t!==s.length-1?Object(E.jsx)(R.EuiSpacer,null):null;return Object(E.jsx)("div",{key:t},n,r)}));return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiPanel,null,a),Object(E.jsx)(R.EuiSpacer,null))};s(80);class table_head_IndexLabel extends r.a.Component{constructor(e){super(e),this.state={showSystemIndices:e.showSystemIndices},this.toggleShowSystemIndicesState=this.toggleShowSystemIndicesState.bind(this)}toggleShowSystemIndicesState(e){const t=e.target.checked;this.setState({showSystemIndices:t}),this.props.toggleShowSystemIndices(t)}render(){return Object(E.jsx)(R.EuiFlexGroup,null,Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.tableHead.indicesLabel",defaultMessage:"Indices"})),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiSwitch,{label:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.tableHead.filterSystemIndices",{defaultMessage:"Filter for system indices"}),onChange:this.toggleShowSystemIndicesState,checked:this.state.showSystemIndices,"data-test-subj":"shardShowSystemIndices"})))}}class table_head_TableHead extends r.a.Component{constructor(e){super(e)}createColumn({key:e,content:t}){return Object(E.jsx)("th",{scope:"col",key:e,colSpan:1},t)}render(){const e=(this.props.labels||[]).map((e=>{const t={key:e.content.toLowerCase()};return e.showToggleSystemIndicesComponent?t.content=Object(E.jsx)(table_head_IndexLabel,{toggleShowSystemIndices:this.props.toggleShowSystemIndices,showSystemIndices:this.props.showSystemIndices}):t.content=e.content,t})).map(this.createColumn);return Object(E.jsx)("thead",null,Object(E.jsx)("tr",null,e))}}function Cs(e,t){const s=[e.type];return t&&s.push(t),"shard"===e.type&&(s.push("monShard"),Object($.get)(e,"shard.primary",e.primary)?s.push("primary"):s.push("replica"),s.push(Object($.get)(e,"shard.state",e.state).toLowerCase()),"UNASSIGNED"===Object($.get)(e,"shard.state",e.state)&&Object($.get)(e,"shard.primary",e.primary)&&s.push("emergency")),e.master&&s.push("master"),s.join(" ")}const Is={};class shard_Shard extends r.a.Component{constructor(...e){super(...e),x()(this,"state",{tooltipVisible:!1}),x()(this,"generateKey",(e=>{const t=this.props.shard,s=Object($.get)(t,"shard.primary",t.primary)?"primary":"replica",a="UNASSIGNED"===Object($.get)(t,"shard.state",t.state)?Math.random():"",i=e?Object($.get)(t,"relocation_node.uuid",t.relocating_node):Object($.get)(t,"shard.name",t.node);return t.index+"."+i+"."+s+"."+t.shard+a})),x()(this,"toggle",(e=>{if(this.props.shard.tooltip_message){const t="mouseenter"===e.type?"show":"hide",s=this.generateKey(!0);this.setState({tooltipVisible:"show"===t}),function(){const e=Array.prototype.slice.call(arguments),t=e.shift();Is[t]&&Object($.each)(Is[t],(function(t){t.apply(null,e)}))}(s,t)}}))}componentDidMount(){let e;const t=this.props.shard,s=this;var a,i;t.tooltip_message&&(e=this.generateKey(),a=e,i=function(e){s.setState({tooltipVisible:"show"===e})},Object($.isArray)(Is[a])||(Is[a]=[]),Is[a].push(i))}componentWillUnmount(){let e;this.props.shard.tooltip_message&&(e=this.generateKey(),delete Is[e])}render(){const e=this.props.shard,t=Cs(e),s=function(e){const t=e.split(" ");return t.includes("emergency")?"danger":t.includes("unassigned")?t.includes("replica")?"warning":"danger":t.includes("relocating")?"accent":t.includes("initializing")?"default":t.includes("primary")?"primary":t.includes("replica")?"success":void 0}(t),a=t+" "+Object($.get)(e,"shard.number",e.shard);let i=Object(E.jsx)(R.EuiBadge,{color:s},Object($.get)(e,"shard.number",e.shard));const n=e.tooltip_message||_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.shardDisplayName",{defaultMessage:"Shard"});return this.state.tooltipVisible&&(i=Object(E.jsx)(R.EuiToolTip,{content:n,position:"bottom","data-test-subj":"shardTooltip"},Object(E.jsx)("p",null,i))),Object(E.jsx)("div",{onMouseEnter:this.toggle,onMouseLeave:this.toggle,className:t,"data-shard-tooltip":n,"data-shard-classification":a,"data-test-subj":"shardIcon"},i)}}x()(shard_Shard,"displayName",_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.shardDisplayName",{defaultMessage:"Shard"}));class unassigned_Unassigned extends r.a.Component{constructor(...e){super(...e),x()(this,"createShard",(e=>{const t=e.primary?"primary":"replica",s="UNASSIGNED"===e.state?Math.random():"",a=e.index+"."+e.node+"."+t+"."+e.state+"."+e.shard+s;return Object(E.jsx)(shard_Shard,{shard:e,key:a})}))}render(){const e=Object($.sortBy)(this.props.shards,"shard").map(this.createShard);return Object(E.jsx)("td",{className:"monUnassigned","data-test-subj":"clusterView-Unassigned"},Object(E.jsx)(R.EuiFlexGroup,{wrap:!0,className:"monUnassigned__children"},e))}}x()(unassigned_Unassigned,"displayName",_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedDisplayName",{defaultMessage:"Unassigned"}));const Ls=e=>{let t="indices",s=e.name;return"node"===e.type&&(t="nodes",s=e.id),fe(`#/elasticsearch/${t}/${s}`)};function Fs(e){return"node"===e.type?[!e.master,e.name]:[e.name]}class assigned_Assigned extends r.a.Component{constructor(...e){super(...e),x()(this,"createShard",(e=>{const t=Object($.get)(e,"shard.primary",e.primary)?"primary":"replica",s=`${Object($.get)(e,"index.name",e.index)}.${Object($.get)(e,"node.name",e.node)}.${t}.${Object($.get)(e,"shard.state",e.state)}.${Object($.get)(e,"shard.number",e.shard)}`;return Object(E.jsx)(shard_Shard,{shard:e,key:s})})),x()(this,"createChild",(e=>{const t=e.id,s=["monChild"];"index"===e.type&&s.push("monChild--index");const a=Object($.get)(this.props.shardStats.indices,t);if(a)switch(a.status){case"red":s.push("monChild--danger");break;case"yellow":s.push("monChild--warning")}const i=Object(E.jsx)(R.EuiLink,{href:Ls(e)},e.name),n="master"===e.node_type?Object(E.jsx)(R.EuiIcon,{type:"starFilledSpace",color:"primary"}):null,r=Object($.sortBy)(e.children,"shard").map(this.createShard);return Object(E.jsx)(R.EuiFlexItem,{grow:!1,className:Cs(e,s.join(" ")),key:t,"data-test-subj":`clusterView-Assigned-${t}`,"data-status":a&&a.status},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"xs"},Object(E.jsx)(R.EuiFlexItem,{grow:!1,className:"monChild__title eui-textNoWrap"},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"xs"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},i),Object(E.jsx)(R.EuiFlexItem,{grow:!1},n))),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s"},r))))}))}render(){const e=Object($.sortBy)(this.props.data,Fs).map(this.createChild);return Object(E.jsx)("td",{className:"monAssigned"},Object(E.jsx)(R.EuiFlexGroup,{wrap:!0,className:"monAssigned__children"},e))}}const Ps=e=>{let t;return e.data.unassigned&&e.data.unassigned.length?t=Object(E.jsx)(unassigned_Unassigned,{shards:e.data.unassigned}):3===e.cols&&(t=Object(E.jsx)("td",null)),Object(E.jsx)("tr",null,t,Object(E.jsx)(assigned_Assigned,{shardStats:e.shardStats,data:e.data.children}))};class table_body_TableBody extends r.a.Component{constructor(...e){super(...e),x()(this,"createRow",((e,t)=>Object(E.jsx)(Ps,U()({key:`shardRow-${t}`,data:e},this.props))))}render(){return 0===this.props.totalCount?Object(E.jsx)("tbody",null,Object(E.jsx)("tr",null,Object(E.jsx)("td",{colSpan:this.props.cols},Object(E.jsx)("div",null,Object(E.jsx)("p",{style:{margin:"10px 0"},className:"text-center lead"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.tableBody.noShardsAllocatedDescription",defaultMessage:"There are no shards allocated."})))))):this.props.shardStats&&this.props.rows.length?Object(E.jsx)("tbody",null,this.props.rows.map(this.createRow)):Object(E.jsx)("tbody",null,Object(E.jsx)("tr",null,Object(E.jsx)("td",{colSpan:this.props.cols})))}}x()(table_body_TableBody,"displayName",_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.tableBodyDisplayName",{defaultMessage:"TableBody"}));const Ns=e=>Object(E.jsx)("table",{cellPadding:"0",cellSpacing:"0",className:"table"},Object(E.jsx)(table_head_TableHead,{labels:e.labels,toggleShowSystemIndices:e.toggleShowSystemIndices,showSystemIndices:e.showSystemIndices}),Object(E.jsx)(table_body_TableBody,{filter:e.filter,totalCount:e.totalCount,rows:e.nodesByIndices,cols:e.labels.length,shardStats:e.shardStats})),Ds=e=>{const t=[{label:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.primaryLabel",{defaultMessage:"Primary"}),color:"primary"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.replicaLabel",{defaultMessage:"Replica"}),color:"success"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.relocatingLabel",{defaultMessage:"Relocating"}),color:"accent"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.initializingLabel",{defaultMessage:"Initializing"}),color:"default"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedPrimaryLabel",{defaultMessage:"Unassigned Primary"}),color:"danger"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedReplicaLabel",{defaultMessage:"Unassigned Replica"}),color:"warning"}];return Object(E.jsx)("div",{className:"monCluster"},Object(E.jsx)(R.EuiTitle,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.shardLegendTitle",defaultMessage:"Shard Legend"}))),Object(E.jsx)(R.EuiSpacer,{size:"xs"}),Object(E.jsx)(R.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"s"},t.map((e=>Object(E.jsx)(R.EuiFlexItem,{grow:!1,key:e.label},Object(E.jsx)(R.EuiBadge,{color:e.color},e.label))))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(Ns,e))},Rs=({nodeSummary:e,metrics:t,logs:s,alerts:a,nodeId:i,clusterUuid:n,...r})=>{const o=[t.node_jvm_mem,t.node_total_io,t.node_cpu_metric,t.node_load_average,t.node_latency,t.node_segment_count];return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.node.heading",defaultMessage:"Elasticsearch node"}))),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Ts,{stats:e,alerts:a})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(ws,{alerts:a}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},o.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},r)),Object(E.jsx)(R.EuiSpacer,null)))))),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(logs_Logs,{logs:s,nodeId:i,clusterUuid:n})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Ds,r))))};s(85);const zs=e=>[{name:_.i18n.translate("xpack.monitoring.elasticsearch.indices.nameTitle",{defaultMessage:"Name"}),field:"name",width:"350px",sortable:!0,render:e=>Object(E.jsx)("div",{"data-test-subj":"name"},Object(E.jsx)(R.EuiLink,{href:fe(`#/elasticsearch/indices/${e}`),"data-test-subj":`indexLink-${e}`},e))},{name:_.i18n.translate("xpack.monitoring.elasticsearch.indices.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts",sortable:!0,render:(t,s)=>Object(E.jsx)(st,{showBadge:!0,alerts:e,stateFilter:e=>e.meta.shardIndex===s.name})},{name:_.i18n.translate("xpack.monitoring.elasticsearch.indices.statusTitle",{defaultMessage:"Status"}),field:"status",sortable:!0,render:e=>Object(E.jsx)("div",{className:"monElasticsearchIndicesTable__status",title:`Index status: ${e}`},Object(E.jsx)(ot,{status:e}),"",Object($.capitalize)(e))},{name:_.i18n.translate("xpack.monitoring.elasticsearch.indices.documentCountTitle",{defaultMessage:"Document Count"}),field:"doc_count",sortable:!0,render:e=>Object(E.jsx)("div",{"data-test-subj":"documentCount"},gt(e,Ge))},{name:_.i18n.translate("xpack.monitoring.elasticsearch.indices.dataTitle",{defaultMessage:"Data"}),field:"data_size",sortable:!0,render:e=>Object(E.jsx)("div",{"data-test-subj":"dataSize"},gt(e,$e))},{name:_.i18n.translate("xpack.monitoring.elasticsearch.indices.indexRateTitle",{defaultMessage:"Index Rate"}),field:"index_rate",sortable:!0,render:e=>Object(E.jsx)("div",{"data-test-subj":"indexRate"},gt(e,Ue,"/s"))},{name:_.i18n.translate("xpack.monitoring.elasticsearch.indices.searchRateTitle",{defaultMessage:"Search Rate"}),field:"search_rate",sortable:!0,render:e=>Object(E.jsx)("div",{"data-test-subj":"searchRate"},gt(e,Ue,"/s"))},{name:_.i18n.translate("xpack.monitoring.elasticsearch.indices.unassignedShardsTitle",{defaultMessage:"Unassigned Shards"}),field:"unassigned_shards",sortable:!0,render:e=>Object(E.jsx)("div",{"data-test-subj":"unassignedShards"},gt(e,"0"))}],As=({clusterStatus:e,indices:t,sorting:s,pagination:a,onTableChange:i,toggleShowSystemIndices:n,showSystemIndices:r,alerts:o})=>Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.heading",defaultMessage:"Elasticsearch indices"}))),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(pt,{stats:e,alerts:o})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiSwitch,{label:Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.systemIndicesLabel",defaultMessage:"Filter for system indices"}),checked:r,onChange:e=>n(e.target.checked)}),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(kt,{className:"elasticsearchIndicesTable",rows:t,columns:zs(o),sorting:s,pagination:a,message:Object(E.jsx)("div",null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.noIndicesMatchYourSelectionDescription",defaultMessage:"There are no indices that match your selections. Try changing the time range selection."})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.howToShowSystemIndicesDescription",defaultMessage:"If you are looking for system indices (e.g., .kibana), try checking Show system indices."}))),search:{box:{incremental:!0,placeholder:_.i18n.translate("xpack.monitoring.elasticsearch.indices.monitoringTablePlaceholder",{defaultMessage:"Filter Indices"})}},onTableChange:i,executeQueryOptions:{defaultFields:["name"]}}))));function Bs({status:e}){const t=(()=>{const t=e.toUpperCase();return"OPENED"===t?we.GREEN:"CLOSED"===t?we.GRAY:"FAILED"===t?we.RED:we.YELLOW})();return Object(E.jsx)(Ie,{type:t,label:_.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.statusIconLabel",{defaultMessage:"Job Status: {status}",values:{status:e}})})}const Vs=({clusterStatus:e,jobs:t,sorting:s,pagination:a,onTableChange:i})=>Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(pt,{stats:e})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(kt,{className:"mlJobsTable",rows:t,columns:Us,sorting:{...s,sort:{...s.sort,field:"job_id"}},pagination:a,message:_.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.noJobsDescription",{defaultMessage:"There are no Machine Learning Jobs that match your query. Try changing the time range selection."}),search:{box:{incremental:!0,placeholder:_.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.filterJobsPlaceholder",{defaultMessage:"Filter Jobs"})}},onTableChange:i,executeQueryOptions:{defaultFields:["job_id"]}})))),Us=[{name:_.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.jobIdTitle",{defaultMessage:"Job ID"}),field:"job_id",sortable:!0},{name:_.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.stateTitle",{defaultMessage:"State"}),field:"state",sortable:!0,render:e=>Object(E.jsx)("div",null,Object(E.jsx)(Bs,{status:e}),"",Object($.capitalize)(e))},{name:_.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.processedRecordsTitle",{defaultMessage:"Processed Records"}),field:"data_counts.processed_record_count",sortable:!0,render:e=>Object(E.jsx)("span",null,ct()(e).format(Ge))},{name:_.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.modelSizeTitle",{defaultMessage:"Model Size"}),field:"model_size_stats.model_bytes",sortable:!0,render:e=>Object(E.jsx)("span",null,ct()(e).format($e))},{name:_.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.forecastsTitle",{defaultMessage:"Forecasts"}),field:"forecasts_stats.total",sortable:!0,render:e=>Object(E.jsx)("span",null,ct()(e).format(Ge))},{name:_.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.nodeTitle",{defaultMessage:"Node"}),field:"node.name",sortable:!0,render:(e,t)=>t.node?"id"in t.node?Object(E.jsx)(R.EuiLink,{href:fe(`#/elasticsearch/nodes/${t.node.id}`)},e):Object(E.jsx)("span",null,e):Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.mlJobListing.noDataLabel",defaultMessage:"N/A"})}],$s=G.a.has;function Gs(e,t=""){let s="";t&&(s+=t+": ");const a=(e=>{const t=(e=>G.a.get(e,"resp.error.root_cause"))(e);if(Array.isArray(t))return t.map((e=>e.reason)).join("\n")})(e);return"string"==typeof e?s+=e:a?s+=a:e instanceof Error?s+=Gs.describeError(e):$s(e,"status")&&$s(e,"data")&&(-1===e.status?s+=_.i18n.translate("xpack.monitoring.formatMsg.toaster.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. Please check if the Kibana server is running and that your browser has a working connection, or contact your system administrator."}):s+=_.i18n.translate("xpack.monitoring.formatMsg.toaster.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:e.status,errStatusText:e.statusText,errMessage:e.data.message}})),s}function qs(e){var t,s,a,i;return null!==(t=e.response)&&void 0!==t&&t.status&&-1!==(null===(s=e.response)||void 0===s?void 0:s.status)?Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,null===(a=e.body)||void 0===a?void 0:a.message),Object(E.jsx)(R.EuiText,{size:"xs"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.httpErrorMessage",defaultMessage:"HTTP {errStatus}",values:{errStatus:null===(i=e.response)||void 0===i?void 0:i.status}}))):Gs(e)}Gs.describeError=function(e){if(e)return e.shortMessage?e.shortMessage:e.body&&e.body.message?e.body.message:e.message?e.message:""+e};const Hs=()=>{var e;const{services:t}=Object(i.useKibana)(),s=Object(c.useHistory)();return Object(n.useCallback)((e=>{var a,n;if(403===(null===(a=e.response)||void 0===a?void 0:a.status))s.push("/access-denied");else if(404!==(null===(n=e.response)||void 0===n?void 0:n.status)||Object($.includes)(window.location.hash,"no-data")){var r,o;null===(r=t.notifications)||void 0===r||r.toasts.addDanger({title:_.i18n.translate("xpack.monitoring.ajaxErrorHandler.requestErrorNotificationTitle",{defaultMessage:"Monitoring Request Error"}),text:Object(i.toMountPoint)(qs(e),{theme$:null===(o=t.theme)||void 0===o?void 0:o.theme$})})}else{var l,c;const s=qs(e);null===(l=t.notifications)||void 0===l||l.toasts.addDanger({title:_.i18n.translate("xpack.monitoring.ajaxErrorHandler.requestFailedNotificationTitle",{defaultMessage:"Monitoring Request Failed"}),text:Object(i.toMountPoint)(Object(E.jsx)("div",null,s,Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiButton,{size:"s",color:"danger",onClick:()=>window.location.reload()},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.requestFailedNotification.retryButtonLabel",defaultMessage:"Retry"}))),{theme$:null===(c=t.theme)||void 0===c?void 0:c.theme$})})}}),[s,null===(e=t.notifications)||void 0===e?void 0:e.toasts,t.theme])},Ws=()=>{const{services:e}=Object(i.useKibana)(),t=Hs();return{shouldShowAlertsModal:function(e){const t="true"===window.sessionStorage.getItem("ALERTS_MODAL_HAS_BEEN_SHOWN"),s="true"===window.localStorage.getItem("ALERTS_MODAL_DECISION_MADE");return Object.keys(e).length>0?(window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true"),!1):!t&&!s},enableAlerts:async function(){try{var s,a;if(null===(s=e.http)||void 0===s||!s.post)throw new Error("HTTP service is unavailable");const t=await e.http.post("../api/monitoring/v1/alerts/enable",{});window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true"),((e,t)=>{const{isSufficientlySecure:s,hasPermanentEncryptionKey:a,disabledWatcherClusterAlerts:n}=e;!1===s||!1===a?(e=>{const t=v.a.shims.docLinks.links.alerting.generalSettings;v.a.shims.toastNotifications.addWarning({title:_.i18n.translate("xpack.monitoring.healthCheck.tlsAndEncryptionErrorTitle",{defaultMessage:"Additional setup required"}),text:Object(i.toMountPoint)(Object(E.jsx)("div",null,Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.healthCheck.tlsAndEncryptionError",{defaultMessage:"Stack Monitoring rules require API keys to be enabled and an encryption key to be configured."})),Object(E.jsx)(R.EuiSpacer,{size:"xs"}),Object(E.jsx)(R.EuiLink,{href:t,external:!0,target:"_blank"},_.i18n.translate("xpack.monitoring.healthCheck.encryptionErrorAction",{defaultMessage:"Learn how."}))),{theme$:e})})})(t):!1===n?(e=>{const t=v.a.shims.docLinks.links.alerting.generalSettings;v.a.shims.toastNotifications.addWarning({title:_.i18n.translate("xpack.monitoring.healthCheck.unableToDisableWatches.title",{defaultMessage:"Legacy cluster alerts still active"}),text:Object(i.toMountPoint)(Object(E.jsx)("div",null,Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.healthCheck.unableToDisableWatches.text",{defaultMessage:"We failed to remove legacy cluster alerts. Please check the Kibana server log for more details, or try again later."})),Object(E.jsx)(R.EuiSpacer,{size:"xs"}),Object(E.jsx)(R.EuiLink,{href:t,external:!0,target:"_blank"},_.i18n.translate("xpack.monitoring.healthCheck.unableToDisableWatches.action",{defaultMessage:"Learn more."}))),{theme$:e})})})(t):!0===n&&v.a.shims.toastNotifications.addWarning({title:_.i18n.translate("xpack.monitoring.healthCheck.disabledWatches.title",{defaultMessage:"New alerts created"}),text:_.i18n.translate("xpack.monitoring.healthCheck.disabledWatches.text",{defaultMessage:"Review the alert definition using Setup mode and configure additional action connectors to get notified via your favorite method."}),"data-test-subj":"alertsCreatedToast"})})(t,null===(a=e.theme)||void 0===a?void 0:a.theme$)}catch(e){await t(e)}},notAskAgain:function(){window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true")},hideModalForSession:function(){window.sessionStorage.setItem("ALERTS_MODAL_HAS_BEEN_SHOWN","true")}}},Ks=()=>{const e=Ws(),{navigateToApp:t}=Object(i.useKibana)().services.application,[s,a]=Object(n.useState)(!1),r=()=>{a(!1)},o=Object(E.jsx)(R.EuiButtonEmpty,{iconSide:"right",iconType:"arrowDown",onClick:()=>{a(!s)}},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.dropdown.button",defaultMessage:"Alerts and rules"})),l=[{name:_.i18n.translate("xpack.monitoring.alerts.dropdown.createAlerts",{defaultMessage:"Create default rules"}),onClick:()=>{e.enableAlerts(),r()}},{name:_.i18n.translate("xpack.monitoring.alerts.dropdown.manageRules",{defaultMessage:"Manage rules"}),icon:"tableOfContents",onClick:()=>t("management",{path:"/insightsAndAlerting/triggersActions/rules"})}],c=[{id:0,title:_.i18n.translate("xpack.monitoring.alerts.dropdown.title",{defaultMessage:"Alerts and rules"}),items:l}];return Object(E.jsx)(R.EuiPopover,{panelPaddingSize:"none",anchorPosition:"downLeft",button:o,isOpen:s,closePopover:r},Object(E.jsx)(R.EuiContextMenu,{initialPanelId:0,panels:c}))};function Js({exitSetupMode:e}){return Object(E.jsx)(R.EuiButton,{color:"danger",fill:!0,iconType:"flag",iconSide:"right",size:"s",onClick:e,"data-test-subj":"exitSetupModeBtn"},_.i18n.translate("xpack.monitoring.setupMode.exit",{defaultMessage:"Exit setup mode"}))}const Ys=e=>{const[t,s]=r.a.useState(!1),a=Object(q.useUiTracker)({app:"stack_monitoring"});function i(t,i){s(!0),e.toggleSetupMode(t),a({metric:`${m.ab}setupmode_${i}`,metricType:q.METRIC_TYPE.CLICK}),s(!1)}return e.enabled?Object(E.jsx)(Js,{exitSetupMode:()=>i(!1,"exit")}):Object(E.jsx)(R.EuiButton,{onClick:()=>i(!0,"enter"),iconType:"flag",size:"s",iconSide:"right",isLoading:t,"data-test-subj":"monitoringSetupModeBtn"},_.i18n.translate("xpack.monitoring.setupMode.enter",{defaultMessage:"Enter setup mode"}))},Qs=({title:e,pageTitle:t,tabs:s,getPageData:a,product:r,children:o})=>{!function(e,t){var s;const{services:a}=Object(i.useKibana)();let n=Object($.get)("","cluster_name");n=n?`- ${n}`:"",t=t?`- ${t}`:"",null===(s=a.chrome)||void 0===s||s.docTitle.change(_.i18n.translate("xpack.monitoring.stackMonitoringDocTitle",{defaultMessage:"Stack Monitoring {clusterName} {suffix}",values:{clusterName:n,suffix:t}}))}(0,e);const{currentTimerange:l}=N(),[u,d]=Object(n.useState)(!1),[m,g]=Object(n.useState)(!1),p=Object(c.useHistory)(),[j,b]=Object(n.useState)(!1),x=Hs(),{setHeaderActionMenu:h,theme$:f}=Object(n.useContext)(S),O=Object(n.useCallback)((e=>(b(!1),e)),[b]);Object(n.useEffect)((()=>{g(!0),null==a||a().then(O).catch((e=>{x(e),b(!0)})).finally((()=>{d(!0),g(!1)}))}),[a,l,O,x]);const v=e=>p.location.pathname===e,{supported:M,enabled:y}=Z();return Object(E.jsx)(R.EuiPage,{"data-test-subj":"monitoringAppContainer"},Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPageContent_Deprecated,null,h&&f&&Object(E.jsx)(q.HeaderMenuPortal,{setHeaderActionMenu:h,theme$:f},M&&Object(E.jsx)(Ys,{enabled:y,toggleSetupMode:se}),Object(E.jsx)(Ks,null)),Object(E.jsx)(W,{pageTitle:t,onRefresh:()=>{m||(g(!0),null==a||a().then(O).catch(x).finally((()=>{g(!1)})),ne(K.d.MetricbeatMigration)&&te())}}),Object(E.jsx)(R.EuiSpacer,{size:"m"}),s&&Object(E.jsx)(R.EuiTabs,{size:"l"},s.map(((e,t)=>{return Object(E.jsx)(R.EuiTab,{key:t,disabled:Xs(r),title:e.label,"data-test-subj":e.testSubj,href:(s=e.route,p.createHref({pathname:s})),isSelected:v(e.route)},e.label);var s}))),Object(E.jsx)(R.EuiPageContentBody_Deprecated,null,Object(E.jsx)(R.EuiPage,{paddingSize:"m"},Object(E.jsx)(R.EuiPageBody,null,j?null:a&&!u?Object(E.jsx)(Te,null):o))))))};function Xs(e){const t=Z();if(!ne(K.d.MetricbeatMigration))return!1;if(!t.data)return!1;if(!e)return!1;const s=t.data[e]||{};return 0===s.totalUniqueInstanceCount||0===s.totalUniqueInternallyCollectedCount&&0===s.totalUniqueFullyMigratedCount&&0===s.totalUniquePartiallyMigratedCount}const Zs=({...e})=>{const t=[{id:"overview",label:_.i18n.translate("xpack.monitoring.apmNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/apm"},{id:"instances",label:_.i18n.translate("xpack.monitoring.apmNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/apm/instances"}];return Object(E.jsx)(Qs,U()({},e,{tabs:t,product:"apm"}))};function ea(){const{services:e}=Object(i.useKibana)(),t=Object(c.useHistory)(),{handleTimeChange:s}=N(),[a,r]=Object(n.useState)(0),[o,l]=Object(n.useState)(!1),u=Object(n.useRef)(o),d=e=>{u.current=e,l(e)};return Object(n.useEffect)((()=>{const e=()=>{u.current?d(!1):r((e=>e>0?e-1:0))};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]),{onBrush:({xaxis:t})=>{var i;const{to:n,from:o}=t,l=null===(i=e.uiSettings)||void 0===i?void 0:i.get("dateFormat:tz"),c=ta(l),u=Pe()(o-c),m=Pe()(n-c);s(u.toISOString(),m.toISOString()),d(!0),r(a+1)},zoomInfo:{zoomOutHandler:()=>t.goBack(),showZoomOutBtn:()=>a>0}}}const ta=e=>"Browser"===e?0:1*Pe.a.tz(e).utcOffset()*60*1e3,sa=e=>{if(!v.a.shims.isCloud||!e)return!1;let t=!1;return e.forEach((e=>{const[s,a]=e.split("."),i=Number(s);(i>7||7===i&&Number(a)>=13)&&(t=!0)})),t},aa=(e,t)=>e.map(((e,s)=>Object(E.jsx)(R.EuiFlexItem,{style:{minWidth:"45%"},key:s},Object(E.jsx)(Qt,U()({},t,{series:e}))))),ia=({stats:e,metrics:t,seriesToShow:s,title:a,summary:i,StatusComponent:n,...r})=>{if(!t)return null;const o=null!=i&&i.version?[null==i?void 0:i.version]:e.versions,l=(e=>{const t={};return e?(t.title=_.i18n.translate("xpack.monitoring.apm.metrics.topCharts.agentTitle",{defaultMessage:"Integrations Server - Resource Usage"}),t.heading=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.apm.metrics.agentHeading",defaultMessage:"Integrations Server"}),t):(t.title=_.i18n.translate("xpack.monitoring.apm.metrics.topCharts.title",{defaultMessage:"APM Server - Resource Usage"}),t.heading=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.apm.metrics.heading",defaultMessage:"APM server"}),t)})(sa(o)),c=[t.apm_cpu,t.apm_os_load],{config:u}=i||e;return c.push(u.container?t.apm_memory_cgroup:t.apm_memory),Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,l.heading)),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(n,{stats:e})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(R.EuiTitle,null,Object(E.jsx)("h3",null,l.title)),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiFlexGroup,{wrap:!0},aa(c,r))),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiTitle,null,Object(E.jsx)("h3",null,a)),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiFlexGroup,{wrap:!0},aa(s,r)))))};function na({status:e,availability:t=!0}){const s=(()=>{if(!t)return we.GRAY;const s=e.toUpperCase();return we[s]||we.YELLOW})();return Object(E.jsx)(Ie,{type:s,label:_.i18n.translate("xpack.monitoring.apm.healthStatusLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}function ra({alerts:e,stats:t}){const{apms:{total:s},totalEvents:a,timeOfLastEvent:i}=t,r=[{label:_.i18n.translate("xpack.monitoring.apm.instances.status.serversLabel",{defaultMessage:"Servers"}),value:s,"data-test-subj":"total"},{label:_.i18n.translate("xpack.monitoring.apm.instances.status.totalEventsLabel",{defaultMessage:"Total Events"}),value:gt(a,"0.[0]a"),"data-test-subj":"totalEvents"},{label:_.i18n.translate("xpack.monitoring.apm.instances.status.lastEventLabel",{defaultMessage:"Last Event"}),value:_.i18n.translate("xpack.monitoring.apm.instances.status.lastEventDescription",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:Ne(+Pe()(i),m.c)}}),"data-test-subj":"timeOfLastEvent"}];return Object(E.jsx)(rt,{metrics:r,alerts:e,IconComponent:({status:e})=>Object(E.jsx)(n.Fragment,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.apm.instances.statusDescription",defaultMessage:"Status: {apmStatusIcon}",values:{apmStatusIcon:Object(E.jsx)(na,{status:e})}})),"data-test-subj":"apmDetailStatus"})}function oa({stats:e}){return Object(E.jsx)(ra,{stats:e})}const la=_.i18n.translate("xpack.monitoring.apm.overview.panels.title",{defaultMessage:"APM Server - Metrics"});function ca(e){const{metrics:t}=e,s=[t.apm_responses_valid,t.apm_responses_errors,t.apm_output_events_rate_success,t.apm_output_events_rate_failure,t.apm_requests,t.apm_transformations],a={...e,title:la,seriesToShow:s};return Object(E.jsx)(ia,U()({},a,{StatusComponent:oa}))}const ua=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{zoomInfo:a,onBrush:r}=ea(),{services:o}=Object(i.useKibana)(),l=s.cluster_uuid,c=s.ccs,{generate:u}=L(),d=Object($.find)(e,{cluster_uuid:l}),[m,g]=Object(n.useState)(null),p=_.i18n.translate("xpack.monitoring.apm.overview.routeTitle",{defaultMessage:"APM server"}),j=_.i18n.translate("xpack.monitoring.apm.overview.pageTitle",{defaultMessage:"APM server overview"});Object(n.useEffect)((()=>{d&&u(d.cluster_name,{inApm:!0})}),[d,u]);const b=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/apm`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(i)}),[c,l,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(E.jsx)(Zs,{title:p,pageTitle:j,getPageData:b,"data-test-subj":"apmOverviewPage"},m&&Object(E.jsx)(ca,U()({},m,{onBrush:r,zoomInfo:a})))},da=[5,10,20,50],ma={pageSize:20,initialPageSize:20,pageIndex:0,initialPageIndex:0,pageSizeOptions:da,totalItemCount:0};function ga(e){const t=new O.Storage(window.localStorage),s=(a=e,e=>{const t=e.get(m.Z)||{},s=Object($.get)(t,[a,"sort"]);return{page:Object($.get)(t,[a,"page"]),sort:s}});var a;const i=(e=>(t,{sort:s,page:a})=>{const i=t.get(m.Z)||{};return Object(_t.set)(i,[e,"sort"],s||void 0),Object(_t.set)(i,[e,"page"],a||void 0),t.set(m.Z,i),i})(e),r=s(t),[o,l]=Object(n.useState)((e=>{const t=ma;return e&&(t.initialPageSize=e.size,t.pageSize=e.size,t.initialPageIndex=e.index,t.pageIndex=e.index),{...t,pageSizeOptions:da}})(r.page)),c=Object(n.useCallback)((e=>{e!==o.totalItemCount&&l({...o,totalItemCount:e})}),[l,o]),[u,d]=Object(n.useState)(r.sort||{sort:{field:"name",direction:m.s}}),[g,p]=Object(n.useState)(""),j=({page:e,sort:s,queryText:a})=>{l({...o,initialPageSize:e.size,pageSize:e.size,initialPageIndex:e.index,pageIndex:e.index,pageSizeOptions:da}),d({sort:s}),i(t,{page:e,sort:{sort:s}}),p(a)};return{getPaginationRouteOptions:Object(n.useCallback)((()=>o&&u?{pagination:{size:o.pageSize,index:o.pageIndex},...u,queryText:g}:{}),[o,g,u]),getPaginationTableProps:()=>({sorting:u,pagination:o,onTableChange:j}),updateTotalItemCount:c}}function pa(e,t,s){const a=s?{name:_.i18n.translate("xpack.monitoring.apm.instances.cgroupMemoryUsageTitle",{defaultMessage:"Memory Usage (cgroup)"}),field:"cgroup_memory",render:e=>gt(e,"byte")}:{name:_.i18n.translate("xpack.monitoring.apm.instances.allocatedMemoryTitle",{defaultMessage:"Allocated Memory"}),field:"memory",render:e=>gt(e,"byte")};return[{name:_.i18n.translate("xpack.monitoring.apm.instances.nameTitle",{defaultMessage:"Name"}),field:"name",render:(e,s)=>{let a=null;if(ne(K.d.MetricbeatMigration)){const e=Object($.get)(t,"data.byUuid",{})[s.uuid]||{},i={uuid:s.uuid,name:s.name};a=Object(E.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(E.jsx)(Es,{setupMode:t,status:e,instance:i,productName:m.a}))}return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiLink,{href:fe(`#/apm/instances/${s.uuid}`),"data-test-subj":`apmLink-${e}`},e),a)}},{name:_.i18n.translate("xpack.monitoring.apm.instances.outputEnabledTitle",{defaultMessage:"Output Enabled"}),field:"output"},{name:_.i18n.translate("xpack.monitoring.apm.instances.totalEventsRateTitle",{defaultMessage:"Total Events Rate"}),field:"total_events_rate",render:e=>gt(e,"","/s")},{name:_.i18n.translate("xpack.monitoring.apm.instances.bytesSentRateTitle",{defaultMessage:"Bytes Sent Rate"}),field:"bytes_sent_rate",render:e=>gt(e,"byte","/s")},{name:_.i18n.translate("xpack.monitoring.apm.instances.outputErrorsTitle",{defaultMessage:"Output Errors"}),field:"errors",render:e=>gt(e,"0")},{name:_.i18n.translate("xpack.monitoring.apm.instances.lastEventTitle",{defaultMessage:"Last Event"}),field:"time_of_last_event",render:e=>_.i18n.translate("xpack.monitoring.apm.instances.lastEventValue",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:Ne(+Pe()(e),"since")}})},a,{name:_.i18n.translate("xpack.monitoring.apm.instances.versionTitle",{defaultMessage:"Version"}),field:"version"}]}function ja({apms:e,alerts:t,setupMode:s}){const{pagination:a,sorting:i,onTableChange:n,data:r}=e;let o=null;ne(K.d.MetricbeatMigration)&&(o=Object(E.jsx)(ys,{setupModeData:s.data,useNodeIdentifier:!1,productName:m.a}));const l=Object($.uniq)(r.apms.map((e=>e.version))).map((e=>({value:e})));return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.apm.instances.heading",defaultMessage:"APM Instances"}))),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(ra,{stats:r.stats,alerts:t})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,o,Object(E.jsx)(kt,{className:"apmInstancesTable",rows:r.apms,columns:pa(0,s,r.cgroup),sorting:i,pagination:a,setupMode:s,productName:m.a,search:{box:{incremental:!0,placeholder:_.i18n.translate("xpack.monitoring.apm.instances.filterInstancesPlaceholder",{defaultMessage:"Filter Instances"})},filters:[{type:"field_value_selection",field:"version",name:_.i18n.translate("xpack.monitoring.apm.instances.versionFilter",{defaultMessage:"Version"}),options:l,multiSelect:"or"}]},onTableChange:n,executeQueryOptions:{defaultFields:["name"]}}))))}const ba=_.i18n.translate("xpack.monitoring.metricbeatMigration.migrationStatus",{defaultMessage:"Migration status"}),xa=_.i18n.translate("xpack.monitoring.metricbeatMigration.monitoringStatus",{defaultMessage:"Monitoring status"});function ha(e){return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiCallOut,{color:"warning",iconType:"help",title:Object(E.jsx)(R.EuiText,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.securitySetup",defaultMessage:"If security is enabled, {link} might be required.",values:{link:Object(E.jsx)(n.Fragment,null," ",Object(E.jsx)(R.EuiLink,{href:e,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.securitySetupLinkText",defaultMessage:"additional setup"})))}}))}))}function fa(e){return e.isInternalCollector||e.isNetNewUser?{title:e.isNetNewUser?xa:ba,status:"incomplete",children:Object(E.jsx)(R.EuiCallOut,{size:"s",color:"warning",title:_.i18n.translate("xpack.monitoring.metricbeatMigration.isInternalCollectorStatusTitle",{defaultMessage:"No monitoring data detected, but well continue checking."})})}:e.isPartiallyMigrated||e.isFullyMigrated?{title:ba,status:"complete",children:Object(E.jsx)(R.EuiCallOut,{size:"s",color:"success",title:_.i18n.translate("xpack.monitoring.metricbeatMigration.fullyMigratedStatusTitle",{defaultMessage:"Congratulations!"})},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.metricbeatMigration.fullyMigratedStatusDescription",{defaultMessage:"Metricbeat is shipping monitoring data."})))}:null}function Oa(e,t){if(!e||!e.isFullyMigrated){let s="";if(e){const t=Ne(e.lastInternallyCollectedTimestamp||e.lastTimestamp,m.c);s=_.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.partiallyMigratedStatusDescription",{defaultMessage:"Last self monitoring was {secondsSinceLastInternalCollectionLabel} ago.",values:{secondsSinceLastInternalCollectionLabel:t}})}return{title:ba,status:"incomplete",children:Object(E.jsx)(R.EuiCallOut,{size:"s",color:"warning",title:_.i18n.translate("xpack.monitoring.metricbeatMigration.partiallyMigratedStatusTitle",{defaultMessage:"Data is still coming from self monitoring"})},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.metricbeatMigration.partiallyMigratedStatusDescription",{defaultMessage:"It can take up to {secondsAgo} seconds to detect data.",values:{secondsAgo:t.secondsAgo}})),Object(E.jsx)("p",null,s))}}return{title:ba,status:"complete",children:Object(E.jsx)(R.EuiCallOut,{size:"s",color:"success",title:_.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.fullyMigratedStatusTitle",{defaultMessage:"Congratulations!"})},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.fullyMigratedStatusDescription",{defaultMessage:"We are not seeing any documents from self monitoring. Migration complete!"})))}}const va="beat",Ea="setMonitoringUrl",Ma="enableMetricbeat",ya="disableInternal";const ka=new O.Storage(window.localStorage),Sa=`${m.Z}.mb_migration.esMonitoringUrl`;class flyout_Flyout extends n.Component{constructor(e){super(e),x()(this,"setEsMonitoringUrl",(e=>{ka.set(Sa,e),this.setState({esMonitoringUrl:e})}));let t=ka.get(Sa);t||(t=e.monitoringHosts?e.monitoringHosts[0]:"http://localhost:9200"),this.checkInterval=null;let s=Ea;e.product&&e.product.isPartiallyMigrated&&(s=ya),this.state={activeStep:s,esMonitoringUrl:t,checkedStatusByStep:{[Ma]:!1,[ya]:!1,userAcknowledgedNoClusterUuidPrompt:!1}}}finishedFlyout(){const{onClose:e}=this.props;e()}renderActiveStep(){const{product:e,productName:t,onClose:s,meta:a}=this.props,{activeStep:i,esMonitoringUrl:r,checkedStatusByStep:o}=this.state;switch(i){case Ea:return Object(E.jsx)(R.EuiForm,null,Object(E.jsx)(R.EuiFormRow,{fullWidth:!0,label:_.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.step1.monitoringUrlLabel",{defaultMessage:"URL of monitoring cluster"}),helpText:_.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.step1.monitoringUrlHelpText",{defaultMessage:"Typically a single URL. If multiple URLs, separate with a comma.\n                The running Metricbeat instance must be able to communicate with these Elasticsearch servers."})},Object(E.jsx)(R.EuiFieldText,{fullWidth:!0,value:r,onChange:e=>this.setEsMonitoringUrl(e.target.value)})));case Ma:case ya:const l=function(e,t,s,a,i){switch(e){case m.B:if(s===Ma)return function(e,t,{esMonitoringUrl:s}){const a=v.a.shims.docLinks.links.monitoring.monitorKibana,i=v.a.shims.docLinks.links.metricbeat.install,r=v.a.shims.docLinks.links.metricbeat.start,o=ha(a);return[{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Kibana"}),children:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{href:i,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Kibana x-pack module in Metricbeat"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable kibana-xpack"),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect Kibana monitoring metrics from http://localhost:5601. If the local Kibana instance has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(E.jsx)(Xt,null,"hosts"),file:Object(E.jsx)(Xt,null,"modules.d/kibana-xpack.yml")}}))),o)},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(E.jsx)(Xt,null,"metricbeat.yml")}})),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{href:r,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},fa(e)]}(t,0,i);if(s===ya)return function(e,t){let s=null;return e.isPrimary&&(s=Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCallOut,{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.restartWarningTitle",{defaultMessage:"This step requires you to restart the Kibana server"}),color:"warning",iconType:"help"},Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.restartNote",defaultMessage:"Expect errors until the server is running again."})))))),[{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of Kibana monitoring metrics"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.description",defaultMessage:"Add this setting to {file}.",values:{file:Object(E.jsx)(Xt,null,"kibana.yml")}}))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.kibana.collection.enabled: false"),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.note",defaultMessage:"For {config}, leave the default value of ({defaultValue}).",values:{config:Object(E.jsx)(Xt,null,"monitoring.enabled"),defaultValue:Object(E.jsx)(Xt,null,"true")}}))),s)},Oa(e,t)]}(t,a);case m.r:if(s===Ma)return function(e,t,{esMonitoringUrl:s}){const a=v.a.shims.docLinks.links.monitoring.monitorElasticsearch,i=v.a.shims.docLinks.links.metricbeat.install,r=v.a.shims.docLinks.links.metricbeat.start,o=ha(a);return[{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Elasticsearch"}),children:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{href:i,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.installMetricbeatLinkText",defaultMessage:"Follow these instructions."}))))},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Elasticsearch x-pack module in Metricbeat"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleInstallDirectory",{defaultMessage:"From the installation directory, run:"}))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable elasticsearch-xpack"),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module collects Elasticsearch metrics from {url}. If the local server has a different address, add it to the hosts setting in {module}.",values:{module:Object(E.jsx)(Xt,null,"modules.d/elasticsearch-xpack.yml"),url:Object(E.jsx)(Xt,null,"http://localhost:9200")}}))),o)},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send data to the monitoring cluster"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.configureMetricbeatDescription",defaultMessage:"Modify {file} to set the connection information.",values:{file:Object(E.jsx)(Xt,null,"metricbeat.yml")}})),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{href:r,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.startMetricbeatLinkText",defaultMessage:"Follow these instructions."}))))},fa(e)]}(t,0,i);if(s===ya)return function(e,t){return[{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.disableInternalCollectionTitle",{defaultMessage:"Disable self monitoring of Elasticsearch monitoring metrics"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.disableInternalCollectionDescription",defaultMessage:"Disable self monitoring of Elasticsearch monitoring metrics. Set {monospace} to false on each server in the production cluster.",values:{monospace:Object(E.jsx)(Xt,null,"xpack.monitoring.elasticsearch.collection.enabled")}}))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0,language:"curl"},'PUT _cluster/settings\n{\n  "persistent": {\n    "xpack.monitoring.elasticsearch.collection.enabled": false\n  }\n}\n          '))},Oa(e,t)]}(t,a);case m.F:if(s===Ma)return function(e,t,{esMonitoringUrl:s}){const a=v.a.shims.docLinks.links.monitoring.monitorLogstash,i=v.a.shims.docLinks.links.metricbeat.install,r=v.a.shims.docLinks.links.metricbeat.start,o=ha(a);return[{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Logstash"}),children:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{href:i,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Logstash x-pack module in Metricbeat"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable logstash-xpack"),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect Logstash monitoring metrics from http://localhost:9600. If the local Logstash instance has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(E.jsx)(Xt,null,"hosts"),file:Object(E.jsx)(Xt,null,"modules.d/logstash-xpack.yml")}}))),o)},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(E.jsx)(Xt,null,"metricbeat.yml")}})),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{href:r,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},fa(e)]}(t,0,i);if(s===ya)return function(e,t){return[{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of Logstash monitoring metrics"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in the Logstash configuration file ({file}):",values:{file:Object(E.jsx)(Xt,null,"logstash.yml")}}))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0,language:"bash"},"xpack.monitoring.enabled: false"),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart Logstash after making this change."}))))},Oa(e,t)]}(t,a);case m.b:if(s===Ma)return function(e,t,{esMonitoringUrl:s}){const a=v.a.shims.docLinks.links.metricbeat.configure,i=v.a.shims.docLinks.links.metricbeat.install,r=v.a.shims.docLinks.links.metricbeat.start,o=v.a.shims.docLinks.links.metricbeat.httpEndpoint,l=e.beatType,c=ha(a);return[{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as this {beatType}",values:{beatType:l||va}}),children:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{href:i,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Beat x-pack module in Metricbeat"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable beat-xpack"),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect {beatType} monitoring metrics from http://localhost:5066. If the {beatType} instance being monitored has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(E.jsx)(Xt,null,"hosts"),file:Object(E.jsx)(Xt,null,"modules.d/beat-xpack.yml"),beatType:l||va}}))),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiCallOut,{color:"warning",iconType:"help",title:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleHttpEnabledDirections",defaultMessage:"In order for Metricbeat to collect metrics from the running {beatType}, you need to {link}.",values:{link:Object(E.jsx)(R.EuiLink,{href:o,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleHttpEnabledDirectionsLinkText",defaultMessage:"enable an HTTP endpoint for the {beatType} instance being monitored",values:{beatType:l}})),beatType:l||va}})))}),c)},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(E.jsx)(Xt,null,"metricbeat.yml")}})),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),c)},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{href:r,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},fa(e)]}(t,0,i);if(s===ya)return function(e,t){const s=e.beatType;return[{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of {beatType}'s monitoring metrics",values:{beatType:s||va}}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in {beatType}'s configuration file ({file}):",values:{beatType:s||va,file:Object(E.jsx)(Xt,null,s,".yml")}}))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.enabled: false"),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart {beatType} after making this change.",values:{beatType:s||va}}))))},Oa(e,t)]}(t,a);case m.a:if(s===Ma)return function(e,t,{esMonitoringUrl:s}){const a=v.a.shims.docLinks.links.metricbeat.configure,i=v.a.shims.docLinks.links.metricbeat.install,r=v.a.shims.docLinks.links.metricbeat.start,o=ha(a);return[{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as the APM server"}),children:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{href:i,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Beat x-pack module in Metricbeat"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable beat-xpack"),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect APM server monitoring metrics from http://localhost:5066. If the local APM server has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(E.jsx)(Xt,null,"hosts"),file:Object(E.jsx)(Xt,null,"modules.d/beat-xpack.yml")}}))),o)},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(E.jsx)(Xt,null,"metricbeat.yml")}})),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{href:r,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},fa(e)]}(t,0,i);if(s===ya)return function(e,t){return[{title:_.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of the APM server's monitoring metrics"}),children:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in the APM server's configuration file ({file}):",values:{file:Object(E.jsx)(Xt,null,"apm-server.yml")}}))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.enabled: false"),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart the APM server after making this change."}))))},Oa(e,t)]}(t,a)}return[]}(t,e,i,a,{doneWithMigration:s,esMonitoringUrl:r.split(",").map((e=>`"${e}"`)),hasCheckedStatus:o[i]});return Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiSteps,{steps:l}))}return null}renderActiveStepNextButton(){const{product:e,productName:t}=this.props,{activeStep:s,esMonitoringUrl:a,userAcknowledgedNoClusterUuidPrompt:i}=this.state;if(!e)return null;let n=!e.isFullyMigrated,r=s!==ya;if(s===Ma&&(t===m.r?(r=!1,n=!e.isPartiallyMigrated&&!e.isFullyMigrated):(r=!e.isFullyMigrated,n=!e.isFullyMigrated)),e.isFullyMigrated&&null===e.clusterUuid&&(i||(n=!0)),r){let t=!1,i=null;return s===Ea?(t=!a||0===a.length,i=e.isPartiallyMigrated||e.isFullyMigrated?ya:Ma):s===Ma&&(t=!e.isPartiallyMigrated&&!e.isFullyMigrated,i=ya),Object(E.jsx)(R.EuiButton,{type:"submit",fill:!0,iconType:"sortRight",iconSide:"right",isDisabled:t,onClick:()=>this.setState({activeStep:i})},_.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.nextButtonLabel",{defaultMessage:"Next"}))}return Object(E.jsx)(R.EuiButton,{type:"submit",fill:!0,isDisabled:n,onClick:()=>this.finishedFlyout()},_.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.doneButtonLabel",{defaultMessage:"Done"}))}getDocumentationTitle(){const{productName:e}=this.props;let t=null;return e===m.B?t=v.a.shims.docLinks.links.monitoring.monitorKibana:e===m.r&&(t=v.a.shims.docLinks.links.monitoring.monitorElasticsearch),t?Object(E.jsx)(R.EuiText,{size:"s"},Object(E.jsx)(R.EuiLink,{href:t,target:"_blank"},_.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.learnMore",{defaultMessage:"Learn about why."}))):null}render(){const{onClose:e,instance:t,productName:s,product:a}=this.props,i=yt(s),r=t&&t.name||vt(s);let o=_.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.flyoutTitle",{defaultMessage:"Monitor `{instanceName}` {instanceIdentifier} with Metricbeat",values:{instanceName:r,instanceIdentifier:i}});a.isNetNewUser&&(o=_.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.flyoutTitleNewUser",{defaultMessage:"Monitor {instanceName} {instanceIdentifier} with Metricbeat",values:{instanceIdentifier:i,instanceName:r}}));let l=null;return a.isFullyMigrated&&null===a.clusterUuid&&(l=Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCallOut,{color:"warning",iconType:"help",title:_.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.noClusterUuidTitle",{defaultMessage:"No cluster detected"})},Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.flyout.noClusterUuidDescription",defaultMessage:"This {productName} {instanceIdentifier} is not connected to an Elasticsearch cluster so once fully migrated, this {productName} {instanceIdentifier} will appear in the Standalone cluster instead of this one. {link}",values:{productName:s,instanceIdentifier:i,link:Object(E.jsx)(R.EuiLink,{href:"#/overview?_g=(cluster_uuid:__standalone_cluster__)",target:"_blank"},"Click here to view the Standalone cluster.")}})),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiCheckbox,{id:"monitoringFlyoutNoClusterUuidCheckbox",label:_.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.noClusterUuidCheckboxLabel",{defaultMessage:"Yes, I understand that I will need to look in the Standalone cluster for\n                  this {productName} {instanceIdentifier}.",values:{productName:s,instanceIdentifier:i}}),checked:this.state.userAcknowledgedNoClusterUuidPrompt,onChange:e=>this.setState({userAcknowledgedNoClusterUuidPrompt:e.target.checked})})),Object(E.jsx)(R.EuiSpacer,{size:"s"}))),Object(E.jsx)(R.EuiFlyout,{onClose:e,"aria-labelledby":"flyoutTitle"},Object(E.jsx)(R.EuiFlyoutHeader,{hasBorder:!0},Object(E.jsx)(R.EuiTitle,{size:"m"},Object(E.jsx)("h2",{id:"flyoutTitle"},o))),Object(E.jsx)(R.EuiFlyoutBody,null,this.renderActiveStep(),l),Object(E.jsx)(R.EuiFlyoutFooter,{style:{marginBottom:"64px"}},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiButtonEmpty,{iconType:"cross",onClick:e,flush:"left"},_.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.closeButtonLabel",{defaultMessage:"Close"}))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},this.renderActiveStepNextButton()))))}}class setup_mode_WrappedSetupModeRenderer extends r.a.Component{constructor(...e){super(...e),x()(this,"globalState",void 0),x()(this,"state",{renderState:!1,isFlyoutOpen:!1,instance:null,newProduct:null,isSettingUpNew:!1})}UNSAFE_componentWillMount(){this.globalState=this.context;const{kibana:e,onHttpError:t}=this.props;X.supported=!0,ae(this.globalState,e.services.http,t,(e=>{const t={renderState:!0},{productName:s}=this.props;if(!s)return void this.setState(t);const a=Z();if(!a.enabled||!a.data)return void this.setState(t);const i=a.data[s],n=e?e[s]:null;if(i&&n){const e=function(e,t){for(const s of t)if(-1===e.indexOf(s))return s}(Object.keys(n.byUuid),Object.keys(i.byUuid));e&&(t.newProduct=i.byUuid[e])}this.setState(t)}))}componentWillUnmount(){X.supported=!1}reset(){this.setState({renderState:!1,isFlyoutOpen:!1,instance:null,newProduct:null,isSettingUpNew:!1})}getFlyout(e,t){const{productName:s}=this.props,{isFlyoutOpen:a,instance:i,isSettingUpNew:n,newProduct:r}=this.state;if(!e||!a)return null;let o=null;if(r?o=r:i&&Object.keys(i).length&&(o=e.byUuid[i.uuid]),!o){const t=Object.values(e.byUuid);o=t.length&&!n?t[0]:{isNetNewUser:!0}}return Object(E.jsx)(flyout_Flyout,{onClose:()=>this.reset(),productName:s,product:o,meta:t,instance:i,updateProduct:te,isSettingUpNew:n})}getBottomBar(e){return!e.enabled||e.hideBottomBar?null:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiSpacer,{size:"xxl"}),Object(E.jsx)(R.EuiBottomBar,null,Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center","data-test-subj":"monitoringSetupModeBottomBar"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTextColor,{color:"ghost"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.setupMode.description",defaultMessage:"You are in setup mode. The ({flagIcon}) icon indicates configuration options.",values:{flagIcon:Object(E.jsx)(R.EuiIcon,{type:"flag"})}}))))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(Js,{exitSetupMode:()=>se(!1)})))))))}async shortcutToFinishMigration(){await(async()=>{const e=`../api/monitoring/v1/setup/collection/${J.cluster_uuid}/disable_internal_collection`;try{return await Y.post(e)}catch(e){throw Q(e),e}})(),await te()}render(){const{render:e,productName:t}=this.props,s=Z();let a={byUuid:{}};s.data&&(t&&s.data[t]?a=s.data[t]:s.data&&(a=s.data));const i=s.data?s.data._meta:null;return e({setupMode:{data:a,meta:i,enabled:s.enabled,productName:t,updateSetupModeData:te,shortcutToFinishMigration:()=>this.shortcutToFinishMigration(),openFlyout:(e,t)=>this.setState({isFlyoutOpen:!0,instance:e,isSettingUpNew:t}),closeFlyout:()=>this.setState({isFlyoutOpen:!1})},flyoutComponent:this.getFlyout(a,i),bottomBarComponent:this.getBottomBar(s)})}}setup_mode_WrappedSetupModeRenderer.contextType=M;const _a=Object(i.withKibana)((Ta=setup_mode_WrappedSetupModeRenderer,function(e){const t=Hs();return Object(E.jsx)(Ta,U()({},e,{onHttpError:t}))}));var Ta;const wa=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{services:a}=Object(i.useKibana)(),{generate:r}=L(),{updateTotalItemCount:o,getPaginationTableProps:l}=ga("apm.instances"),c=s.cluster_uuid,u=s.ccs,d=Object($.find)(e,{cluster_uuid:c}),[g,p]=Object(n.useState)({}),j=_.i18n.translate("xpack.monitoring.apm.instances.routeTitle",{defaultMessage:"{apm} - Instances",values:{apm:"APM server"}}),b=_.i18n.translate("xpack.monitoring.apm.instances.pageTitle",{defaultMessage:"APM server instances"});Object(n.useEffect)((()=>{d&&r(d.cluster_name,{inApm:!0})}),[d,r]);const x=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${c}/apm/instances`,n=await(null===(t=a.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));p(n),o(null==n?void 0:n.stats.total)}),[u,c,null===(t=a.data)||void 0===t?void 0:t.query.timefilter.timefilter,a.http,o]),{pagination:h,sorting:f,onTableChange:O}=l();return Object(E.jsx)(Zs,{title:j,pageTitle:b,getPageData:x,"data-test-subj":"apmInstancesPage"},Object(E.jsx)(_a,{productName:m.a,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},t,Object(E.jsx)(ja,{setupMode:e,apms:{pagination:h,sorting:f,onTableChange:O,data:g}}),s)}))};function Ca({alerts:e=null,stats:t}){const{name:s,output:a,version:i,uptime:r,timeOfLastEvent:o}=t,l=[{label:_.i18n.translate("xpack.monitoring.apm.instance.status.nameLabel",{defaultMessage:"Name"}),value:s,"data-test-subj":"name"},{label:_.i18n.translate("xpack.monitoring.apm.instance.status.outputLabel",{defaultMessage:"Output"}),value:a,"data-test-subj":"output"},{label:_.i18n.translate("xpack.monitoring.apm.instance.status.versionLabel",{defaultMessage:"Version"}),value:i,"data-test-subj":"version"},{label:_.i18n.translate("xpack.monitoring.apm.instance.status.uptimeLabel",{defaultMessage:"Uptime"}),value:gt(r,"time_since"),"data-test-subj":"uptime"},{label:_.i18n.translate("xpack.monitoring.apm.instance.status.lastEventLabel",{defaultMessage:"Last Event"}),value:_.i18n.translate("xpack.monitoring.apm.instance.status.lastEventDescription",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:Ne(+Pe()(o),m.c)}}),"data-test-subj":"timeOfLastEvent"}];return Object(E.jsx)(rt,{metrics:l,alerts:e,IconComponent:({status:e})=>Object(E.jsx)(n.Fragment,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.apm.instance.statusDescription",defaultMessage:"Status: {apmStatusIcon}",values:{apmStatusIcon:Object(E.jsx)(na,{status:e})}})),"data-test-subj":"apmDetailStatus"})}const Ia=_.i18n.translate("xpack.monitoring.apm.instance.panels.title",{defaultMessage:"APM Server - Metrics"});function La(e){const{metrics:t}=e,s=[t.apm_requests,t.apm_responses_valid,t.apm_responses_errors,t.apm_acm_request_count,t.apm_acm_response,t.apm_acm_response_errors,t.apm_output_events_rate_success,t.apm_output_events_rate_failure,t.apm_transformations],a=e.summary,i={...e,title:Ia,seriesToShow:s,stats:a};return Object(E.jsx)(ia,U()({},i,{StatusComponent:Ca}))}const Fa=({clusters:e})=>{var t;const{instance:s}=Object(c.useParams)(),a=Object(n.useContext)(M),{services:r}=Object(i.useKibana)(),{generate:o}=L(),{zoomInfo:l,onBrush:u}=ea(),d=a.cluster_uuid,m=a.ccs,g=Object($.find)(e,{cluster_uuid:d}),[p,j]=Object(n.useState)({}),[b,x]=Object(n.useState)(""),h=_.i18n.translate("xpack.monitoring.apm.instance.routeTitle",{defaultMessage:"{apm} - Instance",values:{apm:"APM server"}}),f=_.i18n.translate("xpack.monitoring.apm.instance.pageTitle",{defaultMessage:"APM server instance: {instanceName}",values:{instanceName:b}});Object(n.useEffect)((()=>{g&&o(g.cluster_name,{inApm:!0,instance:b})}),[g,b,o]);const O=Object(n.useCallback)((async()=>{var e,t;const a=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${d}/apm/${s}`,n=await(null===(t=r.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));j(n),x((null==n?void 0:n.apmSummary.name)||"")}),[m,d,s,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(E.jsx)(Qs,{title:h,pageTitle:f,getPageData:O,"data-test-subj":"apmInstancePage"},Object(E.jsx)(La,{summary:p.apmSummary||{},metrics:p.metrics||{},onBrush:u,zoomInfo:l}))};function Pa({summary:e,metrics:t,...s}){const a=[t.beat_event_rates,t.beat_fail_rates,t.beat_throughput_rates,t.beat_output_errors,t.beat_memory,t.beat_cpu_utilization,t.beat_os_load,t.beat_handles],i=[{label:_.i18n.translate("xpack.monitoring.beats.instance.nameLabel",{defaultMessage:"Name"}),value:e.name,"data-test-subj":"name"},{label:_.i18n.translate("xpack.monitoring.beats.instance.hostLabel",{defaultMessage:"Host"}),value:e.transportAddress,"data-test-subj":"host"},{label:_.i18n.translate("xpack.monitoring.beats.instance.versionLabel",{defaultMessage:"Version"}),value:e.version,"data-test-subj":"version"},{label:_.i18n.translate("xpack.monitoring.beats.instance.typeLabel",{defaultMessage:"Type"}),value:e.type,"data-test-subj":"type"},{label:_.i18n.translate("xpack.monitoring.beats.instance.outputLabel",{defaultMessage:"Output"}),value:e.output,"data-test-subj":"output"},{label:_.i18n.translate("xpack.monitoring.beats.instance.configReloadsLabel",{defaultMessage:"Config reloads"}),value:gt(e.configReloads,"int_commas"),"data-test-subj":"configReloads"},{label:_.i18n.translate("xpack.monitoring.beats.instance.uptimeLabel",{defaultMessage:"Uptime"}),value:gt(e.uptime,"time_since"),"data-test-subj":"uptime"}],n=[{label:_.i18n.translate("xpack.monitoring.beats.instance.eventsTotalLabel",{defaultMessage:"Events total"}),value:gt(e.eventsTotal,"int_commas"),"data-test-subj":"eventsTotal"},{label:_.i18n.translate("xpack.monitoring.beats.instance.eventsEmittedLabel",{defaultMessage:"Events emitted"}),value:gt(e.eventsEmitted,"int_commas"),"data-test-subj":"eventsEmitted"},{label:_.i18n.translate("xpack.monitoring.beats.instance.eventsDroppedLabel",{defaultMessage:"Events dropped"}),value:gt(e.eventsDropped,"int_commas"),"data-test-subj":"eventsDropped"},{label:_.i18n.translate("xpack.monitoring.beats.instance.bytesSentLabel",{defaultMessage:"Bytes sent"}),value:gt(e.bytesWritten,"byte"),"data-test-subj":"bytesWritten"},{label:_.i18n.translate("xpack.monitoring.beats.instance.handlesLimitSoftLabel",{defaultMessage:"Handles limit (soft)"}),value:gt(e.handlesSoftLimit,"int_commas"),"data-test-subj":"handlesLimitSoft"},{label:_.i18n.translate("xpack.monitoring.beats.instance.handlesLimitHardLabel",{defaultMessage:"Handles limit (hard)"}),value:gt(e.handlesHardLimit,"int_commas"),"data-test-subj":"handlesLimitHard"}];return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(rt,{metrics:i,"data-test-subj":"beatSummaryStatus01"})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(rt,{metrics:n,"data-test-subj":"beatSummaryStatus02"})),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.beats.beat.heading",defaultMessage:"Beat"}))),Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},s)),Object(E.jsx)(R.EuiSpacer,null))))))))}const Na=({instance:e,...t})=>{const s=[];return e?s.push({id:"overview",label:_.i18n.translate("xpack.monitoring.beatsNavigation.instance.overviewLinkText",{defaultMessage:"Overview"}),route:`/beats/beat/${e}`}):(s.push({id:"overview",label:_.i18n.translate("xpack.monitoring.beatsNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/beats",testSubj:"beatsOverviewPage"}),s.push({id:"instances",label:_.i18n.translate("xpack.monitoring.beatsNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/beats/beats",testSubj:"beatsListingPage"})),Object(E.jsx)(Qs,U()({},t,{tabs:s,product:"beats"}))},Da=({clusters:e})=>{var t;const{instance:s}=Object(c.useParams)(),a=Object(n.useContext)(M),{services:r}=Object(i.useKibana)(),{generate:o}=L(),{zoomInfo:l,onBrush:u}=ea(),d=a.cluster_uuid,m=a.ccs,g=Object($.find)(e,{cluster_uuid:d}),[p,j]=Object(n.useState)({}),[b,x]=Object(n.useState)(""),h=_.i18n.translate("xpack.monitoring.beats.instance.routeTitle",{defaultMessage:"Beats - {instanceName} - Overview",values:{instanceName:b}}),f=_.i18n.translate("xpack.monitoring.beats.instance.pageTitle",{defaultMessage:"Beat instance: {beatName}",values:{beatName:b}});Object(n.useEffect)((()=>{g&&o(g.cluster_name,{inBeats:!0,instance:b})}),[g,b,o]);const O=Object(n.useCallback)((async()=>{var e,t;const a=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${d}/beats/beat/${s}`,n=await(null===(t=r.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));j(n),x((null==n?void 0:n.summary.name)||"")}),[m,d,s,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(E.jsx)(Na,{title:h,pageTitle:f,getPageData:O,instance:s,"data-test-subj":"beatDetailPage"},Object(E.jsx)("div",{"data-test-subj":"monitoringBeatsInstanceApp"},Object(E.jsx)(Pa,{summary:p.summary,metrics:p.metrics,onBrush:u,zoomInfo:l})))};function Ra({stats:e,alerts:t}){const{total:s,types:a,stats:{bytesSent:i,totalEvents:n}}=e,r=[{label:_.i18n.translate("xpack.monitoring.beats.overview.totalBeatsLabel",{defaultMessage:"Total Beats"}),value:gt(s,"int_commas"),"data-test-subj":"totalBeats"}];return r.push(...a.map((({type:e,count:t})=>({label:e,value:gt(t,"int_commas"),"data-test-subj":"typeCount","data-test-type-count":`${e}:${t}`})))),r.push({label:_.i18n.translate("xpack.monitoring.beats.overview.totalEventsLabel",{defaultMessage:"Total Events"}),value:gt(n,"0.[0]a"),"data-test-subj":"totalEvents"}),r.push({label:_.i18n.translate("xpack.monitoring.beats.overview.bytesSentLabel",{defaultMessage:"Bytes Sent"}),value:gt(i,"byte"),"data-test-subj":"bytesSent"}),Object(E.jsx)(rt,{metrics:r,alerts:t,"data-test-subj":"beatsSummaryStatus"})}class listing_Listing extends n.PureComponent{getColumns(){const e=this.props.setupMode;return[{name:_.i18n.translate("xpack.monitoring.beats.instances.nameTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if(ne(K.d.MetricbeatMigration)){const t=Object($.get)(e,"data.byUuid",{})[s.uuid]||{},i={uuid:s.uuid,name:s.name};a=Object(E.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(E.jsx)(Es,{setupMode:e,status:t,instance:i,productName:m.b}))}return Object(E.jsx)("div",null,Object(E.jsx)(R.EuiLink,{href:fe(`#/beats/beat/${s.uuid}`),"data-test-subj":`beatLink-${t}`},t),a)}},{name:_.i18n.translate("xpack.monitoring.beats.instances.typeTitle",{defaultMessage:"Type"}),field:"type"},{name:_.i18n.translate("xpack.monitoring.beats.instances.outputEnabledTitle",{defaultMessage:"Output Enabled"}),field:"output"},{name:_.i18n.translate("xpack.monitoring.beats.instances.totalEventsRateTitle",{defaultMessage:"Total Events Rate"}),field:"total_events_rate",render:e=>gt(e,"","/s")},{name:_.i18n.translate("xpack.monitoring.beats.instances.bytesSentRateTitle",{defaultMessage:"Bytes Sent Rate"}),field:"bytes_sent_rate",render:e=>gt(e,"byte","/s")},{name:_.i18n.translate("xpack.monitoring.beats.instances.outputErrorsTitle",{defaultMessage:"Output Errors"}),field:"errors",render:e=>gt(e,"0")},{name:_.i18n.translate("xpack.monitoring.beats.instances.allocatedMemoryTitle",{defaultMessage:"Allocated Memory"}),field:"memory",render:e=>gt(e,"byte")},{name:_.i18n.translate("xpack.monitoring.beats.instances.versionTitle",{defaultMessage:"Version"}),field:"version"}]}render(){const{stats:e,data:t,sorting:s,pagination:a,onTableChange:i,setupMode:n}=this.props;let r=null;ne(K.d.MetricbeatMigration)&&(r=Object(E.jsx)(ys,{setupModeData:n.data,useNodeIdentifier:!1,productName:m.b}));const o=Object($.uniq)(t.map((e=>e.type))).map((e=>({value:e}))),l=Object($.uniq)(t.map((e=>e.version))).map((e=>({value:e})));return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.beats.listing.heading",defaultMessage:"Beats listing"}))),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Ra,{stats:e})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,r,Object(E.jsx)(kt,{className:"beatsTable",rows:t,setupMode:n,productName:m.b,columns:this.getColumns(),sorting:s,pagination:a,search:{box:{incremental:!0,placeholder:_.i18n.translate("xpack.monitoring.beats.filterBeatsPlaceholder",{defaultMessage:"Filter Beats..."})},filters:[{type:"field_value_selection",field:"type",name:_.i18n.translate("xpack.monitoring.beats.instances.typeFilter",{defaultMessage:"Type"}),options:o,multiSelect:"or"},{type:"field_value_selection",field:"version",name:_.i18n.translate("xpack.monitoring.beats.instances.versionFilter",{defaultMessage:"Version"}),options:l,multiSelect:"or"}]},onTableChange:i,executeQueryOptions:{defaultFields:["name","type"]}}))))}}const za=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{services:a}=Object(i.useKibana)(),{generate:r}=L(),{updateTotalItemCount:o,getPaginationTableProps:l}=ga("beats.instances"),c=s.cluster_uuid,u=s.ccs,d=Object($.find)(e,{cluster_uuid:c}),[g,p]=Object(n.useState)({}),j=_.i18n.translate("xpack.monitoring.beats.routeTitle",{defaultMessage:"Beats"}),b=_.i18n.translate("xpack.monitoring.beats.listing.pageTitle",{defaultMessage:"Beats listing"});Object(n.useEffect)((()=>{d&&r(d.cluster_name,{inBeats:!0})}),[d,r]);const x=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${c}/beats/beats`,n=await(null===(t=a.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));p(n),o(null==n?void 0:n.stats.total)}),[u,c,null===(t=a.data)||void 0===t?void 0:t.query.timefilter.timefilter,a.http,o]);return Object(E.jsx)(Na,{title:j,pageTitle:b,getPageData:x},Object(E.jsx)("div",{"data-test-subj":"monitoringBeatsInstancesApp"},Object(E.jsx)(_a,{productName:m.b,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},t,Object(E.jsx)(listing_Listing,U()({stats:g.stats,data:g.listing,setupMode:e},l())),s)})))};function Aa({latestActive:e}){const t={last1m:_.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1MinuteLabel",{defaultMessage:"Last 1 minute"}),last5m:_.i18n.translate("xpack.monitoring.beats.overview.latestActive.last5MinutesLabel",{defaultMessage:"Last 5 minutes"}),last20m:_.i18n.translate("xpack.monitoring.beats.overview.latestActive.last20MinutesLabel",{defaultMessage:"Last 20 minutes"}),last1h:_.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1HourLabel",{defaultMessage:"Last 1 hour"}),last1d:_.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1DayLabel",{defaultMessage:"Last 1 day"})},s=e.map((({range:e,count:s})=>({range:t[e],count:s})));return Object(E.jsx)(R.EuiBasicTable,{items:s,columns:[{field:"range",name:""},{field:"count",dataType:"number",name:""}]})}function Ba({latestVersions:e}){return Object(E.jsx)(R.EuiBasicTable,{items:e,columns:[{field:"version",name:""},{field:"count",dataType:"number",name:""}]})}function Va({latestTypes:e}){return Object(E.jsx)(R.EuiBasicTable,{items:e,columns:[{field:"type",name:""},{field:"count",dataType:"number",name:""}]})}function Ua({latestActive:e,latestTypes:t,latestVersions:s,stats:a,metrics:i,alerts:n,...r}){const o=[i.beat_event_rates,i.beat_fail_rates,i.beat_throughput_rates,i.beat_output_errors].map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{style:{minWidth:"45%"},key:t},Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Qt,U()({series:e},r))))));return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.beats.overview.heading",defaultMessage:"Beats Overview"}))),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Ra,{stats:a,alerts:n})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPanel,null,function(e,t,s){if(t&&t.length>0)return Object(E.jsx)(R.EuiFlexGroup,{wrap:!0},Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.beats.overview.activeBeatsInLastDayTitle",defaultMessage:"Active Beats in last day"}))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(Aa,{latestActive:e})),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.beats.overview.top5BeatTypesInLastDayTitle",defaultMessage:"Top 5 Beat Types in last day"}))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(Va,{latestTypes:t})),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.beats.overview.top5VersionsInLastDayTitle",defaultMessage:"Top 5 Versions in last day"}))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(Ba,{latestVersions:s})));const a=_.i18n.translate("xpack.monitoring.beats.overview.noActivityDescription",{defaultMessage:"Hi there! This area is where your latest Beats activity would show up, but you don't seem to have any activity within the last day."});return Object(E.jsx)(R.EuiCallOut,{title:a,iconType:"gear","data-test-subj":"noRecentActivityMessage"})}(e,t,s)),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGroup,{wrap:!0},o))))}const $a=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{zoomInfo:a,onBrush:r}=ea(),{services:o}=Object(i.useKibana)(),l=s.cluster_uuid,c=s.ccs,{generate:u}=L(),d=Object($.find)(e,{cluster_uuid:l}),[m,g]=Object(n.useState)(null),p=_.i18n.translate("xpack.monitoring.beats.overview.routeTitle",{defaultMessage:"Beats - Overview"}),j=_.i18n.translate("xpack.monitoring.beats.overview.pageTitle",{defaultMessage:"Beats overview"});Object(n.useEffect)((()=>{d&&u(d.cluster_name,{inBeats:!0})}),[d,u]);const b=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/beats`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(i)}),[c,l,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(E.jsx)(Na,{title:p,pageTitle:j,getPageData:b},Object(E.jsx)("div",null,null===(x=m)?null:Object(E.jsx)(Ua,U()({},x,{onBrush:r,zoomInfo:a}))));var x};function Ga(e){if("green"===e.status)return _.i18n.translate("xpack.monitoring.cluster.health.healthy",{defaultMessage:"Healthy"});const{product:t,status:s}=e;if("es"===t){if("yellow"===e.status)return _.i18n.translate("xpack.monitoring.cluster.health.replicaShards",{defaultMessage:"Missing replica shards"});if("red"===e.status)return _.i18n.translate("xpack.monitoring.cluster.health.primaryShards",{defaultMessage:"Missing primary shards"})}return"kb"!==t||"yellow"!==s&&"red"!==s?"N/A":Object(E.jsx)(R.EuiText,null,_.i18n.translate("xpack.monitoring.cluster.health.pluginIssues",{defaultMessage:"Some plugins may be experiencing issues. Please check "}),Object(E.jsx)(R.EuiLink,{href:`${v.a.shims.getBasePath()}/status`},"the Kibana status page"),".")}function qa(e){const t={green:"success",yellow:"warning",red:"danger"}[e.status]||"n/a";return Object(E.jsx)(R.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiHealth,{color:t,"data-test-subj":"status"},Object(E.jsx)(Ga,e))))}const Ha=({extras:e})=>void 0===e?null:Object(E.jsx)(R.EuiFlexItem,{grow:!1},e);function Wa(e){const t={elasticsearch:"logoElasticsearch",kibana:"logoKibana",logstash:"logoLogstash",beats:"logoBeats",apm:"apmApp",enterprise_search:"logoEnterpriseSearch"}[e.url];return Object(E.jsx)("div",{"data-test-subj":`clusterItemContainer${e.title}`},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiIcon,{type:t,size:"l"})),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,null,Object(E.jsx)("h2",null,e.title))))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},e.statusIndicator),Object(E.jsx)(Ha,{extras:e.extras})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),e.children,Object(E.jsx)(R.EuiSpacer,{size:"xxl"}))}function Ka({usedBytes:e,maxBytes:t}){return e&&t?Object(E.jsx)("span",null,Object(E.jsx)(R.EuiText,null,ut(e,t))):e?Object(E.jsx)("span",null,Object(E.jsx)(R.EuiText,null,mt(e,"byte"))):null}function Ja({usedBytes:e,maxBytes:t}){return e&&t?Object(E.jsx)("span",null,Object(E.jsx)(R.EuiText,null,dt(e,t)),Object(E.jsx)(R.EuiText,{color:"subdued",size:"s"},ut(e,t))):Object(E.jsx)(R.EuiText,null,"0")}function Ya({setupModeEnabled:e,setupModeData:t,children:s,...a}){return e&&0===Object($.get)(t,"totalUniqueInstanceCount",0)?s:Object(E.jsx)(R.EuiLink,a,s)}function Qa({setupModeData:e,badgeClickLink:t,productName:s}){if(!e)return null;const{totalUniqueInstanceCount:a,totalUniqueFullyMigratedCount:i,totalUniquePartiallyMigratedCount:n}=e,r=a>0&&(i===a||n===a),o=n>0,l=Object($.get)(e,"detected.mightExist")||Object($.get)(e,"detected.doesExist");let c=null;if(0===a)if(l){const e=_.i18n.translate("xpack.monitoring.setupMode.tooltip.detected",{defaultMessage:"No monitoring"});c=Object(E.jsx)(R.EuiToolTip,{position:"top",content:_.i18n.translate("xpack.monitoring.setupMode.tooltip.mightExist",{defaultMessage:"We detected usage of this product. Click to start monitoring."})},Object(E.jsx)(R.EuiBadge,{color:"warning",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=_.i18n.translate("xpack.monitoring.setupMode.tooltip.noUsage",{defaultMessage:"No usage"});c=Object(E.jsx)(R.EuiToolTip,{position:"top",content:_.i18n.translate("xpack.monitoring.setupMode.tooltip.noUsageDetected",{defaultMessage:"We did not detect any usage. Click to view {identifier}.",values:{identifier:yt(s,!0)}})},Object(E.jsx)(R.EuiBadge,{color:"hollow",iconType:"flag",href:t,onClickAriaLabel:e},e))}else if(r)if(o){const e=_.i18n.translate("xpack.monitoring.euiTable.isPartiallyMigratedLabel",{defaultMessage:"Self monitoring is on"});c=Object(E.jsx)(R.EuiToolTip,{position:"top",content:_.i18n.translate("xpack.monitoring.setupMode.tooltip.disableInternal",{defaultMessage:"Metricbeat is monitoring all {identifierPlural}. Click to view {identifierPlural} and disable self monitoring.",values:{identifierPlural:yt(s,!0)}})},Object(E.jsx)(R.EuiBadge,{color:"warning",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=_.i18n.translate("xpack.monitoring.euiTable.isFullyMigratedLabel",{defaultMessage:"Metricbeat monitoring"});c=Object(E.jsx)(R.EuiToolTip,{position:"top",content:_.i18n.translate("xpack.monitoring.setupMode.tooltip.allSet",{defaultMessage:"Metricbeat is monitoring all {identifierPlural}.",values:{identifierPlural:yt(s,!0)}})},Object(E.jsx)(R.EuiBadge,{color:"success",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=_.i18n.translate("xpack.monitoring.euiTable.isInternalCollectorLabel",{defaultMessage:"Self monitoring"});c=Object(E.jsx)(R.EuiToolTip,{position:"top",content:_.i18n.translate("xpack.monitoring.setupMode.tooltip.oneInternal",{defaultMessage:"At least one {identifier} isnt monitored using Metricbeat. Click to view status.",values:{identifier:yt(s)}})},Object(E.jsx)(R.EuiBadge,{color:"danger",iconType:"flag",href:t,onClickAriaLabel:e},e))}return Object(E.jsx)(R.EuiFlexItem,{grow:!1,"data-test-subj":"monitoringSetupModeMetricbeatMigrationTooltip"},c)}function Xa(e,t,s){if(!e)return!1;const a=ie(s),i=t.find((t=>e[t]&&e[t].find((e=>e.states.length>0))));return a||i}function Za(e){switch(e){case"warn":return"warning";case"debug":return"hollow";case"info":return"default";case"error":return"danger"}}const ei={info:_.i18n.translate("xpack.monitoring.cluster.overview.esPanel.infoLogsTooltipText",{defaultMessage:"The number of information logs"}),warn:_.i18n.translate("xpack.monitoring.cluster.overview.esPanel.warnLogsTooltipText",{defaultMessage:"The number of warning logs"}),debug:_.i18n.translate("xpack.monitoring.cluster.overview.esPanel.debugLogsTooltipText",{defaultMessage:"The number of debug logs"}),error:_.i18n.translate("xpack.monitoring.cluster.overview.esPanel.errorLogsTooltipText",{defaultMessage:"The number of error logs"}),fatal:_.i18n.translate("xpack.monitoring.cluster.overview.esPanel.fatalLogsTooltipText",{defaultMessage:"The number of fatal logs"}),unknown:_.i18n.translate("xpack.monitoring.cluster.overview.esPanel.unknownLogsTooltipText",{defaultMessage:"Unknown"})},ti=[m.I,m.P,m.H],si=[m.J,m.L,m.W,m.X,m.R,m.T,m.M,m.S],ai=[m.O];function ii(e){const t=e.cluster_stats||{},s=t.nodes,a=t.indices,i=e.setupMode,o=e.alerts,l=r.a.useContext(Le),c=()=>fe("#/elasticsearch"),u=()=>fe("#/elasticsearch/nodes"),{primaries:d,replicas:g}=(e=>{const t=Object($.get)(e,"total",0);let s=Object($.get)(e,"primaries","N/A"),a="N/A";return"N/A"!==s&&(a=mt(t-s,"int_commas"),s=mt(s,"int_commas")),{primaries:s,replicas:a}})(Object($.get)(e,"cluster_stats.indices.shards",{})),p=Object($.get)(i.data,"elasticsearch"),j=ne(K.d.MetricbeatMigration)?Object(E.jsx)(Qa,{setupModeData:p,productName:m.r,badgeClickLink:u()}):null;let b=null;if(Xa(o,si,l)){const e=si.map((e=>o[e]));b=Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(tt,{alerts:e}))}let x=null;if(Xa(o,ti,l)){const e=ti.map((e=>o[e]));x=Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(tt,{alerts:e}))}let h=null;if(Xa(o,ai,l)){const e=ai.map((e=>o[e]));h=Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(tt,{alerts:e}))}return Object(E.jsx)(Wa,U()({},e,{url:"elasticsearch",title:"Elasticsearch"}),Object(E.jsx)(R.EuiFlexGrid,{columns:4},Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(Ya,{setupModeEnabled:i.enabled,setupModeData:p,href:c(),"aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.esPanel.overviewLinkAriaLabel",{defaultMessage:"Elasticsearch Overview"}),"data-test-subj":"esOverview"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.overviewLinkLabel",defaultMessage:"Overview"}))))),x),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.healthLabel",defaultMessage:"Health"})),Object(E.jsx)(R.EuiDescriptionListDescription,null,Object(E.jsx)(R.EuiHealth,{color:{green:"success",yellow:"warning",red:"danger"}[t.status],"data-test-subj":"statusIcon"},Object(E.jsx)(Ga,{status:t.status,product:"es"}))),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.versionLabel",defaultMessage:"Version"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"esVersion"},e.version||_.i18n.translate("xpack.monitoring.cluster.overview.esPanel.versionNotAvailableDescription",{defaultMessage:"N/A"})),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"esUptime"},mt(Object($.get)(s,"jvm.max_uptime_in_millis"),"time_since")),(()=>{if(e.ml){const t=fe("#/elasticsearch/ml_jobs");return Object(E.jsx)(r.a.Fragment,null,Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(Ya,{setupModeEnabled:i.enabled,setupModeData:p,href:t},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.jobsLabel",defaultMessage:"Machine learning jobs"}))),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"esMlJobs"},Object(E.jsx)(Ya,{setupModeEnabled:i.enabled,setupModeData:p,href:t},e.ml.jobs)))}return null})(),e.showLicenseExpiration?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.licenseLabel",defaultMessage:"License"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"esLicenseType"},Object(E.jsx)(R.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiLink,{href:fe("#/license")},Object($.capitalize)(e.license.type))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiText,{size:"s"},void 0===e.license.expiry_date_in_millis?"":Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.expireDateText",defaultMessage:"expires on {expiryDate}",values:{expiryDate:(f=e.license.expiry_date_in_millis,Ve.a.tz(f,Ve.a.tz.guess()).format("LL"))}})))))):null))),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(R.EuiLink,{"data-test-subj":"esNumberOfNodes",href:u()},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.nodesTotalLinkLabel",defaultMessage:"Nodes: {nodesTotal}",values:{nodesTotal:mt(Object($.get)(s,"count.total"),"int_commas")}}))))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},j,b))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.diskAvailableLabel",defaultMessage:"Disk Available"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"esDiskAvailable"},Object(E.jsx)(Ja,{usedBytes:Object($.get)(s,"fs.available.bytes",Object($.get)(s,"fs.available_in_bytes")),maxBytes:Object($.get)(s,"fs.total.bytes",Object($.get)(s,"fs.total_in_bytes"))})),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.jvmHeapLabel",defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"esJvmHeap"},Object(E.jsx)(Ja,{usedBytes:Object($.get)(s,"jvm.mem.heap.used.bytes",Object($.get)(s,"jvm.mem.heap_used_in_bytes")),maxBytes:Object($.get)(s,"jvm.mem.heap.max.bytes",Object($.get)(s,"jvm.mem.heap_max_in_bytes"))}))))),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(Ya,{setupModeEnabled:i.enabled,setupModeData:p,href:fe("#/elasticsearch/indices"),"data-test-subj":"esNumberOfIndices","aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.esPanel.indicesCountLinkAriaLabel",{defaultMessage:"Elasticsearch Indices: {indicesCount}",values:{indicesCount:mt(Object($.get)(a,"count"),"int_commas")}})},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.indicesCountLinkLabel",defaultMessage:"Indices: {indicesCount}",values:{indicesCount:mt(Object($.get)(a,"count"),"int_commas")}}))))),h),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.documentsLabel",defaultMessage:"Documents"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"esDocumentsCount",className:"eui-textBreakWord"},mt(Object($.get)(a,"docs.total",Object($.get)(a,"docs.count")),"int_commas")),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.diskUsageLabel",defaultMessage:"Disk Usage"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"esDiskUsage"},mt(Object($.get)(a,"store.size.bytes",Object($.get)(a,"store.size_in_bytes")),"byte")),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.primaryShardsLabel",defaultMessage:"Primary Shards"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"esPrimaryShards"},d),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.replicaShardsLabel",defaultMessage:"Replica Shards"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"esReplicaShards"},g)))),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(Ya,{setupModeEnabled:i.enabled,setupModeData:p,href:c(),"aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.esPanel.logsLinkAriaLabel",{defaultMessage:"Elasticsearch Logs"}),"data-test-subj":"esLogs"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.logsLinkLabel",defaultMessage:"Logs"})))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),function(e){return e.logs.enabled?Object(E.jsx)(R.EuiDescriptionList,{type:"column"},e.logs.types.map(((e,t)=>Object(E.jsx)(n.Fragment,{key:t},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logsPanel.logTypeTitle",defaultMessage:"{type}",values:{type:Object($.capitalize)(e.type)}})),Object(E.jsx)(R.EuiDescriptionListDescription,null,function(e){return Object(E.jsx)(R.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"xs"},e.levels.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{grow:!1,key:t},Object(E.jsx)(R.EuiToolTip,{position:"top",content:ei[e.level]||ei.unknown},Object(E.jsx)(R.EuiBadge,{color:Za(e.level)},mt(e.count,"int_commas")))))))}(e))))),0===e.logs.types.length?Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logsPanel.noLogsFound",defaultMessage:"No logs found."}):null):Object(E.jsx)(R.EuiDescriptionList,null,Object(E.jsx)(Zt,{reason:e.logs.reason}))}(e)))));var f}const ni=[m.N];function ri(e){const t=e.setupMode,s=e.alerts,a=r.a.useContext(Le),{staleStatusThresholdSeconds:i}=r.a.useContext(g),n=t.enabled&&Object($.get)(t.data,"kibana.detected.doesExist",!1);if(!e.count&&!n)return null;const o=()=>fe("#/kibana/instances"),l=Object($.get)(t.data,"kibana"),c=ne(K.d.MetricbeatMigration)?Object(E.jsx)(Qa,{setupModeData:l,productName:m.B,badgeClickLink:o()}):null;let u=null;if(Xa(s,ni,a)){const e=ni.map((e=>s[e]));u=Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(tt,{alerts:e}))}return Object(E.jsx)(Wa,U()({},e,{statusIndicator:oi(e.status,e.some_status_is_stale,o(),i),url:"kibana",title:_.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.kibanaTitle",{defaultMessage:"Kibana"})}),Object(E.jsx)(R.EuiFlexGrid,{columns:4},Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(Ya,{setupModeEnabled:t.enabled,setupModeData:l,href:fe("#/kibana"),"aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.overviewLinkAriaLabel",{defaultMessage:"Kibana Overview"}),"data-test-subj":"kbnOverview"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column","data-test-subj":"kibana_overview","data-overview-status":e.status},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.requestsLabel",defaultMessage:"Requests"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"kbnRequests"},e.requests_total),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.maxResponseTimeLabel",defaultMessage:"Max. Response Time"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"kbnMaxResponseTime"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.maxResponseTimeDescription",defaultMessage:"{maxTime} ms",values:{maxTime:e.response_time_max}})),e.rules.instance&&e.rules.cluster&&Object(E.jsx)(r.a.Fragment,null,Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.ruleFailuresLabel",defaultMessage:"Rule Success Ratio"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"kbnRuleFailures"},dt(e.rules.instance.executions-e.rules.instance.failures,e.rules.instance.executions)),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.queuedRulesCountLabel",defaultMessage:"Queued Rules"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"kbnQueuedRules"},e.rules.cluster.overdue.count))))),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(R.EuiLink,{href:o(),"data-test-subj":"kbnInstances","aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.instancesCountLinkAriaLabel",{defaultMessage:"Kibana Instances: {instancesCount}",values:{instancesCount:e.count}})},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.instancesCountLinkLabel",defaultMessage:"Instances: {instancesCount}",values:{instancesCount:Object(E.jsx)("span",{"data-test-subj":"number_of_kibana_instances"},e.count)}}))))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},c,u))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.connectionsLabel",defaultMessage:"Connections"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"kbnConnections"},mt(e.concurrent_connections,"int_commas")),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.memoryUsageLabel",defaultMessage:"Memory Usage"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"kbnMemoryUsage"},Object(E.jsx)(Ja,{usedBytes:e.memory_size,maxBytes:e.memory_limit})))))))}function oi(e,t,s,a){if(!t)return Object(E.jsx)(qa,{status:e,product:"kb"});const i=_.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from some instances.",values:{staleStatusThresholdSeconds:a}});return Object(E.jsx)(r.a.Fragment,null,Object(E.jsx)("div",{style:{marginBottom:"8px"}},Object(E.jsx)(R.EuiToolTip,{position:"top",content:i},Object(E.jsx)(R.EuiBadge,{iconType:"alert",color:"warning","data-test-subj":"status"},_.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.staleStatusLabel",{defaultMessage:"Stale"})))),Object(E.jsx)(R.EuiLink,{href:s},_.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.staleStatusLinkToInstancesLabel",{defaultMessage:"View all instances"})))}const li=[m.Q];function ci(e){const{setupMode:t}=e,s=e.node_count||0,a=e.queue_types||{},i=e.alerts,n=r.a.useContext(Le);if(!s&&!t.enabled)return null;const o=()=>fe("#/logstash/nodes"),l=Object($.get)(t.data,"logstash"),c=ne(K.d.MetricbeatMigration)?Object(E.jsx)(Qa,{setupModeData:l,productName:m.F,badgeClickLink:o()}):null;let u=null;if(Xa(i,li,n)){const e=li.map((e=>i[e]));u=Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(tt,{alerts:e}))}return Object(E.jsx)(Wa,U()({},e,{url:"logstash",title:_.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.logstashTitle",{defaultMessage:"Logstash"})}),Object(E.jsx)(R.EuiFlexGrid,{columns:4},Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(Ya,{setupModeEnabled:t.enabled,setupModeData:l,href:fe("#/logstash"),"data-test-subj":"lsOverview","aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.overviewLinkAriaLabel",{defaultMessage:"Logstash Overview"})},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column","data-test-subj":"logstash_overview"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.eventsReceivedLabel",defaultMessage:"Events Received"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"lsEventsReceived"},mt(e.events_in_total,"0.[0]a")),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.eventsEmittedLabel",defaultMessage:"Events Emitted"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"lsEventsEmitted"},mt(e.events_out_total,"0.[0]a"))))),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(R.EuiLink,{href:o(),"data-test-subj":"lsNodes","aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.nodesCountLinkAriaLabel",{defaultMessage:"Logstash Nodes: {nodesCount}",values:{nodesCount:s}})},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.nodesCountLinkLabel",defaultMessage:"Nodes: {nodesCount}",values:{nodesCount:Object(E.jsx)("span",{"data-test-subj":"number_of_logstash_instances"},s)}}))))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},c,u))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"lsUptime"},e.max_uptime?mt(e.max_uptime,"time_since"):0),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.jvmHeapLabel",defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"lsJvmHeap"},Object(E.jsx)(Ja,{usedBytes:e.avg_memory_used,maxBytes:e.avg_memory}))))),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(Ya,{setupModeEnabled:t.enabled,setupModeData:l,href:fe("#/logstash/pipelines"),"data-test-subj":"lsPipelines","aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.pipelineCountLinkAriaLabel",{defaultMessage:"Logstash Pipelines: {pipelineCount}",values:{pipelineCount:e.pipeline_count}})},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.pipelinesCountLinkLabel",defaultMessage:"Pipelines: {pipelineCount}",values:{pipelineCount:Object(E.jsx)("span",{"data-test-subj":"number_of_logstash_pipelines"},e.pipeline_count)}})))))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.withMemoryQueuesLabel",defaultMessage:"With Memory Queues"})),Object(E.jsx)(R.EuiDescriptionListDescription,null,a[m.E.QUEUE_TYPES.MEMORY]||0),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.withPersistentQueuesLabel",defaultMessage:"With Persistent Queues"})),Object(E.jsx)(R.EuiDescriptionListDescription,null,a[m.E.QUEUE_TYPES.PERSISTED]||0))))))}function ui(e){const{setupMode:t}=e,s=Object($.get)(e,"beats.total")||0;if(0===s&&!t.enabled)return null;const a=Object($.get)(t.data,"beats"),i=ne(K.d.MetricbeatMigration)?Object(E.jsx)(Qa,{setupModeData:a,productName:m.b,badgeClickLink:fe("#/beats/beats")}):null,n=Object($.get)(e,"beats.types",[]).map(((e,t)=>[Object(E.jsx)(R.EuiDescriptionListTitle,{key:`beat-types-type-${t}`,"data-test-subj":"beatTypeCount","data-test-beat-type-count":e.type+":"+e.count},e.type),Object(E.jsx)(R.EuiDescriptionListDescription,{key:`beat-types-count-${t}`},e.count)]));return Object(E.jsx)(Wa,U()({},e,{url:"beats",title:_.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.beatsTitle",{defaultMessage:"Beats"})}),Object(E.jsx)(R.EuiFlexGrid,{columns:4},Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(Ya,{setupModeEnabled:t.enabled,setupModeData:a,href:fe("#/beats"),"aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.overviewLinkAriaLabel",{defaultMessage:"Beats Overview"}),"data-test-subj":"beatsOverview"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.totalEventsLabel",defaultMessage:"Total Events"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"beatsTotalEvents"},gt(e.totalEvents,"0.[0]a")),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.bytesSentLabel",defaultMessage:"Bytes Sent"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"beatsBytesSent"},gt(e.bytesSent,"byte"))))),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(R.EuiLink,{href:fe("#/beats/beats"),"aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.instancesTotalLinkAriaLabel",{defaultMessage:"Beats Instances: {beatsTotal}",values:{beatsTotal:s}}),"data-test-subj":"beatsListing"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.beatsTotalLinkLabel",defaultMessage:"Beats: {beatsTotal}",values:{beatsTotal:Object(E.jsx)("span",{"data-test-subj":"beatsTotal"},s)}}))))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},n)))))}const di=e=>e?_.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.apmFleetTitle",{defaultMessage:"Integrations server"}):_.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.apmTitle",{defaultMessage:"APM server"});function mi(e){const{setupMode:t,versions:s}=e,a=Object($.get)(e,"apms.total")||0;if(0===a&&!t.enabled)return null;const i=sa(s),{link:n,aria:r}=((e,t)=>{const s=Object(E.jsx)("span",{"data-test-subj":"apmsTotal"},t),a={};return e?(a.link=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.agentServersTotalLinkLabel",defaultMessage:"Integrations Servers: {apmsTotal}",values:{apmsTotal:s}}),a.aria=_.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.instancesAndFleetsTotalLinkAriaLabel",{defaultMessage:"Integrations server instances: {apmsTotal}",values:{apmsTotal:s}}),a):(a.link=Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.serversTotalLinkLabel",defaultMessage:"APM servers: {apmsTotal}",values:{apmsTotal:s}}),a.aria=_.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.instancesTotalLinkAriaLabel",{defaultMessage:"APM server instances: {apmsTotal}",values:{apmsTotal:s}}),a)})(i,a),o=(e=>e?_.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.overviewFleetLinkLabel",{defaultMessage:"Integrations server overview"}):_.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.overviewLinkLabel",{defaultMessage:"APM server overview"}))(i),l=()=>fe("#/apm/instances"),c=Object($.get)(t.data,"apm"),u=ne(K.d.MetricbeatMigration)?Object(E.jsx)(Qa,{setupModeData:c,badgeClickLink:l(),productName:m.a}):null;return Object(E.jsx)(Wa,U()({},e,{url:"apm",title:di(i)}),Object(E.jsx)(R.EuiFlexGrid,{columns:4},Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(Ya,{setupModeEnabled:t.enabled,setupModeData:c,href:fe("#/apm"),"aria-label":o,"data-test-subj":"apmOverview"},o))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.processedEventsLabel",defaultMessage:"Processed Events"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"apmsTotalEvents"},gt(e.totalEvents,"0.[0]a")),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.lastEventLabel",defaultMessage:"Last Event"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"apmsBytesSent"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.lastEventDescription",defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:Ne(+Pe()(e.timeOfLastEvent),m.c)}}))))),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(R.EuiLink,{href:l(),"aria-label":r,"data-test-subj":"apmListing"},n)))),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},u))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.memoryUsageLabel",defaultMessage:"Memory Usage (delta)"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"apmMemoryUsage"},Object(E.jsx)(Ka,{usedBytes:e.memRss})))))))}function gi(e){const{setupMode:t}=e,s=Object($.get)(t.data,"enterprise_search"),a=e.stats.totalInstances||0;return a||t.enabled?Object(E.jsx)(Wa,U()({},e,{url:"enterprise_search",title:_.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.entSearchTitle",{defaultMessage:"Enterprise Search"})}),Object(E.jsx)(R.EuiFlexGrid,{columns:4},Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",null,Object(E.jsx)(Ya,{setupModeEnabled:t.enabled,setupModeData:s,href:fe("#/enterprise_search"),"aria-label":_.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.overviewLinkAriaLabel",{defaultMessage:"Enterprise Search Overview"}),"data-test-subj":"entSearchOverview"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.versionLabel",defaultMessage:"Version"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"entSearchVersion"},e.stats.versions[0]||_.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.versionNotAvailableDescription",{defaultMessage:"N/A"})),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.appSearchEngines",defaultMessage:"Engines"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"appSearchEngines"},e.stats.appSearchEngines),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.workplaceSearchOrgSources",defaultMessage:"Org Sources"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"workplaceSearchOrgSources"},e.stats.workplaceSearchOrgSources),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.workplaceSearchPrivateSources",defaultMessage:"Private Sources"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"workplaceSearchPrivateSources"},e.stats.workplaceSearchPrivateSources)))),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiPanel,{paddingSize:"m"},Object(E.jsx)(R.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h3",{"data-test-subj":"entSearchTotalNodes"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.nodesTotalLinkLabel",defaultMessage:"Nodes: {nodesTotal}",values:{nodesTotal:mt(a,"int_commas")}}))))),Object(E.jsx)(R.EuiHorizontalRule,{margin:"m"}),Object(E.jsx)(R.EuiDescriptionList,{type:"column"},Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.memoryUsageLabel",defaultMessage:"Memory Usage"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"entSearchMemoryUsage"},Object(E.jsx)(Ja,{usedBytes:e.stats.memUsed,maxBytes:e.stats.memTotal})),Object(E.jsx)(R.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(E.jsx)(R.EuiDescriptionListDescription,{"data-test-subj":"entSearchUptime"},mt(e.stats.uptime,"time_since"))))))):null}function pi(e){const t=e.cluster.cluster_uuid===m.Y;return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.overview.heading",defaultMessage:"Stack Monitoring Overview"}))),t?null:Object(E.jsx)(n.Fragment,null,Object(E.jsx)(ii,U()({},e.cluster.elasticsearch,{version:e.cluster.version,ml:e.cluster.ml,license:e.cluster.license,setupMode:e.setupMode,showLicenseExpiration:e.showLicenseExpiration,alerts:e.alerts})),Object(E.jsx)(ri,U()({},e.cluster.kibana,{setupMode:e.setupMode,alerts:e.alerts}))),Object(E.jsx)(ci,U()({},e.cluster.logstash,{setupMode:e.setupMode,alerts:e.alerts})),Object(E.jsx)(ui,U()({},e.cluster.beats,{setupMode:e.setupMode,alerts:e.alerts})),Object(E.jsx)(mi,U()({},e.cluster.apm,{setupMode:e.setupMode,alerts:e.alerts})),Object(E.jsx)(gi,U()({},e.cluster.enterpriseSearch,{setupMode:e.setupMode,alerts:e.alerts}))))}function ji(e){return e.cluster_uuid===m.Y&&(e.cluster_name="Standalone Cluster"),e}const bi=async({clusterUuid:e,timeRange:t,fetch:s,ccs:a,codePaths:i})=>{let n="../api/monitoring/v1/clusters";e&&(n+=`/${e}`);return(await s(n,{method:"POST",body:JSON.stringify({ccs:a,timeRange:t,codePaths:i})})).map(ji)},xi=async({alertTypeIds:e,filters:t,timeRange:s,clusterUuid:a,fetch:i})=>{const n=`../api/monitoring/v1/alert/${a}/status`;return await i(n,{method:"POST",body:JSON.stringify({alertTypeIds:e,filters:t,timeRange:s})})},hi=({alerts:e})=>{const[t,s]=Object(n.useState)(!1),a=Ws(),i=()=>{s(!1),a.hideModalForSession()},r=[{id:"create-alerts",label:_.i18n.translate("xpack.monitoring.alerts.modal.yesOption",{defaultMessage:"Yes (Recommended - create default rules in this kibana space)"})},{id:"not-create-alerts",label:_.i18n.translate("xpack.monitoring.alerts.modal.noOption",{defaultMessage:"No"})}],[o,l]=Object(n.useState)("create-alerts");return Object(n.useEffect)((()=>{a.shouldShowAlertsModal(e)&&s(!0)}),[a,e]),t?Object(E.jsx)(R.EuiModal,{onClose:i},Object(E.jsx)(R.EuiModalHeader,null,Object(E.jsx)(R.EuiModalHeaderTitle,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.modal.title",defaultMessage:"Create rules"})))),Object(E.jsx)(R.EuiModalBody,null,Object(E.jsx)(R.EuiText,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.modal.description",defaultMessage:"Stack monitoring comes with many out-of-the box rules to notify you of common issues around cluster health, resource utilization and errors or exceptions. {learnMoreLink}",values:{learnMoreLink:Object(E.jsx)(R.EuiLink,{href:v.a.shims.docLinks.links.monitoring.alertsKibana,target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.modal.description.link",defaultMessage:"Learn more..."}))}})),Object(E.jsx)("div",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.modal.createDescription",defaultMessage:"Create these out-of-the box rules?"}),Object(E.jsx)(R.EuiSpacer,{size:"xs"}),Object(E.jsx)(R.EuiRadioGroup,{options:r,idSelected:o,onChange:e=>{l(e)},name:"radio group"})))),Object(E.jsx)(R.EuiModalFooter,null,Object(E.jsx)(R.EuiButtonEmpty,{onClick:()=>{a.hideModalForSession(),i()},"data-test-subj":"alerts-modal-remind-later-button"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.modal.remindLater",defaultMessage:"Remind me later"})),Object(E.jsx)(R.EuiButton,{onClick:()=>{"create-alerts"===o?a.enableAlerts():a.notAskAgain(),i()},fill:!0,"data-test-subj":"alerts-modal-button"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.alerts.modal.confirm",defaultMessage:"Ok"})))):null},fi=[m.h],Oi=()=>{var e;const t=Object(n.useContext)(M),s=Object(n.useContext)(g),{services:a}=Object(i.useKibana)(),r=t.cluster_uuid,o=t.ccs,[l,c]=Object(n.useState)([]),[u,d]=Object(n.useState)({}),[m,p]=Object(n.useState)(!1),{generate:j}=L();let b=[];const x=_.i18n.translate("xpack.monitoring.cluster.overviewTitle",{defaultMessage:"Overview"}),h=_.i18n.translate("xpack.monitoring.cluster.overview.pageTitle",{defaultMessage:"Cluster overview"});m&&(b=[{id:"clusterName",label:l[0].cluster_name,testSubj:"overviewTabsclusterName",route:"/overview"}]);const f=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(t=a.http)&&void 0!==t&&t.fetch&&r){const e=await bi({fetch:a.http.fetch,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},ccs:o,clusterUuid:r,codePaths:fi});c(e);const t=await xi({fetch:a.http.fetch,clusterUuid:r,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});d(t),p(!0)}}),[o,r,null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter,a.http]);return Object(n.useEffect)((()=>{l&&l.length&&j(l[0].cluster_name)}),[l,j]),Object(E.jsx)(Qs,{title:x,pageTitle:h,tabs:b,getPageData:f},Object(E.jsx)(_a,{render:({setupMode:e,flyoutComponent:t,bottomBarComponent:a})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},t,Object(E.jsx)(pi,{cluster:l[0],alerts:u,setupMode:e,showLicenseExpiration:s.showLicenseExpiration}),a)}),Object(E.jsx)(hi,{alerts:u}))},vi=({cluster:e,...t})=>{const s=[{id:"overview",label:_.i18n.translate("xpack.monitoring.esNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/elasticsearch"},{id:"nodes",label:_.i18n.translate("xpack.monitoring.esNavigation.nodesLinkText",{defaultMessage:"Nodes"}),route:"/elasticsearch/nodes"},{id:"indices",label:_.i18n.translate("xpack.monitoring.esNavigation.indicesLinkText",{defaultMessage:"Indices"}),route:"/elasticsearch/indices"}];return e&&Ei(e.license)&&s.push({id:"ml",label:_.i18n.translate("xpack.monitoring.esNavigation.jobsLinkText",{defaultMessage:"Machine learning jobs"}),route:"/elasticsearch/ml_jobs"}),null!=e&&e.isCcrEnabled&&s.push({id:"ccr",label:_.i18n.translate("xpack.monitoring.esNavigation.ccrLinkText",{defaultMessage:"CCR"}),route:"/elasticsearch/ccr"}),Object(E.jsx)(Qs,U()({},t,{tabs:s,product:"elasticsearch"}))},Ei=e=>Object($.includes)(m.G,e.type);function Mi(e){return Math.floor(e/1e3)+"s"}s(90);const yi=e=>{const[t,s]=Object(n.useState)({});return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.heading",defaultMessage:"CCR"}))),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiPageContentBody_Deprecated,null,(()=>{const{data:a,alerts:i}=e,r=a;let o={initialPageSize:5,pageSizeOptions:[5,10,20]};return r.length<=o.initialPageSize&&(o=!1),Object(E.jsx)(R.EuiInMemoryTable,{className:"monitoringElasticsearchCcrListingTable",columns:[{field:"index",name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.indexColumnTitle",{defaultMessage:"Index"}),sortable:!0,render:(a,{shards:i})=>{const r=!!t[a];return Object(E.jsx)(R.EuiLink,{onClick:()=>((a,i)=>{const r={...t};if(r[a])delete r[a];else{let t={initialPageSize:5,pageSizeOptions:[5,10,20]};i.length<=t.initialPageSize&&(t=!1),r[a]=Object(E.jsx)(R.EuiInMemoryTable,{items:i,columns:[{field:"shardId",name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.shardColumnTitle",{defaultMessage:"Shard"}),render:e=>Object(E.jsx)(R.EuiLink,{href:fe(`#/elasticsearch/ccr/${a}/shard/${e}`)},e)},{render:()=>null},{field:"alerts",sortable:!0,name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.alertsColumnTitle",{defaultMessage:"Alerts"}),render:(t,s)=>Object(E.jsx)(st,{showBadge:!0,alerts:e.alerts,stateFilter:e=>e.meta.shardId===s.shardId})},{field:"syncLagOps",name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumnTitle",{defaultMessage:"Sync Lag (ops)"}),render:(e,t)=>Object(E.jsx)("span",null,e,"",Object(E.jsx)(R.EuiIconTip,{size:"m",type:"iInCircle",content:Object(E.jsx)(n.Fragment,null,Object(E.jsx)("span",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumn.leaderLagTooltip",defaultMessage:"Leader lag: {syncLagOpsLeader}",values:{syncLagOpsLeader:t.syncLagOpsLeader}})),Object(E.jsx)("br",null),Object(E.jsx)("span",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumn.followerLagTooltip",defaultMessage:"Follower lag: {syncLagOpsFollower}",values:{syncLagOpsFollower:t.syncLagOpsFollower}}))),position:"right"}))},{field:"syncLagTime",name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.lastFetchTimeColumnTitle",{defaultMessage:"Last fetch time"}),render:e=>Object(E.jsx)("span",null,Mi(e))},{field:"opsSynced",name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.opsSyncedColumnTitle",{defaultMessage:"Ops synced"})},{field:"error",name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.errorColumnTitle",{defaultMessage:"Error"}),render:e=>Object(E.jsx)(R.EuiTextColor,{color:"danger"},e)}],executeQueryOptions:{defaultFields:["shardId"]},sorting:!0,pagination:t})}s(r)})(a,i)},a,"",r?Object(E.jsx)(R.EuiIcon,{type:"arrowUp"}):Object(E.jsx)(R.EuiIcon,{type:"arrowDown"}))}},{field:"follows",sortable:!0,name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.followsColumnTitle",{defaultMessage:"Follows"})},{field:"alerts",sortable:!0,name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.alertsColumnTitle",{defaultMessage:"Alerts"}),render:(e,t)=>Object(E.jsx)(st,{showBadge:!0,alerts:i,stateFilter:e=>e.meta.followerIndex===t.index})},{field:"syncLagOps",sortable:!0,name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.syncLagOpsColumnTitle",{defaultMessage:"Sync Lag (ops)"})},{field:"syncLagTime",sortable:!0,name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.lastFetchTimeColumnTitle",{defaultMessage:"Last fetch time"}),render:e=>Object(E.jsx)("span",null,Mi(e))},{field:"opsSynced",sortable:!0,name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.opsSyncedColumnTitle",{defaultMessage:"Ops synced"})},{field:"error",sortable:!0,name:_.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.errorColumnTitle",{defaultMessage:"Error"}),render:e=>Object(E.jsx)(R.EuiTextColor,{color:"danger"},e)}],items:r,pagination:o,executeQueryOptions:{defaultFields:["index","follows"]},sorting:{sort:{field:"index",direction:"asc"}},itemId:"id",itemIdToExpandedRowMap:t})})()))))},ki=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{generate:a}=L(),{services:r}=Object(i.useKibana)(),o=s.cluster_uuid,l=Object($.find)(e,{cluster_uuid:o}),c=s.ccs,[u,d]=Object(n.useState)({}),[g,p]=Object(n.useState)({});Object(n.useEffect)((()=>{l&&a(l.cluster_name,{inElasticsearch:!0})}),[l,a]);const j=_.i18n.translate("xpack.monitoring.elasticsearch.ccr.title",{defaultMessage:"Elasticsearch - Ccr"}),b=_.i18n.translate("xpack.monitoring.elasticsearch.ccr.pageTitle",{defaultMessage:"Elasticsearch Ccr"}),x=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/elasticsearch/ccr`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&o){var i;const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));d(e);const t=await xi({fetch:r.http.fetch,alertTypeIds:[m.H],clusterUuid:o,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});p(t)}}),[c,o,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(E.jsx)(vi,{title:j,pageTitle:b,getPageData:x,"data-test-subj":"elasticsearchCcrPage",cluster:l},Object(E.jsx)(_a,{productName:m.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},e,Object(E.jsx)(yi,{data:u,alerts:g}),t)}))};function Si({stat:e,formattedLeader:t,oldestStat:s,alerts:a={}}){const i=e.follower_index||Object($.get)(e,"follower.index"),n="number"==typeof e.shard_id?e.shard_id:Object($.get)(e,"follower.shard.number"),r=e.operations_written||Object($.get)(e,"follower.operations_written"),o=e.failed_read_requests||Object($.get)(e,"requests.failed.read.count"),l=s.operations_written||Object($.get)(s,"follower.operations_written"),c=s.failed_read_requests||Object($.get)(s,"requests.failed.read.count"),u=[{label:_.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.alerts",{defaultMessage:"Alerts"}),value:Object(E.jsx)(st,{alerts:a,showOnlyCount:!0})},{label:_.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.followerIndexLabel",{defaultMessage:"Follower Index"}),value:i,"data-test-subj":"followerIndex"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.shardIdLabel",{defaultMessage:"Shard Id"}),value:n,"data-test-subj":"shardId"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.leaderIndexLabel",{defaultMessage:"Leader Index"}),value:t,"data-test-subj":"leaderIndex"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.opsSyncedLabel",{defaultMessage:"Ops Synced"}),value:gt(r-l,"int_commas"),"data-test-subj":"operationsReceived"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.failedFetchesLabel",{defaultMessage:"Failed Fetches"}),value:gt(o-c,"int_commas"),"data-test-subj":"failedFetches"}];return Object(E.jsx)(rt,{metrics:u,"data-test-subj":"ccrDetailStatus"})}function _i(e){var t;const{services:s}=Object(i.useKibana)(),a=null===(t=s.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),{metrics:r,stat:o,timestamp:l,oldestStat:c,formattedLeader:u,alerts:d}=e;return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Si,{stat:o,formattedLeader:u,oldestStat:c,alerts:d})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(ws,{alerts:d}),Object(E.jsx)(R.EuiSpacer,{size:"m"}),o.read_exceptions&&o.read_exceptions.length>0?Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(R.EuiTitle,{size:"s",color:"danger"},Object(E.jsx)("h3",null,Object(E.jsx)(R.EuiTextColor,{color:"danger"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccrShard.errorsTableTitle",defaultMessage:"Errors"})))),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiBasicTable,{items:o.read_exceptions,columns:[{name:_.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.errorsTable.typeColumnTitle",{defaultMessage:"Type"}),field:"exception.type"},{name:_.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.errorsTable.reasonColumnTitle",{defaultMessage:"Reason"}),field:"exception.reason",width:"75%"}]})),Object(E.jsx)(R.EuiHorizontalRule,null)):null,Object(E.jsx)(R.EuiFlexGroup,{wrap:!0},(()=>{const e=[r.ccr_sync_lag_ops,r.ccr_sync_lag_time].map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{style:{minWidth:"45%"},key:t},Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Qt,{series:e})))));return Object(E.jsx)(n.Fragment,null,e)})()),Object(E.jsx)(R.EuiHorizontalRule,null),Object(E.jsx)(R.EuiAccordion,{id:"ccrLatestStat",buttonContent:Object(E.jsx)(R.EuiTitle,null,Object(E.jsx)("h2",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccrShard.latestStateAdvancedButtonLabel",defaultMessage:"Advanced"}))),paddingSize:"l"},Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h2",null,qe(l,a))),Object(E.jsx)(R.EuiHorizontalRule,null),Object(E.jsx)(R.EuiCodeBlock,{language:"json"},JSON.stringify(o,null,2))))))}const Ti=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{services:a}=Object(i.useKibana)(),[r,o]=Object(n.useState)({}),{index:l,shardId:u}=Object(c.useParams)(),{generate:d}=L(),g=s.cluster_uuid,p=Object($.find)(e,{cluster_uuid:g});Object(n.useEffect)((()=>{p&&d(p.cluster_name,{inElasticsearch:!0,name:"ccr",instance:`Index: ${l} Shard: ${u}`})}),[p,d,l,u]);const j=s.ccs,[b,x]=Object(n.useState)({}),h=_.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.title",{defaultMessage:"Elasticsearch - Ccr - Shard"}),f=_.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.pageTitle",{defaultMessage:"Elasticsearch Ccr Shard - Index: {followerIndex} Shard: {shardId}",values:{followerIndex:Object($.get)(r,"stat.follower.index",Object($.get)(r,"stat.follower_index")),shardId:Object($.get)(r,"stat.follower.shard.number",Object($.get)(r,"stat.shard_id"))}}),O=_.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.instanceTitle",{defaultMessage:"Index: {followerIndex} Shard: {shardId}",values:{followerIndex:Object($.get)(r,"stat.follower_index"),shardId:Object($.get)(r,"stat.shard_id")}}),v=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${g}/elasticsearch/ccr/${l}/shard/${u}`;if(null!==(t=a.http)&&void 0!==t&&t.fetch&&g){var n;const e=await(null===(n=a.http)||void 0===n?void 0:n.fetch(i,{method:"POST",body:JSON.stringify({ccs:j,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));o(e);const t=await xi({fetch:a.http.fetch,alertTypeIds:[m.H],clusterUuid:g,filters:[{shardId:u}],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});x(t)}}),[j,g,null===(t=a.data)||void 0===t?void 0:t.query.timefilter.timefilter,a.http,l,u]);return Object(E.jsx)(Qs,{title:h,pageTitle:f,getPageData:v,"data-test-subj":"elasticsearchCcrShardPage"},Object(E.jsx)(_a,{productName:m.r,instance:O,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},e,Object(E.jsx)(_i,U()({},r,{alerts:b})),t)}))},wi=e=>{const{pageType:t,id:s,...a}=e,i=[{id:"overview",label:_.i18n.translate("xpack.monitoring.esItemNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:`/elasticsearch/${t}/${s}`},{id:"advanced",testSubj:"esItemDetailAdvancedLink",label:_.i18n.translate("xpack.monitoring.esItemNavigation.advancedLinkText",{defaultMessage:"Advanced"}),route:`/elasticsearch/${t}/${s}/advanced`}];return Object(E.jsx)(Qs,U()({},a,{tabs:i,product:"elasticsearch"}))};function Ci({stats:e,alerts:t={}}){const{dataSize:s,documents:a,totalShards:i,unassignedShards:r,status:o}=e,l=[{label:_.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.alerts",{defaultMessage:"Alerts"}),value:Object(E.jsx)(st,{alerts:t,showOnlyCount:!0})},{label:_.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.totalTitle",{defaultMessage:"Total"}),value:gt(s.total,"0.0 b"),"data-test-subj":"dataSize"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.primariesTitle",{defaultMessage:"Primaries"}),value:gt(s.primaries,"0.0 b"),"data-test-subj":"dataSizePrimaries"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.documentsTitle",{defaultMessage:"Documents"}),value:gt(a,"0.[0]a"),"data-test-subj":"documentCount"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.totalShardsTitle",{defaultMessage:"Total shards"}),value:gt(i,"int_commas"),"data-test-subj":"totalShards"},{label:_.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.unassignedShardsTitle",{defaultMessage:"Unassigned shards"}),value:gt(r,"int_commas"),"data-test-subj":"unassignedShards"}];return Object(E.jsx)(rt,{metrics:l,status:o,IconComponent:({status:e})=>Object(E.jsx)(n.Fragment,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indexDetailStatus.iconStatusLabel",defaultMessage:"Health: {elasticsearchStatusIcon}",values:{elasticsearchStatusIcon:Object(E.jsx)(ot,{status:e})}})),"data-test-subj":"elasticsearchIndexDetailStatus"})}const Ii=({indexSummary:e,metrics:t,alerts:s,...a})=>{const i=[t.index_3,t.index_4,t.index_total,t.index_time,t.index_refresh,t.index_throttling,t.index_disk,t.index_segment_count,t.index_latency];return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.index.advanced.heading",defaultMessage:"Elasticsearch index advanced view"}))),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Ci,{stats:e,alerts:s})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(ws,{alerts:s}),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},a)),Object(E.jsx)(R.EuiSpacer,null))))))))},Li=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{generate:a}=L(),{services:r}=Object(i.useKibana)(),{index:o}=Object(c.useParams)(),{zoomInfo:l,onBrush:u}=ea(),d=s.cluster_uuid,g=s.ccs,[p,j]=Object(n.useState)({}),[b,x]=Object(n.useState)({}),h=Object($.find)(e,{cluster_uuid:d});Object(n.useEffect)((()=>{h&&a(h.cluster_name,{inElasticsearch:!0,name:"indices",instance:o})}),[h,a,o]);const f=_.i18n.translate("xpack.monitoring.elasticsearch.index.advanced.title",{defaultMessage:"Elasticsearch - Indices - {indexName} - Advanced",values:{indexName:o}}),O=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${d}/elasticsearch/indices/${o}`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&d){var i;const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:g,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));j(e);const t=await xi({fetch:r.http.fetch,alertTypeIds:[m.O],filters:[{shardIndex:o}],clusterUuid:d,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});x(t)}}),[null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,d,o,g]);return Object(E.jsx)(wi,{title:f,getPageData:O,id:o,pageType:"indices",pageTitle:o},Object(E.jsx)(_a,{productName:m.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},t,Object(E.jsx)(Ii,{setupMode:e,alerts:b,indexSummary:p.indexSummary,metrics:p.metrics,onBrush:u,zoomInfo:l}),s)}))},Fi=({indexSummary:e,metrics:t,clusterUuid:s,indexUuid:a,logs:i,alerts:n,...r})=>{const o=[t.index_size,t.index_search_request_rate,t.index_request_rate,t.index_segment_count,t.index_document_count];return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Ci,{stats:e,alerts:n})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(ws,{alerts:n}),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},o.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},r)),Object(E.jsx)(R.EuiSpacer,null))))),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(logs_Logs,{logs:i,indexUuid:a,clusterUuid:s})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(Ds,r))))};function Pi(e,t){return e.map((e=>{const s=t[e.node];return e.nodeName=s&&s.name||null,e.type="shard",e.tooltip_message=function(e){const s=Object($.get)(Object($.find)(t,(t=>{return s=t,Object($.includes)(s.node_ids,e.relocating_node);var s})),"name");if(s){if("INITIALIZING"===e.state)return _.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.decorateShards.relocatingFromTextMessage",{defaultMessage:"Relocating from {nodeName}",values:{nodeName:s}});if("RELOCATING"===e.state)return _.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.decorateShards.relocatingToTextMessage",{defaultMessage:"Relocating to {nodeName}",values:{nodeName:s}})}const a=Object($.get)(e,"state",Object($.get)(e,"shard.state"));return Object($.upperFirst)(a.toLowerCase())}(e),e}))}const Ni={index:[{content:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.nodesLabel",{defaultMessage:"Nodes"})}],indexWithUnassigned:[{content:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.unassignedLabel",{defaultMessage:"Unassigned"})},{content:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.unassignedNodesLabel",{defaultMessage:"Nodes"})}],node:[{content:_.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.indicesLabel",{defaultMessage:"Indices"}),showToggleSystemIndicesComponent:!0}]},Di=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{generate:a}=L(),{services:r}=Object(i.useKibana)(),{index:o}=Object(c.useParams)(),{zoomInfo:l,onBrush:u}=ea(),d=s.cluster_uuid,g=s.ccs,[p,j]=Object(n.useState)({}),[b,x]=Object(n.useState)(Ni.index),[h,f]=Object(n.useState)([]),[O,v]=Object(n.useState)({}),y=Object($.find)(e,{cluster_uuid:d});Object(n.useEffect)((()=>{y&&a(y.cluster_name,{inElasticsearch:!0,name:"indices",instance:o})}),[y,a,o]);const k=_.i18n.translate("xpack.monitoring.elasticsearch.index.overview.title",{defaultMessage:"Elasticsearch - Indices - {indexName} - Overview",values:{indexName:o}}),S=_.i18n.translate("xpack.monitoring.elasticsearch.index.overview.pageTitle",{defaultMessage:"Index: {indexName}",values:{indexName:o}}),T=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${d}/elasticsearch/indices/${o}`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&d){var i;const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:g,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!1})}));j(e);const t=function(e,t){const s=Object($.reduce)(Pi(e,t),(function(e,s){return e=function(e,t){const s=t.index;return e[s]||(e[s]={id:s,name:s,children:[],unassigned:[],unassignedPrimaries:!1,type:"index"}),e}(e,s),e=function(e,s){const{node:a,index:i}=s;if(!s.node||null===s.node)return e[i].unassigned.push(s),s.primary&&(e[i].unassignedPrimaries=!0),e;let n=Object($.find)(e[i].children,{id:a});return n||(n={id:a,type:"node",name:t[a].name,node_type:t[a].type,ip_port:t[a].transport_address,children:[]},e[i].children.push(n)),n.children.push(s),e}(e,s),e}),{}),a=Object($.values)(s);return Object($.sortBy)(a,(e=>[!e.unassignedPrimaries,/^\./.test(e.name),e.name]))};f(t(e.shards,e.nodes)),e.shards.some((e=>"UNASSIGNED"===e.state))&&x(Ni.indexWithUnassigned);const n=await xi({fetch:r.http.fetch,alertTypeIds:[m.O],filters:[{shardIndex:o}],clusterUuid:d,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});v(n)}}),[null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,d,o,g]);return Object(E.jsx)(wi,{title:k,pageTitle:S,getPageData:T,id:o,pageType:"indices"},Object(E.jsx)(_a,{productName:m.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},t,Object(E.jsx)(Fi,U()({setupMode:e,labels:b,alerts:O,onBrush:u,indexUuid:o,clusterUuid:d,zoomInfo:l,nodesByIndices:h},p)),s)}))},Ri=(e,t)=>{const s="xpack.monitoring.data",a=()=>{const e=window.localStorage.getItem(s);let t={};try{t=e&&JSON.parse(e)||{}}catch(e){throw new Error("Monitoring UI: error parsing locally stored monitoring data")}return t},i=t=>{const i=a();i[e]=t,window.localStorage.setItem(s,JSON.stringify(i))},r=(()=>{const t=a();if(Object($.has)(t,e))return t[e]})();r||i(t);const o=r||t,[l,c]=Object(n.useState)(o);return[l,e=>{i(e),c(e)}]},zi=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{generate:a}=L(),{services:r}=Object(i.useKibana)(),{getPaginationTableProps:o}=ga("elasticsearch.indices"),l=s.cluster_uuid,c=s.ccs,u=Object($.find)(e,{cluster_uuid:l}),[d,g]=Object(n.useState)({}),[p,j]=Ri("showSystemIndices",!1),[b,x]=Object(n.useState)({});Object(n.useEffect)((()=>{u&&a(u.cluster_name,{inElasticsearch:!0})}),[u,a]);const h=_.i18n.translate("xpack.monitoring.elasticsearch.indices.routeTitle",{defaultMessage:"Elasticsearch - Indices"}),f=_.i18n.translate("xpack.monitoring.elasticsearch.indices.pageTitle",{defaultMessage:"Elasticsearch indices"}),O=Object(n.useCallback)((()=>j(!p)),[p,j]),v=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/elasticsearch/indices`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&l){var i;const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",query:{show_system_indices:p},body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(e);const t=await xi({fetch:r.http.fetch,clusterUuid:l,alertTypeIds:[m.O],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});x(t)}}),[null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,l,p,c]);return Object(E.jsx)(vi,{title:h,pageTitle:f,getPageData:v,"data-test-subj":"elasticsearchOverviewPage",cluster:u},Object(E.jsx)("div",{"data-test-subj":"elasticsearchIndicesListingPage"},Object(E.jsx)(_a,{productName:m.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},e,Object(E.jsx)(As,U()({clusterStatus:d.clusterStatus,indices:d.indices,alerts:b,showSystemIndices:p,toggleShowSystemIndices:O},o())),t)})))},Ai=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{generate:a}=L(),{services:r}=Object(i.useKibana)(),{getPaginationTableProps:o}=ga("elasticsearch.mlJobs"),l=s.cluster_uuid,c=s.ccs,u=Object($.find)(e,{cluster_uuid:l});Object(n.useEffect)((()=>{u&&a(u.cluster_name,{inElasticsearch:!0})}),[u,a]);const[d,g]=Object(n.useState)({}),p=_.i18n.translate("xpack.monitoring.elasticsearch.mlJobs.routeTitle",{defaultMessage:"Elasticsearch - Machine Learning Jobs"}),j=_.i18n.translate("xpack.monitoring.elasticsearch.mlJobs.pageTitle",{defaultMessage:"Elasticsearch machine learning jobs"}),b=Object(n.useCallback)((async()=>{var e,t,s;const a=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${l}/elasticsearch/ml_jobs`,n=await(null===(t=r.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));g({clusterStatus:null==n?void 0:n.clusterStatus,jobs:null==n||null===(s=n.rows)||void 0===s?void 0:s.map((e=>{var t;return"ml"in e&&null!==(t=e.ml)&&void 0!==t&&t.job?{...e.ml.job,node:e.node,job_id:e.ml.job.id}:e}))})}),[c,l,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(E.jsx)(vi,{title:p,pageTitle:j,getPageData:b,"data-test-subj":"elasticsearchOverviewPage",cluster:u},Object(E.jsx)("div",{"data-test-subj":"elasticsearchMLJobsListingPage"},Object(E.jsx)(_a,{productName:m.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},e,Object(E.jsx)(Vs,U()({clusterStatus:d.clusterStatus,jobs:d.jobs},o())),t)})))},Bi=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{showCgroupMetricsElasticsearch:a}=Object(n.useContext)(g),{services:o}=Object(i.useKibana)(),[l,c]=r.a.useState(!1),{generate:u}=L(),{getPaginationRouteOptions:d,updateTotalItemCount:p,getPaginationTableProps:j}=ga("elasticsearch.nodes"),b=s.cluster_uuid,x=s.ccs,h=Object($.find)(e,{cluster_uuid:b}),[f,O]=Object(n.useState)({}),[v,y]=Object(n.useState)({}),k=_.i18n.translate("xpack.monitoring.elasticsearch.nodes.routeTitle",{defaultMessage:"Elasticsearch - Nodes"}),S=_.i18n.translate("xpack.monitoring.elasticsearch.nodes.pageTitle",{defaultMessage:"Elasticsearch nodes"});Object(n.useEffect)((()=>{h&&u(h.cluster_name,{inElasticsearch:!0})}),[h,u]);const T=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${b}/elasticsearch/nodes`;if(null!==(t=o.http)&&void 0!==t&&t.fetch&&b){var i;c(!0);const e=await(null===(i=o.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:x,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...d()})}));c(!1),O(e),p(e.totalNodeCount);const t=await xi({fetch:o.http.fetch,clusterUuid:b,alertTypeIds:[m.J,m.L,m.W,m.X,m.R,m.S],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});y(t)}}),[null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http,b,x,d,p]);return Object(E.jsx)(vi,{title:k,pageTitle:S,getPageData:T,"data-test-subj":"elasticsearchOverviewPage",cluster:h},Object(E.jsx)("div",{"data-test-subj":"elasticsearchNodesListingPage"},Object(E.jsx)(_a,{productName:m.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:i})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},t,Object(E.jsx)(Ss,U()({clusterStatus:f.clusterStatus,clusterUuid:s.cluster_uuid,setupMode:e,nodes:f.nodes,alerts:v,isLoading:l,showCgroupMetricsElasticsearch:a},j())),i)})))},Vi=({nodeSummary:e,metrics:t,alerts:s,...a})=>{const i=[t.node_gc,t.node_gc_time,t.node_jvm_mem,t.node_cpu_utilization,t.node_index_3,t.node_index_4,t.node_index_time,t.node_request_total,t.node_index_threads,t.node_read_threads,t.node_cgroup_cpu,t.node_cgroup_stats,t.node_latency];return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.elasticsearch.nodes.advanced.heading",defaultMessage:"Elasticsearch node advanced"}))),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Ts,{stats:e,alerts:s})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(ws,{alerts:s}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},a)),Object(E.jsx)(R.EuiSpacer,null))))))))},Ui=({clusters:e})=>{var t,s,a,r;const o=Object(n.useContext)(M),{generate:l}=L(),{zoomInfo:u,onBrush:d}=ea(),[g,p]=Object(n.useState)({}),{node:j}=Object(c.useParams)(),{services:b}=Object(i.useKibana)(),x=o.cluster_uuid,h=o.ccs,[f,O]=Object(n.useState)({}),v=Object($.find)(e,{cluster_uuid:x});Object(n.useEffect)((()=>{var e;v&&l(v.cluster_name,{inElasticsearch:!0,name:"nodes",instance:null==g||null===(e=g.nodeSummary)||void 0===e?void 0:e.name})}),[v,l,null==g||null===(t=g.nodeSummary)||void 0===t?void 0:t.name]);const y=_.i18n.translate("xpack.monitoring.elasticsearch.node.advanced.title",{defaultMessage:"Elasticsearch - Nodes - {nodeName} - Advanced",values:{nodeName:null==g||null===(s=g.nodeSummary)||void 0===s?void 0:s.name}}),k=_.i18n.translate("xpack.monitoring.elasticsearch.node.advanced.pageTitle",{defaultMessage:"Elasticsearch node: {nodeName}",values:{nodeName:null==g||null===(a=g.nodeSummary)||void 0===a?void 0:a.name}}),S=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=b.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${x}/elasticsearch/nodes/${j}`;if(null!==(t=b.http)&&void 0!==t&&t.fetch&&x){var i;const e=await(null===(i=b.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:h,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));p(e);const t=await xi({fetch:b.http.fetch,clusterUuid:x,alertTypeIds:[m.J,m.W,m.X,m.S,m.L,m.R],filters:[{nodeUuid:j}],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});O(t)}}),[h,x,null===(r=b.data)||void 0===r?void 0:r.query.timefilter.timefilter,b.http,j]);return Object(E.jsx)(wi,{title:y,pageTitle:k,getPageData:S,id:j,pageType:"nodes"},Object(E.jsx)(Vi,{nodeSummary:g.nodeSummary,alerts:f,metrics:g.metrics,onBrush:d,zoomInfo:u}))};function $i(e){return Object($.some)(e.children,{primary:!0})}const Gi=({clusters:e})=>{var t,s,a,r;const o=Object(n.useContext)(M),{generate:l}=L(),{zoomInfo:u,onBrush:d}=ea(),[g,p]=Ri("showSystemIndices",!1),[j,b]=Object(n.useState)({}),{node:x}=Object(c.useParams)(),{services:h}=Object(i.useKibana)(),[f,O]=Object(n.useState)({}),v=o.cluster_uuid,y=Object($.find)(e,{cluster_uuid:v});Object(n.useEffect)((()=>{var e;y&&l(y.cluster_name,{inElasticsearch:!0,name:"nodes",instance:null==f||null===(e=f.nodeSummary)||void 0===e?void 0:e.name})}),[y,l,null==f||null===(t=f.nodeSummary)||void 0===t?void 0:t.name]);const k=o.ccs,[S,T]=Object(n.useState)([]),w=_.i18n.translate("xpack.monitoring.elasticsearch.node.overview.title",{defaultMessage:"Elasticsearch - Nodes - {nodeName} - Overview",values:{nodeName:null==f||null===(s=f.nodeSummary)||void 0===s?void 0:s.name}}),C=_.i18n.translate("xpack.monitoring.elasticsearch.node.overview.pageTitle",{defaultMessage:"Elasticsearch node: {node}",values:{node:null==f||null===(a=f.nodeSummary)||void 0===a?void 0:a.name}}),I=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=h.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${v}/elasticsearch/nodes/${x}`;if(null!==(t=h.http)&&void 0!==t&&t.fetch&&v){var i;const e=await(null===(i=h.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({showSystemIndices:g,ccs:k,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!1})}));O(e);const t=function(e,t){let s={};Object($.some)(e,(function(e){return"UNASSIGNED"===e.state}))&&(s.unassigned={name:"Unassigned",master:!1,type:"node",children:[]}),s=Object($.reduce)(Pi(e,t),(function(e,s){const a=Object($.get)(s,"node.name",s.node||"unassigned"),i=Object($.get)(s,"index.name",s.index);e[a]||function(e,t,s){t.type="node",t.children=[];const a=function(e){return"true"===(e.attributes||{}).master?"master":"normal"}(t);"normal"!==a&&"data"!==a||(e[s]=t)}(e,t[a],a);let n=Object($.find)(e[a].children,{id:i});return n||(n={id:i,name:i,type:"index",children:[]},e[a].children.push(n)),n.children.push(s),e}),s);const a=Object($.values)(s);return Object($.sortBy)(a,(function(e){return["Unassigned"!==e.name,!e.master,e.name]})).map((function(e){return"Unassigned"===e.name&&(e.unassignedPrimaries=e.children.some($i)),e}))};T(t(e.shards,e.nodes));const n=await xi({fetch:h.http.fetch,alertTypeIds:[m.J,m.W,m.X,m.S,m.L,m.R],filters:[{nodeUuid:x}],clusterUuid:v,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});b(n)}}),[null===(r=h.data)||void 0===r?void 0:r.query.timefilter.timefilter,h.http,v,x,g,k]),F=Object(n.useCallback)((()=>{p(!g)}),[g,p]);return Object(E.jsx)(wi,{title:w,pageTitle:C,getPageData:I,id:x,pageType:"nodes"},Object(E.jsx)(_a,{productName:m.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},t,Object(E.jsx)(Rs,U()({alerts:j,labels:Ni.node,nodeId:x,clusterUuid:v,onBrush:d,zoomInfo:u,toggleShowSystemIndices:F,showSystemIndices:g,nodesByIndices:S},f)),s)}))},qi=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{zoomInfo:a,onBrush:r}=ea(),{services:o}=Object(i.useKibana)(),{generate:l}=L(),c=s.cluster_uuid,u=s.ccs,d=Object($.find)(e,{cluster_uuid:c}),[m,g]=Object(n.useState)(null),[p,j]=Object(n.useState)(!1),b=()=>{j(!p)},x=_.i18n.translate("xpack.monitoring.elasticsearch.overview.title",{defaultMessage:"Elasticsearch"}),h=_.i18n.translate("xpack.monitoring.elasticsearch.overview.pageTitle",{defaultMessage:"Elasticsearch overview"});Object(n.useEffect)((()=>{d&&l(d.cluster_name,{inElasticsearch:!0})}),[d,l]);const f=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${c}/elasticsearch`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(i)}),[u,c,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(E.jsx)(vi,{title:x,pageTitle:h,getPageData:f,"data-test-subj":"elasticsearchOverviewPage",cluster:d},Object(E.jsx)("div",{"data-test-subj":"elasticsearchOverviewPage"},(e=>{if(null===e)return null;const{clusterStatus:t,metrics:s,shardActivity:i,logs:n}=e||{},o=i&&(e=>e.filter((e=>p||"DONE"!==e.stage)))(i);return Object(E.jsx)(us,{clusterStatus:t,metrics:s,logs:n,cluster:d,shardActivity:o,onBrush:r,showShardActivityHistory:p,toggleShardActivityHistory:b,zoomInfo:a,"data-test-subj":"elasticsearchOverviewPage"})})(m)))},Hi=e=>Object(E.jsx)(Qs,U()({},e,{product:"enterprise_search"}));function Wi({stats:e}){const t=[{label:_.i18n.translate("xpack.monitoring.entSearch.overview.instances",{defaultMessage:"Instances"}),value:gt(e.totalInstances,"int_commas"),"data-test-subj":"totalInstances"},{label:_.i18n.translate("xpack.monitoring.entSearch.overview.appSearchEngines",{defaultMessage:"App Search Engines"}),value:gt(e.appSearchEngines,"int_commas"),"data-test-subj":"appSearchEngines"},{label:_.i18n.translate("xpack.monitoring.entSearch.overview.workplaceSearchOrgSources",{defaultMessage:"Org Content Sources"}),value:gt(e.workplaceSearchOrgSources,"int_commas"),"data-test-subj":"workplaceSearchOrgSources"},{label:_.i18n.translate("xpack.monitoring.entSearch.overview.workplaceSearchPrivateSources",{defaultMessage:"Private Content Sources"}),value:gt(e.workplaceSearchPrivateSources,"int_commas"),"data-test-subj":"workplaceSearchPrivateSources"}];return Object(E.jsx)(rt,{metrics:t,"data-test-subj":"entSearchSummaryStatus"})}const Ki=({metrics:e,stats:t,...s})=>{const a=[e.enterprise_search_heap,e.enterprise_search_jvm_finalizer_queue,e.enterprise_search_gc_time,e.enterprise_search_gc_rate,e.enterprise_search_threads,e.enterprise_search_threads_rate],i=[e.enterprise_search_http_traffic,e.enterprise_search_http_responses,e.enterprise_search_http_connections_current,e.enterprise_search_http_connections_rate],n=[e.app_search_total_engines,e.crawler_workers],r=[e.workplace_search_total_sources];return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.heading",defaultMessage:"Enterprise Search Overview"}))),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Wi,{stats:t})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.networkingSummary",defaultMessage:"Network Traffic Summary"}))),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},s)),Object(E.jsx)(R.EuiSpacer,null)))))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.lowLevelSummary",defaultMessage:"Low Level Resource Usage Summary"}))),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},s)),Object(E.jsx)(R.EuiSpacer,null)))))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.appSearchSummary",defaultMessage:"App Search Summary"}))),Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},n.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},s)),Object(E.jsx)(R.EuiSpacer,null)))))),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.workplaceSearchSummary",defaultMessage:"Workplace Search Summary"}))),Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},r.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},s)),Object(E.jsx)(R.EuiSpacer,null))))))))},Ji=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{zoomInfo:a,onBrush:r}=ea(),{services:o}=Object(i.useKibana)(),l=s.cluster_uuid,c=s.ccs,{generate:u}=L(),d=Object($.find)(e,{cluster_uuid:l}),[m,g]=Object(n.useState)(null),p=_.i18n.translate("xpack.monitoring.entSearch.overview.routeTitle",{defaultMessage:"Enterprise Search - Overview"}),j=_.i18n.translate("xpack.monitoring.entSearch.overview.pageTitle",{defaultMessage:"Enterprise Search Overview"});Object(n.useEffect)((()=>{d&&u(d.cluster_name,{inEnterpriseSearch:!0})}),[d,u]);const b=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/enterprise_search`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(i)}),[c,l,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(E.jsx)(Hi,{title:p,pageTitle:j,getPageData:b,"data-test-subj":"entSearchOverviewPage"},Object(E.jsx)("div",{"data-test-subj":"entSearchOverviewPage"},m&&Object(E.jsx)(Ki,U()({},m,{onBrush:r,zoomInfo:a}))))};s(95);const Yi=({isSupported:e,children:t})=>e?t:"-",Qi=e=>{const{alertsMeta:t={enabled:!0}}=e.cluster.alerts;if(t.enabled)return Object(E.jsx)("span",null,e.children);const s=_.i18n.translate("xpack.monitoring.cluster.listing.unknownHealthMessage",{defaultMessage:"Unknown"});return Object(E.jsx)(R.EuiToolTip,{content:s,position:"bottom"},Object(E.jsx)(R.EuiHealth,{color:"subdued","data-test-subj":"alertIcon"},"N/A"))},Xi="viewedStandaloneCluster",Zi=(e,t,s,a)=>{e.$evalAsync((()=>{t.cluster_uuid=s,t.ccs=a,t.save(),window.history.replaceState(null,null,"#/overview")}))},en=(e,{title:t,text:s})=>{e.$evalAsync((()=>{v.a.shims.toastNotifications.addWarning({title:t,text:s,"data-test-subj":"monitoringLicenseWarning"})}))},tn=(e,t,s)=>{en(e,{title:_.i18n.translate("xpack.monitoring.cluster.listing.incompatibleLicense.warningMessageTitle",{defaultMessage:"You can't view the {clusterName} cluster",values:{clusterName:'"'+s+'"'}}),text:Object(i.toMountPoint)(Object(E.jsx)(n.Fragment,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.noMultiClusterSupportMessage",defaultMessage:"The Basic license does not support multi-cluster monitoring."})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.infoMessage",defaultMessage:"Need to monitor multiple clusters? {getLicenseInfoLink} to enjoy multi-cluster monitoring.",values:{getLicenseInfoLink:Object(E.jsx)(R.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.getLicenseLinkLabel",defaultMessage:"Get a license with full functionality"}))}}))),{theme$:t})})},sn=(e,t,s)=>{const a=`${v.a.shims.getBasePath()}/app/management/stack/license_management/home`;en(e,{title:_.i18n.translate("xpack.monitoring.cluster.listing.invalidLicense.warningMessageTitle",{defaultMessage:"You can't view the {clusterName} cluster",values:{clusterName:'"'+s+'"'}}),text:Object(i.toMountPoint)(Object(E.jsx)(n.Fragment,null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.invalidInfoMessage",defaultMessage:"The license information is invalid."})),Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.infoMessage",defaultMessage:"Need a license? {getBasicLicenseLink} or {getLicenseInfoLink} to enjoy multi-cluster monitoring.",values:{getBasicLicenseLink:Object(E.jsx)(R.EuiLink,{href:a},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.getBasicLicenseLinkLabel",defaultMessage:"Get a free Basic license"})),getLicenseInfoLink:Object(E.jsx)(R.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.getLicenseLinkLabel",defaultMessage:"Get a license with full functionality"}))}}))),{theme$:t})})},an=({changeCluster:e,storage:t})=>t.get(Xi)?null:Object(E.jsx)("div",null,Object(E.jsx)(R.EuiCallOut,{color:"warning",title:_.i18n.translate("xpack.monitoring.cluster.listing.standaloneClusterCallOutTitle",{defaultMessage:"It looks like you have instances that aren't connected to an Elasticsearch cluster."}),iconType:"link"},Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{onClick:()=>e(m.Y),"data-test-subj":"standaloneClusterLink"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutLink",defaultMessage:"View these instances."})),"",Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutText",defaultMessage:"Or, click Standalone Cluster in the table below"})),Object(E.jsx)("p",null,Object(E.jsx)(R.EuiLink,{onClick:()=>{t.set(Xi,!0)}},Object(E.jsx)(R.EuiIcon,{type:"cross"}),"",Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutDismiss",defaultMessage:"Dismiss"})))),Object(E.jsx)(R.EuiSpacer,null)),nn=({angular:e,clusters:t,sorting:s,pagination:a,onTableChange:n})=>{const{services:r}=Object(i.useKibana)(),o=Object($.partial)(Zi,e.scope,e.globalState),l=Object($.partial)(tn,e.scope,r.theme.theme$),c=Object($.partial)(sn,e.scope,r.theme.theme$),u=!!t.find((e=>e.cluster_uuid===m.Y));return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPageContent_Deprecated,null,u?Object(E.jsx)(an,{changeCluster:o,storage:e.storage}):null,Object(E.jsx)(kt,{className:"clusterTable",rows:t,columns:(d=e.showLicenseExpiration,g=l,p=c,[{name:_.i18n.translate("xpack.monitoring.cluster.listing.nameColumnTitle",{defaultMessage:"Name"}),field:"cluster_name",sortable:!0,render:(e,t)=>t.isSupported?Object(E.jsx)(R.EuiLink,{href:fe("#/overview",{cluster_uuid:t.cluster_uuid}),"data-test-subj":"clusterLink"},e):t.license?Object(E.jsx)(R.EuiLink,{onClick:()=>g(t.cluster_name),"data-test-subj":"clusterLink"},e):Object(E.jsx)(R.EuiLink,{onClick:()=>p(t.cluster_name),"data-test-subj":"clusterLink"},e)},{name:_.i18n.translate("xpack.monitoring.cluster.listing.statusColumnTitle",{defaultMessage:"Alerts Status"}),field:"status","data-test-subj":"alertsStatus",sortable:!0,render:(e,t)=>Object(E.jsx)(Yi,t,Object(E.jsx)(Qi,{cluster:t},Object(E.jsx)(st,{alerts:t.alerts.list,showBadge:!1})))},{name:_.i18n.translate("xpack.monitoring.cluster.listing.nodesColumnTitle",{defaultMessage:"Nodes"}),field:"elasticsearch.cluster_stats.nodes.count.total","data-test-subj":"nodesCount",sortable:!0,render:(e,t)=>Object(E.jsx)(Yi,t,"number"==typeof e?ct()(e).format("0,0"):0)},{name:_.i18n.translate("xpack.monitoring.cluster.listing.indicesColumnTitle",{defaultMessage:"Indices"}),field:"elasticsearch.cluster_stats.indices.count","data-test-subj":"indicesCount",sortable:!0,render:(e,t)=>Object(E.jsx)(Yi,t,ct()(e).format("0,0"))},{name:_.i18n.translate("xpack.monitoring.cluster.listing.dataColumnTitle",{defaultMessage:"Data"}),field:"elasticsearch.cluster_stats.indices.store.size_in_bytes","data-test-subj":"dataSize",sortable:!0,render:(e,t)=>Object(E.jsx)(Yi,t,ct()(e).format("0,0[.]0 b"))},{name:_.i18n.translate("xpack.monitoring.cluster.listing.logstashColumnTitle",{defaultMessage:"Logstash"}),field:"logstash.node_count","data-test-subj":"logstashCount",sortable:!0,render:(e,t)=>Object(E.jsx)(Yi,t,ct()(e).format("0,0"))},{name:_.i18n.translate("xpack.monitoring.cluster.listing.kibanaColumnTitle",{defaultMessage:"Kibana"}),field:"kibana.count","data-test-subj":"kibanaCount",sortable:!0,render:(e,t)=>Object(E.jsx)(Yi,t,ct()(e).format("0,0"))},{name:_.i18n.translate("xpack.monitoring.cluster.listing.licenseColumnTitle",{defaultMessage:"License"}),field:"license.type","data-test-subj":"clusterLicense",sortable:!0,render:(e,t)=>{const s=t.license;if(!e)return Object(E.jsx)("div",null,Object(E.jsx)("div",{className:"monTableCell__clusterCellLicense"},"N/A"));if(s){const t=()=>s.expiry_date_in_millis<Pe()().valueOf()?Object(E.jsx)("span",{className:"monTableCell__clusterCellExpired"},"Expired"):Object(E.jsx)("span",null,"Expires ",Pe()(s.expiry_date_in_millis).format("D MMM YY"));return Object(E.jsx)("div",null,Object(E.jsx)("div",{className:"monTableCell__clusterCellLicense"},Object($.capitalize)(e)),Object(E.jsx)("div",{className:"monTableCell__clusterCellExpiration"},d?t():null))}return Object(E.jsx)(R.EuiLink,{onClick:()=>p(t.cluster_name)},Object(E.jsx)(R.EuiHealth,{color:"subdued","data-test-subj":"alertIcon"},"N/A"))}}]),rowProps:e=>({"data-test-subj":`clusterRow_${e.cluster_uuid}`}),sorting:{...s,sort:{...s.sort,field:"cluster_name"}},pagination:a,search:{box:{incremental:!0,placeholder:e.scope.filterText}},onTableChange:n,executeQueryOptions:{defaultFields:["cluster_name"]}}))));var d,g,p},rn=_.i18n.translate("xpack.monitoring.cluster.listing.pageTitle",{defaultMessage:"Cluster listing"}),on=_.i18n.translate("xpack.monitoring.cluster.listing.tabTitle",{defaultMessage:"Clusters"}),ln=e=>e.reduce(((e,t)=>({...e,...t.alerts&&t.alerts.list||{}})),{}),cn=()=>{var e;const t=Object(n.useContext)(M),s=Object(n.useContext)(g),{services:a}=Object(i.useKibana)(),[r,o]=Object(n.useState)([]),{update:l}=L(),{getPaginationTableProps:u}=ga("clusters"),{sorting:d,pagination:m,onTableChange:p}=u();Object(n.useEffect)((()=>{l([{"data-test-subj":"clusterListingBreadcrumb",text:on}])}),[l]);const j=[{id:"clusters",label:on,testSubj:"clusterListingTab",route:"/home"}],b=Object(n.useCallback)((async()=>{var e,s;const i=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(s=a.http)&&void 0!==s&&s.fetch){const e=await bi({fetch:a.http.fetch,timeRange:{min:i.min.toISOString(),max:i.max.toISOString()},ccs:t.ccs,codePaths:["all"]});o(e)}}),[t.ccs,null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter,a.http]);return t.save&&1===r.length&&(t.cluster_uuid=r[0].cluster_uuid,t.save()),Object(E.jsx)(Qs,{tabs:j,title:rn,pageTitle:rn,getPageData:b},1===r.length&&Object(E.jsx)(c.Redirect,{to:{pathname:"/overview"}}),Object(E.jsx)(nn,{clusters:r,angular:{scope:{$evalAsync:e=>e(),filterQuery:""},globalState:t,storage:{get:e=>window.localStorage.getItem(e),set:(e,t)=>window.localStorage.setItem(e,t)},showLicenseExpiration:s.showLicenseExpiration},sorting:d,pagination:m,onTableChange:p}),Object(E.jsx)(hi,{alerts:ln(r)}))};function un(e,t){const s=Pe()(e),a=s.format(t),i=Object($.capitalize)(s.fromNow());return{shouldShowRelativeTime:!Pe()().subtract(6,"hours").isAfter(s),formattedTimestamp:a,relativeTime:i}}function dn({status:e,availability:t=!0}){const s=(()=>{if(!t)return we.GRAY;const s=e.toUpperCase();return we[s]||we.YELLOW})();return Object(E.jsx)(Ie,{type:s,label:_.i18n.translate("xpack.monitoring.kibana.statusIconLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}function mn({stats:e}){const{transport_address:t,os_memory_free:s,version:a,uptime:n,status:o,statusIsStale:l,lastSeenTimestamp:c}=e,{staleStatusThresholdSeconds:u}=r.a.useContext(g),d=Object(i.useUiSetting)("dateFormat"),m=[{label:_.i18n.translate("xpack.monitoring.kibana.detailStatus.transportAddressLabel",{defaultMessage:"Transport Address"}),value:t,"data-test-subj":"transportAddress"},{label:_.i18n.translate("xpack.monitoring.kibana.detailStatus.osFreeMemoryLabel",{defaultMessage:"OS Free Memory"}),value:gt(s,"byte"),"data-test-subj":"osFreeMemory"},{label:_.i18n.translate("xpack.monitoring.kibana.detailStatus.versionLabel",{defaultMessage:"Version"}),value:a,"data-test-subj":"version"},{label:_.i18n.translate("xpack.monitoring.kibana.detailStatus.uptimeLabel",{defaultMessage:"Uptime"}),value:gt(n,"time_since"),"data-test-subj":"uptime"}];return Object(E.jsx)(rt,{StatusIndicator:()=>{if(!l)return Object(E.jsx)(nt,{status:o,isOnline:!0,IconComponent:dn});const{description:e,title:t}=function(e,t,s,a){const{shouldShowRelativeTime:i,relativeTime:n,formattedTimestamp:o}=un(t,a),l=_.i18n.translate("xpack.monitoring.kibana.detailStatus.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from this instance. Last seen: {lastSeenTimestamp}",values:{staleStatusThresholdSeconds:s,lastSeenTimestamp:i?n:o}});return{description:_.i18n.translate("xpack.monitoring.kibana.detailStatus.staleStatusMetricDescription",{defaultMessage:"Last Reported Status"}),title:Object(E.jsx)(r.a.Fragment,null,Object(E.jsx)(dn,{status:e}),"",Object($.capitalize)(e),Object(E.jsx)("span",{style:{marginLeft:"8px"}},Object(E.jsx)(R.EuiToolTip,{position:"top",content:l},Object(E.jsx)(R.EuiBadge,{iconType:"alert",color:"warning"},_.i18n.translate("xpack.monitoring.kibana.detailStatus.staleStatusLabel",{defaultMessage:"Stale"})))))}}(o,c,u,d);return Object(E.jsx)(R.EuiStat,{"data-test-subj":"status",description:e,title:t,titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat"})},metrics:m,"data-test-subj":"kibanaDetailStatus"})}const gn=({data:e,alerts:t})=>{const{zoomInfo:s,onBrush:a}=ea(),i=e.metrics.kibana_instance_rule_executions&&e.metrics.kibana_instance_rule_executions.length&&e.metrics.kibana_instance_rule_executions[0].indices_found.ecs;return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(mn,{stats:e.kibanaSummary})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(ws,{alerts:t}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_requests,onBrush:a,zoomInfo:s}),Object(E.jsx)(R.EuiSpacer,null)),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_response_times,onBrush:a,zoomInfo:s}),Object(E.jsx)(R.EuiSpacer,null)),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_memory,onBrush:a,zoomInfo:s}),Object(E.jsx)(R.EuiSpacer,null)),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_average_concurrent_connections,onBrush:a,zoomInfo:s}),Object(E.jsx)(R.EuiSpacer,null)),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_os_load,onBrush:a,zoomInfo:s}),Object(E.jsx)(R.EuiSpacer,null)),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_process_delay,onBrush:a,zoomInfo:s}),Object(E.jsx)(R.EuiSpacer,null)),i&&Object(E.jsx)(r.a.Fragment,null,Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_instance_rule_executions,onBrush:a,zoomInfo:s}),Object(E.jsx)(R.EuiSpacer,null)),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_instance_rule_failures,onBrush:a,zoomInfo:s}),Object(E.jsx)(R.EuiSpacer,null)),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_instance_action_executions,onBrush:a,zoomInfo:s}),Object(E.jsx)(R.EuiSpacer,null)),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_instance_action_failures,onBrush:a,zoomInfo:s}),Object(E.jsx)(R.EuiSpacer,null)))))))},pn=({clusters:e})=>{var t;const{instance:s}=Object(c.useParams)(),a=Object(n.useContext)(M),{services:r}=Object(i.useKibana)(),{generate:o}=L(),l=a.cluster_uuid,u=a.ccs,d=Object($.find)(e,{cluster_uuid:l}),[g,p]=Object(n.useState)({}),[j,b]=Object(n.useState)(""),[x,h]=Object(n.useState)({}),f=`Kibana - ${j}`,O=_.i18n.translate("xpack.monitoring.kibana.instance.pageTitle",{defaultMessage:"Kibana instance: {instance}",values:{instance:j}});Object(n.useEffect)((()=>{d&&o(d.cluster_name,{inKibana:!0,instance:j})}),[d,j,o]);const v=Object(n.useCallback)((async()=>{var e,t;const a=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${l}/kibana/${s}`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&l){var n;const e=await(null===(n=r.http)||void 0===n?void 0:n.fetch(i,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));p(e),b(e.kibanaSummary.name);const t=await xi({fetch:r.http.fetch,alertTypeIds:[m.N],clusterUuid:l,timeRange:{min:a.min.valueOf(),max:a.max.valueOf()}});h(t)}}),[u,l,s,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(E.jsx)(Qs,{title:f,pageTitle:O,getPageData:v},Object(E.jsx)("div",{"data-test-subj":"kibanaInstancePage"},Object(E.jsx)(gn,{data:g,alerts:x})))},jn=({...e})=>{const t=[{id:"overview",label:_.i18n.translate("xpack.monitoring.kibanaNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/kibana",testSubj:"kibanaOverviewPage"},{id:"instances",label:_.i18n.translate("xpack.monitoring.kibanaNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/kibana/instances",testSubj:"kibanaInstancesPage"}];return Object(E.jsx)(Qs,U()({},e,{tabs:t,product:"kibana"}))};function bn({stats:e,alerts:t}){const{concurrent_connections:s,count:a,memory_limit:i,memory_size:n,requests_total:o,response_time_max:l,status:u,some_status_is_stale:d}=e,{staleStatusThresholdSeconds:m}=r.a.useContext(g),p=Object(c.useLocation)(),j=[{label:_.i18n.translate("xpack.monitoring.kibana.clusterStatus.instancesLabel",{defaultMessage:"Instances"}),value:a,"data-test-subj":"instances"},{label:_.i18n.translate("xpack.monitoring.kibana.clusterStatus.memoryLabel",{defaultMessage:"Memory"}),value:gt(n,"byte")+" / "+gt(i,"byte"),"data-test-subj":"memory"},{label:_.i18n.translate("xpack.monitoring.kibana.clusterStatus.requestsLabel",{defaultMessage:"Requests"}),value:o,"data-test-subj":"requests"},{label:_.i18n.translate("xpack.monitoring.kibana.clusterStatus.connectionsLabel",{defaultMessage:"Connections"}),value:s,"data-test-subj":"connections"},{label:_.i18n.translate("xpack.monitoring.kibana.clusterStatus.maxResponseTimeLabel",{defaultMessage:"Max. Response Time"}),value:gt(l,"0","ms"),"data-test-subj":"maxResponseTime"}];return Object(E.jsx)(rt,{StatusIndicator:()=>{if(!d)return Object(E.jsx)(nt,{status:u,isOnline:!0,IconComponent:dn});const e=_.i18n.translate("xpack.monitoring.kibana.clusterStatus.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from some instances.",values:{staleStatusThresholdSeconds:m}});return"/kibana"===p.pathname?Object(E.jsx)(xn,{staleMessage:e}):Object(E.jsx)(hn,{staleMessage:e})},alerts:t,metrics:j,"data-test-subj":"kibanaClusterStatus"})}function xn({staleMessage:e}){const t=fe("#/kibana/instances"),s=Object(E.jsx)(r.a.Fragment,null,Object(E.jsx)("div",{style:{marginBottom:"8px"}},Object(E.jsx)(R.EuiToolTip,{position:"top",content:e},Object(E.jsx)(R.EuiBadge,{iconType:"alert",color:"warning"},_.i18n.translate("xpack.monitoring.kibana.clusterStatus.overview.staleStatusInstancesLabel",{defaultMessage:"Stale"})))),Object(E.jsx)(R.EuiLink,{href:t},_.i18n.translate("xpack.monitoring.kibana.clusterStatus.overview.staleStatusLinkToInstancesLabel",{defaultMessage:"View all instances"})));return Object(E.jsx)(R.EuiStat,{"data-test-subj":"status",description:_.i18n.translate("xpack.monitoring.kibana.clusterStatus.overview.statusLabel",{defaultMessage:"Status"}),title:s,titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat"})}function hn({staleMessage:e}){const t=Object(E.jsx)(R.EuiToolTip,{position:"top",content:e},Object(E.jsx)(R.EuiBadge,{iconType:"alert",color:"warning"},_.i18n.translate("xpack.monitoring.kibana.clusterStatus.instances.staleStatusInstancesLabel",{defaultMessage:"Stale"})));return Object(E.jsx)(R.EuiStat,{"data-test-subj":"status",description:_.i18n.translate("xpack.monitoring.kibana.clusterStatus.instances.statusLabel",{defaultMessage:"Status"}),title:t,titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat"})}const fn=(e,t,s,a)=>{const i=[{name:_.i18n.translate("xpack.monitoring.kibana.listing.nameColumnTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if(ne(K.d.MetricbeatMigration)){const i=Object($.get)(e,"data.byUuid",{}),n=Object($.get)(s,"kibana.uuid"),r=i[n]||{},o={uuid:n,name:s.name};if(a=Object(E.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(E.jsx)(Es,{setupMode:e,status:r,instance:o,productName:m.B})),r.isNetNewUser)return Object(E.jsx)("div",null,t,a)}return Object(E.jsx)("div",null,Object(E.jsx)(R.EuiLink,{href:fe(`#/kibana/instances/${s.kibana.uuid}`),"data-test-subj":`kibanaLink-${t}`},t),a)}},{name:_.i18n.translate("xpack.monitoring.kibana.listing.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts_column",width:"175px",sortable:!0,render:()=>Object(E.jsx)(st,{showBadge:!0,alerts:t})},{name:_.i18n.translate("xpack.monitoring.kibana.listing.lastReportedStatusColumnTitle",{defaultMessage:"Last Reported Status"}),field:"status",render:e=>Object(E.jsx)(R.EuiHealth,{color:vn(e),"data-test-subj":"status"},Object($.capitalize)(e))},{name:_.i18n.translate("xpack.monitoring.kibana.listing.lastSeenColumnTitle",{defaultMessage:"Last Seen"}),field:"lastSeenTimestamp",render:(e,t)=>{const i=function(e,t){const{shouldShowRelativeTime:s,formattedTimestamp:a,relativeTime:i}=un(e,t);return s?Object(E.jsx)(R.EuiToolTip,{position:"top",content:a},Object(E.jsx)("span",null,i)):a}(e,s),n=_.i18n.translate("xpack.monitoring.kibana.listing.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from this instance.",values:{staleStatusThresholdSeconds:a}});return Object(E.jsx)("span",{"data-test-subj":"lastSeen"},i,t.statusIsStale&&Object(E.jsx)(r.a.Fragment,null,"",Object(E.jsx)(R.EuiIconTip,{"aria-label":n,content:n,size:"l",type:"alert",color:"warning"})))}},{name:_.i18n.translate("xpack.monitoring.kibana.listing.loadAverageColumnTitle",{defaultMessage:"Load Average"}),field:"os.load.1m",render:e=>Object(E.jsx)("span",null,gt(e,"0.00"))},{name:_.i18n.translate("xpack.monitoring.kibana.listing.memorySizeColumnTitle",{defaultMessage:"Memory Size"}),field:"process.memory.resident_set_size_in_bytes",render:e=>Object(E.jsx)("span",null,mt(e,"byte"))},{name:_.i18n.translate("xpack.monitoring.kibana.listing.requestsColumnTitle",{defaultMessage:"Requests"}),field:"requests.total",render:e=>Object(E.jsx)("span",null,mt(e,"int_commas"))},{name:_.i18n.translate("xpack.monitoring.kibana.listing.responseTimeColumnTitle",{defaultMessage:"Response Times"}),field:"response_times.average",render:(e,t)=>{var s;return e?Object(E.jsx)("div",null,Object(E.jsx)("div",{className:"monTableCell__splitNumber"},mt(e,"int_commas")+" ms avg"),Object(E.jsx)("div",{className:"monTableCell__splitNumber"},mt(null==t||null===(s=t.response_times)||void 0===s?void 0:s.max,"int_commas")," ms max")):null}}];return i},On=e=>{const{clusterStatus:t,alerts:s,setupMode:a,sorting:o,pagination:l,onTableChange:c}=e,{staleStatusThresholdSeconds:u}=r.a.useContext(g),d=Object(i.useUiSetting)("dateFormat");let p=null;const j=e.instances||[];if(ne(K.d.MetricbeatMigration)){const e=j.reduce(((e,t)=>{var s,a;return{...e,[null!==(s=null===(a=t.kibana)||void 0===a?void 0:a.uuid)&&void 0!==s?s:""]:t}}),{});j.push(...Object.entries(a.data.byUuid).reduce(((t,[s,a])=>(e[s]||t.push({kibana:{...a.instance.kibana,status:we.GRAY}}),t)),[])),p=Object(E.jsx)(ys,{setupModeData:a.data,useNodeIdentifier:!1,productName:m.B,customRenderer:()=>{const e={shouldRender:!1,componentToRender:null};return a.data.totalUniqueInstanceCount>0||(e.shouldRender=!0,e.componentToRender=Object(E.jsx)(n.Fragment,null,Object(E.jsx)(R.EuiCallOut,{title:_.i18n.translate("xpack.monitoring.kibana.instances.metricbeatMigration.detectedNodeTitle",{defaultMessage:"Kibana instance detected"}),color:"warning",iconType:"flag"},Object(E.jsx)("p",null,_.i18n.translate("xpack.monitoring.kibana.instances.metricbeatMigration.detectedNodeDescription",{defaultMessage:"The following instances are not monitored.\n                        Click 'Monitor with Metricbeat' below to start monitoring."}))),Object(E.jsx)(R.EuiSpacer,{size:"m"}))),e}})}const b=j.map((e=>{var t,s;return{...e,name:null===(t=e.kibana)||void 0===t?void 0:t.name,status:null===(s=e.kibana)||void 0===s?void 0:s.status}}));return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.kibana.instances.heading",defaultMessage:"Kibana instances"}))),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(bn,{stats:t,alerts:s})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),p,Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(kt,{className:"kibanaInstancesTable",rows:b,columns:fn(a,s,d,u),sorting:o,pagination:l,setupMode:a,productName:m.B,search:{box:{incremental:!0,placeholder:_.i18n.translate("xpack.monitoring.kibana.listing.filterInstancesPlaceholder",{defaultMessage:"Filter Instances"})}},onTableChange:c,executeQueryOptions:{defaultFields:["name"]}}))))};function vn(e){switch(e){case"red":return"danger";case"yellow":return"warning";case"green":return"success";default:return"subdued"}}const En=({clusters:e})=>{var t;const{cluster_uuid:s,ccs:a}=Object(n.useContext)(M),{services:r}=Object(i.useKibana)(),{generate:o}=L(),{updateTotalItemCount:l,getPaginationTableProps:c}=ga("kibana.instances"),u=Object($.find)(e,{cluster_uuid:s}),[d,g]=Object(n.useState)({}),[p,j]=Object(n.useState)({}),b=_.i18n.translate("xpack.monitoring.kibana.instances.routeTitle",{defaultMessage:"Kibana - Instances"}),x=_.i18n.translate("xpack.monitoring.kibana.instances.pageTitle",{defaultMessage:"Kibana instances"});Object(n.useEffect)((()=>{u&&o(u.cluster_name,{inKibana:!0})}),[u,o]);const h=Object(n.useCallback)((async()=>{var e,t;const i=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),n=`../api/monitoring/v1/clusters/${s}/kibana/instances`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&s){var o;const e=await(null===(o=r.http)||void 0===o?void 0:o.fetch(n,{method:"POST",body:JSON.stringify({ccs:a,timeRange:{min:i.min.toISOString(),max:i.max.toISOString()}})}));g(e),l(e.kibanas.length);const t=await xi({fetch:r.http.fetch,alertTypeIds:[m.N],clusterUuid:s,timeRange:{min:i.min.valueOf(),max:i.max.valueOf()}});j(t)}}),[a,s,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,l]);return Object(E.jsx)(jn,{title:b,pageTitle:x,getPageData:h},Object(E.jsx)("div",{"data-test-subj":"monitoringKibanaInstancesApp"},Object(E.jsx)(_a,{productName:m.B,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},t,Object(E.jsx)(On,U()({alerts:p,instances:d.kibanas,setupMode:e,clusterStatus:d.clusterStatus},c())),s)})))},Mn=({data:e})=>{const{zoomInfo:t,onBrush:s}=ea();if(!e)return null;const a=e.metrics.kibana_cluster_rule_overdue_count&&e.metrics.kibana_cluster_rule_overdue_count.length&&e.metrics.kibana_cluster_rule_overdue_count[0].indices_found.ecs;return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(bn,{stats:e.clusterStatus})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGroup,null,Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_cluster_requests,onBrush:s,zoomInfo:t})),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_cluster_response_times,onBrush:s,zoomInfo:t}))),a&&Object(E.jsx)(r.a.Fragment,null,Object(E.jsx)(R.EuiFlexGroup,null,Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_cluster_rule_overdue_count,onBrush:s,zoomInfo:t})),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_cluster_rule_overdue_duration,onBrush:s,zoomInfo:t}))),Object(E.jsx)(R.EuiFlexGroup,null,Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_cluster_action_overdue_count,onBrush:s,zoomInfo:t})),Object(E.jsx)(R.EuiFlexItem,{grow:!0},Object(E.jsx)(Qt,{series:e.metrics.kibana_cluster_action_overdue_duration,onBrush:s,zoomInfo:t})))))))},yn=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{services:a}=Object(i.useKibana)(),{generate:r}=L(),[o,l]=Object(n.useState)(),c=s.cluster_uuid,u=Object($.find)(e,{cluster_uuid:c}),d=s.ccs,m=_.i18n.translate("xpack.monitoring.kibana.overview.title",{defaultMessage:"Kibana"}),g=_.i18n.translate("xpack.monitoring.kibana.overview.pageTitle",{defaultMessage:"Kibana overview"});Object(n.useEffect)((()=>{u&&r(u.cluster_name,{inKibana:!0})}),[u,r]);const p=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${c}/kibana`,n=await(null===(t=a.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));l(n)}),[d,c,null===(t=a.data)||void 0===t?void 0:t.query.timefilter.timefilter,a.http]);return Object(E.jsx)(jn,{getPageData:p,title:m,pageTitle:g},Object(E.jsx)(Mn,{data:o}))},kn=[m.n],Sn=()=>{var e,t,s;const a=_.i18n.translate("xpack.monitoring.license.licenseRouteTitle",{defaultMessage:"License"}),{setIsDisabled:r}=N();Object(n.useEffect)((()=>(r(!0),()=>{r(!1)})),[r]);const o=Object(n.useContext)(M),l=o.cluster_uuid,c=o.ccs,[u,d]=Object(n.useState)([]),{services:m}=Object(i.useKibana)(),g=null===(e=m.uiSettings)||void 0===e?void 0:e.get("dateFormat:tz"),p=null===(t=m.application)||void 0===t?void 0:t.getUrlForApp("management",{path:"stack/license_management/upload_license"}),j=Object(n.useCallback)((async()=>{var e;const t=null===(e=m.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();let s="../api/monitoring/v1/clusters";l&&(s+=`/${l}`);try{var a;const e=await(null===(a=m.http)||void 0===a?void 0:a.fetch(s,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:t.min.toISOString(),max:t.max.toISOString()},codePaths:kn})}));d(function(e){return e.map(_n)}(e))}catch(e){}}),[c,l,null===(s=m.data)||void 0===s?void 0:s.query.timefilter.timefilter,m.http]);return Object(E.jsx)(Qs,{title:a,pageTitle:"",getPageData:j},function(e,t,s){if(e.length){const a=e[0],i=a.isPrimary,n=a.license;let r=null==n?void 0:n.expiry_date_in_millis;void 0!==r&&(r=function(e,t){return Ve.a.tz(e,t||Ve.a.tz.guess()).format("LL LTS")}(r,t));const o=Date.now()>r;return Object(E.jsx)(ke,{isPrimaryCluster:i,status:n.status,type:n.type,isExpired:o,expiryDate:r,uploadLicensePath:s})}return null}(u,g,p))};function _n(e){return e.cluster_uuid===m.Y&&(e.cluster_name="Standalone Cluster"),e}function Tn(e,t,s){var a;const{services:r}=Object(i.useKibana)(),o=null===(a=r.data)||void 0===a?void 0:a.query.timefilter.timefilter.getBounds(),[l]=Object(n.useState)(o.min.toISOString()),[c]=Object(n.useState)(o.max.toISOString()),[u,d]=Object(n.useState)([]),[m,g]=Object(n.useState)(!1),p=Hs();return Object(n.useEffect)((()=>{!async function(){try{var t;if(null!==(t=r.http)&&void 0!==t&&t.fetch){const t=await bi({timeRange:{min:l,max:c},fetch:r.http.fetch,clusterUuid:e,codePaths:s});d(t)}}catch(e){p(e)}finally{g(!0)}}()}),[p,e,t,r.http,s,l,c]),{clusters:u,loaded:m}}const wn=[m.k],Cn=({staticLoadingState:e})=>{const{clusters:t,loaded:s}=Tn(null,void 0,wn),a=_.i18n.translate("xpack.monitoring.loading.pageTitle",{defaultMessage:"Loading"});return e?Object(E.jsx)(Qs,{title:a},Object(E.jsx)(Te,null)):Object(E.jsx)(Qs,{title:a},!1===s?Object(E.jsx)(Te,null):In(t))},In=e=>e&&e.length?1===e.length?Object(E.jsx)(c.Redirect,{to:"/overview"}):Object(E.jsx)(c.Redirect,{to:"/home"}):Object(E.jsx)(c.Redirect,{to:"/no-data"}),Ln=({cluster:e,instance:t,pipelineId:s,pipelineVersions:a,tabsDisabled:i,...n})=>{const r=[];if(!i)if(t||s){if(t){var o,l,c;r.push({id:"overview",label:_.i18n.translate("xpack.monitoring.logstashNavigation.instance.overviewLinkText",{defaultMessage:"Overview"}),route:`/logstash/node/${null===(o=t.nodeSummary)||void 0===o?void 0:o.uuid}`}),r.push({id:"pipeline",label:_.i18n.translate("xpack.monitoring.logstashNavigation.instance.pipelinesLinkText",{defaultMessage:"Pipelines"}),route:`/logstash/node/${null===(l=t.nodeSummary)||void 0===l?void 0:l.uuid}/pipelines`,testSubj:"logstashNodeDetailPipelinesLink"}),r.push({id:"advanced",label:_.i18n.translate("xpack.monitoring.logstashNavigation.instance.advancedLinkText",{defaultMessage:"Advanced"}),route:`/logstash/node/${null===(c=t.nodeSummary)||void 0===c?void 0:c.uuid}/advanced`,testSubj:"logstashNodeDetailAdvancedLink"})}}else r.push({id:"overview",label:_.i18n.translate("xpack.monitoring.logstashNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/logstash"}),r.push({id:"nodes",label:_.i18n.translate("xpack.monitoring.logstashNavigation.nodesLinkText",{defaultMessage:"Nodes"}),route:"/logstash/nodes"}),r.push({id:"pipelines",label:_.i18n.translate("xpack.monitoring.logstashNavigation.pipelinesLinkText",{defaultMessage:"Pipelines"}),route:"/logstash/pipelines"});return a&&a.length,Object(E.jsx)(Qs,U()({},n,{tabs:r,product:"logstash"}))};function Fn({stats:e}){const{http_address:t,events:s,reloads:a,pipeline:i,queue_type:n,version:r,uptime:o}=e,l=[{label:_.i18n.translate("xpack.monitoring.logstash.detailStatus.transportAddressLabel",{defaultMessage:"Transport Address"}),value:t,"data-test-subj":"httpAddress"},{label:_.i18n.translate("xpack.monitoring.logstash.detailStatus.eventsReceivedLabel",{defaultMessage:"Events Received"}),value:gt(s.in,"0.[0]a"),"data-test-subj":"eventsIn"},{label:_.i18n.translate("xpack.monitoring.logstash.detailStatus.eventsEmittedLabel",{defaultMessage:"Events Emitted"}),value:gt(s.out,"0.[0]a"),"data-test-subj":"eventsOut"},{label:_.i18n.translate("xpack.monitoring.logstash.detailStatus.configReloadsLabel",{defaultMessage:"Config Reloads"}),value:a.successes,"data-test-subj":"numReloads"},{label:_.i18n.translate("xpack.monitoring.logstash.detailStatus.pipelineWorkersLabel",{defaultMessage:"Pipeline Workers"}),value:i.workers,"data-test-subj":"pipelineWorkers"},{label:_.i18n.translate("xpack.monitoring.logstash.detailStatus.batchSizeLabel",{defaultMessage:"Batch Size"}),value:i.batch_size,"data-test-subj":"pipelineBatchSize"}],c=[{label:_.i18n.translate("xpack.monitoring.logstash.detailStatus.versionLabel",{defaultMessage:"Version"}),value:r,"data-test-subj":"version"},{label:_.i18n.translate("xpack.monitoring.logstash.detailStatus.uptimeLabel",{defaultMessage:"Uptime"}),value:gt(o,"time_since"),"data-test-subj":"uptime"}],u=[...l];return n&&u.push({label:_.i18n.translate("xpack.monitoring.logstash.detailStatus.queueTypeLabel",{defaultMessage:"Queue Type"}),value:n,"data-test-subj":"queueType"}),u.push(...c),Object(E.jsx)(rt,{metrics:u,"data-test-subj":"logstashDetailStatus"})}const Pn=({clusters:e})=>{var t;const s=Object(n.useContext)(M),a=Object(c.useRouteMatch)(),{services:r}=Object(i.useKibana)(),o=s.cluster_uuid,{zoomInfo:l,onBrush:u}=ea(),d=s.ccs,g=Object($.find)(e,{cluster_uuid:o}),{generate:p}=L(),[j,b]=Object(n.useState)({}),[x,h]=Object(n.useState)({}),f=_.i18n.translate("xpack.monitoring.logstash.node.advanced.routeTitle",{defaultMessage:"Logstash - {nodeName} - Advanced",values:{nodeName:j.nodeSummary?j.nodeSummary.name:""}}),O=_.i18n.translate("xpack.monitoring.logstash.node.advanced.pageTitle",{defaultMessage:"Logstash node: {nodeName}",values:{nodeName:j.nodeSummary?j.nodeSummary.name:""}}),v=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${o}/logstash/node/${a.params.uuid}`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&o){var n;const e=await(null===(n=r.http)||void 0===n?void 0:n.fetch(i,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));b(e);const t=await xi({fetch:r.http.fetch,alertTypeIds:[m.Q],clusterUuid:o,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});h(t)}}),[d,o,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,a.params.uuid]),y=Object(n.useMemo)((()=>j.metrics?[j.metrics.logstash_node_cpu_utilization,j.metrics.logstash_queue_events_count,j.metrics.logstash_node_cgroup_cpu,j.metrics.logstash_pipeline_queue_size,j.metrics.logstash_node_cgroup_stats]:[]),[j.metrics]);return Object(n.useEffect)((()=>{g&&j.nodeSummary&&p(g.cluster_name,{inLogstash:!0,instance:j.nodeSummary.host,name:"nodes"})}),[g,j,p]),Object(E.jsx)(Ln,{instance:j,title:f,pageTitle:O,getPageData:v,cluster:g},Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPanel,null,j.nodeSummary&&Object(E.jsx)(Fn,{stats:j.nodeSummary})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(ws,{alerts:x}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},y.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e,onBrush:u,zoomInfo:l},j)),Object(E.jsx)(R.EuiSpacer,null)))))))))},Nn=({clusters:e})=>{var t;const s=Object(c.useRouteMatch)(),a=Object(n.useContext)(M),{services:r}=Object(i.useKibana)(),{generate:o}=L(),l=a.cluster_uuid,u=a.ccs,d=Object($.find)(e,{cluster_uuid:l}),[g,p]=Object(n.useState)({}),[j,b]=Object(n.useState)({}),{zoomInfo:x,onBrush:h}=ea(),f=_.i18n.translate("xpack.monitoring.logstash.node.routeTitle",{defaultMessage:"Logstash - {nodeName}",values:{nodeName:g.nodeSummary?g.nodeSummary.name:""}}),O=_.i18n.translate("xpack.monitoring.logstash.node.pageTitle",{defaultMessage:"Logstash node: {nodeName}",values:{nodeName:g.nodeSummary?g.nodeSummary.name:""}});Object(n.useEffect)((()=>{d&&g.nodeSummary&&o(d.cluster_name,{inLogstash:!0,instance:g.nodeSummary.host,name:"nodes"})}),[d,g,o]);const v=Object(n.useCallback)((async()=>{var e,t;const a=`../api/monitoring/v1/clusters/${l}/logstash/node/${s.params.uuid}`,i=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(t=r.http)&&void 0!==t&&t.fetch&&l){var n;const e=await(null===(n=r.http)||void 0===n?void 0:n.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:i.min.toISOString(),max:i.max.toISOString()},is_advanced:!1})}));p(e);const t=await xi({fetch:r.http.fetch,alertTypeIds:[m.Q],clusterUuid:l,timeRange:{min:i.min.valueOf(),max:i.max.valueOf()}});b(t)}}),[u,l,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,s.params]),y=Object(n.useMemo)((()=>g.metrics?[g.metrics.logstash_events_input_rate,g.metrics.logstash_jvm_usage,g.metrics.logstash_events_output_rate,g.metrics.logstash_node_cpu_metric,g.metrics.logstash_events_latency,g.metrics.logstash_os_load]:[]),[g.metrics]);return Object(E.jsx)(Ln,{instance:g,title:f,pageTitle:O,getPageData:v,cluster:d},Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiPanel,null,g.nodeSummary&&Object(E.jsx)(Fn,{stats:g.nodeSummary})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(ws,{alerts:j}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},y.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e,onBrush:h,zoomInfo:x},g)),Object(E.jsx)(R.EuiSpacer,null)))))))))};function Dn({stats:e,alerts:t}){const{node_count:s,avg_memory_used:a,avg_memory:i,events_in_total:n,events_out_total:r}=e,o=[{label:_.i18n.translate("xpack.monitoring.logstash.clusterStatus.nodesLabel",{defaultMessage:"Nodes"}),value:s,"data-test-subj":"node_count"},{label:_.i18n.translate("xpack.monitoring.logstash.clusterStatus.memoryLabel",{defaultMessage:"Memory"}),value:gt(a,"byte")+" / "+gt(i,"byte"),"data-test-subj":"memory_used"},{label:_.i18n.translate("xpack.monitoring.logstash.clusterStatus.eventsReceivedLabel",{defaultMessage:"Events Received"}),value:gt(n,"0.[0]a"),"data-test-subj":"events_in_total"},{label:_.i18n.translate("xpack.monitoring.logstash.clusterStatus.eventsEmittedLabel",{defaultMessage:"Events Emitted"}),value:gt(r,"0.[0]a"),"data-test-subj":"events_out_total"}];return Object(E.jsx)(rt,{metrics:o,alerts:t,"data-test-subj":"logstashClusterStatus"})}class logstash_listing_listing_Listing extends n.PureComponent{getColumns(){const e=this.props.setupMode,t=this.props.alerts;return[{name:_.i18n.translate("xpack.monitoring.logstash.nodes.nameTitle",{defaultMessage:"Name"}),field:"name",sortable:!0,render:(t,s)=>{let a=null;if(ne(K.d.MetricbeatMigration)){const t=Object($.get)(e,"data.byUuid",{}),i=Object($.get)(s,"logstash.uuid"),n=t[i]||{},r={uuid:i,name:s.name};a=Object(E.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(E.jsx)(Es,{setupMode:e,status:n,instance:r,productName:m.F}))}return Object(E.jsx)("div",null,Object(E.jsx)("div",{"data-test-subj":"name"},Object(E.jsx)(R.EuiLink,{href:fe(`#/logstash/node/${s.logstash.uuid}`),"data-test-subj":`nodeLink-${s.logstash.uuid}`},t)),Object(E.jsx)("div",{"data-test-subj":"httpAddress"},s.logstash.http_address),a)}},{name:_.i18n.translate("xpack.monitoring.logstash.nodes.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"isOnline",width:"175px",sortable:!0,render:()=>Object(E.jsx)(st,{showBadge:!0,alerts:t})},{name:_.i18n.translate("xpack.monitoring.logstash.nodes.cpuUsageTitle",{defaultMessage:"CPU Usage"}),field:"cpu_usage",sortable:!0,render:e=>Object(E.jsx)("span",{"data-test-subj":"cpuUsage"},dt(e,100))},{name:_.i18n.translate("xpack.monitoring.logstash.nodes.loadAverageTitle",{defaultMessage:"Load Average"}),field:"load_average",sortable:!0,render:e=>Object(E.jsx)("span",{"data-test-subj":"loadAverage"},mt(e,"0.00"))},{name:_.i18n.translate("xpack.monitoring.logstash.nodes.jvmHeapUsedTitle",{defaultMessage:"{javaVirtualMachine} Heap Used",values:{javaVirtualMachine:"JVM"}}),field:"jvm_heap_used",sortable:!0,render:e=>Object(E.jsx)("span",{"data-test-subj":"jvmHeapUsed"},dt(e,100))},{name:_.i18n.translate("xpack.monitoring.logstash.nodes.eventsIngestedTitle",{defaultMessage:"Events Ingested"}),field:"events_out",sortable:!0,render:e=>Object(E.jsx)("span",{"data-test-subj":"eventsOut"},mt(e,"0.[0]a"))},{name:_.i18n.translate("xpack.monitoring.logstash.nodes.configReloadsTitle",{defaultMessage:"Config Reloads"}),sortable:!0,render:e=>Object(E.jsx)("div",null,Object(E.jsx)("div",{"data-test-subj":"configReloadsSuccess"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.nodes.configReloadsSuccessCountLabel",defaultMessage:"{reloadsSuccesses} successes",values:{reloadsSuccesses:e.reloads.successes}})),Object(E.jsx)("div",{"data-test-subj":"configReloadsFailure"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.nodes.configReloadsFailuresCountLabel",defaultMessage:"{reloadsFailures} failures",values:{reloadsFailures:e.reloads.failures}})))},{name:_.i18n.translate("xpack.monitoring.logstash.nodes.versionTitle",{defaultMessage:"Version"}),field:"version",sortable:!0,render:e=>Object(E.jsx)("span",{"data-test-subj":"version"},mt(e))}]}render(){const{stats:e,alerts:t,sorting:s,pagination:a,onTableChange:i,data:n,setupMode:r}=this.props,o=this.getColumns(),l=n.map((e=>({...e,name:Object($.get)(e,"logstash.name","N/A"),cpu_usage:Object($.get)(e,"process.cpu.percent","N/A"),load_average:Object($.get)(e,"os.cpu.load_average.1m","N/A"),jvm_heap_used:Object($.get)(e,"jvm.mem.heap_used_percent","N/A"),events_out:Object($.get)(e,"events.out","N/A"),version:Object($.get)(e,"logstash.version","N/A")})));let c=null;return ne(K.d.MetricbeatMigration)&&(c=Object(E.jsx)(ys,{setupModeData:r.data,useNodeIdentifier:!0,productName:m.F})),Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.instances.heading",defaultMessage:"Logstash instances"}))),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Dn,{stats:e,alerts:t})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),c,Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(kt,{className:"logstashNodesTable",rows:l,setupMode:r,productName:m.F,columns:o,sorting:{...s,sort:{...s.sort,field:"name"}},pagination:a,search:{box:{incremental:!0,placeholder:_.i18n.translate("xpack.monitoring.logstash.filterNodesPlaceholder",{defaultMessage:"Filter Nodes"})}},onTableChange:i,executeQueryOptions:{defaultFields:["name"]}}))))}}const Rn=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{services:a}=Object(i.useKibana)(),r=s.cluster_uuid,o=s.ccs,{generate:l}=L(),c=Object($.find)(e,{cluster_uuid:r}),[u,d]=Object(n.useState)({}),[g,p]=Object(n.useState)({}),{getPaginationTableProps:j}=ga("logstash.nodes"),b=_.i18n.translate("xpack.monitoring.logstash.nodes.routeTitle",{defaultMessage:"Logstash - Nodes"}),x=_.i18n.translate("xpack.monitoring.logstash.nodes.pageTitle",{defaultMessage:"Logstash nodes"}),h=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${r}/logstash/nodes`;if(null!==(t=a.http)&&void 0!==t&&t.fetch&&r){var n;const e=await(null===(n=a.http)||void 0===n?void 0:n.fetch(i,{method:"POST",body:JSON.stringify({ccs:o,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));d(e);const t=await xi({fetch:a.http.fetch,alertTypeIds:[m.Q],clusterUuid:r,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});p(t)}}),[o,r,null===(t=a.data)||void 0===t?void 0:t.query.timefilter.timefilter,a.http]);return Object(n.useEffect)((()=>{c&&l(c.cluster_name,{inLogstash:!0})}),[c,l]),Object(E.jsx)(Ln,{title:b,pageTitle:x,getPageData:h,cluster:c},Object(E.jsx)("div",{"data-test-subj":"logstashNodesPage"},Object(E.jsx)(_a,{productName:m.F,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(E.jsx)(Le.Provider,{value:{setupModeSupported:!0}},t,Object(E.jsx)(logstash_listing_listing_Listing,U()({stats:u.clusterStatus,metrics:u.metrics,data:u.nodes,setupMode:e,alerts:g},j())),s)})))};var zn=s(100),An=s.n(zn);function Bn(e){return An()(e)>=m.E.MAJOR_VER_REQD_FOR_PIPELINES}const Vn={grid:{show:!1,margin:4,hoverable:!0},colors:["#3b73ac"],series:{shadowSize:0,lines:{lineWidth:2},highlightColor:"#3b73ac",points:{radius:2}}};function Un(e=[]){const t=[];return t.push(e),t.push({data:[Object($.last)(e)],points:{show:!0,radius:2,fill:1,fillColor:!1}}),t}class sparkline_flot_chart_SparklineFlotChart{constructor(e,t,s,a,i){x()(this,"render",(()=>{this.flotChart=$t.a.plot(this.containerElem,this.data,this.options)})),x()(this,"setupBrushHandling",(e=>{this.options.selection={mode:"x",color:"#9c9c9c"},$t()(this.containerElem).off("plotselected"),$t()(this.containerElem).on("plotselected",((t,s)=>{e(s),this.flotChart.clearSelection()}))})),x()(this,"setupHoverHandling",(e=>{const t=$t()(this.containerElem),s=Object($.debounce)(((s,a,i)=>{if(null===i)return e();e({xValue:i.datapoint[0],yValue:i.datapoint[1],xPosition:i.pageX-window.pageXOffset,yPosition:i.pageY-window.pageYOffset,plotTop:t.offset().top,plotLeft:t.offset().left,plotHeight:t.height(),plotWidth:t.width()})}),m.p,{leading:!0});t.off("plothover"),t.on("plothover",s)})),this.containerElem=e,this.data=Un(t),this.options={...Vn,...i},Object($.isFunction)(s)&&this.setupBrushHandling(s),Object($.isFunction)(a)&&this.setupHoverHandling(a),this.render(),window.addEventListener("resize",this.render)}update(e){this.flotChart.setData(Un(e)),this.flotChart.setupGrid(),this.flotChart.draw()}shutdown(){this.flotChart.shutdown();const e=$t()(this.containerElem);e.off("plotselected"),e.off("plothover"),window.removeEventListener("resize",this.render)}}s(106);class sparkline_Sparkline extends r.a.Component{constructor(e){super(e),this.makeSparklineFlotChart=this.makeSparklineFlotChart.bind(this),this.onHover=this.onHover.bind(this),this.renderTooltip=this.renderTooltip.bind(this),this.handleSparklineRef=this.handleSparklineRef.bind(this),this.state={tooltip:void 0}}UNSAFE_componentWillReceiveProps({series:e,options:t}){Object($.isEqual)(t,this.props.options)||(this.sparklineFlotChart.shutdown(),this.makeSparklineFlotChart(t)),Object($.isEqual)(e,this.props.series)||this.sparklineFlotChart.update(e)}makeSparklineFlotChart(e){this.sparklineFlotChart=new sparkline_flot_chart_SparklineFlotChart(this.chartElem,this.props.series,this.props.onBrush,this.onHover,e)}onHover(e){this.setState({tooltip:e})}renderTooltip(){if(!1===this.props.tooltip.enabled)return;if(!this.state.tooltip)return;const e={tooltipContainer:{top:this.state.tooltip.yPosition-28},tooltip:{height:56,width:220},leftCaret:{width:6},rightCaret:{width:6}},t=this.state.tooltip.plotLeft+this.state.tooltip.plotWidth/2;return this.state.tooltip.xPosition>t?(e.rightCaret.display="block",e.tooltipContainer.left=this.state.tooltip.xPosition-226-10):(e.leftCaret.display="block",e.tooltipContainer.left=this.state.tooltip.xPosition+10),Object(E.jsx)("div",{className:"monSparklineTooltip__container",style:e.tooltipContainer},Object(E.jsx)("i",{className:"fa fa-caret-left monSparklineTooltip__caret",style:e.leftCaret}),Object(E.jsx)("div",{className:"monSparklineTooltip",style:e.tooltip},Object(E.jsx)("div",{className:"monSparklineTooltip__yValue"},this.props.tooltip.yValueFormatter(this.state.tooltip.yValue)),Object(E.jsx)("div",{className:"monSparklineTooltip__xValue"},this.props.tooltip.xValueFormatter(this.state.tooltip.xValue))),Object(E.jsx)("i",{className:"fa fa-caret-right monSparklineTooltip__caret",style:e.rightCaret}))}handleSparklineRef(e){this.chartElem=e,this.chartElem?this.makeSparklineFlotChart(this.props.options):this.sparklineFlotChart&&this.sparklineFlotChart.shutdown()}render(){return Object(E.jsx)("div",null,Object(E.jsx)("div",{className:"monSparkline",ref:this.handleSparklineRef}),this.renderTooltip())}}class pipeline_listing_PipelineListing extends n.Component{tooltipXValueFormatter(e,t){return Pe()(e).format(t)}tooltipYValueFormatter(e,t,s){return gt(e,t,s)}getColumns(){const{onBrush:e,dateFormat:t}=this.props;return[{name:_.i18n.translate("xpack.monitoring.logstash.pipelines.idTitle",{defaultMessage:"ID"}),field:"id",sortable:!0,render:e=>Object(E.jsx)(R.EuiLink,{"data-test-subj":"id",href:fe(`#/logstash/pipelines/${e}`)},e)},{name:_.i18n.translate("xpack.monitoring.logstash.pipelines.eventsEmittedRateTitle",{defaultMessage:"Events Emitted Rate"}),field:"latestThroughput",sortable:!0,render:(s,a)=>{const i=a.metrics.throughput;return Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(sparkline_Sparkline,{series:i.data,onBrush:e,tooltip:{xValueFormatter:e=>this.tooltipXValueFormatter(e,t),yValueFormatter:Object($.partialRight)(this.tooltipYValueFormatter,i.metric.format,i.metric.units)},options:{xaxis:i.timeRange}})),Object(E.jsx)(R.EuiFlexItem,{className:"monTableCell__number","data-test-subj":"eventsEmittedRate"},gt(s,"0.[0]a",i.metric.units)))}},{name:_.i18n.translate("xpack.monitoring.logstash.pipelines.numberOfNodesTitle",{defaultMessage:"Number of Nodes"}),field:"latestNodesCount",sortable:!0,render:(s,a)=>{const i=a.metrics.nodesCount;return Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(sparkline_Sparkline,{series:i.data,onBrush:e,tooltip:{xValueFormatter:e=>this.tooltipXValueFormatter(e,t),yValueFormatter:Object($.partialRight)(this.tooltipYValueFormatter,i.metric.format,i.metric.units)},options:{xaxis:i.timeRange}})),Object(E.jsx)(R.EuiFlexItem,{className:"monTableCell__number","data-test-subj":"nodeCount"},gt(s,"0a")))}}]}renderStats(){if(this.props.statusComponent){const e=this.props.statusComponent;return Object(E.jsx)(e,{stats:this.props.stats})}return Object(E.jsx)(Dn,{stats:this.props.stats})}render(){const{data:e,sorting:t,pagination:s,onTableChange:a,upgradeMessage:i,className:n,...r}=this.props,o=t||{field:"id",direction:"asc"};"name"===o.field&&(o.field="id");const l=this.getColumns();return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipline_listing.heading",defaultMessage:"Logstash pipelines"}))),Object(E.jsx)(R.EuiPanel,null,this.renderStats()),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(St,U()({className:n||"logstashNodesTable",rows:e,columns:l,sorting:o,message:i,pagination:s,search:{box:{placeholder:_.i18n.translate("xpack.monitoring.logstash.filterPipelinesPlaceholder",{defaultMessage:"Filter Pipelines"})}},onTableChange:a},r)))))}}const $n=({clusters:e})=>{var t;const s=Object(n.useContext)(M),a=Object(c.useRouteMatch)(),{services:r}=Object(i.useKibana)(),o=s.cluster_uuid,l=s.ccs,{onBrush:u,zoomInfo:d}=ea(),m=Object($.find)(e,{cluster_uuid:o}),{generate:g}=L(),{getPaginationTableProps:p,getPaginationRouteOptions:j,updateTotalItemCount:b}=ga("logstash.pipelines"),[x,h]=Object(n.useState)({}),f=_.i18n.translate("xpack.monitoring.logstash.node.pipelines.routeTitle",{defaultMessage:"Logstash - {nodeName} - Pipelines",values:{nodeName:x.nodeSummary?x.nodeSummary.name:""}}),O=_.i18n.translate("xpack.monitoring.logstash.node.pipelines.pageTitle",{defaultMessage:"Logstash node pipelines: {nodeName}",values:{nodeName:x.nodeSummary?x.nodeSummary.name:""}}),v=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${o}/logstash/node/${a.params.uuid}/pipelines`,n=await(null===(t=r.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:l,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...j()})}));h(n),b(n.totalPipelineCount)}),[l,o,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,j,b,a.params.uuid]);return Object(n.useEffect)((()=>{m&&x.nodeSummary&&g(m.cluster_name,{inLogstash:!0,instance:x.nodeSummary.host,name:"nodes"})}),[m,x,g]),Object(E.jsx)(Ln,{instance:x,title:f,pageTitle:O,getPageData:v,cluster:m},x.pipelines&&Object(E.jsx)("div",{"data-test-subj":"logstashPipelinesListing"},Object(E.jsx)(pipeline_listing_PipelineListing,U()({className:"monitoringLogstashPipelinesTable",onBrush:u,zoomInfo:d,stats:x.nodeSummary,data:x.pipelines,statusComponent:Fn},p(),{upgradeMessage:(y=x.nodeSummary.version,!Array.isArray(y)||0===y.length||y.some(Bn)?null:"Pipeline monitoring is only available in Logstash version 6.0.0 or higher.")}))));var y};class overview_overview_Overview extends n.PureComponent{render(){const{stats:e,metrics:t,...s}=this.props,a=[t.logstash_cluster_events_input_rate,t.logstash_cluster_events_output_rate,t.logstash_cluster_events_latency];return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.overview.heading",defaultMessage:"Logstash Overview"}))),Object(E.jsx)(R.EuiPanel,null,Object(E.jsx)(Dn,{stats:e})),Object(E.jsx)(R.EuiSpacer,{size:"m"}),Object(E.jsx)(R.EuiPageContent_Deprecated,null,Object(E.jsx)(R.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(E.jsx)(R.EuiFlexItem,{key:t},Object(E.jsx)(Qt,U()({series:e},s)),Object(E.jsx)(R.EuiSpacer,null))))))))}}const Gn=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{zoomInfo:a,onBrush:r}=ea(),{services:o}=Object(i.useKibana)(),l=s.cluster_uuid,c=s.ccs,u=Object($.find)(e,{cluster_uuid:l}),{generate:d}=L(),[m,g]=Object(n.useState)(null),p=_.i18n.translate("xpack.monitoring.logstash.overview.title",{defaultMessage:"Logstash"}),j=_.i18n.translate("xpack.monitoring.logstash.overview.pageTitle",{defaultMessage:"Logstash overview"}),b=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/logstash`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(i)}),[c,l,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(n.useEffect)((()=>{u&&d(u.cluster_name,{inLogstash:!0})}),[u,m,d]),Object(E.jsx)(Ln,{title:p,pageTitle:j,getPageData:b,cluster:u},Object(E.jsx)("div",{"data-test-subj":"logstashOverviewPage"},(e=>{if(null===e)return null;const{clusterStatus:t,metrics:s,logs:i}=e||{};return Object(E.jsx)(overview_overview_Overview,{stats:t,metrics:s,logs:i,onBrush:r,zoomInfo:a})})(m)))};function qn(e,t=0,s=null){const a=[];return e.forEach((e=>{a.push(...e.toList(t,s))})),a}class list_List{constructor(e,t,s,a){this.inputs=e,this.filters=t,this.outputs=s,this.queue=a}static fromPipeline(e){const{inputStatements:t,filterStatements:s,outputStatements:a,queue:i}=e;return new list_List(qn(t),qn(s),qn(a),i)}}function Hn({vertex:e,onHide:t,timeseriesTooltipXValueFormatter:s}){return Object(E.jsx)(R.EuiFlyout,{size:"s",onClose:t},Object(E.jsx)(R.EuiFlyoutHeader,null,Object(E.jsx)(R.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},function(e){return Object(E.jsx)(R.EuiIcon,{type:e.iconType,className:"lspvDetailDrawerIcon"})}(e)),Object(E.jsx)(R.EuiFlexItem,null,Object(E.jsx)(R.EuiTitle,null,Object(E.jsx)("h2",null,function(e){switch(e.typeString){case"plugin":return`${e.title} ${e.pluginType}`;case"if":case"queue":return e.title}}(e)))))),Object(E.jsx)(R.EuiFlyoutBody,null,Object(E.jsx)(R.EuiText,null,function(e){switch(e.typeString){case"plugin":return function(e){return e.hasExplicitId?Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.vertexIdDescription",defaultMessage:"This {vertexType}'s ID is {vertexId}.",values:{vertexType:e.typeString,vertexId:Object(E.jsx)(R.EuiBadge,null,e.id)}})):Object(E.jsx)("div",null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.specifyVertexIdDescription",defaultMessage:"This {vertexType} does not have an ID explicitly specified. Specifying an ID allows you to track differences across pipeline changes. You can explicitly specify an ID for this plugin like so:",values:{vertexType:e.typeString}})),Object(E.jsx)(R.EuiCodeBlock,null,e.name," ",'{\n  id => "mySpecialId"\n}'),Object(E.jsx)(R.EuiSpacer,null))}(e);case"if":return function(e){const t=`if (${e.subtitle}) {\n  ...\n}`;return Object(E.jsx)("div",null,Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.conditionalStatementDescription",defaultMessage:"This is a conditional statement in your pipeline."})),Object(E.jsx)(R.EuiCodeBlock,null,t),Object(E.jsx)(R.EuiSpacer,null))}(e);case"queue":return Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.structureDescription",defaultMessage:"This is an internal structure used by Logstash to buffer events between inputs and the rest of the pipeline."}))}}(e),function(e,t){switch(e.typeString){case"plugin":return function(e,t){const s=e=>gt(e,"0.[00]a","ms/e"),a=Array.isArray(e.stats.millis_per_event.data)&&e.stats.millis_per_event.data.length>0?Object($.last)(e.stats.millis_per_event.data)[1]:null,i="input"===e.pluginType?null:Object(E.jsx)(R.EuiTableRow,{key:"events_latency"},Object(E.jsx)(R.EuiTableRowCell,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsLatencyLabel",defaultMessage:"Events Latency"})),Object(E.jsx)(R.EuiTableRowCell,null,Object(E.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(E.jsx)(sparkline_Sparkline,{series:e.stats.millis_per_event.data,options:{xaxis:e.stats.millis_per_event.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:s}}))),Object(E.jsx)(R.EuiTableRowCell,null,s(a))),n=e=>gt(e,"0.[0]a","e/s"),r=Object(E.jsx)(R.EuiTableRow,{key:"events_out_rate"},Object(E.jsx)(R.EuiTableRowCell,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsEmittedRateLabel",defaultMessage:"Events Emitted Rate"})),Object(E.jsx)(R.EuiTableRowCell,null,Object(E.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(E.jsx)(sparkline_Sparkline,{series:e.eventsPerSecond.data,options:{xaxis:e.eventsPerSecond.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:n}}))),Object(E.jsx)(R.EuiTableRowCell,null,n(e.latestEventsPerSecond))),o=e=>gt(e,"0a","events"),l=Array.isArray(e.stats.events_in.data)&&e.stats.events_in.data.length>0?Object($.last)(e.stats.events_in.data)[1]:null,c="input"===e.pluginType?null:Object(E.jsx)(R.EuiTableRow,{key:"events_in"},Object(E.jsx)(R.EuiTableRowCell,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsReceivedLabel",defaultMessage:"Events Received"})),Object(E.jsx)(R.EuiTableRowCell,null,Object(E.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(E.jsx)(sparkline_Sparkline,{series:e.stats.events_in.data,options:{xaxis:e.stats.events_in.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:o}}))),Object(E.jsx)(R.EuiTableRowCell,null,o(l))),u=o,d=Array.isArray(e.stats.events_out.data)&&e.stats.events_out.data.length>0?Object($.last)(e.stats.events_out.data)[1]:null,m=Object(E.jsx)(R.EuiTableRow,{key:"events_out"},Object(E.jsx)(R.EuiTableRowCell,null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsEmittedLabel",defaultMessage:"Events Emitted"})),Object(E.jsx)(R.EuiTableRowCell,null,Object(E.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(E.jsx)(sparkline_Sparkline,{series:e.stats.events_out.data,options:{xaxis:e.stats.events_out.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:u}}))),Object(E.jsx)(R.EuiTableRowCell,null,u(d)));return Object(E.jsx)(R.EuiTable,null,Object(E.jsx)(R.EuiTableBody,null,i,r,c,m))}(e,t);case"if":return Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.noMetricsForIfDescription",defaultMessage:"There are currently no metrics to show for this if condition."}));case"queue":return Object(E.jsx)("p",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.noMetricsForQueueDescription",defaultMessage:"There are currently no metrics to show for the queue."}))}}(e,s))))}function Wn({iconType:e,title:t}){return Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"baseline"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiIcon,{type:e})),Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiTitle,{size:"s"},Object(E.jsx)("h2",null,t))))}function Kn(){return Object(E.jsx)("div",null,Object(E.jsx)(Wn,{iconType:"logstashQueue",title:"Queue"}),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(R.EuiText,{className:"monPipelineViewer__queueMessage"},Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.queue.noMetricsDescription",defaultMessage:"Queue metrics not available"})))}s(111),s(116);class Statement{constructor(e){const{id:t,hasExplicitId:s,stats:a,meta:i}=e;this.id=t,this.hasExplicitId=s,this.stats=a,this.meta=i,this.vertex=e}}class Element{constructor(e,t,s,a){this.id=e,this.statement=t,this.depth=s,this.parentId=a}}class plugin_element_PluginElement extends Element{constructor(e,t,s){const{id:a}=e;super(a,e,t,s)}}class plugin_statement_PluginStatement extends Statement{constructor(e){super(e);const{pluginType:t,name:s}=e;this.pluginType=t,this.name=s}toList(e,t){return[new plugin_element_PluginElement(this,e,t)]}static fromPipelineGraphVertex(e){return new plugin_statement_PluginStatement(e)}}function Jn(e){return e?"arrowRight":"arrowDown"}function Yn(e){const{collapse:t,expand:s,id:a,isCollapsed:i}=e;return Object(E.jsx)(R.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center",className:"monPipelineViewer__collapsibleStatement"},Object(E.jsx)(R.EuiFlexItem,{key:a,grow:!1},Object(E.jsx)(R.EuiButtonIcon,{"aria-label":"collapse",color:"text",iconType:Jn(i),onClick:()=>{i?s(a):t(a)},size:"s"})),e.children)}s(121);class if_element_IfElement extends Element{constructor(e,t,s){const{id:a}=e;super(a,e,t,s)}}var Qn=s(34),Xn=s.n(Qn);function Zn({className:e,warning:t,value:s}){const a=Xn()("monPipelineViewer__metric",e);let i;return i=t?Object(E.jsx)(R.EuiBadge,{color:"warning",className:e},s):Object(E.jsx)(R.EuiText,{size:"s",color:"subdued",className:a},Object(E.jsx)("span",null,s)),Object(E.jsx)(R.EuiFlexItem,{className:"monPipelineViewer__metricFlexItem",grow:!1},i)}function er({statement:{hasExplicitId:e,id:t,name:s,pluginType:a,vertex:i},onShowVertexDetails:n}){const r=function(e,t){return"input"===e?function({latestEventsPerSecond:e}){return[Object(E.jsx)(Zn,{key:"eventsEmitted",className:"monPipelineViewer__metric--eventsEmitted",value:gt(e,"0.[00]a","e/s emitted")})]}(t):function(e){const{latestMillisPerEvent:t,latestEventsPerSecond:s,percentOfTotalProcessorTime:a}=e;return[Object(E.jsx)(Zn,{key:"cpuMetric",className:"monPipelineViewer__metric--cpuTime",warning:e.isTimeConsuming(),value:gt(Math.round(a||0),"0","%",{prependSpace:!1})}),Object(E.jsx)(Zn,{key:"eventMillis",className:"monPipelineViewer__metric--eventMillis",warning:e.isSlow(),value:gt(t,"0.[00]a","ms/e")}),Object(E.jsx)(Zn,{key:"eventsReceived",className:"monPipelineViewer__metric--events",value:gt(s,"0.[00]a","e/s received")})]}(t)}(a,i),o=()=>{n(i)};return Object(E.jsx)(R.EuiFlexGroup,{alignItems:"center",className:"monPipelineViewer__pluginStatement",gutterSize:"none",justifyContent:"spaceBetween"},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiButtonEmpty,{"aria-label":s,className:"monPipelineViewer__plugin",color:"primary",flush:"left",iconType:"dot",onClick:o,size:"xs"},Object(E.jsx)("span",null,s))),e&&Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiBadge,{onClick:o,onClickAriaLabel:_.i18n.translate("xpack.monitoring.logstash.pipelineStatement.viewDetailsAriaLabel",{defaultMessage:"View details"})},t)))),r&&Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiFlexGroup,{gutterSize:"s"},r)))}function tr(e,t){return Object(E.jsx)(R.EuiFlexItem,{grow:!1,key:"statementName"},Object(E.jsx)(R.EuiButtonEmpty,{"aria-label":e,color:"text",size:"xs",onClick:t,flush:"left"},Object(E.jsx)("span",{className:"monPipelineViewer__conditional"},e)))}function sr(e){const{depth:t}=e.element;return Object(E.jsx)("li",{className:"monPipelineViewer__listItem"},Object(E.jsx)("div",{className:"monPipelineViewer__spaceContainer"},function(e){const t=[];for(let s=0;s<e;s+=1)t.push(Object(E.jsx)("div",{key:`spacer_${s}`,className:"monPipelineViewer__spacer"}));return t}(t)),function({collapse:e,element:t,element:{id:s,statement:a,statement:{vertex:i}},expand:n,isCollapsed:r,onShowVertexDetails:o}){if(a instanceof plugin_statement_PluginStatement)return Object(E.jsx)(er,{statement:a,onShowVertexDetails:o});const l=function(e,t,s,a){const i=()=>{a(s)};return e?function({condition:e},t){return[tr("if",t),Object(E.jsx)(R.EuiFlexItem,{key:"ifContent",grow:!1},Object(E.jsx)(R.EuiCodeBlock,{fontSize:"s",paddingSize:"none",transparentBackground:!0},e))]}(t,i):tr("else",i)}(t instanceof if_element_IfElement,a,i,o);return Object(E.jsx)(Yn,{expand:n,collapse:e,isCollapsed:r,id:s},l)}(e))}s(126),s(131),s(136);class statement_list_StatementList extends r.a.PureComponent{constructor(e){super(e),x()(this,"expand",(e=>{const t=new Set(this.state.collapsedIds);t.delete(e),this.updateCollapsedElement(t)})),x()(this,"collapse",(e=>{const t=new Set(this.state.collapsedIds);t.add(e),this.updateCollapsedElement(t)})),x()(this,"updateCollapsedElement",(e=>{const{elements:t}=this.props,s=function(e,t){const s=new Set;return e.forEach((({id:e,parentId:a})=>{(t.has(a)||s.has(a))&&s.add(e)})),s}(t,e);this.setState({collapsedIds:e,collapsedChildIds:s})})),x()(this,"elementIsCollapsed",(e=>this.state.collapsedIds.has(e))),x()(this,"renderStatement",(e=>{const{id:t,parentId:s}=e,{onShowVertexDetails:a}=this.props;return this.state.collapsedIds.has(s)||this.state.collapsedChildIds.has(s)?null:Object(E.jsx)(sr,{key:t,element:e,collapse:this.collapse,expand:this.expand,isCollapsed:this.elementIsCollapsed(t),onShowVertexDetails:a})})),this.state={collapsedIds:new Set,collapsedChildIds:new Set}}render(){const{elements:e}=this.props;return Object(E.jsx)("ul",{className:"monPipelineViewer__list"},e.map(this.renderStatement))}}function ar({iconType:e,headingText:t,elements:s,onShowVertexDetails:a}){return s.length?Object(E.jsx)("div",{"data-test-subj":`pipelineViewerSection_${t}`},Object(E.jsx)(Wn,{iconType:e,title:t}),Object(E.jsx)(R.EuiSpacer,{size:"s"}),Object(E.jsx)(statement_list_StatementList,{elements:s,onShowVertexDetails:a})):null}class pipeline_viewer_PipelineViewer extends r.a.Component{constructor(){super(),x()(this,"renderDetailDrawer",(()=>this.props.detailVertex?Object(E.jsx)(Hn,{vertex:this.props.detailVertex,onHide:()=>this.props.setDetailVertexId(void 0),timeseriesTooltipXValueFormatter:this.props.timeseriesTooltipXValueFormatter}):null)),this.state={detailDrawer:{vertex:null}}}render(){const{inputs:e,filters:t,outputs:s,queue:a}=this.props.pipeline;return Object(E.jsx)(R.EuiPage,null,Object(E.jsx)(R.EuiPageBody,null,Object(E.jsx)(R.EuiScreenReaderOnly,null,Object(E.jsx)("h1",null,Object(E.jsx)(D.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline_viewer.heading",defaultMessage:"Logstash pipelines"}))),Object(E.jsx)(R.EuiPageContent_Deprecated,{verticalPosition:"center",horizontalPosition:"center",className:"monPipelineViewer"},Object(E.jsx)(ar,{iconType:"logstashInput",headingText:_.i18n.translate("xpack.monitoring.logstash.pipelineViewer.inputsTitle",{defaultMessage:"Inputs"}),elements:e,onShowVertexDetails:this.props.setDetailVertexId}),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(Kn,{queue:a}),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(ar,{iconType:"logstashFilter",headingText:_.i18n.translate("xpack.monitoring.logstash.pipelineViewer.filtersTitle",{defaultMessage:"Filters"}),elements:t,onShowVertexDetails:this.props.setDetailVertexId}),Object(E.jsx)(R.EuiSpacer,null),Object(E.jsx)(ar,{iconType:"logstashOutput",headingText:_.i18n.translate("xpack.monitoring.logstash.pipelineViewer.outputsTitle",{defaultMessage:"Outputs"}),elements:s,onShowVertexDetails:this.props.setDetailVertexId}),this.renderDetailDrawer())))}}function ir(e,t){return e&&e.pipelineStage===t}class else_element_ElseElement extends Element{constructor(e,t,s){const{id:a}=e;super(`${a}_else`,e,t,s)}}function nr(e,t,s,a){e.forEach((e=>{let i=e;for(;ir(i,a)&&i!==s;)t.push(or(i,a)),i=i.next}))}function rr(e,t,s,a){t.forEach((t=>{e.push(...t.toList(s,a))}))}class if_statement_IfStatement extends Statement{constructor(e,t,s){super(e);const{name:a}=e;this.condition=a,this.trueStatements=t,this.elseStatements=s}toList(e,t){const s=[],a=new if_element_IfElement(this,e,t);s.push(a);const i=e+1;if(rr(s,this.trueStatements,i,a.id),this.elseStatements.length){const a=new else_element_ElseElement(this,e,t);s.push(a),rr(s,this.elseStatements,i,a.id)}return s}static fromPipelineGraphVertex(e,t){const s=[],a=[],{trueOutgoingVertices:i,falseOutgoingVertices:n}=e,r=e.next;return nr(i,s,r,t),nr(n,a,r,t),new if_statement_IfStatement(e,s,a)}}class pipeline_queue_Queue extends Statement{static fromPipelineGraphVertex(e){return new pipeline_queue_Queue(e)}}function or(e,t){switch(e.typeString){case"plugin":return plugin_statement_PluginStatement.fromPipelineGraphVertex(e,t);case"if":return if_statement_IfStatement.fromPipelineGraphVertex(e,t);case"queue":return pipeline_queue_Queue.fromPipelineGraphVertex(e,t);default:throw new Error(`Unknown vertex class: ${e.typeString}`)}}class Vertex{constructor(e,t){this.graph=e,this.update(t)}update(e){this.json=e}get name(){return this.json.config_name}get id(){return this.json.id}get subtitle(){return this.id}get incomingEdges(){return this.graph.edgesByTo[this.json.id]||[]}get incomingVertices(){return this.incomingEdges.map((e=>e.from))}get outgoingEdges(){return this.graph.edgesByFrom[this.json.id]||[]}get outgoingVertices(){return this.outgoingEdges.map((e=>e.to))}get meta(){return this.json.meta}get stats(){return this.json.stats||{}}descendants(){const e=[],t=[],s=[this],a={};for(;s.length>0;)s.pop().outgoingEdges.forEach((i=>{t.push(i);const n=i.to;!0!==a[n.id]&&(e.push(n),a[n.id]=!0,s.push(n))}));return{vertices:e,edges:t}}get hasExplicitId(){return Boolean(this.json.explicit_id)}}class queue_vertex_QueueVertex extends Vertex{get typeString(){return"queue"}get title(){return"queue"}get iconType(){return"logstashQueue"}get next(){return this.outgoingVertices}}class Pipeline{constructor(e,t,s,a){this.inputStatements=e,this.filterStatements=t,this.outputStatements=s,this.queue=a}static fromPipelineGraph(e){const t=function(e){return e.getVertices().filter((e=>"input"===e.pipelineStage)).map(or)}(e),s=function(e){const t=e.getVertices().filter((e=>"filter"===e.pipelineStage)),s=e.hasQueueVertex?t.find((e=>e.incomingVertices.every((e=>e instanceof queue_vertex_QueueVertex)))):t.find((e=>0===e.incomingVertices.length));if(!s)return[];const a=[];let i=s;for(;ir(i,"filter");)a.push(or(i,"filter")),i=i.next;return a}(e),a=function(e){return e.getVertices().filter((e=>"output"===e.pipelineStage&&!e.incomingVertices.some((e=>"output"===e.pipelineStage)))).map((e=>or(e,"output")))}(e),i=function(e){return e.hasQueueVertex?or(e.queueVertex):null}(e);return new Pipeline(t,s,a,i)}}class plugin_vertex_PluginVertex extends Vertex{get typeString(){return"plugin"}get name(){return this.json.config_name}get title(){return this.name}get pluginType(){return this.json.plugin_type}get isInput(){return"input"===this.pluginType}get isFilter(){return"filter"===this.pluginType}get isOutput(){return"output"===this.pluginType}get isProcessor(){return this.isFilter||this.isOutput}get latestMillisPerEvent(){return Object($.get)(this.stats,"millis_per_event")}get percentOfTotalProcessorTime(){return Object($.get)(this.stats,"percent_of_total_processor_duration")}get eventsPerMillisecond(){return this.isInput?this.stats.events_out_per_millisecond:this.stats.events_in_per_millisecond}get eventsPerSecond(){if(!this.eventsPerMillisecond.hasOwnProperty("data"))return 1e3*this.eventsPerMillisecond;const e={...this.eventsPerMillisecond};return e.data=this.eventsPerMillisecond.data.map((([e,t])=>[e,1e3*t])),e}get latestEventsPerSecond(){if(!this.eventsPerSecond.hasOwnProperty("data"))return this.eventsPerSecond;const e=this.eventsPerSecond.data.length;return this.eventsPerSecond.data[e-1][1]}isTimeConsuming(){const e=1/this.graph.processorVertices.length*2;return this.percentOfTotalProcessorTime>e}isSlow(){const e=this.graph.processorVertices.length;if(0===e)return 0;const t=this.graph.processorVertices.reduce(((e,t)=>e+t.latestMillisPerEvent||0),0)/e,s=this.graph.processorVertices.reduce(((e,s)=>{const a=(s.latestMillisPerEvent||0)-t;return e+a*a}),0)/e,a=Math.sqrt(s);return(this.latestMillisPerEvent-t)/a>2}get iconType(){switch(this.pluginType){case"input":return"logstashInput";case"filter":return"logstashFilter";case"output":return"logstashOutput";default:throw new Error(`Unknown plugin type ${this.pluginType}! This shouldn't happen!`)}}get next(){return(this.outgoingEdges[0]||{}).to}}class if_vertex_IfVertex extends Vertex{get typeString(){return"if"}get name(){return this.json.condition}get iconType(){return"logstashIf"}get title(){return"if"}get subtitle(){return this.name}get trueEdge(){return this.outgoingEdges.find((e=>!0===e.when))}get trueEdges(){return this.outgoingEdges.filter((e=>!0===e.when))}get falseEdge(){return this.outgoingEdges.find((e=>!1===e.when))}get falseEdges(){return this.outgoingEdges.filter((e=>!1===e.when))}get trueOutgoingVertex(){return this.trueEdge?this.trueEdge.to:null}get trueOutgoingVertices(){return this.trueEdges.map((e=>e.to))}get falseOutgoingVertex(){return this.falseEdge?this.falseEdge.to:null}get falseOutgoingVertices(){return this.falseEdges.map((e=>e.to))}get next(){const e=this.trueOutgoingVertex?this.trueOutgoingVertex.descendants().vertices:[],t=this.falseOutgoingVertex?this.falseOutgoingVertex.descendants().vertices:[];return e.unshift(this.trueOutgoingVertex),t.unshift(this.falseOutgoingVertex),Object($.intersection)(e,t)[0]}}function lr(e,t){const s=t.type;switch(s){case"plugin":return new plugin_vertex_PluginVertex(e,t);case"if":return new if_vertex_IfVertex(e,t);case"queue":return new queue_vertex_QueueVertex(e,t);default:throw new Error(`Unknown vertex type ${s}! This shouldn't happen!`)}}class Edge{constructor(e,t){this.graph=e,this.update(t)}update(e){this.json=e}get id(){return this.json.id}get from(){return this.graph.verticesById[this.fromId]}get fromId(){return this.json.from}get to(){return this.graph.verticesById[this.toId]}get toId(){return this.json.to}}class boolean_edge_BooleanEdge extends Edge{get when(){return this.json.when}get isTrue(){return!0===this.when}get isFalse(){return!1===this.when}}class graph_Graph{constructor(){this.json=null,this.verticesById={},this.edgesById={},this.edgesByFrom={},this.edgesByTo={}}getVertexById(e){return this.verticesById[e]}getVertices(){return void 0===this.vertexCache&&(this.vertexCache=Object.values(this.verticesById)),this.vertexCache}get queueVertex(){return this.getVertices().find((e=>e instanceof queue_vertex_QueueVertex))}get processorVertices(){return this.getVertices().filter((e=>e.isProcessor))}get edges(){return Object.values(this.edgesById)}update(e){this.json=e,e.vertices.forEach((e=>{const t=this.verticesById[e.id];if(void 0!==t)t.update(e);else{const t=lr(this,e);this.verticesById[e.id]=t}})),e.edges.forEach((e=>{const t=this.edgesById[e.id];if(void 0!==t)t.update(e);else{const t=function(e,t){const s=t.type;switch(s){case"plain":return new Edge(e,t);case"boolean":return new boolean_edge_BooleanEdge(e,t);default:throw new Error(`Unknown edge type ${s}! This shouldn't happen!`)}}(this,e);this.edgesById[e.id]=t,void 0===this.edgesByFrom[t.from.json.id]&&(this.edgesByFrom[t.from.json.id]=[]),this.edgesByFrom[t.from.json.id].push(t),void 0===this.edgesByTo[t.to.json.id]&&(this.edgesByTo[t.to.json.id]=[]),this.edgesByTo[t.to.json.id].push(t)}})),this.annotateVerticesWithStages()}get startVertices(){return this.getVertices().filter((e=>0===e.incomingEdges.length))}get endVertices(){return this.getVertices().filter((e=>0===e.outgoingEdges.length))}get hasQueueVertex(){return!!this.queueVertex}annotateVerticesWithStages(){this.annotateInputStageVertices(),this.annotateOutputStageVertices(),this.annotateFilterStageVertices()}annotateInputStageVertices(){this.hasQueueVertex&&this.startVertices.forEach((e=>e.pipelineStage="input"))}annotateOutputStageVertices(){if(1===this.endVertices.length&&this.endVertices[0]instanceof queue_vertex_QueueVertex)return;if(this.endVertices.every((e=>"filter"===e.pluginType)))return;const e=[...this.endVertices];for(;e.length>0;){const t=e.shift(),s=t.incomingVertices,a=s.some((e=>e instanceof plugin_vertex_PluginVertex&&"filter"===e.pluginType)),i=s.some((e=>e instanceof queue_vertex_QueueVertex)),n=0===s.length;a||i||n?(t.pipelineStage="output",t.descendants().vertices.forEach((e=>e.pipelineStage="output"))):e.push(...s)}}annotateFilterStageVertices(){const e=[];for(this.hasQueueVertex?e.push(...this.queueVertex.outgoingVertices):e.push(...this.startVertices);e.length>0;){const t=e.shift();t.pipelineStage||(t.pipelineStage="filter",e.push(...t.outgoingVertices))}}}class config_Config{constructor(){this.graph=new graph_Graph}update(e){this.json=e,this.graph.update(e.graph)}}class pipeline_state_PipelineState{constructor(e){this.config=new config_Config,this.update(e)}update(e){this.config.update(e.representation)}}const cr=e=>{const{pipelineHash:t,pipelineVersions:s,onChangePipelineHash:a}=e;return Object(E.jsx)(R.EuiFlexGroup,null,Object(E.jsx)(R.EuiFlexItem,{grow:!1},Object(E.jsx)(R.EuiSelect,{value:t,options:s.map((e=>({text:_.i18n.translate("xpack.monitoring.logstashNavigation.pipelineVersionDescription",{defaultMessage:"Version active {relativeLastSeen} and first seen {relativeFirstSeen}",values:{relativeLastSeen:e.relativeLastSeen,relativeFirstSeen:e.relativeFirstSeen}}),value:e.hash}))),onChange:({target:e})=>a(e.value)})))},ur=({clusters:e})=>{const t=Object(c.useRouteMatch)(),{hash:s,id:a}=t.params,r=Object(n.useContext)(M),{services:o}=Object(i.useKibana)(),l=r.cluster_uuid,{minIntervalSeconds:u}=Object(n.useContext)(g),d=Object(i.useUiSetting)("dateFormat"),[p,j]=Object(n.useState)(null),b=r.ccs,x=Object($.find)(e,{cluster_uuid:l}),[h,f]=Object(n.useState)({}),[O,v]=Object(n.useState)(void 0),{updateTotalItemCount:y}=ga("logstash.pipelines"),k=_.i18n.translate("xpack.monitoring.logstash.pipeline.routeTitle",{defaultMessage:"Logstash - Pipeline"}),S=_.i18n.translate("xpack.monitoring.logstash.pipeline.pageTitle",{defaultMessage:"Logstash pipeline: {pipeline}",values:{pipeline:h.pipeline?h.pipeline.id:""}}),T=Object(n.useCallback)((async()=>{var e;const t=s?`../api/monitoring/v1/clusters/${l}/logstash/pipeline/${a}/${s}`:`../api/monitoring/v1/clusters/${l}/logstash/pipeline/${a}`,i=await(null===(e=o.http)||void 0===e?void 0:e.fetch(t,{method:"POST",body:JSON.stringify({ccs:b,detailVertexId:O||void 0})})),n=i;n.versions=n.versions.map((e=>{const t=Ne(e.firstSeen,m.c),s=Ne(e.lastSeen,m.c),a=2*u,i=Date.now()-e.lastSeen<=1e3*a;return{...e,relativeFirstSeen:_.i18n.translate("xpack.monitoring.logstash.pipeline.relativeFirstSeenAgoLabel",{defaultMessage:"{relativeFirstSeen} ago",values:{relativeFirstSeen:t}}),relativeLastSeen:i?_.i18n.translate("xpack.monitoring.logstash.pipeline.relativeLastSeenNowLabel",{defaultMessage:"now"}):_.i18n.translate("xpack.monitoring.logstash.pipeline.relativeLastSeenAgoLabel",{defaultMessage:"until {relativeLastSeen} ago",values:{relativeLastSeen:s}})}})),f(n),y(i.totalNodeCount)}),[b,l,o.http,y,O,u,s,a]);Object(n.useEffect)((()=>{h.pipeline&&j(new pipeline_state_PipelineState(h.pipeline))}),[h]);const{generate:w}=L(),C=Object(n.useCallback)((e=>{v(e?e.id:null)}),[]);Object(n.useEffect)((()=>{void 0!==O&&T()}),[O,T]);const I=Object(n.useCallback)((e=>{window.location.hash=fe(`#/logstash/pipelines/${a}/${e}`)}),[a]);return Object(n.useEffect)((()=>{x&&w(x.cluster_name,{inLogstash:!0,page:"pipeline"})}),[x,h,w]),Object(E.jsx)(Ln,{tabsDisabled:!0,title:k,pageTitle:S,getPageData:T,cluster:x},Object(E.jsx)("div",null,Object(E.jsx)(cr,{pipelineVersions:h.versions,onChangePipelineHash:I,pipelineHash:s})),Object(E.jsx)("div",null,p&&Object(E.jsx)(pipeline_viewer_PipelineViewer,{pipeline:list_List.fromPipeline(Pipeline.fromPipelineGraph(p.config.graph)),timeseriesTooltipXValueFormatter:e=>Pe()(e).format(d),setDetailVertexId:C,detailVertex:h.vertex?lr(null,h.vertex):null})))},dr=({clusters:e})=>{var t;const s=Object(n.useContext)(M),{onBrush:a}=ea(),{services:r}=Object(i.useKibana)(),o=Object(i.useUiSetting)("dateFormat"),l=s.cluster_uuid,c=s.ccs,u=Object($.find)(e,{cluster_uuid:l}),[d,m]=Object(n.useState)(null),{getPaginationTableProps:g,getPaginationRouteOptions:p,updateTotalItemCount:j}=ga("logstash.pipelines"),b=_.i18n.translate("xpack.monitoring.logstash.pipelines.routeTitle",{defaultMessage:"Logstash Pipelines"}),x=_.i18n.translate("xpack.monitoring.logstash.pipelines.pageTitle",{defaultMessage:"Logstash pipelines"}),{generate:h}=L(),f=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/logstash/pipelines`,i=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...p()})}));m(i),j(i.totalPipelineCount)}),[c,l,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,p,j]);return Object(n.useEffect)((()=>{u&&h(u.cluster_name,{inLogstash:!0})}),[u,d,h]),Object(E.jsx)(Ln,{title:b,pageTitle:x,getPageData:f,cluster:u},Object(E.jsx)("div",{"data-test-subj":"logstashPipelinesListing"},(e=>{if(null===e)return null;const{clusterStatus:t,pipelines:s}=e||{},i=e?(n=t.versions,!Array.isArray(n)||0===n.length||n.some(Bn)?null:"Pipeline monitoring is only available in Logstash version 6.0.0 or higher."):null;var n;return Object(E.jsx)(pipeline_listing_PipelineListing,U()({className:"monitoringLogstashPipelinesTable",onBrush:e=>a({xaxis:e}),stats:t,data:s},g(),{upgradeMessage:i,dateFormat:o}))})(d)))};class enabler_Enabler{constructor(e,t){x()(this,"http",void 0),x()(this,"updateModel",void 0),this.http=e,this.updateModel=t}async enableCollectionInterval(){try{this.updateModel({isCollectionIntervalUpdating:!0}),await this.http.fetch("../api/monitoring/v1/elasticsearch_settings/set/collection_interval",{method:"PUT"}),this.updateModel({isCollectionIntervalUpdated:!0,isCollectionIntervalUpdating:!1})}catch(e){this.updateModel({errors:e.data,isCollectionIntervalUpdated:!1,isCollectionIntervalUpdating:!1})}}async enableCollectionEnabled(){try{this.updateModel({isCollectionEnabledUpdating:!0}),await this.http.fetch("../api/monitoring/v1/elasticsearch_settings/set/collection_enabled",{method:"PUT"}),this.updateModel({isCollectionEnabledUpdated:!0,isCollectionEnabledUpdating:!1})}catch(e){this.updateModel({errors:e.data,isCollectionEnabledUpdated:!1,isCollectionEnabledUpdating:!1})}}}const mr=[m.n],gr=[{message:_.i18n.translate("xpack.monitoring.noData.checker.clusterSettings",{defaultMessage:"Checking cluster settings API on production cluster"}),api:"../api/monitoring/v1/elasticsearch_settings/check/cluster"},{message:_.i18n.translate("xpack.monitoring.noData.checker.nodesSettings",{defaultMessage:"Checking nodes settings API on production cluster"}),api:"../api/monitoring/v1/elasticsearch_settings/check/nodes"}],pr=()=>{const e=_.i18n.translate("xpack.monitoring.noData.routeTitle",{defaultMessage:"Setup Monitoring"}),{services:t}=Object(i.useKibana)(),[s,a]=Object(n.useState)(!1),[r,o]=Object(n.useState)({errors:[],checkMessage:null,isLoading:!0,isCollectionEnabledUpdating:!1,isCollectionEnabledUpdated:!1,isCollectionIntervalUpdating:!1,isCollectionIntervalUpdated:!1}),{update:l}=L();l([{"data-test-subj":"breadcrumbClusters",text:"Clusters",href:"#/home",ignoreGlobalState:!0}]);const u=Object(n.useContext)(M),d=Hs();ae(u,t.http,d);const m=Object(n.useCallback)((e=>{o((t=>{const s={...t};return Object.keys(e).forEach((t=>{Array.isArray(s[t])?s[t].push(e[t]):s[t]=e[t]})),s}))}),[o]),g=Object(n.useCallback)((async()=>{let e;try{const e=await async function(e){var t,s;const a=null===(t=e.data)||void 0===t?void 0:t.query.timefilter.timefilter.getBounds(),i=a.min.toISOString(),n=a.max.toISOString();return function(e){return e.map(jr)}(await(null===(s=e.http)||void 0===s?void 0:s.fetch("../api/monitoring/v1/clusters",{method:"POST",body:JSON.stringify({css:void 0,timeRange:{min:i,max:n},codePaths:mr})})))}(t);if(e&&e.length)return void a(!0)}catch(t){t&&503===t.status&&(e={property:"custom",message:t.data.message})}e?m({reason:e}):await function(e,t,s){const a=async e=>{s({checkMessage:e.message});const{found:i,reason:n,error:r,errorReason:o}=await async function(e,t){try{const s=await t.fetch(e.api,{method:"GET"}),{found:a,reason:i}=s;return{found:a,reason:i}}catch(e){return{error:!0,found:!1,errorReason:e.body}}}(e,t);if(r){if(s({errors:o}),e.next)return a(e.next)}else{if(i)return s({reason:n,isLoading:!1,checkMessage:null});if(e.next)return a(e.next)}s({reason:null,isLoading:!1,checkMessage:null})},i=(e=>e.map(((t,s)=>{const a=e[s+1];return void 0!==a&&(t.next=a),t})))(e);return a(i[0])}(gr,t.http,m)}),[t,m]),p=new enabler_Enabler(t.http,m);return Object(E.jsx)(Qs,{title:e,getPageData:g},s?Object(E.jsx)(c.Redirect,{to:"/home"}):Object(E.jsx)(ve,U()({},r,{enabler:p,isCloudEnabled:v.a.shims.isCloud})))};function jr(e){return e.cluster_uuid===m.Y&&(e.cluster_name="Standalone Cluster"),e}function br(e,t){return t.search=e.location.search,t}function xr(e,t){return"string"==typeof e?{pathname:e,state:t}:e}const hr=({path:e,component:t,codePaths:s,fetchAllClusters:a,unsetGlobalState:i=!1})=>{const r=Object(n.useContext)(M),o=a?null:r.cluster_uuid,l=Object(c.useLocation)(),{clusters:u,loaded:d}=Tn(o,void 0,s),m=ie(void 0,r),g=function(e,t,s=!1){const a=(()=>{const s=Object($.find)(e,{cluster_uuid:t.cluster_uuid});if(s)return s;const a=Object($.first)(e);return a&&a.cluster_uuid?a:null})();return a&&a.license?(t.cluster_uuid=s?void 0:a.cluster_uuid,t.ccs=s?void 0:a.ccs,t.save&&t.save(),a):null}(u,r,i);if(d&&!g&&!m)return Object(E.jsx)(c.Redirect,{to:"/no-data"});if(d&&g){if("license"!==l.pathname&&"home"!==l.pathname&&fr(g.license))return Object(E.jsx)(c.Redirect,{to:"/license"});const e=g.isSupported||1===u.length;if("/home"!==l.pathname&&!e)return Object(E.jsx)(c.Redirect,{to:"/home"})}const p=t;return d?Object(E.jsx)(c.Route,{path:e},Object(E.jsx)(p,{clusters:u})):Object(E.jsx)(Cn,{staticLoadingState:!0})},fr=e=>{const{expiry_date_in_millis:t}=e;return void 0!==t&&(new Date).getTime()>=t},Or=(e,t,{element:s,history:a,setHeaderActionMenu:i,theme$:n},r)=>{const o=a.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))}));return l.a.render(Object(E.jsx)(vr,{core:e,plugins:t,externalConfig:r,setHeaderActionMenu:i,theme$:n}),s),()=>{l.a.unmountComponentAtNode(s),o()}},vr=({core:e,plugins:t,externalConfig:s,setHeaderActionMenu:r,theme$:o})=>{const l=function(){const e=Object(h.createHashHistory)({hashType:"slash"}),t=e.push,s=e.replace;return e.push=(s,a)=>t.apply(e,[br(e,xr(s,a))]),e.replace=(t,a)=>s.apply(e,[br(e,xr(t,a))]),e}(),u=Object(n.useMemo)((()=>e.uiSettings.get$("theme:darkMode")),[e.uiSettings]),p=d()(u,e.uiSettings.get("theme:darkMode"));return Object(E.jsx)(i.KibanaContextProvider,{services:{...e,...t}},Object(E.jsx)(a.EuiThemeProvider,{darkMode:p},Object(E.jsx)(i.KibanaThemeProvider,{theme$:e.theme.theme$},Object(E.jsx)(g.Provider,{value:s},Object(E.jsx)(k,{query:t.data.query,toasts:e.notifications.toasts,uiSettings:e.uiSettings},Object(E.jsx)(S.Provider,{value:{setHeaderActionMenu:r,theme$:o}},Object(E.jsx)(P,null,Object(E.jsx)(I,{history:l},Object(E.jsx)(c.Router,{history:l},Object(E.jsx)(c.Switch,null,Object(E.jsx)(c.Route,{path:"/access-denied",component:B}),Object(E.jsx)(c.Route,{path:"/no-data",component:pr}),Object(E.jsx)(c.Route,{path:"/loading",component:Cn}),Object(E.jsx)(hr,{path:"/license",component:Sn,codePaths:["all"],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/home",component:cn,codePaths:["all"],fetchAllClusters:!0,unsetGlobalState:!0}),Object(E.jsx)(hr,{path:"/overview",component:Oi,codePaths:["all"],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/elasticsearch/ml_jobs",component:Ai,codePaths:[m.k],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/elasticsearch/ccr/:index/shard/:shardId",component:Ti,codePaths:[m.k],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/elasticsearch/ccr",component:ki,codePaths:[m.k],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/elasticsearch/indices/:index/advanced",component:Li,codePaths:[m.k],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/elasticsearch/indices/:index",component:Di,codePaths:[m.k],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/elasticsearch/indices",component:zi,codePaths:[m.k],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/elasticsearch/nodes/:node/advanced",component:Ui,codePaths:[m.k],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/elasticsearch/nodes/:node",component:Gi,codePaths:[m.k],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/elasticsearch/nodes",component:Bi,codePaths:[m.k],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/elasticsearch",component:qi,codePaths:[m.k],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/kibana/instances/:instance",component:pn,codePaths:[m.m],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/kibana/instances",component:En,codePaths:[m.m],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/kibana",component:yn,codePaths:[m.m],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/beats/beat/:instance",component:Da,codePaths:[m.j],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/beats/beats",component:za,codePaths:[m.j],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/beats",component:$a,codePaths:[m.j],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/logstash/nodes",component:Rn,codePaths:[m.o],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/logstash/node/:uuid/advanced",component:Pn,codePaths:[m.o],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/logstash/node/:uuid/pipelines",component:$n,codePaths:[m.o],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/logstash/node/:uuid",component:Nn,codePaths:[m.o],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/logstash/pipelines/:id/:hash?",component:ur,codePaths:[m.o],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/logstash/pipelines",component:dr,codePaths:[m.o],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/logstash",component:Gn,codePaths:[m.o],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/apm/instances/:instance",component:Fa,codePaths:[m.i],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/apm/instances",component:wa,codePaths:[m.i],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/apm",component:ua,codePaths:[m.i],fetchAllClusters:!1}),Object(E.jsx)(hr,{path:"/enterprise_search",component:Ji,codePaths:[m.l],fetchAllClusters:!1}),Object(E.jsx)(c.Redirect,{to:{pathname:"/loading",search:l.location.search}})))))))))))}}])]);