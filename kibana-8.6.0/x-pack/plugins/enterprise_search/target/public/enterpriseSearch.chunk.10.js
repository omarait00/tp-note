/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.enterpriseSearch_bundle_jsonpfunction=window.enterpriseSearch_bundle_jsonpfunction||[]).push([[10],{100:function(e,t,n){e.exports=n(7)(3460)},101:function(e,t,n){e.exports=n(7)(171)},111:function(e,t,n){e.exports=n.p+"dae2b27a18448ac1e65a0f94581c81c4.png"},113:function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(87).Buffer)},127:function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,a,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var r,s,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,a)}));case 4:return t.nextTick((function(){e.call(null,n,a,i)}));default:for(r=new Array(o-1),s=0;s<r.length;)r[s++]=arguments[s];return t.nextTick((function(){e.apply(null,r)}))}}}:e.exports=t}).call(this,n(112))},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return m})),n(11);var a=n(13),i=n(2),r=n(14),s=n(1),o=n(54),c=n(143),l=n(44),u=n(111),d=n.n(u),p=n(12);const g=()=>Object(p.jsx)(c.b,{productName:s.m.NAME,productEuiIcon:"logoEnterpriseSearch"},Object(p.jsx)(o.d,{trail:[c.a]}),Object(p.jsx)(l.b,{action:"viewed",metric:"setup_guide"}),Object(p.jsx)("a",{href:"https://www.elastic.co/enterprise-search",target:"_blank",rel:"noopener noreferrer"},Object(p.jsx)("img",{className:"setupGuide__thumbnail",src:d.a,alt:i.i18n.translate("xpack.enterpriseSearch.enterpriseSearch.setupGuide.videoAlt",{defaultMessage:"Getting started with Enterprise Search"}),width:"1280","height-":"720"})),Object(p.jsx)(a.EuiTitle,{size:"s"},Object(p.jsx)("p",null,Object(p.jsx)(r.FormattedMessage,{id:"xpack.enterpriseSearch.enterpriseSearch.setupGuide.description",defaultMessage:"Search everything, anywhere. Easily implement powerful, modern search experiences for your busy team. Quickly add pre-tuned search to your website, app, or workplace. Search it all, simply."}))),Object(p.jsx)(a.EuiSpacer,{size:"m"}),Object(p.jsx)(a.EuiText,null,Object(p.jsx)("p",null,Object(p.jsx)(r.FormattedMessage,{id:"xpack.enterpriseSearch.enterpriseSearch.setupGuide.notConfigured",defaultMessage:"Enterprise Search is not configured in your Kibana instance yet."}))));var h=n(36);const f=i.i18n.translate("xpack.enterpriseSearch.productSelectorCalloutTitle",{defaultMessage:"Upgrade to get enterprise-level features for your team"});n(159);const m=()=>Object(p.jsx)(h.f,{to:"/setup_guide",paddingSize:"l",className:"enterpriseSearchSetupCta","data-test-subj":"setupGuideLink",hasBorder:!0,color:"transparent"},Object(p.jsx)(a.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(p.jsx)(a.EuiFlexItem,null,Object(p.jsx)(a.EuiTitle,{size:"s"},Object(p.jsx)("h2",null,f)),Object(p.jsx)(a.EuiText,{size:"s",color:"subdued"},i.i18n.translate("xpack.enterpriseSearch.overview.setupCta.description",{defaultMessage:"Add search to your app or internal organization with Elastic App Search and Workplace Search. Watch the video to see what you can do when search is made easy."}))),Object(p.jsx)(a.EuiFlexItem,{grow:!1},Object(p.jsx)(a.EuiImage,{src:d.a,alt:"",className:"enterpriseSearchSetupCta__image"}))))},151:function(e,t,n){"use strict";(function(e){function a(t){const n=t.split(":").pop();if(!n)return void console.debug(`Unable to decode ${n}`);let a;try{a=e.from(n,"base64").toString("utf8")}catch{return void console.debug(`base64 decoding failed on ${n}`)}const r=a.split("$");if(r.length<3)return void console.debug(`Expected at least 3 parts in ${a}`);const[s,o]=i(r[0]),[c,l]=i(r[1],o),[u,d]=i(r[2],o);return{defaultPort:o,elasticsearchUrl:`https://${c}.${s}:${l}`,host:s,kibanaUrl:`https://${u}.${s}:${d}`}}function i(e,t="443"){const[n,a=t]=e.split(":");return[n,a]}n.d(t,"a",(function(){return a}))}).call(this,n(87).Buffer)},152:function(e,t,n){e.exports=n.p+"c7b708f34eb0305182f9c88ac82377d8.svg"},153:function(e,t,n){e.exports=n.p+"b3b7cd460cb2d96149d1a80b249d186b.svg"},154:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(155);case"v8light":return n(157)}},155:function(e,t,n){var a=n(30),i=n(156);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},156:function(e,t,n){(t=n(31)(!1)).push([e.i,"@media only screen and (max-width:574px){.addContentEmptyPrompt{flex-direction:column-reverse}}@media only screen and (min-width:575px) and (max-width:767px){.addContentEmptyPrompt{flex-direction:column-reverse}}",""]),e.exports=t},157:function(e,t,n){var a=n(30),i=n(158);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},158:function(e,t,n){(t=n(31)(!1)).push([e.i,"@media only screen and (max-width:574px){.addContentEmptyPrompt{flex-direction:column-reverse}}@media only screen and (min-width:575px) and (max-width:767px){.addContentEmptyPrompt{flex-direction:column-reverse}}",""]),e.exports=t},159:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(160);case"v8light":return n(162)}},160:function(e,t,n){var a=n(30),i=n(161);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},161:function(e,t,n){(t=n(31)(!1)).push([e.i,".enterpriseSearchSetupCta__image{margin:0 auto;width:160px}@media only screen and (max-width:574px){.enterpriseSearchSetupCta__image{width:240px}}@media only screen and (min-width:575px) and (max-width:767px){.enterpriseSearchSetupCta__image{width:240px}}",""]),e.exports=t},162:function(e,t,n){var a=n(30),i=n(163);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},163:function(e,t,n){(t=n(31)(!1)).push([e.i,".enterpriseSearchSetupCta__image{margin:0 auto;width:160px}@media only screen and (max-width:574px){.enterpriseSearchSetupCta__image{width:240px}}@media only screen and (min-width:575px) and (max-width:767px){.enterpriseSearchSetupCta__image{width:240px}}",""]),e.exports=t},169:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(434);case"v8light":return n(436)}},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n(11);var a=n(13),i=n(171),r=n(151),s=n(12);const o=({indexName:e,apiKey:t,document:n,pipeline:o})=>{var c;const l=Object(i.a)(),u=l.cloudId&&(null===(c=Object(r.a)(l.cloudId))||void 0===c?void 0:c.elasticsearchUrl)||"https://localhost:9200",d=t||"<Replace_with_created_API_key>",{name:p,...g}=null!=o?o:{},h=Object.entries(g).reduce(((e,t)=>({...e,[`_${t[0]}`]:t[1]})),{}),f=o?{...n,...h}:n;return Object(s.jsx)(a.EuiCodeBlock,{language:"bash",fontSize:"m",isCopyable:!0},`curl -X POST '${u}/${e}/_doc${o?`?pipeline=${p}`:""}' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Authorization: ApiKey ${d}' \\\n  -d '${JSON.stringify(f,null,2)}'\n`)}},171:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(29),i=n(37);const r=()=>{const{cloud:e}=Object(a.useValues)(i.a);return{cloudId:null==e?void 0:e.cloudId,deploymentUrl:null==e?void 0:e.deploymentUrl}}},172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ContextReference",{enumerable:!0,get:function(){return i.ContextReference}}),Object.defineProperty(t,"Reference",{enumerable:!0,get:function(){return a.Reference}}),Object.defineProperty(t,"SiblingReference",{enumerable:!0,get:function(){return r.SiblingReference}});var a=n(173),i=n(479),r=n(480)},173:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.Reference=void 0;var i=a(n(0)),r=n(53);t.Reference=class Reference{static isReference(e){return null!=e&&"function"==typeof e.getSchema&&r.internals.isRef(e.getSchema())}constructor(e){(0,i.default)(this,"internalSchema",void 0),this.internalSchema=r.internals.ref(e)}getSchema(){return this.internalSchema}}},174:function(e,t,n){"use strict";var a,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};a=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,a){function i(n){e.removeListener(t,r),a(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}j(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&j(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,a){var i,r,s,o;if(l(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=a?[n,s]:[s,n]:a?s.unshift(n):s.push(n),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,o=c,console&&console.warn&&console.warn(o)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=p.bind(a);return i.listener=n,a.wrapFn=i,i}function h(e,t,n){var a=e._events;if(void 0===a)return[];var i=a[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}function j(e,t,n,a){if("function"==typeof e.on)a.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(r){a.once&&e.removeEventListener(t,i),n(r)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=m(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return l(t),this.on(e,g(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,g(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,a,i,r,s;if(l(t),void 0===(a=this._events))return this;if(void 0===(n=a[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,i=r;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(a[e]=n[0]),void 0!==a.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,a;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,r=Object.keys(n);for(a=0;a<r.length;++a)"removeListener"!==(i=r[a])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;a>=0;a--)this.removeListener(e,t[a]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},175:function(e,t,n){(t=e.exports=n(236)).Stream=t,t.Readable=t,t.Writable=n(177),t.Duplex=n(89),t.Transform=n(241),t.PassThrough=n(474)},176:function(e,t,n){var a=n(87),i=a.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=a:(r(a,t),t.Buffer=s),r(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var a=i(e);return void 0!==t?"string"==typeof n?a.fill(t,n):a.fill(t):a.fill(0),a},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},177:function(e,t,n){"use strict";(function(t,a,i){var r=n(127);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var a=e.entry;for(e.entry=null;a;){var i=a.callback;t.pendingcb--,i(undefined),a=a.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=x;var o,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?a:r.nextTick;x.WritableState=j;var l=Object.create(n(113));l.inherits=n(100);var u,d={deprecate:n(472)},p=n(237),g=n(176).Buffer,h=i.Uint8Array||function(){},f=n(238);function m(){}function j(e,t){o=o||n(89),e=e||{};var a=t instanceof o;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,l=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:a&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,a=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,a,i){--t.pendingcb,n?(r.nextTick(i,a),r.nextTick(E,e,t),e._writableState.errorEmitted=!0,e.emit("error",a)):(i(a),e._writableState.errorEmitted=!0,e.emit("error",a),E(e,t))}(e,n,a,t,i);else{var s=O(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||M(e,n),a?c(y,e,n,s,i):y(e,n,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function x(e){if(o=o||n(89),!(u.call(x,this)||this instanceof o))return new x(e);this._writableState=new j(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),p.call(this)}function b(e,t,n,a,i,r,s){t.writelen=a,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,r,t.onwrite),t.sync=!1}function y(e,t,n,a){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,a(),E(e,t)}function M(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var a=t.bufferedRequestCount,i=new Array(a),r=t.corkedRequestsFree;r.entry=n;for(var o=0,c=!0;n;)i[o]=n,n.isBuf||(c=!1),n=n.next,o+=1;i.allBuffers=c,b(e,t,!0,t.length,i,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,d=n.callback;if(b(e,t,!1,t.objectMode?1:l.length,l,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function O(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),E(e,t)}))}function E(e,t){var n=O(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}l.inherits(x,p),j.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(j.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===x&&e&&e._writableState instanceof j}})):u=function(e){return e instanceof this},x.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},x.prototype.write=function(e,t,n){var a,i=this._writableState,s=!1,o=!i.objectMode&&(a=e,g.isBuffer(a)||a instanceof h);return o&&!g.isBuffer(e)&&(e=function(e){return g.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=m),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),r.nextTick(t,n)}(this,n):(o||function(e,t,n,a){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),r.nextTick(a,s),i=!1),i}(this,i,e,n))&&(i.pendingcb++,s=function(e,t,n,a,i,r){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=g.from(t,n)),t}(t,a,i);a!==s&&(n=!0,i="buffer",a=s)}var o=t.objectMode?1:a.length;t.length+=o;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:a,encoding:i,isBuf:n,callback:r,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,o,a,i,r);return c}(this,i,o,e,t,n)),s},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||M(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var a=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),a.corked&&(a.corked=1,this.uncork()),a.ending||a.finished||function(e,t,n){t.ending=!0,E(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,a,n)},Object.defineProperty(x.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=f.destroy,x.prototype._undestroy=f.undestroy,x.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(112),n(239).setImmediate,n(101))},178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.ByteSizeValue=void 0,t.ensureByteSizeValue=function(e){return"string"==typeof e?ByteSizeValue.parse(e):"number"==typeof e?new ByteSizeValue(e):e},t.tb=t.mb=t.kb=t.gb=void 0;const a={b:Math.pow(1024,0),gb:Math.pow(1024,3),kb:Math.pow(1024,1),mb:Math.pow(1024,2)};function i(e,t){return`${Number(e.toFixed(2))}${t}`}class ByteSizeValue{static parse(e){const t=/([1-9][0-9]*)(b|kb|mb|gb)/i.exec(e);if(!t){const t=Number(e);if("number"!=typeof t||isNaN(t))throw new Error("Failed to parse value as byte value. Value must be either number of bytes, or follow the format <count>[b|kb|mb|gb] (e.g., '1024kb', '200mb', '1gb'), where the number is a safe positive integer.");return new ByteSizeValue(t)}const n=parseInt(t[1],10),i=t[2].toLowerCase();return new ByteSizeValue(n*a[i])}constructor(e){if(this.valueInBytes=e,!Number.isSafeInteger(e)||e<0)throw new Error("Value in bytes is expected to be a safe positive integer.")}isGreaterThan(e){return this.valueInBytes>e.valueInBytes}isLessThan(e){return this.valueInBytes<e.valueInBytes}isEqualTo(e){return this.valueInBytes===e.valueInBytes}getValueInBytes(){return this.valueInBytes}toString(e){let t=this.valueInBytes,n="b";for(const a of["kb","mb","gb"]){if(n===e||null==e&&t<1024)return i(t,n);t/=1024,n=a}return i(t,n)}}t.ByteSizeValue=ByteSizeValue;const r=e=>new ByteSizeValue(e);t.bytes=r;const s=e=>r(1024*e);t.kb=s;const o=e=>s(1024*e);t.mb=o;const c=e=>o(1024*e);t.gb=c,t.tb=e=>c(1024*e)},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n(11);var a=n(15),i=n(13),r=n(2),s=n(1),o=n(152),c=n.n(o),l=n(153),u=n.n(l),d=n(47),p=n(4),g=n(36),h=(n(154),n(12));const f=({title:e,buttonLabel:t})=>{const{colorMode:n}=Object(i.useEuiTheme)();return Object(h.jsx)(i.EuiPanel,{color:"transparent",paddingSize:"none"},Object(h.jsx)(i.EuiFlexGroup,{className:"addContentEmptyPrompt",justifyContent:"spaceBetween",direction:"row"},Object(h.jsx)(i.EuiFlexItem,{grow:!0},Object(h.jsx)(i.EuiFlexGroup,{direction:"column",responsive:!1},Object(h.jsx)(i.EuiFlexItem,{grow:!0},Object(h.jsx)(i.EuiTitle,null,Object(h.jsx)("h2",null,e||r.i18n.translate("xpack.enterpriseSearch.overview.emptyState.heading",{defaultMessage:"Add content to Enterprise Search"}))),Object(h.jsx)(i.EuiSpacer,{size:"l"}),Object(h.jsx)(i.EuiText,{grow:!1},Object(h.jsx)("p",null,r.i18n.translate("xpack.enterpriseSearch.emptyState.description",{defaultMessage:"Your content is stored in an Elasticsearch index. Get started by creating an Elasticsearch index and selecting an ingestion method. Options include the Elastic web crawler, third party data integrations, or using Elasticsearch API endpoints."})),Object(h.jsx)("p",null,r.i18n.translate("xpack.enterpriseSearch.emptyState.description.line2",{defaultMessage:"Whether you're building a search experience with App Search or Elasticsearch, you can now get started here."})))),Object(h.jsx)(i.EuiFlexItem,null,Object(h.jsx)(i.EuiFlexGroup,{alignItems:"center"},Object(h.jsx)(i.EuiFlexItem,{grow:!1},Object(h.jsx)(g.d,{to:Object(a.generatePath)(s.j.URL+d.b),shouldNotCreateHref:!0},Object(h.jsx)(i.EuiButton,{color:"primary",fill:!0},t||r.i18n.translate("xpack.enterpriseSearch.overview.emptyState.buttonTitle",{defaultMessage:"Add content to Enterprise Search"})))),Object(h.jsx)(i.EuiFlexItem,null,Object(h.jsx)(i.EuiLink,{href:p.a.start,target:"_blank"},r.i18n.translate("xpack.enterpriseSearch.overview.emptyState.footerLinkTitle",{defaultMessage:"Learn more"}))))))),Object(h.jsx)(i.EuiFlexItem,{grow:!1},Object(h.jsx)(i.EuiImage,{size:"xl",float:"right",src:"LIGHT"===n?u.a:c.a,alt:r.i18n.translate("xpack.enterpriseSearch.overview.searchIndices.image.altText",{defaultMessage:"Search indices illustration"})}))))}},213:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(11),i=n.n(a),r=n(13),s=n(2),o=n(4),c=n(12);const l=()=>Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(r.EuiTitle,{size:"xs"},Object(c.jsx)("h4",null,s.i18n.translate("xpack.enterpriseSearch.overview.elasticsearchResources.title",{defaultMessage:"Resources"}))),Object(c.jsx)(r.EuiSpacer,{size:"s"}),Object(c.jsx)(r.EuiSpacer,{size:"xs"}),Object(c.jsx)(r.EuiLink,{href:o.a.elasticsearchGettingStarted,target:"_blank"},s.i18n.translate("xpack.enterpriseSearch.overview.elasticsearchResources.gettingStarted",{defaultMessage:"Getting started with Elasticsearch"})),Object(c.jsx)(r.EuiSpacer,{size:"s"}),Object(c.jsx)(r.EuiSpacer,{size:"xs"}),Object(c.jsx)(r.EuiLink,{href:o.a.elasticsearchCreateIndex,target:"_blank"},s.i18n.translate("xpack.enterpriseSearch.overview.elasticsearchResources.createIndex",{defaultMessage:"Create a new index"})),Object(c.jsx)(r.EuiSpacer,{size:"s"}),Object(c.jsx)(r.EuiSpacer,{size:"xs"}),Object(c.jsx)(r.EuiLink,{href:o.a.clientsGuide,target:"_blank"},s.i18n.translate("xpack.enterpriseSearch.overview.elasticsearchResources.elasticsearchClients",{defaultMessage:"Setup a language client"})),Object(c.jsx)(r.EuiSpacer,{size:"s"}),Object(c.jsx)(r.EuiSpacer,{size:"xs"}),Object(c.jsx)(r.EuiLink,{href:"https://github.com/elastic/search-ui/tree/master/packages/search-ui-elasticsearch-connector",target:"_blank"},s.i18n.translate("xpack.enterpriseSearch.overview.elasticsearchResources.searchUi",{defaultMessage:"Search UI for Elasticsearch"})))},233:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var a=new Uint8Array(16);e.exports=function(){return n(a),a}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},234:function(e,t){for(var n=[],a=0;a<256;++a)n[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,i=n;return[i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]]].join("")}},236:function(e,t,n){"use strict";(function(t,a){var i=n(127);e.exports=b;var r,s=n(467);b.ReadableState=x,n(174).EventEmitter;var o=function(e,t){return e.listeners(t).length},c=n(237),l=n(176).Buffer,u=t.Uint8Array||function(){},d=Object.create(n(113));d.inherits=n(100);var p=n(468),g=void 0;g=p&&p.debuglog?p.debuglog("stream"):function(){};var h,f=n(469),m=n(238);d.inherits(b,c);var j=["error","close","destroy","pause","resume"];function x(e,t){e=e||{};var a=t instanceof(r=r||n(89));this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:a&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=n(240).StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function b(e){if(r=r||n(89),!(this instanceof b))return new b(e);this._readableState=new x(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function y(e,t,n,a,i){var r,s=e._readableState;return null===t?(s.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,E(e)}}(e,s)):(i||(r=function(e,t){var n,a;return a=t,l.isBuffer(a)||a instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(s,t)),r?e.emit("error",r):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),a?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):M(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?M(e,s,t,!1):w(e,s)):M(e,s,t,!1))):a||(s.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function M(e,t,n,a){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,a?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&E(e)),w(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var n,a=this._readableState;return a.objectMode?n=!0:"string"==typeof e&&((t=t||a.defaultEncoding)!==a.encoding&&(e=l.from(e,t),t=""),n=!0),y(this,e,t,!1,n)},b.prototype.unshift=function(e){return y(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return h||(h=n(240).StringDecoder),this._readableState.decoder=new h(e),this._readableState.encoding=e,this};var O=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=O?e=O:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(g("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(v,e):v(e))}function v(e){g("emit readable"),e.emit("readable"),T(e)}function w(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(I,e,t))}function I(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(g("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function N(e){g("readable nexttick read 0"),e.read(0)}function D(e,t){t.reading||(g("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),T(e),t.flowing&&!t.reading&&e.read(0)}function T(e){var t=e._readableState;for(g("flow",t.flowing);t.flowing&&null!==e.read(););}function k(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var a;return e<t.head.data.length?(a=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):a=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,a=1,i=n.data;for(e-=i.length;n=n.next;){var r=n.data,s=e>r.length?r.length:e;if(s===r.length?i+=r:i+=r.slice(0,e),0==(e-=s)){s===r.length?(++a,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=r.slice(s));break}++a}return t.length-=a,i}(e,t):function(e,t){var n=l.allocUnsafe(e),a=t.head,i=1;for(a.data.copy(n),e-=a.data.length;a=a.next;){var r=a.data,s=e>r.length?r.length:e;if(r.copy(n,n.length-e,0,s),0==(e-=s)){s===r.length?(++i,a.next?t.head=a.next:t.head=t.tail=null):(t.head=a,a.data=r.slice(s));break}++i}return t.length-=i,n}(e,t),a}(e,t.buffer,t.decoder),n);var n}function C(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(_,t,e))}function _(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function A(e,t){for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1}b.prototype.read=function(e){g("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return g("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):E(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&C(this),null;var a,i=t.needReadable;return g("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&g("length less than watermark",i=!0),t.ended||t.reading?g("reading or ended",i=!1):i&&(g("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(n,t))),null===(a=e>0?k(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&C(this)),null!==a&&this.emit("data",a),a},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,g("pipe count=%d opts=%j",r.pipesCount,t);var c=t&&!1===t.end||e===a.stdout||e===a.stderr?x:l;function l(){g("onend"),e.end()}r.endEmitted?i.nextTick(c):n.once("end",c),e.on("unpipe",(function t(a,i){g("onunpipe"),a===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,g("cleanup"),e.removeListener("close",m),e.removeListener("finish",j),e.removeListener("drain",u),e.removeListener("error",f),e.removeListener("unpipe",t),n.removeListener("end",l),n.removeListener("end",x),n.removeListener("data",h),d=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;g("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,T(e))}}(n);e.on("drain",u);var d=!1,p=!1;function h(t){g("ondata"),p=!1,!1!==e.write(t)||p||((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==A(r.pipes,e))&&!d&&(g("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function f(t){g("onerror",t),x(),e.removeListener("error",f),0===o(e,"error")&&e.emit("error",t)}function m(){e.removeListener("finish",j),x()}function j(){g("onfinish"),e.removeListener("close",m),x()}function x(){g("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?s(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",f),e.once("close",m),e.once("finish",j),e.emit("pipe",n),r.flowing||(g("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var a=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<i;r++)a[r].emit("unpipe",this,n);return this}var s=A(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},b.prototype.on=function(e,t){var n=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var a=this._readableState;a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&E(this):i.nextTick(N,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(g("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(D,e,t))}(this,e)),this},b.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,n=this._readableState,a=!1;for(var i in e.on("end",(function(){if(g("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){g("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(a=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var r=0;r<j.length;r++)e.on(j[r],this.emit.bind(this,j[r]));return this._read=function(t){g("wrapped _read",t),a&&(a=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=k}).call(this,n(101),n(112))},237:function(e,t,n){e.exports=n(174).EventEmitter},238:function(e,t,n){"use strict";var a=n(127);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return r||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(a.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},239:function(e,t,n){(function(e){var a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(471),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(101))},240:function(e,t,n){"use strict";var a=n(473).Buffer,i=a.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(a.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var a=n.charCodeAt(n.length-1);if(a>=55296&&a<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}t.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},r.prototype.text=function(e,t){var n=function(e,t,n){var a=t.length-1;if(a<n)return 0;var i=s(t[a]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--a<n||-2===i?0:(i=s(t[a]))>=0?(i>0&&(e.lastNeed=i-2),i):--a<n||-2===i?0:(i=s(t[a]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var a=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,a),e.toString("utf8",t,a)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},241:function(e,t,n){"use strict";e.exports=s;var a=n(89),i=Object.create(n(113));function r(e,t){var n=this._transformState;n.transforming=!1;var a=n.writecb;if(!a)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),a(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);a.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){c(e,t,n)})):c(this,null,null)}function c(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(100),i.inherits(s,a),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,n){var a=this._transformState;if(a.writecb=n,a.writechunk=e,a.writeencoding=t,!a.transforming){var i=this._readableState;(a.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var n=this;a.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureDuration=function(e){return"string"==typeof e?function(e){const t=i.exec(e);if(!t){const t=Number(e);if("number"!=typeof t||isNaN(t))throw new Error("Failed to parse value as time value. Value must be a duration in milliseconds, or follow the format <count>[ms|s|m|h|d|w|M|Y] (e.g. '70ms', '5s', '3d', '1Y'), where the duration is a safe positive integer.");return r(t)}const n=parseInt(t[1],10),s=t[2];return(0,a.duration)(n,s)}(e):"number"==typeof e?r(e):e},Object.defineProperty(t,"isDuration",{enumerable:!0,get:function(){return a.isDuration}});var a=n(18);const i=/^(0|[1-9][0-9]*)(ms|s|m|h|d|w|M|Y)$/;function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Value in milliseconds is expected to be a safe positive integer.");return(0,a.duration)(e)}},243:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(510);case"v8light":return n(512)}},244:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(514);case"v8light":return n(516)}},399:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(400);case"v8light":return n(402)}},400:function(e,t,n){var a=n(30),i=n(401);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},401:function(e,t,n){(t=n(31)(!1)).push([e.i,".gettingStartedSteps .grayscaleSvg{filter:grayscale(1)}.gettingStartedSteps .addManyMoreButton{border:1px solid #343741}.gettingStartedSteps .iconTooltip{border-bottom:1px solid #343741}",""]),e.exports=t},402:function(e,t,n){var a=n(30),i=n(403);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},403:function(e,t,n){(t=n(31)(!1)).push([e.i,".gettingStartedSteps .grayscaleSvg{filter:grayscale(1)}.gettingStartedSteps .addManyMoreButton{border:1px solid #d3dae6}.gettingStartedSteps .iconTooltip{border-bottom:1px solid #d3dae6}",""]),e.exports=t},404:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(405);case"v8light":return n(407)}},405:function(e,t,n){var a=n(30),i=n(406);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},406:function(e,t,n){(t=n(31)(!1)).push([e.i,".entSearchIndicesSearchBar{max-width:400px}",""]),e.exports=t},407:function(e,t,n){var a=n(30),i=n(408);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},408:function(e,t,n){(t=n(31)(!1)).push([e.i,".entSearchIndicesSearchBar{max-width:400px}",""]),e.exports=t},409:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(410);case"v8light":return n(412)}},410:function(e,t,n){var a=n(30),i=n(411);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},411:function(e,t,n){(t=n(31)(!1)).push([e.i,".buttonGroup .buttonGroupOption{cursor:pointer}.buttonGroup .buttonGroupOption--selected .buttonGroupOption-panel{border:1px solid #7dded8;box-shadow:0 0 0 1px #7dded8}",""]),e.exports=t},412:function(e,t,n){var a=n(30),i=n(413);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},413:function(e,t,n){(t=n(31)(!1)).push([e.i,".buttonGroup .buttonGroupOption{cursor:pointer}.buttonGroup .buttonGroupOption--selected .buttonGroupOption-panel{border:1px solid #00bfb3;box-shadow:0 0 0 1px #00bfb3}",""]),e.exports=t},414:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDYiIGhlaWdodD0iNDYiIHZpZXdCb3g9Ii0xMiAwIDM0IDQ2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoCiAgICBkPSJNMTQuODA0MSA1LjU5MzM2QzEyLjkyMzggMy4zNjI1MSAxMS4zMDQ3IDEuMDk2ODEgMTAuOTczOSAwLjYyNjI0QzEwLjkzOTEgMC41OTEzODMgMTAuODg2OSAwLjU5MTM4MyAxMC44NTIxIDAuNjI2MjRDMTAuNTIxMyAxLjA5NjgxIDguOTAyMTggMy4zNjI1MSA3LjAyMTkyIDUuNTkzMzZDLTkuMTE2ODMgMjYuMTc2NCA5LjU2Mzc2IDQwLjA2NyA5LjU2Mzc2IDQwLjA2N0w5LjcyMDQ0IDQwLjE3MTZDOS44NTk3IDQyLjMxNTIgMTAuMjA3OSA0NS40MDAxIDEwLjIwNzkgNDUuNDAwMUgxMC45MDQzSDExLjYwMDdDMTEuNjAwNyA0NS40MDAxIDExLjk0ODkgNDIuMzMyNiAxMi4wODgyIDQwLjE3MTZMMTIuMjQ0OCA0MC4wNDk1QzEyLjI2MjIgNDAuMDQ5NSAzMC45NDI5IDI2LjE3NjQgMTQuODA0MSA1LjU5MzM2Wk0xMC45MDQzIDM5Ljc1MzJDMTAuOTA0MyAzOS43NTMyIDEwLjA2ODYgMzkuMDM4NyA5Ljg0MjMgMzguNjcyNlYzOC42Mzc5TDEwLjg1MjEgMTYuMjI0OEMxMC44NTIxIDE2LjE1NSAxMC45NTY1IDE2LjE1NSAxMC45NTY1IDE2LjIyNDhMMTEuOTY2MyAzOC42Mzc5VjM4LjY3MjZDMTEuNzQgMzkuMDM4NyAxMC45MDQzIDM5Ljc1MzIgMTAuOTA0MyAzOS43NTMyWiIKICAgIGZpbGw9IiMwNjIzMkUiIC8+Cjwvc3ZnPgo="},415:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIKICAgIGQ9Ik0yMi4xMjgyIDE4LjIxODhDMjAuODM2NyAxOC4xODY0IDE5LjgzNjUgMTguMzE1MyAxOC45OTc3IDE4LjY3MDZDMTguNzU1NiAxOC43NjczIDE4LjM2ODggMTguNzY3MyAxOC4zMzU3IDE5LjA3NEMxOC40NjU3IDE5LjIwMjggMTguNDgxMiAxOS40MTI0IDE4LjU5NSAxOS41OTA3QzE4Ljc4OCAxOS45MTM0IDE5LjEyNjMgMjAuMzQ4NCAxOS40MzM0IDIwLjU3NDlDMTkuNzcyNCAyMC44MzMyIDIwLjExMTMgMjEuMDkwNSAyMC40NjY3IDIxLjMxNjNDMjEuMDk1NiAyMS43MDUzIDIxLjgwNTggMjEuOTMwMiAyMi40MTgxIDIyLjMxNzdDMjIuNzc0MyAyMi41NDMyIDIzLjEyOCAyMi44MzM1IDIzLjQ4NDIgMjMuMDc2MkMyMy42NjEgMjMuMjA1MiAyMy43NzMxIDIzLjQxNTMgMjQgMjMuNDk1MVYyMy40NDYyQzIzLjg4NjIgMjMuMzAxNSAyMy44NTQ1IDIzLjA5MTYgMjMuNzQyMSAyMi45MjkzQzIzLjU4MTEgMjIuNzY5MiAyMy40MTk0IDIyLjYyMzEgMjMuMjU3NyAyMi40NjI0QzIyLjc4OTUgMjEuODMzMiAyMi4yMDc4IDIxLjI4NTEgMjEuNTggMjAuODMzMkMyMS4wNjMyIDIwLjQ3NzMgMTkuOTMzIDE5Ljk5MzEgMTkuNzI0MSAxOS4zOTc5QzE5LjcyNDEgMTkuMzk3OSAxOS43MDcyIDE5LjM4MDggMTkuNjkxMyAxOS4zNjQ5QzIwLjA0NjQgMTkuMzMyMSAyMC40NjY3IDE5LjIwMjggMjAuODA1MyAxOS4xMDVDMjEuMzUzMSAxOC45NjAyIDIxLjg1MzQgMTguOTkyOSAyMi40MTgxIDE4Ljg0ODFDMjIuNjc2NyAxOC43ODMxIDIyLjkzNSAxOC43MDE4IDIzLjE5NDIgMTguNjIyNVYxOC40NzYzQzIyLjkwMjIgMTguMTg2NCAyMi42OTMzIDE3Ljc5ODYgMjIuMzg2OCAxNy41MjQ1QzIxLjU2NDUgMTYuODE0OCAyMC42NTk4IDE2LjEyMTQgMTkuNzI0MSAxNS41Mzk2QzE5LjIyMzEgMTUuMjE2OCAxOC41Nzc3IDE1LjAwODEgMTguMDQ1IDE0LjczMzFDMTcuODUyMyAxNC42MzYxIDE3LjUzIDE0LjU4ODMgMTcuNDE2NSAxNC40MjZDMTcuMTI1OSAxNC4wNzExIDE2Ljk2MzggMTMuNjAzOCAxNi43NTQ2IDEzLjE4MzZDMTYuMjg3IDEyLjI5NzEgMTUuODM0NCAxMS4zMTMxIDE1LjQzMTcgMTAuMzc1N0MxNS4xNDE0IDkuNzQ2NzkgMTQuOTYzOCA5LjExNzkzIDE0LjYwODcgOC41MzY2NEMxMi45NDU5IDUuNzkyOTQgMTEuMTM5MyA0LjEzMTgzIDguMzYzODMgMi41MDE3NEM3Ljc2NjY5IDIuMTYyNDkgNy4wNTY4IDIuMDE3MzQgNi4yOTg5OSAxLjgzOTc4QzUuODk0OTIgMS44MjI4OSA1LjQ5MTg4IDEuNzkxNTEgNS4wODg0OSAxLjc3NTY1QzQuODI5OTEgMS42NjIyMiA0LjU3MTM0IDEuMzU1MzggNC4zNDU4NiAxLjIxMDIzQzMuNDI1NjYgMC42Mjk2MjkgMS4wNTQ2NiAtMC42Mjg3OTIgMC4zNzY0ODkgMS4wMzMwMUMtMC4wNTkzMDMgMi4wODI1IDEuMDIxOSAzLjExNDc1IDEuMzkzMjIgMy42NDc0MkMxLjY2NzMyIDQuMDE4MDUgMi4wMjI3OCA0LjQzODMzIDIuMjE1NTEgNC44NTcyM0MyLjMyODU5IDUuMTMxNjcgMi4zNjEgNS40MjI2NiAyLjQ3NDQzIDUuNzEyNjFDMi43MzIzMiA2LjQyMjUgMi45NzQgNy4yMTM0MSAzLjMxMzYgNy44NzUzN0MzLjQ5MDQ3IDguMjE0MjggMy42ODM4OSA4LjU2OTc0IDMuOTA5NzIgOC44NzQ4N0M0LjA0MDA0IDkuMDUzNDYgNC4yNjUxOCA5LjEzMzEgNC4zMTM3OSA5LjQyNDQzQzQuMDg4NjUgOS43NDY3OSA0LjA3MTA3IDEwLjIzMDkgMy45NDIxMiAxMC42MzQ2QzMuMzYxNTMgMTIuNDU4MSAzLjU4NzAxIDE0LjcxNzIgNC40MTAzMyAxNi4wNTYzQzQuNjY3ODcgMTYuNDU5NiA1LjI4MTkxIDE3LjM0NzQgNi4xMDQ4OCAxNy4wMDc3QzYuODMwOTcgMTYuNzE3OCA2LjY2OTYyIDE1Ljc5OCA2Ljg3OTI0IDE0Ljk5MTZDNi45Mjc1MSAxNC43OTY2IDYuODk1MSAxNC42Njg3IDYuOTkxNjQgMTQuNTM5OFYxNC41NzI0QzcuMjE3NDcgMTUuMDIzNiA3LjQ0Mzk4IDE1LjQ1ODIgNy42NTM2IDE1LjkxMTVDOC4xNTQ1NiAxNi43MDE0IDkuMDI1MTEgMTcuNTI0NSA5Ljc1MTg5IDE4LjA3MjZDMTAuMTM4IDE4LjM2NDIgMTAuNDQ0OSAxOC44NjM2IDEwLjkyODkgMTkuMDQxN1YxOC45OTI5SDEwLjg5NzJDMTAuOCAxOC44NDgxIDEwLjY1NTIgMTguNzgzMSAxMC41MjU5IDE4LjY3MDZDMTAuMjM1NiAxOC4zOCA5LjkxMzU4IDE4LjAyNDggOS42ODY3MiAxNy43MDIzQzkuMDA5MjUgMTYuNzk5IDguNDExNDEgMTUuNzk4IDcuODgwMTIgMTQuNzY1NEM3LjYyMTE5IDE0LjI2NCA3LjM5NTcxIDEzLjcxNTkgNy4xODU3NSAxMy4yMTU5QzcuMDg5MjEgMTMuMDIzMiA3LjA4OTIxIDEyLjczMTkgNi45Mjc1MSAxMi42MzUzQzYuNjg0NzkgMTIuOTg5OSA2LjMzMDcxIDEzLjI5NyA2LjE1MzUgMTMuNzMxM0M1Ljg0NjY1IDE0LjQyNiA1LjgxNDU4IDE1LjI4MSA1LjcwMDgxIDE2LjE2OUM1LjYzNjY4IDE2LjE4NTggNS42NjkwOSAxNi4xNjkgNS42MzY2OCAxNi4yMDFDNS4xMjA5IDE2LjA3MiA0Ljk0MzM1IDE1LjUzOTYgNC43NDkyNCAxNS4wODkzQzQuMjY1MTggMTMuOTQyMSA0LjE4MzgxIDEyLjEwMjYgNC42MDQwOSAxMC43Nzk0QzQuNzE2NDkgMTAuNDQxMiA1LjIwMTkyIDkuMzc2MTYgNS4wMDc0NyA5LjA1MzQ2QzQuOTA5OSA4Ljc0NTU3IDQuNTg3NTQgOC41Njk3NCA0LjQxMDMzIDguMzI2NjhDNC4yMDEwNSA4LjAyMDE3IDMuOTczODQgNy42MzM2OCAzLjgzMDA3IDcuMjk0MDhDMy40NDI1NSA2LjM5MDc4IDMuMjQ3NzUgNS4zODk5IDIuODI5NTQgNC40ODY2QzIuNjM1NzggNC4wNjYzMiAyLjI5NjE4IDMuNjMwNTMgMi4wMjI3OCAzLjI0NDA0QzEuNzE1NTkgMi44MDgyNSAxLjM3NzAyIDIuNTAxNzQgMS4xMzQ2NCAxLjk4NTk2QzEuMDU0NjYgMS44MDgwNiAwLjk0MTU3MSAxLjUxNzQyIDEuMDcwMTcgMS4zMjQzNUMxLjEwMTg5IDEuMTk1MDYgMS4xNjc0IDEuMTQ2NDQgMS4yOTY2OSAxLjExNDAzQzEuNTA1MjcgMC45MzY0NzYgMi4xMDMxMSAxLjE2MTk2IDIuMzEyMzggMS4yNTg4NEMyLjkwOTg3IDEuNTAwMTggMy40MTAxNCAxLjcyNzM5IDMuOTA5NzIgMi4wNjU2MUM0LjEzNTg5IDIuMjI3MzEgNC4zNzc5MiAyLjUzMzgxIDQuNjY3ODcgMi42MTUxN0g1LjAwNzQ3QzUuNTIzNiAyLjcyNzIyIDYuMTA0ODggMi42NDY1NSA2LjU4OTI5IDIuNzkyMzlDNy40NDM5OCAzLjA2NjQ4IDguMjE4MzQgMy40Njk4NyA4LjkxMjcxIDMuOTA1NjZDMTEuMDI1OCA1LjI0NTEgMTIuNzY4NiA3LjE0OTYyIDEzLjk0NiA5LjQyNDQzQzE0LjE0MDIgOS43OTUwNiAxNC4yMjE1IDEwLjEzNDMgMTQuMzk4NyAxMC41MjA4QzE0LjczNzYgMTEuMzEzMSAxNS4xNTc2IDEyLjExOTkgMTUuNDk1OCAxMi44OTM2QzE1LjgzNDQgMTMuNjUyMSAxNi4xNTc4IDE0LjQyNiAxNi42NDI1IDE1LjA1NjNDMTYuODgzOSAxNS4zOTQ2IDE3Ljg1MjMgMTUuNTcyMSAxOC4yODgxIDE1Ljc0OTdDMTguNjEwMSAxNS44OTQ1IDE5LjExMTEgMTYuMDIzOCAxOS40MDE3IDE2LjIwMUMxOS45NTAzIDE2LjUzOTMgMjAuNDk3OCAxNi45MjcyIDIxLjAxNDkgMTcuMjk4OUMyMS4yNzI1IDE3LjQ5MjYgMjIuMDc5NiAxNy44OTU1IDIyLjEyODIgMTguMjE4OFoiCiAgICBmaWxsPSIjMkM3NDkzIiAvPgo8L3N2Zz4K"},416:function(e,t,n){var a=n(417),i=n(418),r=i;r.v1=a,r.v4=i,e.exports=r},417:function(e,t,n){var a,i,r=n(233),s=n(234),o=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],d=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==p){var g=r();null==d&&(d=a=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==p&&(p=i=16383&(g[6]<<8|g[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:c+1,m=h-o+(f-c)/1e4;if(m<0&&void 0===e.clockseq&&(p=p+1&16383),(m<0||h>o)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=h,c=f,i=p;var j=(1e4*(268435455&(h+=122192928e5))+f)%4294967296;u[l++]=j>>>24&255,u[l++]=j>>>16&255,u[l++]=j>>>8&255,u[l++]=255&j;var x=h/4294967296*1e4&268435455;u[l++]=x>>>8&255,u[l++]=255&x,u[l++]=x>>>24&15|16,u[l++]=x>>>16&255,u[l++]=p>>>8|128,u[l++]=255&p;for(var b=0;b<6;++b)u[l+b]=d[b];return t||s(u)}},418:function(e,t,n){var a=n(233),i=n(234);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;++o)t[r+o]=s[o];return t||i(s)}},434:function(e,t,n){var a=n(30),i=n(435);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},435:function(e,t,n){(t=n(31)(!1)).push([e.i,".resultField:nth-child(odd){background-color:#25262e}.resultField{padding:4px 8px}.resultField>.euiTableRowCell{border-bottom:none;border-top:none}.resultField>.euiTableRowCell>.euiTableCellContent{padding:4px}.resultExpandColumn{align-items:flex-start;border-left:1px solid #343741;height:100%;justify-content:center;padding:0 0 0 8px}.resultHeader{padding:0 8px 4px 0}.euiToken.resultField__token{align-items:center;display:flex;justify-content:flex-start}",""]),e.exports=t},436:function(e,t,n){var a=n(30),i=n(437);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},437:function(e,t,n){(t=n(31)(!1)).push([e.i,".resultField:nth-child(odd){background-color:#f5f7fa}.resultField{padding:4px 8px}.resultField>.euiTableRowCell{border-bottom:none;border-top:none}.resultField>.euiTableRowCell>.euiTableCellContent{padding:4px}.resultExpandColumn{align-items:flex-start;border-left:1px solid #d3dae6;height:100%;justify-content:center;padding:0 0 0 8px}.resultHeader{padding:0 8px 4px 0}.euiToken.resultField__token{align-items:center;display:flex;justify-content:flex-start}",""]),e.exports=t},438:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(439);case"v8light":return n(441)}},439:function(e,t,n){var a=n(30),i=n(440);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},440:function(e,t,n){(t=n(31)(!1)).push([e.i,".enterpriseSearchDocumentsHeader{padding-right:80px}@media only screen and (max-width:574px){.enterpriseSearchDocumentsHeader{padding-right:24px}}@media only screen and (min-width:575px) and (max-width:767px){.enterpriseSearchDocumentsHeader{padding-right:24px}}@media only screen and (min-width:768px) and (max-width:991px){.enterpriseSearchDocumentsHeader{padding-right:24px}}",""]),e.exports=t},441:function(e,t,n){var a=n(30),i=n(442);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},442:function(e,t,n){(t=n(31)(!1)).push([e.i,".enterpriseSearchDocumentsHeader{padding-right:80px}@media only screen and (max-width:574px){.enterpriseSearchDocumentsHeader{padding-right:24px}}@media only screen and (min-width:575px) and (max-width:767px){.enterpriseSearchDocumentsHeader{padding-right:24px}}@media only screen and (min-width:768px) and (max-width:991px){.enterpriseSearchDocumentsHeader{padding-right:24px}}",""]),e.exports=t},45:function(e,t,n){"use strict";n.d(t,"g",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return j}));var a=n(18),i=n.n(a),r=n(2),s=n(1),o=n(63),c=n(97);function l(e){const t=e;return!(null==t||!t.connector)&&t.connector.service_type!==s.i}function u(e){return!(null==e||!e.crawler)}function d(e){return!!e&&!l(e)&&!u(e)}function p(e){const t=e;return!(null==t||!t.connector)&&t.connector.service_type!==s.i}function g(e){return e?l(e)?c.a.CONNECTOR:u(e)?c.a.CRAWLER:c.a.API:c.a.API}function h(e){if(!e||d(e))return c.b.CONNECTED;if(l(e)||u(e)){if(e.connector.last_seen&&i()(e.connector.last_seen).isBefore(i()().subtract(30,"minutes")))return c.b.ERROR;if(e.connector.last_sync_status===o.f.ERROR)return c.b.SYNC_ERROR;if(e.connector.status===o.a.CONNECTED)return c.b.CONNECTED;if(e.connector.status===o.a.ERROR)return c.b.ERROR;if(e.connector.status===o.a.CONFIGURED)return c.b.CONFIGURED}return c.b.INCOMPLETE}function f(e){var t;return l(e)?null!==(t=e.connector.last_synced)&&void 0!==t?t:"never":null}function m(e){const t={ingestionMethod:g(e),ingestionStatus:h(e),lastUpdated:f(e)};return l(e)||u(e),{...e,...t}}function j(e){return e===c.a.CONNECTOR?r.i18n.translate("xpack.enterpriseSearch.content.searchIndices.ingestionMethod.connector",{defaultMessage:"Connector"}):e===c.a.CRAWLER?r.i18n.translate("xpack.enterpriseSearch.content.searchIndices.ingestionMethod.crawler",{defaultMessage:"Crawler"}):r.i18n.translate("xpack.enterpriseSearch.content.searchIndices.ingestionMethod.api",{defaultMessage:"API"})}},453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var a=n(22).__importDefault(n(454));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=a.default},454:function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var a,i,r;if(Array.isArray(t)){if((a=t.length)!=n.length)return!1;for(i=a;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((a=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=a;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,r[i]))return!1;for(i=a;0!=i--;){var s=r[i];if(!("_owner"===s&&t.$$typeof||e(t[s],n[s])))return!1}return!0}return t!=t&&n!=n}},455:function(e,t,n){e.exports=n.p+"2552073728fa99f122f43b2ec93fb5e3.svg"},456:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yLjA5MTc3IDEwLjI4MDVDMi4wNDYyIDEwLjI4MDUgMi4wMzQ5NSAxMC4yNTc2IDIuMDU3NjQgMTAuMjIzN0wyLjI5NjMzIDkuOTE2NzJDMi4zMTg4MyA5Ljg4MjYgMi4zNzU4MyA5Ljg1OTkxIDIuNDIxMiA5Ljg1OTkxSDYuNDc4MTRDNi41MjM3IDkuODU5OTEgNi41MzQ5NSA5Ljg5NDA0IDYuNTEyMjcgOS45MjgxNkw2LjMxOTE0IDEwLjIyMzdDNi4yOTY0NSAxMC4yNTc2IDYuMjM5NjQgMTAuMjkxNyA2LjIwNTUyIDEwLjI5MTdMMi4wOTE3NyAxMC4yODA1Wk0wLjM3NTc2NyAxMS4zMjU4QzAuMzMwMzkyIDExLjMyNTggMC4zMTg5NTQgMTEuMzAzMyAwLjM0MTY0MiAxMS4yNjlMMC41ODAzMjkgMTAuOTYyMkMwLjYwMzAxNyAxMC45MjgxIDAuNjU5ODI5IDEwLjkwNTQgMC43MDUzOTIgMTAuOTA1NEg1Ljg4NzE0QzUuOTMyNTIgMTAuOTA1NCA1Ljk1NTM5IDEwLjkzOTUgNS45NDM5NSAxMC45NzM3TDUuODUzMDIgMTEuMjQ2M0M1Ljg0MTc3IDExLjI5MTggNS43OTYyIDExLjMxNDUgNS43NTA4MyAxMS4zMTQ1TDAuMzc1NzY3IDExLjMyNThaTTMuMTI1NjQgMTIuMzcxM0MzLjA4MDI3IDEyLjM3MTMgMy4wNjkwMiAxMi4zMzcyIDMuMDkxNyAxMi4zMDNMMy4yNTA3IDEyLjAxOUMzLjI3MzU4IDExLjk4NDggMy4zMTg5NSAxMS45NTA5IDMuMzY0NTIgMTEuOTUwOUg1LjYzNzAyQzUuNjgyNTggMTEuOTUwOSA1LjcwNTI3IDExLjk4NDggNS43MDUyNyAxMi4wMzA0TDUuNjgyNzcgMTIuMzAzQzUuNjgyNzcgMTIuMzQ4NiA1LjYzNzIgMTIuMzgyNyA1LjYwMzA4IDEyLjM4MjdMMy4xMjU2NCAxMi4zNzEzWk0xNC45MjEzIDEwLjA3NTlDMTQuMjA1MiAxMC4yNTc4IDEzLjcxNjYgMTAuMzk0MSAxMy4wMTIxIDEwLjU3NThDMTIuODQxNSAxMC42MjEzIDEyLjgzMDMgMTAuNjMyNiAxMi42ODI1IDEwLjQ2MjJDMTIuNTEyMSAxMC4yNjkgMTIuMzg3IDEwLjE0NCAxMi4xNDg1IDEwLjAzMDNDMTEuNDMyNSA5LjY3ODIyIDEwLjczOTMgOS43ODA0MSAxMC4wOTE2IDEwLjIwMUM5LjMxODk1IDEwLjcwMDggOC45MjEyNyAxMS40Mzk0IDguOTMyNTIgMTIuMzU5OEM4Ljk0Mzc3IDEzLjI2OSA5LjU2ODg5IDE0LjAxOSAxMC40NjY2IDE0LjE0NDFDMTEuMjM5MyAxNC4yNDYzIDExLjg4NzEgMTMuOTczNSAxMi4zOTg1IDEzLjM5NDFDMTIuNTAwNiAxMy4yNjkgMTIuNTkxNiAxMy4xMzI3IDEyLjcwNTIgMTIuOTczNUgxMC41MTJDMTAuMjczNSAxMi45NzM1IDEwLjIxNjcgMTIuODI1OCAxMC4yOTYyIDEyLjYzMjdDMTAuNDQ0IDEyLjI4MDMgMTAuNzE2NiAxMS42ODk1IDEwLjg3NTYgMTEuMzk0QzEwLjkwOTkgMTEuMzI1OCAxMC45ODk0IDExLjIxMjIgMTEuMTU5OCAxMS4yMTIySDE1LjI5NjFDMTUuMjczNiAxMS41MTkxIDE1LjI3MzYgMTEuODI1OCAxNS4yMjggMTIuMTMyOEMxNS4xMDMgMTIuOTUwOCAxNC43OTYyIDEzLjcwMDggMTQuMjk2MSAxNC4zNTk5QzEzLjQ3NzkgMTUuNDM5NSAxMi40MDk5IDE2LjEwOTggMTEuMDU3NSAxNi4yOTE3QzkuOTQzODkgMTYuNDM5NSA4LjkwOTgzIDE2LjIyMzUgOC4wMDA4MyAxNS41NDE3QzcuMTU5ODkgMTQuOTA1MyA2LjY4MjcgMTQuMDY0NCA2LjU1NzY0IDEzLjAxOTFDNi40MDk4OSAxMS43ODA1IDYuNzczNDUgMTAuNjY2NyA3LjUyMzQ1IDkuNjg5NDdDOC4zMzAyNyA4LjYzMjcyIDkuMzk4NDUgNy45NjIyMiAxMC43MDUzIDcuNzIzNTRDMTEuNzczNSA3LjUzMDQxIDEyLjc5NjEgNy42NTU0NyAxMy43MTY2IDguMjgwNDFDMTQuMzE4OCA4LjY3ODEgMTQuNzUwNiA5LjIyMzU0IDE1LjAzNDcgOS44ODI2QzE1LjEwMyA5Ljk4NDk3IDE1LjA1NzYgMTAuMDQxOCAxNC45MjExIDEwLjA3NTdMMTQuOTIxMyAxMC4wNzU5WiIgZmlsbD0iIzAwQUNENyIvPgo8cGF0aCBkPSJNMTguNjgyNiAxNi4zNjAyQzE3LjY0ODUgMTYuMzM3MyAxNi43MDUyIDE2LjA0MiAxNS45MDk4IDE1LjM2QzE1LjIzOTMgMTQuNzgwNyAxNC44MTg5IDE0LjA0MTkgMTQuNjgyNiAxMy4xNjY5QzE0LjQ3ODEgMTEuODgyOSAxNC44MzAyIDEwLjc0NjQgMTUuNjAzMSA5LjczNTIzQzE2LjQzMjYgOC42NDQxNyAxNy40MzI1IDguMDc2MDUgMTguNzg0OSA3LjgzNzM2QzE5Ljk0MzkgNy42MzI5OCAyMS4wMzQ5IDcuNzQ2NjEgMjIuMDIzNCA4LjQxNjkyQzIyLjkyMTIgOS4wMzA2MSAyMy40Nzc5IDkuODYwMTEgMjMuNjI1NiAxMC45NTFDMjMuODE4NyAxMi40ODUxIDIzLjM3NTcgMTMuNzM1MiAyMi4zMTg3IDE0LjgwMzRDMjEuNTY4NyAxNS41NjQ2IDIwLjY0ODMgMTYuMDQyIDE5LjU5MTYgMTYuMjU3OEMxOS4yODQ4IDE2LjMxNDYgMTguOTc3OSAxNi4zMjYgMTguNjgyNiAxNi4zNjAyWk0yMS4zODcxIDExLjc2OTJDMjEuMzc1OCAxMS42MjE1IDIxLjM3NTggMTEuNTA3OSAyMS4zNTI5IDExLjM5NDJDMjEuMTQ4NiAxMC4yNjkyIDIwLjExNDMgOS42MzI4NiAxOS4wMzQ5IDkuODgyOThDMTcuOTc3OSAxMC4xMjE1IDE3LjI5NjIgMTAuNzkyIDE3LjA0NjIgMTEuODYwMkMxNi44NDE3IDEyLjc0NjUgMTcuMjczNSAxMy42NDQyIDE4LjA5MTYgMTQuMDA3OEMxOC43MTY3IDE0LjI4MDYgMTkuMzQxNiAxNC4yNDY1IDE5Ljk0MzkgMTMuOTM5N0MyMC44NDE2IDEzLjQ3MzggMjEuMzMwMiAxMi43NDY1IDIxLjM4NzEgMTEuNzY5MloiIGZpbGw9IiMwMEFDRDciLz4KPC9zdmc+Cg=="},457:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTguOTI4MTYgMTguMzk3M0M1LjMyOTY2IDE5LjQwMjcgMTEuMTE3NiAyMS40Nzk2IDE1LjY5OTcgMTkuNTE2NUMxNC45NDkyIDE5LjIyNDcgMTQuNDEwOSAxOC44ODgyIDE0LjQxMDkgMTguODg4MkMxMi4zNjc3IDE5LjI3NDQgMTEuNDE5OSAxOS4zMDQ4IDkuNTY1MSAxOS4wOTI5QzguMDM0MzUgMTguOTE3NiA4LjkyODE2IDE4LjM5NzMgOC45MjgxNiAxOC4zOTczWk0xNS4xNTExIDE2LjQzNjFDMTIuNDQyOSAxNi45NTcxIDEwLjg3ODUgMTYuOTQwNCA4Ljg5NzIyIDE2LjczNjFDNy4zNjUxNiAxNi41Nzc2IDguMzY4MSAxNS44MzUxIDguMzY4MSAxNS44MzUxQzQuNDA0OTEgMTcuMTUwNiAxMC41NzQ0IDE4LjY0MzMgMTYuMTEzNSAxNy4wMjMxQzE1LjUyNDggMTYuODE1NyAxNS4xNTExIDE2LjQzNjEgMTUuMTUxMSAxNi40MzYxWk0xNy4yNzM0IDUuMDc4MjRDMTcuMjczNiA1LjA3ODI0IDkuMjYxMzUgNy4wNzg2OCAxMy4wODc5IDExLjQ4ODNDMTQuMjE3NCAxMi43ODg2IDEyLjc5MTYgMTMuOTU3NyAxMi43OTE2IDEzLjk1NzdDMTIuNzkxNiAxMy45NTc3IDE1LjY1ODMgMTIuNDc4MSAxNC4zNDIgMTAuNjI0NUMxMy4xMTIyIDguODk2NjggMTIuMTY5NSA4LjAzODMgMTcuMjczNCA1LjA3ODI0Wk0xOS4xNDggMjAuMjkyN0MxOS4xNDggMjAuMjkyNyAxOS44MDk3IDIwLjgzODQgMTguNDE5IDIxLjI2MDFDMTUuNzc0OSAyMi4wNjExIDcuNDExNjYgMjIuMzAyNiA1LjA4ODcyIDIxLjI5MjFDNC4yNTQzNSAyMC45Mjg3IDUuODE5NzkgMjAuNDI0OSA2LjMxMjM1IDIwLjMxODZDNi44MjU5MSAyMC4yMDc0IDcuMTE5MTYgMjAuMjI3NyA3LjExOTE2IDIwLjIyNzdDNi4xOTA2NiAxOS41NzM5IDEuMTE2NzIgMjEuNTEyMSA0LjU0MjU0IDIyLjA2OEMxMy44ODQgMjMuNTgyMiAyMS41NzA3IDIxLjM4NjEgMTkuMTQ4IDIwLjI5MjdaTTE1LjkzNzUgMTQuNjA1M0MxNi4zODY1IDE0LjI5ODkgMTcuMDA2OCAxNC4wMzI5IDE3LjAwNjggMTQuMDMyOUMxNy4wMDY4IDE0LjAzMjkgMTUuMjM5OCAxNC4zNDg4IDEzLjQ3OTQgMTQuNDk2N0MxMS4zMjQyIDE0LjY3NzUgOS4wMTI1NCAxNC43MTMxIDcuODUyMSAxNC41NTc5QzUuMTA0ODUgMTQuMTkwNiA5LjM1ODI5IDEzLjE4MDEgOS4zNTgyOSAxMy4xODAxQzkuMzU4MjkgMTMuMTgwMSA3LjcwNjA0IDEzLjA2ODQgNS42NzUwNCAxNC4wNTA5QzMuMjcyNzkgMTUuMjEyNCAxMS42MTcxIDE1Ljc0MTkgMTUuOTM3NSAxNC42MDUzWk0xNi45ODkyIDE3LjQ0NUMxNi45Njg5IDE3LjQ5OTQgMTYuOTAxNCAxNy41NjA1IDE2LjkwMTQgMTcuNTYwNUMyMi43NjUxIDE2LjAxOTEgMjAuNjA5MiAxMi4xMjY5IDE3LjgwNTUgMTMuMTEyMUMxNy41NTk1IDEzLjE5OTEgMTcuNDMwNSAxMy40MDE0IDE3LjQzMDUgMTMuNDAxNEMxNy40MzA1IDEzLjQwMTQgMTcuNTg2IDEzLjMzODcgMTcuOTMyNyAxMy4yNjY0QzE5LjM1IDEyLjk3MTEgMjEuMzgwNiAxNS4xNjM3IDE2Ljk4OTIgMTcuNDQ1Wk0xMi4wMzM5IDEzLjEzNzdDMTEuMTY4OCAxMS4xODIzIDguMjM1MTYgOS40NzE1NSAxMi4wMzUyIDYuNDcwNDNDMTYuNzczNSAyLjczMDM2IDE0LjM0MjIgMC4yOTczNjMgMTQuMzQyMiAwLjI5NzM2M0MxNS4zMjI4IDQuMTYxMzYgMTAuODgyNyA1LjMyODU1IDkuMjc5OTEgNy43MzQ5M0M4LjE4ODQ4IDkuMzc0NjEgOS44MTU2IDExLjEzNjYgMTIuMDMzOSAxMy4xMzc3Wk0xNy4xNDc4IDIyLjg0MDVDMTMuNTUwMiAyMy41MTc3IDkuMTEyNjYgMjMuNDM4OCA2LjQ4MTQ4IDIzLjAwNDRDNi40ODE0OCAyMy4wMDQ0IDcuMDIwMzUgMjMuNDUwNiA5Ljc5MDEgMjMuNjI4OUMxNC4wMDQzIDIzLjg5ODQgMjAuNDc3NiAyMy40Nzg5IDIwLjYzMDYgMjEuNDg0N0MyMC42MzA4IDIxLjQ4NDcgMjAuMzM2MiAyMi4yNDA3IDE3LjE0NzggMjIuODQwNVoiIGZpbGw9IiNFQTJEMkUiLz4KPC9zdmc+Cg=="},458:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEuODc1IDEuODc1SDIyLjEyNVYyMi4xMjUySDEuODc1VjEuODc1WiIgZmlsbD0iI0YwREI0RiIvPgo8cGF0aCBkPSJNMjAuNDY3NyAxNy4yOTU0QzIwLjMxOTQgMTYuMzcxNiAxOS43MTcgMTUuNTk1NiAxNy45MzI2IDE0Ljg3MjFDMTcuMzEyNyAxNC41ODcyIDE2LjYyMTcgMTQuMzgzMiAxNi40MTU4IDEzLjkxMzVDMTYuMzQyNiAxMy42NDAxIDE2LjMzMjkgMTMuNDg2MSAxNi4zNzkyIDEzLjMyMDZDMTYuNTEyIDEyLjc4MzYgMTcuMTUzMSAxMi42MTYyIDE3LjY2MTIgMTIuNzcwMkMxNy45ODg0IDEyLjg3OTggMTguMjk4MiAxMy4xMzIgMTguNDg1IDEzLjUzNDNDMTkuMzU4OCAxMi45Njg1IDE5LjM1NzEgMTIuOTcyMiAxOS45NjcyIDEyLjU4MzNDMTkuNzQzOCAxMi4yMzcgMTkuNjI0NiAxMi4wNzcyIDE5LjQ3ODQgMTEuOTI5QzE4Ljk1MjggMTEuMzQyIDE4LjIzNjcgMTEuMDM5NiAxNy4wOTE0IDExLjA2MjhMMTYuNDk0OSAxMS4xMzk5QzE1LjkyMzIgMTEuMjg0NCAxNS4zNzg0IDExLjU4NDQgMTUuMDU4OSAxMS45ODY3QzE0LjEwMDMgMTMuMDc0NCAxNC4zNzM3IDE0Ljk3OCAxNS41NDAxIDE1Ljc2MTVDMTYuNjg5MyAxNi42MjQgMTguMzc3NCAxNi44MjAyIDE4LjU5MzEgMTcuNjI2N0MxOC44MDI5IDE4LjYxNDEgMTcuODY3NCAxOC45MzM4IDE2LjkzNzYgMTguODIwMkMxNi4yNTI0IDE4LjY3NzcgMTUuODcxMyAxOC4zMjk0IDE1LjQ1OTMgMTcuNjk2MUMxNC43MDA5IDE4LjEzNSAxNC43MDA5IDE4LjEzNSAxMy45MjEyIDE4LjU4MzRDMTQuMTA2MSAxOC45ODc2IDE0LjMwMDQgMTkuMTcwNiAxNC42MTAzIDE5LjUyMDhDMTYuMDc3MiAyMS4wMDg3IDE5Ljc0NzkgMjAuOTM1NiAyMC40MDYzIDE4LjY4MzVDMjAuNDMyOSAxOC42MDYyIDIwLjYxMDIgMTguMDkwNSAyMC40Njc3IDE3LjI5NTRWMTcuMjk1NFpNMTIuODgzNSAxMS4xODJIMTAuOTg5NEwxMC45ODE3IDE2LjA3ODhDMTAuOTgxNyAxNy4xMjAzIDExLjAzNTYgMTguMDc1IDEwLjg2NjIgMTguMzY3NkMxMC41ODkxIDE4Ljk0MzEgOS44NzEwMyAxOC44NzE4IDkuNTQzNzggMTguNzYwMkM5LjIxMDcyIDE4LjU5NjUgOS4wNDEzNSAxOC4zNjM3IDguODQ1MTMgMTguMDM0N0M4Ljc5MTI3IDE3Ljk0MDIgOC43NTA4MyAxNy44NjcxIDguNzM3MjQgMTcuODYxNEw3LjE5NzI3IDE4LjgwNDVDNy40NTMzMyAxOS4zMzAxIDcuODMwNTYgMTkuNzg2MyA4LjMxMzc1IDIwLjA4MjZDOS4wMzU1MyAyMC41MTU4IDEwLjAwNTYgMjAuNjQ4NiAxMS4wMjAyIDIwLjQxNTdDMTEuNjgwNSAyMC4yMjMzIDEyLjI1MDIgMTkuODI0OSAxMi41NDg1IDE5LjIxODVDMTIuOTc5OCAxOC40MjM0IDEyLjg4NzIgMTcuNDYxMSAxMi44ODM0IDE2LjM5NjdDMTIuODkzMSAxNC42NjAyIDEyLjg4MzUgMTIuOTI0IDEyLjg4MzUgMTEuMTgyVjExLjE4MloiIGZpbGw9IiMzMjMzMzAiLz4KPC9zdmc+Cg=="},459:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzI1ODRfMjIyNjc2KSI+CjxwYXRoIGQ9Ik0yMi43MTk3IDExLjc4OTVDMjIuNzE5NyA1LjQwNTQ3IDE3Ljc1NiAwLjIzMDQ2OSAxMS42MzE5IDAuMjMwNDY5QzUuNTA4NTEgMC4yMzA0NjkgMC41NDM3MDEgNS40MDU0NyAwLjU0MzcwMSAxMS43ODk1QzAuNTQzNzAxIDE4LjE3MzUgNS41MDgzMyAyMy4zNDkgMTEuNjMxNyAyMy4zNDlDMTcuNzU1OCAyMy4zNDkgMjIuNzE5NSAxOC4xNzM1IDIyLjcxOTUgMTEuNzg5NUgyMi43MTk3WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEwLjAwMTIgMjMuOTA5NEM3LjM5MzA4IDIzLjQ0OCA1LjE1NTgzIDIyLjI1NzEgMy4zMDY4OSAyMC4zNDU4QzEuNzM0MzMgMTguNzIwNSAwLjY1MTg5MSAxNi42NzQxIDAuMTU5ODkxIDE0LjM5MzJDLTAuMDUzMjk2OSAxMy40MDc3IC0wLjA1MzI5NjkgMTAuNTg5NCAwLjE1OTg5MSA5LjYwNDQ1QzAuNDkyODkxIDguMDYyNjQgMS4xMzkwMiA2LjUzMTcgMi4wMjA0NSA1LjE5NjUyQzIuNjA0MzMgNC4zMTI2NCA0LjMxMzIgMi42MDQxNCA1LjE5NjcgMi4wMjAwOEM2LjUzMjI3IDEuMTM4ODMgOC4wNjQxNCAwLjQ5MTk1MyA5LjYwNTU4IDAuMTU5ODkxQzEwLjU5MDUgLTAuMDUzMjk2OSAxMy40MDkyIC0wLjA1MzI5NjkgMTQuMzk0OSAwLjE1OTg5MUMxNi43OTYyIDAuNjc4MzI4IDE4Ljc5MjEgMS43NjI2NCAyMC41MTQzIDMuNDg0ODNDMjIuMjM2OSA1LjIwNzIgMjMuMzIxMiA3LjIwMjU4IDIzLjg0MDQgOS42MDQ2NEMyNC4wNTI4IDEwLjU4OTQgMjQuMDUyOCAxMy40MDc3IDIzLjg0MDQgMTQuMzkzNEMyMy4zMjEyIDE2Ljc5NDUgMjIuMjM2OSAxOC43ODk5IDIwLjUxNDMgMjAuNTEyM0MxOC44MTk3IDIyLjIwNzUgMTYuODQ4NyAyMy4yODk1IDE0LjQ4NjggMjMuODIxNkMxMy42NDkyIDI0LjAxMDggMTAuODc5NiAyNC4wNjQ4IDEwLjAwMTIgMjMuOTA5NFpNMTIuMTcgMjEuNTE0NkMxMi4xNyAyMC43MjgzIDEyLjE1ODQgMjAuNjcxNSAxMiAyMC42NzE1QzExLjg0MjggMjAuNjcxNSAxMS44MzA1IDIwLjcyNTUgMTEuODM3IDIxLjQwMjFDMTEuODQ1MSAyMi4yMDE2IDExLjkwMTMgMjIuNDQ2OSAxMi4wNjQxIDIyLjM5MjlDMTIuMTM5MyAyMi4zNjgxIDEyLjE3IDIyLjExMzMgMTIuMTcgMjEuNTE0NlpNMTAuOTAzMSAyMS43ODU2QzExLjEyNjYgMjEuNTYxMyAxMS4xOTIyIDIxLjQyNTYgMTEuMTkyMiAyMS4xODM5QzExLjE5MjIgMjAuOTM3MSAxMS4xNjIyIDIwLjg3NzMgMTEuMDQ5MSAyMC44OTkxQzEwLjk3MSAyMC45MTM3IDEwLjg3NjggMjEuMDQxNiAxMC44NDAzIDIxLjE4MTZDMTAuODAzOSAyMS4zMjE5IDEwLjY1MjggMjEuNTM4NiAxMC41MDYgMjEuNjYzNUMxMC4yNDAxIDIxLjg4NzggMTAuMjMgMjIuMDc0NSAxMC40ODI1IDIyLjA3NDVDMTAuNTU0OSAyMi4wNzQ1IDEwLjc0MzkgMjEuOTQzOCAxMC45MDMxIDIxLjc4NTZaTTEzLjcwNDkgMjEuOTgxOUMxMy43MzYyIDIxLjkzMTUgMTMuNjQxMyAyMS43ODc2IDEzLjQ5NDUgMjEuNjYzNUMxMy4zNDcxIDIxLjUzODYgMTMuMTk2NiAyMS4zMjE5IDEzLjE2MDIgMjEuMTgxNkMxMy4xMjI5IDIxLjA0MTYgMTMuMDI4OCAyMC45MTM3IDEyLjk1MDYgMjAuODk5MUMxMi44MzgxIDIwLjg3NzMgMTIuODA4MSAyMC45MzcxIDEyLjgwODEgMjEuMTgzOUMxMi44MDgxIDIxLjY3MzEgMTMuNTA5OSAyMi4yOTggMTMuNzA0OSAyMS45ODE5Wk05LjgzMTE0IDIwLjQ1NDVDOS44MzExNCAyMC40MDU2IDkuNzEyMjcgMjAuMzAwNCA5LjU2Njc2IDIwLjIyMDlDOC42MTkxNCAxOS43MDE3IDcuNTA3MDggMTguODc1NCA2Ljg4OTI3IDE4LjIzMTVDNS42ODMwOCAxNi45NzM0IDUuMTM5ODkgMTUuNzIxMyA1LjEyNjc3IDE0LjE2NjlDNS4xMTc3NyAxMy4xMjgxIDUuMjUxNDUgMTIuNTg2MyA1Ljc1NzUyIDExLjYxNkM2LjI0NjcgMTAuNjc3NyA2LjgxMzMzIDkuOTY5NyA4LjM3MzE0IDguMzQ5NTJDMTAuMTE0NSA2LjUzOTU4IDEwLjUxNTMgNi4wNjIwMiAxMC44MTc4IDUuNDM3MDhDMTEuMDMzIDQuOTkzMjcgMTEuMDYxNSA0LjgzMTI3IDExLjA5MTUgMy44OTMwMkMxMS4xMjg4IDIuNzI3NyAxMS4wNTc4IDEuOTIzMTQgMTAuOTE3NyAxLjkyMzE0QzEwLjg1NDEgMS45MjMxNCAxMC44NDI1IDIuMjI1MzkgMTAuODc4MyAyLjkwNDUyQzEwLjk5NTEgNS4wNzgwMiAxMC41OTE1IDUuNzUyNjQgOC4wODYwOCA3LjU2OTdDNi4zNjA3IDguODIxMDggNS41NjkwOCA5LjUwMDk1IDQuOTcxMTQgMTAuMjQ0MkM0LjEyNDAyIDExLjI5NjEgMy43NDg2NCAxMi4yMDY2IDMuNjU1MjcgMTMuNDQxMUMzLjQyODk1IDE2LjQxNjMgNS4zMTQyNyAxOC45OTY1IDguNjQwODkgMjAuMjYzM0M5LjM3NDc3IDIwLjU0MjEgOS44MzExNCAyMC42MTYgOS44MzExNCAyMC40NTQ1Wk0xNS41ODc0IDIwLjIxMzZDMTYuNzMwOCAxOS43MzY4IDE3LjYwMDQgMTkuMTYwOCAxOC40MjA1IDE4LjMzNzNDMTkuNjcwNiAxNy4wODA4IDIwLjE5MDMgMTUuOTA2IDIwLjI2ODUgMTQuMTY2OUMyMC4zMzY0IDEyLjY0MTggMjAuMDA1NiAxMS42MzI4IDE5LjA2MTYgMTAuNDlDMTguNDE0NyA5LjcwNzU4IDE3LjcxODcgOS4xNDc1MiAxNS44NDE1IDcuOTAwNjRDMTMuMzE1OCA2LjIyMTk1IDEyLjcyMjggNS41NTM4OSAxMi43MjI4IDQuMzg1NzdDMTIuNzIyOCA0LjA3NDg5IDEyLjc3OSAzLjYzNDY0IDEyLjg0NjkgMy40MDc1OEMxMi45NjM3IDMuMDE5ODMgMTIuOTYwOSAyLjc1MjY0IDEyLjg0MzEgMy4wNTg0NUMxMi43MzIzIDMuMzQ4MzMgMTIuNDc4MSAzLjIxNTM5IDEyLjM0MTYgMi43OTQwOEwxMi4yMTAzIDIuMzkwNThMMTIuMjU5OCAyLjc3MzA4QzEyLjQzNjUgNC4xMzA5NSAxMi40NTg2IDQuNjk5ODMgMTIuMzgwMiA1Ljg4ODM5QzEyLjI3NDUgNy40OTUyNyAxMi4wNzcyIDguNTkzNDUgMTEuNTM0NiAxMC41OTAxQzEwLjk5NjUgMTIuNTcyNCAxMC44OTk1IDEzLjI5MDkgMTAuOTY2NiAxNC44MDQ0QzExLjAyMjkgMTYuMDg0MSAxMS4yMDE4IDE3LjA0MTMgMTEuNjE4IDE4LjI5MDZDMTIuMDA0MyAxOS40NDk5IDEyLjA3NjUgMTkuNTM4MiAxMi43ODcxIDE5LjcyMDFDMTMuMTc3NiAxOS44MiAxMy41NDggMTkuOTg4OCAxMy44NDIxIDIwLjIwMTJDMTQuMTE4OSAyMC40MDEzIDE0LjM5NTYgMjAuNTMxMiAxNC41NTExIDIwLjUzNEMxNC42OTEzIDIwLjUzNjMgMTUuMTU4IDIwLjM5MjUgMTUuNTg3MiAyMC4yMTM2SDE1LjU4NzRaTTE1LjMzMDMgMTkuNjM2OEMxNS4yMjQ0IDE5LjUzMDkgMTUuMjc0MSAxOS40NDAzIDE1LjY4ODggMTguOTgxOUMxNi45OTU3IDE3LjUzOTMgMTcuNTgxNSAxNi4wNDkyIDE3LjU5ODEgMTQuMTI0NUMxNy42MSAxMi44MTMzIDE3LjMyMDEgMTEuOTQ0NSAxNi40MzU2IDEwLjYzODNDMTYuMDM2MyAxMC4wNDc3IDE0LjYyOTMgOC41NzQzMyAxMy45NDg4IDguMDMzMzlDMTMuNDUwMSA3LjYzNzAyIDEyLjkzNjcgNi45NjA4OSAxMi44NDU0IDYuNTc4MzlDMTIuNzUyOCA2LjE5MDY0IDEzLjAxMjYgNi4yOTI4MyAxMy4zMTM0IDYuNzYyMTRDMTMuNDYxIDYuOTkyMiAxMy43ODA4IDcuMzMwMjcgMTQuMDI0IDcuNTEyODlDMTQuMjY3IDcuNjk2MDggMTQuOTg2MyA4LjIzMTk1IDE1LjYyMjMgOC43MDQ0NUMxNy44MDkzIDEwLjMzMDMgMTguNzgzMyAxMS43MTY4IDE5LjAwMTYgMTMuNTE4QzE5LjEyODcgMTQuNTU5NyAxOC45MjcxIDE1LjYzNjcgMTguNDE5IDE2LjYzNjhDMTcuODkxOCAxNy42NzI4IDE2LjkzMDggMTguODAxNSAxNi4xMDc5IDE5LjM1MTNDMTUuNjAxMSAxOS42ODkzIDE1LjQ0MTEgMTkuNzQ3OCAxNS4zMzAzIDE5LjYzNjhaTTExLjA0ODQgMTkuNzQ2M0MxMS4wNzMzIDE5LjY4MiAxMC44NTQxIDE5LjI3MSAxMC41NjIyIDE4LjgzMjNDOS43ODgyIDE3LjY3MTUgOS40NTE0NSAxNy4wMzExIDkuMTM3NTggMTYuMTIyMUM4Ljg3MjQ1IDE1LjM1NjIgOC44NTc4MyAxNS4yNTIgOC44NTU1OCAxNC4wODE2QzguODUyNzcgMTIuMzEzMyA5LjA0NDAyIDExLjc1MjUgMTAuNDQ3NSA5LjQyMjJDMTEuNzcwNiA3LjIyNTA4IDExLjk1MDMgNi4zNzM4MyAxMS44MDEyIDIuOTkzNThDMTEuNzQ3MiAxLjc4MjMzIDExLjY4NjYgMC43NzM5NTMgMTEuNjY2MiAwLjc1Mjk1M0MxMS41MjY3IDAuNjEzNDUzIDExLjQ5NjcgMC45NzI3MDMgMTEuNTQ4NiAyLjE5MTA4QzExLjY1MDggNC42MTczMyAxMS40OTM5IDUuOTY4NjQgMTAuOTgyOCA3LjA3NzdDMTAuNjM0NCA3LjgzMjU4IDEwLjI0NDQgOC40MDQyNyA5LjE5NTg5IDkuNzAzMDhDNy43MzU2NCAxMS41MSA3LjMyMzcgMTIuNDY4NyA3LjMzMTAyIDE0LjAzOTJDNy4zMzY4MyAxNS4xMTYgNy40ODIxNCAxNS43NzgzIDcuOTE3MzMgMTYuNjk4OUM4LjM4ODMzIDE3LjY5NjQgOS4yNTUxNCAxOC43MDMxIDEwLjM0MTcgMTkuNTEzNUMxMC44NDE4IDE5Ljg4NzMgMTAuOTc3NSAxOS45MzE4IDExLjA0ODYgMTkuNzQ2M0gxMS4wNDg0WiIgZmlsbD0iIzIxMjE3OCIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzI1ODRfMjIyNjc2Ij4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},460:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDYuMTk0ODJDNS42NzM4IDYuMTk0ODIgMC41NDQ5MjIgOC43OTM5NSAwLjU0NDkyMiAxMkMwLjU0NDkyMiAxNS4yMDYxIDUuNjczOCAxNy44MDUyIDEyIDE3LjgwNTJDMTguMzI2MyAxNy44MDUyIDIzLjQ1NTIgMTUuMjA2MSAyMy40NTUyIDEyQzIzLjQ1NTIgOC43OTM5NSAxOC4zMjYzIDYuMTk0ODIgMTIgNi4xOTQ4MlpNOS4wMTkzNiAxMy4xMzFDOC43NDU5OSAxMy4zODY4IDguNDQyNDIgMTMuNDkyMyA4LjEwODExIDEzLjYwMTFDNy43NzM4IDEzLjcxIDcuMzQ4MzYgMTMuNjg3NSA2LjgzMTA1IDEzLjY4NzVINS42NTg2MUw1LjMzMzY3IDE1LjU2MjVIMy45NjQ3M0w1LjE4NjMgOS4xODc1MUg3LjgxODhDOC42MTA4IDkuMTg3NTEgOS4xODg0OSA5LjQxNTMyIDkuNTUxNjcgOS44MzEwMUM5LjkxNDg2IDEwLjI0NjcgMTAuMDI0IDEwLjgzNjggOS44NzkyNCAxMS41ODE3QzkuODE5NDIgMTEuODg4NiA5LjcxODc0IDEyLjE3NCA5LjU3NjYxIDEyLjQyODNDOS40MjkzMyAxMi42OTA2IDkuMjQxMjMgMTIuOTI3OCA5LjAxOTM2IDEzLjEzMVpNMTMuMDE1MiAxMy42ODc1TDEzLjU1NTQgMTAuOTgzOEMxMy42MTY5IDEwLjY2NzMgMTMuNTk0NCAxMC40MzIxIDEzLjQ4NzcgMTAuMzE3MkMxMy4zODA4IDEwLjIwMjEgMTMuMTUzNSAxMC4xMjUgMTIuODA2MSAxMC4xMjVIMTEuNzIwNUwxMS4wMjA5IDEzLjY4NzVIOS42NjI2N0wxMC44ODQyIDcuNTAwMDFIMTIuMjQyNUwxMS45MTc3IDkuMTg3NTFIMTMuMTI3N0MxMy44ODkxIDkuMTg3NTEgMTQuNDE0MSA5LjM0MDMyIDE0LjcwMyA5LjYwNTgyQzE0Ljk5MiA5Ljg3MTMyIDE1LjA3ODYgMTAuMjM1MSAxNC45NjMxIDEwLjgyOThMMTQuMzk0OCAxMy42ODc1SDEzLjAxNTJaTTIwLjU2MzcgMTEuNTkxNkMyMC41MDQxIDExLjg5ODYgMjAuNDAzMiAxMi4xNzkxIDIwLjI2MTMgMTIuNDMzMUMyMC4xMTkyIDEyLjY4NzYgMTkuOTMzNSAxMi45MjAzIDE5LjcwNDIgMTMuMTMxQzE5LjQzMDkgMTMuMzg2OCAxOS4xMjcxIDEzLjQ5MjMgMTguNzkzIDEzLjYwMTFDMTguNDU4OSAxMy43MSAxOC4wMzMgMTMuNjg3NSAxNy41MTU3IDEzLjY4NzVIMTYuMzQzM0wxNi4wMTg1IDE1LjU2MjVIMTQuNjQ5NkwxNS44NzEgOS4xODc1MUgxOC41MDM3QzE5LjI5NTcgOS4xODc1MSAxOS44NzM0IDkuNDE1MzIgMjAuMjM2NCA5LjgzMTAxQzIwLjU5OTIgMTAuMjQ2NyAyMC43MDg1IDEwLjg0NjkgMjAuNTYzNyAxMS41OTE2Wk0xNy45ODQ5IDEwLjEyNUgxNy4wNDcyTDE2LjUzNTkgMTIuNzVIMTcuMzY4N0MxNy45MjA0IDEyLjc1IDE4LjMzMTcgMTIuNjk1NiAxOC42MDE3IDEyLjQ4NzVDMTguODcyMSAxMi4yNzk4IDE5LjA1NDIgMTEuOTU3MyAxOS4xNDg5IDExLjQ3MTFDMTkuMjM5NiAxMS4wMDQgMTkuMTk4NCAxMC42Mzk3IDE5LjAyNTEgMTAuNDQ3N0MxOC44NTE3IDEwLjI1NTcgMTguNTA1IDEwLjEyNSAxNy45ODQ5IDEwLjEyNVpNNy4zMDAxNyAxMC4xMjVINi4zNjIzTDUuODUwOTggMTIuNzVINi42ODM2N0M3LjIzNTQ5IDEyLjc1IDcuNjQ2NjcgMTIuNjk1NiA3LjkxNjg2IDEyLjQ4NzVDOC4xODcwNSAxMi4yNzk4IDguMzY5MyAxMS45NTczIDguNDYzOCAxMS40NzExQzguNTU0NTUgMTEuMDA0IDguNTEzMyAxMC42Mzk3IDguMzQwMDUgMTAuNDQ3N0M4LjE2NjggMTAuMjU1NyA3LjgyMDMgMTAuMTI1IDcuMzAwMTcgMTAuMTI1WiIgZmlsbD0iIzYxODFCNiIvPgo8L3N2Zz4K"},461:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTExLjg4NTggMi4yOTY1NEMxMS4wOTQyIDIuMzAwMjkgMTAuMzM4NiAyLjM2NzYgOS42NzMzNSAyLjQ4NTM1QzcuNzEzOTggMi44MzE0NyA3LjM1ODQ4IDMuNTU1OTcgNy4zNTg0OCA0Ljg5MjI5VjYuNjU2ODVIMTEuOTg4NFY3LjI0NTA0SDUuNjIwNzNDNC4yNzUyMyA3LjI0NTA0IDMuMDk2OTggOC4wNTM3MiAyLjcyODM1IDkuNTkyNzJDMi4zMDMxIDExLjM1NjIgMi4yODQzNSAxMi40NTY4IDIuNzI4MzUgMTQuMjk4MkMzLjA1NzQxIDE1LjY2OSAzLjg0MzQxIDE2LjY0NTUgNS4xODkxIDE2LjY0NTVINi43ODExNlYxNC41MzAyQzYuNzgxMTYgMTMuMDAxOCA4LjEwMzIzIDExLjY1MzkgOS42NzM1NCAxMS42NTM5SDE0LjI5ODJDMTUuNTg1NiAxMS42NTM5IDE2LjYxMzEgMTAuNTkzOCAxNi42MTMxIDkuMzAxMTZWNC44OTI0N0MxNi42MTMxIDMuNjM3NTQgMTUuNTU0NSAyLjY5NDk3IDE0LjI5ODIgMi40ODU1NEMxMy41MDI1IDIuMzUzMTYgMTIuNjc3MyAyLjI5Mjk3IDExLjg4NTggMi4yOTY1NFpNOS4zODE5OCAzLjcxNTcyQzkuODYwMSAzLjcxNTcyIDEwLjI1MDkgNC4xMTI2NiAxMC4yNTA5IDQuNjAwOTFDMTAuMjUwOSA1LjA4NzEgOS44NjAyOSA1LjQ4MDI5IDkuMzgxOTggNS40ODAyOUM4LjkwMTk4IDUuNDgwMjkgOC41MTMyOSA1LjA4NzEgOC41MTMyOSA0LjYwMDkxQzguNTEzMSA0LjExMjY2IDguOTAxOTggMy43MTU3MiA5LjM4MTk4IDMuNzE1NzJaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMjU4NF8yMjI3NzApIi8+CjxwYXRoIGQ9Ik0xNy4xOTAzIDcuMjQ0ODJWOS4zMDA5NEMxNy4xOTAzIDEwLjg5NDcgMTUuODM4OCAxMi4yMzYzIDE0LjI5OCAxMi4yMzYzSDkuNjczMjdDOC40MDY1MiAxMi4yMzYzIDcuMzU4NCAxMy4zMjA2IDcuMzU4NCAxNC41ODkyVjE4Ljk5ODNDNy4zNTg0IDIwLjI1MjggOC40NDkyNyAyMC45OTEgOS42NzMyNyAyMS4zNTA4QzExLjEzODggMjEuNzgxNSAxMi41NDQzIDIxLjg1OTUgMTQuMjk4IDIxLjM1MDhDMTUuNDYzNSAyMS4wMTMxIDE2LjYxMjggMjAuMzM0IDE2LjYxMjggMTguOTk4M1YxNy4yMzM1SDExLjk4ODNWMTYuNjQ1MUgxOC45MjgxQzIwLjI3MzYgMTYuNjQ1MSAyMC43NzUzIDE1LjcwNjcgMjEuMjQzMyAxNC4yOTc4QzIxLjcyNjcgMTIuODQ3NSAyMS43MDU5IDExLjQ1MjcgMjEuMjQzMyA5LjU5MjMyQzIwLjkxMDcgOC4yNTI2MyAyMC4yNzU2IDcuMjQ0NjMgMTguOTI4MSA3LjI0NDYzSDE3LjE5MDNWNy4yNDQ4MlpNMTQuNTg5MSAxOC40MDk5QzE1LjA2OTMgMTguNDA5OSAxNS40NTggMTguODAzMSAxNS40NTggMTkuMjg5NkMxNS40NTggMTkuNzc3NSAxNS4wNjkxIDIwLjE3NDQgMTQuNTg5MSAyMC4xNzQ0QzE0LjExMSAyMC4xNzQ0IDEzLjcyMDUgMTkuNzc3NSAxMy43MjA1IDE5LjI4OTZDMTMuNzIwNSAxOC44MDMxIDE0LjExMSAxOC40MDk5IDE0LjU4OTEgMTguNDA5OVoiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcl8yNTg0XzIyMjc3MCkiLz4KPHBhdGggb3BhY2l0eT0iMC40NDQiIGQ9Ik0xOC4yNDU1IDIyLjQyNDRDMTguMjQ1NSAyMy4wODg3IDE1LjQ2NzUgMjMuNjI3NCAxMi4wNDA5IDIzLjYyNzRDOC42MTQxOCAyMy42Mjc0IDUuODM2MTggMjMuMDg4NyA1LjgzNjE4IDIyLjQyNDRDNS44MzYxOCAyMS43NTk5IDguNjEzOTkgMjEuMjIxMiAxMi4wNDA5IDIxLjIyMTJDMTUuNDY3NSAyMS4yMjEyIDE4LjI0NTUgMjEuNzU5NyAxOC4yNDU1IDIyLjQyNDRaIiBmaWxsPSJ1cmwoI3BhaW50Ml9yYWRpYWxfMjU4NF8yMjI3NzApIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjU4NF8yMjI3NzAiIHgxPSIxLjkzODIiIHkxPSIyLjg0ODI4IiB4Mj0iMTIuNjE3IiB5Mj0iMTEuOTU1MSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjNUE5RkQ0Ii8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzMwNjk5OCIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXJfMjU4NF8yMjI3NzAiIHgxPSIxNi42MzQ3IiB5MT0iMTcuNjE1OSIgeDI9IjEyLjgwNTEiIHkyPSIxMi4yNDU1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGRkQ0M0IiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkZFODczIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQyX3JhZGlhbF8yNTg0XzIyMjc3MCIgY3g9IjAiIGN5PSIwIiByPSIxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgZ3JhZGllbnRUcmFuc2Zvcm09InRyYW5zbGF0ZSgxMi4wMTU5IDIyLjM4OTkpIHJvdGF0ZSgtOTApIHNjYWxlKDEuMjAzNDMgNS4yOTAxKSI+CjxzdG9wIHN0b3AtY29sb3I9IiNCOEI4QjgiIHN0b3Atb3BhY2l0eT0iMC40OTgiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjN0Y3RjdGIiBzdG9wLW9wYWNpdHk9IjAiLz4KPC9yYWRpYWxHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K"},462:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjkzMzc0IDE4Ljg2OTRMMTkuODIzOSAyMC40OTI1QzE4LjQ2MzkgMTguMjI4NCAxNy4xMzkgMTYuMDIyMyAxNS44MDM0IDEzLjc5ODFMNy45MzM3NCAxOC44Njk0Wk0yMC45NDg1IDYuMzM3M0MyMC41OTczIDYuODY0OCAyMC4yNDUzIDcuMzkxODYgMTkuODk0NSA3LjkxOTY1QzE4LjY4OTYgOS43MzE5NyAxNy40ODU0IDExLjU0NDcgMTYuMjgxNyAxMy4zNTc4QzE2LjIxNDcgMTMuNDU4OCAxNi4xMjc4IDEzLjUzODkgMTYuMjIyMiAxMy42OTQ1QzE3LjM4NTEgMTUuNjE0OSAxOC41Mzg5IDE3LjU0MDkgMTkuNjk1NiAxOS40NjUyQzE5Ljg3ODEgMTkuNzY5MiAyMC4wNjI3IDIwLjA3MTkgMjAuMjk4NyAyMC4zNjM1TDIxIDYuMzUyMUwyMC45NDg1IDYuMzM3M1pNNS4wNzI5OSAxMi4zMjVDNS4xMjczOSAxMi4zNzY1IDUuMjYzMTggMTIuNDA2NiA1LjMyNjQ0IDEyLjM3NTRDNi40NDE5MyAxMS44MjcxIDcuNTY0NTIgMTEuMjkxMSA4LjY1NTY0IDEwLjY5NzdDOS4wMTE1MSAxMC41MDQzIDkuMjg1MTIgMTAuMTU3NiA5LjU5MTY3IDkuODc2NDNDMTAuNjA2OCA4Ljk0NTQ4IDExLjYyMDMgOC4wMTI2NCAxMi42MzMzIDcuMDc5NjZDMTIuNjk1MyA3LjAyMjM1IDEyLjc2ODcgNi45NjY5MyAxMi44MDU3IDYuODk0NjlDMTMuMTY5NSA2LjE4MzUyIDEzLjUyNzEgNS40Njg3MyAxMy44OTc0IDQuNzMzMzVDMTMuNDU1OSA0LjU2NzM4IDEzLjAzNzQgNC40MDUwNCAxMi42MTM2IDQuMjU3MzVDMTIuNTU2MSA0LjIzNzMzIDEyLjQ2NTYgNC4yNzcwOCAxMi40MDM0IDQuMzExNzVDMTEuNDIyNSA0Ljg1OTcxIDEwLjQyMzIgNS4zNzg1IDkuNDczNTggNS45NzYwN0M4Ljk5ODQ1IDYuMjc1MDcgOC42MTEzOSA2LjcxNTY2IDguMTkwNjcgNy4wOTkzOUM3LjUxMjU5IDcuNzE4MjggNi44MzUzNyA4LjMzODYzIDYuMTY3MTUgOC45NjgyNkM1Ljk4ODg4IDkuMTM3MjkgNS44Mjg5OCA5LjMyNDcgNS42OTAxNCA5LjUyNzM4QzUuMjMzMTUgMTAuMTkyOCA0Ljc4OTggMTAuODY3OSA0LjMyNjE0IDExLjU2MjFDNC41ODUyNCAxMS44MyA0LjgyMDg1IDEyLjA4NjIgNS4wNzI5OSAxMi4zMjVaTTkuMTQ5OTEgMTEuNDE1Mkw3LjQ3MzQxIDE4LjQ5ODNMMTUuMzUxIDEzLjQyMjVMOS4xNDk5MSAxMS40MTUyWk0yMC4yNjcyIDYuMzU5OTRMMTMuNTcyIDcuNDc4NDdMMTUuODQ0MSAxMy4wMDUzQzE3LjMyNyAxMC43NzcxIDE4Ljc4MDUgOC41OTM1MiAyMC4yNjcyIDYuMzU5OTRaTTkuMjQzMDUgMTAuOTM1OEwxNS4zMjA2IDEyLjkwODhDMTQuNTU4OSAxMS4wNTMzIDEzLjgyMzQgOS4yNjI2MSAxMy4wNzI2IDcuNDM0MDhMOS4yNDMwNSAxMC45MzU4Wk01LjE1Njk5IDEzLjY5MjFMMy4wMjk4OSAxOC43NzY3TDcuMDgxMTMgMTguNjU3TDUuMTU2OTkgMTMuNjkyMVpNNy4xMjkgMTcuNDc4TDcuMTc5MiAxNy40NjY5QzcuNjY1NjQgMTUuNDQ0NCA4LjE1OTA0IDEzLjQzNTkgOC42NTU2NCAxMS4zMzQzTDUuNDA1NSAxMy4wMjM2QzUuOTU5NTUgMTQuNDYzNiA2LjU1MDMgMTUuOTgyNyA3LjEyOSAxNy40NzhaTTE5LjQ0OTkgNi4wMzE5MkMxOC44MDMgNS44NjA1OCAxOC4xNTYxIDUuNjg4NjcgMTcuNTA4OSA1LjUxODVDMTYuNTc4NyA1LjI3MzkgMTUuNjQ3NyA1LjAzMjM1IDE0LjcxODEgNC43ODU1N0MxNC42MDE5IDQuNzU0NjcgMTQuNTE3OSA0LjczNDUxIDE0LjQ0OTUgNC44NzQ1QzE0LjEyMDkgNS41NDc2NiAxMy43ODIyIDYuMjE1NzMgMTMuNDQ4NCA2Ljg4NjQyQzEzLjQzODEgNi45MDcxNiAxMy40NDAyIDYuOTM0IDEzLjQzMjMgNi45ODYwOEwxOS40NDg2IDYuMDc0MjhMMTkuNDQ5OSA2LjAzMTkyWk0xNS42OTY5IDQuNTAwNzlMMjAuOTY5NCA1Ljk1OTM4TDIwLjA5ODIgMy40NzcxM0wxNS43MDQ2IDQuNDUxMzJMMTUuNjk2OSA0LjUwMDc5Wk03LjU3NTk4IDE5LjI1NzhDNi45MjMgMTkuMTgyNSA2LjI1MjYgMTkuMjUxNyA1LjU5MDMzIDE5LjI2MzFDNS4wNDYzIDE5LjI3MjMgNC41MDIyNiAxOS4yOTMgMy45NTgyMyAxOS4zMUMzLjkwMjIzIDE5LjMxMTcgMy44NDYzNyAxOS4zMjMgMy43OTA1MiAxOS4zODM0QzguMjg4MzEgMTkuNzk5MiAxMi43ODU5IDIwLjIxNSAxNy4yODM2IDIwLjYzMTFMMTcuMjkyNyAyMC41NzFMMTIuOTY3MyAxOS45ODA1QzExLjE3MDcgMTkuNzM1MiA5LjM3NzEgMTkuNDY1NCA3LjU3NTk4IDE5LjI1NzhaTTMuMTE4ODIgMTcuMjI0OEMzLjY5ODQgMTUuODggNC4yNzU1MSAxNC41MzQyIDQuODU3NDEgMTMuMTkwNEM0LjkxNTU4IDEzLjA1NTYgNC45MTEwOCAxMi45NjQxIDQuNzk3MiAxMi44NTU2QzQuNTUzNzYgMTIuNjIzOSA0LjMyNzU5IDEyLjM3NDIgNC4wNjE1MiAxMi4wOTc0QzMuNzAxODggMTMuODczMSAzLjM1MTA4IDE1LjYwNDkgMyAxNy4zMzY1TDMuMDM5MzIgMTcuMzU0OUMzLjA2NjE1IDE3LjMxMTkgMy4wOTg5NCAxNy4yNzExIDMuMTE4ODIgMTcuMjI0OFpNMTQuNTQyMSA0LjE0NTc5QzE1LjUxOTUgMy44OTM2NSAxNi41MTExIDMuNjk2NDkgMTcuNDk2OSAzLjQ3NjU1QzE3LjU2MDcgMy40NjIxOSAxNy42MjMxIDMuNDQxMTUgMTcuNjg1OSAzLjQyMzE3TDE3LjY3NjIgMy4zNzVMMTMuNDQwOCAzLjk0NDg2QzEzLjgzODUgNC4xMTg1MSAxNC4xNDQ5IDQuMjQ4MjEgMTQuNTQyMSA0LjE0NTc5WiIgZmlsbD0iI0Q5MTQwNCIvPgo8L3N2Zz4K"},463:function(e,t,n){e.exports=n.p+"24b6b946634ffc8f4c2471ffac6349d1.svg"},464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ByteSizeValue",{enumerable:!0,get:function(){return r.ByteSizeValue}}),Object.defineProperty(t,"ObjectType",{enumerable:!0,get:function(){return i.ObjectType}}),Object.defineProperty(t,"SchemaTypeError",{enumerable:!0,get:function(){return s.SchemaTypeError}}),Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return s.ValidationError}}),Object.defineProperty(t,"isConfigSchema",{enumerable:!0,get:function(){return o.isConfigSchema}}),t.schema=void 0;var a=n(172),i=n(481),r=n(178),s=n(67),o=n(505);const c={any:function(e){return new i.AnyType(e)},arrayOf:function(e,t){return new i.ArrayType(e,t)},boolean:function(e){return new i.BooleanType(e)},buffer:function(e){return new i.BufferType(e)},byteSize:function(e){return new i.ByteSizeType(e)},conditional:function(e,t,n,a,r){return new i.ConditionalType(e,t,n,a,r)},contextRef:function(e){return new a.ContextReference(e)},duration:function(e){return new i.DurationType(e)},ip:function(e){return new i.IpType(e)},literal:function(e){return new i.LiteralType(e)},mapOf:function(e,t,n){return new i.MapOfType(e,t,n)},maybe:function(e){return new i.MaybeType(e)},nullable:function(e){return c.oneOf([e,c.literal(null)],{defaultValue:null})},never:function(){return new i.NeverType},number:function(e){return new i.NumberType(e)},object:function(e,t){return new i.ObjectType(e,t)},oneOf:function(e,t){return new i.UnionType(e,t)},recordOf:function(e,t,n){return new i.RecordOfType(e,t,n)},stream:function(e){return new i.StreamType(e)},siblingRef:function(e){return new a.SiblingReference(e)},string:function(e){return new i.StringType(e)},uri:function(e){return new i.URIType(e)}};t.schema=c},465:function(e,t,n){window,e.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";const a=n(13);e.exports=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new a(t)}}},function(e,t,n){"use strict";const a=n(0),i=n(13),r=n(29);let s,o;const c={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};t.version=r.version,t.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},t.assertOptions=function(e,t,n="Options"){a(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const i=Object.keys(e).filter((e=>!t.includes(e)));a(0===i.length,"".concat(n," contain unknown keys: ").concat(i))},t.checkPreferences=function(e){o=o||n(17);const t=o.preferences.validate(e);if(t.error)throw new i([t.error.details[0].message])},t.compare=function(e,t,n){switch(n){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return c.isoDate.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e,n={}){const i=e&&e[t.symbols.any];return!!i&&(a(n.legacy||i.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,a){s=s||n(9),e=e||{},a=a||{};const i=Object.assign({},e,a);return a.errors&&e.errors&&(i.errors=Object.assign({},e.errors,a.errors),i.errors.wrap=Object.assign({},e.errors.wrap,a.errors.wrap)),a.messages&&(i.messages=s.compile(a.messages,e.messages)),delete i[t.symbols.prefs],i},t.tryWithPath=function(e,t,n={}){try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,n.append&&(e.message="".concat(e.message," (").concat(e.path,")")),e}},t.validateArg=function(e,n,{assert:a,message:i}){if(t.isSchema(a)){const t=a.validate(e);if(!t.error)return;return t.error.message}if(!a(e))return n?"".concat(n," ").concat(i):i},t.verifyFlat=function(e,t){for(const n of e)a(!Array.isArray(n),"Method no longer accepts array arguments:",t)}},function(e,t,n){"use strict";const a=n(6),i=n(14),r=n(15),s={needsProtoHack:new Set([i.set,i.map,i.weakSet,i.weakMap])};e.exports=s.clone=function(e,t={},n=null){if("object"!=typeof e||null===e)return e;let a=s.clone,o=n;if(t.shallow){if(!0!==t.shallow)return s.cloneWithShallow(e,t);a=e=>e}else if(o){const t=o.get(e);if(t)return t}else o=new Map;const c=i.getInternalProto(e);if(c===i.buffer)return!1;if(c===i.date)return new Date(e.getTime());if(c===i.regex)return new RegExp(e);const l=s.base(e,c,t);if(l===e)return e;if(o&&o.set(e,l),c===i.set)for(const n of e)l.add(a(n,t,o));else if(c===i.map)for(const[n,i]of e)l.set(n,a(i,t,o));const u=r.keys(e,t);for(const n of u){if("__proto__"===n)continue;if(c===i.array&&"length"===n){l.length=e.length;continue}const r=Object.getOwnPropertyDescriptor(e,n);r?r.get||r.set?Object.defineProperty(l,n,r):r.enumerable?l[n]=a(e[n],t,o):Object.defineProperty(l,n,{enumerable:!1,writable:!0,configurable:!0,value:a(e[n],t,o)}):Object.defineProperty(l,n,{enumerable:!0,writable:!0,configurable:!0,value:a(e[n],t,o)})}return l},s.cloneWithShallow=function(e,t){const n=t.shallow;(t=Object.assign({},t)).shallow=!1;const i=new Map;for(const t of n){const n=a(e,t);"object"!=typeof n&&"function"!=typeof n||i.set(n,n)}return s.clone(e,t,i)},s.base=function(e,t,n){if(!1===n.prototype)return s.needsProtoHack.has(t)?new t.constructor:t===i.array?[]:{};const a=Object.getPrototypeOf(e);if(a&&a.isImmutable)return e;if(t===i.array){const e=[];return a!==t&&Object.setPrototypeOf(e,a),e}if(s.needsProtoHack.has(t)){const e=new a.constructor;return a!==t&&Object.setPrototypeOf(e,a),e}return Object.create(a)}},function(e,t,n){"use strict";const a=n(0),i=n(34),r=n(1),s=n(9);e.exports=i.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return a("function"==typeof e,"Method must be a function"),a(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,{method:n}){try{return n(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){a(r.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method(e,t){return a(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate:(e,t,{code:n,local:a})=>t.error(n,a),args:["code","local"],multi:!0}},modifiers:{keep(e,t=!0){e.keep=t},message(e,t){e.message=s.compile(t)},warn(e,t=!0){e.warn=t}},manifest:{build(e,t){for(const n in t){const a=t[n];if(["examples","externals","metas","notes","tags"].includes(n))for(const t of a)e=e[n.slice(0,-1)](t);else if("alterations"!==n)if("whens"!==n){if("shared"===n)for(const t of a)e=e.shared(t)}else for(const t of a){const{ref:n,is:a,not:i,then:r,otherwise:s,concat:o}=t;e=o?e.concat(o):n?e.when(n,{is:a,not:i,then:r,otherwise:s,switch:t.switch,break:t.break}):e.when(a,{then:r,otherwise:s,break:t.break})}else{const t={};for(const{target:e,adjuster:n}of a)t[e]=n;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},function(e,t,n){"use strict";const a=n(32),i=n(1),r=n(7);t.Report=class{constructor(e,n,a,i,r,s,o){if(this.code=e,this.flags=i,this.messages=r,this.path=s.path,this.prefs=o,this.state=s,this.value=n,this.message=null,this.template=null,this.local=a||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?'Error code "'.concat(e,'" is not defined, your custom type is missing the correct messages definition'):(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e,n){return t.template(this.value,e,n||this.code,this.state,this.prefs)}},t.path=function(e){let t="";for(const n of e)"object"!=typeof n&&("string"==typeof n?(t&&(t+="."),t+=n):t+="[".concat(n,"]"));return t},t.template=function(e,t,n,a,s){if(!t)return;if(r.isTemplate(t))return"root"!==n?t:null;let o=s.errors.language;return i.isResolvable(o)&&(o=o.resolve(e,a,s)),o&&t[o]&&void 0!==t[o][n]?t[o][n]:t[n]},t.label=function(e,n,a,i){if(e.label)return e.label;if(!a.errors.label)return"";let r=n.path;return"key"===a.errors.label&&n.path.length>1&&(r=n.path.slice(-1)),t.path(r)||t.template(null,a.messages,"root",n,a)||i&&t.template(null,i,"root",n,a)||"value"},t.process=function(e,n,a){if(!e)return null;const{override:i,message:r,details:s}=t.details(e);if(i)return i;if(a.errors.stack)return new t.ValidationError(r,s,n);const o=Error.stackTraceLimit;Error.stackTraceLimit=0;const c=new t.ValidationError(r,s,n);return Error.stackTraceLimit=o,c},t.details=function(e,t={}){let n=[];const a=[];for(const i of e){if(i instanceof Error){if(!1!==t.override)return{override:i};const e=i.toString();n.push(e),a.push({message:e,type:"override",context:{error:i}});continue}const e=i.toString();n.push(e),a.push({message:e,path:i.path.filter((e=>"object"!=typeof e)),type:i.code,context:i.local})}return n.length>1&&(n=[...new Set(n)]),{message:n.join(". "),details:a}},t.ValidationError=class extends Error{constructor(e,t,n){super(e),this._original=n,this.details=t}static isError(e){return e instanceof t.ValidationError}},t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=a.error},function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=n(0),o=n(2),c=n(6),l=n(1);let u;const d={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e,t={}){s("string"==typeof e,"Invalid reference key:",e),l.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");const n=Object.assign({},d.defaults,t);delete n.prefix;const a=n.separator,i=d.context(e,a,t.prefix);if(n.type=i.type,e=i.key,"value"===n.type)if(i.root&&(s(!a||e[0]!==a,"Cannot specify relative path with root prefix"),n.ancestor="root",e||(e=null)),a&&a===e)e=null,n.ancestor=0;else if(void 0!==n.ancestor)s(!a||!e||e[0]!==a,"Cannot combine prefix with ancestor option");else{const[t,i]=d.ancestor(e,a);i&&""===(e=e.slice(i))&&(e=null),n.ancestor=t}return n.path=a?null===e?[]:e.split(a):[e],new d.Ref(n)},t.in=function(e,n={}){return t.create(e,i(i({},n),{},{in:!0}))},t.isRef=function(e){return!!e&&!!e[l.symbols.ref]},d.Ref=class{constructor(e){s("object"==typeof e,"Invalid reference construction"),l.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),s(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),s(!e.map||Array.isArray(e.map),"options.map must be an array"),s(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,d.defaults,e),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,n,a,i={}){return s(!this.in||i.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(n.context,t,i):"local"===this.type?this._resolve(a,t,i):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,i):(s(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,i)):this._resolve(e,t,i)}_resolve(e,t,n){let a;if("value"===this.type&&t.mainstay.shadow&&!1!==n.shadow&&(a=t.mainstay.shadow.get(this.absolute(t))),void 0===a&&(a=c(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(a=this.adjust(a)),this.map){const e=this.map.get(a);void 0!==e&&(a=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,a),a}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new d.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(e));if(!this.separator)return void(this.display="ref:".concat(e));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(e));if("root"===this.ancestor)return void(this.display="ref:root:".concat(e));if(1===this.ancestor)return void(this.display="ref:".concat(e||".."));const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(t).concat(e||"")}},d.Ref.prototype[l.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},d.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new d.Ref(e)},d.context=function(e,t,n={}){if(e=e.trim(),n){const a=void 0===n.global?"$":n.global;if(a!==t&&e.startsWith(a))return{key:e.slice(a.length),type:"global"};const i=void 0===n.local?"#":n.local;if(i!==t&&e.startsWith(i))return{key:e.slice(i.length),type:"local"};const r=void 0===n.root?"/":n.root;if(r!==t&&e.startsWith(r))return{key:e.slice(r.length),type:"value",root:!0}}return{key:e,type:"value"}},d.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let n=2;for(;e[n]===t;)++n;return[n-1,n]},t.toSibling=0,t.toParent=1,t.Manager=class{constructor(){this.refs=[]}register(e,a){if(e)if(a=void 0===a?t.toParent:a,Array.isArray(e))for(const t of e)this.register(t,a);else if(l.isSchema(e))for(const t of e._refs.refs)t.ancestor-a>=0&&this.refs.push({ancestor:t.ancestor-a,root:t.root});else t.isRef(e)&&"value"===e.type&&e.ancestor-a>=0&&this.refs.push({ancestor:e.ancestor-a,root:e.root}),u=u||n(7),u.isTemplate(e)&&this.register(e.refs(),a)}get length(){return this.refs.length}clone(){const e=new t.Manager;return e.refs=o(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}},function(e,t,n){"use strict";const a=n(0),i={};e.exports=function(e,t,n){if(!1===t||null==t)return e;"string"==typeof(n=n||{})&&(n={separator:n});const r=Array.isArray(t);a(!r||!n.separator,"Separator option no valid for array-based chain");const s=r?t:t.split(n.separator||".");let o=e;for(let e=0;e<s.length;++e){let r=s[e];const c=n.iterables&&i.iterables(o);if(Array.isArray(o)||"set"===c){const e=Number(r);Number.isInteger(e)&&(r=e<0?o.length+e:e)}if(!o||"function"==typeof o&&!1===n.functions||!c&&void 0===o[r]){a(!n.strict||e+1===s.length,"Missing segment",r,"in reach path ",t),a("object"==typeof o||!0===n.functions||"function"!=typeof o,"Invalid segment",r,"in reach path ",t),o=n.default;break}o=c?"set"===c?[...o][r]:o.get(r):o[r]}return o},i.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=n(0),s=n(2),o=n(30),c=n(31),l=n(1),u=n(4),d=n(5),p={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=p.Template=class{constructor(e,t){r("string"==typeof e,"Template source must be a string"),r(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,this._settings=s(t),this._parse()}_parse(){if(!this.source.includes("{"))return;const e=p.encode(this.source),t=p.split(e);let n=!1;const a=[],i=t.shift();i&&a.push(i);for(const e of t){const t="{"!==e[0],i=t?"}":"}}",r=e.indexOf(i);if(-1===r||"{"===e[1]){a.push("{".concat(p.decode(e)));continue}let s=e.slice(t?0:1,r);const o=":"===s[0];o&&(s=s.slice(1));const c=this._ref(p.decode(s),{raw:t,wrapped:o});a.push(c),"string"!=typeof c&&(n=!0);const l=e.slice(r+i.length);l&&a.push(p.decode(l))}n?this._template=a:this.rendered=a.join("")}static date(e,t){return p.dateFormat[t.dateFormat].call(e)}describe(e={}){if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),t}static build(e){return new p.Template(e.template,e.options)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[l.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,n,a){return this._template&&1===this._template.length?this._part(this._template[0],e,t,n,a,{}):this.render(e,t,n,a)}_part(e,...t){return e.ref?e.ref.resolve(...t):e.formula.evaluate(t)}render(e,t,n,a,i={}){if(!this.isDynamic())return this.rendered;const r=[];for(const s of this._template)if("string"==typeof s)r.push(s);else{const c=this._part(s,e,t,n,a,i),l=p.stringify(c,e,t,n,a,i);if(void 0!==l){const e=s.raw||!1===(i.errors&&i.errors.escapeHtml)?l:o(l);r.push(p.wrap(e,s.wrapped&&n.errors.wrap.label))}}return r.join("")}_ref(e,{raw:t,wrapped:n}){const a=[],i=e=>{const t=d.create(e,this._settings);return a.push(t),e=>t.resolve(...e)};try{var r=new c.Parser(e,{reference:i,functions:p.functions,constants:p.constants})}catch(t){throw t.message='Invalid template variable "'.concat(e,'" fails due to: ').concat(t.message),t}if(r.single){if("reference"===r.single.type){const e=a[0];return{ref:e,raw:t,refs:a,wrapped:n||"local"===e.type&&"label"===e.key}}return p.stringify(r.single.value)}return{formula:r,raw:t,refs:a}}toString(){return this.source}},p.Template.prototype[l.symbols.template]=!0,p.Template.prototype.isImmutable=!0,p.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>p.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>p.closes.slice(0,t.length)))},p.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},p.split=function(e){const t=[];let n="";for(let a=0;a<e.length;++a){const i=e[a];if("{"===i){let i="";for(;a+1<e.length&&"{"===e[a+1];)i+="{",++a;t.push(n),n=i}else n+=i}return t.push(n),t},p.wrap=function(e,t){return t?1===t.length?"".concat(t).concat(e).concat(t):"".concat(t[0]).concat(e).concat(t[1]):e},p.stringify=function(e,t,n,r,s,o){const c=typeof e;let l=!1;if(d.isRef(e)&&e.render&&(l=e.in,e=e.resolve(t,n,r,s,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({in:e.in},o))),null===e)return"null";if("string"===c)return e;if("number"===c||"function"===c||"symbol"===c)return e.toString();if("object"!==c)return JSON.stringify(e);if(e instanceof Date)return p.Template.date(e,r);if(e instanceof Map){const t=[];for(const[n,a]of e.entries())t.push("".concat(n.toString()," -> ").concat(a.toString()));e=t}if(!Array.isArray(e))return e.toString();let u="";for(const a of e)u=u+(u.length?", ":"")+p.stringify(a,t,n,r,s,o);return l?u:p.wrap(u,r.errors.wrap.array)},p.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},p.functions={if:(e,t,n)=>e?t:n,msg(e){const[t,n,a,i,r]=this,s=r.messages;if(!s)return"";const o=u.template(t,s[0],e,n,a)||u.template(t,s[1],e,n,a);return o?o.render(t,n,a,i,r):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}},function(e,t,n){"use strict";const a=n(0),i=n(1),r=n(5),s={};t.schema=function(e,t,n={}){i.assertOptions(n,["appendPath","override"]);try{return s.schema(e,t,n)}catch(e){throw n.appendPath&&void 0!==e.path&&(e.message="".concat(e.message," (").concat(e.path,")")),e}},s.schema=function(e,t,n){a(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(a(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));const r=(t,...a)=>!1!==n.override?t.valid(e.override,...a):t.valid(...a);if(s.simple(t))return r(e,t);if("function"==typeof t)return e.custom(t);if(a("object"==typeof t,"Invalid schema content:",typeof t),i.isResolvable(t))return r(e,t);if(i.isSchema(t))return t;if(Array.isArray(t)){for(const n of t)if(!s.simple(n))return e.alternatives().try(...t);return r(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?r(e.date(),t):(a(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return r.isRef(e)?e:r.create(e,t)},t.compile=function(e,n,r={}){i.assertOptions(r,["legacy"]);const o=n&&n[i.symbols.any];if(o)return a(r.legacy||o.version===i.version,"Cannot mix different versions of joi schemas:",o.version,i.version),n;if("object"!=typeof n||!r.legacy)return t.schema(e,n,{appendPath:!0});const c=s.walk(n);return c?c.compile(c.root,n):t.schema(e,n,{appendPath:!0})},s.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=s.walk(t);if(e)return e}return null}const t=e[i.symbols.any];if(t)return{root:e[t.root],compile:t.compile};a(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const n=s.walk(e[t]);if(n)return n}return null},s.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,n,o){if(void 0===o&&(a(n&&"object"==typeof n,"Missing options"),o=n,n=r.create(".")),Array.isArray(o)&&(o={switch:o}),i.assertOptions(o,["is","not","then","otherwise","switch","break"]),i.isSchema(n))return a(void 0===o.is,'"is" can not be used with a schema condition'),a(void 0===o.not,'"not" can not be used with a schema condition'),a(void 0===o.switch,'"switch" can not be used with a schema condition'),s.condition(e,{is:n,then:o.then,otherwise:o.otherwise,break:o.break});if(a(r.isRef(n)||"string"==typeof n,"Invalid condition:",n),a(void 0===o.not||void 0===o.is,'Cannot combine "is" with "not"'),void 0===o.switch){let c=o;void 0!==o.not&&(c={is:o.not,then:o.otherwise,otherwise:o.then,break:o.break});let l=void 0!==c.is?e.$_compile(c.is):e.$_root.invalid(null,!1,0,"").required();return a(void 0!==c.then||void 0!==c.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),a(void 0===c.break||void 0===c.then||void 0===c.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===o.is||r.isRef(o.is)||i.isSchema(o.is)||(l=l.required()),s.condition(e,{ref:t.ref(n),is:l,then:c.then,otherwise:c.otherwise,break:c.break})}a(Array.isArray(o.switch),'"switch" must be an array'),a(void 0===o.is,'Cannot combine "switch" with "is"'),a(void 0===o.not,'Cannot combine "switch" with "not"'),a(void 0===o.then,'Cannot combine "switch" with "then"');const c={ref:t.ref(n),switch:[],break:o.break};for(let t=0;t<o.switch.length;++t){const n=o.switch[t],s=t===o.switch.length-1;i.assertOptions(n,s?["is","then","otherwise"]:["is","then"]),a(void 0!==n.is,'Switch statement missing "is"'),a(void 0!==n.then,'Switch statement missing "then"');const l={is:e.$_compile(n.is),then:e.$_compile(n.then)};if(r.isRef(n.is)||i.isSchema(n.is)||(l.is=l.is.required()),s){a(void 0===o.otherwise||void 0===n.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const t=void 0!==o.otherwise?o.otherwise:n.otherwise;void 0!==t&&(a(void 0===c.break,"Cannot specify both otherwise and break"),l.otherwise=e.$_compile(t))}c.switch.push(l)}return c},s.condition=function(e,t){for(const n of["then","otherwise"])void 0===t[n]?delete t[n]:t[n]=e.$_compile(t[n]);return t}},function(e,t,n){"use strict";const a=n(0),i=n(2),r=n(7);t.compile=function(e,t){if("string"==typeof e)return a(!t,"Cannot set single message string"),new r(e);if(r.isTemplate(e))return a(!t,"Cannot set single message template"),e;a("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?i(t):{};for(let n in e){const i=e[n];if("root"===n||r.isTemplate(i)){t[n]=i;continue}if("string"==typeof i){t[n]=new r(i);continue}a("object"==typeof i&&!Array.isArray(i),"Invalid message for",n);const s=n;for(n in t[s]=t[s]||{},i){const e=i[n];"root"===n||r.isTemplate(e)?t[s][n]=e:(a("string"==typeof e,"Invalid message for",n,"in",s),t[s][n]=new r(e))}}return t},t.decompile=function(e){const t={};for(let n in e){const a=e[n];if("root"===n){t[n]=a;continue}if(r.isTemplate(a)){t[n]=a.describe({compact:!0});continue}const i=n;for(n in t[i]={},a){const e=a[n];t[i][n]="root"!==n?e.describe({compact:!0}):e}}return t},t.merge=function(e,n){if(!e)return t.compile(n);if(!n)return e;if("string"==typeof n)return new r(n);if(r.isTemplate(n))return n;const s=i(e);for(let e in n){const t=n[e];if("root"===e||r.isTemplate(t)){s[e]=t;continue}if("string"==typeof t){s[e]=new r(t);continue}a("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);const i=e;for(e in s[i]=s[i]||{},t){const n=t[e];"root"===e||r.isTemplate(n)?s[i][e]=n:(a("string"==typeof n,"Invalid message for",e,"in",i),s[i][e]=new r(n))}}return s}},function(e,t,n){"use strict";const a=n(0),i=n(2),r=n(15),s={};e.exports=s.merge=function(e,t,n){if(a(e&&"object"==typeof e,"Invalid target value: must be an object"),a(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(n=Object.assign({nullOverride:!0,mergeArrays:!0},n),Array.isArray(t)){a(Array.isArray(e),"Cannot merge array onto an object"),n.mergeArrays||(e.length=0);for(let a=0;a<t.length;++a)e.push(i(t[a],{symbols:n.symbols}));return e}const o=r.keys(t,n);for(let a=0;a<o.length;++a){const r=o[a];if("__proto__"===r||!Object.prototype.propertyIsEnumerable.call(t,r))continue;const c=t[r];if(c&&"object"==typeof c){if(e[r]===c)continue;!e[r]||"object"!=typeof e[r]||Array.isArray(e[r])!==Array.isArray(c)||c instanceof Date||c instanceof RegExp?e[r]=i(c,{symbols:n.symbols}):s.merge(e[r],c,n)}else(null!=c||n.nullOverride)&&(e[r]=c)}return e}},function(e,t,n){"use strict";const a=n(14),i={mismatched:null};e.exports=function(e,t,n){return n=Object.assign({prototype:!0},n),!!i.isDeepEqual(e,t,n,[])},i.isDeepEqual=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;const s=typeof e;if(s!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===s){if(!n.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==s)return e!=e&&t!=t;const o=i.getSharedType(e,t,!!n.prototype);switch(o){case a.buffer:return!1;case a.promise:return e===t;case a.regex:return e.toString()===t.toString();case i.mismatched:return!1}for(let n=r.length-1;n>=0;--n)if(r[n].isSame(e,t))return!0;r.push(new i.SeenEntry(e,t));try{return!!i.isDeepEqualObj(o,e,t,n,r)}finally{r.pop()}},i.getSharedType=function(e,t,n){if(n)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?i.mismatched:a.getInternalProto(e);const r=a.getInternalProto(e);return r!==a.getInternalProto(t)?i.mismatched:r},i.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},i.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},i.isSetSimpleEqual=function(e,t){for(const n of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,n))return!1;return!0},i.isDeepEqualObj=function(e,t,n,r,s){const{isDeepEqual:o,valueOf:c,hasOwnEnumerableProperty:l}=i,{keys:u,getOwnPropertySymbols:d}=Object;if(e===a.array){if(!r.part){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!o(t[e],n[e],r,s))return!1;return!0}for(const e of t)for(const t of n)if(o(e,t,r,s))return!0}else if(e===a.set){if(t.size!==n.size)return!1;if(!i.isSetSimpleEqual(t,n)){const e=new Set(Set.prototype.values.call(n));for(const n of Set.prototype.values.call(t)){if(e.delete(n))continue;let t=!1;for(const a of e)if(o(n,a,r,s)){e.delete(a),t=!0;break}if(!t)return!1}}}else if(e===a.map){if(t.size!==n.size)return!1;for(const[e,a]of Map.prototype.entries.call(t)){if(void 0===a&&!Map.prototype.has.call(n,e))return!1;if(!o(a,Map.prototype.get.call(n,e),r,s))return!1}}else if(e===a.error&&(t.name!==n.name||t.message!==n.message))return!1;const p=c(t),g=c(n);if((t!==p||n!==g)&&!o(p,g,r,s))return!1;const h=u(t);if(!r.part&&h.length!==u(n).length&&!r.skip)return!1;let f=0;for(const e of h)if(r.skip&&r.skip.includes(e))void 0===n[e]&&++f;else{if(!l(n,e))return!1;if(!o(t[e],n[e],r,s))return!1}if(!r.part&&h.length-f!==u(n).length)return!1;if(!1!==r.symbols){const e=d(t),a=new Set(d(n));for(const i of e){if(!r.skip||!r.skip.includes(i))if(l(t,i)){if(!l(n,i))return!1;if(!o(t[i],n[i],r,s))return!1}else if(l(n,i))return!1;a.delete(i)}for(const e of a)if(l(n,e))return!1}return!0},i.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}},function(e,t,n){"use strict";const a=n(0),i=n(2),r=n(16),s=n(1),o=n(8),c=n(4),l=n(18),u=n(19),d=n(5),p=n(7),g=n(20);let h;const f={types:{alternatives:n(33),any:n(3),array:n(39),boolean:n(40),date:n(41),function:n(42),link:n(45),number:n(46),object:n(47),string:n(48),symbol:n(52)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const e={_types:new Set(Object.keys(f.types))};for(const t of e._types)e[t]=function(...e){return a(!e.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),f.generate(this,f.types[t],e)};for(const t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(...e){return this.any()[t](...e)};Object.assign(e,f.methods);for(const t in f.aliases){const n=f.aliases[t];e[t]=e[n]}return e.x=e.expression,g.setup&&g.setup(e),e}};f.methods={ValidationError:c.ValidationError,version:s.version,cache:r.provider,assert(e,t,...n){f.assert(e,t,!0,n)},attempt:(e,t,...n)=>f.assert(e,t,!1,n),build(e){return a("function"==typeof u.build,"Manifest functionality disabled"),u.build(this,e)},checkPreferences(e){s.checkPreferences(e)},compile(e,t){return o.compile(this,e,t)},defaults(e){a("function"==typeof e,"modifier must be a function");const t=Object.assign({},this);for(const n of t._types){const i=e(t[n]());a(s.isSchema(i),"modifier must return a valid schema object"),t[n]=function(...e){return f.generate(this,i,e)}}return t},expression:(...e)=>new p(...e),extend(...e){s.verifyFlat(e,"extend"),h=h||n(17),a(e.length,"You need to provide at least one extension"),this.assert(e,h.extensions);const t=Object.assign({},this);t._types=new Set(t._types);for(let n of e){"function"==typeof n&&(n=n(t)),this.assert(n,h.extension);const e=f.expandExtension(n,t);for(const n of e){a(void 0===t[n.type]||t._types.has(n.type),"Cannot override name",n.type);const e=n.base||this.any(),i=l.type(e,n);t._types.add(n.type),t[n.type]=function(...e){return f.generate(this,i,e)}}}return t},isError:c.ValidationError.isError,isExpression:p.isTemplate,isRef:d.isRef,isSchema:s.isSchema,in:(...e)=>d.in(...e),override:s.symbols.override,ref:(...e)=>d.create(...e),types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in f.aliases)e[t]=this[t]();return e}},f.assert=function(e,t,n,a){const r=a[0]instanceof Error||"string"==typeof a[0]?a[0]:null,o=r?a[1]:a[0],l=t.validate(e,s.preferences({errors:{stack:!0}},o||{}));let u=l.error;if(!u)return l.value;if(r instanceof Error)throw r;const d=n&&"function"==typeof u.annotate?u.annotate():u.message;throw u instanceof c.ValidationError==0&&(u=i(u)),u.message=r?"".concat(r," ").concat(d):d,u},f.generate=function(e,t,n){return a(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&n.length?t._definition.args(t,...n):t},f.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const n=[];for(const a of t._types)if(e.type.test(a)){const i=Object.assign({},e);i.type=a,i.base=t[a](),n.push(i)}return n},e.exports=f.root()},function(e,t,n){"use strict";const a=n(28);e.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:a(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}},function(e,t,n){"use strict";const a={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},a.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const n=Object.prototype.toString.call(e);return a.typeMap.get(n)||t.generic}},function(e,t,n){"use strict";t.keys=function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},function(e,t,n){"use strict";const a=n(0),i=n(2),r=n(1),s={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:e=>new s.Cache(e)},s.Cache=class{constructor(e={}){r.assertOptions(e,["max"]),a(void 0===e.max||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||s.max,this._map=new Map,this._list=new s.List}get length(){return this._map.size}set(e,t){if(null!==e&&!s.supported.has(typeof e))return;let n=this._map.get(e);if(n)return n.value=t,void this._list.first(n);n=this._list.unshift({key:e,value:t}),this._map.set(e,n),this._compact()}get(e){const t=this._map.get(e);if(t)return this._list.first(t),i(t.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},s.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:n}=e;return t.prev=n,n&&(n.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}},function(e,t,n){"use strict";const a=n(12),i={};i.wrap=a.string().min(1).max(2).allow(!1),t.preferences=a.object({allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),context:a.object(),convert:a.boolean(),dateFormat:a.valid("date","iso","string","time","utc"),debug:a.boolean(),errors:{escapeHtml:a.boolean(),label:a.valid("path","key",!1),language:[a.string(),a.object().ref()],render:a.boolean(),stack:a.boolean(),wrap:{label:i.wrap,array:i.wrap}},externals:a.boolean(),messages:a.object(),noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:a.valid("required","optional","forbidden"),skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()}).strict(),i.nameRx=/^[a-zA-Z0-9]\w*$/,i.rule=a.object({alias:a.array().items(a.string().pattern(i.nameRx)).single(),args:a.array().items(a.string(),a.object({name:a.string().pattern(i.nameRx).required(),ref:a.boolean(),assert:a.alternatives([a.function(),a.object().schema()]).conditional("ref",{is:!0,then:a.required()}),normalize:a.function(),message:a.string().when("assert",{is:a.function(),then:a.required()})})),convert:a.boolean(),manifest:a.boolean(),method:a.function().allow(!1),multi:a.boolean(),validate:a.function()}),t.extension=a.object({type:a.alternatives([a.string(),a.object().regex()]).required(),args:a.function(),cast:a.object().pattern(i.nameRx,a.object({from:a.function().maxArity(1).required(),to:a.function().minArity(1).maxArity(2).required()})),base:a.object().schema().when("type",{is:a.object().regex(),then:a.forbidden()}),coerce:[a.function().maxArity(3),a.object({method:a.function().maxArity(3).required(),from:a.array().items(a.string()).single()})],flags:a.object().pattern(i.nameRx,a.object({setter:a.string(),default:a.any()})),manifest:{build:a.function().arity(2)},messages:[a.object(),a.string()],modifiers:a.object().pattern(i.nameRx,a.function().minArity(1).maxArity(2)),overrides:a.object().pattern(i.nameRx,a.function()),prepare:a.function().maxArity(3),rebuild:a.function().arity(1),rules:a.object().pattern(i.nameRx,i.rule),terms:a.object().pattern(i.nameRx,a.object({init:a.array().allow(null).required(),manifest:a.object().pattern(/.+/,[a.valid("schema","single"),a.object({mapped:a.object({from:a.string().required(),to:a.string().required()}).required()})])})),validate:a.function().maxArity(3)}).strict(),t.extensions=a.array().items(a.object(),a.function().arity(1)).strict(),i.desc={buffer:a.object({buffer:a.string()}),func:a.object({function:a.function().required(),options:{literal:!0}}),override:a.object({override:!0}),ref:a.object({ref:a.object({type:a.valid("value","global","local"),path:a.array().required(),separator:a.string().length(1).allow(!1),ancestor:a.number().min(0).integer().allow("root"),map:a.array().items(a.array().length(2)).min(1),adjust:a.function(),iterables:a.boolean(),in:a.boolean(),render:a.boolean()}).required()}),regex:a.object({regex:a.string().min(3)}),special:a.object({special:a.valid("deep").required()}),template:a.object({template:a.string().required(),options:a.object()}),value:a.object({value:a.alternatives([a.object(),a.array()]).required()})},i.desc.entity=a.alternatives([a.array().items(a.link("...")),a.boolean(),a.function(),a.number(),a.string(),i.desc.buffer,i.desc.func,i.desc.ref,i.desc.regex,i.desc.special,i.desc.template,i.desc.value,a.link("/")]),i.desc.values=a.array().items(null,a.boolean(),a.function(),a.number().allow(1/0,-1/0),a.string().allow(""),a.symbol(),i.desc.buffer,i.desc.func,i.desc.override,i.desc.ref,i.desc.regex,i.desc.template,i.desc.value),i.desc.messages=a.object().pattern(/.+/,[a.string(),i.desc.template,a.object().pattern(/.+/,[a.string(),i.desc.template])]),t.description=a.object({type:a.string().required(),flags:a.object({cast:a.string(),default:a.any(),description:a.string(),empty:a.link("/"),failover:i.desc.entity,id:a.string(),label:a.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:a.boolean(),unit:a.string()}).unknown(),preferences:{allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),convert:a.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:a.boolean(),label:["path","key"],language:[a.string(),i.desc.ref],wrap:{label:i.wrap,array:i.wrap}},externals:a.boolean(),messages:i.desc.messages,noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:["required","optional","forbidden"],skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()},allow:i.desc.values,invalid:i.desc.values,rules:a.array().min(1).items({name:a.string().required(),args:a.object().min(1),keep:a.boolean(),message:[a.string(),i.desc.messages],warn:a.boolean()}),keys:a.object().pattern(/.*/,a.link("/")),link:i.desc.ref}).pattern(/^[a-z]\w*$/,a.any())},function(e,t,n){"use strict";const a=n(0),i=n(2),r=n(1),s=n(9),o={};t.type=function(e,t){const n=Object.getPrototypeOf(e),c=i(n),l=e._assign(Object.create(c)),u=Object.assign({},t);delete u.base,c._definition=u;const d=n._definition||{};u.messages=s.merge(d.messages,u.messages),u.properties=Object.assign({},d.properties,u.properties),l.type=u.type,u.flags=Object.assign({},d.flags,u.flags);const p=Object.assign({},d.terms);if(u.terms)for(const e in u.terms){const t=u.terms[e];a(void 0===l.$_terms[e],"Invalid term override for",u.type,e),l.$_terms[e]=t.init,p[e]=t}u.terms=p,u.args||(u.args=d.args),u.prepare=o.prepare(u.prepare,d.prepare),u.coerce&&("function"==typeof u.coerce&&(u.coerce={method:u.coerce}),u.coerce.from&&!Array.isArray(u.coerce.from)&&(u.coerce={method:u.coerce.method,from:[].concat(u.coerce.from)})),u.coerce=o.coerce(u.coerce,d.coerce),u.validate=o.validate(u.validate,d.validate);const g=Object.assign({},d.rules);if(u.rules)for(const e in u.rules){const t=u.rules[e];a("object"==typeof t,"Invalid rule definition for",u.type,e);let n=t.method;if(void 0===n&&(n=function(){return this.$_addRule(e)}),n&&(a(!c[e],"Rule conflict in",u.type,e),c[e]=n),a(!g[e],"Rule conflict in",u.type,e),g[e]=t,t.alias){const e=[].concat(t.alias);for(const n of e)c[n]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map((e=>("string"==typeof e&&(e={name:e}),a(!t.argsByName.has(e.name),"Duplicated argument name",e.name),r.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e))))}u.rules=g;const h=Object.assign({},d.modifiers);if(u.modifiers)for(const e in u.modifiers){a(!c[e],"Rule conflict in",u.type,e);const t=u.modifiers[e];a("function"==typeof t,"Invalid modifier definition for",u.type,e);const n=function(t){return this.rule({[e]:t})};c[e]=n,h[e]=t}if(u.modifiers=h,u.overrides){c._super=n,l.$_super={};for(const e in u.overrides)a(n[e],"Cannot override missing",e),u.overrides[e][r.symbols.parent]=n[e],l.$_super[e]=n[e].bind(l);Object.assign(c,u.overrides)}u.cast=Object.assign({},d.cast,u.cast);const f=Object.assign({},d.manifest,u.manifest);return f.build=o.build(u.manifest&&u.manifest.build,d.manifest&&d.manifest.build),u.manifest=f,u.rebuild=o.rebuild(u.rebuild,d.rebuild),l},o.build=function(e,t){return e&&t?function(n,a){return t(e(n,a),a)}:e||t},o.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(n,a){let i;if((!t.from||t.from.includes(typeof n))&&(i=t.method(n,a),i)){if(i.errors||void 0===i.value)return i;n=i.value}if(!e.from||e.from.includes(typeof n)){const t=e.method(n,a);if(t)return t}return i}}:e||t},o.prepare=function(e,t){return e&&t?function(n,a){const i=e(n,a);if(i){if(i.errors||void 0===i.value)return i;n=i.value}return t(n,a)||i}:e||t},o.rebuild=function(e,t){return e&&t?function(n){t(n),e(n)}:e||t},o.validate=function(e,t){return e&&t?function(n,a){const i=t(n,a);if(i){if(i.errors&&(!Array.isArray(i.errors)||i.errors.length))return i;n=i.value}return e(n,a)||i}:e||t}},function(e,t){},function(e,t){},function(e,t,n){"use strict";const a=n(0),i=n(11),r=n(1),s={};e.exports=s.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=s.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){r.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,n){if(e=e||new s.Values,t){if(t._override)return t.clone();for(const n of[...t._values,...t._refs])e.add(n)}if(n)for(const t of[...n._values,...n._refs])e.remove(t);return e.length?e:null}remove(e){r.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,n,a){return!!this.get(e,t,n,a)}get(e,t,n,a){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&a){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const t of this._values)if(i(t,e))return{value:t};if(t)for(const r of this._refs){const s=r.resolve(e,t,n,null,{in:!0});if(void 0===s)continue;const o=r.in&&"object"==typeof s?Array.isArray(s)?s:Object.keys(s):[s];for(const t of o)if(typeof t==typeof e)if(a&&e&&"string"==typeof e){if(t.toLowerCase()===e.toLowerCase())return{value:t,ref:r}}else if(i(t,e))return{value:t,ref:r}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new s.Values(this._values,this._refs);return e._override=this._override,e}concat(e){a(!e._override,"Cannot concat override set of values");const t=new s.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},s.Values.prototype[r.symbols.values]=!0,s.Values.prototype.slice=s.Values.prototype.clone,s.lowercases=function(e){const t=new Map;if(e)for(const n of e)"string"==typeof n&&t.set(n.toLowerCase(),n);return t}},function(e,t,n){"use strict";const a=n(43),i=n(0),r=n(2),s=n(44),o=n(3),c=n(1),l=n(8),u=n(4),d=n(5),p=n(7),g={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=o.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,{schema:t,error:n,state:a,prefs:i}){if(!e||typeof e!==t.$_property("typeof")||Array.isArray(e))return{value:e,errors:n("object.base",{type:t.$_property("typeof")})};if(!(t.$_terms.renames||t.$_terms.dependencies||t.$_terms.keys||t.$_terms.patterns||t.$_terms.externals))return;e=g.clone(e,i);const r=[];if(t.$_terms.renames&&!g.rename(t,e,a,i,r))return{value:e,errors:r};if(!t.$_terms.keys&&!t.$_terms.patterns&&!t.$_terms.dependencies)return{value:e,errors:r};const s=new Set(Object.keys(e));if(t.$_terms.keys){const n=[e,...a.ancestors];for(const o of t.$_terms.keys){const t=o.key,c=e[t];s.delete(t);const l=a.localize([...a.path,t],n,o),u=o.schema.$_validate(c,l,i);if(u.errors){if(i.abortEarly)return{value:e,errors:u.errors};void 0!==u.value&&(e[t]=u.value),r.push(...u.errors)}else"strip"===o.schema._flags.result||void 0===u.value&&void 0!==c?delete e[t]:void 0!==u.value&&(e[t]=u.value)}}if(s.size||t._flags._hasPatternMatch){const n=g.unknown(t,e,s,r,a,i);if(n)return n}if(t.$_terms.dependencies)for(const n of t.$_terms.dependencies){if(n.key&&void 0===n.key.resolve(e,a,i,null,{shadow:!1}))continue;const s=g.dependencies[n.rel](t,n,e,a,i);if(s){const n=t.$_createError(s.code,e,s.context,a,i);if(i.abortEarly)return{value:e,errors:n};r.push(n)}}return{value:e,errors:r}},rules:{and:{method(...e){return c.verifyFlat(e,"and"),g.dependency(this,"and",null,e)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,t,n){p.isTemplate(e)||(e=l.ref(e)),i(void 0===n||"string"==typeof n,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});const a=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:n}});return a.$_mutateRegister(e),a.$_mutateRegister(t),a},validate(e,{error:t,prefs:n,state:a},{subject:i,schema:r,message:s}){const o=i.resolve(e,a,n),c=d.isRef(i)?i.absolute(a):[];return r.$_match(o,a.localize(c,[e,...a.ancestors],r),n)?e:t("object.assert",{subject:i,message:s})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return i("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate:(e,t,{constructor:n,name:a})=>e instanceof n?e:t.error("object.instance",{type:a,value:e}),args:["constructor","name"]},keys:{method(e){i(void 0===e||"object"==typeof e,"Object schema must be a valid object"),i(!c.isSchema(e),"Object schema cannot be a joi schema");const t=this.clone();if(e)if(Object.keys(e).length){t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new g.Keys;for(const n in e)c.tryWithPath((()=>t.$_terms.keys.push({key:n,schema:this.$_compile(e[n])})),n)}else t.$_terms.keys=new g.Keys;else t.$_terms.keys=null;return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:n},{name:a,operator:i,args:r})=>c.compare(Object.keys(e).length,n,i)?e:t.error("object."+a,{limit:r.limit,value:e}),args:[{name:"limit",ref:!0,assert:c.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(...e){return c.verifyFlat(e,"nand"),g.dependency(this,"nand",null,e)}},or:{method(...e){return c.verifyFlat(e,"or"),g.dependency(this,"or",null,e)}},oxor:{method(...e){return g.dependency(this,"oxor",null,e)}},pattern:{method(e,t,n={}){const a=e instanceof RegExp;a||(e=this.$_compile(e,{appendPath:!0})),i(void 0!==t,"Invalid rule"),c.assertOptions(n,["fallthrough","matches"]),a&&i(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});const r=this.clone();r.$_terms.patterns=r.$_terms.patterns||[];const s={[a?"regex":"schema"]:e,rule:t};return n.matches&&(s.matches=this.$_compile(n.matches),"array"!==s.matches.type&&(s.matches=s.matches.$_root.array().items(s.matches)),r.$_mutateRegister(s.matches),r.$_setFlag("_hasPatternMatch",!0,{clone:!1})),n.fallthrough&&(s.fallthrough=!0),r.$_terms.patterns.push(s),r.$_mutateRegister(t),r}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>d.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(e,t,n={}){i("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),i("string"==typeof t||t instanceof p,"Invalid rename to argument"),i(t!==e,"Cannot rename key to same name:",e),c.assertOptions(n,["alias","ignoreUndefined","override","multiple"]);const r=this.clone();r.$_terms.renames=r.$_terms.renames||[];for(const t of r.$_terms.renames)i(t.from!==e,"Cannot rename the same key multiple times");return t instanceof p&&r.$_mutateRegister(t),r.$_terms.renames.push({from:e,to:t,options:a(g.renameDefaults,n)}),r}},schema:{method(e="any"){return this.$_addRule({name:"schema",args:{type:e}})},validate:(e,t,{type:n})=>!c.isSchema(e)||"any"!==n&&e.type!==n?t.error("object.schema",{type:n}):e},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t,n={}){return g.dependency(this,"with",e,t,n)}},without:{method(e,t,n={}){return g.dependency(this,"without",e,t,n)}},xor:{method(...e){return c.verifyFlat(e,"xor"),g.dependency(this,"xor",null,e)}}},overrides:{default(e,t){return void 0===e&&(e=c.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new s.Sorter;for(const n of e.$_terms.keys)c.tryWithPath((()=>t.add(n,{after:n.schema.$_rootReferences(),group:n.key})),n.key);e.$_terms.keys=new g.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:n,key:a=null,peers:i,options:r}of t.dependencies)e=g.dependency(e,n,a,i,r);if(t.patterns)for(const{regex:n,schema:a,rule:i,fallthrough:r,matches:s}of t.patterns)e=e.pattern(n||a,i,{fallthrough:r,matches:s});if(t.renames)for(const{from:n,to:a,options:i}of t.renames)e=e.rename(n,a,i);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),g.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return r(e,{shallow:!0});const n=Object.create(Object.getPrototypeOf(e));return Object.assign(n,e),n}const n=function(...t){return e.apply(this,t)};return n.prototype=r(e.prototype),Object.defineProperty(n,"name",{value:e.name,writable:!1}),Object.defineProperty(n,"length",{value:e.length,writable:!1}),Object.assign(n,e),n},g.dependency=function(e,t,n,a,r){i(null===n||"string"==typeof n,t,"key must be a strings"),r||(r=a.length>1&&"object"==typeof a[a.length-1]?a.pop():{}),c.assertOptions(r,["separator"]),a=[].concat(a);const s=c.default(r.separator,"."),o=[];for(const e of a)i("string"==typeof e,t,"peers must be strings"),o.push(l.ref(e,{separator:s,ancestor:0,prefix:!1}));null!==n&&(n=l.ref(n,{separator:s,ancestor:0,prefix:!1}));const u=e.clone();return u.$_terms.dependencies=u.$_terms.dependencies||[],u.$_terms.dependencies.push(new g.Dependency(t,n,o,a)),u},g.dependencies={and(e,t,n,a,i){const r=[],s=[],o=t.peers.length;for(const e of t.peers)void 0===e.resolve(n,a,i,null,{shadow:!1})?r.push(e.key):s.push(e.key);if(r.length!==o&&s.length!==o)return{code:"object.and",context:{present:s,presentWithLabels:g.keysToLabels(e,s),missing:r,missingWithLabels:g.keysToLabels(e,r)}}},nand(e,t,n,a,i){const r=[];for(const e of t.peers)void 0!==e.resolve(n,a,i,null,{shadow:!1})&&r.push(e.key);if(r.length!==t.peers.length)return;const s=t.paths[0],o=t.paths.slice(1);return{code:"object.nand",context:{main:s,mainWithLabel:g.keysToLabels(e,s),peers:o,peersWithLabels:g.keysToLabels(e,o)}}},or(e,t,n,a,i){for(const e of t.peers)if(void 0!==e.resolve(n,a,i,null,{shadow:!1}))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:g.keysToLabels(e,t.paths)}}},oxor(e,t,n,a,i){const r=[];for(const e of t.peers)void 0!==e.resolve(n,a,i,null,{shadow:!1})&&r.push(e.key);if(!r.length||1===r.length)return;const s={peers:t.paths,peersWithLabels:g.keysToLabels(e,t.paths)};return s.present=r,s.presentWithLabels=g.keysToLabels(e,r),{code:"object.oxor",context:s}},with(e,t,n,a,i){for(const r of t.peers)if(void 0===r.resolve(n,a,i,null,{shadow:!1}))return{code:"object.with",context:{main:t.key.key,mainWithLabel:g.keysToLabels(e,t.key.key),peer:r.key,peerWithLabel:g.keysToLabels(e,r.key)}}},without(e,t,n,a,i){for(const r of t.peers)if(void 0!==r.resolve(n,a,i,null,{shadow:!1}))return{code:"object.without",context:{main:t.key.key,mainWithLabel:g.keysToLabels(e,t.key.key),peer:r.key,peerWithLabel:g.keysToLabels(e,r.key)}}},xor(e,t,n,a,i){const r=[];for(const e of t.peers)void 0!==e.resolve(n,a,i,null,{shadow:!1})&&r.push(e.key);if(1===r.length)return;const s={peers:t.paths,peersWithLabels:g.keysToLabels(e,t.paths)};return 0===r.length?{code:"object.missing",context:s}:(s.present=r,s.presentWithLabels=g.keysToLabels(e,r),{code:"object.xor",context:s})}},g.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},g.rename=function(e,t,n,a,i){const r={};for(const s of e.$_terms.renames){const o=[],c="string"!=typeof s.from;if(c)for(const e in t){if(void 0===t[e]&&s.options.ignoreUndefined)continue;if(e===s.to)continue;const n=s.from.exec(e);n&&o.push({from:e,to:s.to,match:n})}else!Object.prototype.hasOwnProperty.call(t,s.from)||void 0===t[s.from]&&s.options.ignoreUndefined||o.push(s);for(const l of o){const o=l.from;let u=l.to;if(u instanceof p&&(u=u.render(t,n,a,l.match)),o!==u){if(!s.options.multiple&&r[u]&&(i.push(e.$_createError("object.rename.multiple",t,{from:o,to:u,pattern:c},n,a)),a.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,u)&&!s.options.override&&!r[u]&&(i.push(e.$_createError("object.rename.override",t,{from:o,to:u,pattern:c},n,a)),a.abortEarly))return!1;void 0===t[o]?delete t[u]:t[u]=t[o],r[u]=!0,s.options.alias||delete t[o]}}}return!0},g.unknown=function(e,t,n,a,i,r){if(e.$_terms.patterns){let s=!1;const o=e.$_terms.patterns.map((e=>{if(e.matches)return s=!0,[]})),c=[t,...i.ancestors];for(const s of n){const l=t[s],u=[...i.path,s];for(let d=0;d<e.$_terms.patterns.length;++d){const p=e.$_terms.patterns[d];if(p.regex){const e=p.regex.test(s);if(i.mainstay.tracer.debug(i,"rule","pattern.".concat(d),e?"pass":"error"),!e)continue}else if(!p.schema.$_match(s,i.nest(p.schema,"pattern.".concat(d)),r))continue;n.delete(s);const g=i.localize(u,c,{schema:p.rule,key:s}),h=p.rule.$_validate(l,g,r);if(h.errors){if(r.abortEarly)return{value:t,errors:h.errors};a.push(...h.errors)}if(p.matches&&o[d].push(s),t[s]=h.value,!p.fallthrough)break}}if(s)for(let n=0;n<o.length;++n){const s=o[n];if(!s)continue;const l=e.$_terms.patterns[n].matches,d=i.localize(i.path,c,l),p=l.$_validate(s,d,r);if(p.errors){const n=u.details(p.errors,{override:!1});n.matches=s;const o=e.$_createError("object.pattern.match",t,n,i,r);if(r.abortEarly)return{value:t,errors:o};a.push(o)}}}if(n.size&&(e.$_terms.keys||e.$_terms.patterns)){if(r.stripUnknown&&!e._flags.unknown||r.skipFunctions){const e=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.objects);for(const a of n)e?(delete t[a],n.delete(a)):"function"==typeof t[a]&&n.delete(a)}if(!c.default(e._flags.unknown,r.allowUnknown))for(const s of n){const n=i.localize([...i.path,s],[]),o=e.$_createError("object.unknown",t[s],{child:s},n,r,{flags:!1});if(r.abortEarly)return{value:t,errors:o};a.push(o)}}},g.Dependency=class{constructor(e,t,n,a){this.rel=e,this.key=t,this.peers=n,this.paths=a}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={separator:this.peers[0].separator}),e}},g.Keys=class extends Array{concat(e){const t=this.slice(),n=new Map;for(let e=0;e<t.length;++e)n.set(t[e].key,e);for(const a of e){const e=a.key,i=n.get(e);void 0!==i?t[i]={key:e,schema:t[i].schema.concat(a.schema)}:t.push(a)}return t}}},function(e,t,n){"use strict";const a=n(24),i=n(25),r={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:a.URL||URL};t.analyze=function(e,t={}){if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(!e)return i.code("DOMAIN_NON_EMPTY_STRING");if(e.length>256)return i.code("DOMAIN_TOO_LONG");if(r.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return i.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(r.domainControlRx.test(e))return i.code("DOMAIN_INVALID_CHARS");e=r.punycode(e);const n=t.minDomainSegments||r.minDomainSegments,a=e.split(".");if(a.length<n)return i.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&a.length>t.maxDomainSegments)return i.code("DOMAIN_SEGMENTS_COUNT_MAX");const s=t.tlds;if(s){const e=a[a.length-1].toLowerCase();if(s.deny&&s.deny.has(e)||s.allow&&!s.allow.has(e))return i.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<a.length;++e){const t=a[e];if(!t.length)return i.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return i.code("DOMAIN_LONG_SEGMENT");if(e<a.length-1){if(!r.domainSegmentRx.test(t))return i.code("DOMAIN_INVALID_CHARS")}else if(!r.tldSegmentRx.test(t))return i.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,n){return!t.analyze(e,n)},r.punycode=function(e){try{return new r.URL("http://".concat(e)).host}catch(t){return e}}},function(e,t){},function(e,t,n){"use strict";t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},function(e,t,n){"use strict";const a=n(0),i=n(27),r={generate:function(){const e={},t="!\\$&'\\(\\)\\*\\+,;=",n="\\w-\\.~%\\dA-Fa-f"+t+":@",a="["+n+"]",i="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+i+"\\.){3}"+i;const r="[\\dA-Fa-f]{1,4}",s="(?:"+r+":"+r+"|"+e.ipv4address+")",o="(?:"+r+":){6}"+s,c="::(?:"+r+":){5}"+s,l="(?:"+r+")?::(?:"+r+":){4}"+s,u="(?:(?:"+r+":){0,1}"+r+")?::(?:"+r+":){3}"+s,d="(?:(?:"+r+":){0,2}"+r+")?::(?:"+r+":){2}"+s,p="(?:(?:"+r+":){0,3}"+r+")?::"+r+":"+s,g="(?:(?:"+r+":){0,4}"+r+")?::"+s;e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+o+"|"+c+"|"+l+"|"+u+"|"+d+"|"+p+"|"+g+"|(?:(?:[\\dA-Fa-f]{1,4}:){0,5}[\\dA-Fa-f]{1,4})?::[\\dA-Fa-f]{1,4}|(?:(?:[\\dA-Fa-f]{1,4}:){0,6}[\\dA-Fa-f]{1,4})?::)",e.ipvFuture="v[\\dA-Fa-f]+\\.[\\w-\\.~"+t+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const h="[\\w-\\.~%\\dA-Fa-f"+t+":]*",f="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=]{1,255})",m="(?:"+h+"@)?"+f+"(?::\\d*)?",j="(?:"+h+"@)?("+f+")(?::\\d*)?",x=a+"+",b="(?:\\/"+a+"*)*",y="\\/(?:"+x+b+")?",M=x+b,O="[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=@]+"+b;return e.hierPart="(?:(?:\\/\\/"+m+b+")|"+y+"|"+M+"|(?:\\/\\/\\/[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*(?:\\/[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*))",e.hierPartCapture="(?:(?:\\/\\/"+j+b+")|"+y+"|"+M+")",e.relativeRef="(?:(?:\\/\\/"+m+b+")|"+y+"|"+O+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+j+b+")|"+y+"|"+O+"|)",e.query="["+n+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+n+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+n+"\\/\\?]*",e}};r.rfc3986=r.generate(),t.ip={v4Cidr:r.rfc3986.ipv4Cidr,v6Cidr:r.rfc3986.ipv6Cidr,ipv4:r.rfc3986.ipv4address,ipv6:r.rfc3986.ipv6address,ipvfuture:r.rfc3986.ipvFuture},r.createRegex=function(e){const t=r.rfc3986,n="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",s=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return r.wrap(s+n);let o="";if(e.scheme){a(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const n=[].concat(e.scheme);a(n.length>=1,"scheme must have at least 1 scheme specified");const r=[];for(let e=0;e<n.length;++e){const s=n[e];a(s instanceof RegExp||"string"==typeof s,"scheme at position "+e+" must be a RegExp or String"),s instanceof RegExp?r.push(s.source.toString()):(a(t.schemeRegex.test(s),"scheme at position "+e+" must be a valid scheme"),r.push(i(s)))}o=r.join("|")}const c="(?:"+(o?"(?:"+o+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",l=e.allowRelative?"(?:"+c+"|"+s+")":c;return r.wrap(l+n,o)},r.wrap=function(e,t){return{raw:e="(?=.)(?!https?:/$)".concat(e),regex:new RegExp("^".concat(e,"$")),scheme:t}},r.uriRegex=r.createRegex({}),t.regex=function(e={}){return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?r.createRegex(e):r.uriRegex}},function(e,t,n){"use strict";e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},function(e,t,n){"use strict";e.exports=function(...e){try{return JSON.stringify.apply(null,e)}catch(e){return"[Cannot display object: "+e.message+"]"}}},function(e){e.exports=JSON.parse('{"version":"17.4.0"}')},function(e,t,n){"use strict";const a={};e.exports=function(e){if(!e)return"";let t="";for(let n=0;n<e.length;++n){const i=e.charCodeAt(n);a.isSafe(i)?t+=e[n]:t+=a.escapeHtmlChar(i)}return t},a.escapeHtmlChar=function(e){const t=a.namedHtml[e];if(void 0!==t)return t;if(e>=256)return"&#"+e+";";const n=e.toString(16).padStart(2,"0");return"&#x".concat(n,";")},a.isSafe=function(e){return void 0!==a.safeCharCodes[e]},a.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},a.safeCharCodes=function(){const e={};for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()},function(e,t,n){"use strict";const a={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*\.?[0-9]*){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=class{constructor(e,t={}){if(!t[a.settings]&&t.constants)for(const e in t.constants){const n=t.constants[e];if(null!==n&&!["boolean","number","string"].includes(typeof n))throw new Error("Formula constant ".concat(e," contains invalid ").concat(typeof n," value type"))}this.settings=t[a.settings]?t:Object.assign({[a.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(e)}_parse(e){let n=[],i="",r=0,s=!1;const o=e=>{if(r)throw new Error("Formula missing closing parenthesis");const o=n.length?n[n.length-1]:null;if(s||i||e){if(o&&"reference"===o.type&&")"===e)return o.type="function",o.value=this._subFormula(i,o.value),void(i="");if(")"===e){const e=new t.Parser(i,this.settings);n.push({type:"segment",value:e})}else if(s){if("]"===s)return n.push({type:"reference",value:i}),void(i="");n.push({type:"literal",value:i})}else if(a.operatorCharacters.includes(i))o&&"operator"===o.type&&a.operators.includes(o.value+i)?o.value+=i:n.push({type:"operator",value:i});else if(i.match(a.numberRx))n.push({type:"constant",value:parseFloat(i)});else if(void 0!==this.settings.constants[i])n.push({type:"constant",value:this.settings.constants[i]});else{if(!i.match(a.tokenRx))throw new Error("Formula contains invalid token: ".concat(i));n.push({type:"reference",value:i})}i=""}};for(const t of e)s?t===s?(o(),s=!1):i+=t:r?"("===t?(i+=t,++r):")"===t?(--r,r?i+=t:o(t)):i+=t:t in a.literals?s=a.literals[t]:"("===t?(o(),++r):a.operatorCharacters.includes(t)?(o(),i=t,o()):" "!==t?i+=t:o();o(),n=n.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==n[t-1].type?e:{type:"operator",value:"n"}));let c=!1;for(const e of n){if("operator"===e.type){if(a.operatorsPrefix.includes(e.value))continue;if(!c)throw new Error("Formula contains an operator in invalid position");if(!a.operators.includes(e.value))throw new Error("Formula contains an unknown operator ".concat(e.value))}else if(c)throw new Error("Formula missing expected operator");c=!c}if(!c)throw new Error("Formula contains invalid trailing operator");1===n.length&&["reference","literal","constant"].includes(n[0].type)&&(this.single={type:"reference"===n[0].type?"reference":"value",value:n[0].value}),this._parts=n.map((e=>{if("operator"===e.type)return a.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error("Formula contains invalid reference ".concat(e.value));return this.settings.reference?this.settings.reference(e.value):a.reference(e.value)}))}_subFormula(e,n){const i=this.settings.functions[n];if("function"!=typeof i)throw new Error("Formula contains unknown function ".concat(n));let r=[];if(e){let t="",i=0,s=!1;const o=()=>{if(!t)throw new Error("Formula contains function ".concat(n," with invalid arguments ").concat(e));r.push(t),t=""};for(let n=0;n<e.length;++n){const r=e[n];s?(t+=r,r===s&&(s=!1)):r in a.literals&&!i?(t+=r,s=a.literals[r]):","!==r||i?(t+=r,"("===r?++i:")"===r&&--i):o()}o()}return r=r.map((e=>new t.Parser(e,this.settings))),function(e){const t=[];for(const n of r)t.push(n.evaluate(e));return i.call(e,...t)}}evaluate(e){const t=this._parts.slice();for(let n=t.length-2;n>=0;--n){const i=t[n];if(i&&"operator"===i.type){const r=t[n+1];t.splice(n+1,1);const s=a.evaluate(r,e);t[n]=a.single(i.value,s)}}return a.operatorsOrder.forEach((n=>{for(let i=1;i<t.length-1;)if(n.includes(t[i])){const n=t[i],r=a.evaluate(t[i-1],e),s=a.evaluate(t[i+1],e);t.splice(i,2);const o=a.calculate(n,r,s);t[i-1]=0===o?0:o}else i+=2})),a.evaluate(t[0],e)}},t.Parser.prototype[a.symbol]=!0,a.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},a.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[a.symbol]?e.evaluate(t):e},a.single=function(e,t){if("!"===e)return!t;const n=-t;return 0===n?0:n},a.calculate=function(e,t,n){if("??"===e)return a.exists(t)?t:n;if("string"==typeof t||"string"==typeof n){if("+"===e)return(t=a.exists(t)?t:"")+(a.exists(n)?n:"")}else switch(e){case"^":return Math.pow(t,n);case"*":return t*n;case"/":return t/n;case"%":return t%n;case"+":return t+n;case"-":return t-n}switch(e){case"<":return t<n;case"<=":return t<=n;case">":return t>n;case">=":return t>=n;case"==":return t===n;case"!=":return t!==n;case"&&":return t&&n;case"||":return t||n}return null},a.exists=function(e){return null!=e}},function(e,t){},function(e,t,n){"use strict";const a=n(0),i=n(10),r=n(3),s=n(1),o=n(8),c=n(4),l=n(5),u={};e.exports=r.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:l.toSibling}},args:(e,...t)=>1===t.length&&Array.isArray(t[0])?e.try(...t[0]):e.try(...t),validate(e,t){const{schema:n,error:a,state:r,prefs:s}=t;if(n._flags.match){const t=[];for(let a=0;a<n.$_terms.matches.length;++a){const i=n.$_terms.matches[a],o=r.nest(i.schema,"match.".concat(a));o.snapshot();const c=i.schema.$_validate(e,o,s);c.errors?o.restore():t.push(c.value)}return 0===t.length?{errors:a("alternatives.any")}:"one"===n._flags.match?1===t.length?{value:t[0]}:{errors:a("alternatives.one")}:t.length!==n.$_terms.matches.length?{errors:a("alternatives.all")}:n.$_terms.matches.reduce(((e,t)=>e&&"object"===t.schema.type),!0)?{value:t.reduce(((e,t)=>i(e,t,{mergeArrays:!1})))}:{value:t[t.length-1]}}const o=[];for(let t=0;t<n.$_terms.matches.length;++t){const a=n.$_terms.matches[t];if(a.schema){const n=r.nest(a.schema,"match.".concat(t));n.snapshot();const i=a.schema.$_validate(e,n,s);if(!i.errors)return i;n.restore(),o.push({schema:a.schema,reports:i.errors});continue}const i=a.ref?a.ref.resolve(e,r,s):e,c=a.is?[a]:a.switch;for(let n=0;n<c.length;++n){const o=c[n],{is:l,then:u,otherwise:d}=o,p="match.".concat(t).concat(a.switch?"."+n:"");if(l.$_match(i,r.nest(l,"".concat(p,".is")),s)){if(u)return u.$_validate(e,r.nest(u,"".concat(p,".then")),s)}else if(d)return d.$_validate(e,r.nest(d,"".concat(p,".otherwise")),s)}}return u.errors(o,t)},rules:{conditional:{method(e,t){a(!this._flags._endedSwitch,"Unreachable condition"),a(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),a(void 0===t.break,"Cannot use break option with alternatives conditional");const n=this.clone(),i=o.when(n,e,t),r=i.is?[i]:i.switch;for(const e of r)if(e.then&&e.otherwise){n.$_setFlag("_endedSwitch",!0,{clone:!1});break}return n.$_terms.matches.push(i),n.$_mutateRebuild()}},match:{method(e){if(a(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e)for(const t of this.$_terms.matches)a(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(...e){a(e.length,"Missing alternative schemas"),s.verifyFlat(e,"try"),a(!this._flags._endedSwitch,"Unreachable condition");const t=this.clone();for(const n of e)t.$_terms.matches.push({schema:t.$_compile(n)});return t.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,n)=>"is"!==n.path[0]?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{s.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const n of t.matches){const{schema:t,ref:a,is:i,not:r,then:s,otherwise:o}=n;e=t?e.try(t):a?e.conditional(a,{is:i,then:s,not:r,otherwise:o,switch:n.switch}):e.conditional(i,{then:s,otherwise:o})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),u.errors=function(e,{error:t,state:n}){if(!e.length)return{errors:t("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const a=new Set,i=[];for(const{reports:r,schema:s}of e){if(r.length>1)return u.unmatched(e,t);const o=r[0];if(o instanceof c.Report==0)return u.unmatched(e,t);if(o.state.path.length!==n.path.length){i.push({type:s.type,report:o});continue}if("any.only"===o.code){for(const e of o.local.valids)a.add(e);continue}const[l,d]=o.code.split(".");"base"===d?a.add(l):i.push({type:s.type,report:o})}return i.length?1===i.length?{errors:i[0].report}:u.unmatched(e,t):{errors:t("alternatives.types",{types:[...a]})}},u.unmatched=function(e,t){const n=[];for(const t of e)n.push(...t.reports);return{errors:t("alternatives.match",c.details(n,{override:!1}))}}},function(e,t,n){"use strict";const a=n(0),i=n(2),r=n(11),s=n(10),o=n(16),c=n(1),l=n(8),u=n(4),d=n(18),p=n(19),g=n(9),h=n(35),f=n(5),m=n(20),j=n(36),x=n(21),b={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new h.Ids,this._preferences=null,this._refs=new f.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return a("function"==typeof p.describe,"Manifest functionality disabled"),p.describe(this)}allow(...e){return c.verifyFlat(e,"allow"),this._values(e,"_valids")}alter(e){a(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),a(!this._inRuleset(),"Cannot set alterations inside a ruleset");const t=this.clone();t.$_terms.alterations=t.$_terms.alterations||[];for(const n in e){const i=e[n];a("function"==typeof i,"Alteration adjuster for",n,"must be a function"),t.$_terms.alterations.push({target:n,adjuster:i})}return t.$_temp.ruleset=!1,t}artifact(e){return a(void 0!==e,"Artifact cannot be undefined"),a(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",e)}cast(e){return a(!1===e||"string"==typeof e,"Invalid to value"),a(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}default(e,t){return this._default("default",e,t)}description(e){return a(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return a(e,"Missing error"),a(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}example(e,t={}){return a(void 0!==e,"Missing example"),c.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}external(e,t){return"object"==typeof e&&(a(!t,"Cannot combine options with description"),t=e.description,e=e.method),a("function"==typeof e,"Method must be a function"),a(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(a("string"==typeof e,"id must be a non-empty string"),a(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(...e){return this._values(e,"_invalids")}label(e){return a(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}meta(e){return a(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}note(...e){a(e.length,"Missing notes");for(const t of e)a(t&&"string"==typeof t,"Notes must be non-empty strings");return this._inner("notes",e)}only(e=!0){return a("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){a(e,"Missing preferences"),a(void 0===e.context,"Cannot override context"),a(void 0===e.externals,"Cannot override externals"),a(void 0===e.warnings,"Cannot override warnings"),a(void 0===e.debug,"Cannot override debug"),c.checkPreferences(e);const t=this.clone();return t._preferences=c.preferences(t._preferences,e),t}presence(e){return a(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(e=!0){return this.$_setFlag("result",e?"raw":void 0)}result(e){return a(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}required(){return this.presence("required")}strict(e){const t=this.clone(),n=void 0!==e&&!e;return t._preferences=c.preferences(t._preferences,{convert:n}),t}strip(e=!0){return this.$_setFlag("result",e?"strip":void 0)}tag(...e){a(e.length,"Missing tags");for(const t of e)a(t&&"string"==typeof t,"Tags must be non-empty strings");return this._inner("tags",e)}unit(e){return a(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}valid(...e){c.verifyFlat(e,"valid");const t=this.allow(...e);return t.$_setFlag("only",!!t._valids,{clone:!1}),t}when(e,t){const n=this.clone();n.$_terms.whens||(n.$_terms.whens=[]);const i=l.when(n,e,t);if(!["any","link"].includes(n.type)){const e=i.is?[i]:i.switch;for(const t of e)a(!t.then||"any"===t.then.type||t.then.type===n.type,"Cannot combine",n.type,"with",t.then&&t.then.type),a(!t.otherwise||"any"===t.otherwise.type||t.otherwise.type===n.type,"Cannot combine",n.type,"with",t.otherwise&&t.otherwise.type)}return n.$_terms.whens.push(i),n.$_mutateRebuild()}cache(e){a(!this._inRuleset(),"Cannot set caching inside a ruleset"),a(!this._cache,"Cannot override schema cache"),a(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const t=this.clone();return t._cache=e||o.provider.provision(),t.$_temp.ruleset=!1,t}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){a(c.isSchema(e),"Invalid schema object"),a("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),a(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),a(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");let t=this.clone();if("any"===this.type&&"any"!==e.type){const n=e.clone();for(const e of Object.keys(t))"type"!==e&&(n[e]=t[e]);t=n}t._ids.concat(e._ids),t._refs.register(e,f.toSibling),t._preferences=t._preferences?c.preferences(t._preferences,e._preferences):e._preferences,t._valids=x.merge(t._valids,e._valids,e._invalids),t._invalids=x.merge(t._invalids,e._invalids,e._valids);for(const n of e._singleRules.keys())t._singleRules.has(n)&&(t._rules=t._rules.filter((e=>e.keep||e.name!==n)),t._singleRules.delete(n));for(const n of e._rules)e._definition.rules[n.method].multi||t._singleRules.set(n.name,n),t._rules.push(n);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);const n=Object.assign({},e._flags);delete n.empty,s(t._flags,n)}else if(e._flags.empty){t._flags.empty=e._flags.empty;const n=Object.assign({},e._flags);delete n.empty,s(t._flags,n)}else s(t._flags,e._flags);for(const n in e.$_terms){const a=e.$_terms[n];a?t.$_terms[n]?t.$_terms[n]=t.$_terms[n].concat(a):t.$_terms[n]=a.slice():t.$_terms[n]||(t.$_terms[n]=a)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}extend(e){return a(!e.base,"Cannot extend type with another base"),d.type(this,e)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(e,t){a(!this._inRuleset(),"Cannot fork inside a ruleset");let n=this;for(let a of[].concat(e))a=Array.isArray(a)?a:a.split("."),n=n._ids.fork(a,t,n);return n.$_temp.ruleset=!1,n}rule(e){const t=this._definition;c.assertOptions(e,Object.keys(t.modifiers)),a(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const n=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;a(n>=0&&n<this._rules.length,"Cannot apply rules to empty ruleset");const r=this.clone();for(let s=n;s<r._rules.length;++s){const n=r._rules[s],o=i(n);for(const i in e)t.modifiers[i](o,e[i]),a(o.name===n.name,"Cannot change rule name");r._rules[s]=o,r._singleRules.get(o.name)===n&&r._singleRules.set(o.name,o)}return r.$_temp.ruleset=!1,r.$_mutateRebuild()}get ruleset(){a(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const e=this.clone();return e.$_temp.ruleset=e._rules.length,e}get $(){return this.ruleset}tailor(e){e=[].concat(e),a(!this._inRuleset(),"Cannot tailor inside a ruleset");let t=this;if(this.$_terms.alterations)for(const{target:n,adjuster:i}of this.$_terms.alterations)e.includes(n)&&(t=i(t),a(c.isSchema(t),"Alteration adjuster for",n,"failed to return a schema object"));return t=t.$_modify({each:t=>t.tailor(e),ref:!1}),t.$_temp.ruleset=!1,t.$_mutateRebuild()}tracer(){return m.location?m.location(this):this}validate(e,t){return j.entry(e,this,t)}validateAsync(e,t){return j.entryAsync(e,this,t)}$_addRule(e){"string"==typeof e&&(e={name:e}),a(e&&"object"==typeof e,"Invalid options"),a(e.name&&"string"==typeof e.name,"Invalid rule name");for(const t in e)a("_"!==t[0],"Cannot set private rule properties");const t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;const n=this._definition.rules[t.method],i=t.args;a(n,"Unknown rule",t.method);const r=this.clone();if(i){a(1===Object.keys(i).length||Object.keys(i).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name);for(const e in i){let s=i[e];if(void 0!==s){if(n.argsByName){const o=n.argsByName.get(e);if(o.ref&&c.isResolvable(s))t._resolve.push(e),r.$_mutateRegister(s);else if(o.normalize&&(s=o.normalize(s),i[e]=s),o.assert){const t=c.validateArg(s,e,o);a(!t,t,"or reference")}}i[e]=s}else delete i[e]}}return n.multi||(r._ruleRemove(t.name,{clone:!1}),r._singleRules.set(t.name,t)),!1===r.$_temp.ruleset&&(r.$_temp.ruleset=null),n.priority?r._rules.unshift(t):r._rules.push(t),r}$_compile(e,t){return l.schema(this.$_root,e,t)}$_createError(e,t,n,a,i,r={}){const s=!1!==r.flags?this._flags:{},o=r.messages?g.merge(this._definition.messages,r.messages):this._definition.messages;return new u.Report(e,t,n,s,o,a,i)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,n,a){(n=Object.assign({},n)).abortEarly=!0,n._externals=!1,t.snapshot();const i=!j.validate(e,this,t,n,a).errors;return t.restore(),i}$_modify(e){return c.assertOptions(e,["each","once","ref","schema"]),h.schema(this,e)||this}$_mutateRebuild(){return a(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,{source:t,name:n,path:a,key:i})=>{const r=this._definition[t][n]&&this._definition[t][n].register;!1!==r&&this.$_mutateRegister(e,{family:r,key:i})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e,{family:t,key:n}={}){this._refs.register(e,t),this._ids.register(e,{key:n})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t,n={}){a("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const i=this._definition.flags[e]||{};if(r(t,i.default)&&(t=void 0),r(t,this._flags[e]))return this;const s=!1!==n.clone?this.clone():this;return void 0!==t?(s._flags[e]=t,s.$_mutateRegister(t)):delete s._flags[e],"_"!==e[0]&&(s.$_temp.ruleset=!1),s}$_parent(e,...t){return this[e][c.symbols.parent].call(this,...t)}$_validate(e,t,n){return j.validate(e,this,t,n)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=i(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const n in t){const a=t[n];e.$_terms[n]=a.init}return e.$_mutateRebuild()}_default(e,t,n={}){return c.assertOptions(n,"literal"),a(void 0!==t,"Missing",e,"value"),a("function"==typeof t||!n.literal,"Only function value supports literal option"),"function"==typeof t&&n.literal&&(t={[c.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_generate(e,t,n){if(!this.$_terms.whens)return{schema:this};const a=[],i=[];for(let r=0;r<this.$_terms.whens.length;++r){const s=this.$_terms.whens[r];if(s.concat){a.push(s.concat),i.push("".concat(r,".concat"));continue}const o=s.ref?s.ref.resolve(e,t,n):e,c=s.is?[s]:s.switch,l=i.length;for(let l=0;l<c.length;++l){const{is:u,then:d,otherwise:p}=c[l],g="".concat(r).concat(s.switch?"."+l:"");if(u.$_match(o,t.nest(u,"".concat(g,".is")),n)){if(d){const r=t.localize([...t.path,"".concat(g,".then")],t.ancestors,t.schemas),{schema:s,id:o}=d._generate(e,r,n);a.push(s),i.push("".concat(g,".then").concat(o?"(".concat(o,")"):""));break}}else if(p){const r=t.localize([...t.path,"".concat(g,".otherwise")],t.ancestors,t.schemas),{schema:s,id:o}=p._generate(e,r,n);a.push(s),i.push("".concat(g,".otherwise").concat(o?"(".concat(o,")"):""));break}}if(s.break&&i.length>l)break}const r=i.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",r),!r)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[r])return{schema:this.$_temp.whens[r],id:r};let s=this;this._definition.generate&&(s=this._definition.generate(this,e,t,n));for(const e of a)s=s.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(s,[this,...a]),this.$_temp.whens[r]=s,{schema:s,id:r}}_inner(e,t,n={}){a(!this._inRuleset(),"Cannot set ".concat(e," inside a ruleset"));const i=this.clone();return i.$_terms[e]&&!n.override||(i.$_terms[e]=[]),n.single?i.$_terms[e].push(t):i.$_terms[e].push(...t),i.$_temp.ruleset=!1,i}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e,t={}){if(!this._singleRules.has(e))return this;const n=!1!==t.clone?this.clone():this;n._singleRules.delete(e);const a=[];for(let t=0;t<n._rules.length;++t){const i=n._rules[t];i.name!==e||i.keep?a.push(i):n._inRuleset()&&t<n.$_temp.ruleset&&--n.$_temp.ruleset}return n._rules=a,n}_values(e,t){c.verifyFlat(e,t.slice(1,-1));const n=this.clone(),i=e[0]===c.symbols.override;if(i&&(e=e.slice(1)),!n[t]&&e.length?n[t]=new x:i&&(n[t]=e.length?new x:null,n.$_mutateRebuild()),!n[t])return n;i&&n[t].override();for(const i of e){a(void 0!==i,"Cannot call allow/valid/invalid with undefined"),a(i!==c.symbols.override,"Override must be the first value");const e="_invalids"===t?"_valids":"_invalids";n[e]&&(n[e].remove(i),n[e].length||(a("_valids"===t||!n._flags.only,"Setting invalid value",i,"leaves schema rejecting all values due to previous valid rule"),n[e]=null)),n[t].add(i,n._refs)}return n}}};b.Base.prototype[c.symbols.any]={version:c.version,compile:l.compile,root:"$_root"},b.Base.prototype.isImmutable=!0,b.Base.prototype.deny=b.Base.prototype.invalid,b.Base.prototype.disallow=b.Base.prototype.invalid,b.Base.prototype.equal=b.Base.prototype.valid,b.Base.prototype.exist=b.Base.prototype.required,b.Base.prototype.not=b.Base.prototype.invalid,b.Base.prototype.options=b.Base.prototype.prefs,b.Base.prototype.preferences=b.Base.prototype.prefs,e.exports=new b.Base},function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=n(0),o=n(1),c=n(5),l={};t.Ids=l.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new l.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[t,n]of e._byId.entries())s(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,n);for(const[t,n]of e._byKey.entries())s(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,n)}fork(e,t,n){const a=this._collect(e);a.push({schema:n});const i=a.shift();let r={id:i.id,schema:t(i.schema)};s(o.isSchema(r.schema),"adjuster function failed to return a joi schema type");for(const e of a)r={id:e.id,schema:l.fork(e.schema,r.id,r.schema)};return r.schema}labels(e,t=[]){const n=e[0],a=this._get(n);if(!a)return[...t,...e].join(".");const i=e.slice(1);return t=[...t,a.schema._flags.label||n],i.length?a.schema._ids.labels(i,t):t.join(".")}reach(e,t=[]){const n=e[0],a=this._get(n);s(a,"Schema does not contain path",[...t,...e].join("."));const i=e.slice(1);return i.length?a.schema._ids.reach(i,[...t,n]):a.schema}register(e,{key:t}={}){if(!e||!o.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const n=e._flags.id;if(n){const t=this._byId.get(n);s(!t||t.schema===e,"Cannot add different schemas with the same id:",n),s(!this._byKey.has(n),"Schema id conflicts with existing key:",n),this._byId.set(n,{schema:e,id:n})}t&&(s(!this._byKey.has(t),"Schema already contains key:",t),s(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e,t=[],n=[]){const a=e[0],i=this._get(a);s(i,"Schema does not contain path",[...t,...e].join(".")),n=[i,...n];const r=e.slice(1);return r.length?i.schema._ids._collect(r,[...t,a],n):n}_get(e){return this._byId.get(e)||this._byKey.get(e)}},l.fork=function(e,n,a){const i=t.schema(e,{each:(e,{key:t})=>{if(n===(e._flags.id||t))return a},ref:!1});return i?i.$_mutateRebuild():e},t.schema=function(e,t){let n;for(const a in e._flags){if("_"===a[0])continue;const i=l.scan(e._flags[a],{source:"flags",name:a},t);void 0!==i&&(n=n||e.clone(),n._flags[a]=i)}for(let a=0;a<e._rules.length;++a){const i=e._rules[a],r=l.scan(i.args,{source:"rules",name:i.name},t);if(void 0!==r){n=n||e.clone();const t=Object.assign({},i);t.args=r,n._rules[a]=t,n._singleRules.get(i.name)===i&&n._singleRules.set(i.name,t)}}for(const a in e.$_terms){if("_"===a[0])continue;const i=l.scan(e.$_terms[a],{source:"terms",name:a},t);void 0!==i&&(n=n||e.clone(),n.$_terms[a]=i)}return n},l.scan=function(e,t,n,a,r){const s=a||[];if(null===e||"object"!=typeof e)return;let u;if(Array.isArray(e)){for(let a=0;a<e.length;++a){const i="terms"===t.source&&"keys"===t.name&&e[a].key,r=l.scan(e[a],t,n,[a,...s],i);void 0!==r&&(u=u||e.slice(),u[a]=r)}return u}if(!1!==n.schema&&o.isSchema(e)||!1!==n.ref&&c.isRef(e)){const a=n.each(e,i(i({},t),{},{path:s,key:r}));if(a===e)return;return a}for(const a in e){if("_"===a[0])continue;const i=l.scan(e[a],t,n,[a,...s],r);void 0!==i&&(u=u||Object.assign({},e),u[a]=i)}return u}},function(e,t,n){"use strict";const a=n(0),i=n(2),r=n(37),s=n(6),o=n(1),c=n(4),l=n(38),u={result:Symbol("result")};t.entry=function(e,t,n){let i=o.defaults;n&&(a(void 0===n.warnings,"Cannot override warnings preference in synchronous validation"),a(void 0===n.artifacts,"Cannot override artifacts preference in synchronous validation"),i=o.preferences(o.defaults,n));const r=u.entry(e,t,i);a(!r.mainstay.externals.length,"Schema with external rules must use validateAsync()");const s={value:r.value};return r.error&&(s.error=r.error),r.mainstay.warnings.length&&(s.warning=c.details(r.mainstay.warnings)),r.mainstay.debug&&(s.debug=r.mainstay.debug),r.mainstay.artifacts&&(s.artifacts=r.mainstay.artifacts),s},t.entryAsync=async function(e,t,n){let a=o.defaults;n&&(a=o.preferences(o.defaults,n));const i=u.entry(e,t,a),r=i.mainstay;if(i.error)throw r.debug&&(i.error.debug=r.debug),i.error;if(r.externals.length){let t=i.value;for(const{method:a,path:i,label:o}of r.externals){let r,c,l=t;i.length&&(r=i[i.length-1],c=s(t,i.slice(0,-1)),l=c[r]);try{const e=await a(l,{prefs:n});if(void 0===e||e===l)continue;c?c[r]=e:t=e}catch(e){throw e.message+=" (".concat(o,")"),e}}i.value=t}if(!a.warnings&&!a.debug&&!a.artifacts)return i.value;const l={value:i.value};return r.warnings.length&&(l.warning=c.details(r.warnings)),r.debug&&(l.debug=r.debug),r.artifacts&&(l.artifacts=r.artifacts),l},u.entry=function(e,n,a){const{tracer:i,cleanup:r}=u.tracer(n,a),s={externals:[],warnings:[],tracer:i,debug:a.debug?[]:null,links:n._ids._schemaChain?new Map:null},o=n._ids._schemaChain?[{schema:n}]:null,d=new l([],[],{mainstay:s,schemas:o}),p=t.validate(e,n,d,a);r&&n.$_root.untrace();const g=c.process(p.errors,e,a);return{value:p.value,error:g,mainstay:s}},u.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(a(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:u.ignore}},t.validate=function(e,t,n,a,i={}){if(t.$_terms.whens&&(t=t._generate(e,n,a).schema),t._preferences&&(a=u.prefs(t,a)),t._cache&&a.cache){const a=t._cache.get(e);if(n.mainstay.tracer.debug(n,"validate","cached",!!a),a)return a}const r=(i,r,s)=>t.$_createError(i,e,r,s||n,a),s={original:e,prefs:a,schema:t,state:n,error:r,errorsArray:u.errorsArray,warn:(e,t,a)=>n.mainstay.warnings.push(r(e,t,a)),message:(i,r)=>t.$_createError("custom",e,r,n,a,{messages:i})};n.mainstay.tracer.entry(t,n);const c=t._definition;if(c.prepare&&void 0!==e&&a.convert){const t=c.prepare(e,s);if(t){if(n.mainstay.tracer.value(n,"prepare",e,t.value),t.errors)return u.finalize(t.value,[].concat(t.errors),s);e=t.value}}if(c.coerce&&void 0!==e&&a.convert&&(!c.coerce.from||c.coerce.from.includes(typeof e))){const t=c.coerce.method(e,s);if(t){if(n.mainstay.tracer.value(n,"coerced",e,t.value),t.errors)return u.finalize(t.value,[].concat(t.errors),s);e=t.value}}const l=t._flags.empty;l&&l.$_match(u.trim(e,t),n.nest(l),o.defaults)&&(n.mainstay.tracer.value(n,"empty",e,void 0),e=void 0);const d=i.presence||t._flags.presence||(t._flags._endedSwitch?null:a.presence);if(void 0===e){if("forbidden"===d)return u.finalize(e,null,s);if("required"===d)return u.finalize(e,[t.$_createError("any.required",e,null,n,a)],s);if("optional"===d){if(t._flags.default!==o.symbols.deepDefault)return u.finalize(e,null,s);n.mainstay.tracer.value(n,"default",e,{}),e={}}}else if("forbidden"===d)return u.finalize(e,[t.$_createError("any.unknown",e,null,n,a)],s);const p=[];if(t._valids){const i=t._valids.get(e,n,a,t._flags.insensitive);if(i)return a.convert&&(n.mainstay.tracer.value(n,"valids",e,i.value),e=i.value),n.mainstay.tracer.filter(t,n,"valid",i),u.finalize(e,null,s);if(t._flags.only){const i=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},n,a);if(a.abortEarly)return u.finalize(e,[i],s);p.push(i)}}if(t._invalids){const i=t._invalids.get(e,n,a,t._flags.insensitive);if(i){n.mainstay.tracer.filter(t,n,"invalid",i);const r=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},n,a);if(a.abortEarly)return u.finalize(e,[r],s);p.push(r)}}if(c.validate){const t=c.validate(e,s);if(t&&(n.mainstay.tracer.value(n,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return p.push(t.errors),u.finalize(e,p,s);if(t.errors.length)return p.push(...t.errors),u.finalize(e,p,s)}}return t._rules.length?u.rules(e,p,s):u.finalize(e,p,s)},u.rules=function(e,t,n){const{schema:a,state:i,prefs:r}=n;for(const s of a._rules){const c=a._definition.rules[s.method];if(c.convert&&r.convert){i.mainstay.tracer.log(a,i,"rule",s.name,"full");continue}let l,d=s.args;if(s._resolve.length){d=Object.assign({},d);for(const t of s._resolve){const n=c.argsByName.get(t),s=d[t].resolve(e,i,r),u=n.normalize?n.normalize(s):s,p=o.validateArg(u,null,n);if(p){l=a.$_createError("any.ref",s,{arg:t,ref:d[t],reason:p},i,r);break}d[t]=u}}l=l||c.validate(e,n,d,s);const p=u.rule(l,s);if(p.errors){if(i.mainstay.tracer.log(a,i,"rule",s.name,"error"),s.warn){i.mainstay.warnings.push(...p.errors);continue}if(r.abortEarly)return u.finalize(e,p.errors,n);t.push(...p.errors)}else i.mainstay.tracer.log(a,i,"rule",s.name,"pass"),i.mainstay.tracer.value(i,"rule",e,p.value,s.name),e=p.value}return u.finalize(e,t,n)},u.rule=function(e,t){return e instanceof c.Report?(u.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[o.symbols.errors]?(e.forEach((e=>u.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},u.error=function(e,t){return t.message&&e._setTemplate(t.message),e},u.finalize=function(e,t,n){t=t||[];const{schema:i,state:r,prefs:s}=n;if(t.length){const a=u.default("failover",void 0,t,n);void 0!==a&&(r.mainstay.tracer.value(r,"failover",e,a),e=a,t=[])}if(t.length&&i._flags.error)if("function"==typeof i._flags.error){t=i._flags.error(t),Array.isArray(t)||(t=[t]);for(const e of t)a(e instanceof Error||e instanceof c.Report,"error() must return an Error object")}else t=[i._flags.error];if(void 0===e){const a=u.default("default",e,t,n);r.mainstay.tracer.value(r,"default",e,a),e=a}if(i._flags.cast&&void 0!==e){const t=i._definition.cast[i._flags.cast];if(t.from(e)){const a=t.to(e,n);r.mainstay.tracer.value(r,"cast",e,a,i._flags.cast),e=a}}if(i.$_terms.externals&&s.externals&&!1!==s._externals)for(const{method:e}of i.$_terms.externals)r.mainstay.externals.push({method:e,path:r.path,label:c.label(i._flags,r,s)});const o={value:e,errors:t.length?t:null};return i._flags.result&&(o.value="strip"===i._flags.result?void 0:n.original,r.mainstay.tracer.value(r,i._flags.result,e,o.value),r.shadow(e,i._flags.result)),i._cache&&!1!==s.cache&&!i._refs.length&&i._cache.set(n.original,o),void 0===e||o.errors||void 0===i._flags.artifact||(r.mainstay.artifacts=r.mainstay.artifacts||new Map,r.mainstay.artifacts.has(i._flags.artifact)||r.mainstay.artifacts.set(i._flags.artifact,[]),r.mainstay.artifacts.get(i._flags.artifact).push(r.path)),o},u.prefs=function(e,t){const n=t===o.defaults;return n&&e._preferences[o.symbols.prefs]?e._preferences[o.symbols.prefs]:(t=o.preferences(t,e._preferences),n&&(e._preferences[o.symbols.prefs]=t),t)},u.default=function(e,t,n,a){const{schema:r,state:s,prefs:c}=a,l=r._flags[e];if(c.noDefaults||void 0===l)return t;if(s.mainstay.tracer.log(r,s,"rule",e,"full"),!l)return l;if("function"==typeof l){const o=l.length?[i(s.ancestors[0]),a]:[];try{return l(...o)}catch(t){return void n.push(r.$_createError("any.".concat(e),null,{error:t},s,c))}}return"object"!=typeof l?l:l[o.symbols.literal]?l.literal:o.isResolvable(l)?l.resolve(t,s,c):i(l)},u.trim=function(e,t){if("string"!=typeof e)return e;const n=t.$_getRule("trim");return n&&n.args.enabled?e.trim():e},u.ignore={active:!1,debug:r,entry:r,filter:r,log:r,resolve:r,value:r},u.errorsArray=function(){const e=[];return e[o.symbols.errors]=!0,e}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";const a=n(2),i=n(6),r=n(1),s={value:Symbol("value")};e.exports=s.State=class{constructor(e,t,n){this.path=e,this.ancestors=t,this.mainstay=n.mainstay,this.schemas=n.schemas,this.debug=null}localize(e,t=null,n=null){const a=new s.State(e,t,this);return n&&a.schemas&&(a.schemas=[s.schemas(n),...a.schemas]),a}nest(e,t){const n=new s.State(this.path,this.ancestors,this);return n.schemas=n.schemas&&[s.schemas(e),...n.schemas],n.debug=t,n}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new s.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=a(this.mainstay.shadow.node(this.path)))}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0)}},s.schemas=function(e){return r.isSchema(e)?{schema:e}:e},s.Shadow=class{constructor(){this._values=null}set(e,t,n){if(!e.length)return;if("strip"===n&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let a=this._values;for(let t=0;t<e.length;++t){const n=e[t];let i=a.get(n);i||(i=new Map,a.set(n,i)),a=i}a[s.value]=t}get(e){const t=this.node(e);if(t)return t[s.value]}node(e){if(this._values)return i(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;const n=e.slice(0,-1),a=e[e.length-1],r=i(this._values,n,{iterables:!0});t?r.set(a,t):r&&r.delete(a)}}},function(e,t,n){"use strict";const a=n(0),i=n(11),r=n(6),s=n(3),o=n(1),c=n(8),l={};e.exports=s.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,{schema:t,state:n,prefs:a}){if(!Array.isArray(e))return;const i=t.$_getRule("sort");return i?l.sort(t,e,i.args.options,n,a):void 0}},validate(e,{schema:t,error:n}){if(!Array.isArray(e)){if(t._flags.single){const t=[e];return t[o.symbols.arraySingle]=!0,{value:t}}return{errors:n("array.base")}}if(t.$_getRule("items")||t.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,{state:t,prefs:n,error:a},{schema:i}){const r=[e,...t.ancestors];for(let a=0;a<e.length;++a){const s=t.localize([...t.path,a],r,i);if(i.$_match(e[a],s,n))return e}const s=i._flags.label;return s?a("array.hasKnown",{patternLabel:s}):a("array.hasUnknown",null)},multi:!0},items:{method(...e){o.verifyFlat(e,"items");const t=this.$_addRule("items");for(let n=0;n<e.length;++n){const a=o.tryWithPath((()=>this.$_compile(e[n])),n,{append:!0});t.$_terms.items.push(a)}return t.$_mutateRebuild()},validate(e,{schema:t,error:n,state:a,prefs:i,errorsArray:r}){const s=t.$_terms._requireds.slice(),c=t.$_terms.ordered.slice(),u=[...t.$_terms._inclusions,...s],d=!e[o.symbols.arraySingle];delete e[o.symbols.arraySingle];const p=r();let g=e.length;for(let r=0;r<g;++r){const o=e[r];let h=!1,f=!1;const m=d?r:new Number(r),j=[...a.path,m];if(!t._flags.sparse&&void 0===o){if(p.push(n("array.sparse",{key:m,path:j,pos:r,value:void 0},a.localize(j))),i.abortEarly)return p;c.shift();continue}const x=[e,...a.ancestors];for(const e of t.$_terms._exclusions)if(e.$_match(o,a.localize(j,x,e),i,{presence:"ignore"})){if(p.push(n("array.excludes",{pos:r,value:o},a.localize(j))),i.abortEarly)return p;h=!0,c.shift();break}if(h)continue;if(t.$_terms.ordered.length){if(c.length){const s=c.shift(),u=s.$_validate(o,a.localize(j,x,s),i);if(u.errors){if(p.push(...u.errors),i.abortEarly)return p}else if("strip"===s._flags.result)l.fastSplice(e,r),--r,--g;else{if(!t._flags.sparse&&void 0===u.value){if(p.push(n("array.sparse",{key:m,path:j,pos:r,value:void 0},a.localize(j))),i.abortEarly)return p;continue}e[r]=u.value}continue}if(!t.$_terms.items.length){if(p.push(n("array.orderedLength",{pos:r,limit:t.$_terms.ordered.length})),i.abortEarly)return p;break}}const b=[];let y=s.length;for(let c=0;c<y;++c){const u=a.localize(j,x,s[c]);u.snapshot();const d=s[c].$_validate(o,u,i);if(b[c]=d,!d.errors){if(e[r]=d.value,f=!0,l.fastSplice(s,c),--c,--y,!t._flags.sparse&&void 0===d.value&&(p.push(n("array.sparse",{key:m,path:j,pos:r,value:void 0},a.localize(j))),i.abortEarly))return p;break}u.restore()}if(f)continue;const M=i.stripUnknown&&!!i.stripUnknown.arrays||!1;y=u.length;for(const c of u){let u;const d=s.indexOf(c);if(-1!==d)u=b[d];else{const s=a.localize(j,x,c);if(s.snapshot(),u=c.$_validate(o,s,i),!u.errors){"strip"===c._flags.result?(l.fastSplice(e,r),--r,--g):t._flags.sparse||void 0!==u.value?e[r]=u.value:(p.push(n("array.sparse",{key:m,path:j,pos:r,value:void 0},a.localize(j))),h=!0),f=!0;break}s.restore()}if(1===y){if(M){l.fastSplice(e,r),--r,--g,f=!0;break}if(p.push(...u.errors),i.abortEarly)return p;h=!0;break}}if(!h&&t.$_terms._inclusions.length&&!f){if(M){l.fastSplice(e,r),--r,--g;continue}if(p.push(n("array.includes",{pos:r,value:o},a.localize(j))),i.abortEarly)return p}}return s.length&&l.fillMissedErrors(t,p,s,e,a,i),c.length&&(l.fillOrderedErrors(t,p,c,e,a,i),p.length||l.fillDefault(c,e,a,i)),p.length?p:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:n},{name:a,operator:i,args:r})=>o.compare(e.length,n,i)?e:t.error("array."+a,{limit:r.limit,value:e}),args:[{name:"limit",ref:!0,assert:o.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(...e){o.verifyFlat(e,"ordered");const t=this.$_addRule("items");for(let n=0;n<e.length;++n){const a=o.tryWithPath((()=>this.$_compile(e[n])),n,{append:!0});l.validateSingle(a,t),t.$_mutateRegister(a),t.$_terms.ordered.push(a)}return t.$_mutateRebuild()}},single:{method(e){const t=void 0===e||!!e;return a(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(e={}){o.assertOptions(e,["by","order"]);const t={order:e.order||"ascending"};return e.by&&(t.by=c.ref(e.by,{ancestor:0}),a(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,{error:t,state:n,prefs:a,schema:i},{options:r}){const{value:s,errors:o}=l.sort(i,e,r,n,a);if(o)return o;for(let n=0;n<e.length;++n)if(e[n]!==s[n])return t("array.sort",{order:r.order,by:r.by?r.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e,t={}){a(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),o.assertOptions(t,["ignoreUndefined","separator"]);const n={name:"unique",args:{options:t,comparator:e}};if(e)if("string"==typeof e){const a=o.default(t.separator,".");n.path=a?e.split(a):[e]}else n.comparator=e;return this.$_addRule(n)},validate(e,{state:t,error:n,schema:s},{comparator:o,options:c},{comparator:l,path:u}){const d={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},p=l||i,g=c.ignoreUndefined;for(let i=0;i<e.length;++i){const s=u?r(e[i],u):e[i],c=l?d.custom:d[typeof s];if(a(c,"Failed to find unique map container for type",typeof s),c instanceof Map){const a=c.entries();let r;for(;!(r=a.next()).done;)if(p(r.value[0],s)){const a=t.localize([...t.path,i],[e,...t.ancestors]),s={pos:i,value:e[i],dupePos:r.value[1],dupeValue:e[r.value[1]]};return u&&(s.path=o),n("array.unique",s,a)}c.set(s,i)}else{if((!g||void 0!==s)&&void 0!==c[s]){const a={pos:i,value:e[i],dupePos:c[s],dupeValue:e[c[s]]};return u&&(a.path=o),n("array.unique",a,t.localize([...t.path,i],[e,...t.ancestors]))}c[s]=i}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)l.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)l.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),l.fillMissedErrors=function(e,t,n,a,i,r){const s=[];let o=0;for(const e of n){const t=e._flags.label;t?s.push(t):++o}s.length?o?t.push(e.$_createError("array.includesRequiredBoth",a,{knownMisses:s,unknownMisses:o},i,r)):t.push(e.$_createError("array.includesRequiredKnowns",a,{knownMisses:s},i,r)):t.push(e.$_createError("array.includesRequiredUnknowns",a,{unknownMisses:o},i,r))},l.fillOrderedErrors=function(e,t,n,a,i,r){const s=[];for(const e of n)"required"===e._flags.presence&&s.push(e);s.length&&l.fillMissedErrors(e,t,s,a,i,r)},l.fillDefault=function(e,t,n,a){const i=[];let r=!0;for(let s=e.length-1;s>=0;--s){const o=e[s],c=[t,...n.ancestors],l=o.$_validate(void 0,n.localize(n.path,c,o),a).value;if(r){if(void 0===l)continue;r=!1}i.unshift(l)}i.length&&t.push(...i)},l.fastSplice=function(e,t){let n=t;for(;n<e.length;)e[n++]=e[n];--e.length},l.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(a(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},l.sort=function(e,t,n,a,i){const r="ascending"===n.order?1:-1,s=-1*r,o=r,c=(c,u)=>{let d=l.compare(c,u,s,o);if(null!==d)return d;if(n.by&&(c=n.by.resolve(c,a,i),u=n.by.resolve(u,a,i)),d=l.compare(c,u,s,o),null!==d)return d;const p=typeof c;if(p!==typeof u)throw e.$_createError("array.sort.mismatching",t,null,a,i);if("number"!==p&&"string"!==p)throw e.$_createError("array.sort.unsupported",t,{type:p},a,i);return"number"===p?(c-u)*r:c<u?s:o};try{return{value:t.slice().sort(c)}}catch(e){return{errors:e}}},l.compare=function(e,t,n,a){return e===t?0:void 0===e?1:void 0===t?-1:null===e?a:null===t?n:null}},function(e,t,n){"use strict";const a=n(0),i=n(3),r=n(1),s=n(21),o={isBool:function(e){return"boolean"==typeof e}};e.exports=i.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,{schema:t}){if("boolean"!=typeof e){if("string"==typeof e){const n=t._flags.sensitive?e:e.toLowerCase();e="true"===n||"false"!==n&&e}return"boolean"!=typeof e&&(e=t.$_terms.truthy&&t.$_terms.truthy.has(e,null,null,!t._flags.sensitive)||(!t.$_terms.falsy||!t.$_terms.falsy.has(e,null,null,!t._flags.sensitive))&&e),{value:e}}},validate(e,{error:t}){if("boolean"!=typeof e)return{value:e,errors:t("boolean.base")}},rules:{truthy:{method(...e){r.verifyFlat(e,"truthy");const t=this.clone();t.$_terms.truthy=t.$_terms.truthy||new s;for(let n=0;n<e.length;++n){const i=e[n];a(void 0!==i,"Cannot call truthy with undefined"),t.$_terms.truthy.add(i)}return t}},falsy:{method(...e){r.verifyFlat(e,"falsy");const t=this.clone();t.$_terms.falsy=t.$_terms.falsy||new s;for(let n=0;n<e.length;++n){const i=e[n];a(void 0!==i,"Cannot call falsy with undefined"),t.$_terms.falsy.add(i)}return t}},sensitive:{method(e=!0){return this.$_setFlag("sensitive",e)}}},cast:{number:{from:o.isBool,to:(e,t)=>e?1:0},string:{from:o.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},function(e,t,n){"use strict";const a=n(0),i=n(3),r=n(1),s=n(7),o={isDate:function(e){return e instanceof Date}};e.exports=i.extend({type:"date",coerce:{from:["number","string"],method:(e,{schema:t})=>({value:o.parse(e,t._flags.format)||e})},validate(e,{schema:t,error:n,prefs:a}){if(e instanceof Date&&!isNaN(e.getTime()))return;const i=t._flags.format;return a.convert&&i&&"string"==typeof e?{value:e,errors:n("date.format",{format:i})}:{value:e,errors:n("date.base")}},rules:{compare:{method:!1,validate(e,t,{date:n},{name:a,operator:i,args:s}){const o="now"===n?Date.now():n.getTime();return r.compare(e.getTime(),o,i)?e:t.error("date."+a,{limit:s.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:o.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(e){return a(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(e="javascript"){return a(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:o.isDate,to:(e,t)=>e.getTime()},string:{from:o.isDate,to:(e,{prefs:t})=>s.date(e,t)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),o.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return r.isIsoDate(e)?o.date(e.toString()):null;const n=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return o.date(1*e);if("unix"===t)return o.date(1e3*e);if("string"==typeof n)return null}return o.date(e)},o.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t}},function(e,t,n){"use strict";const a=n(0),i=n(22);e.exports=i.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return a(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate:(e,t,{n:n})=>e.length===n?e:t.error("function.arity",{n:n})},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(e){return a(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate:(e,t,{n:n})=>e.length>=n?e:t.error("function.minArity",{n:n})},maxArity:{method(e){return a(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate:(e,t,{n:n})=>e.length<=n?e:t.error("function.maxArity",{n:n})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},function(e,t,n){"use strict";const a=n(0),i=n(2),r=n(10),s=n(6),o={};e.exports=function(e,t,n={}){if(a(e&&"object"==typeof e,"Invalid defaults value: must be an object"),a(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),a("object"==typeof n,"Invalid options: must be an object"),!t)return null;if(n.shallow)return o.applyToDefaultsWithShallow(e,t,n);const s=i(e);if(!0===t)return s;const c=void 0!==n.nullOverride&&n.nullOverride;return r(s,t,{nullOverride:c,mergeArrays:!1})},o.applyToDefaultsWithShallow=function(e,t,n){const c=n.shallow;a(Array.isArray(c),"Invalid keys");const l=new Map,u=!0===t?null:new Set;for(let n of c){n=Array.isArray(n)?n:n.split(".");const a=s(e,n);a&&"object"==typeof a?l.set(a,u&&s(t,n)||a):u&&u.add(n)}const d=i(e,{},l);if(!u)return d;for(const e of u)o.reachCopy(d,t,e);const p=void 0!==n.nullOverride&&n.nullOverride;return r(d,t,{nullOverride:p,mergeArrays:!1})},o.reachCopy=function(e,t,n){for(const e of n){if(!(e in t))return;const n=t[e];if("object"!=typeof n||null===n)return;t=n}const a=t;let i=e;for(let e=0;e<n.length-1;++e){const t=n[e];"object"!=typeof i[t]&&(i[t]={}),i=i[t]}i[n[n.length-1]]=a}},function(e,t,n){"use strict";const a=n(0),i={};t.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const n=[].concat((t=t||{}).before||[]),i=[].concat(t.after||[]),r=t.group||"?",s=t.sort||0;a(!n.includes(r),"Item cannot come before itself: ".concat(r)),a(!n.includes("?"),"Item cannot come before unassociated items"),a(!i.includes(r),"Item cannot come after itself: ".concat(r)),a(!i.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:s,before:n,after:i,group:r,node:t};this._items.push(e)}const o=this._sort();return a(o,"item","?"!==r?"added into group ".concat(r):"","created a dependencies error"),this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(i.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return a(t,"merge created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),n=Object.create(null);for(const a of this._items){const i=a.seq,r=a.group;n[r]=n[r]||[],n[r].push(i),e[i]=a.before;for(const e of a.after)t[e]=t[e]||[],t[e].push(i)}for(const t in e){const a=[];for(const i in e[t]){const r=e[t][i];n[r]=n[r]||[],a.push(...n[r])}e[t]=a}for(const a in t)if(n[a])for(const i of n[a])e[i].push(...t[a]);const a={};for(const t in e){const n=e[t];for(const e of n)a[e]=a[e]||[],a[e].push(t)}const i={},r=[];for(let e=0;e<this._items.length;++e){let t=e;if(a[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===i[e])continue;a[e]||(a[e]=[]);const n=a[e].length;let r=0;for(let t=0;t<n;++t)i[a[e][t]]&&++r;if(r===n){t=e;break}}}null!==t&&(i[t]=!0,r.push(t))}if(r.length!==this._items.length)return!1;const s={};for(const e of this._items)s[e.seq]=e;this._items=[],this.nodes=[];for(const e of r){const t=s[e];this.nodes.push(t.node),this._items.push(t)}return!0}},i.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1},function(e,t,n){"use strict";const a=n(0),i=n(3),r=n(1),s=n(8),o=n(4),c={};e.exports=i.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(e,{schema:t,state:n,prefs:i}){a(t.$_terms.link,"Uninitialized link schema");const r=c.generate(t,e,n,i),s=t.$_terms.link[0].ref;return r.$_validate(e,n.nest(r,"link:".concat(s.display,":").concat(r.type)),i)},generate:(e,t,n,a)=>c.generate(e,t,n,a),rules:{ref:{method(e){a(!this.$_terms.link,"Cannot reinitialize schema"),e=s.ref(e),a("value"===e.type||"local"===e.type,"Invalid reference type:",e.type),a("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");const t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(e=!0){return this.$_setFlag("relative",e)}}},overrides:{concat(e){a(this.$_terms.link,"Uninitialized link schema"),a(r.isSchema(e),"Invalid schema object"),a("link"!==e.type,"Cannot merge type link with another link");const t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:(e,t)=>(a(t.link,"Invalid link description missing link"),e.ref(t.link))}}),c.generate=function(e,t,n,a){let i=n.mainstay.links.get(e);if(i)return i._generate(t,n,a).schema;const r=e.$_terms.link[0].ref,{perspective:s,path:o}=c.perspective(r,n);c.assert(s,"which is outside of schema boundaries",r,e,n,a);try{i=o.length?s.$_reach(o):s}catch(t){c.assert(!1,"to non-existing schema",r,e,n,a)}return c.assert("link"!==i.type,"which is another link",r,e,n,a),e._flags.relative||n.mainstay.links.set(e,i),i._generate(t,n,a).schema},c.perspective=function(e,t){if("local"===e.type){for(const{schema:n,key:a}of t.schemas){if((n._flags.id||a)===e.path[0])return{perspective:n,path:e.path.slice(1)};if(n.$_terms.shared)for(const t of n.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},c.assert=function(e,t,n,i,r,s){e||a(!1,'"'.concat(o.label(i._flags,r,s),'" contains link reference "').concat(n.display,'" ').concat(t))}},function(e,t,n){"use strict";const a=n(0),i=n(3),r=n(1),s={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/};e.exports=i.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,{schema:t,error:n}){const a=e.match(s.numberRx);if(!a)return;e=e.trim();const i={value:parseFloat(e)};if(0===i.value&&(i.value=0),!t._flags.unsafe)if(e.match(/e/i)){if(s.normalizeExponent("".concat(i.value/Math.pow(10,a[1]),"e").concat(a[1]))!==s.normalizeExponent(e))return i.errors=n("number.unsafe"),i}else{const t=i.value.toString();if(t.match(/e/i))return i;if(t!==s.normalizeDecimal(e))return i.errors=n("number.unsafe"),i}return i}},validate(e,{schema:t,error:n,prefs:a}){if(e===1/0||e===-1/0)return{value:e,errors:n("number.infinity")};if(!r.isNumber(e))return{value:e,errors:n("number.base")};const i={value:e};if(a.convert){const e=t.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);i.value=Math.round(i.value*t)/t}}return 0===i.value&&(i.value=0),!t._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(i.errors=n("number.unsafe")),i},rules:{compare:{method:!1,validate:(e,t,{limit:n},{name:a,operator:i,args:s})=>r.compare(e,n,i)?e:t.error("number."+a,{limit:s.limit,value:e}),args:[{name:"limit",ref:!0,assert:r.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate:(e,t,{base:n},a)=>e%n==0?e:t.error("number.multiple",{multiple:a.args.base,value:e}),args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return a(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,{limit:n}){const a=e.toString().match(s.precisionRx);return Math.max((a[1]?a[1].length:0)-(a[2]?parseInt(a[2],10):0),0)<=n?e:t.error("number.precision",{limit:n,value:e})},convert:!0},sign:{method(e){return a(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate:(e,t,{sign:n})=>"negative"===n&&e<0||"positive"===n&&e>0?e:t.error("number.".concat(n))},unsafe:{method(e=!0){return a("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),s.normalizeExponent=function(e){return e.replace(/E/,"e").replace(/\.(\d*[1-9])?0+e/,".$1e").replace(/\.e/,"e").replace(/e\+/,"e").replace(/^\+/,"").replace(/^(-?)0+([1-9])/,"$1$2")},s.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},function(e,t,n){"use strict";const a=n(22);e.exports=a.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})},function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=n(0),o=n(23),c=n(49),l=n(50),u=n(27),d=n(51),p=n(26),g=n(3),h=n(1),f={tlds:d instanceof Set&&{tlds:{allow:d,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:l.regex().regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=g.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,{schema:t,state:n,prefs:a}){const i=t.$_getRule("normalize");i&&(e=e.normalize(i.args.form));const r=t.$_getRule("case");r&&(e="upper"===r.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const s=t.$_getRule("trim");if(s&&s.args.enabled&&(e=e.trim()),t.$_terms.replacements)for(const n of t.$_terms.replacements)e=e.replace(n.pattern,n.replacement);const o=t.$_getRule("hex");if(o&&o.args.options.byteAligned&&e.length%2!=0&&(e="0".concat(e)),t.$_getRule("isoDate")){const t=f.isoDate(e);t&&(e=t)}if(t._flags.truncate){const i=t.$_getRule("max");if(i){let r=i.args.limit;if(h.isResolvable(r)&&(r=r.resolve(e,n,a),!h.limit(r)))return{value:e,errors:t.$_createError("any.ref",r,{ref:i.args.limit,arg:"limit",reason:"must be a positive integer"},n,a)};e=e.slice(0,r)}}return{value:e}}},validate:(e,{error:t})=>"string"!=typeof e?{value:e,errors:t("string.base")}:""===e?{value:e,errors:t("string.empty")}:void 0,rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(e={}){return h.assertOptions(e,["paddingRequired","urlSafe"]),e=i({urlSafe:!1,paddingRequired:!0},e),s("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),s("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate:(e,t,{options:n})=>f.base64Regex[n.paddingRequired][n.urlSafe].test(e)?e:t.error("string.base64")},case:{method(e){return s(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate:(e,t,{direction:n})=>"lower"===n&&e===e.toLocaleLowerCase()||"upper"===n&&e===e.toLocaleUpperCase()?e:t.error("string.".concat(n,"case")),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let n=e.length,a=0,i=1;for(;n--;){const t=e.charAt(n)*i;a+=t-9*(t>9),i^=3}return a>0&&a%10==0?e:t.error("string.creditCard")}},dataUri:{method(e={}){return h.assertOptions(e,["paddingRequired"]),e=i({paddingRequired:!0},e),s("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,{options:n}){const a=e.match(f.dataUriRegex);if(a){if(!a[2])return e;if("base64"!==a[2])return e;if(f.base64Regex[n.paddingRequired].false.test(a[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&h.assertOptions(e,["allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=f.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate:(e,t,n,{address:a})=>o.isValid(e,a)?e:t.error("string.domain")},email:{method(e={}){h.assertOptions(e,["allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),s(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");const t=f.addressOptions(e),n=new RegExp("\\s*[".concat(e.separator?u(e.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:e},regex:n,address:t})},validate(e,t,{options:n},{regex:a,address:i}){const r=n.multiple?e.split(a):[e],s=[];for(const e of r)c.isValid(e,i)||s.push(e);return s.length?t.error("string.email",{value:e,invalids:s}):e}},guid:{alias:"uuid",method(e={}){h.assertOptions(e,["version","separator"]);let t="";if(e.version){const n=[].concat(e.version);s(n.length>=1,"version must have at least 1 valid version specified");const a=new Set;for(let e=0;e<n.length;++e){const i=n[e];s("string"==typeof i,"version at position "+e+" must be a string");const r=f.guidVersions[i.toLowerCase()];s(r,"version at position "+e+" must be one of "+Object.keys(f.guidVersions).join(", ")),s(!a.has(r),"version at position "+e+" must not be a duplicate"),t+=r,a.add(r)}}s(f.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');const n=void 0===e.separator?"[:-]?":!0===e.separator?"[:-]":!1===e.separator?"[]?":"\\".concat(e.separator),a=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(n,")[0-9A-F]{4}\\2?[").concat(t||"0-9A-F","][0-9A-F]{3}\\2?[").concat(t?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:e},regex:a})},validate(e,t,n,{regex:a}){const i=a.exec(e);return i?f.guidBrackets[i[1]]!==i[i.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(e={}){return h.assertOptions(e,["byteAligned"]),e=i({byteAligned:!1},e),s("boolean"==typeof e.byteAligned,"byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:e}})},validate:(e,t,{options:n})=>f.hexRegex.test(e)?n.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(e,t)=>o.isValid(e,{minDomainSegments:1})||f.ipRegex.test(e)?e:t.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(e={}){h.assertOptions(e,["cidr","version"]);const{cidr:t,versions:n,regex:a}=l.regex(e),i=e.version?n:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:i}},regex:a})},validate:(e,t,{options:n},{regex:a})=>a.test(e)?e:n.version?t.error("string.ipVersion",{value:e,cidr:n.cidr,version:n.version}):t.error("string.ip",{value:e,cidr:n.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(e,{error:t})=>f.isoDate(e)?e:t("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>f.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return f.length(this,"length",e,"=",t)},validate(e,t,{limit:n,encoding:a},{name:i,operator:r,args:s}){const o=!a&&e.length;return h.compare(o,n,r)?e:t.error("string."+i,{limit:s.limit,value:e,encoding:a})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return f.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return f.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(e="NFC"){return s(f.normalizationForms.includes(e),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate:(e,{error:t},{form:n})=>e===e.normalize(n)?e:t("string.normalize",{value:e,form:n}),convert:!0},pattern:{alias:"regex",method(e,t={}){s(e instanceof RegExp,"regex must be a RegExp"),s(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),h.assertOptions(t,["invert","name"]);const n=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:n})},validate:(e,t,{regex:n,options:a},{errorCode:i})=>n.test(e)^a.invert?e:t.error(i,{name:a.name,regex:n,value:e}),args:["regex","options"],multi:!0},replace:{method(e,t){"string"==typeof e&&(e=new RegExp(u(e),"g")),s(e instanceof RegExp,"pattern must be a RegExp"),s("string"==typeof t,"replacement must be a String");const n=this.clone();return n.$_terms.replacements||(n.$_terms.replacements=[]),n.$_terms.replacements.push({pattern:e,replacement:t}),n}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(e=!0){return s("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate:(e,t,{enabled:n})=>n&&e!==e.trim()?t.error("string.trim"):e,convert:!0},truncate:{method(e=!0){return s("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}},uri:{method(e={}){h.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),e.domain&&h.assertOptions(e.domain,["allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:n}=p.regex(e),a=e.domain?f.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:a,scheme:n})},validate(e,t,{options:n},{regex:a,domain:i,scheme:r}){if(["http:/","https:/"].includes(e))return t.error("string.uri");const s=a.exec(e);if(s){const a=s[1]||s[2];return!i||n.allowRelative&&!a||o.isValid(a,i)?e:t.error("string.domain",{value:a})}return n.relativeOnly?t.error("string.uriRelativeOnly"):n.scheme?t.error("string.uriCustomScheme",{scheme:r,value:e}):t.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:n,replacement:a}of t.replacements)e=e.replace(n,a);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(e){if(!e)return e;if(s(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),s(void 0===e.maxDomainSegments||Number.isSafeInteger(e.maxDomainSegments)&&e.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===e.tlds)return e;if(!0===e.tlds||void 0===e.tlds)return s(f.tlds,"Built-in TLD list disabled"),Object.assign({},e,f.tlds);s("object"==typeof e.tlds,"tlds must be true, false, or an object");const t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),s(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),s(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(e.tlds.deny,"tlds.deny"),e;const n=e.tlds.allow;return n?!0===n?(s(f.tlds,"Built-in TLD list disabled"),Object.assign({},e,f.tlds)):(Array.isArray(n)&&(e=Object.assign({},e,{tlds:{allow:new Set(n)}})),s(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(e.tlds.allow,"tlds.allow"),e):e},f.validateTlds=function(e,t){for(const n of e)s(o.isValid(n,{minDomainSegments:1,maxDomainSegments:1}),"".concat(t," must contain valid top level domain names"))},f.isoDate=function(e){if(!h.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},f.length=function(e,t,n,a,i){return s(!i||!1,"Invalid encoding:",i),e.$_addRule({name:t,method:"length",args:{limit:n,encoding:i},operator:a})}},function(e,t,n){"use strict";const a=n(24),i=n(23),r=n(25),s={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(a.TextEncoder||TextEncoder)};t.analyze=function(e,t){return s.email(e,t)},t.isValid=function(e,t){return!s.email(e,t)},s.email=function(e,t={}){if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return r.code("EMPTY_STRING");const n=!s.nonAsciiRx.test(e);if(!n){if(!1===t.allowUnicode)return r.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const a=e.split("@");if(2!==a.length)return a.length>2?r.code("MULTIPLE_AT_CHAR"):r.code("MISSING_AT_CHAR");const[o,c]=a;if(!o)return r.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return r.code("ADDRESS_TOO_LONG");if(s.encoder.encode(o).length>64)return r.code("LOCAL_TOO_LONG")}return s.local(o,n)||i.analyze(c,t)},s.local=function(e,t){const n=e.split(".");for(const e of n){if(!e.length)return r.code("EMPTY_LOCAL_SEGMENT");if(t){if(!s.atextRx.test(e))return r.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(s.atextRx.test(t))continue;const e=s.binary(t);if(!s.atomRx.test(e))return r.code("INVALID_LOCAL_CHARS")}}},s.binary=function(e){return Array.from(s.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},s.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,s.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},function(e,t,n){"use strict";const a=n(0),i=n(26);t.regex=function(e={}){a(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";a(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),a(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let n=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(n)||(n=[n]),a(n.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<n.length;++e)a("string"==typeof n[e],"options.version must only contain strings"),n[e]=n[e].toLowerCase(),a(["ipv4","ipv6","ipvfuture"].includes(n[e]),"options.version contains unknown version "+n[e]+" - must be one of ipv4, ipv6, ipvfuture");n=Array.from(new Set(n));const r=n.map((e=>{if("forbidden"===t)return i.ip[e];const n="\\/".concat("ipv4"===e?i.ip.v4Cidr:i.ip.v6Cidr);return"required"===t?"".concat(i.ip[e]).concat(n):"".concat(i.ip[e],"(?:").concat(n,")?")})),s="(?:".concat(r.join("|"),")"),o=new RegExp("^".concat(s,"$"));return{cidr:t,versions:n,regex:o,raw:s}}},function(e,t){},function(e,t,n){"use strict";const a=n(0),i=n(3),r={};r.Map=class extends Map{slice(){return new r.Map(this)}},e.exports=i.extend({type:"symbol",terms:{map:{init:new r.Map}},coerce:{method(e,{schema:t,error:n}){const a=t.$_terms.map.get(e);return a&&(e=a),t._flags.only&&"symbol"!=typeof e?{value:e,errors:n("symbol.map",{map:t.$_terms.map})}:{value:e}}},validate(e,{error:t}){if("symbol"!=typeof e)return{value:e,errors:t("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),a(e&&e[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),n=[];for(const i of e){a(i&&i[Symbol.iterator],"Entry must be an iterable");const[e,r]=i;a("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be of type object, function, or Symbol"),a("symbol"==typeof r,"Value must be a Symbol"),t.$_terms.map.set(e,r),n.push(r)}return t.valid(...n)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})}])},466:function(e,t,n){e.exports=i;var a=n(174).EventEmitter;function i(){a.call(this)}n(100)(i,a),i.Readable=n(175),i.Writable=n(475),i.Duplex=n(476),i.Transform=n(477),i.PassThrough=n(478),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",o),n.on("close",c));var s=!1;function o(){s||(s=!0,e.end())}function c(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(u(),0===a.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",i),e.removeListener("drain",r),n.removeListener("end",o),n.removeListener("close",c),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",l),e.on("error",l),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},467:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},468:function(e,t){},469:function(e,t,n){"use strict";var a=n(176).Buffer,i=n(470);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i=a.allocUnsafe(e>>>0),r=this.head,s=0;r;)t=i,n=s,r.data.copy(t,n),s+=r.data.length,r=r.next;return i},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},470:function(e,t){},471:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var a,i,r,s,o,c=1,l={},u=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?a=function(e){t.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),a=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){h(e.data)},a=function(e){r.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,a=function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):a=function(e){setTimeout(h,0,e)},p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[c]=i,a(c),c++},p.clearImmediate=g}function g(e){delete l[e]}function h(e){if(u)setTimeout(h,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{g(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(101),n(112))},472:function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var a=!1;return function(){if(!a){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),a=!0}return e.apply(this,arguments)}}}).call(this,n(101))},473:function(e,t,n){var a=n(87),i=a.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=a:(r(a,t),t.Buffer=s),r(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var a=i(e);return void 0!==t?"string"==typeof n?a.fill(t,n):a.fill(t):a.fill(0),a},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},474:function(e,t,n){"use strict";e.exports=r;var a=n(241),i=Object.create(n(113));function r(e){if(!(this instanceof r))return new r(e);a.call(this,e)}i.inherits=n(100),i.inherits(r,a),r.prototype._transform=function(e,t,n){n(null,e)}},475:function(e,t,n){e.exports=n(177)},476:function(e,t,n){e.exports=n(89)},477:function(e,t,n){e.exports=n(175).Transform},478:function(e,t,n){e.exports=n(175).PassThrough},479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextReference=void 0;var a=n(173);class ContextReference extends a.Reference{constructor(e){super(`$${e}`)}}t.ContextReference=ContextReference},480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SiblingReference=void 0;var a=n(173);class SiblingReference extends a.Reference{}t.SiblingReference=SiblingReference},481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnyType",{enumerable:!0,get:function(){return i.AnyType}}),Object.defineProperty(t,"ArrayType",{enumerable:!0,get:function(){return r.ArrayType}}),Object.defineProperty(t,"BooleanType",{enumerable:!0,get:function(){return s.BooleanType}}),Object.defineProperty(t,"BufferType",{enumerable:!0,get:function(){return o.BufferType}}),Object.defineProperty(t,"ByteSizeType",{enumerable:!0,get:function(){return c.ByteSizeType}}),Object.defineProperty(t,"ConditionalType",{enumerable:!0,get:function(){return l.ConditionalType}}),Object.defineProperty(t,"DurationType",{enumerable:!0,get:function(){return u.DurationType}}),Object.defineProperty(t,"IpType",{enumerable:!0,get:function(){return O.IpType}}),Object.defineProperty(t,"LiteralType",{enumerable:!0,get:function(){return d.LiteralType}}),Object.defineProperty(t,"MapOfType",{enumerable:!0,get:function(){return g.MapOfType}}),Object.defineProperty(t,"MaybeType",{enumerable:!0,get:function(){return p.MaybeType}}),Object.defineProperty(t,"NeverType",{enumerable:!0,get:function(){return M.NeverType}}),Object.defineProperty(t,"NumberType",{enumerable:!0,get:function(){return h.NumberType}}),Object.defineProperty(t,"ObjectType",{enumerable:!0,get:function(){return f.ObjectType}}),Object.defineProperty(t,"RecordOfType",{enumerable:!0,get:function(){return m.RecordOfType}}),Object.defineProperty(t,"StreamType",{enumerable:!0,get:function(){return j.StreamType}}),Object.defineProperty(t,"StringType",{enumerable:!0,get:function(){return x.StringType}}),Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return a.Type}}),Object.defineProperty(t,"URIType",{enumerable:!0,get:function(){return y.URIType}}),Object.defineProperty(t,"UnionType",{enumerable:!0,get:function(){return b.UnionType}});var a=n(51),i=n(486),r=n(487),s=n(488),o=n(489),c=n(490),l=n(491),u=n(492),d=n(493),p=n(494),g=n(495),h=n(496),f=n(497),m=n(498),j=n(499),x=n(500),b=n(501),y=n(502),M=n(503),O=n(504)},482:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaError=void 0;var i=a(n(0));class SchemaError extends Error{constructor(e,t){super(e),(0,i.default)(this,"cause",void 0),this.cause=t,Object.setPrototypeOf(this,SchemaError.prototype)}}t.SchemaError=SchemaError},483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaTypeError=void 0;var a=n(67);class SchemaTypeError extends a.SchemaError{constructor(e,t){super("string"==typeof e?e:e.message),this.path=t,Object.setPrototypeOf(this,SchemaTypeError.prototype)}}t.SchemaTypeError=SchemaTypeError},484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaTypesError=void 0;var a=n(67);class SchemaTypesError extends a.SchemaTypeError{constructor(e,t,n){super(e,t),this.errors=n,Object.setPrototypeOf(this,SchemaTypesError.prototype)}}t.SchemaTypesError=SchemaTypesError},485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationError=void 0;var a=n(67);class ValidationError extends a.SchemaError{static extractMessage(e,t,n){const i="string"==typeof t?[t,...e.path]:e.path;let r=e.message;if(e instanceof a.SchemaTypesError){const a=n||0;r=`${r}\n${e.errors.map((e=>ValidationError.extractMessage(e,t,a+1))).map((e=>`${" ".repeat(a)}- ${e}`)).join("\n")}`}return 0===i.length?r:`[${i.join(".")}]: ${r}`}constructor(e,t){super(ValidationError.extractMessage(e,t),e),Object.setPrototypeOf(this,ValidationError.prototype)}}t.ValidationError=ValidationError},486:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.AnyType=void 0;var i=a(n(59)),r=n(53),s=n(51);class AnyType extends s.Type{constructor(e){super(r.internals.any(),e)}handleError(e,{value:t}){if("any.required"===e)return`expected value of type [any] but got [${(0,i.default)(t)}]`}}t.AnyType=AnyType},487:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayType=void 0;var i=a(n(59)),r=n(53),s=n(51);class ArrayType extends s.Type{constructor(e,t={}){let n=r.internals.array().items(e.getSchema().optional()).sparse(!1);void 0!==t.minSize&&(n=n.min(t.minSize)),void 0!==t.maxSize&&(n=n.max(t.maxSize)),super(n,t)}handleError(e,{limit:t,reason:n,value:a}){switch(e){case"any.required":case"array.base":return`expected value of type [array] but got [${(0,i.default)(a)}]`;case"array.sparse":return"sparse array are not allowed";case"array.parse":return"could not parse array value from json input";case"array.min":return`array size is [${a.length}], but cannot be smaller than [${t}]`;case"array.max":return`array size is [${a.length}], but cannot be greater than [${t}]`;case"array.includesOne":return n[0]}}}t.ArrayType=ArrayType},488:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.BooleanType=void 0;var i=a(n(59)),r=n(53),s=n(51);class BooleanType extends s.Type{constructor(e){super(r.internals.boolean(),e)}handleError(e,{value:t}){if("any.required"===e||"boolean.base"===e)return`expected value of type [boolean] but got [${(0,i.default)(t)}]`}}t.BooleanType=BooleanType},489:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.BufferType=void 0;var i=a(n(59)),r=n(53),s=n(51);class BufferType extends s.Type{constructor(e){super(r.internals.binary(),e)}handleError(e,{value:t}){if("any.required"===e||"binary.base"===e)return`expected value of type [Buffer] but got [${(0,i.default)(t)}]`}}t.BufferType=BufferType},490:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.ByteSizeType=void 0;var i=a(n(59)),r=n(178),s=n(67),o=n(53),c=n(51);class ByteSizeType extends c.Type{constructor(e={}){let t=o.internals.bytes();void 0!==e.min&&(t=t.min(e.min)),void 0!==e.max&&(t=t.max(e.max)),super(t,{defaultValue:(0,r.ensureByteSizeValue)(e.defaultValue),validate:e.validate})}handleError(e,{limit:t,message:n,value:a},r){switch(e){case"any.required":case"bytes.base":return`expected value of type [ByteSize] but got [${(0,i.default)(a)}]`;case"bytes.parse":return new s.SchemaTypeError(n,r);case"bytes.min":return`Value must be equal to or greater than [${t.toString()}]`;case"bytes.max":return`Value must be equal to or less than [${t.toString()}]`}}}t.ByteSizeType=ByteSizeType},491:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionalType=void 0;var i=a(n(59)),r=n(53),s=n(172),o=n(51);class ConditionalType extends o.Type{constructor(e,t,n,a,i){super(r.internals.when(e.getSchema(),{is:s.Reference.isReference(t)||t instanceof o.Type?t.getSchema():t,then:n.getSchema(),otherwise:a.getSchema()}),i)}handleError(e,{value:t}){if("any.required"===e)return`expected at least one defined value but got [${(0,i.default)(t)}]`}}t.ConditionalType=ConditionalType},492:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.DurationType=void 0;var i=a(n(59)),r=n(242),s=n(67),o=n(53),c=n(51);class DurationType extends c.Type{constructor(e={}){let t;if("function"==typeof e.defaultValue){const n=e.defaultValue;t=()=>(0,r.ensureDuration)(n())}else t="string"==typeof e.defaultValue||"number"==typeof e.defaultValue?(0,r.ensureDuration)(e.defaultValue):e.defaultValue;super(o.internals.duration(),{...e,defaultValue:t})}handleError(e,{message:t,value:n},a){switch(e){case"any.required":case"duration.base":return`expected value of type [moment.Duration] but got [${(0,i.default)(n)}]`;case"duration.parse":return new s.SchemaTypeError(t,a)}}}t.DurationType=DurationType},493:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiteralType=void 0;var a=n(53),i=n(51);class LiteralType extends i.Type{constructor(e){super(a.internals.any().valid(e))}handleError(e,{value:t,valids:[n]}){switch(e){case"any.required":case"any.only":return`expected value to equal [${n}]`}}}t.LiteralType=LiteralType},494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaybeType=void 0;var a=n(51);class MaybeType extends a.Type{constructor(e){super(e.getSchema().optional().default((()=>{})))}}t.MaybeType=MaybeType},495:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.MapOfType=void 0;var i=a(n(59)),r=n(67),s=n(53),o=n(51);class MapOfType extends o.Type{constructor(e,t,n={}){const a=n.defaultValue;super(s.internals.map().entries(e.getSchema(),t.getSchema()),{...n,defaultValue:a instanceof Map?()=>a:a})}handleError(e,{entryKey:t,reason:n,value:a},s){switch(e){case"any.required":case"map.base":return`expected value of type [Map] or [object] but got [${(0,i.default)(a)}]`;case"map.parse":return"could not parse map value from json input";case"map.key":case"map.value":const o=s.slice();return o.splice(s.length,0,"map.key"===e?`key("${t}")`:t.toString(),...n instanceof r.SchemaTypeError?n.path:[]),n instanceof r.SchemaTypesError?new r.SchemaTypesError(n,o,n.errors):new r.SchemaTypeError(n,o)}}}t.MapOfType=MapOfType},496:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.NumberType=void 0;var i=a(n(59)),r=n(53),s=n(51);class NumberType extends s.Type{constructor(e={}){let t=r.internals.number();void 0!==e.min&&(t=t.min(e.min)),void 0!==e.max&&(t=t.max(e.max)),super(t,e)}handleError(e,{limit:t,value:n}){switch(e){case"any.required":case"number.base":return`expected value of type [number] but got [${(0,i.default)(n)}]`;case"number.min":return`Value must be equal to or greater than [${t}].`;case"number.max":return`Value must be equal to or lower than [${t}].`}}}t.NumberType=NumberType},497:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectType=void 0;var i=a(n(0)),r=a(n(59)),s=n(53),o=n(51),c=n(67);class ObjectType extends o.Type{constructor(e,t={}){const n={},{unknowns:a="forbid",...r}=t;for(const[t,a]of Object.entries(e))n[t]=a.getSchema();super(s.internals.object().keys(n).default().optional().unknown("allow"===a).options({stripUnknown:{objects:"ignore"===a}}),r),(0,i.default)(this,"props",void 0),(0,i.default)(this,"options",void 0),(0,i.default)(this,"propSchemas",void 0),this.props=e,this.propSchemas=n,this.options=t}extends(e,t){const n=Object.entries({...this.props,...e}).reduce(((e,[t,n])=>null!=n?{...e,[t]:n}:e),{}),a={...this.options,...t};return new ObjectType(n,a)}handleError(e,{reason:t,value:n}){switch(e){case"any.required":case"object.base":return`expected a plain object value, but found [${(0,r.default)(n)}] instead.`;case"object.parse":return"could not parse object value from json input";case"object.unknown":return"definition for this key is missing";case"object.child":return t[0]}}validateKey(e,t){if(!this.propSchemas[e])throw new Error(`${e} is not a valid part of this schema`);const{value:n,error:a}=this.propSchemas[e].validate(t);if(a)throw new c.ValidationError(a,e);return n}}t.ObjectType=ObjectType},498:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.RecordOfType=void 0;var i=a(n(59)),r=n(67),s=n(53),o=n(51);class RecordOfType extends o.Type{constructor(e,t,n={}){super(s.internals.record().entries(e.getSchema(),t.getSchema()),n)}handleError(e,{entryKey:t,reason:n,value:a},s){switch(e){case"any.required":case"record.base":return`expected value of type [object] but got [${(0,i.default)(a)}]`;case"record.parse":return"could not parse record value from json input";case"record.key":case"record.value":const o=s.slice();return o.splice(s.length,0,"record.key"===e?`key("${t}")`:t.toString(),...n instanceof r.SchemaTypeError?n.path:[]),n instanceof r.SchemaTypesError?new r.SchemaTypesError(n,o,n.errors):new r.SchemaTypeError(n,o)}}}t.RecordOfType=RecordOfType},499:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.StreamType=void 0;var i=a(n(59)),r=n(53),s=n(51);class StreamType extends s.Type{constructor(e){super(r.internals.stream(),e)}handleError(e,{value:t}){if("any.required"===e||"stream.base"===e)return`expected value of type [Stream] but got [${(0,i.default)(t)}]`}}t.StreamType=StreamType},500:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.StringType=void 0;var i=a(n(59)),r=n(53),s=n(51);class StringType extends s.Type{constructor(e={}){let t=!0===e.hostname?r.internals.string().hostname():r.internals.any().custom((0,s.convertValidationFunction)((e=>{if("string"!=typeof e)return`expected value of type [string] but got [${(0,i.default)(e)}]`})));void 0!==e.minLength&&(t=t.custom((0,s.convertValidationFunction)((t=>{if(t.length<e.minLength)return`value has length [${t.length}] but it must have a minimum length of [${e.minLength}].`})))),void 0!==e.maxLength&&(t=t.custom((0,s.convertValidationFunction)((t=>{if(t.length>e.maxLength)return`value has length [${t.length}] but it must have a maximum length of [${e.maxLength}].`})))),t.type="string",super(t,e)}handleError(e,{limit:t,value:n}){switch(e){case"any.required":return`expected value of type [string] but got [${(0,i.default)(n)}]`;case"string.hostname":return"value must be a valid hostname (see RFC 1123)."}}}t.StringType=StringType},501:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.UnionType=void 0;var i=a(n(59)),r=n(67),s=n(53),o=n(51);class UnionType extends o.Type{constructor(e,t){super(s.internals.alternatives(e.map((e=>e.getSchema()))).match("any"),t)}handleError(e,{value:t,details:n},a){switch(e){case"any.required":return`expected at least one defined value but got [${(0,i.default)(t)}]`;case"alternatives.match":return new r.SchemaTypesError("types that failed validation:",a,n.map(((e,t)=>{const n=e.context.error,i=n.path.slice();return i.splice(a.length,0,t.toString()),n instanceof r.SchemaTypesError?new r.SchemaTypesError(n.message,i,n.errors):new r.SchemaTypeError(n.message,i)})))}}}t.UnionType=UnionType},502:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.URIType=void 0;var i=a(n(59)),r=n(53),s=n(51);class URIType extends s.Type{constructor(e={}){super(r.internals.string().uri({scheme:e.scheme}),e)}handleError(e,{value:t,scheme:n}){switch(e){case"any.required":case"string.base":return`expected value of type [string] but got [${(0,i.default)(t)}].`;case"string.uriCustomScheme":return`expected URI with scheme [${n}].`;case"string.uri":return"value must be a valid URI (see RFC 3986)."}}}t.URIType=URIType},503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NeverType=void 0;var a=n(53),i=n(51);class NeverType extends i.Type{constructor(){super(a.internals.any().forbidden())}handleError(e){if("any.unknown"===e)return"a value wasn't expected to be present"}}t.NeverType=NeverType},504:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.IpType=void 0;var i=a(n(59)),r=n(53),s=n(51);class IpType extends s.Type{constructor(e={versions:["ipv4","ipv6"]}){super(r.internals.string().ip({version:e.versions,cidr:"forbidden"}),e)}handleError(e,{value:t,version:n}){switch(e){case"string.base":return`expected value of type [string] but got [${(0,i.default)(t)}]`;case"string.ipVersion":return`value must be a valid ${n.join(" or ")} address`}}}t.IpType=IpType},505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isConfigSchema",{enumerable:!0,get:function(){return a.isConfigSchema}});var a=n(506)},506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isConfigSchema=function(e){return!!e&&!0===e.__isKbnConfigSchemaType}},507:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var a=n(11),i=n(13),r=n(2),s=n(45),o=n(170),c=n(12);const l=({index:t,indexName:n,ingestionMethod:l,openModal:u,pipelineName:d,pipelineState:p})=>{const[g,h]=Object(a.useState)(!0);return Object(a.useEffect)((()=>{e((()=>h(!1)))}),[]),Object(c.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(c.jsx)(i.EuiFlexItem,null,Object(c.jsx)(i.EuiFlexGroup,{alignItems:"center"},Object(c.jsx)(i.EuiFlexItem,null,Object(c.jsx)(i.EuiTitle,{size:"xs"},Object(c.jsx)("h4",null,d))),Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)(i.EuiButtonEmpty,{"data-telemetry-id":`entSearchContent-${l}-pipelines-ingestPipelines-settings`,onClick:u},r.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.ingestPipelinesCard.settings.label",{defaultMessage:"Settings"}))))),Object(c.jsx)(i.EuiFlexItem,null,Object(c.jsx)(i.EuiFlexGroup,{justifyContent:"flexEnd"},Object(s.f)(t)&&Object(c.jsx)(i.EuiFlexItem,null,Object(c.jsx)(i.EuiAccordion,{"data-telemetry-id":`entSearchContent-${l}-pipelines-ingestPipelines-viewCurlRequest`,buttonContent:r.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.ingestPipelinesCard.accordion.label",{defaultMessage:"Ingest a document using cURL"}),id:"ingestPipelinesCurlAccordion",forceState:g?"open":"closed",onClick:()=>h(!g)},Object(c.jsx)(o.a,{document:{body:"body",title:"Title"},indexName:n,pipeline:{...p,name:d}}))),Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)("span",null,Object(c.jsx)(i.EuiBadge,{color:"hollow"},r.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.ingestPipelinesCard.managedBadge.label",{defaultMessage:"Managed"})))))))}}).call(this,n(239).setImmediate)},508:function(e,t,n){e.exports=n.p+"ccfbdf9dd2556f3e236cc2c77a775852.svg"},509:function(e,t,n){e.exports=n.p+"26cafacde58ea6b27818c65c95dd10b9.svg"},51:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.convertValidationFunction=t.Type=void 0;var i=a(n(0)),r=n(67),s=n(172);const o=e=>(t,{error:n})=>{let a;try{a=e(t)}catch(e){a=e.message||e}return"string"==typeof a?n("any.custom",{message:a}):t};function c(e,t=[]){const n=[];for(const[a,i]of e._ids._byKey.entries())n.push(...c(i.schema,[...t,a]));var a;return n.length||n.push({path:t,type:null!==(a=e.type)&&void 0!==a?a:"unknown"}),n}t.convertValidationFunction=o,t.Type=class Type{constructor(e,t={}){(0,i.default)(this,"type",null),(0,i.default)(this,"__isKbnConfigSchemaType",!0),(0,i.default)(this,"internalSchema",void 0),void 0!==t.defaultValue&&(e=e.optional(),e="function"==typeof t.defaultValue?e.default(t.defaultValue):e.default(s.Reference.isReference(t.defaultValue)?t.defaultValue.getSchema():t.defaultValue)),t.validate&&(e=e.custom(o(t.validate))),void 0===e.$_getFlag("error")&&(e=e.error((([e])=>this.onError(e)))),this.internalSchema=e}validate(e,t={},n){const{value:a,error:i}=this.internalSchema.validate(e,{context:t,presence:"required"});if(i)throw new r.ValidationError(i,n);return a}getSchema(){return this.internalSchema}getSchemaStructure(){return c(this.internalSchema)}handleError(e,t,n){}onError(e){if(e instanceof r.SchemaTypeError)return e;const{local:t,code:n,path:a,value:i}=e,s=a.map((e=>e.toString())),o={...t,value:i},c=this.handleError(n,o,s);if(c instanceof r.SchemaTypeError)return c;if("string"==typeof c)return new r.SchemaTypeError(c,s);if("any.custom"===n&&o.message)return new r.SchemaTypeError(o.message,s);const l=e.toString();return new r.SchemaTypeError(l||n,s)}}},510:function(e,t,n){var a=n(30),i=n(511);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},511:function(e,t,n){(t=n(31)(!1)).push([e.i,".enterpriseSearchInferencePipelineFlyout .resizableContainer{min-height:320px}.enterpriseSearchInferencePipelineFlyout .resizableContainer .reviewCodeBlock{height:100%}.enterpriseSearchInferencePipelineFlyout .enterpriseSearchInferencePipelineFlyoutFooter .euiButtonEmpty__content{padding-left:12px;padding-right:12px}",""]),e.exports=t},512:function(e,t,n){var a=n(30),i=n(513);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},513:function(e,t,n){(t=n(31)(!1)).push([e.i,".enterpriseSearchInferencePipelineFlyout .resizableContainer{min-height:320px}.enterpriseSearchInferencePipelineFlyout .resizableContainer .reviewCodeBlock{height:100%}.enterpriseSearchInferencePipelineFlyout .enterpriseSearchInferencePipelineFlyoutFooter .euiButtonEmpty__content{padding-left:12px;padding-right:12px}",""]),e.exports=t},514:function(e,t,n){var a=n(30),i=n(515);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},515:function(e,t,n){(t=n(31)(!1)).push([e.i,".authenticationPanel .authenticationCheckable{height:100%}",""]),e.exports=t},516:function(e,t,n){var a=n(30),i=n(517);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},517:function(e,t,n){(t=n(31)(!1)).push([e.i,".authenticationPanel .authenticationCheckable{height:100%}",""]),e.exports=t},518:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(519);case"v8light":return n(521)}},519:function(e,t,n){var a=n(30),i=n(520);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},520:function(e,t,n){(t=n(31)(!1)).push([e.i,".deduplicationPanel .selectableWrapper{border:1px solid #25262e;border-radius:10.8px;padding:16px}.deduplicationPanel .showAllFieldsPopoverToggle .euiButtonEmpty__content{padding-left:12px;padding-right:12px}",""]),e.exports=t},521:function(e,t,n){var a=n(30),i=n(522);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},522:function(e,t,n){(t=n(31)(!1)).push([e.i,".deduplicationPanel .selectableWrapper{border:1px solid #f5f7fa;border-radius:10.8px;padding:16px}.deduplicationPanel .showAllFieldsPopoverToggle .euiButtonEmpty__content{padding-left:12px;padding-right:12px}",""]),e.exports=t},523:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(524);case"v8light":return n(526)}},524:function(e,t,n){var a=n(30),i=n(525);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},525:function(e,t,n){(t=n(31)(!1)).push([e.i,".connectorCheckable .euiRadio{margin-top:4px}.connectorCheckable .connectorCheckableContent{margin-left:20px}",""]),e.exports=t},526:function(e,t,n){var a=n(30),i=n(527);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},527:function(e,t,n){(t=n(31)(!1)).push([e.i,".connectorCheckable .euiRadio{margin-top:4px}.connectorCheckable .connectorCheckableContent{margin-left:20px}",""]),e.exports=t},53:function(e,t,n){"use strict";var a=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.internals=void 0;var i=a(n(465)),r=n(16),s=n(18),o=n(466),c=n(178),l=n(242);const u=i.default.extend({type:"boolean",base:i.default.boolean(),coerce(e,{error:t}){if(void 0===e)return{value:e};if("string"==typeof e){const t=e.toLowerCase();e="true"===t||"false"!==t&&e}return"boolean"!=typeof e?{errors:[t("boolean.base")]}:{value:e}}},{type:"stream",prepare:(e,{error:t})=>e instanceof o.Stream?{value:e}:{errors:[t("stream.base")]}},{type:"bytes",coerce(e,{error:t}){try{if("string"==typeof e)return{value:c.ByteSizeValue.parse(e)};if("number"==typeof e)return{value:new c.ByteSizeValue(e)}}catch(e){return{errors:[t("bytes.parse",{message:e.message})]}}return{value:e}},validate:(e,{error:t})=>e instanceof c.ByteSizeValue?{value:e}:{errors:[t("bytes.base")]},rules:{min:{args:[{name:"limit",assert:i.default.alternatives([i.default.number(),i.default.string()]).required()}],method(e){return this.$_addRule({name:"min",args:{limit:e}})},validate(e,{error:t},n){const a=(0,c.ensureByteSizeValue)(n.limit);return e.isLessThan(a)?t("bytes.min",{value:e,limit:a}):e}},max:{args:[{name:"limit",assert:i.default.alternatives([i.default.number(),i.default.string()]).required()}],method(e){return this.$_addRule({name:"max",args:{limit:e}})},validate(e,{error:t},n){const a=(0,c.ensureByteSizeValue)(n.limit);return e.isGreaterThan(a)?t("bytes.max",{value:e,limit:a}):e}}}},{type:"duration",coerce(e,{error:t}){try{if("string"==typeof e||"number"==typeof e)return{value:(0,l.ensureDuration)(e)}}catch(e){return{errors:[t("duration.parse",{message:e.message})]}}return{value:e}},validate:(e,{error:t})=>(0,s.isDuration)(e)?{value:e}:{errors:[t("duration.base")]}},{type:"number",base:i.default.number(),coerce(e,{error:t}){if(void 0===e)return{value:e};const n="string"==typeof e?Number(e):e;return"number"!=typeof n||isNaN(n)?{errors:[t("number.base")]}:{value:e}}},{type:"object",base:i.default.object(),coerce(e,{error:t,prefs:n}){if(void 0===e||(0,r.isPlainObject)(e))return{value:e};if(n.convert&&"string"==typeof e)try{return{value:JSON.parse(e)}}catch(e){return{errors:[t("object.parse")]}}return{errors:[t("object.base")]}}},{type:"array",base:i.default.array(),coerce(e,{error:t,prefs:n}){if(void 0===e||Array.isArray(e))return{value:e};if(n.convert&&"string"==typeof e)try{return{value:JSON.parse(e)}}catch(e){return{errors:[t("array.parse")]}}return{errors:[t("array.base")]}}},{type:"map",coerce(e,{error:t,prefs:n}){if(void 0===e)return{value:e};if((0,r.isPlainObject)(e))return{value:new Map(Object.entries(e))};if(n.convert&&"string"==typeof e)try{const t=JSON.parse(e);return(0,r.isPlainObject)(t)?{value:new Map(Object.entries(t))}:{value:t}}catch(e){return{errors:[t("map.parse")]}}return{value:e}},validate:(e,{error:t})=>e instanceof Map?{value:e}:{errors:[t("map.base")]},rules:{entries:{args:[{name:"key",assert:i.default.object().schema()},{name:"value",assert:i.default.object().schema()}],method(e,t){return this.$_addRule({name:"entries",args:{key:e,value:t}})},validate(e,{error:t},n,a){const r=new Map;for(const[a,s]of e){let e,o;try{e=i.default.attempt(a,n.key,{presence:"required"})}catch(e){return t("map.key",{entryKey:a,reason:e})}try{o=i.default.attempt(s,n.value,{presence:"required"})}catch(e){return t("map.value",{entryKey:a,reason:e})}r.set(e,o)}return r}}}},{type:"record",coerce(e,{error:t,prefs:n}){if(void 0===e||(0,r.isPlainObject)(e))return{value:e};if(n.convert&&"string"==typeof e)try{return{value:JSON.parse(e)}}catch(e){return{errors:[t("record.parse")]}}return{errors:[t("record.base")]}},validate:(e,{error:t})=>(0,r.isPlainObject)(e)?{value:e}:{errors:[t("record.base")]},rules:{entries:{args:[{name:"key",assert:i.default.object().schema()},{name:"value",assert:i.default.object().schema()}],method(e,t){return this.$_addRule({name:"entries",args:{key:e,value:t}})},validate(e,{error:t},n){const a={};for(const[r,s]of Object.entries(e)){let e,o;try{e=i.default.attempt(r,n.key,{presence:"required"})}catch(e){return t("record.key",{entryKey:r,reason:e})}try{o=i.default.attempt(s,n.value,{presence:"required"})}catch(e){return t("record.value",{entryKey:r,reason:e})}a[e]=o}return a}}}});t.internals=u},59:function(e,t,n){(function(t){var n;n=function(){"use strict";var e="function"==typeof Promise,n="object"==typeof self?self:t,a="undefined"!=typeof Symbol,i="undefined"!=typeof Map,r="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,o="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,l=a&&void 0!==Symbol.iterator,u=a&&void 0!==Symbol.toStringTag,d=r&&"function"==typeof Set.prototype.entries,p=i&&"function"==typeof Map.prototype.entries,g=d&&Object.getPrototypeOf((new Set).entries()),h=p&&Object.getPrototypeOf((new Map).entries()),f=l&&"function"==typeof Array.prototype[Symbol.iterator],m=f&&Object.getPrototypeOf([][Symbol.iterator]()),j=l&&"function"==typeof String.prototype[Symbol.iterator],x=j&&Object.getPrototypeOf(""[Symbol.iterator]());return function(t){var a=typeof t;if("object"!==a)return a;if(null===t)return"null";if(t===n)return"global";if(Array.isArray(t)&&(!1===u||!(Symbol.toStringTag in t)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&t===window.location)return"Location";if("object"==typeof window.document&&t===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var l=u&&t[Symbol.toStringTag];if("string"==typeof l)return l;var d=Object.getPrototypeOf(t);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":e&&d===Promise.prototype?"Promise":r&&d===Set.prototype?"Set":i&&d===Map.prototype?"Map":o&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":c&&d===DataView.prototype?"DataView":i&&d===h?"Map Iterator":r&&d===g?"Set Iterator":f&&d===m?"Array Iterator":j&&d===x?"String Iterator":null===d?"Object":Object.prototype.toString.call(t).slice(8,-1)}},e.exports=n()}).call(this,n(101))},63:function(e,t,n){"use strict";let a,i,r,s,o,c,l;n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"b",(function(){return l})),function(e){e.CREATED="created",e.NEEDS_CONFIGURATION="needs_configuration",e.CONFIGURED="configured",e.CONNECTED="connected",e.ERROR="error"}(a||(a={})),function(e){e.CANCELING="canceling",e.CANCELED="canceled",e.COMPLETED="completed",e.ERROR="error",e.IN_PROGRESS="in_progress",e.PENDING="pending",e.SUSPENDED="suspended"}(i||(i={})),function(e){e.EXCLUDE="exclude",e.INCLUDE="include"}(r||(r={})),function(e){e.CONTAINS="contains",e.ENDS_WITH="ends_with",e.EQUALS="equals",e.GT=">",e.LT="<",e.REGEX="regex",e.STARTS_WITH="starts_with"}(s||(s={})),function(e){e.EDITED="edited",e.INVALID="invalid",e.VALID="valid"}(o||(o={})),function(e){e.ON_DEMAND="on_demand",e.SCHEDULED="scheduled"}(c||(c={})),function(e){e.FILTERING_ADVANCED_CONFIG="filtering_advanced_config",e.FILTERING_RULES="filtering_rules"}(l||(l={}))},67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SchemaError",{enumerable:!0,get:function(){return a.SchemaError}}),Object.defineProperty(t,"SchemaTypeError",{enumerable:!0,get:function(){return i.SchemaTypeError}}),Object.defineProperty(t,"SchemaTypesError",{enumerable:!0,get:function(){return r.SchemaTypesError}}),Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return s.ValidationError}});var a=n(482),i=n(483),r=n(484),s=n(485)},887:function(e,t,n){"use strict";n.r(t),n.d(t,"EnterpriseSearchContent",(function(){return Ro})),n.d(t,"EnterpriseSearchContentUnconfigured",(function(){return Po})),n.d(t,"EnterpriseSearchContentConfigured",(function(){return Uo}));var a=n(11),i=n.n(a),r=n(15),s=n(29),o=n(88),c=n(145),l=n(32),u=n(37),d=n(92),p=n(77),g=n(147),h=n(54),f=n(44),m=n(12);const j=()=>Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(h.d,null),Object(m.jsx)(f.b,{action:"error",metric:"cannot_connect"}),Object(m.jsx)(p.KibanaPageTemplate,{isEmptyState:!0},Object(m.jsx)(g.a,null)));var x=n(1),b=n(212),y=n(39),M=n.n(y),O=n(55);const S=({children:e,pageChrome:t,pageViewTelemetry:n,...a})=>Object(m.jsx)(O.a,M()({},a,{solutionNav:{items:Object(O.c)(),name:x.j.NAME},restrictWidth:!0,setPageChrome:t&&Object(m.jsx)(h.e,{trail:t})}),n&&Object(m.jsx)(f.b,{action:"viewed",metric:n}),e),E=({pageChrome:e=[]})=>Object(m.jsx)(S,{pageChrome:[...e,"404"],customPageSections:!0},Object(m.jsx)(f.b,{action:"error",metric:"not_found"}),Object(m.jsx)(b.a,{productSupportUrl:x.j.SUPPORT_URL}));var v=n(13),w=n(2),I=n(14),N=n(211),D=n(4),T=n(213),k=n(36),C=n(232);n(399);const _=[{icon:"logoElasticsearch",title:"Elasticsearch",tooltip:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.elasticsearch.tooltip",{defaultMessage:"Use App and Workplace Search Search Engines with existing Elasticsearch indices"})},{icon:"desktop",title:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.api.title",{defaultMessage:"API"}),tooltip:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.api.tooltip",{defaultMessage:"POST documents to an API endpoint from your own applications"})},{icon:"globe",title:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.crawler.title",{defaultMessage:"Elastic Web Crawler"}),tooltip:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.crawler.tooltip",{defaultMessage:"Automatically index content from your websites"})},{icon:C.a.confluence,title:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.confluence.title",{defaultMessage:"Confluence"}),tooltip:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.confluence.tooltip",{defaultMessage:"Index content from Atlassian Confluence"})},{icon:C.a.googleDrive,title:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.googleDrive.title",{defaultMessage:"Google Drive"}),tooltip:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.googleDrive.tooltip",{defaultMessage:"Index documents from Google Drive"})},{icon:C.a.sharePoint,title:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.sharePoint.title",{defaultMessage:"Microsoft SharePoint"}),tooltip:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.sharePoint.tooltip",{defaultMessage:"Index content from Microsoft SharePoint"})},{icon:C.a.github,title:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.github.title",{defaultMessage:"GitHub"}),tooltip:w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.github.tooltip",{defaultMessage:"Index issues, pull requests, and more from GitHub"})}],A=()=>Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"s",alignItems:"center",className:"gettingStartedSteps"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},_.map(((e,t)=>Object(m.jsx)(v.EuiFlexItem,{grow:!1,key:t},Object(m.jsx)(v.EuiToolTip,{content:Object(m.jsx)(v.EuiText,null,Object(m.jsx)("h4",{className:"iconTooltip"},e.title),e.tooltip)},Object(m.jsx)(v.EuiIcon,{className:"grayscaleSvg",type:e.icon,size:"m",color:"text"}))))))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiBadge,{color:"hollow"},w.i18n.translate("xpack.enterpriseSearch.overview.iconRow.manyMoreBadge",{defaultMessage:"And many more"})))),L=({step:e="first"})=>Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiSteps,{steps:[{title:w.i18n.translate("xpack.enterpriseSearch.overview.gettingStartedSteps.addData.title",{defaultMessage:"Add your documents to Enterprise Search"}),children:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiText,{color:"subdued"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.overview.gettingStartedSteps.addData.message",{defaultMessage:"Add your data to Enterprise Search. You can crawl website content with the Elastic web crawler, connect your existing application with Elasticsearch API endpoints, or use connectors to directly add third party content from providers like Google Drive, Microsoft Sharepoint and more."}))),Object(m.jsx)(v.EuiSpacer,{size:"m"}),Object(m.jsx)(A,null)),status:"first"===e?"current":"complete"},{title:w.i18n.translate("xpack.enterpriseSearch.overview.gettingStartedSteps.buildSearchExperience.title",{defaultMessage:"Build a search experience"}),children:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiText,{color:"subdued"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.overview.gettingStartedSteps.buildSearchExperience.message",{defaultMessage:"Create a search engine with App Search for a prebuild set of search management tools, or deeply customize your own tools by searching directly against Elasticsearch. Then build beautiful client-side search experiences with Search UI - available for Elasticsearch, App Search, and Workplace Search."}))),Object(m.jsx)(v.EuiSpacer,{size:"m"}),Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(k.d,{shouldNotCreateHref:!0,to:x.f.URL},Object(m.jsx)(v.EuiIcon,{type:"iInCircle"})," ",w.i18n.translate("xpack.enterpriseSearch.overview.gettingStartedSteps.searchWithElasticsearchLink",{defaultMessage:"Search with the Elasticsearch API"}))))),status:"second"===e?"current":"incomplete"},{title:w.i18n.translate("xpack.enterpriseSearch.overview.gettingStartedSteps.tuneSearchExperience.title",{defaultMessage:"Tune your search relevance"}),children:Object(m.jsx)(v.EuiText,{color:"subdued"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.overview.gettingStartedSteps.tuneSearchExperience.message",{defaultMessage:"Refine your search results by adjusting your search settings, including weighting certain fields or creating curations and synonyms. Then implement, measure, and dive into analytics to continue helping your users find exactly what they're looking for."}))),status:"incomplete"}]})));var z=n(48),F=n(214),R=n(47),P=n(45),U=n(42),$=n(35),Q=n(33),V=n(40);const B=Object(V.a)(["delete_index_api_logic"],(async({indexName:e})=>{const t=`/internal/enterprise_search/indices/${e}`;await l.a.values.http.delete(t)})),Y=Object(V.a)(["content","indices_api_logic"],(async({meta:e,returnHiddenIndices:t,searchQuery:n})=>{const{http:a}=l.a.values,i={page:e.page.current,return_hidden_indices:t,search_query:n||null,size:20};return{...await a.get("/internal/enterprise_search/indices",{query:i}),isInitialRequest:1===e.page.current&&!n,returnHiddenIndices:t,searchQuery:n}}));var q=n(97);const G=Object(s.kea)({actions:{closeDeleteModal:!0,fetchIndices:({meta:e,returnHiddenIndices:t,searchQuery:n})=>({meta:e,returnHiddenIndices:t,searchQuery:n}),onPaginate:e=>({newPageIndex:e}),openDeleteModal:e=>({index:e}),setIsFirstRequest:!0},connect:{actions:[Y,["makeRequest","apiSuccess","apiError"],B,["apiError as deleteError","apiSuccess as deleteSuccess","makeRequest as deleteIndex"]],values:[Y,["data","status"],B,["status as deleteStatus"]]},listeners:({actions:e,values:t})=>({apiError:e=>Object(Q.e)(e),deleteError:e=>Object(Q.e)(e),deleteSuccess:()=>{Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.indices.deleteIndex.successToast.title",{defaultMessage:"Your index {indexName} and any associated ingestion configurations were successfully deleted",values:{indexName:t.deleteModalIndexName}})),e.closeDeleteModal(),e.fetchIndices(t.searchParams)},fetchIndices:async(t,n)=>{await n(150),e.makeRequest(t)},makeRequest:()=>Object(Q.d)()}),path:["enterprise_search","content","indices_logic"],reducers:()=>({deleteModalIndex:[null,{closeDeleteModal:()=>null,openDeleteModal:(e,{index:t})=>t}],isDeleteModalVisible:[!1,{closeDeleteModal:()=>!1,openDeleteModal:()=>!0}],isFirstRequest:[!0,{apiError:()=>!1,apiSuccess:()=>!1,setIsFirstRequest:()=>!0}],searchParams:[{meta:$.i,returnHiddenIndices:!1},{apiSuccess:(e,{meta:t,returnHiddenIndices:n,searchQuery:a})=>({meta:t,returnHiddenIndices:n,searchQuery:a}),onPaginate:(e,{newPageIndex:t})=>({...e,meta:Object(z.c)(e.meta,t)})}]}),selectors:({selectors:e})=>({deleteModalIndexName:[()=>[e.deleteModalIndex],e=>{var t;return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""}],deleteModalIngestionMethod:[()=>[e.deleteModalIndex],e=>e?Object(P.a)(e):q.a.API],hasNoIndices:[()=>[e.data],e=>{var t;return null!==(t=(null==e?void 0:e.isInitialRequest)&&(null==e?void 0:e.indices)&&0===e.indices.length)&&void 0!==t&&t}],indices:[()=>[e.data],e=>null!=e&&e.indices?e.indices.map(P.d):[]],isDeleteLoading:[()=>[e.deleteStatus],e=>[U.a.LOADING].includes(e)],isLoading:[()=>[e.status,e.isFirstRequest],(e,t)=>[U.a.LOADING,U.a.IDLE].includes(e)&&t],meta:[()=>[e.searchParams],e=>e.meta]})}),W=()=>{const{closeDeleteModal:e,deleteIndex:t}=Object(s.useActions)(G),{deleteModalIndexName:n,deleteModalIngestionMethod:a,isDeleteModalVisible:r,isDeleteLoading:o}=Object(s.useValues)(G);return r?Object(m.jsx)(v.EuiConfirmModal,{title:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.deleteModal.title",{defaultMessage:"Are you sure you want to delete {indexName}",values:{indexName:n}}),onCancel:()=>{e()},onConfirm:()=>{t({indexName:n})},cancelButtonText:o?w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.deleteModal.closeButton.title",{defaultMessage:"Close"}):w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.deleteModal.cancelButton.title",{defaultMessage:"Cancel"}),confirmButtonText:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.deleteModal.confirmButton.title",{defaultMessage:"Delete index"}),defaultFocusedButton:"confirm",buttonColor:"danger",isLoading:o},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.deleteModal.delete.description",{defaultMessage:"Deleting this index will also delete all of its data and its {ingestionMethod} configuration. Any associated search engines will no longer be able to access any data stored in this index.This can not be undone.",values:{ingestionMethod:Object(P.e)(a)}}))):Object(m.jsx)(i.a.Fragment,null)},H=Object(V.a)(["enterprise_search_content","fetch_sync_jobs_stats_api_logic"],(async()=>await l.a.values.http.get("/internal/enterprise_search/stats/sync_jobs"))),J=()=>{const{makeRequest:e}=Object(s.useActions)(H),{data:t,status:n}=Object(s.useValues)(H),i=n===U.a.LOADING;return Object(a.useEffect)((()=>{e({})}),[]),Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{color:null!=t&&t.connected?"success":"subdued",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.jobStats.connectedMethods",{defaultMessage:"Connected ingest methods"}),isLoading:i,title:null==t?void 0:t.connected}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{color:null!=t&&t.incomplete?"warning":"subdued",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.jobStats.incompleteMethods",{defaultMessage:"Incomplete ingest methods"}),isLoading:i,title:null==t?void 0:t.incomplete}))))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{color:"subdued",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.jobStats.runningSyncs",{defaultMessage:"Running syncs"}),isLoading:i,title:null==t?void 0:t.in_progress}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{color:null!=t&&t.stuck?"warning":"subdued",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.jobStats.longRunningSyncs",{defaultMessage:"Stuck syncs"}),isLoading:i,title:null==t?void 0:t.stuck}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{color:null!=t&&t.orphaned_jobs?"warning":"subdued",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.jobStats.orphanedSyncs",{defaultMessage:"Orphaned syncs"}),isLoading:i,title:null==t?void 0:t.orphaned_jobs}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{color:null!=t&&t.errors?"danger":"subdued",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.jobStats.errorSyncs",{defaultMessage:"Syncs errors"}),isLoading:i,title:null==t?void 0:t.errors}))))))};var Z=n(49),K=n(70);function X(e){return e===q.b.CONNECTED?w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.ingestionStatus.connected.label",{defaultMessage:"Connected"}):e===q.b.ERROR?w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.ingestionStatus.connectorError.label",{defaultMessage:"Connector failure"}):e===q.b.SYNC_ERROR?w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.ingestionStatus.syncError.label",{defaultMessage:"Sync failure"}):e===q.b.CONFIGURED?w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.ingestionStatus.configured.label",{defaultMessage:"Configured"}):w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.ingestionStatus.incomplete.label",{defaultMessage:"Incomplete"})}function ee(e){return e===q.b.CONNECTED?"success":e===q.b.ERROR||e===q.b.SYNC_ERROR?"danger":"warning"}const te={green:"success",red:"danger",unavailable:"",yellow:"warning"},ne=({indices:e,isLoading:t,meta:n,onChange:a,onDelete:i})=>{const{navigateToUrl:r}=Object(s.useValues)(u.a),o=[{field:"name",name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.name.columnTitle",{defaultMessage:"Index name"}),render:e=>Object(m.jsx)(k.d,{"data-test-subj":"search-index-link",to:Object(Z.a)(R.e,{indexName:e})},e),sortable:!0,truncateText:!0,width:"40%"},{field:"health",name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.health.columnTitle",{defaultMessage:"Index health"}),render:e=>{var t;return Object(m.jsx)("span",null,Object(m.jsx)(v.EuiIcon,{type:"dot",color:null!==(t=te[e])&&void 0!==t?t:""})," ",null!=e?e:"-")},sortable:!0,truncateText:!0,width:"10%"},{field:"count",name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.docsCount.columnTitle",{defaultMessage:"Docs count"}),sortable:!0,truncateText:!0,width:"10%"},{field:"ingestionMethod",name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.ingestionMethod.columnTitle",{defaultMessage:"Ingestion method"}),render:e=>Object(m.jsx)(v.EuiText,{size:"s"},Object(P.e)(e)),truncateText:!0,width:"10%"},{name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.ingestionStatus.columnTitle",{defaultMessage:"Ingestion status"}),render:e=>{const t=Object(Z.a)(R.e,{indexName:e.name}),n=X(e.ingestionStatus);return Object(m.jsx)(K.a,{to:t,label:n,color:ee(e.ingestionStatus)})},truncateText:!0,width:"15%"},{actions:[{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.actions.viewIndex.title",{defaultMessage:"View this index"}),icon:"eye",isPrimary:!1,name:e=>w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.actions.viewIndex.caption",{defaultMessage:"View index {indexName}",values:{indexName:e.name}}),onClick:e=>r(Object(Z.a)(R.e,{indexName:e.name})),type:"icon"},{color:"danger",description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.actions.deleteIndex.title",{defaultMessage:"Delete this index"}),icon:"trash",isPrimary:!1,name:e=>w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.actions.deleteIndex.caption",{defaultMessage:"Delete index {indexName}",values:{indexName:e.name}}),onClick:e=>i(e),type:"icon"}],name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.actions.columnTitle",{defaultMessage:"Actions"}),width:"10%"}];return Object(m.jsx)(v.EuiBasicTable,{items:e,columns:o,onChange:a,pagination:{...Object(z.a)(n),showPerPageOptions:!1},tableLayout:"fixed",loading:t})};n(404);const ae=[w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.searchIndices.breadcrumb",{defaultMessage:"Elasticsearch indices"})],ie=()=>{const{fetchIndices:e,onPaginate:t,openDeleteModal:n,setIsFirstRequest:r}=Object(s.useActions)(G),{meta:o,indices:c,hasNoIndices:l,isLoading:u}=Object(s.useValues)(G),[d,p]=Object(a.useState)(!1),[g,h]=Object(a.useState)(""),[f,j]=Object(F.a)("enterprise-search-indices-callout-dismissed",!1);Object(a.useEffect)((()=>{r()}),[]),Object(a.useEffect)((()=>{e({meta:o,returnHiddenIndices:d,searchQuery:g})}),[g,o.page.current,d]);const x=u?"":l?w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.searchIndices.emptyPageTitle",{defaultMessage:"Welcome to Enterprise Search"}):w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.searchIndices.pageTitle",{defaultMessage:"Elasticsearch indices"});return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(W,null),Object(m.jsx)(S,{pageChrome:ae,pageViewTelemetry:"Search indices",isLoading:u,pageHeader:{pageTitle:x,rightSideItems:u?[]:[Object(m.jsx)(k.d,{"data-test-subj":"create-new-index-button",to:R.b},Object(m.jsx)(v.EuiButton,{iconType:"plusInCircle",color:"primary",fill:!0},w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.create.buttonTitle",{defaultMessage:"Create new index"})))]}},l?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(N.a,null),Object(m.jsx)(v.EuiSpacer,{size:"xxl"}),Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiTitle,null,Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.searchIndices.stepsTitle",{defaultMessage:"Build beautiful search experiences with Enterprise Search"}))),Object(m.jsx)(v.EuiSpacer,{size:"l"}),Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(L,{step:0===c.length?"first":"second"})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(T.a,null))))):Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},!f&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiSpacer,{size:"l"}),Object(m.jsx)(v.EuiCallOut,{size:"m",title:w.i18n.translate("xpack.enterpriseSearch.content.callout.title",{defaultMessage:"Introducing Elasticsearch indices in Enterprise Search"}),iconType:"iInCircle"},Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.indices.callout.text",defaultMessage:"Your Elasticsearch indices are now front and center in Enterprise Search. You can create new indices and build search experiences with them directly. To learn more about how to use Elasticsearch indices in Enterprise Search {docLink}",values:{docLink:Object(m.jsx)(v.EuiLink,{"data-test-subj":"search-index-link",href:D.a.appSearchElasticsearchIndexedEngines,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.callout.docLink",{defaultMessage:"read the documentation"}))}})),Object(m.jsx)(v.EuiButton,{fill:!0,onClick:()=>j(!0)},w.i18n.translate("xpack.enterpriseSearch.content.callout.dismissButton",{defaultMessage:"Dismiss"})))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(J,null)),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiTitle,null,Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.searchIndices.tableTitle",{defaultMessage:"Available indices"})))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiSwitch,{checked:d,label:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.searchIndices.includeHidden.label",{defaultMessage:"Show hidden indices"}),onChange:e=>p(e.target.checked)})),Object(m.jsx)(v.EuiFlexItem,{className:"entSearchIndicesSearchBar"},Object(m.jsx)(v.EuiSearchBar,{query:g,box:{incremental:!0,placeholder:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.searchIndices.searchBar.placeHolder",{defaultMessage:"Filter Elasticsearch indices"})},"aria-label":w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.searchIndices.searchBar.ariaLabel",{defaultMessage:"Filter Elasticsearch indices"}),onChange:e=>h(e.queryText)})))))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(ne,{indices:c,meta:o,onChange:Object(z.b)(t),onDelete:n})))),")")};var re=n(94),se=n(17),oe=n.n(se);n(409);const ce=({onChange:e,options:t,selected:n})=>Object(m.jsx)(v.EuiFlexGroup,{className:"buttonGroup",direction:"column",gutterSize:"m",role:"radiogroup"},t.map(((t,a)=>{const r=t===n;return Object(m.jsx)(v.EuiFlexItem,{className:oe()("buttonGroupOption",{"buttonGroupOption--selected":r}),grow:!1,onClick:()=>{e(t)}},Object(m.jsx)(v.EuiSplitPanel.Outer,{borderRadius:"m",grow:!0,hasBorder:!0,hasShadow:!1,className:"buttonGroupOption-panel"},Object(m.jsx)(v.EuiSplitPanel.Inner,{color:"plain",paddingSize:"s"},Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",responsive:!1},Object(m.jsx)(v.EuiFlexItem,null,t.badge&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)("div",null,t.badge),Object(m.jsx)(v.EuiSpacer,{size:"xs"})),Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h4",null,t.label)),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{size:"s",color:"subdued"},Object(m.jsx)("p",null,t.description))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonIcon,{display:"base",iconType:r?"check":"arrowRight",color:r?"success":"primary","aria-label":t.label,"aria-checked":r,role:"radio",autoFocus:0===a})))),Object(m.jsx)(v.EuiSplitPanel.Inner,{color:r?"success":"subdued",paddingSize:"s"},Object(m.jsx)(v.EuiText,{size:"s",color:r?"success":"subdued"},Object(m.jsx)("p",null,Object(m.jsx)("strong",null,t.footer))))))}))),le=()=>Object(m.jsx)(v.EuiPanel,{color:"subdued"},Object(m.jsx)(v.EuiEmptyPrompt,{title:Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.content.newIndex.emptyState.title",{defaultMessage:"Select an ingestion method"})),body:Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.newIndex.emptyState.description",{defaultMessage:"Data you add in Enterprise Search is called a search index and it’s searchable in both App Search and Workplace Search. Now you can use your connectors in App Search and your web crawlers in Workplace Search."})),footer:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiTitle,{size:"xxs"},Object(m.jsx)("h4",null,w.i18n.translate("xpack.enterpriseSearch.content.newIndex.emptyState.footer.title",{defaultMessage:"Want to learn more about search indices?"}))),Object(m.jsx)(v.EuiLink,{href:D.a.start,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.emptyState.footer.link",{defaultMessage:"Read the docs"})))})),ue={children:Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.newIndex.steps.createIndex.content",defaultMessage:"Provide a unique index name and optionally set a default {languageAnalyzerDocLink} for the index. This index will hold your data source content, and is optimized with default field mappings for relevant search experiences.",values:{languageAnalyzerDocLink:Object(m.jsx)(v.EuiLink,{href:D.a.languageAnalyzers,target:"_blank",external:!0},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.createIndex.languageAnalyzerLink",{defaultMessage:"language analyzer"}))}}))),status:"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.createIndex.title",{defaultMessage:"Create an Elasticsearch index"}),titleSize:"xs"},de={children:Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.newIndex.steps.buildSearchExperience.content",defaultMessage:"After building your connector, your content is ready. Build your first search experience with {elasticsearchLink}, or explore the search experience tools provided by {appSearchLink}. We recommend that you create a {searchEngineLink} for the best balance of flexible power and turnkey simplicity.",values:{appSearchLink:Object(m.jsx)(k.d,{to:x.c,shouldNotCreateHref:!0},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildSearchExperience.appSearchLink",{defaultMessage:"App Search"})),elasticsearchLink:Object(m.jsx)(k.d,{to:x.l,shouldNotCreateHref:!0},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildSearchExperience.elasticsearchLink",{defaultMessage:"Elasticsearch"})),searchEngineLink:Object(m.jsx)(k.d,{to:`${x.c}/engines/new`,shouldNotCreateHref:!0},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildSearchExperience.searchEngineLink",{defaultMessage:"search engine"}))}}))),status:"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildSearchExperience.title",{defaultMessage:"Build a search experience"}),titleSize:"xs"},pe={"":w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.universalLabel",{defaultMessage:"Universal"}),da:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.danishLabel",{defaultMessage:"Danish"}),de:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.germanLabel",{defaultMessage:"German"}),en:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.englishLabel",{defaultMessage:"English"}),es:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.spanishLabel",{defaultMessage:"Spanish"}),fr:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.frenchLabel",{defaultMessage:"French"}),it:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.italianLabel",{defaultMessage:"Italian"}),ja:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.japaneseLabel",{defaultMessage:"Japanese"}),ko:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.koreanLabel",{defaultMessage:"Korean"}),nl:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.dutchLabel",{defaultMessage:"Dutch"}),pt:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.portugueseLabel",{defaultMessage:"Portuguese"}),"pt-br":w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.portugueseBrazilLabel",{defaultMessage:"Portuguese (Brazil)"}),ru:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.russianLabel",{defaultMessage:"Russian"}),th:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.thaiLabel",{defaultMessage:"Thai"}),zh:w.i18n.translate("xpack.enterpriseSearch.content.supportedLanguages.chineseLabel",{defaultMessage:"Chinese"})};function ge(e){var t;return null!==(t=pe[e])&&void 0!==t?t:e}w.i18n.translate("xpack.enterpriseSearch.content.newIndex.types.api",{defaultMessage:"API endpoint"}),w.i18n.translate("xpack.enterpriseSearch.content.newIndex.types.connector",{defaultMessage:"Connector"}),w.i18n.translate("xpack.enterpriseSearch.content.newIndex.types.crawler",{defaultMessage:"Web crawler"}),w.i18n.translate("xpack.enterpriseSearch.content.newIndex.types.elasticsearch",{defaultMessage:"Elasticsearch index"}),w.i18n.translate("xpack.enterpriseSearch.content.newIndex.types.json",{defaultMessage:"JSON"});const he={id:"park_rocky-mountain",title:"Rocky Mountain",description:"Bisected north to south by the Continental Divide, this portion of the Rockies has ecosystems varying from over 150 riparian lakes to montane and subalpine forests to treeless alpine tundra. Wildlife including mule deer, bighorn sheep, black bears, and cougars inhabit its igneous mountains and glacial valleys. Longs Peak, a classic Colorado fourteener, and the scenic Bear Lake are popular destinations, as well as the historic Trail Ridge Road, which reaches an elevation of more than 12,000 feet (3,700 m).",nps_link:"https://www.nps.gov/romo/index.htm",states:["Colorado"],visitors:4517585,world_heritage_site:!1,location:"40.4,-105.58",acres:265795.2,square_km:1075.6,date_established:"1915-01-26T06:00:00Z"},fe=[{text:ge(""),value:""},{disabled:!0,text:"—"},{text:ge("zh"),value:"zh"},{text:ge("da"),value:"da"},{text:ge("nl"),value:"nl"},{text:ge("en"),value:"en"},{text:ge("fr"),value:"fr"},{text:ge("de"),value:"de"},{text:ge("it"),value:"it"},{text:ge("ja"),value:"ja"},{text:ge("ko"),value:"ko"},{text:ge("pt"),value:"pt"},{text:ge("pt-br"),value:"pt-br"},{text:ge("ru"),value:"ru"},{text:ge("es"),value:"es"},{text:ge("th"),value:"th"}],me=Object(V.a)(["add_connector_api_logic"],(async({deleteExistingConnector:e,indexName:t,isNative:n,language:a})=>{const i={...e?{delete_existing_connector:e}:{},index_name:t,is_native:n,language:a},r=await l.a.values.http.post("/internal/enterprise_search/connectors",{body:JSON.stringify(i)});return{id:r.id,indexName:r.index_name}})),je=Object(V.a)(["create_crawler_index_api_logic"],(async({indexName:e,language:t})=>{const n={index_name:e,language:t};return await l.a.values.http.post("/internal/enterprise_search/crawler",{body:JSON.stringify(n)})})),xe=Object(V.a)(["create_api_index_api_logic"],(async({indexName:e,language:t})=>{const n={index_name:e,language:t};return{indexName:(await l.a.values.http.post("/internal/enterprise_search/indices",{body:JSON.stringify(n)})).index}})),be=Object(V.a)(["index_exists_api_logic"],(async({indexName:e})=>{const t=`/internal/enterprise_search/indices/${e}/exists`,{exists:n}=await l.a.values.http.get(t);return{exists:n,indexName:e}})),ye=Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.new_index.successToast.description",{defaultMessage:"You can use App Search engines to build a search experience for your new Elasticsearch index."})),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(k.b,{to:`${x.c}/engines`,shouldNotCreateHref:!0,color:"success"},w.i18n.translate("xpack.enterpriseSearch.content.new_index.successToast.button.label",{defaultMessage:"Create an engine"})))));function Me(){Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.new_index.successToast.title",{defaultMessage:"Index created successfully"}),{iconType:"cheer",text:ye})}const Oe=Object(s.kea)({actions:{setLanguageSelectValue:e=>({language:e}),setRawName:e=>({rawName:e})},connect:{actions:[me,["apiSuccess as connectorIndexCreated"],xe,["apiSuccess as apiIndexCreated"],je,["apiSuccess as crawlerIndexCreated"],be,["makeRequest"]],values:[be,["data"]]},listeners:({actions:e,values:t})=>({apiIndexCreated:()=>{Me()},connectorIndexCreated:()=>{Me()},crawlerIndexCreated:()=>{Me()},setRawName:async(n,a)=>{await a(150),e.makeRequest({indexName:t.fullIndexName})}}),path:["enterprise_search","content","new_search_index"],reducers:{languageSelectValue:["",{setLanguageSelectValue:(e,{language:t})=>null!=t?t:null}],rawName:["",{setRawName:(e,{rawName:t})=>t}]},selectors:({selectors:e})=>({fullIndexName:[()=>[e.rawName],e=>`search-${e}`],fullIndexNameExists:[()=>[e.data,e.fullIndexName],(e,t)=>!0===(null==e?void 0:e.exists)&&e.indexName===t],fullIndexNameIsValid:[()=>[e.fullIndexName],e=>function(e){const t=encodeURI(e).split(/%(?:u[0-9A-F]{2})?[0-9A-F]{2}|./).length-1,n=new RegExp('[\\\\/:*?"<>|\\s,#]+');return!(t>255||e!==e.toLowerCase()||"."===e||".."===e||null!==e.match(/^[-_+]/)||null!==e.match(n))}(e)],language:[()=>[e.languageSelectValue],e=>{return""===(t=e)?null:t;var t}]})}),Se=({buttonLoading:e,children:t,disabled:n,docsUrl:a,error:i,onNameChange:r,onSubmit:o,title:c,type:l})=>{const{fullIndexName:u,fullIndexNameExists:d,fullIndexNameIsValid:p,language:g,rawName:h,languageSelectValue:f}=Object(s.useValues)(Oe),{setRawName:j,setLanguageSelectValue:x}=Object(s.useActions)(Oe),b=!!i||d||!p;return Object(m.jsx)(v.EuiPanel,{hasBorder:!0},Object(m.jsx)(v.EuiForm,{component:"form",id:"enterprise-search-add-connector",onSubmit:e=>{e.preventDefault(),o(u,g)}},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiTitle,{size:"s"},Object(m.jsx)("h2",null,c))),Object(m.jsx)(v.EuiFlexItem,{grow:!0},Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!0},Object(m.jsx)(v.EuiFormRow,{isDisabled:n,label:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.newSearchIndexTemplate.nameInputLabel",{defaultMessage:"Index name"}),isInvalid:b,error:d?w.i18n.translate("xpack.enterpriseSearch.content.newIndex.newSearchIndexTemplate.alreadyExists.error",{defaultMessage:"An index with the name {indexName} already exists",values:{indexName:u}}):p?i:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.newSearchIndexTemplate.isInvalid.error",{defaultMessage:"{indexName} is an invalid index name",values:{indexName:u}}),helpText:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.newSearchIndexTemplate.nameInputHelpText.lineOne",{defaultMessage:"Your index will be named: {indexName}",values:{indexName:u}}),fullWidth:!0},Object(m.jsx)(v.EuiFieldText,{"data-telemetry-id":`entSearchContent-${l}-newIndex-editName`,placeholder:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.newSearchIndexTemplate.nameInputPlaceholder",{defaultMessage:"Set a name for your index"}),fullWidth:!0,disabled:n,isInvalid:!1,value:h,onChange:e=>{j(e.target.value),r&&r(u)},autoFocus:!0,prepend:"search-"})),Object(m.jsx)(v.EuiText,{size:"xs",color:"subdued"},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.newSearchIndexTemplate.nameInputHelpText.lineTwo",{defaultMessage:"Names should be lowercase and cannot contain spaces or special characters."}))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiFormRow,{isDisabled:n,label:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.newSearchIndexTemplate.languageInputLabel",{defaultMessage:"Language analyzer"}),helpText:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.newSearchIndexTemplate.languageInputHelpText",{defaultMessage:"Language can be changed later, but may require a reindex"})},Object(m.jsx)(v.EuiSelect,{"data-telemetry-id":`entSearchContent-${l}-newIndex-languageAnalyzer`,disabled:n,options:fe,onChange:e=>{x(e.target.value)},value:f})))))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"row",alignItems:"center",justifyContent:"spaceBetween"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":`entSearchContent-${l}-newIndex-createIndex`,fill:!0,isDisabled:!h||e||b||n,isLoading:e,type:"submit"},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.newSearchIndexTemplate.createIndex.buttonText",{defaultMessage:"Create index"}))),!!a&&Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiLink,{target:"_blank",href:a},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.newSearchIndexTemplate.viewDocumentation.linkText",{defaultMessage:"View the documentation"}))))),Object(m.jsx)(v.EuiHorizontalRule,null),t)};var Ee=n(230),ve=n.n(Ee),we=n(63);let Ie,Ne,De,Te,ke;!function(e){e.Pending="pending",e.Suspended="suspended",e.Starting="starting",e.Running="running",e.Suspending="suspending",e.Canceling="canceling",e.Success="success",e.Failed="failed",e.Canceled="canceled",e.Skipped="skipped"}(Ie||(Ie={})),Ie.Canceling,we.f.CANCELING,Ie.Canceled,we.f.CANCELED,Ie.Failed,we.f.ERROR,Ie.Pending,we.f.PENDING,Ie.Running,we.f.IN_PROGRESS,Ie.Skipped,we.f.CANCELED,Ie.Starting,we.f.PENDING,Ie.Success,we.f.COMPLETED,Ie.Suspended,we.f.SUSPENDED,Ie.Suspending,we.f.IN_PROGRESS,Ie.Canceling,we.a.CONNECTED,Ie.Canceled,we.a.CONNECTED,Ie.Failed,we.a.ERROR,Ie.Pending,we.a.CONNECTED,Ie.Running,we.a.CONNECTED,Ie.Skipped,we.a.CONNECTED,Ie.Starting,we.a.CONNECTED,Ie.Success,we.a.CONNECTED,Ie.Suspended,we.a.CONNECTED,Ie.Suspending,we.a.CONNECTED,function(e){e.allow="allow",e.deny="deny"}(Ne||(Ne={})),function(e){e.beginsWith="begins",e.endsWith="ends",e.contains="contains",e.regex="regex"}(De||(De={})),function(e){e.hours="hour",e.days="day",e.weeks="week",e.months="month"}(Te||(Te={})),function(e){e.Full="full",e.Partial="partial"}(ke||(ke={}));const Ce=Object(V.a)(["start_sync_api_logic"],(async({connectorId:e,nextSyncConfig:t})=>{const n=`/internal/enterprise_search/connectors/${e}/start_sync`;return await l.a.values.http.post(n,{body:JSON.stringify({nextSyncConfig:JSON.stringify(t)})})}));function _e(e){const{auth:t,available_deduplication_fields:n,crawl_rules:a,created_on:i,deduplication_enabled:r,deduplication_fields:s,default_crawl_rule:o,document_count:c,entry_points:l,id:u,last_visited_at:d,name:p,sitemaps:g}=e,h={auth:t,availableDeduplicationFields:n,crawlRules:a,createdOn:i,deduplicationEnabled:r,deduplicationFields:s,documentCount:c,entryPoints:l,id:u,sitemaps:g,url:p};return d&&(h.lastCrawl=d),o&&(h.defaultCrawlRule=o),h}function Ae(e){const{status:{avg_response_time_msec:t,crawl_duration_msec:n,pages_visited:a,urls_allowed:i,status_codes:r}}=e;return{status:{avgResponseTimeMSec:t,crawlDurationMSec:n,pagesVisited:a,statusCodes:r,urlsAllowed:i}}}function Le(e){const{id:t,status:n,created_at:a,began_at:i,completed_at:r}=e;return{beganAt:i,completedAt:r,createdAt:a,id:t,status:n}}function ze(e){const{domain_allowlist:t,seed_urls:n,sitemap_urls:a,max_crawl_depth:i}=e;return{domainAllowlist:t,maxCrawlDepth:i,seedUrls:n,sitemapUrls:a}}const Fe=e=>({id:e.id,name:e.name,seedUrls:e.seed_urls,sitemapUrls:e.sitemap_urls}),Re=({frequency:e,unit:t,use_connector_schedule:n})=>({frequency:e,unit:t,useConnectorSchedule:n});function Pe(e){return null!==e&&"basic"===e.type}const Ue=Object(V.a)(["get_crawler_domain"],(async({indexName:e})=>function(e){const{domains:t,events:n,most_recent_crawl_request:a,user_agent:i}=e;return{domains:t.map((e=>_e(e))),events:n.map((e=>function(e){const{id:t,stage:n,status:a,created_at:i,began_at:r,completed_at:s,type:o,crawl_config:c}=e;return{beganAt:r,completedAt:s,crawlConfig:ze(c),createdAt:i,id:t,stage:n,status:a,type:o}}(e))),mostRecentCrawlRequest:a&&Le(a),userAgent:i}}(await l.a.values.http.get(`/internal/enterprise_search/indices/${e}/crawler`))));var $e=n(16);const Qe=Object(V.a)(["fetch_index_api_logic"],(async({indexName:e})=>{const t=`/internal/enterprise_search/indices/${e}`;return await l.a.values.http.get(t)})),Ve=Object(s.kea)({actions:{clearPollTimeout:!0,createPollTimeout:e=>({duration:e}),setTimeoutId:e=>({id:e}),startPolling:e=>({indexName:e}),stopPolling:!0},connect:{actions:[Qe,["apiSuccess","apiError","apiReset","makeRequest"]],values:[Qe,["data as fetchIndexApiData","status"]]},events:({values:e})=>({beforeUnmount:()=>{e.pollTimeoutId&&clearTimeout(e.pollTimeoutId)}}),listeners:({actions:e,values:t})=>({apiError:()=>{t.pollTimeoutId&&e.createPollTimeout(3e4)},apiSuccess:()=>{t.pollTimeoutId&&e.createPollTimeout(5e3)},createPollTimeout:({duration:n})=>{t.pollTimeoutId&&clearTimeout(t.pollTimeoutId);const a=setTimeout((()=>{e.makeRequest({indexName:t.indexName})}),n);e.setTimeoutId(a)},startPolling:({indexName:n})=>{if(t.pollTimeoutId){if(n===t.indexName)return;clearTimeout(t.pollTimeoutId)}e.makeRequest({indexName:n}),e.createPollTimeout(5e3)},stopPolling:()=>{t.pollTimeoutId&&clearTimeout(t.pollTimeoutId),e.clearPollTimeout()}}),path:["enterprise_search","content","api","fetch_index_api_wrapper"],reducers:{indexData:[null,{apiReset:()=>null,apiSuccess:(e,t)=>Object($e.isEqual)(e,t)?e:t}],indexName:["",{apiReset:()=>"",startPolling:(e,{indexName:t})=>t}],pollTimeoutId:[null,{clearPollTimeout:()=>null,setTimeoutId:(e,{id:t})=>t}]},selectors:({selectors:e})=>({isInitialLoading:[()=>[e.status,e.indexData],(e,t)=>e===U.a.IDLE||null===t&&e===U.a.LOADING]})}),Be=Object(s.kea)({actions:{setIndexName:e=>({indexName:e})},path:["enterprise_search","content","index_name"],reducers:({props:e})=>{var t;return{indexName:[null!==(t=e.indexName)&&void 0!==t?t:"",{setIndexName:(e,{indexName:t})=>t}]}}}),Ye=Object(s.kea)({actions:{fetchCrawlerData:!0,reApplyCrawlRules:e=>({domain:e}),startCrawl:e=>({overrides:e}),stopCrawl:()=>null},connect:{actions:[Ue,["apiError","apiSuccess"],Ce,["makeRequest as makeStartSyncRequest"],Ve,["makeRequest as makeFetchIndexRequest"]],values:[Ue,["status","data"],Ve,["indexData"]]},listeners:({actions:e,values:t})=>({apiError:e=>{Object(Q.e)(e)},fetchCrawlerData:()=>{const{indexName:e}=Be.values;Ue.actions.makeRequest({indexName:e})},reApplyCrawlRules:async({domain:e})=>{const{indexName:t}=Be.values,{http:n}=l.a.values,a={};e&&(a.domains=[e.url]);try{await n.post(`/internal/enterprise_search/indices/${t}/crawler/process_crawls`,{body:JSON.stringify(a)}),Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.crawler.manageCrawlsPopover.reApplyCrawlRules.successMessage",{defaultMessage:"Crawl rules are being re-applied in the background"})),Ye.actions.fetchCrawlerData()}catch(e){Object(Q.e)(e)}},startCrawl:async({overrides:n={}})=>{try{Object(P.i)(t.indexData)&&t.indexData.connector&&(e.makeStartSyncRequest({connectorId:t.indexData.connector.id,nextSyncConfig:n}),e.fetchCrawlerData())}catch(e){Object(Q.e)(e)}},stopCrawl:async()=>{const{indexName:t}=Be.values,{http:n}=l.a.values;try{await n.post(`/internal/enterprise_search/indices/${t}/crawler/crawl_requests/cancel`),e.fetchCrawlerData()}catch(e){Object(Q.e)(e)}}}),path:["enterprise_search","crawler_logic"],reducers:{dataLoading:[!0,{apiError:()=>!1,apiSuccess:()=>!1}]},selectors:({selectors:e})=>({domains:[()=>[e.data],e=>{var t;return null!==(t=null==e?void 0:e.domains)&&void 0!==t?t:[]}],events:[()=>[e.data],e=>{var t;return null!==(t=null==e?void 0:e.events)&&void 0!==t?t:[]}],mostRecentCrawlRequest:[()=>[e.data],e=>{var t;return null!==(t=null==e?void 0:e.mostRecentCrawlRequest)&&void 0!==t?t:null}],mostRecentCrawlRequestStatus:[()=>[e.mostRecentCrawlRequest],e=>{var t;return null!==(t=null==e?void 0:e.status)&&void 0!==t?t:null}]})}),qe=e=>{let t=e,n="/";const a=e.search(/[^\:\/]\//);return-1!==a&&(t=e.substring(0,a+1),n=e.substring(a+1)),{domain:t,entryPoint:n}},Ge=e=>{switch(e){case"valid":return"success";case"warning":return"warning";case"invalid":return"danger";default:return"subdued"}},We={networkConnectivity:{state:"invalid",message:w.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.networkConnectivityFailureMessage",{defaultMessage:'Unable to establish a network connection because the "Initial validation" check failed.'})},indexingRestrictions:{state:"invalid",message:w.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.indexingRestrictionsFailureMessage",{defaultMessage:'Unable to determine indexing restrictions because the "Network connectivity" check failed.'})},contentVerification:{state:"invalid",message:w.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.contentVerificationFailureMessage",{defaultMessage:'Unable to verify content because the "Indexing restrictions" check failed.'})}},He=(e,t)=>{const n=t.reduce(((e,t)=>({...e,[t]:!0})),{});return e.filter((e=>{const{domain:t}=qe(e);return!!n[t]}))},Je=Object(s.kea)({path:["enterprise_search","crawler","crawl_custom_settings_flyout_logic"],connect:{actions:[Ye,["startCrawl"]]},actions:()=>({fetchDomainConfigData:!0,hideFlyout:!0,onRecieveDomainConfigData:e=>({domainConfigs:e}),onSelectCustomEntryPointUrls:e=>({entryPointUrls:e}),onSelectCustomSitemapUrls:e=>({sitemapUrls:e}),onSelectDomainUrls:e=>({domainUrls:e}),onSelectEntryPointUrls:e=>({entryPointUrls:e}),onSelectMaxCrawlDepth:e=>({maxCrawlDepth:e}),onSelectSitemapUrls:e=>({sitemapUrls:e}),startCustomCrawl:!0,toggleIncludeSitemapsInRobotsTxt:!0,showFlyout:!0}),reducers:()=>({customEntryPointUrls:[[],{showFlyout:()=>[],onSelectCustomEntryPointUrls:(e,{entryPointUrls:t})=>t}],customSitemapUrls:[[],{showFlyout:()=>[],onSelectCustomSitemapUrls:(e,{sitemapUrls:t})=>t}],domainConfigs:[[],{onRecieveDomainConfigData:(e,{domainConfigs:t})=>t}],includeSitemapsInRobotsTxt:[!0,{showFlyout:()=>!0,toggleIncludeSitemapsInRobotsTxt:e=>!e}],isDataLoading:[!0,{showFlyout:()=>!0,onRecieveDomainConfigData:()=>!1}],isFormSubmitting:[!1,{startCustomCrawl:()=>!0,startCrawl:()=>!1}],isFlyoutVisible:[!1,{showFlyout:()=>!0,hideFlyout:()=>!1,startCrawl:()=>!1}],maxCrawlDepth:[2,{showFlyout:()=>2,onSelectMaxCrawlDepth:(e,{maxCrawlDepth:t})=>t}],selectedDomainUrls:[[],{showFlyout:()=>[],onSelectDomainUrls:(e,{domainUrls:t})=>t}],selectedEntryPointUrls:[[],{showFlyout:()=>[],onSelectEntryPointUrls:(e,{entryPointUrls:t})=>t,onSelectDomainUrls:(e,{domainUrls:t})=>He(e,t)}],selectedSitemapUrls:[[],{showFlyout:()=>[],onSelectSitemapUrls:(e,{sitemapUrls:t})=>t,onSelectDomainUrls:(e,{domainUrls:t})=>He(e,t)}]}),selectors:()=>({domainUrls:[e=>[e.domainConfigs],e=>e.map((e=>e.name))],domainConfigMap:[e=>[e.domainConfigs],e=>e.reduce(((e,t)=>({...e,[t.name]:t})),{})],entryPointUrls:[e=>[e.domainConfigMap,e.selectedDomainUrls],(e,t)=>t.flatMap((t=>e[t].seedUrls))],sitemapUrls:[e=>[e.domainConfigMap,e.selectedDomainUrls],(e,t)=>t.flatMap((t=>e[t].sitemapUrls))]}),listeners:({actions:e,values:t})=>({fetchDomainConfigData:async()=>{const{http:t}=l.a.values,{indexName:n}=Be.values;let a=[],i=1,r=1,s=100;try{for(;r<=i;){const{results:e,meta:{page:o}}=await t.get(`/internal/enterprise_search/indices/${n}/crawler/domain_configs`,{query:{"page[current]":r,"page[size]":s}});a=[...a,...e.map(Fe)],r=o.current+1,i=o.total_pages,s=o.size}e.onRecieveDomainConfigData(a)}catch(e){Object(Q.e)(e)}},showFlyout:()=>{e.fetchDomainConfigData()},startCustomCrawl:()=>{const n={sitemap_discovery_disabled:!t.includeSitemapsInRobotsTxt,max_crawl_depth:t.maxCrawlDepth,domain_allowlist:t.selectedDomainUrls},a=[...t.selectedEntryPointUrls,...t.customEntryPointUrls];a.length>0&&(n.seed_urls=a);const i=[...t.selectedSitemapUrls,...t.customSitemapUrls];i.length>0&&(n.sitemap_urls=i),e.startCrawl(n)}})}),Ze=()=>{const{reApplyCrawlRules:e,startCrawl:t}=Object(s.useActions)(Ye),{showFlyout:n}=Object(s.useActions)(Je),[i,r]=Object(a.useState)(!1),o=()=>r(!1);return Object(m.jsx)(v.EuiPopover,{button:Object(m.jsx)(v.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>r(!i),fill:!0},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusIndicator.retryCrawlButtonLabel",{defaultMessage:"Crawl"})),isOpen:i,closePopover:o,panelPaddingSize:"none",anchorPosition:"downLeft"},Object(m.jsx)(v.EuiContextMenuPanel,{items:[Object(m.jsx)(v.EuiContextMenuItem,{key:"crawl all domains",onClick:()=>{o(),t()},icon:"play"},w.i18n.translate("xpack.enterpriseSearch.crawler.startCrawlContextMenu.crawlAllDomainsMenuLabel",{defaultMessage:"Crawl all domains on this index"})),Object(m.jsx)(v.EuiContextMenuItem,{key:"crawl with custom settings",onClick:()=>{o(),n()},icon:"gear"},w.i18n.translate("xpack.enterpriseSearch.crawler.startCrawlContextMenu.crawlCustomSettingsMenuLabel",{defaultMessage:"Crawl with custom settings"})),Object(m.jsx)(v.EuiContextMenuItem,{key:"reaply crawl rules",onClick:()=>{o(),e()},icon:"refresh"},w.i18n.translate("xpack.enterpriseSearch.crawler.startCrawlContextMenu.reapplyCrawlRulesMenuLabel",{defaultMessage:"Reapply crawl rules"}))]}))},Ke=()=>{const[e,t]=Object(a.useState)(!1),n=()=>t(!1),{stopCrawl:i}=Object(s.useActions)(Ye);return Object(m.jsx)(v.EuiPopover,{button:Object(m.jsx)(v.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>t(!e),className:"crawlInProgressButton"},Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiLoadingSpinner,{size:"m"})),Object(m.jsx)(v.EuiFlexItem,null,w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusIndicator.crawlingButtonLabel",{defaultMessage:"Crawling..."})))),isOpen:e,closePopover:n,panelPaddingSize:"none",anchorPosition:"downLeft"},Object(m.jsx)(v.EuiContextMenuPanel,{items:[Object(m.jsx)(v.EuiContextMenuItem,{key:"cancel crawl",icon:"cross",onClick:()=>{n(),i()}},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusIndicator.cancelCrawlMenuItemLabel",{defaultMessage:"Cancel Crawls"}))]}))},Xe=()=>{const{dataLoading:e,domains:t,mostRecentCrawlRequestStatus:n}=Object(s.useValues)(Ye);if(e||0===t.length)return Object(m.jsx)(v.EuiButton,{disabled:!0,iconType:"arrowDown",iconSide:"right"},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusIndicator.startACrawlButtonLabel",{defaultMessage:"Crawl"}));switch(n){case Ie.Pending:case Ie.Suspended:return Object(m.jsx)(v.EuiButton,{isLoading:!0},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusIndicator.pendingButtonLabel",{defaultMessage:"Pending..."}));case Ie.Starting:return Object(m.jsx)(v.EuiButton,{isLoading:!0},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusIndicator.startingButtonLabel",{defaultMessage:"Starting..."}));case Ie.Running:return Object(m.jsx)(Ke,null);case Ie.Canceling:case Ie.Suspending:return Object(m.jsx)(v.EuiButton,{isLoading:!0},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusIndicator.stoppingButtonLabel",{defaultMessage:"Stopping..."}));case Ie.Success:case Ie.Failed:case Ie.Canceled:default:return Object(m.jsx)(Ze,null)}};var et=n(38);const tt=({indexName:e,ingestionMethod:t,isHiddenIndex:n})=>{const a=e?Object(Z.a)(`${x.b.URL}${et.v}?:indexKey=:indexName`,{indexKey:$.n,indexName:e}):`${x.b.URL}${et.v}`;return Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiContextMenuItem,{"data-telemetry-id":`entSearchContent-${t}-header-createEngine-createEngine`,size:"s",icon:"plusInCircle",onClick:()=>{u.a.values.navigateToUrl(a,{shouldNotCreateHref:!0})},disabled:n},Object(m.jsx)(v.EuiText,null,Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.index.searchEngines.createEngine",{defaultMessage:"Create an App Search engine"}))))))},nt=Object(s.kea)({actions:{toggleSearchEnginesPopover:!0},path:["enterprise_search","search_index","header"],reducers:()=>({isSearchEnginesPopoverOpen:[!1,{toggleSearchEnginesPopover:e=>!e}]})}),at=({indexName:e,ingestionMethod:t,isHiddenIndex:n})=>{const{isSearchEnginesPopoverOpen:a}=Object(s.useValues)(nt),{toggleSearchEnginesPopover:i}=Object(s.useActions)(nt);return Object(m.jsx)(v.EuiPopover,{isOpen:a,closePopover:i,button:Object(m.jsx)(v.EuiButton,{"data-telemetry-id":`entSearchContent-${t}-header-searchEngines`,iconSide:"right",iconType:"arrowDown",onClick:i},w.i18n.translate("xpack.enterpriseSearch.content.index.searchEngines.label",{defaultMessage:"Search engines"}))},Object(m.jsx)(v.EuiContextMenuPanel,{size:"s",items:[Object(m.jsx)(v.EuiContextMenuItem,{"data-telemetry-id":`entSearchContent-${t}-header-searchEngines-viewEngines`,icon:"eye",onClick:()=>{u.a.values.navigateToUrl(x.b.URL,{shouldNotCreateHref:!0})}},Object(m.jsx)(v.EuiText,null,Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.index.searchEngines.viewEngines",{defaultMessage:"View App Search engines"})))),n?Object(m.jsx)(v.EuiToolTip,{content:w.i18n.translate("xpack.enterpriseSearch.content.index.searchEngines.createEngineDisabledTooltip",{defaultMessage:"You cannot create engines from hidden indices."})},Object(m.jsx)(tt,{indexName:e,ingestionMethod:t,isHiddenIndex:n})):Object(m.jsx)(tt,{indexName:e,ingestionMethod:t,isHiddenIndex:n})]}))},it=Object(V.a)(["cancel_syncs_api_logic"],(async({connectorId:e})=>{const t=`/internal/enterprise_search/connectors/${e}/cancel_syncs`;return await l.a.values.http.post(t)})),rt=Object(s.kea)({actions:{fetchIndex:!0,recheckIndex:!0,resetRecheckIndexLoading:!0,startSync:!0},connect:{actions:[Be,["setIndexName"],Ve,["apiError as fetchIndexApiError","apiReset as resetFetchIndexApi","apiSuccess as fetchIndexApiSuccess","makeRequest as makeFetchIndexRequest","startPolling as startFetchIndexPoll","stopPolling as stopFetchIndexPoll"],Ce,["apiError as startSyncApiError","apiSuccess as startSyncApiSuccess","makeRequest as makeStartSyncRequest"],Ye,["fetchCrawlerData"]],values:[Be,["indexName"],Ve,["fetchIndexApiData","status as fetchIndexApiStatus","indexData","isInitialLoading"]]},events:({actions:e})=>({beforeUnmount:()=>{e.stopFetchIndexPoll(),e.resetFetchIndexApi()}}),listeners:({actions:e,values:t})=>({fetchIndex:()=>{const{indexName:t}=Be.values;e.makeFetchIndexRequest({indexName:t})},fetchIndexApiSuccess:n=>{Object(P.i)(n)&&n.name===t.indexName&&e.fetchCrawlerData(),t.recheckIndexLoading&&(e.resetRecheckIndexLoading(),Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.index.recheckSuccess.message",{defaultMessage:"Your connector has been rechecked."})))},makeStartSyncRequest:()=>Object(Q.d)(),recheckIndex:()=>e.fetchIndex(),setIndexName:({indexName:t})=>{e.startFetchIndexPoll(t)},startSync:()=>{Object(P.g)(t.fetchIndexApiData)&&e.makeStartSyncRequest({connectorId:t.fetchIndexApiData.connector.id})},startSyncApiError:e=>Object(Q.e)(e),startSyncApiSuccess:()=>{Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.index.syncSuccess.message",{defaultMessage:"Successfully scheduled a sync, waiting for a connector to pick it up"}))}}),path:["enterprise_search","content","index_view_logic"],reducers:{localSyncNowValue:[!1,{fetchIndexApiSuccess:(e,t)=>!!Object(P.g)(t)&&t.connector.sync_now,startSyncApiSuccess:()=>!0}],recheckIndexLoading:[!1,{recheckIndex:()=>!0,resetRecheckIndexLoading:()=>!1}]},selectors:({selectors:e})=>({connector:[()=>[e.indexData],e=>e&&(Object(P.h)(e)||Object(P.i)(e))?e.connector:void 0],connectorError:[()=>[e.connector],e=>null==e?void 0:e.error],connectorId:[()=>[e.indexData],e=>Object(P.h)(e)?e.connector.id:null],error:[()=>[e.connector],e=>(null==e?void 0:e.error)||(null==e?void 0:e.last_sync_error)||null],hasAdvancedFilteringFeature:[()=>[e.connector],e=>!(null==e||!e.features)&&e.features[we.b.FILTERING_ADVANCED_CONFIG]],hasBasicFilteringFeature:[()=>[e.connector],e=>!(null==e||!e.features)&&e.features[we.b.FILTERING_RULES]],hasFilteringFeature:[()=>[e.hasAdvancedFilteringFeature,e.hasBasicFilteringFeature],(e,t)=>e||t],index:[()=>[e.indexData],e=>e?Object(P.d)(e):void 0],ingestionMethod:[()=>[e.indexData],e=>Object(P.a)(e)],ingestionStatus:[()=>[e.indexData],e=>Object(P.b)(e)],isCanceling:[()=>[e.syncStatus],e=>e===we.f.CANCELING],isConnectorIndex:[()=>[e.indexData],e=>Object(P.g)(e)],isSyncing:[()=>[e.syncStatus],e=>e===we.f.IN_PROGRESS],isWaitingForSync:[()=>[e.fetchIndexApiData,e.localSyncNowValue],(e,t)=>{var n;return(null==e||null===(n=e.connector)||void 0===n?void 0:n.sync_now)||t}],lastUpdated:[()=>[e.fetchIndexApiData],e=>Object(P.c)(e)],pipelineData:[()=>[e.connector],e=>{var t;return null!==(t=null==e?void 0:e.pipeline)&&void 0!==t?t:void 0}],syncStatus:[()=>[e.fetchIndexApiData],e=>{var t,n;return null!==(t=null==e||null===(n=e.connector)||void 0===n?void 0:n.last_sync_status)&&void 0!==t?t:null}]})}),st=Object(s.kea)({actions:{cancelSyncs:!0},connect:{actions:[it,["apiError as cancelSyncsApiError","apiSuccess as cancelSyncsApiSuccess","makeRequest as makeCancelSyncsRequest"]],values:[rt,["connectorId","isConnectorIndex"]]},listeners:({actions:e,values:t})=>({cancelSyncs:()=>{t.isConnectorIndex&&t.connectorId&&e.makeCancelSyncsRequest({connectorId:t.connectorId})},cancelSyncsApiError:e=>Object(Q.e)(e),cancelSyncsApiSuccess:()=>{Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.cancelSyncs.successMessage",{defaultMessage:"Successfully canceled syncs"}))},makeCancelSyncsRequest:()=>{Object(Q.d)()}})}),ot=()=>{const{ingestionMethod:e,ingestionStatus:t,isCanceling:n,isSyncing:i,isWaitingForSync:r}=Object(s.useValues)(rt),{cancelSyncs:o}=Object(s.useActions)(st),{status:c}=Object(s.useValues)(it),{startSync:l}=Object(s.useActions)(rt),[u,d]=Object(a.useState)(!1),p=()=>d(!1),g=()=>r?w.i18n.translate("xpack.enterpriseSearch.content.index.syncButton.waitingForSync.label",{defaultMessage:"Waiting for sync"}):i&&t!==q.b.ERROR?w.i18n.translate("xpack.enterpriseSearch.content.index.syncButton.syncing.label",{defaultMessage:"Syncing"}):w.i18n.translate("xpack.enterpriseSearch.content.index.syncButton.label",{defaultMessage:"Sync"}),h=(i||r)&&t!==q.b.ERROR;return Object(m.jsx)(v.EuiPopover,{button:Object(m.jsx)(v.EuiButton,{"data-telemetry-id":`entSearchContent-${e}-header-sync-openSyncMenu`,iconType:"arrowDown",iconSide:"right",onClick:()=>d(!u),fill:!0},Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},h&&Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiLoadingSpinner,{size:"m"})),Object(m.jsx)(v.EuiFlexItem,null,g()))),isOpen:u,closePopover:p,panelPaddingSize:"none",anchorPosition:"downLeft"},Object(m.jsx)(v.EuiContextMenuPanel,{items:[...h?[]:[Object(m.jsx)(v.EuiContextMenuItem,{"data-telemetry-id":`entSearchContent-${e}-header-sync-startSync`,disabled:t===q.b.INCOMPLETE,key:"Sync",onClick:()=>{p(),l()},icon:"play"},g())],Object(m.jsx)(v.EuiContextMenuItem,{"data-telemetry-id":`entSearchContent-${e}-header-sync-cancelSync`,disabled:n&&t!==q.b.ERROR||c===U.a.LOADING,key:"Cancel sync",onClick:()=>{p(),o()},icon:"trash"},w.i18n.translate("xpack.enterpriseSearch.index.header.cancelSyncsTitle",{defaultMessage:"Cancel Syncs"}))]}))},ct=e=>{const t=Object(P.a)(e);return[...Object(P.i)(e)?[Object(m.jsx)(Xe,null)]:[],...Object(P.g)(e)?[Object(m.jsx)(ot,null)]:[],Object(m.jsx)(at,{indexName:null==e?void 0:e.name,ingestionMethod:t,isHiddenIndex:null==e?void 0:e.hidden})]},lt=Object(V.a)(["generate_connector_api_key_api_logic"],(async({indexName:e})=>{const t=`/internal/enterprise_search/indices/${e}/api_key`;return await l.a.values.http.post(t)})),ut=({apiKey:e,label:t})=>Object(m.jsx)(i.a.Fragment,null,t&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiFormLabel,null,t),Object(m.jsx)(v.EuiSpacer,{size:"xs"})),Object(m.jsx)(v.EuiCodeBlock,{fontSize:"m",paddingSize:"m",color:"dark",isCopyable:!0},e)),dt=({onCancel:e,onConfirm:t})=>Object(m.jsx)(v.EuiConfirmModal,{title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.apiKey.confirmModal.title",{defaultMessage:"Generate an Elasticsearch API key"}),onCancel:e,onConfirm:t,cancelButtonText:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.apiKey.confirmModal.cancelButton.label",{defaultMessage:"Cancel"}),confirmButtonText:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.apiKey.confirmModal.confirmButton.label",{defaultMessage:"Generate API key"}),defaultFocusedButton:"confirm"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.apiKey.confirmModal.description",{defaultMessage:"Generating a new API key will invalidate the previous key. Are you sure you want to generate a new API key? This can not be undone."})),pt=({hasApiKey:e,indexName:t})=>{const{makeRequest:n,apiReset:r}=Object(s.useActions)(lt),{data:o,status:c}=Object(s.useValues)(lt);Object(a.useEffect)((()=>(r(),r)),[t]);const[l,u]=Object(a.useState)(!1);return Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},l&&Object(m.jsx)(dt,{onCancel:()=>{u(!1)},onConfirm:()=>{n({indexName:t}),u(!1)}}),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.apiKey.description",{defaultMessage:"First, generate an Elasticsearch API key. This {apiKeyName} key will enable read and write permissions for the connector to index documents to the created {indexName} index. Save the key in a safe place, as you will need it to configure your connector.",values:{apiKeyName:`${t}-connector`,indexName:t}}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{onClick:()=>{e||o?u(!0):n({indexName:t})},isLoading:c===U.a.LOADING},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.apiKey.button.label",{defaultMessage:"Generate API key"}))))),o&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(ut,{apiKey:null==o?void 0:o.encoded,label:"API Key"}))))},gt=Object(V.a)(["content","configuration_connector_api_logic"],(async({configuration:e,connectorId:t,indexName:n})=>{const a=`/internal/enterprise_search/connectors/${t}/configuration`;return await l.a.values.http.post(a,{body:JSON.stringify(e)}),{configuration:e,indexName:n}})),ht=Object(s.kea)({actions:{saveConfig:!0,setConfigState:e=>({configState:e}),setIsEditing:e=>({isEditing:e}),setLocalConfigEntry:e=>({...e}),setLocalConfigState:e=>({configState:e}),setShouldStartInEditMode:e=>({shouldStartInEditMode:e})},connect:{actions:[gt,["apiError","apiSuccess","makeRequest"],Ve,["apiSuccess as fetchIndexApiSuccess"]],values:[Ve,["indexData as index"]]},events:({actions:e,values:t})=>({afterMount:()=>{e.setConfigState(Object(P.g)(t.index)?t.index.connector.configuration:{}),!Object(P.g)(t.index)||t.index.connector.status!==we.a.CREATED&&t.index.connector.status!==we.a.NEEDS_CONFIGURATION||e.setShouldStartInEditMode(!0)}}),listeners:({actions:e,values:t})=>({apiError:e=>Object(Q.e)(e),apiSuccess:({indexName:e})=>{Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.configuration.successToast.title",{defaultMessage:"Configuration successfully updated"})),Ve.actions.makeRequest({indexName:e})},fetchIndexApiSuccess:n=>{!t.isEditing&&Object(P.g)(n)&&e.setConfigState(n.connector.configuration),!t.isEditing&&t.shouldStartInEditMode&&Object(P.g)(n)&&n.connector.status===we.a.NEEDS_CONFIGURATION&&n.connector.configuration&&Object.entries(n.connector.configuration).length>0&&e.setIsEditing(!0)},makeRequest:()=>Object(Q.d)(),saveConfig:()=>{Object(P.g)(t.index)&&e.makeRequest({configuration:t.localConfigState,connectorId:t.index.connector.id,indexName:t.index.connector.index_name})},setIsEditing:n=>{n&&e.setLocalConfigState(t.configState)}}),path:["enterprise_search","content","connector_configuration"],reducers:()=>({configState:[{},{apiSuccess:(e,{configuration:t})=>t,setConfigState:(e,{configState:t})=>t}],isEditing:[!1,{apiSuccess:()=>!1,setIsEditing:(e,{isEditing:t})=>t}],localConfigState:[{},{setLocalConfigEntry:(e,{key:t,label:n,value:a})=>({...e,[t]:{label:n,value:a}}),setLocalConfigState:(e,{configState:t})=>t}],shouldStartInEditMode:[!1,{apiSuccess:()=>!1,setShouldStartInEditMode:(e,{shouldStartInEditMode:t})=>t}]}),selectors:({selectors:e})=>({configView:[()=>[e.configState],e=>Object.keys(e).map((t=>({key:t,label:e[t].label,value:e[t].value}))).sort(((e,t)=>e.key.localeCompare(t.key)))],localConfigView:[()=>[e.localConfigState],e=>Object.keys(e).map((t=>({key:t,label:e[t].label,value:e[t].value}))).sort(((e,t)=>e.key.localeCompare(t.key)))]})}),ft=()=>{const{status:e}=Object(s.useValues)(gt),{localConfigView:t}=Object(s.useValues)(ht),{saveConfig:n,setIsEditing:a,setLocalConfigEntry:i}=Object(s.useActions)(ht);return Object(m.jsx)(v.EuiForm,{onSubmit:e=>{e.preventDefault(),n()},component:"form"},t.map((({key:t,label:n,value:a})=>Object(m.jsx)(v.EuiFormRow,{label:null!=n?n:"",key:t},Object(m.jsx)(v.EuiFieldText,{value:a,disabled:e===U.a.LOADING,onChange:e=>{i({key:t,label:n,value:e.target.value})}})))),Object(m.jsx)(v.EuiFormRow,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-configuration-saveConfiguration",type:"submit",isLoading:e===U.a.LOADING},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.config.submitButton.title",{defaultMessage:"Save configuration"}))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-connector-configuration-cancelEdit",isDisabled:e===U.a.LOADING,onClick:()=>{a(!1)}},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.config.cancelEditingButton.title",{defaultMessage:"Cancel"}))))))},mt=({children:e})=>{const{connectorError:t}=Object(s.useValues)(rt),{configView:n,isEditing:a}=Object(s.useValues)(ht),{setIsEditing:i}=Object(s.useActions)(ht),r=n.map((({label:e,value:t})=>({description:null!=t?t:"--",title:e})));return Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},e&&Object(m.jsx)(v.EuiFlexItem,null,e),Object(m.jsx)(v.EuiFlexItem,null,a?Object(m.jsx)(ft,null):r.length>0&&Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiDescriptionList,{listItems:r})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-overview-configuration-editConfiguration",onClick:()=>i(!a)},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.config.editButton.title",{defaultMessage:"Edit configuration"}))))))),!!t&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCallOut,{color:"danger",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.config.error.title",{defaultMessage:"Connector error"})},Object(m.jsx)(v.EuiText,{size:"s"},t))))},jt=Object(V.a)(["content","connector_name_and_description_api_logic"],(async({connectorId:e,description:t=null,indexName:n,name:a=""})=>{const i=`/internal/enterprise_search/connectors/${e}/name_and_description`;return await l.a.values.http.put(i,{body:JSON.stringify({description:t,name:a})}),{description:t,indexName:n,name:a}})),xt=Object(s.kea)({actions:{saveNameAndDescription:!0,setIsEditing:e=>({isEditing:e}),setLocalNameAndDescription:e=>e,setNameAndDescription:e=>e,updateLocalNameAndDescription:e=>e},connect:{actions:[jt,["apiError","apiSuccess","makeRequest"],Ve,["apiSuccess as fetchIndexApiSuccess"]],values:[Ve,["indexData as index"]]},events:({actions:e,values:t})=>({afterMount:()=>e.setNameAndDescription(Object(P.g)(t.index)||Object(P.i)(t.index)?t.index.connector:{})}),listeners:({actions:e,values:t})=>({apiError:e=>Object(Q.e)(e),apiSuccess:({indexName:e})=>{Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.configuration.successToast.title",{defaultMessage:"Configuration successfully updated"})),Ve.actions.makeRequest({indexName:e})},fetchIndexApiSuccess:n=>{!t.isEditing&&Object(P.g)(n)&&e.setNameAndDescription(n.connector)},makeRequest:()=>Object(Q.d)(),saveNameAndDescription:()=>{(Object(P.g)(t.index)||Object(P.i)(t.index))&&e.makeRequest({connectorId:t.index.connector.id,indexName:t.index.connector.index_name,...t.localNameAndDescription})},setIsEditing:n=>{n&&e.setLocalNameAndDescription(t.nameAndDescription)}}),path:["enterprise_search","content","connector_name_and_description"],reducers:()=>({isEditing:[!1,{apiSuccess:()=>!1,setIsEditing:(e,{isEditing:t})=>t}],localNameAndDescription:[{},{setLocalNameAndDescription:(e,t)=>t,updateLocalNameAndDescription:(e,t)=>({...e,...t})}],nameAndDescription:[{},{apiSuccess:(e,{description:t,name:n})=>({description:t,name:n}),setNameAndDescription:(e,t)=>t}]})}),bt=()=>{const{localNameAndDescription:{name:e,description:t}}=Object(s.useValues)(xt),{updateLocalNameAndDescription:n}=Object(s.useActions)(xt);return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiFormRow,{label:$.s},Object(m.jsx)(v.EuiFieldText,{required:!0,value:null!=e?e:"",onChange:e=>{n({name:e.target.value})}})),Object(m.jsx)(v.EuiFormRow,{label:$.k},Object(m.jsx)(v.EuiTextArea,{placeholder:$.t,value:t||"",onChange:e=>{n({description:e.target.value})}})))},yt=()=>{const{status:e}=Object(s.useValues)(jt),{saveNameAndDescription:t,setIsEditing:n}=Object(s.useActions)(xt);return Object(m.jsx)(v.EuiForm,{onSubmit:e=>{e.preventDefault(),t()},component:"form"},Object(m.jsx)(bt,null),Object(m.jsx)(v.EuiFormRow,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-configuration-nameAndDescription-save",type:"submit",isLoading:e===U.a.LOADING},$.w)),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-connector-configuration-nameAndDescription-cancel",isDisabled:e===U.a.LOADING,onClick:()=>{n(!1)}},$.d)))))},Mt=()=>{const{index:e}=Object(s.useValues)(rt),{isEditing:t,nameAndDescription:{name:n,description:a}}=Object(s.useValues)(xt),{setIsEditing:r}=Object(s.useActions)(xt);return Object(P.g)(e)?Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nameAndDescriptionForm.description",{defaultMessage:"By naming and describing this connector your colleagues and wider team will know what this connector is meant for."}))),Object(m.jsx)(v.EuiFlexItem,null,t?Object(m.jsx)(yt,null):Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiDescriptionList,{listItems:[{description:null!=n?n:"--",title:$.s},{description:a||"--",title:$.k}]}),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{onClick:()=>r(!t)},$.l)))))):Object(m.jsx)(i.a.Fragment,null)};var Ot=n(414),St=n.n(Ot),Et=n(415),vt=n.n(Et);const wt={mongodb:St.a,mysql:vt.a},It=[{docsUrl:D.a.connectorsMongoDB,externalAuthDocsUrl:"https://www.mongodb.com/docs/atlas/app-services/authentication/",externalDocsUrl:"https://www.mongodb.com/docs/",name:w.i18n.translate("xpack.enterpriseSearch.content.nativeConnectors.mongodb.name",{defaultMessage:"MongoDB"}),serviceType:"mongodb"},{docsUrl:D.a.connectorsMySQL,externalDocsUrl:"https://dev.mysql.com/doc/",name:w.i18n.translate("xpack.enterpriseSearch.content.nativeConnectors.mysql.name",{defaultMessage:"MySQL"}),serviceType:"mysql"}],Nt=()=>{const{indexName:e}=Object(s.useValues)(Be);return Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnectorAdvancedConfiguration.description",defaultMessage:"Finalize your connector by triggering a one time sync, or setting a recurring sync schedule."}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(k.b,{"data-telemetry-id":"entSearchContent-connector-configuration-setScheduleAndSync",to:`${Object(Z.a)(R.g,{indexName:e,tabId:Bs.SCHEDULING})}`},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnectorAdvancedConfiguration.schedulingButtonLabel",{defaultMessage:"Set schedule and sync"}))))))},Dt=({nativeConnector:e,status:t})=>Object(m.jsx)(mt,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.config.encryptionWarningMessage",{defaultMessage:"Encryption for data source credentials is unavailable in this technical preview. Your data source credentials will be stored, unencrypted, in Elasticsearch."})),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"row"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiLink,{href:D.a.elasticsearchSecureCluster,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.config.securityDocumentationLinkLabel",{defaultMessage:"Learn more about Elasticsearch security"}))),e.externalAuthDocsUrl&&Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiLink,{href:e.externalAuthDocsUrl,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.config.sourceSecurityDocumentationLinkLabel",{defaultMessage:"{name} authentication",values:{name:e.name}})))),t===we.a.CONNECTED&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiCallOut,{iconType:"check",color:"success",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.connectorConnected",{defaultMessage:"Your connector {name} has connected to Enterprise Search successfully.",values:{name:e.name}})}))),Tt=({nativeConnector:e})=>{const{docsUrl:t,externalDocsUrl:n,name:a}=e;return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.researchConfiguration.description",{defaultMessage:"{name} supports a variety of authentication mechanisms which will be needed for this connector to connect to your instance. Consult with your administrator for the correct credentials to use to connect.",values:{name:a}})),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"row",alignItems:"flexStart"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiLink,{target:"_blank",href:t},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.researchConfiguration.connectorDocumentationLinkLabel",{defaultMessage:"Documentation"}))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiLink,{target:"_blank",href:n},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.researchConfiguration.serviceDocumentationLinkLabel",{defaultMessage:"{name} documentation",values:{name:a}})))))},kt=()=>{const{index:e}=Object(s.useValues)(rt);if(!Object(P.g)(e))return Object(m.jsx)(i.a.Fragment,null);const t=It.find((t=>t.serviceType===e.connector.service_type));if(!t)return Object(m.jsx)(i.a.Fragment,null);const n=!!e.connector.description,a=(r=e.connector.configuration,!!Object.entries(r).find((([,e])=>!(null==e||!e.value))));var r;const o=e.connector.last_synced||e.connector.scheduling.enabled,c=n||a||o,l=wt[t.serviceType];return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:2},Object(m.jsx)(v.EuiPanel,{hasShadow:!1,hasBorder:!0},Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"m",direction:"row",alignItems:"center"},l&&Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiIcon,{size:"xl",type:l})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiTitle,{size:"m"},Object(m.jsx)("h3",null,t.name)))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiSteps,{steps:[{children:Object(m.jsx)(Tt,{nativeConnector:t}),status:c?"complete":"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.steps.researchConfigurationTitle",{defaultMessage:"Research configuration requirements"}),titleSize:"xs"},{children:Object(m.jsx)(Mt,null),status:n?"complete":"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.steps.nameAndDescriptionTitle",{defaultMessage:"Name and description"}),titleSize:"xs"},{children:Object(m.jsx)(Dt,{nativeConnector:t,status:e.connector.status}),status:a?"complete":"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.steps.configurationTitle",{defaultMessage:"Configuration"}),titleSize:"xs"},{children:Object(m.jsx)(Nt,null),status:o?"complete":"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.steps.advancedConfigurationTitle",{defaultMessage:"Advanced configuration"}),titleSize:"xs"}]}))),Object(m.jsx)(v.EuiFlexItem,{grow:1},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiPanel,{hasBorder:!0,hasShadow:!1},Object(m.jsx)(v.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiIcon,{type:"clock"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"xxs"},Object(m.jsx)("h4",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.schedulingReminder.title",{defaultMessage:"Configurable sync schedule"}))))),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.schedulingReminder.description",{defaultMessage:"Remember to set a sync schedule in the Scheduling tab to continually refresh your searchable data."})))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiPanel,{hasBorder:!0,hasShadow:!1},Object(m.jsx)(v.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiIcon,{type:"globe"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"xxs"},Object(m.jsx)("h4",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.securityReminder.title",{defaultMessage:"Document level security"}))))),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.securityReminder.description",{defaultMessage:"Restrict and personalize the read access users have to the index documents at query time."}),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiLink,{href:D.a.documentLevelSecurity,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nativeConnector.securityReminder.securityLinkLabel",{defaultMessage:"Document level security"})))))))))},Ct=()=>{var e;const{data:t}=Object(s.useValues)(lt),{index:n,recheckIndexLoading:a}=Object(s.useValues)(rt),{indexName:r}=Object(s.useValues)(Be),{recheckIndex:o}=Object(s.useActions)(rt);if(!Object(P.g)(n))return Object(m.jsx)(i.a.Fragment,null);if(n.connector.is_native&&n.connector.service_type)return Object(m.jsx)(kt,null);const c=!!(null!==(e=n.connector.api_key_id)&&void 0!==e?e:t);return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:2},Object(m.jsx)(v.EuiPanel,{hasShadow:!1,hasBorder:!0},Object(m.jsx)(v.EuiSteps,{steps:[{children:Object(m.jsx)(pt,{indexName:r,hasApiKey:!!n.connector.api_key_id}),status:c?"complete":"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.steps.generateApiKey.title",{defaultMessage:"Generate an API key"}),titleSize:"xs"},{children:Object(m.jsx)(Mt,null),status:n.connector.description?"complete":"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.steps.nameAndDescriptionTitle",{defaultMessage:"Name and description"}),titleSize:"xs"},{children:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.description.firstParagraph",{defaultMessage:"The connectors repository contains several connector client examples to help you utilize our framework for accelerated development against custom data sources."})),Object(m.jsx)(v.EuiLink,{href:"https://github.com/elastic/connectors",target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.button.label",{defaultMessage:"Explore the connectors repository"})),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.description.secondParagraph",defaultMessage:"The connectors repository contains several {link} to help you utilize our framework for accelerated development against custom data sources.",values:{link:Object(m.jsx)(v.EuiLink,{href:"https://github.com/elastic/connectors-ruby/tree/main/lib/connectors",target:"_blank",external:!0},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.clientExamplesLink",{defaultMessage:"connector client examples"}))}})),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.description.thirdParagraph",defaultMessage:"In this step, you will need to clone or fork the repository, and copy the generated API key and connector ID to the associated {link}. The connector ID will identify this connector to Enterprise Search.",values:{link:Object(m.jsx)(v.EuiLink,{href:"https://github.com/elastic/connectors-ruby/tree/main/config",target:"_blank",external:!0},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.configurationFileLink",{defaultMessage:"configuration file"}))}})),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiCodeBlock,{fontSize:"m",paddingSize:"m",color:"dark",isCopyable:!0},`${null!=t&&t.encoded?`elasticsearch:\n  api_key: "${null==t?void 0:t.encoded}"\n`:""}connector_id: "${n.connector.id}"\n            `),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.connectorDeployedText",{defaultMessage:"Once you’ve configured the connector, deploy the connector to your self managed infrastructure."}))),status:n.connector.status&&n.connector.status!==we.a.CREATED?"complete":"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.steps.deployConnector.title",{defaultMessage:"Deploy a connector"}),titleSize:"xs"},{children:Object(m.jsx)(mt,null,n.connector.status&&n.connector.status!==we.a.CREATED?Object(m.jsx)(v.EuiCallOut,{iconType:"check",color:"success",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.connectorConnected",{defaultMessage:"Your connector {name} has connected to Enterprise Search successfully.",values:{name:n.connector.name}})}):Object(m.jsx)(v.EuiCallOut,{title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.waitingForConnectorTitle",{defaultMessage:"Waiting for your connector"}),iconType:"iInCircle"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.waitingForConnectorText",{defaultMessage:"Your connector has not connected to Enterprise Search. Troubleshoot your configuration and refresh the page."}),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-configuration-recheckNow",iconType:"refresh",onClick:()=>o(),isLoading:a},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.connectorPackage.waitingForConnector.button.label",{defaultMessage:"Recheck now"})))),status:n.connector.status===we.a.CONNECTED?"complete":"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.steps.enhance.title",{defaultMessage:"Enhance your connector client"}),titleSize:"xs"},{children:Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.scheduleSync.description",{defaultMessage:"Once your connectors are configured to your liking, don’t forget to set a recurring sync schedule to make sure your documents are indexed and relevant. You can also trigger a one-time sync without enabling a sync schedule."}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(k.b,{"data-telemetry-id":"entSearchContent-connector-configuration-setScheduleAndSync",to:`${Object(Z.a)(R.g,{indexName:r,tabId:Bs.SCHEDULING})}`},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.steps.schedule.button.label",{defaultMessage:"Set schedule and sync"})))))),status:n.connector.scheduling.enabled?"complete":"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.steps.schedule.title",{defaultMessage:"Set a recurring sync schedule"}),titleSize:"xs"}]}))),Object(m.jsx)(v.EuiFlexItem,{grow:1},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiPanel,{hasBorder:!0,hasShadow:!1},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,null,Object(m.jsx)("h4",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.support.title",{defaultMessage:"Support and documentation"})))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.support.description",{defaultMessage:"Your connector will have to be deployed to your own infrastructure."}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiLink,{href:D.a.connectors,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.support.viewDocumentation.label",{defaultMessage:"View documentation"}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(k.d,{to:"/app/management/security/api_keys",shouldNotCreateHref:!0},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.support.manageKeys.label",{defaultMessage:"Manage keys"}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiLink,{href:"https://github.com/elastic/connectors-ruby#readme",target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.support.readme.label",{defaultMessage:"Connector readme"}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiLink,{href:"https://discuss.elastic.co/c/enterprise-search/84",target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.support.getHelp.label",{defaultMessage:"Get help"}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiLink,{href:"https://github.com/elastic/connectors-ruby/issues",target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.support.issue.label",{defaultMessage:"File an issue"}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(k.d,{to:"/app/integrations/browse",shouldNotCreateHref:!0},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.support.dontSeeIntegration.label",{defaultMessage:"Don’t see the integration you’re looking for?"}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiLink,{href:"https://docs.elastic.co/search-ui/tutorials/workplace-search",target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.support.searchUI.label",{defaultMessage:"Use Search UI for Workplace Search"}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiLink,{href:"https://www.elastic.co/kibana/feedback",target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.support.connectorFeedback.label",{defaultMessage:"Connector feedback"}))))))))))};var _t=n(0),At=n.n(_t);function Lt(e){const t={second:void 0,minute:void 0,hour:void 0,day:void 0,date:void 0,month:void 0},n=e.split(" ");return n.length>=1&&(t.second=n[0]),n.length>=2&&(t.minute=n[1]),n.length>=3&&(t.hour=n[2]),n.length>=4&&(t.date=n[3]),n.length>=5&&(t.month=n[4]),n.length>=6&&(t.day=n[5]),t}function zt({second:e,minute:t,hour:n,day:a,date:i,month:r}){return`${e} ${t} ${n} ${i} ${r} ${a}`}const Ft={0:w.i18n.translate("xpack.enterpriseSearch.cronEditor.day.sunday",{defaultMessage:"Sunday"}),1:w.i18n.translate("xpack.enterpriseSearch.cronEditor.day.monday",{defaultMessage:"Monday"}),2:w.i18n.translate("xpack.enterpriseSearch.cronEditor.day.tuesday",{defaultMessage:"Tuesday"}),3:w.i18n.translate("xpack.enterpriseSearch.cronEditor.day.wednesday",{defaultMessage:"Wednesday"}),4:w.i18n.translate("xpack.enterpriseSearch.cronEditor.day.thursday",{defaultMessage:"Thursday"}),5:w.i18n.translate("xpack.enterpriseSearch.cronEditor.day.friday",{defaultMessage:"Friday"}),6:w.i18n.translate("xpack.enterpriseSearch.cronEditor.day.saturday",{defaultMessage:"Saturday"})},Rt={0:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.january",{defaultMessage:"January"}),1:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.february",{defaultMessage:"February"}),2:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.march",{defaultMessage:"March"}),3:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.april",{defaultMessage:"April"}),4:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.may",{defaultMessage:"May"}),5:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.june",{defaultMessage:"June"}),6:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.july",{defaultMessage:"July"}),7:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.august",{defaultMessage:"August"}),8:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.september",{defaultMessage:"September"}),9:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.october",{defaultMessage:"October"}),10:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.november",{defaultMessage:"November"}),11:w.i18n.translate("xpack.enterpriseSearch.cronEditor.month.december",{defaultMessage:"December"})};function Pt(e){const t=e&&e.toString(),n=t&&t.substr(-1);let a;if(!n)return e.toString();switch(parseFloat(n)){case 1:a="st";break;case 2:a="nd";break;case 3:a="rd";break;default:a="th"}return`${t}${a}`}function Ut(e,t){const n=[];for(let a=e;a<=t;a++)n.push(a);return n}const $t=Ut(0,59).map((e=>({value:e.toString(),text:Object($e.padStart)(e.toString(),2,"0")}))),Qt=Ut(0,23).map((e=>({value:e.toString(),text:Object($e.padStart)(e.toString(),2,"0")}))),Vt=Ut(1,7).map((e=>{return{value:e.toString(),text:(t=e-1,Ft[t])};var t})),Bt=Ut(1,31).map((e=>({value:e.toString(),text:Pt(e)}))),Yt=Ut(1,12).map((e=>{return{value:e.toString(),text:(t=e-1,Rt[t])};var t})),qt=[{value:"MINUTE",text:"minute"},{value:"HOUR",text:"hour"},{value:"DAY",text:"day"},{value:"WEEK",text:"week"},{value:"MONTH",text:"month"},{value:"YEAR",text:"year"}],Gt={MINUTE:{},HOUR:{minute:!0},DAY:{hour:!0,minute:!0},WEEK:{day:!0,hour:!0,minute:!0},MONTH:{date:!0,hour:!0,minute:!0},YEAR:{month:!0,date:!0,hour:!0,minute:!0}},Wt={MINUTE:{second:"0",minute:"*",hour:"*",date:"*",month:"*",day:"?"},HOUR:{second:"0",minute:"0",hour:"*",date:"*",month:"*",day:"?"},DAY:{second:"0",minute:"0",hour:"0",date:"*",month:"*",day:"?"},WEEK:{second:"0",minute:"0",hour:"0",date:"?",month:"*",day:"7"},MONTH:{second:"0",minute:"0",hour:"0",date:"1",month:"*",day:"?"},YEAR:{second:"0",minute:"0",hour:"0",date:"1",month:"1",day:"?"}},Ht=({disabled:e,minute:t,minuteOptions:n,hour:i,hourOptions:r,onChange:s})=>Object(m.jsx)(a.Fragment,null,Object(m.jsx)(v.EuiFormRow,{label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.cronEditor.cronDaily.fieldTimeLabel",defaultMessage:"Time"}),fullWidth:!0,"data-test-subj":"cronFrequencyConfiguration"},Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiSelect,{disabled:e,options:r,value:i,"aria-label":w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronDaily.hourSelectLabel",{defaultMessage:"Hour"}),onChange:e=>s({hour:e.target.value}),fullWidth:!0,prepend:w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronDaily.fieldHour.textAtLabel",{defaultMessage:"At"}),"data-test-subj":"cronFrequencyDailyHourSelect"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiSelect,{disabled:e,options:n,value:t,"aria-label":w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronDaily.minuteSelectLabel",{defaultMessage:"Minute"}),onChange:e=>s({minute:e.target.value}),fullWidth:!0,prepend:":","data-test-subj":"cronFrequencyDailyMinuteSelect"}))))),Jt=({disabled:e,minute:t,minuteOptions:n,onChange:i})=>Object(m.jsx)(a.Fragment,null,Object(m.jsx)(v.EuiFormRow,{label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.cronEditor.cronHourly.fieldTimeLabel",defaultMessage:"Minute"}),fullWidth:!0,"data-test-subj":"cronFrequencyConfiguration"},Object(m.jsx)(v.EuiSelect,{disabled:e,options:n,value:t,onChange:e=>i({minute:e.target.value}),fullWidth:!0,prepend:w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronHourly.fieldMinute.textAtLabel",{defaultMessage:"At"}),"data-test-subj":"cronFrequencyHourlyMinuteSelect"}))),Zt=({disabled:e,minute:t,minuteOptions:n,hour:i,hourOptions:r,date:s,dateOptions:o,onChange:c})=>Object(m.jsx)(a.Fragment,null,Object(m.jsx)(v.EuiFormRow,{label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.cronEditor.cronMonthly.fieldDateLabel",defaultMessage:"Date"}),fullWidth:!0,"data-test-subj":"cronFrequencyConfiguration"},Object(m.jsx)(v.EuiSelect,{disabled:e,options:o,value:s,onChange:e=>c({date:e.target.value}),fullWidth:!0,prepend:w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronMonthly.textOnTheLabel",{defaultMessage:"On the"}),"data-test-subj":"cronFrequencyMonthlyDateSelect"})),Object(m.jsx)(v.EuiFormRow,{label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.cronEditor.cronMonthly.fieldTimeLabel",defaultMessage:"Time"}),fullWidth:!0,"data-test-subj":"cronFrequencyConfiguration"},Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiSelect,{disabled:e,options:r,value:i,"aria-label":w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronMonthly.hourSelectLabel",{defaultMessage:"Hour"}),onChange:e=>c({hour:e.target.value}),fullWidth:!0,prepend:w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronMonthly.fieldHour.textAtLabel",{defaultMessage:"At"}),"data-test-subj":"cronFrequencyMonthlyHourSelect"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiSelect,{disabled:e,options:n,value:t,"aria-label":w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronMonthly.minuteSelectLabel",{defaultMessage:"Minute"}),onChange:e=>c({minute:e.target.value}),fullWidth:!0,prepend:":","data-test-subj":"cronFrequencyMonthlyMinuteSelect"}))))),Kt=({disabled:e,minute:t,minuteOptions:n,hour:i,hourOptions:r,day:s,dayOptions:o,onChange:c})=>Object(m.jsx)(a.Fragment,null,Object(m.jsx)(v.EuiFormRow,{label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.cronEditor.cronWeekly.fieldDateLabel",defaultMessage:"Day"}),fullWidth:!0,"data-test-subj":"cronFrequencyConfiguration"},Object(m.jsx)(v.EuiSelect,{disabled:e,options:o,value:s,onChange:e=>c({day:e.target.value}),fullWidth:!0,prepend:w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronWeekly.textOnLabel",{defaultMessage:"On"}),"data-test-subj":"cronFrequencyWeeklyDaySelect"})),Object(m.jsx)(v.EuiFormRow,{label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.cronEditor.cronWeekly.fieldTimeLabel",defaultMessage:"Time"}),fullWidth:!0,"data-test-subj":"cronFrequencyConfiguration"},Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiSelect,{disabled:e,options:r,value:i,"aria-label":w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronWeekly.hourSelectLabel",{defaultMessage:"Hour"}),onChange:e=>c({hour:e.target.value}),fullWidth:!0,prepend:w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronWeekly.fieldHour.textAtLabel",{defaultMessage:"At"}),"data-test-subj":"cronFrequencyWeeklyHourSelect"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiSelect,{disabled:e,options:n,value:t,onChange:e=>c({minute:e.target.value}),"aria-label":w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronWeekly.minuteSelectLabel",{defaultMessage:"Minute"}),fullWidth:!0,prepend:":","data-test-subj":"cronFrequencyWeeklyMinuteSelect"}))))),Xt=({disabled:e,minute:t,minuteOptions:n,hour:i,hourOptions:r,date:s,dateOptions:o,month:c,monthOptions:l,onChange:u})=>Object(m.jsx)(a.Fragment,null,Object(m.jsx)(v.EuiFormRow,{label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.cronEditor.cronYearly.fieldMonthLabel",defaultMessage:"Month"}),fullWidth:!0,"data-test-subj":"cronFrequencyConfiguration"},Object(m.jsx)(v.EuiSelect,{disabled:e,options:l,value:c,onChange:e=>u({month:e.target.value}),fullWidth:!0,prepend:w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronYearly.fieldMonth.textInLabel",{defaultMessage:"In"}),"data-test-subj":"cronFrequencyYearlyMonthSelect"})),Object(m.jsx)(v.EuiFormRow,{label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.cronEditor.cronYearly.fieldDateLabel",defaultMessage:"Date"}),fullWidth:!0,"data-test-subj":"cronFrequencyConfiguration"},Object(m.jsx)(v.EuiSelect,{disabled:e,options:o,value:s,onChange:e=>u({date:e.target.value}),fullWidth:!0,prepend:w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronYearly.fieldDate.textOnTheLabel",{defaultMessage:"On the"}),"data-test-subj":"cronFrequencyYearlyDateSelect"})),Object(m.jsx)(v.EuiFormRow,{label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.cronEditor.cronYearly.fieldTimeLabel",defaultMessage:"Time"}),fullWidth:!0,"data-test-subj":"cronFrequencyConfiguration"},Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiSelect,{disabled:e,options:r,value:i,"aria-label":w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronYearly.hourSelectLabel",{defaultMessage:"Hour"}),onChange:e=>u({hour:e.target.value}),fullWidth:!0,prepend:w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronYearly.fieldHour.textAtLabel",{defaultMessage:"At"}),"data-test-subj":"cronFrequencyYearlyHourSelect"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiSelect,{disabled:e,options:n,value:t,"aria-label":w.i18n.translate("xpack.enterpriseSearch.cronEditor.cronYearly.minuteSelectLabel",{defaultMessage:"Minute"}),onChange:e=>u({minute:e.target.value}),fullWidth:!0,prepend:":","data-test-subj":"cronFrequencyYearlyMinuteSelect"}))))),en=(e,t=[])=>0===t.length?e:e.filter((({value:e})=>!t.includes(e)));class cron_editor_CronEditor extends a.Component{static getDerivedStateFromProps(e){const{cronExpression:t}=e;return Lt(t)}constructor(e){super(e),At()(this,"onChangeFrequency",(e=>{const{onChange:t,fieldToPreferredValueMap:n}=this.props;t({frequency:e,cronExpression:zt(Object.keys(Gt[e]).reduce(((e,t)=>(null!=n[t]&&(e[t]=n[t]),e)),{...Wt[e]})),fieldToPreferredValueMap:n})})),At()(this,"onChangeFields",(e=>{const{onChange:t,frequency:n,fieldToPreferredValueMap:a}=this.props,i=Object.keys(Gt[n]),r={};t({frequency:n,cronExpression:zt(i.reduce(((t,n)=>(void 0!==e[n]?(t[n]=e[n],r[n]=e[n]):t[n]=this.state[n],t)),{...Wt[n]})),fieldToPreferredValueMap:{...a,...r}})}));const{cronExpression:t}=e,n=Lt(t);this.state={...n}}renderForm(){const{frequency:e,disabled:t}=this.props,{minute:n,hour:a,day:i,date:r,month:s}=this.state;switch(e){case"MINUTE":default:return;case"HOUR":return Object(m.jsx)(Jt,{disabled:t,minute:n,minuteOptions:$t,onChange:this.onChangeFields});case"DAY":return Object(m.jsx)(Ht,{disabled:t,minute:n,minuteOptions:$t,hour:a,hourOptions:Qt,onChange:this.onChangeFields});case"WEEK":return Object(m.jsx)(Kt,{disabled:t,minute:n,minuteOptions:$t,hour:a,hourOptions:Qt,day:i,dayOptions:Vt,onChange:this.onChangeFields});case"MONTH":return Object(m.jsx)(Zt,{disabled:t,minute:n,minuteOptions:$t,hour:a,hourOptions:Qt,date:r,dateOptions:Bt,onChange:this.onChangeFields});case"YEAR":return Object(m.jsx)(Xt,{disabled:t,minute:n,minuteOptions:$t,hour:a,hourOptions:Qt,date:r,dateOptions:Bt,month:s,monthOptions:Yt,onChange:this.onChangeFields})}}render(){const{disabled:e,frequency:t,frequencyBlockList:n}=this.props;return Object(m.jsx)(a.Fragment,null,Object(m.jsx)(v.EuiFormRow,{label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.cronEditor.fieldFrequencyLabel",defaultMessage:"Frequency"}),fullWidth:!0},Object(m.jsx)(v.EuiSelect,{disabled:e,autoFocus:this.props.autoFocus,options:en(qt,n),value:t,onChange:e=>this.onChangeFrequency(e.target.value),fullWidth:!0,prepend:w.i18n.translate("xpack.enterpriseSearch.cronEditor.textEveryLabel",{defaultMessage:"Every"}),"data-test-subj":"cronFrequencySelect"})),this.renderForm())}}var tn=n(84);const nn=Object(V.a)(["content","update_connector_scheduling_api_logic"],(async({connectorId:e,scheduling:{enabled:t,interval:n}})=>{const a=`/internal/enterprise_search/connectors/${e}/scheduling`;return await l.a.values.http.post(a,{body:JSON.stringify({enabled:t,interval:n})}),{enabled:t,interval:n}})),an=Object(s.kea)({actions:{setHasChanges:e=>({hasChanges:e})},connect:{actions:[nn,["apiError","apiSuccess","makeRequest"]]},listeners:{apiError:e=>Object(Q.e)(e),apiSuccess:()=>Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.scheduling.successToast.title",{defaultMessage:"Scheduling successfully updated"})),makeRequest:()=>Object(Q.d)()},reducers:{hasChanges:[!1,{apiSuccess:()=>!1,setHasChanges:(e,{hasChanges:t})=>t}]}}),rn=()=>{var e,t;const{index:n,ingestionStatus:r}=Object(s.useValues)(rt),{status:o}=Object(s.useValues)(nn),{makeRequest:c}=Object(s.useActions)(nn),{hasChanges:l}=Object(s.useValues)(an),{setHasChanges:u}=Object(s.useActions)(an),d=null==n||null===(e=n.connector)||void 0===e?void 0:e.scheduling,[p,g]=Object(a.useState)(d),[h,f]=Object(a.useState)({}),[j,x]=Object(a.useState)({expression:null!==(t=null==d?void 0:d.interval)&&void 0!==t?t:"",frequency:null!=d&&d.interval?sn(d.interval):"HOUR"});return Object(P.g)(n)?n.connector.status===we.a.CREATED||n.connector.status===we.a.NEEDS_CONFIGURATION?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiCallOut,{iconType:"iInCircle",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.connectorScheduling.notConnected.title",{defaultMessage:"Configure your connector to schedule a sync"})},Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.connectorScheduling.notConnected.description",{defaultMessage:"Configure and deploy your connector, then return here to set your sync schedule. This schedule will dictate the interval that the connector will sync with your data source for updated documents."})),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(k.b,{"data-telemetry-id":"entSearchContent-connector-scheduling-configure",to:Object(Z.a)(R.g,{indexName:n.name,tabId:Bs.CONFIGURATION}),fill:!0,size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.connectorScheduling.notConnected.button.label",{defaultMessage:"Configure"})))):Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(tn.a,{hasUnsavedChanges:l,messageText:w.i18n.translate("xpack.enterpriseSearch.content.indices.connectorScheduling.unsaved.title",{defaultMessage:"You have not saved your changes, are you sure you want to leave?"})}),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiPanel,{hasShadow:!1,hasBorder:!0,className:"schedulingPanel"},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},r===q.b.ERROR?Object(m.jsx)(v.EuiCallOut,{color:"warning",iconType:"alert",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.connectorScheduling.error.title",{defaultMessage:"Review your connector configuration for reported errors."})}):Object(m.jsx)(i.a.Fragment,null),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiSwitch,{checked:p.enabled,label:w.i18n.translate("xpack.enterpriseSearch.content.indices.connectorScheduling.switch.label",{defaultMessage:"Enable recurring syncs with the following schedule"}),onChange:e=>{g({...p,enabled:e.target.checked}),u(!0)}})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.connectorScheduling.configured.description",{defaultMessage:"Your connector is configured and deployed. Configure a one-time sync by clicking the Sync button, or enable a recurring sync schedule. "}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(cron_editor_CronEditor,{"data-telemetry-id":"entSearchContent-connector-scheduling-editSchedule",disabled:!p.enabled,fieldToPreferredValueMap:h,cronExpression:j.expression,frequency:j.frequency,onChange:({cronExpression:e,frequency:t,fieldToPreferredValueMap:n})=>{x({expression:e,frequency:t}),f(n),g({...p,interval:e}),u(!0)},frequencyBlockList:["MINUTE"]})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-connector-scheduling-resetSchedule",disabled:!l||o===U.a.LOADING,onClick:()=>{var e;g(d),x({expression:null!==(e=null==d?void 0:d.interval)&&void 0!==e?e:"",frequency:null!=d&&d.interval?sn(d.interval):"HOUR"}),u(!1)}},w.i18n.translate("xpack.enterpriseSearch.content.indices.connectorScheduling.resetButton.label",{defaultMessage:"Reset"}))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-scheduling-saveSchedule",disabled:!l||o===U.a.LOADING,onClick:()=>c({connectorId:n.connector.id,scheduling:p})},w.i18n.translate("xpack.enterpriseSearch.content.indices.connectorScheduling.saveButton.label",{defaultMessage:"Save"})))))))):Object(m.jsx)(i.a.Fragment,null)};function sn(e){const t=e.split(" ");return t.length<4?"YEAR":"*"===t[1]?"MINUTE":"*"===t[2]?"HOUR":"*"===t[3]?"DAY":"?"===t[4]?"WEEK":"*"===t[4]?"MONTH":"YEAR"}const on={[we.d.CONTAINS]:w.i18n.translate("xpack.enterpriseSearch.content.filteringRules.rules.contains",{defaultMessage:"Contains"}),[we.d.ENDS_WITH]:w.i18n.translate("xpack.enterpriseSearch.content.filteringRules.rules.endsWith",{defaultMessage:"Ends with"}),[we.d.EQUALS]:w.i18n.translate("xpack.enterpriseSearch.content.filteringRules.rules.equals",{defaultMessage:"Equals"}),[we.d.GT]:w.i18n.translate("xpack.enterpriseSearch.content.filteringRules.rules.greaterThan",{defaultMessage:"Greater than"}),[we.d.LT]:w.i18n.translate("xpack.enterpriseSearch.content.filteringRules.rules.lessThan",{defaultMessage:"Less than"}),[we.d.REGEX]:w.i18n.translate("xpack.enterpriseSearch.content.filteringRules.rules.regEx",{defaultMessage:"Regular expression"}),[we.d.STARTS_WITH]:w.i18n.translate("xpack.enterpriseSearch.content.filteringRules.rules.startsWith",{defaultMessage:"Starts with"})};function cn(e){return on[e]}const ln={[we.c.EXCLUDE]:w.i18n.translate("xpack.enterpriseSearch.content.filteringRules.policy.exclude",{defaultMessage:"Exclude"}),[we.c.INCLUDE]:w.i18n.translate("xpack.enterpriseSearch.content.filteringRules.policy.include",{defaultMessage:"Include"})};function un(e){return ln[e]}const dn=({showOrder:e,filteringRules:t})=>{const n=[...e?[{field:"order",name:w.i18n.translate("xpack.enterpriseSearch.content.index.filtering.priority",{defaultMessage:"Rule priority"})}]:[],{field:"policy",name:w.i18n.translate("xpack.enterpriseSearch.content.index.filtering.policy",{defaultMessage:"Policy"}),render:e=>un(e)},{field:"field",name:w.i18n.translate("xpack.enterpriseSearch.content.index.filtering.field",{defaultMessage:"field"}),render:e=>Object(m.jsx)(v.EuiCode,null,e)},{field:"rule",name:w.i18n.translate("xpack.enterpriseSearch.content.index.filtering.rule",{defaultMessage:"Rule"}),render:e=>cn(e)},{field:"value",name:w.i18n.translate("xpack.enterpriseSearch.content.index.filtering.value",{defaultMessage:"Value"}),render:e=>Object(m.jsx)(v.EuiCode,null,e)}];return Object(m.jsx)(v.EuiBasicTable,{columns:n,items:t.sort((({order:e},{order:t})=>e-t))})},pn=Object(V.a)(["content","connector_filtering_api_logic"],(async({advancedSnippet:e,connectorId:t,filteringRules:n})=>{const a=`/internal/enterprise_search/connectors/${t}/filtering`;return await l.a.values.http.put(a,{body:JSON.stringify({advanced_snippet:e,filtering_rules:n})})})),gn=Object(V.a)(["content","connector_filtering_draft_api_logic"],(async({advancedSnippet:e,connectorId:t,filteringRules:n})=>{const a=`/internal/enterprise_search/connectors/${t}/filtering/draft`;return await l.a.values.http.put(a,{body:JSON.stringify({advanced_snippet:e,filtering_rules:n})})}));function hn(e){const t=(new Date).toISOString();return{created_at:t,field:"_",id:"DEFAULT",order:e,policy:we.c.INCLUDE,rule:we.d.REGEX,updated_at:t,value:".*"}}const fn=Object(s.kea)({actions:{addFilteringRule:e=>e,applyDraft:!0,deleteFilteringRule:e=>e,reorderFilteringRules:e=>e,revertLocalAdvancedFiltering:!0,revertLocalFilteringRules:!0,saveDraftFilteringRules:!0,setFilteringConfig:e=>e,setIsEditing:e=>({isEditing:e}),setLocalAdvancedSnippet:e=>({advancedSnippet:e}),setLocalFilteringRules:e=>e,updateFilteringRule:e=>e},connect:{actions:[pn,["apiError","apiSuccess","makeRequest"],gn,["apiError as draftApiError","apiSuccess as draftApiSuccess","makeRequest as draftMakeRequest"],Qe,["apiSuccess as fetchIndexApiSuccess"]],values:[pn,["status"],Qe,["data as index"]]},events:({actions:e,values:t})=>({afterMount:()=>e.setFilteringConfig(Object(P.g)(t.index)?t.index.connector.filtering[0]:null)}),listeners:({actions:e,values:t})=>({apiError:e=>Object(Q.e)(e),apiSuccess:()=>{Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.index.connector.filtering.successToastRules.title",{defaultMessage:"Sync rules updated"}))},applyDraft:()=>{var n,a;Object(P.g)(t.index)&&e.makeRequest({advancedSnippet:null!==(n=t.localAdvancedSnippet)&&void 0!==n?n:"",connectorId:t.index.connector.id,filteringRules:null!==(a=t.localFilteringRules)&&void 0!==a?a:[]})},draftApiError:e=>Object(Q.e)(e),draftApiSuccess:()=>{Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.successToastDraft.title",{defaultMessage:"Draft rules saved"}))},draftMakeRequest:()=>Object(Q.d)(),fetchIndexApiSuccess:n=>{t.isEditing||!Object(P.g)(n)||Object($e.isEqual)(t.filteringConfig,n.connector.filtering[0])||e.setFilteringConfig(n.connector.filtering[0])},makeRequest:()=>Object(Q.d)(),saveDraftFilteringRules:()=>{var n,a;Object(P.g)(t.index)&&e.draftMakeRequest({advancedSnippet:null!==(n=t.localAdvancedSnippet)&&void 0!==n?n:"",connectorId:t.index.connector.id,filteringRules:null!==(a=t.localFilteringRules)&&void 0!==a?a:[]})},setIsEditing:n=>{var a,i;n&&t.filteringConfig&&(e.setLocalFilteringRules(t.hasDraft?t.filteringConfig.draft.rules:t.filteringConfig.active.rules),e.setLocalAdvancedSnippet(t.hasDraft?JSON.stringify(null!==(a=t.filteringConfig.draft.advanced_snippet.value)&&void 0!==a?a:{},void 0,2):JSON.stringify(null!==(i=t.filteringConfig.active.advanced_snippet.value)&&void 0!==i?i:{},void 0,2)))}}),path:["enterprise_search","content","connector_filtering"],reducers:()=>({filteringConfig:[null,{apiSuccess:(e,t)=>e?{...e,active:t}:null,draftApiSuccess:(e,t)=>e?{...e,draft:t}:null,setFilteringConfig:(e,t)=>t}],isEditing:[!1,{draftApiError:()=>!1,draftApiSuccess:()=>!1,setIsEditing:(e,{isEditing:t})=>t}],localAdvancedSnippet:["",{setLocalAdvancedSnippet:(e,{advancedSnippet:t})=>t}],localFilteringRules:[[],{addFilteringRule:(e,t)=>(e.length?[...e.slice(0,e.length-1),t,e[e.length-1]]:[t,hn(1)]).map(((e,t)=>({...e,order:t}))),deleteFilteringRule:(e,t)=>e.filter((e=>e.id!==t.id)),reorderFilteringRules:(e,t)=>[...t,e.length?e[e.length-1]:hn(0)].map(((e,t)=>({...e,order:t}))),setLocalFilteringRules:(e,t)=>t,updateFilteringRule:(e,t)=>e.map((e=>e.id===t.id?t:e))}]}),selectors:({selectors:e})=>({advancedSnippet:[()=>[e.filteringConfig],e=>null!=e&&e.active.advanced_snippet.value?JSON.stringify(null==e?void 0:e.active.advanced_snippet.value,void 0,2):""],draftErrors:[()=>[e.filteringConfig],e=>{var t;return null!==(t=null==e?void 0:e.draft.validation.errors)&&void 0!==t?t:[]}],draftState:[()=>[e.filteringConfig],e=>{var t;return null!==(t=null==e?void 0:e.draft.validation.state)&&void 0!==t?t:we.e.VALID}],editableFilteringRules:[()=>[e.localFilteringRules],e=>null!=e&&e.length?e.slice(0,e.length-1):[]],filteringRules:[()=>[e.filteringConfig],e=>{var t;return null!==(t=null==e?void 0:e.active.rules)&&void 0!==t?t:[]}],hasDraft:[()=>[e.filteringConfig],e=>!Object($e.isEqual)(null==e?void 0:e.active.advanced_snippet.value,null==e?void 0:e.draft.advanced_snippet.value)||!Object($e.isEqual)(null==e?void 0:e.draft.rules,null==e?void 0:e.active.rules)],hasJsonValidationError:[()=>[e.localAdvancedSnippet],e=>{if(!e)return!1;try{return JSON.parse(e),!1}catch{return!0}}],isLoading:[()=>[e.status],e=>e===U.a.LOADING]})});var mn=n(20);const jn=()=>{const{hasJsonValidationError:e,localAdvancedSnippet:t}=Object(s.useValues)(fn),{setLocalAdvancedSnippet:n}=Object(s.useActions)(fn);return Object(m.jsx)(v.EuiFormRow,{label:w.i18n.translate("xpack.enterpriseSearch.content.indices.connector.syncRules.advancedRules.title",{defaultMessage:"Advanced rules"}),isInvalid:e,error:e?w.i18n.translate("xpack.enterpriseSearch.content.indices.connector.syncRules.advancedRules.error",{defaultMessage:"JSON format is invalid"}):void 0,fullWidth:!0},Object(m.jsx)(mn.CodeEditor,{isCopyable:!0,languageId:"json",options:{detectIndentation:!0,lineNumbers:"on",tabSize:2},value:t,onChange:e=>{n(e)},height:"250px",width:"100%"}))},xn=({children:e})=>{const{saveDraftFilteringRules:t,setIsEditing:n}=Object(s.useActions)(fn),{hasJsonValidationError:a,isEditing:i,isLoading:r}=Object(s.useValues)(fn);return Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(tn.a,{hasUnsavedChanges:i,messageText:w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.unsavedChanges",{defaultMessage:"Your changes have not been saved. Are you sure you want to leave?"})}),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiForm,null,e)),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween"},i&&Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-connector-syncRules-editRules-cancelEditing",onClick:()=>{n(!i)}},w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.cancelEditingFilteringDraft",{defaultMessage:"Cancel"}))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-syncRules-editRules-saveAndValidate",disabled:a,isLoading:r,onClick:t},w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.validateDraftTitle",{defaultMessage:"Save and validate draft"}))))))},bn=({children:e,revertAction:t})=>Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"flexEnd"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-syncRules-editRules-revert",onClick:t},w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.flyout.revertButtonTitle",{defaultMessage:"Revert to active rules"}))))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(xn,null,e))));var yn=n(416),Mn=n(122),On=n(99);const Sn="FilteringRulesTable";function En(e){if(e.rule===we.d.REGEX)try{return new RegExp(e.value),{}}catch{return{value:w.i18n.translate("xpack.enterpriseSearch.content.index.connector.filteringRules.regExError",{defaultMessage:"Value should be a regular expression"})}}return{}}const vn=()=>{const{editableFilteringRules:e}=Object(s.useValues)(fn),{indexName:t}=Object(s.useValues)(rt),{addFilteringRule:n,deleteFilteringRule:a,reorderFilteringRules:i,updateFilteringRule:r}=Object(s.useActions)(fn),o=Object(m.jsx)(v.EuiText,{size:"s",color:"default"},w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.description",{defaultMessage:"Add a sync rule to customize what data is synchronized from {indexName}. Everything is included by default, and documents are validated against the configured set of indexing rules starting from the top listed down.",values:{indexName:t}}),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiLink,{href:D.a.syncRules,external:!0},w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.link",{defaultMessage:"Learn more about customizing your sync rules."}))),c=[{editingRender:(e,t)=>Object(m.jsx)(v.EuiSelect,{fullWidth:!0,value:e.policy,onChange:e=>t(e.target.value),options:[{text:un(we.c.INCLUDE),value:we.c.INCLUDE},{text:un(we.c.EXCLUDE),value:we.c.EXCLUDE}]}),field:"policy",name:w.i18n.translate("xpack.enterpriseSearch.index.connector.rule.basicTable.policyTitle",{defaultMessage:"Policy"}),render:e=>Object(m.jsx)(v.EuiText,{size:"s"},un(e.policy))},{editingRender:(e,t)=>Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFieldText,{fullWidth:!0,value:e.field,onChange:e=>t(e.target.value)}))),field:"field",name:w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.basicTable.fieldTitle",{defaultMessage:"Field"}),render:e=>Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)(v.EuiCode,null,e.field))},{editingRender:(e,t)=>Object(m.jsx)(v.EuiSelect,{fullWidth:!0,value:e.rule,onChange:e=>t(e.target.value),options:Object.values(we.d).map((e=>({text:cn(e),value:e})))}),field:"rule",name:w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.basicTable.ruleTitle",{defaultMessage:"Rule"}),render:e=>Object(m.jsx)(v.EuiText,{size:"s"},cn(e.rule))},{editingRender:(e,t)=>Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFieldText,{fullWidth:!0,value:e.value,onChange:e=>t(e.target.value)}))),field:"value",name:w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.basicTable.valueTitle",{defaultMessage:"Value"}),render:e=>Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)(v.EuiCode,null,e.value))}];return Object(m.jsx)(Mn.a,{addButtonText:w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.table.addRuleLabel",{defaultMessage:"Add sync rule"}),columns:c,defaultItem:{policy:we.c.INCLUDE,rule:we.d.EQUALS,value:""},description:o,instanceId:Sn,items:e,onAdd:e=>{const t=(new Date).toISOString(),a={...e,created_at:t,id:Object(yn.v4)(),updated_at:t};n(a),Object(On.a)({instanceId:Sn}).actions.doneEditing()},onDelete:a,onUpdate:e=>{r(e),Object(On.a)({instanceId:Sn}).actions.doneEditing()},onReorder:i,title:"",validateItem:En,bottomRows:[Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.sources.basicRulesTable.includeEverythingMessage",{defaultMessage:"Include everything else from this source"}))],canRemoveLastItem:!0,emptyPropertyAllowed:!0,showRowIndex:!0})};var wn;!function(e){e.BASIC="basic",e.ADVANCED="advanced"}(wn||(wn={}));const In=({errors:e,hasAdvancedFilteringFeature:t,hasBasicFilteringFeature:n,revertLocalFilteringRules:a,revertLocalAdvancedFiltering:r,setIsEditing:s})=>{const o=[...n?[{content:Object(m.jsx)(bn,{revertAction:a},Object(m.jsx)(vn,null)),id:wn.BASIC,name:w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.basicTabTitle",{defaultMessage:"Basic rules"})}]:[],...t?[{content:Object(m.jsx)(bn,{revertAction:r},Object(m.jsx)(jn,null)),id:wn.ADVANCED,name:w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.advancedTabTitle",{defaultMessage:"Advanced rules"})}]:[]];return Object(m.jsx)(v.EuiFlyout,{ownFocus:!0,onClose:()=>s(!1),"aria-labelledby":"rulesFlyout",size:"l"},Object(m.jsx)(v.EuiFlyoutHeader,null,Object(m.jsx)(v.EuiTitle,{size:"m"},Object(m.jsx)("h2",{id:"rulesFlyout"},w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.flyout.title",{defaultMessage:"Draft rules"}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.flyout.description",{defaultMessage:"Plan and edit rules here before applying them to the next sync."})),Object(m.jsx)(v.EuiSpacer,null),!(null==e||!e.length)&&Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},e.map(((e,t)=>Object(m.jsx)(v.EuiFlexItem,{id:`${t}`,grow:!1},Object(m.jsx)(v.EuiCallOut,{color:"danger",title:w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.flyout.errorTitle",{defaultMessage:"Sync {idsLength, plural, one {rule} other {rules}} {ids} {idsLength, plural, one {is} other {are}} invalid.",values:{ids:e.ids.join(", "),idsLength:e.ids.length}})},Object(m.jsx)(i.a.Fragment,null,e.messages.map((e=>Object(m.jsx)("p",{id:e},e)))))))))),Object(m.jsx)(v.EuiFlyoutBody,null,Object(m.jsx)(v.EuiTabbedContent,{tabs:o})))},Nn=({applyDraft:e,editDraft:t,state:n})=>{switch(n){case we.e.EDITED:return Object(m.jsx)(v.EuiCallOut,{color:"warning",title:Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiLoadingSpinner,null)),Object(m.jsx)(v.EuiFlexItem,null,w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.validatingTitle",{defaultMessage:"Draft sync rules are validating"})))},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.validatingDescription",{defaultMessage:"Draft rules need to be validated before they can take effect. This may take a few minutes."})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("span",null,Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-syncRules-validatingCallout-editRules",onClick:t,color:"warning",fill:!0},w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.validatingCallout.editDraftRulesTitle",{defaultMessage:"Edit draft rules"}))))));case we.e.INVALID:return Object(m.jsx)(v.EuiCallOut,{color:"danger",iconType:"cross",title:w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.invalidTitle",{defaultMessage:"Draft sync rules are invalid"})},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.invalidDescription",{defaultMessage:"Draft rules did not validate. Edit the draft rules before they can take effect."})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("span",null,Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-syncRules-errorCallout-editRules",onClick:t,color:"danger",fill:!0},w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.errorCallout.editDraftRulesTitle",{defaultMessage:"Edit draft rules"}))))));case we.e.VALID:return Object(m.jsx)(v.EuiCallOut,{color:"success",iconType:"check",title:w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.validatedTitle",{defaultMessage:"Draft sync rules validated"})},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.validatedDescription",{defaultMessage:"Apply draft rules to take effect on the next sync."})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"flexStart"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)("span",null,Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-syncRules-successCallout-applyRules",onClick:e,color:"success",fill:!0},w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.successCallout.applyDraftRulesTitle",{defaultMessage:"Apply draft rules"})))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)("span",null,Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-syncRules-successCallout-editRules",onClick:t,color:"success"},w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.errorCallout.successEditDraftRulesTitle",{defaultMessage:"Edit draft rules"}))))))));default:return Object(m.jsx)(i.a.Fragment,null)}},Dn=()=>{const{indexName:e,hasAdvancedFilteringFeature:t,hasBasicFilteringFeature:n}=Object(s.useValues)(rt),{applyDraft:a,setLocalFilteringRules:r,setLocalAdvancedSnippet:o,setIsEditing:c}=Object(s.useActions)(fn),{advancedSnippet:l,draftErrors:u,draftState:d,filteringRules:p,hasDraft:g,isEditing:h}=Object(s.useValues)(fn);return Object(m.jsx)(i.a.Fragment,null,h&&Object(m.jsx)(In,{errors:u,hasAdvancedFilteringFeature:t,hasBasicFilteringFeature:n,revertLocalFilteringRules:()=>r(p),revertLocalAdvancedFiltering:()=>o(l),setIsEditing:c}),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},g&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Nn,{applyDraft:a,editDraft:()=>c(!0),state:d})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"s"},Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.title",{defaultMessage:"Sync rules "}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.description",{defaultMessage:"Include or exclude high level items, file types and (file or folder) paths to\n                    synchronize from {indexName}. Everything is included by default. Each document is\n                    tested against the reules below and the first rule that matches will be applied.",values:{indexName:e}})),Object(m.jsx)("p",null,Object(m.jsx)(v.EuiLink,{href:D.a.syncRules,external:!0},w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.syncRulesLabel",{defaultMessage:"Learn more about sync rules"}))))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-syncRules-editRules-editDraftRules",color:"primary",onClick:()=>c(!h)},g?w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.editFilterRulesTitle",{defaultMessage:"Edit sync rules"}):w.i18n.translate("xpack.enterpriseSearch.index.connector.syncRules.draftNewFilterRulesTitle",{defaultMessage:"Draft new sync rules"}))))),n&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{color:"plain",hasShadow:!1,hasBorder:!0},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"s"},Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.basicRulesTitle",{defaultMessage:"Basic rules"}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.basicRulesDescription",{defaultMessage:"These filters apply to documents in post-processing."})))),Object(m.jsx)(dn,{filteringRules:p,showOrder:!0})))),t&&!!l&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{color:"plain",hasShadow:!1,hasBorder:!0},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"s"},Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.advancedRulesTitle",{defaultMessage:"Advanced rules"}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.advancedFiltersDescription",{defaultMessage:"These filters apply to documents at the data source."})),Object(m.jsx)("p",null,Object(m.jsx)(v.EuiLink,{external:!0,href:D.a.syncRules},w.i18n.translate("xpack.enterpriseSearch.content.index.connector.syncRules.advancedFiltersLinkTitle",{defaultMessage:"Learn more about advanced sync rules."}))))),Object(m.jsx)(v.EuiCodeBlock,{isCopyable:!0,language:"json"},l))))))},Tn=({disabled:e,onChange:t,scheduling:n})=>{var i;const[r,s]=Object(a.useState)({}),[o,c]=Object(a.useState)({expression:null!==(i=null==n?void 0:n.interval)&&void 0!==i?i:"",frequency:null!=n&&n.interval?kn(n.interval):"HOUR"});return Object(m.jsx)(cron_editor_CronEditor,{fieldToPreferredValueMap:r,cronExpression:o.expression,frequency:o.frequency,disabled:e,onChange:({cronExpression:e,frequency:a,fieldToPreferredValueMap:i})=>{c({expression:e,frequency:a}),s(i),t({...n,interval:e})},frequencyBlockList:["MINUTE"]})};function kn(e){const t=e.split(" ");return t.length<4?"YEAR":"*"===t[1]?"MINUTE":"*"===t[2]?"HOUR":"*"===t[3]?"DAY":"?"===t[4]?"WEEK":"*"===t[4]?"MONTH":"YEAR"}var Cn=n(5);const _n={crawlFrequency:24,crawlUnit:Te.hours},An=Object(s.kea)({path:["enterprise_search","crawler","automatic_crawl_scheduler_logic"],connect:{actions:[nn,["makeRequest as makeUpdateConnectorSchedulingRequest","apiError as updateConnectorSchedulingApiError"]],values:[rt,["index"]]},actions:()=>({clearCrawlSchedule:!0,deleteCrawlSchedule:!0,disableCrawlAutomatically:!0,onDoneSubmitting:!0,enableCrawlAutomatically:!0,fetchCrawlSchedule:!0,saveChanges:!0,setCrawlSchedule:e=>({crawlSchedule:e}),submitConnectorSchedule:e=>({scheduling:e}),submitCrawlSchedule:!0,setCrawlAutomatically:e=>({crawlAutomatically:e}),setCrawlFrequency:e=>({crawlFrequency:e}),setCrawlUnit:e=>({crawlUnit:e}),setUseConnectorSchedule:e=>({useConnectorSchedule:e})}),reducers:()=>({crawlAutomatically:[!1,{clearCrawlSchedule:()=>!1,setCrawlAutomatically:(e,{crawlAutomatically:t})=>t,setCrawlSchedule:()=>!0}],crawlFrequency:[_n.crawlFrequency,{clearCrawlSchedule:()=>_n.crawlFrequency,setCrawlSchedule:(e,{crawlSchedule:{frequency:t}})=>t,setCrawlFrequency:(e,{crawlFrequency:t})=>t,setUseConnectorSchedule:e=>e||_n.crawlFrequency}],crawlUnit:[_n.crawlUnit,{clearCrawlSchedule:()=>_n.crawlUnit,setCrawlSchedule:(e,{crawlSchedule:{unit:t}})=>t,setCrawlUnit:(e,{crawlUnit:t})=>t,setUseConnectorSchedule:e=>e||_n.crawlUnit}],isSubmitting:[!1,{deleteCrawlSchedule:()=>!0,onDoneSubmitting:()=>!1,submitCrawlSchedule:()=>!0}],useConnectorSchedule:[!1,{setCrawlAutomatically:(e,{crawlAutomatically:t})=>t||e,setCrawlSchedule:(e,{crawlSchedule:{useConnectorSchedule:t=!1}})=>t,setUseConnectorSchedule:(e,{useConnectorSchedule:t})=>t}]}),listeners:({actions:e,values:t})=>({deleteCrawlSchedule:async()=>{const{http:t}=l.a.values,{indexName:n}=Be.values;try{await t.delete(`/internal/enterprise_search/indices/${n}/crawler/crawl_schedule`)}catch(e){var a;404!==(null===(a=e.response)||void 0===a?void 0:a.status)&&Object(Q.e)(e)}finally{e.onDoneSubmitting()}},fetchCrawlSchedule:async()=>{const{http:t}=l.a.values,{indexName:n}=Be.values;try{const a=await t.get(`/internal/enterprise_search/indices/${n}/crawler/crawl_schedule`);e.setCrawlSchedule(Re(a))}catch(e){var a;404!==(null===(a=e.response)||void 0===a?void 0:a.status)&&Object(Q.e)(e)}},saveChanges:()=>{t.crawlAutomatically?e.submitCrawlSchedule():e.deleteCrawlSchedule(),e.submitConnectorSchedule({...t.index.connector.scheduling,enabled:t.crawlAutomatically&&t.useConnectorSchedule})},setCrawlAutomatically:e.saveChanges,setCrawlFrequency:e.saveChanges,setCrawlUnit:e.saveChanges,setUseConnectorSchedule:e.saveChanges,submitConnectorSchedule:({scheduling:n})=>{e.makeUpdateConnectorSchedulingRequest({connectorId:t.index.connector.id,scheduling:n})},submitCrawlSchedule:async()=>{const{http:n}=l.a.values,{indexName:a}=Be.values;if(t.crawlUnit&&t.crawlFrequency)try{const i=await n.put(`/internal/enterprise_search/indices/${a}/crawler/crawl_schedule`,{body:JSON.stringify({unit:t.crawlUnit,frequency:t.crawlFrequency,use_connector_schedule:t.useConnectorSchedule})});e.setCrawlSchedule(Re(i))}catch(e){Object(Q.e)(e)}finally{e.onDoneSubmitting()}},updateConnectorSchedulingApiError:e=>Object(Q.e)(e)}),events:({actions:e})=>({afterMount:()=>{e.fetchCrawlSchedule()}})}),Ln=()=>{const{setCrawlAutomatically:e,setCrawlFrequency:t,setCrawlUnit:n,setUseConnectorSchedule:a,submitConnectorSchedule:r}=Object(s.useActions)(An),{index:o,crawlAutomatically:c,crawlFrequency:l,crawlUnit:u,useConnectorSchedule:d}=Object(s.useValues)(An);return Object(P.i)(o)?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiTitle,{size:"m"},Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.automaticCrawlSchedule.title",{defaultMessage:"Crawl frequency"}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiSplitPanel.Outer,{grow:!0},Object(m.jsx)(v.EuiSplitPanel.Inner,{grow:!1,color:"subdued"},Object(m.jsx)(v.EuiFormRow,{display:"rowCompressed"},Object(m.jsx)(v.EuiSwitch,{"data-telemetry-id":"entSearchContent-crawler-scheduleCrawl-crawlAutomatically",autoFocus:!0,checked:c,label:w.i18n.translate("xpack.enterpriseSearch.crawler.automaticCrawlSchedule.crawlAutomaticallySwitchLabel",{defaultMessage:"Enable recurring crawls with the following schedule"}),onChange:t=>e(t.target.checked),compressed:!0}))),Object(m.jsx)(v.EuiSplitPanel.Inner,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCheckableCard,{id:"specificTimeSchedulingCard",label:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiTitle,{size:"xxs"},Object(m.jsx)("h5",null,w.i18n.translate("xpack.enterpriseSearch.crawler.automaticCrawlSchedule.cronSchedulingTitle",{defaultMessage:"Specific time scheduling"}))),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{size:"xs",color:"subdued"},w.i18n.translate("xpack.enterpriseSearch.crawler.automaticCrawlSchedule.cronSchedulingDescription",{defaultMessage:"Define the frequency and time for scheduled crawls"})),Object(m.jsx)(v.EuiHorizontalRule,{margin:"s"})),checked:c&&d,disabled:!c,onChange:()=>a(!0)},Object(m.jsx)(Tn,{disabled:!c||!d,scheduling:o.connector.scheduling,onChange:e=>r({...e,enabled:!0})}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCheckableCard,{id:"intervalSchedulingCard",label:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiTitle,{size:"xxs"},Object(m.jsx)("h5",null,w.i18n.translate("xpack.enterpriseSearch.crawler.automaticCrawlSchedule.intervalSchedulingTitle",{defaultMessage:"Interval scheduling"}))),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{size:"xs",color:"subdued"},w.i18n.translate("xpack.enterpriseSearch.crawler.automaticCrawlSchedule.intervalSchedulingDescription",{defaultMessage:"Define the frequency for scheduled crawls"})),Object(m.jsx)(v.EuiHorizontalRule,{margin:"s"})),checked:c&&!d,disabled:!c,onChange:()=>a(!1)},Object(m.jsx)(v.EuiFormRow,{display:"rowCompressed",label:"Frequency",fullWidth:!0},Object(m.jsx)(v.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiFieldNumber,{"data-telemetry-id":"entSearchContent-crawler-scheduleCrawl-crawlAutomatically-scheduleFrequency","aria-label":w.i18n.translate("xpack.enterpriseSearch.crawler.automaticCrawlSchedule.scheduleFrequencyLabel",{defaultMessage:"Schedule frequency"}),disabled:!c||d,min:0,max:99,compressed:!0,value:l,onChange:e=>t(parseInt(e.target.value,10)),prepend:"Every"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiSelect,{"data-telemetry-id":"entSearchContent-crawler-scheduleCrawl-crawlAutomatically-scheduleUnits","aria-label":w.i18n.translate("xpack.enterpriseSearch.crawler.automaticCrawlSchedule.scheduleUnitsLabel",{defaultMessage:"Schedule units of time"}),disabled:!c||d,fullWidth:!0,compressed:!0,options:[{text:$.o,value:Te.hours},{text:$.h,value:Te.days},{text:$.C,value:Te.weeks},{text:$.r,value:Te.months}],value:u,onChange:e=>n(e.target.value)}))))))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"xs",color:"subdued"},w.i18n.translate("xpack.enterpriseSearch.crawler.automaticCrawlSchedule.scheduleDescription",{defaultMessage:"The crawl schedule will perform a full crawl on every domain on this index."}),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiLink,{href:Cn.a.crawlerManaging,target:"_blank",external:!0},w.i18n.translate("xpack.enterpriseSearch.crawler.automaticCrawlSchedule.readMoreLink",{defaultMessage:"Learn more about scheduling"})))))):Object(m.jsx)(i.a.Fragment,null)};var zn=n(62);const Fn=()=>{const{maxCrawlDepth:e}=Object(s.useValues)(Je),{onSelectMaxCrawlDepth:t}=Object(s.useActions)(Je);return Object(m.jsx)(v.EuiPanel,{hasBorder:!0},Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiFormRow,{label:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.maxCrawlDepthFieldLabel",{defaultMessage:"Max crawl depth"})},Object(m.jsx)(v.EuiFieldNumber,{"data-telemetry-id":"entSearchContent-crawler-customCrawlSettings-maxCrawlDepth",min:1,value:e,onChange:e=>t(parseInt(e.target.value,10))}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{size:"xs",color:"subdued"},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.maxCrawlDepthFieldDescription",{defaultMessage:"Set a max crawl depth to specify how many pages deep the crawler should traverse. Set the value to one (1) to limit the crawl to only the entry points."})))))};var Rn=n(124);const Pn=()=>{const{domainUrls:e,selectedDomainUrls:t}=Object(s.useValues)(Je),{onSelectDomainUrls:n}=Object(s.useActions)(Je);return Object(m.jsx)(v.EuiPanel,{hasBorder:!0},Object(m.jsx)(v.EuiAccordion,{id:Object(v.useGeneratedHtmlId)({prefix:"domainAccordion"}),initialIsOpen:!0,buttonContent:Object(m.jsx)(v.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"s",alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiIcon,{type:"globe"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.domainsAccordionButtonLabel",{defaultMessage:"Add domains to your crawl"}))))),extraAction:Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(m.jsx)(v.EuiNotificationBadge,{size:"m",color:t.length>0?"accent":"subdued"},t.length),Object(m.jsx)(v.EuiFlexItem,{grow:!1},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.selectedDescriptor",{defaultMessage:"selected"})))},Object(m.jsx)(Rn.a,{"data-telemetry-id":"entSearchContent-crawler-customCrawlSettings-selectDomainUrls",options:e,selectedOptions:t,onChange:n})))};var Un=n(304);const $n=()=>{const{customEntryPointUrls:e,customSitemapUrls:t,entryPointUrls:n,includeSitemapsInRobotsTxt:a,selectedDomainUrls:r,selectedEntryPointUrls:o,selectedSitemapUrls:c,sitemapUrls:l}=Object(s.useValues)(Je),{onSelectCustomEntryPointUrls:u,onSelectCustomSitemapUrls:d,onSelectEntryPointUrls:p,onSelectSitemapUrls:g,toggleIncludeSitemapsInRobotsTxt:h}=Object(s.useActions)(Je),f=e.length+t.length+o.length+c.length;return Object(m.jsx)(v.EuiPanel,{hasBorder:!0},Object(m.jsx)(v.EuiAccordion,{id:Object(v.useGeneratedHtmlId)({prefix:"seedUrlAccordion"}),initialIsOpen:!0,buttonContent:Object(m.jsx)(v.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"s",alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiIcon,{type:"globe"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.seedUrlsAccordionButtonLabel",{defaultMessage:"Seed URLs"}))))),extraAction:Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(m.jsx)(v.EuiNotificationBadge,{size:"m",color:f>0?"accent":"subdued"},f),Object(m.jsx)(v.EuiFlexItem,{grow:!1},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.selectedDescriptor",{defaultMessage:"selected"})))},Object(m.jsx)(v.EuiTabbedContent,{expand:!0,tabs:[{id:Object(v.useGeneratedHtmlId)({prefix:"sitemapsTab"}),name:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.sitemapsTabLabel",{defaultMessage:"Sitemaps"}),content:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiPanel,{color:"subdued",borderRadius:"none",hasShadow:!1,paddingSize:"s"},Object(m.jsx)(v.EuiCheckbox,{"data-telemetry-id":"entSearchContent-crawler-customCrawlSettings-includeRobotsSitemaps",id:Object(v.useGeneratedHtmlId)({prefix:"includeRobotsCheckbox"}),label:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.includeSitemapsCheckboxLabel",defaultMessage:"Include sitemaps discovered in {robotsDotTxt}",values:{robotsDotTxt:Object(m.jsx)("strong",null,"robots.txt")}}),checked:a,onChange:h})),Object(m.jsx)(Rn.a,{"data-telemetry-id":"entSearchContent-crawler-customCrawlSettings-selectDomain",options:l,selectedOptions:c,onChange:g,emptyMessage:0===r.length?w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.emptyDomainsMessage",{defaultMessage:"Please select a domain."}):void 0}),Object(m.jsx)(v.EuiHorizontalRule,null),Object(m.jsx)(Un.a,{"data-telemetry-id":"entSearchContent-crawler-customCrawlSettings-customSitemapUrls",label:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.customSitemapUrlsTextboxLabel",{defaultMessage:"Custom sitemap URLs"}),onChange:d,selectedUrls:t}))},{id:Object(v.useGeneratedHtmlId)({prefix:"entryPointsTab"}),name:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.entryPointsTabLabel",{defaultMessage:"Entry points"}),content:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(Rn.a,{"data-telemetry-id":"entSearchContent-crawler-customCrawlSettings-selectDomain",options:n,selectedOptions:o,onChange:p,emptyMessage:0===r.length?w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.emptyDomainsMessage",{defaultMessage:"Please select a domain."}):void 0}),Object(m.jsx)(v.EuiHorizontalRule,null),Object(m.jsx)(Un.a,{"data-telemetry-id":"entSearchContent-crawler-customCrawlSettings-customEntryPointUrls",label:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.customEntryPointUrlsTextboxLabel",{defaultMessage:"Custom entry point URLs"}),onChange:u,selectedUrls:e}))}],autoFocus:"selected"})))},Qn=()=>{const{isDataLoading:e,isFormSubmitting:t,isFlyoutVisible:n,selectedDomainUrls:a}=Object(s.useValues)(Je),{hideFlyout:r,startCustomCrawl:o}=Object(s.useActions)(Je);return n?Object(m.jsx)(v.EuiFlyout,{ownFocus:!0,onClose:r,size:"m"},Object(m.jsx)(v.EuiFlyoutHeader,{hasBorder:!0},Object(m.jsx)(v.EuiTitle,{size:"m"},Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.flyoutHeadTitle",{defaultMessage:"Custom crawl configuration"}))),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.flyoutHeaderDescription",{defaultMessage:"Set up a one-time crawl with custom settings."})))),Object(m.jsx)(v.EuiFlyoutBody,null,e?Object(m.jsx)(zn.a,null):Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(Fn,null),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Pn,null),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)($n,null))),Object(m.jsx)(v.EuiFlyoutFooter,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"flexEnd"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-crawler-customCrawlSettings-cancelStartCrawl",onClick:r},$.d)),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-crawler-customCrawlSettings-startCrawl",fill:!0,onClick:o,disabled:e||0===a.length,isLoading:t},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlCustomSettingsFlyout.startCrawlButtonLabel",{defaultMessage:"Apply and crawl now"})))))):null},Vn=Object(V.a)(["delete_crawler_domain"],(async({domain:e,indexName:t})=>(await l.a.values.http.delete(`/internal/enterprise_search/indices/${t}/crawler/domains/${e.id}`),{domain:e}))),Bn=Object(V.a)(["get_crawler_domains"],(async({indexName:e,meta:t})=>{const n={"page[current]":t.page.current,"page[size]":t.page.size};return(({results:e,meta:t})=>({domains:e.map(_e),meta:t}))(await l.a.values.http.get(`/internal/enterprise_search/indices/${e}/crawler/domains`,{query:n}))}));var Yn=n(76);const qn={addDomainFormInputValue:"https://",allowSubmit:!1,domainValidationResult:{steps:{contentVerification:{state:""},indexingRestrictions:{state:""},initialValidation:{state:""},networkConnectivity:{state:""}}},entryPointValue:"/",ignoreValidationFailure:!1,isValidationLoading:!1},Gn=Object(s.kea)({path:["enterprise_search","crawler","add_domain_logic"],actions:()=>({clearDomainFormInputValue:!0,closeFlyout:!0,initialValidation:!0,onSubmitNewDomainError:e=>({errors:e}),onSubmitNewDomainSuccess:e=>({domain:e}),openFlyout:!0,performDomainValidationStep:(e,t)=>({checks:t,stepName:e}),setAddDomainFormInputValue:e=>e,setDomainValidationResult:e=>({change:e}),setIgnoreValidationFailure:e=>e,startDomainValidation:!0,submitNewDomain:!0,validateDomainContentVerification:!0,validateDomainIndexingRestrictions:!0,validateDomainInitialVerification:(e,t)=>({newEntryPointValue:t,newValue:e}),validateDomainNetworkConnectivity:!0}),reducers:()=>({addDomainFormInputValue:[qn.addDomainFormInputValue,{clearDomainFormInputValue:()=>qn.addDomainFormInputValue,setAddDomainFormInputValue:(e,t)=>t,validateDomainInitialVerification:(e,{newValue:t})=>t}],domainValidationResult:[qn.domainValidationResult,{clearDomainFormInputValue:()=>qn.domainValidationResult,setAddDomainFormInputValue:()=>qn.domainValidationResult,setDomainValidationResult:({steps:e},{change:t})=>({steps:{...e,...t}}),startDomainValidation:()=>({steps:{contentVerification:{state:"loading"},indexingRestrictions:{state:"loading"},initialValidation:{state:"loading"},networkConnectivity:{state:"loading"}}})}],entryPointValue:[qn.entryPointValue,{clearDomainFormInputValue:()=>qn.entryPointValue,setAddDomainFormInputValue:()=>qn.entryPointValue,validateDomainInitialVerification:(e,{newEntryPointValue:t})=>t}],errors:[[],{clearDomainFormInputValue:()=>[],onSubmitNewDomainError:(e,{errors:t})=>t,setAddDomainFormInputValue:()=>[],submitNewDomain:()=>[],validateDomainInitialVerification:()=>[]}],ignoreValidationFailure:[qn.ignoreValidationFailure,{clearDomainFormInputValue:()=>qn.ignoreValidationFailure,setAddDomainFormInputValue:()=>qn.ignoreValidationFailure,setIgnoreValidationFailure:(e,t)=>t}],isFlyoutVisible:[!1,{closeFlyout:()=>!1,onSubmitNewDomainSuccess:()=>!1,openFlyout:()=>!0}]}),selectors:({selectors:e})=>({allowSubmit:[()=>[e.ignoreValidationFailure,e.hasValidationCompleted,e.hasBlockingFailure],(e,t,n)=>!!e||t&&!n],canIgnoreValidationFailure:[()=>[e.hasValidationCompleted,e.domainValidationResult],(e,t)=>!!e&&(t.steps.indexingRestrictions.blockingFailure||t.steps.contentVerification.blockingFailure)],displayValidation:[()=>[e.isValidationLoading,e.hasValidationCompleted],(e,t)=>e||t],hasBlockingFailure:[()=>[e.domainValidationResult],e=>!!Object.values(e.steps).find((e=>e.blockingFailure))],hasValidationCompleted:[()=>[e.domainValidationResult],e=>!Object.values(e.steps).find((e=>"loading"===e.state||""===e.state))],isValidationLoading:[()=>[e.domainValidationResult],e=>!!Object.values(e.steps).find((e=>"loading"===e.state))]}),listeners:({actions:e,values:t})=>({onSubmitNewDomainSuccess:({domain:e})=>{const{indexName:t}=Be.values;Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.crawler.domainsTable.action.add.successMessage",{defaultMessage:"Successfully added domain '{domainUrl}'",values:{domainUrl:e.url}})),u.a.values.navigateToUrl(Object(Z.a)(R.d,{domainId:e.id,indexName:t})),Ye.actions.fetchCrawlerData()},performDomainValidationStep:async({stepName:n,checks:a})=>{const{http:i}=l.a.values,r=(e=>{switch(e){case"initialValidation":return We;case"networkConnectivity":return{indexingRestrictions:We.indexingRestrictions,contentVerification:We.contentVerification};case"indexingRestrictions":return{contentVerification:We.contentVerification};default:return{}}})(n);try{const s=function(e){var t;if(!e.valid)return{blockingFailure:!0,message:null===(t=e.results.find((e=>"failure"===e.result)))||void 0===t?void 0:t.comment,state:"invalid"};const n=e.results.find((e=>"warning"===e.result));return n?{blockingFailure:!e.valid,message:n.comment,state:"warning"}:{state:"valid"}}(await i.post("/internal/enterprise_search/crawler/validate_url",{body:JSON.stringify({checks:a,url:t.addDomainFormInputValue.trim()})}));if(s.blockingFailure)e.setDomainValidationResult({[n]:s,...r});else switch(e.setDomainValidationResult({[n]:s}),n){case"initialValidation":e.validateDomainNetworkConnectivity();break;case"networkConnectivity":e.validateDomainIndexingRestrictions();break;case"indexingRestrictions":e.validateDomainContentVerification()}}catch(t){e.setDomainValidationResult({[n]:{blockingFailure:!0,message:w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.unexpectedValidationErrorMessage",{defaultMessage:"Unexpected error"}),state:"invalid"},...r})}},startDomainValidation:async()=>{const{domain:n,entryPoint:a}=qe(t.addDomainFormInputValue.trim()),i=await(async e=>{const{http:t}=l.a.values;if(!e.startsWith("https://")&&!e.startsWith("http://"))try{const n="/internal/enterprise_search/crawler/validate_url",a=["tcp","url_request"];if((await t.post(n,{body:JSON.stringify({url:`https://${e}`,checks:a})})).valid)return`https://${e}`;if((await t.post(n,{body:JSON.stringify({url:`http://${e}`,checks:a})})).valid)return`http://${e}`}catch(e){}return e})(n);e.validateDomainInitialVerification(i,a)},submitNewDomain:async()=>{const{http:n}=l.a.values,{indexName:a}=Be.values,i=JSON.stringify({entry_points:[{value:t.entryPointValue}],name:t.addDomainFormInputValue.trim()});try{const t=_e(await n.post(`/internal/enterprise_search/indices/${a}/crawler/domains`,{body:i}));e.onSubmitNewDomainSuccess(t)}catch(t){const n=Object(Yn.c)(t);e.onSubmitNewDomainError(n)}},validateDomainContentVerification:()=>{e.performDomainValidationStep("contentVerification",["url_request","url_content"])},validateDomainIndexingRestrictions:()=>{e.performDomainValidationStep("indexingRestrictions",["robots_txt"])},validateDomainInitialVerification:()=>{e.performDomainValidationStep("initialValidation",["url"])},validateDomainNetworkConnectivity:()=>{e.performDomainValidationStep("networkConnectivity",["dns","tcp"])}})}),Wn=({state:e})=>{switch(e){case"valid":return Object(m.jsx)(v.EuiIcon,{color:"success",type:"check"});case"warning":return Object(m.jsx)(v.EuiIcon,{color:"warning",type:"alert"});case"invalid":return Object(m.jsx)(v.EuiIcon,{color:"danger",type:"cross"});default:return Object(m.jsx)(v.EuiLoadingSpinner,null)}},Hn=Object(v.getDefaultEuiMarkdownProcessingPlugins)();Hn[1][1].components.a=e=>Object(m.jsx)(v.EuiLink,M()({},e,{target:"_blank"}));const Jn=({step:e,label:t,action:n})=>{const a="invalid"===e.state||"warning"===e.state;return Object(m.jsx)(v.EuiPanel,{hasShadow:!1,color:Ge(e.state)},Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(Wn,{state:e.state})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h3",null,t)))),a&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,{size:"xs"}),Object(m.jsx)(v.EuiMarkdownFormat,{textSize:"s","data-test-subj":"errorMessage",processingPluginList:Hn},e.message||""),n&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,{size:"s"}),n)))},Zn=()=>{const{addDomainFormInputValue:e,canIgnoreValidationFailure:t,domainValidationResult:n,ignoreValidationFailure:a}=Object(s.useValues)(Gn),{setIgnoreValidationFailure:r}=Object(s.useActions)(Gn);return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Jn,{step:n.steps.initialValidation,label:w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.initialVaidationLabel",{defaultMessage:"Initial validation"})})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Jn,{step:n.steps.networkConnectivity,label:w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.networkConnectivityLabel",{defaultMessage:"Network connectivity"}),action:Object(m.jsx)(v.EuiButton,{size:"s",href:e,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.testUrlButtonLabel",{defaultMessage:"Test URL in the browser"}))})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Jn,{step:n.steps.indexingRestrictions,label:w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.indexingRestrictionsLabel",{defaultMessage:"Indexing restrictions"})})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Jn,{step:n.steps.contentVerification,label:w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.contentVerificationLabel",{defaultMessage:"Content verification"})})),t&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{hasShadow:!1},Object(m.jsx)(v.EuiCheckbox,{id:`crawler_domain_${e}`,label:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.ignoreValidationTitle",{defaultMessage:"Ignore validation failures and continue"})),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{color:"subdued",size:"xs"},w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.ignoreValidationDescription",{defaultMessage:"The web crawler will be unable to index any content on this domain until the errors above are addressed."}))),checked:a,onChange:e=>r(e.target.checked)})))))},Kn=()=>{const{setAddDomainFormInputValue:e,startDomainValidation:t}=Object(s.useActions)(Gn),{addDomainFormInputValue:n,displayValidation:a,entryPointValue:r}=Object(s.useValues)(Gn);return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiForm,{onSubmit:e=>{e.preventDefault(),t()},component:"form"},Object(m.jsx)(v.EuiFormRow,{fullWidth:!0,label:w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.urlLabel",{defaultMessage:"Domain URL"}),helpText:Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.urlHelpText",{defaultMessage:"Domain URLs require a protocol and cannot contain any paths."}))},Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!0},Object(m.jsx)(v.EuiFormControlLayout,{clear:{onClick:()=>e("")},fullWidth:!0},Object(m.jsx)(v.EuiFieldText,{autoFocus:!0,value:n,onChange:t=>e(t.target.value),fullWidth:!0}))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{type:"submit",fill:!0,disabled:0===n.length},w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.validateButtonLabel",{defaultMessage:"Validate Domain"}))))),"/"!==r&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,Object(m.jsx)("strong",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.crawler.addDomainForm.entryPointLabel",defaultMessage:"Web Crawler entry point has been set as {entryPointValue}",values:{entryPointValue:Object(m.jsx)(v.EuiCode,null,r)}}))))),a&&Object(m.jsx)(Zn,null)))},Xn=()=>{const{errors:e}=Object(s.useValues)(Gn);return e.length>0?Object(m.jsx)(v.EuiCallOut,{color:"danger",iconType:"alert",title:w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.errorsTitle",{defaultMessage:"Something went wrong. Please address the errors and try again."})},e.map(((e,t)=>Object(m.jsx)("p",{key:t},e)))):null},ea=()=>{const{submitNewDomain:e}=Object(s.useActions)(Gn),{allowSubmit:t}=Object(s.useValues)(Gn);return Object(m.jsx)(v.EuiButton,{fill:!0,type:"button",disabled:!t,onClick:e},w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainForm.submitButtonLabel",{defaultMessage:"Add domain"}))},ta=()=>{const{isFlyoutVisible:e}=Object(s.useValues)(Gn),{closeFlyout:t}=Object(s.useActions)(Gn);return e?Object(m.jsx)(v.EuiPortal,null,Object(m.jsx)(v.EuiFlyout,{onClose:t},Object(m.jsx)(v.EuiFlyoutHeader,null,Object(m.jsx)(v.EuiTitle,{size:"m"},Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainFlyout.title",{defaultMessage:"Add a new domain"})))),Object(m.jsx)(v.EuiFlyoutBody,{banner:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,{size:"l"}),Object(m.jsx)(Xn,null))},Object(m.jsx)(v.EuiText,null,w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainFlyout.description",{defaultMessage:'You can add multiple domains to this index\'s web crawler. Add another domain here and modify the entry points and crawl rules from the "Manage" page.'}),Object(m.jsx)("p",null)),Object(m.jsx)(v.EuiSpacer,{size:"l"}),Object(m.jsx)(Kn,null)),Object(m.jsx)(v.EuiFlyoutFooter,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonEmpty,{onClick:t},$.d)),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(ea,null)))))):null},na=()=>{const{mostRecentCrawlRequestStatus:e}=Object(s.useValues)(Ye);return e===Ie.Running||e===Ie.Starting||e===Ie.Canceling?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiCallOut,{iconType:"iInCircle",title:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusBanner.changesCalloutTitle",{defaultMessage:"Changes you make now won't take effect until the start of your next crawl."})}),Object(m.jsx)(v.EuiSpacer,{size:"l"})):null},aa=Object(s.kea)({path:["enterprise_search","delete_domain_modal"],connect:{actions:[Vn,["apiError","apiSuccess"]],values:[Vn,["status"]]},actions:{deleteDomain:()=>!0,hideModal:()=>!0,showModal:e=>({domain:e})},reducers:{domain:[null,{showModal:(e,{domain:t})=>t}],isHidden:[!0,{apiError:()=>!0,apiSuccess:()=>!0,hideModal:()=>!0,showModal:()=>!1}]},listeners:({values:e})=>({apiError:e=>{Object(Q.e)(e)},apiSuccess:({domain:e})=>{Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.crawler.domainsTable.action.delete.successMessage",{defaultMessage:"Successfully deleted domain '{domainUrl}'",values:{domainUrl:e.url}})),Ye.actions.fetchCrawlerData()},deleteDomain:()=>{const{domain:t}=e,{indexName:n}=Be.values;t&&Vn.actions.makeRequest({domain:t,indexName:n})}}),selectors:({selectors:e})=>({isLoading:[()=>[e.status],e=>e===U.a.LOADING]})}),ia=()=>{Vn.mount();const{deleteDomain:e,hideModal:t}=Object(s.useActions)(aa),{domain:n,isLoading:a,isHidden:i}=Object(s.useValues)(aa);return i?null:Object(m.jsx)(v.EuiModal,{onClose:t,"aria-label":w.i18n.translate("xpack.enterpriseSearch.crawler.deleteDomainModal.title",{defaultMessage:"Delete domain"})},Object(m.jsx)(v.EuiModalHeader,null,Object(m.jsx)(v.EuiModalHeaderTitle,null,w.i18n.translate("xpack.enterpriseSearch.crawler.deleteDomainModal.title",{defaultMessage:"Delete domain"}))),Object(m.jsx)(v.EuiModalBody,null,Object(m.jsx)(v.EuiText,null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.crawler.deleteDomainModal.description",defaultMessage:"Remove the domain {domainUrl} from your crawler. This will also delete all entry points and crawl rules you have set up. Any documents related to this domain will be removed on the next crawl. {thisCannotBeUndoneMessage}",values:{domainUrl:Object(m.jsx)("strong",null,null==n?void 0:n.url),thisCannotBeUndoneMessage:Object(m.jsx)("strong",null,w.i18n.translate("xpack.enterpriseSearch.crawler.deleteDomainModal.thisCannotBeUndoneMessage",{defaultMessage:"This cannot be undone."}))}}))),Object(m.jsx)(v.EuiModalFooter,null,Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-crawler-domainManagement-deleteDomain-cancel",onClick:t},$.d),Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-crawler-domainManagement-deleteDomain-delete",onClick:e,isLoading:a,color:"danger",fill:!0},w.i18n.translate("xpack.enterpriseSearch.crawler.deleteDomainModal.deleteDomainButtonLabel",{defaultMessage:"Delete domain"}))))},ra=Object(s.kea)({connect:{actions:[Bn,["apiError as getApiError","apiSuccess as getApiSuccess"],Vn,["apiError as deleteApiError","apiSuccess as deleteApiSuccess"]],values:[Bn,["status as getStatus","data as getData"],Vn,["status as deleteStatus"]]},path:["enterprise_search","domain_management"],actions:{deleteDomain:e=>({domain:e}),getDomains:e=>({meta:e}),onPaginate:e=>({newPageIndex:e})},listeners:({values:e,actions:t})=>({deleteApiError:e=>{Object(Q.e)(e)},deleteApiSuccess:()=>{t.getDomains(e.meta)},deleteDomain:({domain:e})=>{const{indexName:t}=Be.values;Vn.actions.makeRequest({domain:e,indexName:t})},getApiError:e=>{Object(Q.e)(e)},getDomains:({meta:e})=>{const{indexName:t}=Be.values;Bn.actions.makeRequest({indexName:t,meta:e})},onPaginate:({newPageIndex:n})=>{t.getDomains(Object(z.c)(e.meta,n))}}),selectors:({selectors:e})=>({domains:[()=>[e.getData],e=>{var t;return null!==(t=null==e?void 0:e.domains)&&void 0!==t?t:[]}],meta:[()=>[e.getData],e=>{var t;return null!==(t=null==e?void 0:e.meta)&&void 0!==t?t:$.i}],isLoading:[()=>[e.getStatus,e.deleteStatus],(e,t)=>e===U.a.IDLE||e===U.a.LOADING||t===U.a.LOADING]}),events:({actions:e,values:t})=>({afterMount:()=>{e.getDomains(t.meta)}})});var sa=n(125);const oa=()=>{const{indexName:e}=Object(s.useValues)(Be),{domains:t,meta:n,isLoading:a}=Object(s.useValues)(ra),{onPaginate:r}=Object(s.useActions)(ra),{showModal:o}=Object(s.useActions)(aa),c=[{field:"url",name:w.i18n.translate("xpack.enterpriseSearch.crawler.domainsTable.column.domainURL",{defaultMessage:"Domain"}),render:(t,n)=>Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiCopy,{textToCopy:n.url},(e=>Object(m.jsx)(v.EuiButtonIcon,{onClick:e,iconSize:"s",iconType:"copy"}))),Object(m.jsx)(k.d,{"data-test-subj":"CrawlerDomainURL",to:Object(Z.a)(R.d,{domainId:n.id,indexName:e})},n.url))},{field:"lastCrawl",name:w.i18n.translate("xpack.enterpriseSearch.crawler.domainsTable.column.lastActivity",{defaultMessage:"Last activity"}),render:e=>e?Object(m.jsx)(sa.a,{timestamp:e}):""},{field:"documentCount",name:w.i18n.translate("xpack.enterpriseSearch.crawler.domainsTable.column.documents",{defaultMessage:"Documents"}),render:e=>Object(m.jsx)(I.FormattedNumber,{value:e})},{name:w.i18n.translate("xpack.enterpriseSearch.crawler.domainsTable.column.actions",{defaultMessage:"Actions"}),actions:[{name:$.p,description:w.i18n.translate("xpack.enterpriseSearch.crawler.domainsTable.action.manage.buttonLabel",{defaultMessage:"Manage this domain"}),type:"icon",icon:"eye",onClick:t=>{u.a.values.navigateToUrl(Object(Z.a)(R.d,{domainId:t.id,indexName:e}))}},{name:$.j,description:w.i18n.translate("xpack.enterpriseSearch.crawler.domainsTable.action.delete.buttonLabel",{defaultMessage:"Delete this domain"}),type:"icon",icon:"trash",color:"danger",onClick:e=>{o(e)}}]}];return Object(m.jsx)(v.EuiBasicTable,{loading:a,items:t,columns:c,pagination:{...Object(z.a)(n),showPerPageOptions:!1},onChange:Object(z.b)(r)})},ca=()=>{const{openFlyout:e}=Object(s.useActions)(Gn);return Object(m.jsx)(v.EuiPanel,{hasBorder:!0},Object(m.jsx)(v.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"xs",justifyContent:"center"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiIcon,{size:"m",type:"globe"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"s"},Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.crawler.domainsTitle",{defaultMessage:"Domains"})))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-crawler-domainManagement-addDomain-addDomain",onClick:e,size:"s",color:"success",iconType:"plusInCircle"},w.i18n.translate("xpack.enterpriseSearch.crawler.addDomainFlyout.openButtonLabel",{defaultMessage:"Add domain"})))),Object(m.jsx)(v.EuiSpacer,{size:"m"}),Object(m.jsx)(oa,null))},la=()=>{const{openFlyout:e}=Object(s.useActions)(Gn),{events:t}=Object(s.useValues)(Ye);return Object(m.jsx)(v.EuiPanel,{hasBorder:!0},Object(m.jsx)(v.EuiTitle,{size:"s"},Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.crawler.domainManagement.emptyState.title",{defaultMessage:"Add a domain to your index"}))),Object(m.jsx)(v.EuiSpacer,{size:"l"}),t.length>0?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiText,{color:"subdued",size:"s"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.crawler.domainManagement.emptyState",{defaultMessage:"You don’t have any domains on this index. Add your first domain to start crawling and indexing documents."}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-crawler-domainManagement-noDomains-addFirstDomain",onClick:e,fill:!0},w.i18n.translate("xpack.enterpriseSearch.crawler.domainManagement.emptyState.addDomainButtonLabel",{defaultMessage:"Add your first domain"}))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiLink,{target:"_blank"},"Learn more")))):Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(Xn,null),Object(m.jsx)(Kn,null),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(ea,null)))},ua=()=>{Vn.mount(),Bn.mount();const{domains:e,isLoading:t}=Object(s.useValues)(ra);return t?Object(m.jsx)(zn.a,null):Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(na,null),e.length>0?Object(m.jsx)(ca,null):Object(m.jsx)(la,null),Object(m.jsx)(ia,null),Object(m.jsx)(ta,null))};var da=n(26);n(169);const pa={boolean:"tokenBoolean",date:"tokenDate",date_range:"tokenDate",double:"tokenNumber",double_range:"tokenDate",flattened:"tokenObject",float:"tokenNumber",float_range:"tokenNumber",geo_point:"tokenGeo",geo_shape:"tokenGeo",half_float:"tokenNumber",histogram:"tokenHistogram",integer:"tokenNumber",integer_range:"tokenNumber",ip:"tokenIp",ip_range:"tokenIp",join:"tokenJoin",keyword:"tokenKeyword",long:"tokenNumber",long_range:"tokenNumber",nested:"tokenObject",object:"tokenObject",percolator:"tokenPercolator",rank_feature:"tokenRankFeature",rank_features:"tokenRankFeatures",scaled_float:"tokenNumber",search_as_you_type:"tokenSearchType",shape:"tokenShape",short:"tokenNumber",text:"tokenString",token_count:"tokenTokenCount",unsigned_long:"tokenNumber"},ga=({iconType:e,fieldName:t,fieldValue:n,fieldType:a,isExpanded:i})=>Object(m.jsx)(v.EuiTableRow,{className:"resultField"},Object(m.jsx)(v.EuiTableRowCell,{className:"resultFieldRowCell",width:da.euiThemeVars.euiSizeL,valign:"middle"},Object(m.jsx)("span",null,Object(m.jsx)(v.EuiToken,{className:"resultField__token",iconType:e||(a?pa[a]:"questionInCircle")}))),Object(m.jsx)(v.EuiTableRowCell,{className:"resultFieldRowCell",width:"25%",truncateText:!i,valign:"middle"},Object(m.jsx)(v.EuiText,{size:"xs"},t)),Object(m.jsx)(v.EuiTableRowCell,{className:"resultFieldRowCell",width:da.euiThemeVars.euiSizeXXL,valign:"middle"},Object(m.jsx)(v.EuiIcon,{type:"sortRight",color:"subdued"})),Object(m.jsx)(v.EuiTableRowCell,{className:"resultFieldRowCell",truncateText:!i,valign:"middle"},("object"===a||"array"===a||"nested"===a||Array.isArray(n))&&i?Object(m.jsx)(v.EuiCodeBlock,{language:"json",overflowHeight:"250",transparentBackground:!0},n):Object(m.jsx)(v.EuiText,{size:"xs"},n))),ha=({fields:e,isExpanded:t})=>Object(m.jsx)(v.EuiTable,null,Object(m.jsx)(v.EuiTableBody,null,e.map((e=>Object(m.jsx)(ga,{isExpanded:t,iconType:e.iconType,fieldName:e.fieldName,fieldValue:e.fieldValue,fieldType:e.fieldType}))))),fa=({label:e})=>Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)("strong",null,Object(m.jsx)(v.EuiTextColor,{color:"subdued"},e,":"))),ma=({label:e})=>Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTextColor,{color:"subdued"},e)),ja=({id:e,onDocumentDelete:t})=>{const[n,i]=Object(a.useState)(!1),r=()=>i(!1),s=Object(m.jsx)(v.EuiButtonIcon,{display:"empty",size:"xs",iconType:"iInCircle",color:"primary",onClick:()=>i(!n),"aria-label":w.i18n.translate("xpack.enterpriseSearch.content.shared.result.header.metadata.icon.ariaLabel",{defaultMessage:"Metadata for document: {id}",values:{id:e}})});return Object(m.jsx)(v.EuiPopover,{button:s,isOpen:n,closePopover:r},Object(m.jsx)(v.EuiPopoverTitle,null,w.i18n.translate("xpack.enterpriseSearch.content.shared.result.header.metadata.title",{defaultMessage:"Document metadata"})),Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"s",direction:"column",style:{width:"20rem"}},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s"},Object(m.jsx)(fa,{label:"ID"}),Object(m.jsx)(ma,{label:e})))),t&&Object(m.jsx)(v.EuiPopoverFooter,null,Object(m.jsx)(v.EuiButton,{iconType:"trash",color:"danger",size:"s",onClick:r,fullWidth:!0},w.i18n.translate("xpack.enterpriseSearch.content.shared.result.header.metadata.deleteDocument",{defaultMessage:"Delete document"}))))},xa=({title:e,metaData:t})=>Object(m.jsx)("div",{className:"resultHeader"},Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("strong",null,e)),!!t&&Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(ja,t))))),ba=({metaData:e,fields:t})=>{var n;const[r,s]=Object(a.useState)(!1),o=t.length<=3?w.i18n.translate("xpack.enterpriseSearch.shared.result.expandTooltip.allVisible",{defaultMessage:"All fields are visible"}):r?w.i18n.translate("xpack.enterpriseSearch.shared.result.expandTooltip.showFewer",{defaultMessage:"Show {amount} fewer fields",values:{amount:t.length-3}}):w.i18n.translate("xpack.enterpriseSearch.shared.result.expandTooltip.showMore",{defaultMessage:"Show {amount} more fields",values:{amount:t.length-3}}),c=Object(m.jsx)(i.a.Fragment,null,o);return Object(m.jsx)(v.EuiPanel,{hasBorder:!0,paddingSize:"s"},Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"none"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"none",responsive:!1},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(xa,{title:null!==(n=e.title)&&void 0!==n?n:w.i18n.translate("xpack.enterpriseSearch.shared.result.title.id",{defaultMessage:"Document id: {id}",values:{id:e.id}}),metaData:e})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(ha,{isExpanded:r,fields:r?t:t.slice(0,3)})))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)("div",{className:"resultExpandColumn"},Object(m.jsx)(v.EuiToolTip,{position:"left",content:c},Object(m.jsx)(v.EuiButtonIcon,{iconType:r?"fold":"unfold",color:"text",onClick:()=>s(!r),"aria-label":o}))))))},ya=["title","name"];function Ma(e,t){return"string"==typeof e[t]}const Oa=e=>{if("object"==typeof(t=e._source)&&null!==t)for(const t of ya)if(Ma(e._source,t))return e._source[t];var t},Sa=e=>({id:e._id,title:Oa(e)}),Ea=Object(V.a)(["mappings_api_logic"],(async({indexName:e})=>{const t=`/internal/enterprise_search/mappings/${e}`;return await l.a.values.http.get(t)})),va=Object(V.a)(["search_documents_api_logic"],(async({docsPerPage:e,indexName:t,pagination:n,query:a})=>{const i=`/internal/enterprise_search/indices/${encodeURIComponent(t)}/search`,r={page:n.pageIndex,size:e||n.pageSize};return await l.a.values.http.post(i,{body:JSON.stringify({searchQuery:a}),query:r})})),wa={page:{current:0,size:x.k,total_pages:0,total_results:0}},Ia={pageIndex:wa.page.current,pageSize:wa.page.size,totalItemCount:wa.page.total_results},Na=e=>({pageIndex:e.page.current,pageSize:e.page.size,totalItemCount:e.page.total_results}),Da=Object(s.kea)({actions:{onPaginate:e=>({newPageIndex:e}),setDocsPerPage:e=>({docsPerPage:e}),setSearchQuery:e=>({query:e})},connect:{actions:[va,["apiReset","makeRequest","apiError","apiSuccess"],Ea,["makeRequest as makeMappingRequest","apiError as mappingsApiError"]],values:[va,["data","status"],Ea,["data as mappingData","status as mappingStatus"],Be,["indexName"]]},listeners:({actions:e,values:t})=>({apiError:e=>Object(Q.e)(e),makeRequest:()=>Object(Q.d)(),mappingsApiError:e=>Object(Q.e)(e),onPaginate:()=>{e.makeRequest({docsPerPage:t.docsPerPage,indexName:t.indexName,pagination:Na(t.meta),query:t.query})},setDocsPerPage:()=>{e.makeRequest({docsPerPage:t.docsPerPage,indexName:t.indexName,pagination:Na(t.meta),query:t.query})},setSearchQuery:async(n,a)=>{await a(250),e.makeRequest({docsPerPage:t.docsPerPage,indexName:t.indexName,pagination:Na(t.meta),query:t.query})}}),path:["enterprise_search","search_index","documents"],reducers:()=>({docsPerPage:[x.k,{setDocsPerPage:(e,{docsPerPage:t})=>t}],meta:[wa,{apiSuccess:(e,{meta:t})=>t,onPaginate:(e,{newPageIndex:t})=>Object(z.c)(e,t),setDocsPerPage:(e,{docsPerPage:t})=>({page:{...wa.page,size:t}})}],query:["",{setSearchQuery:(e,{query:t})=>t}]}),selectors:({selectors:e})=>({isLoading:[()=>[e.status,e.mappingStatus],(e,t)=>e!==U.a.SUCCESS||t!==U.a.SUCCESS],results:[()=>[e.data],e=>{var t,n;return(null==e||null===(t=e.results)||void 0===t||null===(n=t.hits)||void 0===n?void 0:n.hits)||[]}],simplifiedMapping:[()=>[e.mappingStatus,e.mappingData],(e,t)=>{var n;if(e===U.a.SUCCESS)return null==t||null===(n=t.mappings)||void 0===n?void 0:n.properties}]})}),Ta=()=>{const{docsPerPage:e,isLoading:t,meta:n,results:r,simplifiedMapping:o}=Object(s.useValues)(Da),{ingestionMethod:c}=Object(s.useValues)(rt),{onPaginate:l,setDocsPerPage:u}=Object(s.useActions)(Da),[d,p]=Object(a.useState)(!1),g=e=>o&&e._source&&!Array.isArray(e._source)&&"object"==typeof e._source?Object.entries(e._source).map((([e,t])=>{var n,a;return{fieldName:e,fieldType:null!==(n=null===(a=o[e])||void 0===a?void 0:a.type)&&void 0!==n?n:"object",fieldValue:JSON.stringify(t,null,2)}})):[],h=t=>t===e?"check":"empty";return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiPagination,{"aria-label":w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documents.documentList.paginationAriaLabel",{defaultMessage:"Pagination for document list"}),pageCount:n.page.total_pages,activePage:n.page.current,onPageClick:l}),Object(m.jsx)(v.EuiSpacer,{size:"m"}),Object(m.jsx)(v.EuiText,{size:"xs"},Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.searchIndex.documents.documentList.description",defaultMessage:"Showing {results} of {total}. Search results maxed at {maximum} documents.",values:{maximum:Object(m.jsx)(I.FormattedNumber,{value:1e4}),results:Object(m.jsx)("strong",null,Object(m.jsx)(I.FormattedNumber,{value:r.length})),total:Object(m.jsx)("strong",null,Object(m.jsx)(I.FormattedNumber,{value:n.page.total_results}))}}))),t&&Object(m.jsx)(v.EuiProgress,{size:"xs",color:"primary"}),Object(m.jsx)(v.EuiSpacer,{size:"m"}),r.map((e=>Object(m.jsx)(i.a.Fragment,{key:e._id},Object(m.jsx)(ba,{fields:g(e),metaData:Sa(e)}),Object(m.jsx)(v.EuiSpacer,{size:"s"})))),Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiPagination,{"aria-label":w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documents.documentList.paginationAriaLabel",{defaultMessage:"Pagination for document list"}),pageCount:n.page.total_pages,activePage:n.page.current,onPageClick:l})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiPopover,{"aria-label":w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documents.documentList.docsPerPage",{defaultMessage:"Document count per page dropdown"}),button:Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":`entSearchContent-${c}-documents-docsPerPage`,size:"s",iconType:"arrowDown",iconSide:"right",onClick:()=>{p(!0)}},w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documents.documentList.pagination.itemsPerPage",{defaultMessage:"Documents per page: {docPerPage}",values:{docPerPage:e}})),isOpen:d,closePopover:()=>{p(!1)},panelPaddingSize:"none",anchorPosition:"downLeft"},Object(m.jsx)(v.EuiContextMenuPanel,{size:"s",items:[Object(m.jsx)(v.EuiContextMenuItem,{key:"10 rows",icon:h(10),onClick:()=>{p(!1),u(10)}},w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documents.documentList.paginationOptions.option",{defaultMessage:"{docCount} documents",values:{docCount:10}})),Object(m.jsx)(v.EuiContextMenuItem,{key:"25 rows",icon:h(25),onClick:()=>{p(!1),u(25)}},w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documents.documentList.paginationOptions.option",{defaultMessage:"{docCount} documents",values:{docCount:25}})),Object(m.jsx)(v.EuiContextMenuItem,{key:"50 rows",icon:h(50),onClick:()=>{p(!1),u(50)}},w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documents.documentList.paginationOptions.option",{defaultMessage:"{docCount} documents",values:{docCount:50}}))]})))),Object(m.jsx)(v.EuiSpacer,null),n.page.total_results>9999&&Object(m.jsx)(v.EuiCallOut,{size:"s",title:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.searchIndex.documents.documentList.resultLimitTitle",defaultMessage:"Results are limited to {number} documents",values:{number:Object(m.jsx)(I.FormattedNumber,{value:1e4})}}),iconType:"search"},Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.searchIndex.documents.documentList.resultLimit",defaultMessage:"Only the first {number} results are available for paging. Please use the search bar to filter down your results.",values:{number:Object(m.jsx)(I.FormattedNumber,{value:1e4})}}))))};n(438);const ka=()=>{const{indexName:e}=Object(s.useValues)(Be),{ingestionMethod:t}=Object(s.useValues)(rt),{simplifiedMapping:n}=Object(s.useValues)(Da),{makeRequest:i,makeMappingRequest:r,setSearchQuery:o}=Object(s.useActions)(Da);return Object(a.useEffect)((()=>{i({indexName:e,pagination:Ia,query:""}),r({indexName:e})}),[e]),Object(m.jsx)(v.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none"},Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{direction:"row",alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,{className:"enterpriseSearchDocumentsHeader",grow:!1},Object(m.jsx)(v.EuiTitle,null,Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documents.title",{defaultMessage:"Browse documents"})))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFieldSearch,{"data-telemetry-id":`entSearchContent-${t}-documents-searchDocuments`,placeholder:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documents.searchField.placeholder",{defaultMessage:"Search documents in this index"}),isClearable:!0,onChange:e=>o(e.target.value),fullWidth:!0})))),Object(m.jsx)(v.EuiFlexItem,null,!n&&w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documents.noMappings",{defaultMessage:"No mappings found for index"}),n&&Object(m.jsx)(Ta,null))))},Ca=()=>{const{indexName:e}=Object(s.useValues)(Be),{makeMappingRequest:t}=Object(s.useActions)(Da),{mappingData:n}=Object(s.useValues)(Da);return Object(a.useEffect)((()=>{t({indexName:e})}),[e]),Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:2},Object(m.jsx)(v.EuiCodeBlock,{language:"json",isCopyable:!0},JSON.stringify(n,null,2))),Object(m.jsx)(v.EuiFlexItem,{grow:1},Object(m.jsx)(v.EuiPanel,{grow:!1,hasShadow:!1,hasBorder:!0},Object(m.jsx)(v.EuiTitle,{size:"s"},Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.mappings.title",{defaultMessage:"About index mappings"}))),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.searchIndex.mappings.description",defaultMessage:"Your documents are made up of a set of fields. Index mappings give each field a type (such as {keyword}, {number}, or {date}) and additional subfields. These index mappings determine the functions available in your relevance tuning and search experience.",values:{keyword:Object(m.jsx)(v.EuiCode,null,"keyword"),number:Object(m.jsx)(v.EuiCode,null,"number"),date:Object(m.jsx)(v.EuiCode,null,"date")}}))),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiLink,{href:D.a.elasticsearchMapping,target:"_blank",external:!0},w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.mappings.docLink",{defaultMessage:"Learn more"}))))))},_a=Object(V.a)(["generate_api_key_logic"],(async({indexName:e,keyName:t})=>{const n=`/internal/enterprise_search/${e}/api_keys`;return await l.a.values.http.post(n,{body:JSON.stringify({keyName:t})})})),Aa=Object(s.kea)({actions:{closeGenerateModal:!0,openGenerateModal:!0,toggleClientsPopover:!0,toggleManageApiKeyPopover:!0},connect:{actions:[Ve,["apiError"],_a,["apiReset"]],values:[Ve,["indexData","status"],_a,["data as apiKeyData","status as apiKeyStatus"]]},listeners:({actions:e})=>({apiError:async(e,t)=>{Object(Q.e)(e),await t(1e3),u.a.values.navigateToUrl(R.h)},openGenerateModal:()=>{e.apiReset()}}),path:["enterprise_search","search_index","overview"],reducers:()=>({isClientsPopoverOpen:[!1,{toggleClientsPopover:e=>!e}],isGenerateModalOpen:[!1,{closeGenerateModal:()=>!1,openGenerateModal:()=>!0}],isManageKeysPopoverOpen:[!1,{openGenerateModal:()=>!1,toggleManageApiKeyPopover:e=>!e}]}),selectors:({selectors:e})=>({apiKey:[()=>[e.apiKeyStatus,e.apiKeyData],(e,t)=>e===U.a.SUCCESS?t.apiKey.encoded:""],isError:[()=>[e.status],e=>e===U.a.ERROR],isLoading:[()=>[e.status,e.indexData],(e,t)=>e===U.a.IDLE||void 0===t&&e===U.a.LOADING]})}),La=()=>{var e;const{indexData:t,isError:n,isLoading:a}=Object(s.useValues)(Aa),i=null!==(e=null==t?void 0:t.count)&&void 0!==e?e:0,r=a||n,o=[{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.ingestionTypeCardLabel",{defaultMessage:"Ingestion type"}),isLoading:r,title:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.apiIngestionMethodLabel",{defaultMessage:"API"})},{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.documentCountCardLabel",{defaultMessage:"Document count"}),isLoading:r,title:i}];return Object(m.jsx)(v.EuiFlexGroup,{direction:"row"},o.map(((e,t)=>Object(m.jsx)(v.EuiFlexItem,{key:t},Object(m.jsx)(v.EuiPanel,{color:0===t?"primary":"subdued",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,e))))))},za=({ingestionStatus:e})=>Object(m.jsx)(v.EuiPanel,{color:ee(e),hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,{description:w.i18n.translate("xpack.enterpriseSearch.connector.ingestionStatus.title",{defaultMessage:"Ingestion status"}),title:X(e)})),Fa=()=>{const{ingestionStatus:e,index:t}=Object(s.useValues)(rt);return Object(P.g)(t)?Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:1},Object(m.jsx)(v.EuiPanel,{color:"primary",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.documentCountCardLabel",{defaultMessage:"Document count"}),title:t.count}))),Object(m.jsx)(v.EuiFlexItem,{grow:1},e===q.b.INCOMPLETE?Object(m.jsx)(k.d,{to:Object(Z.a)(R.g,{indexName:t.name,tabId:Bs.CONFIGURATION})},Object(m.jsx)(za,{ingestionStatus:e})):Object(m.jsx)(za,{ingestionStatus:e}))):Object(m.jsx)(i.a.Fragment,null)},Ra=()=>{const{status:e}=Object(s.useValues)(jt),{isEditing:t}=Object(s.useValues)(xt),{saveNameAndDescription:n,setIsEditing:a}=Object(s.useActions)(xt);return t?Object(m.jsx)(v.EuiFlyout,{onClose:()=>a(!1),size:"s"},Object(m.jsx)(v.EuiFlyoutHeader,null,Object(m.jsx)(v.EuiTitle,{size:"m"},Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nameAndDescriptionFlyout.title",{defaultMessage:"Describe this crawler"})))),Object(m.jsx)(v.EuiFlyoutBody,null,Object(m.jsx)(v.EuiFormRow,null,Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nameAndDescriptionFlyout.description",{defaultMessage:"By naming and describing this connector your colleagues and wider team will know what this connector is meant for."}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(bt,null)),Object(m.jsx)(v.EuiFlyoutFooter,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonEmpty,{onClick:()=>a(!1),isLoading:e===U.a.LOADING},$.d)),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{isLoading:e===U.a.LOADING,fill:!0,onClick:n},w.i18n.translate("xpack.enterpriseSearch.content.indices.configurationConnector.nameAndDescriptionFlyout.saveButtonLabel",{defaultMessage:"Save name and description"})))))):null},Pa=({label:e,onClick:t})=>Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},e),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonEmpty,{onClick:t},"Edit"))),Ua=()=>{const{indexData:e,isError:t,isLoading:n}=Object(s.useValues)(Aa),a=n||t,{setIsEditing:r}=Object(s.useActions)(xt);if(!Object(P.g)(e)&&!Object(P.i)(e))return Object(m.jsx)(i.a.Fragment,null);const o=[{description:Object(m.jsx)(Pa,{label:$.s,onClick:()=>r(!0)}),isLoading:a,title:e.connector.name},{description:Object(m.jsx)(Pa,{label:$.k,onClick:()=>r(!0)}),isLoading:a,title:Object(m.jsx)(v.EuiText,{size:"s"},e.connector.description||""),titleElement:"p"}];return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiFlexGroup,{direction:"row"},o.map(((e,t)=>Object(m.jsx)(v.EuiFlexItem,{key:t},Object(m.jsx)(v.EuiPanel,{color:"subdued",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,e)))))),Object(m.jsx)(Ra,null))},$a=()=>{var e,t,n,a;const{indexData:r,isError:o,isLoading:c}=Object(s.useValues)(Aa),l=c||o;if(!Object(P.g)(r))return Object(m.jsx)(i.a.Fragment,null);const u=[{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.ingestionTypeCardLabel",{defaultMessage:"Ingestion type"}),isLoading:l,title:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.connectorIngestionMethodLabel",{defaultMessage:"Connector"})},{description:w.i18n.translate("xpack.enterpriseSearch.connector.connectorTypePanel.title",{defaultMessage:"Connector type"}),title:null!==(e=null!==(t=null===(n=It.find((e=>e.serviceType===r.connector.service_type)))||void 0===n?void 0:n.name)&&void 0!==t?t:r.connector.service_type)&&void 0!==e?e:w.i18n.translate("xpack.enterpriseSearch.connector.connectorTypePanel.unknown.label",{defaultMessage:"Unknown"})},{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.languageLabel",{defaultMessage:"Language analyzer"}),isLoading:l,title:ge(null!==(a=r.connector.language)&&void 0!==a?a:"")}];return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(Ua,null),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"row"},u.map(((e,t)=>Object(m.jsx)(v.EuiFlexItem,{key:t},Object(m.jsx)(v.EuiPanel,{color:"primary",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,e)))))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Fa,null))},Qa=Object(s.kea)({path:["enterprise_search","crawler","crawl_detail_logic"],actions:{closeFlyout:!0,fetchCrawlRequest:e=>({requestId:e}),onRecieveCrawlRequest:e=>({crawlRequestFromServer:e}),setSelectedTab:e=>({selectedTab:e})},reducers:{crawlRequest:[null,{onRecieveCrawlRequest:(e,{crawlRequestFromServer:t})=>function(e){const{began_at:t,completed_at:n,crawl_config:a,created_at:i,id:r,stats:s,status:o,type:c}=e;return{beganAt:t,completedAt:n,crawlConfig:ze(a),createdAt:i,id:r,stats:s&&Ae(s),status:o,type:c}}(t)}],crawlRequestFromServer:[null,{onRecieveCrawlRequest:(e,{crawlRequestFromServer:t})=>t}],dataLoading:[!0,{fetchCrawlRequest:()=>!0,onRecieveCrawlRequest:()=>!1}],flyoutClosed:[!0,{fetchCrawlRequest:()=>!1,closeFlyout:()=>!0}],selectedTab:["preview",{fetchCrawlRequest:()=>"preview",setSelectedTab:(e,{selectedTab:t})=>t}]},listeners:({actions:e})=>({fetchCrawlRequest:async({requestId:t})=>{const{http:n}=l.a.values,{indexName:a}=Be.values;try{const i=await n.get(`/internal/enterprise_search/indices/${a}/crawler/crawl_requests/${t}`);e.onRecieveCrawlRequest(i)}catch(e){Object(Q.e)(e)}}})});var Va=n(235),Ba=n(18),Ya=n.n(Ba);const qa=({crawlDepth:e,crawlType:t,domainCount:n,stats:a})=>{var i,r,s,o,c,l;const u=(e,t)=>Object.entries(t).reduce(((t,[n,a])=>n[0]!==e?t:a+t),0),d={clientErrorCount:null!=a&&null!==(i=a.status)&&void 0!==i&&i.statusCodes?u("4",a.status.statusCodes):0,serverErrorCount:null!=a&&null!==(r=a.status)&&void 0!==r&&r.statusCodes?u("5",a.status.statusCodes):0},p=!a;return Object(m.jsx)(v.EuiPanel,{paddingSize:"l",color:"primary"},Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:2},Object(m.jsx)(v.EuiStat,{"data-test-subjet":"crawlType",titleSize:"s",title:w.i18n.translate("xpack.enterpriseSearch.crawler.components.crawlDetailsSummary.crawlCountOnDomains",{defaultMessage:"{crawlType} crawl on {domainCount, plural, one {# domain} other {# domains}}",values:{crawlType:t[0].toUpperCase()+t.substring(1),domainCount:n}}),description:w.i18n.translate("xpack.enterpriseSearch.crawler.components.crawlDetailsSummary.crawlTypeLabel",{defaultMessage:"Crawl type"})})),Object(m.jsx)(v.EuiFlexItem,{grow:1},Object(m.jsx)(v.EuiStat,{"data-test-subj":"crawlDepth",titleSize:"s",title:e,description:w.i18n.translate("xpack.enterpriseSearch.crawler.components.crawlDetailsSummary.crawlDepthLabel",{defaultMessage:"Max crawl depth"})})),!p&&Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiStat,{"data-test-subj":"crawlDuration",titleSize:"s",title:(()=>{var e;if(null!=a&&null!==(e=a.status)&&void 0!==e&&e.crawlDurationMSec){const e=Ya.a.duration(a.status.crawlDurationMSec,"milliseconds");return`${e.hours()}h ${e.minutes()}m ${e.seconds()}s`}return"--"})(),description:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsSummary.durationTooltipTitle",{defaultMessage:"Duration"})}))),Object(m.jsx)(v.EuiHorizontalRule,{margin:"s"}),p?Object(m.jsx)(v.EuiText,{size:"xs",textAlign:"center","data-test-subj":"logsDisabledMessage"},Object(m.jsx)(v.EuiSpacer,{size:"m"}),Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsSummary.logsDisabledMessage",{defaultMessage:"Enable Web Crawler logs in settings for more detailed crawl statistics."}))):Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiStat,{"data-test-subj":"urlsAllowed",titleSize:"s",title:null!==(s=null==a||null===(o=a.status)||void 0===o?void 0:o.urlsAllowed)&&void 0!==s?s:"--",description:Object(m.jsx)(v.EuiText,{size:"s"},"URLs"," ",Object(m.jsx)(v.EuiIconTip,{type:"iInCircle",color:"primary",size:"m",title:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsSummary.urlsTooltipTitle",{defaultMessage:"URLs Seen"}),content:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsSummary.urlsTooltip",{defaultMessage:"URLs found by the crawler during the crawl, including those not followed due to the crawl configuration."})}))})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiStat,{"data-test-subj":"pagesVisited",titleSize:"s",title:null!=a&&null!==(c=a.status)&&void 0!==c&&c.pagesVisited?a.status.pagesVisited:"--",description:Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsSummary.pagesVisitedTooltipTitle",{defaultMessage:"Pages"})," ",Object(m.jsx)(v.EuiIconTip,{type:"iInCircle",color:"primary",size:"m",title:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsSummary.pagesTooltipTitle",{defaultMessage:"Pages visited"}),content:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsSummary.pagesTooltip",{defaultMessage:"URLs visited and extracted during the crawl."})}))})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiStat,{"data-test-subj":"avgResponseTime",titleSize:"s",title:null!=a&&null!==(l=a.status)&&void 0!==l&&l.avgResponseTimeMSec?`${Math.round(a.status.avgResponseTimeMSec)}ms`:"--",description:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsSummary.avgResponseTimeLabel",{defaultMessage:"Avg. response"})})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiStat,{"data-test-subj":"clientErrors",titleSize:"s",title:d.clientErrorCount,description:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsSummary.clientErrorsLabel",{defaultMessage:"4xx Errors"})})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiStat,{"data-test-subj":"serverErrors",titleSize:"s",title:d.serverErrorCount,description:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsSummary.serverErrorsLabel",{defaultMessage:"5xx Errors"})}))))},Ga=()=>{const{crawlRequest:e}=Object(s.useValues)(Qa);return null===e?null:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(qa,{crawlType:e.type,domainCount:e.crawlConfig.domainAllowlist.length,crawlDepth:e.crawlConfig.maxCrawlDepth,stats:e.stats||null}),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Va.a,{hasBorder:!0,initialIsOpen:e.crawlConfig.domainAllowlist.length>0,title:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsPreview.domainsTitle",{defaultMessage:"Domains"}),iconType:"globe",items:e.crawlConfig.domainAllowlist}),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(Va.a,{hasBorder:!0,initialIsOpen:e.crawlConfig.seedUrls.length>0,title:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsPreview.seedUrlsTitle",{defaultMessage:"Seed URLs"}),iconType:"crosshairs",items:e.crawlConfig.seedUrls}),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(Va.a,{hasBorder:!0,initialIsOpen:e.crawlConfig.sitemapUrls.length>0,title:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsPreview.sitemapUrlsTitle",{defaultMessage:"Sitemap URLs"}),iconType:"visMapRegion",items:e.crawlConfig.sitemapUrls}))},Wa=()=>{const{closeFlyout:e,setSelectedTab:t}=Object(s.useActions)(Qa),{crawlRequestFromServer:n,dataLoading:a,flyoutClosed:r,selectedTab:o}=Object(s.useValues)(Qa);return r?null:Object(m.jsx)(v.EuiFlyout,{maxWidth:"45rem",ownFocus:!0,onClose:e,"aria-labelledby":"CrawlDetailsFlyoutTitle"},Object(m.jsx)(v.EuiFlyoutHeader,{hasBorder:!0},Object(m.jsx)(v.EuiTitle,{size:"m"},Object(m.jsx)("h2",{id:"CrawlDetailsFlyoutTitle"},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsFlyout.title",{defaultMessage:"Crawl request details"}))),Object(m.jsx)(v.EuiTabs,{style:{marginBottom:"-25px"}},Object(m.jsx)(v.EuiTab,{isSelected:"preview"===o,onClick:()=>t("preview")},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsFlyout.previewTabLabel",{defaultMessage:"Preview"})),Object(m.jsx)(v.EuiTab,{isSelected:"json"===o,onClick:()=>t("json")},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlDetailsFlyout.rawJSONTabLabel",{defaultMessage:"Raw JSON"})))),Object(m.jsx)(v.EuiFlyoutBody,null,a?Object(m.jsx)(zn.a,null):Object(m.jsx)(i.a.Fragment,null,"preview"===o&&Object(m.jsx)(Ga,null),"json"===o&&Object(m.jsx)(v.EuiCodeBlock,{language:"json",isCopyable:!0},JSON.stringify(n,null,2)))))};var Ha=n(72);const Ja={[ke.Full]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlTypeOptions.full",{defaultMessage:"Full"}),[ke.Partial]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlTypeOptions.partial",{defaultMessage:"Partial"})},Za={[Ie.Pending]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusOptions.pending",{defaultMessage:"Pending"}),[Ie.Suspended]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusOptions.suspended",{defaultMessage:"Suspended"}),[Ie.Starting]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusOptions.starting",{defaultMessage:"Starting"}),[Ie.Running]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusOptions.running",{defaultMessage:"Running"}),[Ie.Suspending]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusOptions.suspending",{defaultMessage:"Suspending"}),[Ie.Canceling]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusOptions.canceling",{defaultMessage:"Canceling"}),[Ie.Success]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusOptions.success",{defaultMessage:"Success"}),[Ie.Failed]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusOptions.failed",{defaultMessage:"Failed"}),[Ie.Canceled]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusOptions.canceled",{defaultMessage:"Canceled"}),[Ie.Skipped]:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusOptions.skipped",{defaultMessage:"Skipped"})},Ka={[Ie.Pending]:"default",[Ie.Suspended]:"default",[Ie.Starting]:"default",[Ie.Running]:"default",[Ie.Suspending]:"default",[Ie.Canceling]:"default",[Ie.Success]:"success",[Ie.Failed]:"danger",[Ie.Canceled]:"default",[Ie.Skipped]:"default"},Xa=({event:e})=>"process"===e.stage?Object(m.jsx)(v.EuiBadge,{color:"hollow"},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlTypeOptions.reAppliedCrawlRules",{defaultMessage:"Re-applied crawl rules"})):e.type===ke.Full?Object(m.jsx)(v.EuiBadge,null,Ja[ke.Full]):e.type===ke.Partial?Object(m.jsx)(v.EuiBadge,{color:"hollow"},Ja[ke.Partial]):null,ei=()=>{const{events:e}=Object(s.useValues)(Ye),{fetchCrawlRequest:t}=Object(s.useActions)(Qa),n=[{field:"id",name:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRequestsTable.column.domainURL",{defaultMessage:"Request ID"}),render:(e,n)=>"crawl"===n.stage?Object(m.jsx)(v.EuiLink,{onClick:()=>{t(e)}},e):Object(m.jsx)("span",null,e)},{field:"createdAt",name:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRequestsTable.column.created",{defaultMessage:"Created"}),render:e=>Object(m.jsx)(sa.a,{timestamp:e})},{field:"type",name:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRequestsTable.column.crawlType",{defaultMessage:"Crawl type"}),render:(e,t)=>Object(m.jsx)(Xa,{event:t})},{name:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRequestsTable.column.domains",{defaultMessage:"Domains"}),render:e=>Object(m.jsx)(v.EuiBadge,null,e.crawlConfig.domainAllowlist.length)},{field:"status",name:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRequestsTable.column.status",{defaultMessage:"Status"}),render:e=>Object(m.jsx)(v.EuiBadge,{color:Ka[e]},Za[e])}];return Object(m.jsx)(v.EuiBasicTable,{columns:n,items:e,noItemsMessage:Object(m.jsx)(v.EuiEmptyPrompt,{iconType:"tableDensityExpanded",title:Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRequestsTable.emptyPrompt.title",{defaultMessage:"No recent crawl requests"})),body:Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRequestsTable.emptyPrompt.body",{defaultMessage:"You haven't started any crawls yet."}))})})},ti=()=>{const{data:e}=Object(s.useValues)(Ye);return Object(m.jsx)(Ha.a,{hasBorder:!0,title:Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRequestsPanel.title",{defaultMessage:"Crawl requests"})),titleSize:"s",iconType:"documents",subtitle:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRequestsPanel.description",{defaultMessage:"Recent crawl requests are logged here. You can track progress and examine crawl events in Kibana's Discover or Logs user intefaces"})},Object(m.jsx)(v.EuiPanel,{color:"subdued"},Object(m.jsx)(v.EuiText,{size:"s"},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRequestsPanel.userAgentDescription",{defaultMessage:"Requests originating from the crawler can be identified by the following User Agent. This is configured in your enterprise-search.yml file."})," "),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiCode,null,e?e.userAgent:"")),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(ei,null))},ni=()=>{var e;const{domains:t,dataLoading:n}=Object(s.useValues)(Ye),{indexData:a,isError:r,isLoading:o}=Object(s.useValues)(Aa),c=null!==(e=null==a?void 0:a.count)&&void 0!==e?e:0,l=o||r,u=[{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.ingestionTypeCardLabel",{defaultMessage:"Ingestion type"}),isLoading:l,title:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.crawlerIngestionMethodLabel",{defaultMessage:"Crawler"})},{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.domainCountCardLabel",{defaultMessage:"Domain count"}),isLoading:n||l,title:t.length},{description:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.totalStats.documentCountCardLabel",{defaultMessage:"Document count"}),isLoading:l,title:c}];return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(Ua,null),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"row"},u.map(((e,t)=>Object(m.jsx)(v.EuiFlexItem,{key:t},Object(m.jsx)(v.EuiPanel,{color:0===t?"primary":"subdued",hasShadow:!1,paddingSize:"l"},Object(m.jsx)(v.EuiStat,e)))))))};var ai=n(453);const ii=Object(V.a)(["content","get_default_pipeline_api_logic"],(async()=>await l.a.values.http.get("/internal/enterprise_search/connectors/default_pipeline"))),ri=Object(V.a)(["content","update_default_pipeline_api_logic"],(async e=>(await l.a.values.http.put("/internal/enterprise_search/connectors/default_pipeline",{body:JSON.stringify(e)}),e))),si=Object(s.kea)({actions:{setPipeline:e=>({pipeline:e})},connect:{actions:[ri,["apiSuccess","apiError","makeRequest"],ii,["apiError as fetchDefaultPipelineError","apiSuccess as fetchDefaultPipelineSuccess","makeRequest as fetchDefaultPipeline"]],values:[ii,["data as defaultPipeline","status as fetchStatus"],ri,["status"]]},events:({actions:e})=>({afterMount:()=>{e.fetchDefaultPipeline(void 0)}}),listeners:({actions:e})=>({apiError:e=>Object(Q.e)(e),apiSuccess:t=>{Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.indices.defaultPipelines.successToast.title",{defaultMessage:"Default pipeline successfully updated"})),e.fetchDefaultPipelineSuccess(t)},fetchDefaultPipelineSuccess:t=>{e.setPipeline(t)},makeRequest:()=>Object(Q.d)()}),path:["enterprise_search","content","settings"],reducers:()=>({pipelineState:[x.e,{setPipeline:(e,{pipeline:t})=>t}],showModal:[!1,{apiSuccess:()=>!1,closeModal:()=>!1,openModal:()=>!0}]}),selectors:({selectors:e})=>({hasNoChanges:[()=>[e.pipelineState,e.defaultPipeline],(e,t)=>Object(ai.isDeepEqual)(e,t)],isLoading:[()=>[e.status,e.fetchStatus],(e,t)=>[U.a.LOADING,U.a.IDLE].includes(t)||e===U.a.LOADING]})});var oi=n(455),ci=n.n(oi),li=n(456),ui=n.n(li),di=n(457),pi=n.n(di),gi=n(458),hi=n.n(gi),fi=n(459),mi=n.n(fi),ji=n(460),xi=n.n(ji),bi=n(461),yi=n.n(bi),Mi=n(462),Oi=n.n(Mi),Si=n(463),Ei=n.n(Si);const vi={dotnet:ci.a,go:ui.a,java:pi.a,javascript:hi.a,perl:mi.a,php:xi.a,python:yi.a,ruby:Oi.a,rust:Ei.a},wi=[{href:D.a.clientsJavaIntroduction,icon:vi.java,key:"java",text:w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.clientLibraries.java",{defaultMessage:"Java"})},{href:D.a.clientsJsIntro,icon:vi.javascript,key:"javascript",text:w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.clientLibraries.javascript",{defaultMessage:"Javascript / Node"})},{href:D.a.clientsRubyOverview,icon:vi.ruby,key:"ruby",text:w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.clientLibraries.ruby",{defaultMessage:"Ruby"})},{href:D.a.clientsGoIndex,icon:vi.go,key:"go",text:w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.clientLibraries.go",{defaultMessage:"Go"})},{href:D.a.clientsNetIntroduction,icon:vi.dotnet,key:"dotnet",text:w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.clientLibraries.dotnet",{defaultMessage:".NET"})},{href:D.a.clientsPhpGuide,icon:vi.php,key:"php",text:w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.clientLibraries.php",{defaultMessage:"PHP"})},{href:D.a.clientsPerlGuide,icon:vi.perl,key:"perl",text:w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.clientLibraries.perl",{defaultMessage:"Perl"})},{href:D.a.clientsPythonOverview,icon:vi.python,key:"python",text:w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.clientLibraries.python",{defaultMessage:"Python"})},{href:D.a.clientsRustOverview,icon:vi.rust,key:"rust",text:w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.clientLibraries.rust",{defaultMessage:"Rust"})}],Ii=()=>{const{isClientsPopoverOpen:e}=Object(s.useValues)(Aa),{ingestionMethod:t}=Object(s.useValues)(rt),{toggleClientsPopover:n}=Object(s.useActions)(Aa);return Object(m.jsx)(v.EuiPopover,{isOpen:e,closePopover:n,button:Object(m.jsx)(v.EuiButton,{"data-telemetry-id":`entSearchContent-${t}-overview-clientLibraries-openClientLibraries`,iconType:"arrowDown",iconSide:"right",onClick:n},w.i18n.translate("xpack.enterpriseSearch.content,overview.documentExample.clientLibraries.label",{defaultMessage:"Client Libraries"}))},Object(m.jsx)(v.EuiContextMenuPanel,{size:"s",items:wi.map((e=>Object(m.jsx)(v.EuiContextMenuItem,{key:e.key,href:e.href,target:"_blank",icon:e.icon?Object(m.jsx)(v.EuiIcon,{type:e.icon,size:"l"}):void 0},Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,null,Object(m.jsx)("p",null,e.text))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiIcon,{type:"popout",size:"m",color:"primary"}))))))}))};var Ni=n(170);const Di=Object(s.kea)({actions:{setKeyName:e=>({keyName:e})},connect:{actions:[_a,["makeRequest","apiError"]],values:[_a,["data","status"]]},listeners:()=>({apiError:e=>Object(Q.e)(e),makeRequest:()=>Object(Q.d)()}),path:["enterprise_search","search_index","generate_api_key_modal"],reducers:()=>({keyName:["",{setKeyName:(e,{keyName:t})=>t}]}),selectors:({selectors:e})=>({apiKey:[()=>[e.data],e=>{var t;return(null==e||null===(t=e.apiKey)||void 0===t?void 0:t.encoded)||""}],isLoading:[()=>[e.status],e=>e===U.a.LOADING],isSuccess:[()=>[e.status],e=>e===U.a.SUCCESS]})}),Ti=({indexName:e,onClose:t})=>{const{keyName:n,apiKey:a,isLoading:r,isSuccess:o}=Object(s.useValues)(Di),{ingestionMethod:c}=Object(s.useValues)(rt),{setKeyName:l,makeRequest:u}=Object(s.useActions)(Di);return Object(m.jsx)(v.EuiModal,{onClose:t},Object(m.jsx)(v.EuiModalHeader,null,Object(m.jsx)(v.EuiModalHeaderTitle,null,w.i18n.translate("xpack.enterpriseSearch.content.overview.generateApiKeyModal.title",{defaultMessage:"Generate API Key"}))),Object(m.jsx)(v.EuiModalBody,null,Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiText,{size:"m"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.overview.generateApiKeyModal.info",{defaultMessage:"Before you can start posting documents to your Elasticsearch index you'll need to create at least one API key."})," ",Object(m.jsx)(v.EuiLink,{href:D.a.apiKeys,external:!0},w.i18n.translate("xpack.enterpriseSearch.content.overview.generateApiKeyModal.learnMore",{defaultMessage:"Learn more about API keys"})))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiPanel,{hasShadow:!1,color:"primary"},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{direction:"row",alignItems:"flexEnd"},o?Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFormLabel,null,n),Object(m.jsx)(v.EuiSpacer,{size:"xs"}),Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCodeBlock,{"aria-label":n,fontSize:"m",paddingSize:"m",color:"dark",isCopyable:!0},a)),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonIcon,{"data-telemetry-id":`entSearchContent-${c}-overview-generateApiKey-download`,"aria-label":w.i18n.translate("xpack.enterpriseSearch.content.overview.generateApiKeyModal.csvDownloadButton",{defaultMessage:"Download API key"}),iconType:"download",href:encodeURI(`data:text/csv;charset=utf-8,${a}`),download:`${n}.csv`})))):Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFormRow,{label:"Name your API key",fullWidth:!0},Object(m.jsx)(v.EuiFieldText,{"data-telemetry-id":`entSearchContent-${c}-overview-generateApiKey-editName`,fullWidth:!0,placeholder:"Type a name for your API key",onChange:e=>l(e.currentTarget.value),isLoading:r}))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButton,{"data-telemetry-id":`entSearchContent-${c}-overview-generateApiKey-generate `,"data-test-subj":"generateApiKeyButton",iconSide:"left",iconType:"plusInCircle",fill:!0,onClick:()=>{u({indexName:e,keyName:n.trim()})},disabled:n.trim().length<=0},w.i18n.translate("xpack.enterpriseSearch.content.overview.generateApiKeyModal.generateButton",{defaultMessage:"Generate API key"})))))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{direction:"row"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{size:"s",color:"#006bb8"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.overview.generateApiKeyModal.apiKeyWarning",{defaultMessage:"Elastic does not store API keys. Once generated, you'll only be able to view the key one time. Make sure you save it somewhere secure. If you lose access to it you'll need to generate a new API key from this screen."})))))))))),Object(m.jsx)(v.EuiModalFooter,null,Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":`entSearchContent-${c}-overview-generateApiKey-cancel`,onClick:t},w.i18n.translate("xpack.enterpriseSearch.content.overview.generateApiKeyModal.cancel",{defaultMessage:"Cancel"}))))},ki=()=>{const{isManageKeysPopoverOpen:e}=Object(s.useValues)(Aa),{ingestionMethod:t}=Object(s.useValues)(rt),{toggleManageApiKeyPopover:n,openGenerateModal:a}=Object(s.useActions)(Aa);return Object(m.jsx)(v.EuiPopover,{isOpen:e,closePopover:n,button:Object(m.jsx)(v.EuiButton,{fill:!0,iconType:"arrowDown",iconSide:"right",onClick:n},w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.generateApiKeyButton.label",{defaultMessage:"Manage API keys"}))},Object(m.jsx)(v.EuiContextMenuPanel,{size:"s",items:[Object(m.jsx)(v.EuiContextMenuItem,{"data-telemetry-id":`entSearchContent-${t}-overview-generateApiKeys-viewApiKeys`,icon:"eye",onClick:()=>u.a.values.navigateToUrl("/app/management/security/api_keys",{shouldNotCreateHref:!0})},Object(m.jsx)(v.EuiText,null,Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.overview.documementExample.generateApiKeyButton.viewAll",{defaultMessage:"View all API keys"})))),Object(m.jsx)(v.EuiContextMenuItem,{"data-telemetry-id":`entSearchContent-${t}-overview-generateApiKeys-createNewApiKey`,icon:"plusInCircle",onClick:a},Object(m.jsx)(v.EuiText,null,Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.overview.documementExample.generateApiKeyButton.createNew",{defaultMessage:"Create a new API key"}))))]}))},Ci=()=>{const{apiKey:e,isGenerateModalOpen:t}=Object(s.useValues)(Aa),{indexName:n,ingestionMethod:r}=Object(s.useValues)(rt),{closeGenerateModal:o}=Object(s.useActions)(Aa),{defaultPipeline:c}=Object(s.useValues)(si),[l,u]=Object(a.useState)(!0);return Object(m.jsx)(i.a.Fragment,null,t&&Object(m.jsx)(Ti,{indexName:n,onClose:o}),Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{hasBorder:!0},Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,null,"."!==n[0]&&Object(m.jsx)(v.EuiTitle,{size:"s"},Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.overview.documentExample.title",{defaultMessage:"Adding documents to your index"})))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiSwitch,{"data-telemetry-id":`entSearchContent-${r}-overview-generateApiKey-optimizedRequest`,onChange:e=>u(e.target.checked),label:w.i18n.translate("xpack.enterpriseSearch.content.overview.optimizedRequest.label",{defaultMessage:"View Enterprise Search optimized request"}),checked:l})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Ii,null)),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(ki,null)))))),"."!==n[0]&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Ni.a,{apiKey:e,document:he,indexName:n,pipeline:l?c:void 0}))))))))};var _i=n(126);function Ai(e){return e?`${e.hours()}h ${e.minutes()}m ${e.seconds()}s`:"--"}function Li(e){switch(e){case we.f.COMPLETED:return"success";case we.f.ERROR:case we.f.CANCELED:return"danger";case we.f.IN_PROGRESS:case we.f.PENDING:case we.f.SUSPENDED:case we.f.CANCELING:return"warning"}}var zi=n(464);const Fi=({children:e,title:t})=>Object(m.jsx)(v.EuiPanel,{paddingSize:"l",color:"subdued",hasShadow:!1},Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h4",null,t)),Object(m.jsx)(v.EuiSpacer,null),e),Ri=e=>{const t=[{field:"added",name:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.documents.added",{defaultMessage:"Added"})},{field:"removed",name:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.documents.removed",{defaultMessage:"Removed"})},{field:"total",name:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.documents.total",{defaultMessage:"Total"})},{field:"volume",name:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.documents.volume",{defaultMessage:"Volume"}),render:e=>new zi.ByteSizeValue(e).toString()}];return Object(m.jsx)(Fi,{title:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.documents.title",{defaultMessage:"Documents"})},Object(m.jsx)(v.EuiBasicTable,{columns:t,items:[e]}))};function Pi(e){if(!e)return"";try{return Ya()(e).toLocaleString()}catch{return""}}const Ui=({cancelationRequestedAt:e,canceledAt:t,completed:n,lastUpdated:a,syncRequestedAt:i,syncStarted:r,triggerMethod:s})=>{const o=[{date:Pi(i),title:s===we.g.ON_DEMAND?w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.events.syncRequestedManually",{defaultMessage:"Sync requested manually"}):w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.events.syncRequestedScheduled",{defaultMessage:"Sync requested by schedule"})},{date:Pi(r),title:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.events.syncStarted",{defaultMessage:"Sync started"})},{date:Pi(a),title:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.events.lastUpdated",{defaultMessage:"Last updated"})},{date:Pi(n),title:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.events.completed",{defaultMessage:"Completed"})},{date:Pi(e),title:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.events.cancelationRequested",{defaultMessage:"Cancelation requested"})},{date:Pi(t),title:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.events.canceled",{defaultMessage:"Canceled"})}].filter((({date:e})=>!!e)).sort((({date:e},{date:t})=>Ya()(e).isAfter(Ya()(t))?1:-1)),c=[{field:"title",name:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.events.state",{defaultMessage:"State"}),width:"50%"},{field:"date",name:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.events.time",{defaultMessage:"Time"}),width:"50%"}];return Object(m.jsx)(Fi,{title:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.events.title",{defaultMessage:"Events"})},Object(m.jsx)(v.EuiBasicTable,{columns:c,items:o}))},$i=({advancedSnippet:e,filteringRules:t})=>Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(Fi,{title:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.syncRulesTitle",{defaultMessage:"Sync rules"})},Object(m.jsx)(dn,{filteringRules:t,showOrder:!1})),null!=e&&e.value?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Fi,{title:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.syncRulesAdvancedTitle",{defaultMessage:"Advanced sync rules"})},Object(m.jsx)(v.EuiPanel,{hasShadow:!1},Object(m.jsx)(v.EuiCodeBlock,{transparentBackground:!0,language:"json"},JSON.stringify(e.value,void 0,2))))):Object(m.jsx)(i.a.Fragment,null)),Qi=({pipeline:e})=>{const t=[{setting:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.pipeline.name",{defaultMessage:"Pipeline name"}),value:e.name},{setting:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.pipeline.extractBinaryContent",{defaultMessage:"Extract binary content"}),value:e.extract_binary_content},{setting:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.pipeline.reduceWhitespace",{defaultMessage:"Reduce whitespace"}),value:e.reduce_whitespace},{setting:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.pipeline.runMlInference",{defaultMessage:"Machine learning inference"}),value:e.run_ml_inference}],n=[{field:"setting",name:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.pipeline.setting",{defaultMessage:"Pipeline setting"})},{field:"value",name:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.documents.value",{defaultMessage:"Value"})}];return Object(m.jsx)(Fi,{title:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.pipeline.title",{defaultMessage:"Pipeline"})},Object(m.jsx)(v.EuiBasicTable,{columns:n,items:t}))},Vi=({syncJob:e})=>{var t;return Object(m.jsx)(i.a.Fragment,null,!!e.completed_at&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCallOut,{color:"success",iconType:"check",title:w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.completedTitle",{defaultMessage:"Sync complete"})},w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.completedDescription",{defaultMessage:"Completed at {date}",values:{date:Pi(e.completed_at)}}))),e.status===we.f.ERROR&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCallOut,{color:"danger",iconType:"cross",title:w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.failureTitle",{defaultMessage:"Sync failure"})},w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.failureDescription",{defaultMessage:"Sync failure: {error}.",values:{error:e.error}}))),e.status===we.f.CANCELED&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCallOut,{color:"danger",iconType:"cross",title:w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.canceledTitle",{defaultMessage:"Sync canceled"})},w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.canceledDescription",{defaultMessage:"Sync canceled at {date}.",values:{date:Pi(null!==(t=e.canceled_at)&&void 0!==t?t:"")}}))),e.status===we.f.IN_PROGRESS&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCallOut,{color:"warning",iconType:"clock",title:w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.inProgressTitle",{defaultMessage:"In progress"})},w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.inProgressDescription",{defaultMessage:"Sync has been running for {duration}.",values:{duration:Ai(e.duration)}}))),!!e.started_at&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCallOut,{color:"primary",iconType:"iInCircle",title:e.trigger_method===we.g.ON_DEMAND?w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.syncStartedManually",{defaultMessage:"Sync started manually"}):w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.syncStartedScheduled",{defaultMessage:"Sync started by schedule"})},w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.startedAtDescription",{defaultMessage:"Started at {date}.",values:{date:Pi(e.started_at)}}))))},Bi=({onClose:e,syncJob:t})=>{var n,a,r,s,o,c;const l=null!=t&&t.connector.filtering?t.connector.filtering[0]:null;return t?Object(m.jsx)(v.EuiFlyout,{onClose:e},Object(m.jsx)(v.EuiFlyoutHeader,{hasBorder:!0},Object(m.jsx)(v.EuiTitle,{size:"m"},Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.title",{defaultMessage:"Event log"})))),Object(m.jsx)(v.EuiFlyoutBody,null,Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},Object(m.jsx)(Vi,{syncJob:t}),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Fi,{title:w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.sync",{defaultMessage:"Sync"})},Object(m.jsx)(v.EuiBasicTable,{columns:[{field:"id",name:w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.flyout.sync.id",{defaultMessage:"ID"})}],items:[{id:t.id}]}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Ri,{added:t.indexed_document_count,total:0,removed:t.deleted_document_count,volume:null!==(n=t.indexed_document_volume)&&void 0!==n?n:0})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Ui,{canceledAt:null!==(a=t.canceled_at)&&void 0!==a?a:"",cancelationRequestedAt:null!==(r=t.cancelation_requested_at)&&void 0!==r?r:"",syncRequestedAt:t.created_at,syncStarted:t.started_at,completed:null!==(s=t.completed_at)&&void 0!==s?s:"",lastUpdated:t.last_seen,triggerMethod:t.trigger_method})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)($i,{advancedSnippet:null==l?void 0:l.advanced_snippet,filteringRules:null!==(o=null==l?void 0:l.rules)&&void 0!==o?o:[]})),(null===(c=t.connector)||void 0===c?void 0:c.pipeline)&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Qi,{pipeline:t.connector.pipeline}))))):Object(m.jsx)(i.a.Fragment,null)},Yi=Object(V.a)(["enterprise_search_content","fetch_sync_api_logic"],(async({connectorId:e,page:t=0,size:n=10})=>{const a=`/internal/enterprise_search/connectors/${e}/sync_jobs`,i={page:t,size:n};return await l.a.values.http.get(a,{query:i})})),qi=Object(s.kea)({actions:{},connect:{actions:[Yi,["apiError as fetchSyncJobsError","apiReset as resetFetchSyncJobsIndexApi","apiSuccess as fetchSyncJobsApiSuccess","makeRequest as fetchSyncJobs"]],values:[rt,["connectorId"],Yi,["data as syncJobsData","status as syncJobsStatus"]]},listeners:()=>({fetchSyncJobs:()=>Object(Q.d)(),fetchSyncJobsError:e=>Object(Q.e)(e)}),path:["enterprise_search","content","sync_jobs_view_logic"],selectors:({selectors:e})=>({syncJobs:[()=>[e.syncJobsData],e=>{var t;return null!==(t=null==e?void 0:e.data.map((e=>{var t;return{...e,duration:e.completed_at?Ya.a.duration(Ya()(e.completed_at).diff(Ya()(e.created_at))):e.started_at?Ya.a.duration(Ya()(new Date).diff(Ya()(e.started_at))):void 0,lastSync:null!==(t=e.completed_at)&&void 0!==t?t:e.created_at}})))&&void 0!==t?t:[]}],syncJobsLoading:[()=>[e.syncJobsStatus],e=>e===U.a.IDLE||e===U.a.LOADING],syncJobsPagination:[()=>[e.syncJobsData],e=>e?{...e,data:void 0}:{data:[],has_more_hits_than_total:!1,pageIndex:0,pageSize:10,size:0,total:0}]})}),Gi=()=>{const{connectorId:e}=Object(s.useValues)(rt),{syncJobs:t,syncJobsLoading:n,syncJobsPagination:r}=Object(s.useValues)(qi),{fetchSyncJobs:o}=Object(s.useActions)(qi),[c,l]=Object(a.useState)(void 0);Object(a.useEffect)((()=>{var t,n;e&&o({connectorId:e,page:null!==(t=r.pageIndex)&&void 0!==t?t:0,size:null!==(n=r.pageSize)&&void 0!==n?n:10})}),[e]);const u=[{field:"lastSync",name:w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.lastSync.columnTitle",{defaultMessage:"Last sync"}),render:e=>Object(m.jsx)(_i.a,{date:new Date(e)}),sortable:!0,truncateText:!0},{field:"duration",name:w.i18n.translate("xpack.enterpriseSearch.content.syncJobs.syncDuration.columnTitle",{defaultMessage:"Sync duration"}),render:e=>Ai(e),sortable:!0,truncateText:!0},{field:"indexed_document_count",name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.addedDocs.columnTitle",{defaultMessage:"Docs added"}),sortable:!0,truncateText:!0},{field:"deleted_document_count",name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.deletedDocs.columnTitle",{defaultMessage:"Docs deleted"}),sortable:!0,truncateText:!0},{field:"status",name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndices.syncStatus.columnTitle",{defaultMessage:"Status"}),render:e=>Object(m.jsx)(v.EuiBadge,{color:Li(e)},function(e){switch(e){case we.f.COMPLETED:return w.i18n.translate("xpack.enterpriseSearch.content.syncStatus.completed",{defaultMessage:"Sync complete"});case we.f.ERROR:return w.i18n.translate("xpack.enterpriseSearch.content.syncStatus.error",{defaultMessage:"Sync failure"});case we.f.IN_PROGRESS:return w.i18n.translate("xpack.enterpriseSearch.content.syncStatus.inProgress",{defaultMessage:"Sync in progress"});case we.f.CANCELED:return w.i18n.translate("xpack.enterpriseSearch.content.syncStatus.canceling",{defaultMessage:"Sync canceled"});case we.f.CANCELING:return w.i18n.translate("xpack.enterpriseSearch.content.syncStatus.canceled",{defaultMessage:"Canceling sync"});case we.f.PENDING:return w.i18n.translate("xpack.enterpriseSearch.content.syncStatus.pending",{defaultMessage:"Sync pending"});case we.f.SUSPENDED:return w.i18n.translate("xpack.enterpriseSearch.content.syncStatus.suspended",{defaultMessage:"Sync suspended"})}}(e)),truncateText:!0},{actions:[{description:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.actions.viewJob.title",{defaultMessage:"View this sync job"}),icon:"eye",isPrimary:!1,name:w.i18n.translate("xpack.enterpriseSearch.content.index.syncJobs.actions.viewJob.caption",{defaultMessage:"View this sync job"}),onClick:e=>l(e),type:"icon"}]}];return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(Bi,{onClose:()=>l(void 0),syncJob:c}),Object(m.jsx)(v.EuiBasicTable,{items:t,columns:u,hasActions:!0,onChange:({page:{index:t,size:n}})=>{e&&o({connectorId:e,page:t,size:n})},pagination:{...r,totalItemCount:r.total},tableLayout:"fixed",loading:n}))},Wi=()=>{const{indexData:e}=Object(s.useValues)(Aa),{error:t}=Object(s.useValues)(rt);return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(P.g)(e)&&t&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiCallOut,{iconType:"alert",color:"danger",title:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.connectorErrorCallOut.title",{defaultMessage:"Your connector has reported an error"})},Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{size:"s"},t)),Object(m.jsx)(v.EuiSpacer,null)),Object(P.i)(e)?Object(m.jsx)(ni,null):Object(P.g)(e)?Object(m.jsx)($a,null):Object(m.jsx)(La,null),Object(P.f)(e)&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Ci,null)),Object(P.i)(e)&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(ti,null),Object(m.jsx)(Wa,null)),Object(P.g)(e)&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Gi,null)))},Hi=Object(V.a)(["fetch_ml_inference_errors_api_logic"],(async({indexName:e})=>{const t=`/internal/enterprise_search/indices/${e}/ml_inference/errors`;return await l.a.values.http.get(t)})),Ji=Object(s.kea)({connect:{actions:[Hi,["makeRequest as fetchIndexInferenceErrorLogs","apiError as fetchIndexInferenceErrorLogsError"]],values:[Be,["indexName"],Hi,["data as inferenceErrorsData","status as fetchIndexInferenceHistoryStatus"]]},listeners:()=>({fetchIndexInferenceErrorLogs:()=>Object(Q.d)(),fetchIndexInferenceErrorLogsError:e=>Object(Q.e)(e)}),path:["enterprise_search","content","pipelines_inference_errors"],selectors:({selectors:e})=>({inferenceErrors:[()=>[e.inferenceErrorsData],e=>{var t;return null!==(t=null==e?void 0:e.errors)&&void 0!==t?t:[]}],isLoading:[()=>[e.fetchIndexInferenceHistoryStatus],e=>e!==U.a.SUCCESS&&e!==U.a.ERROR]})}),Zi=()=>{const{indexName:e,isLoading:t,inferenceErrors:n}=Object(s.useValues)(Ji),{fetchIndexInferenceErrorLogs:r}=Object(s.useActions)(Ji);Object(a.useEffect)((()=>{r({indexName:e})}),[e]);const o=[{dataType:"date",field:"timestamp",name:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.pipelineInferenceLogs.tableColumn.timestamp",{defaultMessage:"Timestamp"})},{dataType:"string",field:"message",name:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.pipelineInferenceLogs.tableColumn.message",{defaultMessage:"Error message"}),textOnly:!0},{dataType:"number",field:"doc_count",name:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.pipelineInferenceLogs.tableColumn.docCount",{defaultMessage:"Approx. document count"})}];return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Ha.a,{hasBorder:!0,iconType:"documents",title:Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.pipelineInferenceLogs.title",{defaultMessage:"Inference errors"}))},t?Object(m.jsx)(v.EuiLoadingSpinner,null):Object(m.jsx)(v.EuiBasicTable,{tableLayout:"auto",columns:o,items:n,rowHeader:"message",noItemsMessage:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.pipelineInferenceLogs.emptyMessage",{defaultMessage:"This index has no inference errors"})})))},Ki=Object(V.a)(["fetch_ml_inference_pipeline_history_api_logic"],(async({indexName:e})=>{const t=`/internal/enterprise_search/indices/${e}/ml_inference/history`;return await l.a.values.http.get(t)})),Xi=Object(s.kea)({connect:{actions:[Ki,["makeRequest as fetchIndexInferenceHistory","apiError as fetchIndexInferenceHistoryError"]],values:[Be,["indexName"],Ki,["data as inferenceHistoryData","status as fetchIndexInferenceHistoryStatus"]]},listeners:()=>({fetchIndexInferenceHistory:()=>Object(Q.d)(),fetchIndexInferenceHistoryError:e=>Object(Q.e)(e)}),path:["enterprise_search","content","pipelines_inference_history"],selectors:({selectors:e})=>({inferenceHistory:[()=>[e.inferenceHistoryData],e=>null==e?void 0:e.history],isLoading:[()=>[e.fetchIndexInferenceHistoryStatus],e=>e!==U.a.SUCCESS&&e!==U.a.ERROR]})}),er=()=>{const{indexName:e,isLoading:t,inferenceHistory:n}=Object(s.useValues)(Xi),{fetchIndexInferenceHistory:r}=Object(s.useActions)(Xi);Object(a.useEffect)((()=>{r({indexName:e})}),[e]);const o=[{dataType:"string",field:"pipeline",name:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.inferenceHistory.tableColumn.pipeline",{defaultMessage:"Inference pipeline"})},{dataType:"number",field:"doc_count",name:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.inferenceHistory.tableColumn.docCount",{defaultMessage:"Approx. document count"})}];return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Ha.a,{hasBorder:!0,iconType:"compute",title:Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.inferenceHistory.title",{defaultMessage:"Historical inference processors"})),subtitle:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.inferenceHistory.subtitle",{defaultMessage:"The following inference processors were found in the _ingest.processors field of documents on this index."})},t?Object(m.jsx)(v.EuiLoadingSpinner,null):Object(m.jsx)(v.EuiBasicTable,{columns:o,items:null!=n?n:[],rowHeader:"pipeline",noItemsMessage:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.inferenceHistory.emptyMessage",{defaultMessage:"This index has no inference history"})})))},tr=Object(V.a)(["content","fetch_custom_pipeline_api_logic"],(async({indexName:e})=>{const t=`/internal/enterprise_search/indices/${e}/pipelines`;return await l.a.values.http.get(t)})),nr=Object(V.a)(["content","update_pipeline_api_logic"],(async({connectorId:e,pipeline:t})=>{const n=`/internal/enterprise_search/connectors/${e}/pipeline`;return await l.a.values.http.put(n,{body:JSON.stringify(t)}),{connectorId:e,pipeline:t}})),ar=Object(V.a)(["content","create_custom_pipeline_api_logic"],(async({indexName:e})=>{const t=`/internal/enterprise_search/indices/${e}/pipelines`;return await l.a.values.http.post(t)})),ir=Object(V.a)(["attach_ml_inference_pipeline_api_logic"],(async e=>{const t=`/internal/enterprise_search/indices/${e.indexName}/ml_inference/pipeline_processors/attach`,n={pipeline_name:e.pipelineName};return await l.a.values.http.post(t,{body:JSON.stringify(n)})})),rr=Object(V.a)(["create_ml_inference_pipeline_api_logic"],(async e=>{const t=`/internal/enterprise_search/indices/${e.indexName}/ml_inference/pipeline_processors`,n={destination_field:e.destinationField,model_id:e.modelId,pipeline_name:e.pipelineName,source_field:e.sourceField};return await l.a.values.http.post(t,{body:JSON.stringify(n)})})),sr=Object(V.a)(["delete_ml_inference_pipeline_api_logic"],(async e=>{const t=`/internal/enterprise_search/indices/${e.indexName}/ml_inference/pipeline_processors/${e.pipelineName}`;return await l.a.values.http.delete(t)})),or=Object(V.a)(["detach_ml_inference_pipeline_api_logic"],(async e=>{const t=`/internal/enterprise_search/indices/${e.indexName}/ml_inference/pipeline_processors/${e.pipelineName}/detach`;return await l.a.values.http.delete(t)})),cr=Object(V.a)(["fetch_ml_inference_pipeline_processors_api_logic"],(async({indexName:e})=>{const t=`/internal/enterprise_search/indices/${e}/ml_inference/pipeline_processors`;return await l.a.values.http.get(t)})),lr=Object(s.kea)({actions:{closeAddMlInferencePipelineModal:!0,closeModal:!0,openAddMlInferencePipelineModal:!0,openModal:!0,savePipeline:!0,setPipelineState:e=>({pipeline:e})},connect:{actions:[ar,["apiError as createCustomPipelineError","apiSuccess as createCustomPipelineSuccess","makeRequest as createCustomPipeline"],nr,["apiSuccess","apiError","makeRequest"],Ve,["apiSuccess as fetchIndexApiSuccess"],ii,["apiSuccess as fetchDefaultPipelineSuccess","makeRequest as fetchDefaultPipeline"],tr,["apiSuccess as fetchCustomPipelineSuccess","makeRequest as fetchCustomPipeline"],cr,["makeRequest as fetchMlInferenceProcessors","apiError as fetchMlInferenceProcessorsApiError"],ir,["apiSuccess as attachMlInferencePipelineSuccess"],rr,["apiSuccess as createMlInferencePipelineSuccess"],sr,["apiError as deleteMlPipelineError","apiSuccess as deleteMlPipelineSuccess","makeRequest as deleteMlPipeline"],or,["apiError as detachMlPipelineError","apiSuccess as detachMlPipelineSuccess","makeRequest as detachMlPipeline"]],values:[tr,["data as customPipelineData"],ii,["data as defaultPipelineValuesData"],Ve,["fetchIndexApiData as index"],cr,["data as mlInferencePipelineProcessors"]]},events:({actions:e,values:t})=>({afterMount:()=>{var n,a;e.fetchDefaultPipeline(void 0),e.setPipelineState((Object(P.g)(t.index)||Object(P.i)(t.index))&&null!==(n=null===(a=t.index.connector)||void 0===a?void 0:a.pipeline)&&void 0!==n?n:t.defaultPipelineValues)}}),listeners:({actions:e,values:t})=>({apiError:e=>Object(Q.e)(e),apiSuccess:({pipeline:n})=>{(Object(P.g)(t.index)||Object(P.i)(t.index))&&t.index.connector&&e.fetchIndexApiSuccess({...t.index,connector:{...t.index.connector,pipeline:n}}),Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.successToast.title",{defaultMessage:"Pipelines successfully updated"}))},attachMlInferencePipelineSuccess:()=>{e.fetchMlInferenceProcessors({indexName:t.index.name}),e.fetchCustomPipeline({indexName:t.index.name})},closeModal:()=>{var n,a;return e.setPipelineState((Object(P.g)(t.index)||Object(P.i)(t.index))&&null!==(n=null===(a=t.index.connector)||void 0===a?void 0:a.pipeline)&&void 0!==n?n:t.defaultPipelineValues)},createCustomPipelineError:e=>Object(Q.e)(e),createCustomPipelineSuccess:({created:n})=>{Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.successToastCustom.title",{defaultMessage:"Custom pipeline successfully created"})),e.setPipelineState({...t.pipelineState,name:n[0]}),e.savePipeline(),e.fetchCustomPipeline({indexName:t.index.name})},createMlInferencePipelineSuccess:()=>{e.fetchMlInferenceProcessors({indexName:t.index.name}),e.fetchCustomPipeline({indexName:t.index.name})},deleteMlPipelineError:e=>Object(Q.e)(e),deleteMlPipelineSuccess:n=>{n.deleted&&Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.successToastDeleteMlPipeline.title",{defaultMessage:'Deleted machine learning inference pipeline "{pipelineName}"',values:{pipelineName:n.deleted}})),e.fetchMlInferenceProcessors({indexName:t.index.name}),e.fetchCustomPipeline({indexName:t.index.name})},detachMlPipelineError:e=>Object(Q.e)(e),detachMlPipelineSuccess:n=>{n.updated&&Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.successToastDetachMlPipeline.title",{defaultMessage:'Detached machine learning inference pipeline from "{pipelineName}"',values:{pipelineName:n.updated}})),e.fetchMlInferenceProcessors({indexName:t.index.name}),e.fetchCustomPipeline({indexName:t.index.name})},fetchIndexApiSuccess:n=>{if(!t.showModal){var a;const i=Object(P.g)(n)||Object(P.i)(n)?null===(a=n.connector)||void 0===a?void 0:a.pipeline:t.defaultPipelineValues;e.setPipelineState(null!=i?i:t.defaultPipelineValues)}},makeRequest:()=>Object(Q.d)(),openModal:()=>{var n;const a=Object(P.i)(t.index)||Object(P.g)(t.index)?null===(n=t.index.connector)||void 0===n?void 0:n.pipeline:t.defaultPipelineValues;e.setPipelineState(null!=a?a:t.defaultPipelineValues)},savePipeline:()=>{var n;(Object(P.g)(t.index)||Object(P.i)(t.index))&&t.index.connector&&e.makeRequest({connectorId:null===(n=t.index.connector)||void 0===n?void 0:n.id,pipeline:t.pipelineState})}}),path:["enterprise_search","content","pipelines"],reducers:()=>({pipelineState:[x.e,{setPipelineState:(e,{pipeline:t})=>t}],showAddMlInferencePipelineModal:[!1,{attachMlInferencePipelineSuccess:()=>!1,closeAddMlInferencePipelineModal:()=>!1,createMlInferencePipelineSuccess:()=>!1,openAddMlInferencePipelineModal:()=>!0}],showModal:[!1,{apiSuccess:()=>!1,closeModal:()=>!1,openModal:()=>!0}]}),selectors:({selectors:e})=>({canSetPipeline:[()=>[e.index],e=>!Object(P.f)(e)],canUseMlInferencePipeline:[()=>[e.hasIndexIngestionPipeline,e.pipelineState,e.index],(e,t,n)=>e&&(t.run_ml_inference||Object(P.f)(n))],defaultPipelineValues:[()=>[e.defaultPipelineValuesData],e=>null!=e?e:x.e],hasIndexIngestionPipeline:[()=>[e.pipelineName,e.defaultPipelineValues],(e,t)=>e!==t.name],indexName:[()=>[e.index],e=>{var t;return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""}],pipelineName:[()=>[e.pipelineState,e.customPipelineData,e.indexName],(e,t,n)=>t&&t[n]?n:e.name]})}),ur=({indexName:e,ingestionMethod:t,pipelineSuffix:n,processorsCount:a})=>Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h4",null,`${e}@${n}`))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(k.a,{"data-telemetry-id":`entSearchContent-${t}-pipelines-customPipeline-editPipeline`,to:`/app/management/ingest/ingest_pipelines/?pipeline=${e}@${n}`,shouldNotCreateHref:!0},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.ingestPipelinesCard.customButtonLabel",{defaultMessage:"Edit pipeline"}))))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{size:"s",color:"subdued",grow:!1},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.ingestPipelinesCard.customDescription",{defaultMessage:"Custom ingest pipeline for {indexName}",values:{indexName:e}}))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)("span",null,Object(m.jsx)(v.EuiBadge,{color:"hollow"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.ingestPipelinesCard.processorsDescription",{defaultMessage:"{processorsCount} Processors",values:{processorsCount:a}})))))));var dr=n(50);const pr=()=>{const{indexName:e,ingestionMethod:t}=Object(s.useValues)(rt),{isCloud:n}=Object(s.useValues)(u.a),{hasPlatinumLicense:a}=Object(s.useValues)(dr.a),{makeRequest:r}=Object(s.useActions)(ar),o=!n&&!a;return Object(m.jsx)(i.a.Fragment,null,o?Object(m.jsx)(v.EuiText,{color:"subdued",size:"s",grow:!1},w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.copyAndCustomize.platinumText",{defaultMessage:"With a platinum license, you can create an index-specific version of this configuration and modify it for your use case."})):Object(m.jsx)(v.EuiText,{color:"subdued",size:"s",grow:!1},w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.copyAndCustomize.description",{defaultMessage:"You can create an index-specific version of this configuration and modify it for your use case."})),Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"flexEnd"},Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":`entSearchContent-${t}-pipelines-ingestPipelines-copyAndCustomize`,disabled:o,iconType:o?"lock":void 0,onClick:()=>r({indexName:e})},w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.ingestModal.copyButtonLabel",{defaultMessage:"Copy and customize"}))),Object(m.jsx)(v.EuiSpacer,{size:"m"}))};var gr=n(507);const hr=({checked:e,description:t,id:n,label:a,onChange:i})=>Object(m.jsx)(v.EuiCheckableCard,{label:Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h4",null,a)),checkableType:"checkbox",onChange:i,checked:e,id:n},Object(m.jsx)(v.EuiText,{color:"subdued",size:"s"},Object(m.jsx)("p",null,t))),fr=({ingestionMethod:e,setPipeline:t,pipeline:n})=>{const{extract_binary_content:a,reduce_whitespace:i,run_ml_inference:r}=n;return Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(hr,{"data-telemetry-id":`entSearchContent-${e}-pipelines-ingestPipelines-extractBinaryContent`,description:w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.settings.extractBinaryDescription",{defaultMessage:"Extract content from images and PDF files"}),label:w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.settings.extractBinaryLabel",{defaultMessage:"Content extraction"}),onChange:()=>t({...n,extract_binary_content:!n.extract_binary_content}),checked:a,id:"ingestPipelineExtractBinaryContent"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(hr,{"data-telemetry-id":`entSearchContent-${e}-pipelines-ingestPipelines-reduceWhitespace`,id:"ingestPipelineReduceWhitespace",checked:i,description:w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.settings.reduceWhitespaceDescription",{defaultMessage:"Trim extra whitespace from your documents automatically"}),label:w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.settings.reduceWhitespaceLabel",{defaultMessage:"Reduce whitespace"}),onChange:()=>t({...n,reduce_whitespace:!n.reduce_whitespace})})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(hr,{"data-telemetry-id":`entSearchContent-${e}-pipelines-ingestPipelines-runMlInference`,id:"ingestPipelineRunMlInference",checked:r,description:w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.settings.runMlInferenceDescrition",{defaultMessage:"Enhance your data using compatible trained ML models"}),label:w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.settings.mlInferenceLabel",{defaultMessage:"ML Inference Pipelines"}),onChange:()=>t({...n,run_ml_inference:!n.run_ml_inference})})))},mr=({closeModal:e,displayOnly:t,indexName:n,ingestionMethod:a,isLoading:r,pipeline:s,savePipeline:o,setPipeline:c})=>{const{name:l}=s;return Object(m.jsx)(v.EuiModal,{onClose:e,maxWidth:"40rem"},Object(m.jsx)(v.EuiModalHeader,null,Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiModalHeaderTitle,null,w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.ingestModal.modalHeaderTitle",{defaultMessage:"Pipeline settings"}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{color:"subdued"},Object(m.jsx)("strong",null,l))))),Object(m.jsx)(v.EuiModalBody,null,Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{color:"subdued",size:"s"},t?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.index.pipelines.ingestModal.modalBodyAPIText",defaultMessage:"{apiIndex} Changes made to the settings below are for reference only. These settings will not be persisted to your index or pipeline.",values:{apiIndex:Object(m.jsx)("strong",null,w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.ingestModal.apiIndex",{defaultMessage:"This is an API-based index."}))}})),Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.ingestModal.modalBodyAPITextCont",{defaultMessage:"In order to use this pipeline on your API-based indices you'll need to explicitly reference it in your API requests."}))):w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.ingestModal.modalBodyConnectorText",{defaultMessage:"This pipeline runs automatically on all Crawler and Connector indices created through Enterprise Search."}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiLink,{href:D.a.ingestPipelines,external:!0},w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.ingestModal.modalIngestLinkLabel",{defaultMessage:"Learn more about Enterprise Search ingest pipelines"}))))),Object(m.jsx)(v.EuiSpacer,{size:"xl"}),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiForm,{"aria-labelledby":"ingestPipelineHeader"},Object(m.jsx)(v.EuiFormRow,{fullWidth:!0},Object(m.jsx)(v.EuiText,{size:"m",id:"ingestPipelineHeader"},Object(m.jsx)("strong",null,w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.settings.formHeader",{defaultMessage:"Optimize your content for search"})))),Object(m.jsx)(v.EuiFormRow,{fullWidth:!0},Object(m.jsx)(fr,{ingestionMethod:a,pipeline:s,setPipeline:c}))),Object(m.jsx)(v.EuiSpacer,null)),t&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,{size:"xl"}),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiText,{size:"m",id:"ingestPipelineHeader",grow:!1},Object(m.jsx)("strong",null,w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.ingestModal.curlHeader",{defaultMessage:"Sample cURL request to ingest a document"}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Ni.a,{document:{body:"body",title:"Title"},indexName:n,pipeline:s}))))),Object(m.jsx)(v.EuiModalFooter,null,t?Object(m.jsx)(v.EuiButton,{fill:!0,onClick:e},w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.ingestModal.closeButtonLabel",{defaultMessage:"Close"})):Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiButtonEmpty,{onClick:e},w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.ingestModal.cancelButtonLabel",{defaultMessage:"Cancel"})),Object(m.jsx)(v.EuiButton,{fill:!0,onClick:o,isLoading:r},w.i18n.translate("xpack.enterpriseSearch.content.index.pipelines.ingestModal.saveButtonLabel",{defaultMessage:"Save"})))))},jr=()=>{var e,t;const{indexName:n,ingestionMethod:r}=Object(s.useValues)(rt),{canSetPipeline:o,hasIndexIngestionPipeline:c,index:l,pipelineName:u,pipelineState:d,showModal:p}=Object(s.useValues)(lr),{closeModal:g,openModal:h,setPipelineState:f,savePipeline:j}=Object(s.useActions)(lr),{makeRequest:x}=Object(s.useActions)(tr),{data:b}=Object(s.useValues)(tr),y=b?b[`${n}@custom`]:void 0;return Object(a.useEffect)((()=>{x({indexName:n})}),[n]),Object(m.jsx)(i.a.Fragment,null,!c&&Object(m.jsx)(pr,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"s"},p&&Object(m.jsx)(mr,{closeModal:g,displayOnly:!o,indexName:n,ingestionMethod:r,isLoading:!1,pipeline:{...d,name:u},savePipeline:j,setPipeline:f}),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{color:"subdued"},Object(m.jsx)(gr.a,{index:l,openModal:h,pipelineName:u,ingestionMethod:r,indexName:n,pipelineState:d}))),y&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiPanel,{color:"primary"},Object(m.jsx)(ur,{indexName:n,ingestionMethod:r,pipelineSuffix:"custom",processorsCount:null!==(e=null===(t=y.processors)||void 0===t?void 0:t.length)&&void 0!==e?e:0})))))};let xr;!function(e){e.NotDeployed="",e.Starting="starting",e.Stopping="stopping",e.Started="started",e.Failed="failed"}(xr||(xr={}));const br="prepackaged",yr={FILL_MASK:"fill_mask",NER:"ner",QUESTION_ANSWERING:"question_answering",TEXT_CLASSIFICATION:"text_classification",TEXT_EMBEDDING:"text_embedding",ZERO_SHOT_CLASSIFICATION:"zero_shot_classification"},Mr=e=>{var t;if(!e)return[];const n=null===(t=e.tags)||void 0===t?void 0:t.includes(br);return[e.model_type,...Object.keys(e.inference_config||{}),...n?[br]:[]].filter((e=>void 0!==e))},Or=(e,t)=>{var n,a;const i=null==t||null===(n=t.processors)||void 0===n?void 0:n.find((e=>void 0!==e.inference));if(!i||void 0===(null==i?void 0:i.inference))return null;const{inference:r}=i,s=Object.keys(null!==(a=r.field_map)&&void 0!==a?a:{}),o=1===s.length?s[0]:null;return o?{destination_field:r.target_field.replace("ml.inference.",""),model_id:r.model_id,pipeline_name:e,source_field:o}:null},Sr=e=>{var t;switch(null==e||null===(t=e.deployment_stats)||void 0===t?void 0:t.state){case"started":return xr.Started;case"starting":return xr.Starting;case"stopping":return xr.Stopping;case"failed":return xr.Failed;default:return xr.NotDeployed}},Er=Object(V.a)(["get_documents_logic"],(async({indexName:e,documentId:t})=>{const n=`/internal/enterprise_search/indices/${e}/document/${t}`;return await l.a.values.http.get(n)})),vr=Object(V.a)(["ml_models_stats_api_logic"],(async()=>await l.a.values.http.get("/api/ml/trained_models/_stats"))),wr=Object(V.a)(["ml_models_api_logic"],(async(e=1e3)=>await l.a.values.http.get("/api/ml/trained_models",{query:{size:e,with_pipelines:!0}}))),Ir=Object(s.kea)({actions:{apiError:e=>e,apiReset:!0,apiSuccess:e=>e,makeRequest:()=>{}},connect:{actions:[wr,["apiError as getModelsApiError","apiReset as getModelsApiReset","apiSuccess as getModelsApiSuccess","makeRequest as makeGetModelsRequest"],vr,["apiError as getModelsStatsApiError","apiReset as getModelsStatsApiReset","apiSuccess as getModelsStatsApiSuccess","makeRequest as makeGetModelsStatsRequest"]],values:[wr,["apiStatus as modelsApiStatus","error as modelsApiError","status as modelsStatus","data as modelsData"],vr,["apiStatus as modelStatsApiStatus","error as modelsStatsApiError","status as modelStatsStatus","data as modelStatsData"]]},listeners:({actions:e,values:t})=>({getModelsApiError:t=>{e.apiError(t)},getModelsApiSuccess:()=>{t.data&&e.apiSuccess(t.data)},getModelsStatsApiError:n=>{t.modelsApiError||e.apiError(n)},getModelsStatsApiSuccess:()=>{t.data&&e.apiSuccess(t.data)},apiReset:()=>{e.getModelsApiReset(),e.getModelsStatsApiReset()},makeRequest:()=>{e.makeGetModelsRequest(void 0),e.makeGetModelsStatsRequest(void 0)}}),path:["enterprise_search","api","ml_trained_models_api_logic"],selectors:({selectors:e})=>({data:[()=>[e.modelsData,e.modelStatsData],(e,t)=>{if(!e)return null;if(!t)return e;const n=t.trained_model_stats.reduce(((e,t)=>(t.model_id&&(e[t.model_id]=t),e)),{});return e.map((e=>{const t=n[e.model_id];return{...e,...null!=t?t:{}}}))}],error:[()=>[e.modelsApiStatus,e.modelStatsApiStatus],(e,t)=>e.error?e.error:t.error?t.error:null],status:[()=>[e.modelsApiStatus,e.modelStatsApiStatus],(e,t)=>e.status===t.status?e.status:e.status===U.a.ERROR||t.status===U.a.ERROR?U.a.ERROR:e.status<t.status?e.status:t.status]})}),Nr=Object(V.a)(["fetch_ml_inference_pipelines_api_logic"],(async()=>await l.a.values.http.get("/internal/enterprise_search/pipelines/ml_inference"))),Dr=Object(V.a)(["simulate_existing_ml_inference_pipeline_api_logic"],(async({docs:e,indexName:t,pipelineName:n})=>{const a=`/internal/enterprise_search/indices/${t}/ml_inference/pipeline_processors/simulate/${n}`;return await l.a.values.http.post(a,{body:JSON.stringify({docs:e})})})),Tr=Object(V.a)(["simulate_ml_inference_pipeline_api_logic"],(async({docs:e,indexName:t,pipeline:n})=>{const a=`/internal/enterprise_search/indices/${t}/ml_inference/pipeline_processors/simulate`;return await l.a.values.http.post(a,{body:JSON.stringify({docs:e,pipeline:{description:n.description,processors:n.processors}})})})),kr=Object.values(yr),Cr=["body","body_content","title"],_r={fill_mask:w.i18n.translate("xpack.enterpriseSearch.content.ml_inference.fill_mask",{defaultMessage:"Fill Mask"}),ner:w.i18n.translate("xpack.enterpriseSearch.content.ml_inference.ner",{defaultMessage:"Named Entity Recognition"}),question_answering:w.i18n.translate("xpack.enterpriseSearch.content.ml_inference.question_answering",{defaultMessage:"Named Entity Recognition"}),text_classification:w.i18n.translate("xpack.enterpriseSearch.content.ml_inference.text_classification",{defaultMessage:"Text Classification"}),text_embedding:w.i18n.translate("xpack.enterpriseSearch.content.ml_inference.text_embedding",{defaultMessage:"Dense Vector Text Embedding"}),zero_shot_classification:w.i18n.translate("xpack.enterpriseSearch.content.ml_inference.zero_shot_classification",{defaultMessage:"Zero-Shot Text Classification"})},Ar=e=>Object.keys(e.inference_config).some((e=>kr.includes(e))),Lr=(e,t)=>{const n=Cr.includes(e),a=Cr.includes(t);return n&&a?Cr.indexOf(e)>Cr.indexOf(t)?1:-1:n?-1:a?1:e.localeCompare(t)},zr=e=>{var t;for(const t of e)if(kr.includes(t))return t;return null!==(t=null==e?void 0:e[0])&&void 0!==t?t:""},Fr=e=>_r[e],Rr=/^[\w\-]+$/,Pr=w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.invalidPipelineName",{defaultMessage:"Name must only contain letters, numbers, underscores, and hyphens."}),Ur=w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.emptyValueError",{defaultMessage:"Field is required."}),$r=w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.existingPipeline.disabledSourceFieldDescription",{defaultMessage:"This pipeline cannot be selected because the source field does not exist on this index."}),Qr=w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.existingPipeline.disabledPipelineExistsDescription",{defaultMessage:"This pipeline cannot be selected because it is already attached."}),Vr=w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.model.placeholder",{defaultMessage:"Select a model"}),Br=w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.model.redactedValue",{defaultMessage:"This model isn't available in the Kibana space"}),Yr={destinationField:"",modelID:"",pipelineName:"",sourceField:""};let qr;!function(e){e[e.Configuration=0]="Configuration",e[e.Test=1]="Test",e[e.Review=2]="Review"}(qr||(qr={}));const Gr=[U.a.SUCCESS,U.a.ERROR],Wr=["body","title","id","type","url"],Hr=Object(s.kea)({actions:{attachPipeline:!0,clearFormErrors:!0,createPipeline:!0,selectExistingPipeline:e=>({pipelineName:e}),setAddInferencePipelineStep:e=>({step:e}),setFormErrors:e=>({inputErrors:e}),setIndexName:e=>({indexName:e}),setInferencePipelineConfiguration:e=>({configuration:e}),setPipelineSimulateBody:e=>({simulateBody:e}),setSimulatePipelineErrors:e=>({errors:e}),simulatePipeline:!0},connect:{actions:[Nr,["makeRequest as makeMlInferencePipelinesRequest"],Ea,["makeRequest as makeMappingRequest","apiError as mappingsApiError"],Ir,["makeRequest as makeMLModelsRequest","apiError as mlModelsApiError"],Dr,["makeRequest as makeSimulateExistingPipelineRequest","apiSuccess as simulateExistingPipelineApiSuccess","apiError as simulateExistingPipelineApiError","apiReset as simulateExistingPipelineApiReset"],Tr,["makeRequest as makeSimulatePipelineRequest","apiSuccess as simulatePipelineApiSuccess","apiError as simulatePipelineApiError","apiReset as simulatePipelineApiReset"],rr,["apiError as createApiError","apiSuccess as createApiSuccess","makeRequest as makeCreatePipelineRequest"],ir,["apiError as attachApiError","apiSuccess as attachApiSuccess","makeRequest as makeAttachPipelineRequest"],Er,["apiError as getDocumentApiError","apiSuccess as getDocumentApiSuccess","makeRequest as makeGetDocumentRequest"]],values:[Ve,["indexData as index"],Nr,["data as mlInferencePipelinesData"],Ea,["data as mappingData","status as mappingStatus"],Ir,["data as mlModelsData","status as mlModelsStatus"],Dr,["data as simulateExistingPipelineData","status as simulateExistingPipelineStatus"],Tr,["data as simulatePipelineData","status as simulatePipelineStatus"],cr,["data as mlInferencePipelineProcessors"],Er,["data as getDocumentData","status as getDocumentApiStatus","error as getDocumentApiErrorMessage"]]},events:{},listeners:({values:e,actions:t})=>({attachPipeline:()=>{const{addInferencePipelineModal:{configuration:{pipelineName:n},indexName:a}}=e;t.makeAttachPipelineRequest({indexName:a,pipelineName:n})},createPipeline:()=>{const{addInferencePipelineModal:{configuration:n,indexName:a}}=e;t.makeCreatePipelineRequest({destinationField:n.destinationField.trim().length>0?n.destinationField:void 0,indexName:a,modelId:n.modelID,pipelineName:n.pipelineName,sourceField:n.sourceField})},selectExistingPipeline:({pipelineName:n})=>{var a,i;const r=null===(a=e.mlInferencePipelinesData)||void 0===a?void 0:a[n];if(!r)return;const s=Or(n,r);null!==s&&t.setInferencePipelineConfiguration({destinationField:null!==(i=s.destination_field)&&void 0!==i?i:"",existingPipeline:!0,modelID:s.model_id,pipelineName:n,sourceField:s.source_field})},setIndexName:({indexName:e})=>{t.makeMlInferencePipelinesRequest(void 0),t.makeMLModelsRequest(void 0),t.makeMappingRequest({indexName:e})},simulatePipeline:()=>{if(e.mlInferencePipeline){t.setSimulatePipelineErrors([]),t.simulateExistingPipelineApiReset(),t.simulatePipelineApiReset();const{configuration:n}=e.addInferencePipelineModal;n.existingPipeline?t.makeSimulateExistingPipelineRequest({docs:e.addInferencePipelineModal.simulateBody,indexName:e.addInferencePipelineModal.indexName,pipelineName:n.pipelineName}):t.makeSimulatePipelineRequest({docs:e.addInferencePipelineModal.simulateBody,indexName:e.addInferencePipelineModal.indexName,pipeline:e.mlInferencePipeline})}}}),path:["enterprise_search","content","pipelines_add_ml_inference_pipeline"],reducers:{addInferencePipelineModal:[{configuration:{...Yr},indexName:"",simulateBody:"[\n\n]",step:qr.Configuration},{getDocumentApiSuccess:(e,t)=>({...e,simulateBody:JSON.stringify([t],void 0,2)}),setAddInferencePipelineStep:(e,{step:t})=>({...e,step:t}),setIndexName:(e,{indexName:t})=>({...e,indexName:t}),setInferencePipelineConfiguration:(e,{configuration:t})=>({...e,configuration:t}),setPipelineSimulateBody:(e,{simulateBody:t})=>({...e,simulateBody:t})}],createErrors:[[],{attachApiError:(e,t)=>Object(Yn.c)(t),createApiError:(e,t)=>Object(Yn.c)(t),makeAttachPipelineRequest:()=>[],makeCreatePipelineRequest:()=>[]}],simulatePipelineErrors:[[],{setSimulatePipelineErrors:(e,{errors:t})=>t,simulateExistingPipelineApiError:(e,t)=>Object(Yn.c)(t),simulatePipelineApiError:(e,t)=>Object(Yn.c)(t)}]},selectors:({selectors:e})=>({formErrors:[()=>[e.addInferencePipelineModal],e=>(e=>{const t={};return!0===e.existingPipeline?(0===e.pipelineName.length&&(t.pipelineName=Ur),t):(0===e.pipelineName.trim().length?t.pipelineName=Ur:(n=e.pipelineName).length>0&&Rr.test(n)||(t.pipelineName=Pr),0===e.modelID.trim().length&&(t.modelID=Ur),0===e.sourceField.trim().length&&(t.sourceField=Ur),t);var n})(e.configuration)],getDocumentsErr:[()=>[e.getDocumentApiErrorMessage],e=>e?Object(Yn.c)(e)[0]:""],isGetDocumentsLoading:[()=>[e.getDocumentApiStatus],e=>e===U.a.LOADING],isLoading:[()=>[e.mlModelsStatus,e.mappingStatus],(e,t)=>!Gr.includes(e)||!Gr.includes(t)],isPipelineDataValid:[()=>[e.formErrors],e=>0===Object.keys(e).length],showGetDocumentErrors:[()=>[e.getDocumentApiStatus],e=>e===U.a.ERROR],mlInferencePipeline:[()=>[e.isPipelineDataValid,e.addInferencePipelineModal,e.mlModelsData,e.mlInferencePipelinesData],(e,{configuration:t},n,a)=>{if(t.existingPipeline){if(0===t.pipelineName.length)return;const e=null==a?void 0:a[t.pipelineName];if(!e)return;return e}if(!e)return;const i=null==n?void 0:n.find((e=>e.model_id===t.modelID));var r;return i?(({description:e,destinationField:t,model:n,pipelineName:a,sourceField:i})=>{var r,s;const o=(null===(r=n.input)||void 0===r||null===(s=r.field_names)||void 0===s?void 0:s.length)>0?n.input.field_names[0]:"MODEL_INPUT_FIELD",c=Object.keys(n.inference_config)[0],l=((e,t)=>{if(t===yr.TEXT_CLASSIFICATION||t===yr.TEXT_EMBEDDING)return{field:e,ignore_missing:!0}})(t,c),u=((e,t)=>{let n;const a=`ml.inference.${e}`;return t===yr.TEXT_CLASSIFICATION?n={copy_from:`${a}.predicted_value`,description:`Copy the predicted_value to '${e}' if the prediction_probability is greater than 0.5`,field:e,if:`ctx?.ml?.inference != null && ctx.ml.inference['${e}'] != null && ctx.ml.inference['${e}'].prediction_probability > 0.5`,value:void 0}:t===yr.TEXT_EMBEDDING&&(n={copy_from:`${a}.predicted_value`,description:`Copy the predicted_value to '${e}'`,field:e,if:`ctx?.ml?.inference != null && ctx.ml.inference['${e}'] != null`,value:void 0}),n})(t,c);return{description:null!=e?e:"",processors:[{remove:{field:`ml.inference.${t}`,ignore_missing:!0}},...l?[{remove:l}]:[],{inference:{field_map:{[i]:o},model_id:n.model_id,on_failure:[{append:{field:"_source._ingest.inference_errors",value:[{message:`Processor 'inference' in pipeline '${a}' failed with message '{{ _ingest.on_failure_message }}'`,pipeline:a,timestamp:"{{{ _ingest.timestamp }}}"}]}}],target_field:`ml.inference.${t}`}},{append:{field:"_source._ingest.processors",value:[{model_version:n.version,pipeline:a,processed_timestamp:"{{{ _ingest.timestamp }}}",types:Mr(n)}]}},...u?[{set:u}]:[]],version:1}})({destinationField:t.destinationField||(r=t.pipelineName,r.trim().replace(/\s+/g,"_").toLowerCase()),model:i,pipelineName:t.pipelineName,sourceField:t.sourceField}):void 0}],simulatePipelineResult:[()=>[e.simulatePipelineStatus,e.simulatePipelineData,e.simulateExistingPipelineStatus,e.simulateExistingPipelineData],(e,t,n,a)=>n===U.a.SUCCESS?a:e===U.a.SUCCESS?t:void 0],sourceFields:[()=>[e.mappingStatus,e.mappingData,e.index],(e,t,n)=>{var a;if(e===U.a.SUCCESS)return void 0===(null==t||null===(a=t.mappings)||void 0===a?void 0:a.properties)?Object(P.g)(n)?Wr:[]:Object.entries(t.mappings.properties).reduce(((e,[t,n])=>("text"!==n.type&&"keyword"!==n.type||e.push(t),e)),[]).sort(Lr)}],supportedMLModels:[()=>[e.mlModelsData],e=>{var t;return null!==(t=null==e?void 0:e.filter(Ar))&&void 0!==t?t:[]}],existingInferencePipelines:[()=>[e.mlInferencePipelinesData,e.sourceFields,e.supportedMLModels,e.mlInferencePipelineProcessors],(e,t,n,a)=>{var i;if(!e)return[];const r=null!==(i=null==a?void 0:a.map((e=>e.pipelineName)))&&void 0!==i?i:[];return Object.entries(e).map((([e,a])=>{var i;if(!a)return;const s=Or(e,a);if(!s)return;const{destination_field:o,model_id:c,source_field:l}=s;let u,d=!1;null!==(i=null==t?void 0:t.includes(l))&&void 0!==i&&i?r.includes(e)&&(d=!0,u=Qr):(d=!0,u=$r);const p=n.find((e=>e.model_id===c)),g=p?zr(Mr(p)):"";return{destinationField:null!=o?o:"",disabled:d,disabledReason:u,modelId:c,modelType:g,pipelineName:e,sourceField:l}})).filter((e=>void 0!==e))}]})}),Jr=w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.started",{defaultMessage:"Started"}),Zr=w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.started.tooltip",{defaultMessage:"This trained model is running and fully available"}),Kr=w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.starting",{defaultMessage:"Starting"}),Xr=w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.starting.tooltip",{defaultMessage:"This trained model is in the process of starting up and will be available shortly"}),es=w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.stopping",{defaultMessage:"Stopping"}),ts=w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.stopping.tooltip",{defaultMessage:"This trained model is in the process of shutting down and is currently unavailable"}),ns=w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.deploymentFailed",{defaultMessage:"Deployment failed"}),as=w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.notDeployed",{defaultMessage:"Not deployed"}),is=w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.notDeployed.tooltip",{defaultMessage:"This trained model is not currently deployed. Visit the trained models page to make changes"}),rs=({modelState:e,modelStateReason:t})=>{let n;switch(e){case xr.Started:n={healthColor:"success",healthText:Jr,tooltipText:Zr};break;case xr.Stopping:n={healthColor:"warning",healthText:es,tooltipText:ts};break;case xr.Starting:n={healthColor:"warning",healthText:Kr,tooltipText:Xr};break;case xr.Failed:n={healthColor:"danger",healthText:ns,tooltipText:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.inferencePipelineCard.modelState.deploymentFailed.tooltip",defaultMessage:"The trained model failed to deploy. {reason}",values:{reason:t?w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.deploymentFailed.tooltip.reason",{defaultMessage:"Reason: {modelStateReason}",values:{modelStateReason:t}}):""}})};break;case xr.NotDeployed:n={healthColor:"danger",healthText:as,tooltipText:is}}return Object(m.jsx)(v.EuiToolTip,{content:n.tooltipText},Object(m.jsx)(v.EuiHealth,{color:n.healthColor},n.healthText))},ss=({model:e})=>{const t=zr(Mr(e)),n=Fr(t);return Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h4",null,null!=n?n:e.model_id))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"flexEnd"},n&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTextColor,{color:"subdued"},e.model_id)),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(rs,{modelState:Sr(e),modelStateReason:(a=e,null==a||null===(i=a.deployment_stats)||void 0===i?void 0:i.reason)})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("span",null,Object(m.jsx)(v.EuiBadge,{color:"hollow"},t))))))));var a,i},os=({pipeline:e})=>{var t;const n=e.modelId.length>0?e.modelId:Br;return Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"xs"},e.disabled&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiIcon,{type:"alert",color:"warning"})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTextColor,{color:"default"},null!==(t=e.disabledReason)&&void 0!==t?t:$r)))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h4",null,e.pipelineName))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"flexEnd"},Object(m.jsx)(v.EuiFlexItem,null,e.disabled?n:Object(m.jsx)(v.EuiTextColor,{color:"subdued"},n)),e.modelType.length>0&&Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)("span",null,Object(m.jsx)(v.EuiBadge,{color:"hollow"},e.modelType))))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("strong",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.existingPipeline.sourceField",{defaultMessage:"Source field"}))),Object(m.jsx)(v.EuiFlexItem,null,e.sourceField))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("strong",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.existingPipeline.destinationField",{defaultMessage:"Destination field"}))),Object(m.jsx)(v.EuiFlexItem,null,e.destinationField))))},cs=({pipelineName:e,targetField:t,model:n})=>{const a=t?w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.targetField.helpText.userProvided",{defaultMessage:'This names the field that holds the inference result. It will be prefixed with "ml.inference", ml.inference.{targetField}',values:{targetField:t}}):w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.targetField.helpText.default",{defaultMessage:'This names the field that holds the inference result. It will be prefixed with "ml.inference", if not set it will be defaulted to "ml.inference.{pipelineName}"',values:{pipelineName:e||"<Pipeline Name>"}}),i=t||e||"<Pipeline Name>",r=n?zr(Mr(n)):"";return r===yr.TEXT_CLASSIFICATION?Object(m.jsx)(v.EuiText,{size:"xs"},Object(m.jsx)("p",null,a),Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.targetField.helpText.textClassificationModel",defaultMessage:'Additionally the predicted_value will be copied to "{fieldName}", if the prediction_probability is greater than {probabilityThreshold}',values:{fieldName:i,probabilityThreshold:Object(m.jsx)(I.FormattedNumber,{value:.5})}}))):r===yr.TEXT_EMBEDDING?Object(m.jsx)(v.EuiText,{size:"xs"},Object(m.jsx)("p",null,a),Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.targetField.helpText.textEmbeddingModel",{defaultMessage:'Additionally the predicted_value will be copied to "{fieldName}"',values:{fieldName:i}}))):Object(m.jsx)(v.EuiText,{size:"xs"},a)},ls="model_placeholder$$",us="pipeline_placeholder$$",ds=w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.existingPipeline.chooseLabel",{defaultMessage:"Choose"}),ps=w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.existingPipeline.newLabel",{defaultMessage:"New"}),gs=w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.existingPipeline.existingLabel",{defaultMessage:"Existing"}),hs=()=>Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.sourceField.error",defaultMessage:"Selecting a source field is required for pipeline configuration, but this index does not have a field mapping. {learnMore}",values:{learnMore:Object(m.jsx)(v.EuiLink,{href:D.a.elasticsearchMapping,target:"_blank",color:"danger"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.sourceField.error.docLink",{defaultMessage:"Learn more about field mapping"}))}}),fs=()=>{var e,t,n,a,r;const{addInferencePipelineModal:{configuration:o},formErrors:c,existingInferencePipelines:l,supportedMLModels:u,sourceFields:d}=Object(s.useValues)(Hr),{selectExistingPipeline:p,setInferencePipelineConfiguration:g}=Object(s.useActions)(Hr),{ingestionMethod:h}=Object(s.useValues)(rt),{destinationField:f,existingPipeline:j,modelID:x,pipelineName:b,sourceField:y}=o,M=void 0!==c.pipelineName&&b.length>0,O=0===(null!==(e=null==d?void 0:d.length)&&void 0!==e?e:0),S=[{disabled:!0,inputDisplay:j&&b.length>0?Br:Vr,value:ls},...u.map((e=>({dropdownDisplay:Object(m.jsx)(ss,{model:e}),inputDisplay:e.model_id,value:e.model_id})))],E=[{disabled:!0,inputDisplay:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.existingPipeline.placeholder",{defaultMessage:"Select one"}),value:us},...null!==(t=null==l?void 0:l.map((e=>({disabled:e.disabled,dropdownDisplay:Object(m.jsx)(os,{pipeline:e}),inputDisplay:e.pipelineName,value:e.pipelineName}))))&&void 0!==t?t:[]],I=!1!==o.existingPipeline,N=u.find((e=>e.model_id===x));return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiText,{color:"subdued"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.description",{defaultMessage:"Once created, this pipeline will be added as a processor on your Enterprise Search Ingestion Pipeline. You'll also be able to use this pipeline elsewhere in your Elastic deployment."})),Object(m.jsx)(v.EuiLink,{href:D.a.deployTrainedModels,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.docsLink",{defaultMessage:"Learn more about using ML models in Enterprise Search"}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiForm,{component:"form"},Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiFormRow,{label:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.chooseExistingLabel",{defaultMessage:"New or existing"})},Object(m.jsx)(v.EuiSelect,{options:[{disabled:!0,text:ds,value:""},{text:ps,value:"false"},{disabled:!l||0===l.length,text:gs,value:"true"}],onChange:e=>g({...Yr,existingPipeline:"true"===e.target.value}),value:null!==(n=null===(a=o.existingPipeline)||void 0===a?void 0:a.toString())&&void 0!==n?n:""}))),Object(m.jsx)(v.EuiFlexItem,null,!0===o.existingPipeline?Object(m.jsx)(v.EuiFormRow,{fullWidth:!0,label:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.existingPipelineLabel",{defaultMessage:"Select an existing inference pipeline"})},Object(m.jsx)(v.EuiSuperSelect,{fullWidth:!0,hasDividers:!0,"data-telemetry-id":`entSearchContent-${h}-pipelines-configureInferencePipeline-selectExistingPipeline`,valueOfSelected:b.length>0?b:us,options:E,onChange:e=>p(e)})):Object(m.jsx)(v.EuiFormRow,{fullWidth:!0,label:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.nameLabel",{defaultMessage:"Name"}),helpText:!M&&!1===o.existingPipeline&&Object(m.jsx)(v.EuiText,{size:"xs"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.name.helpText",{defaultMessage:"Pipeline names are unique within a deployment and can only contain letters, numbers, underscores, and hyphens. This will create a pipeline named {pipelineName}.",values:{pipelineName:`ml-inference-${b.length>0?b:"<name>"}`}})),error:M&&c.pipelineName,isInvalid:M},Object(m.jsx)(v.EuiFieldText,{"data-telemetry-id":`entSearchContent-${h}-pipelines-configureInferencePipeline-uniqueName`,disabled:I,fullWidth:!0,prepend:"ml-inference-",placeholder:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.namePlaceholder",{defaultMessage:"Enter a unique name for this pipeline"}),value:b,onChange:e=>g({...o,pipelineName:e.target.value})})))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFormRow,{label:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.modelLabel",{defaultMessage:"Select a trained ML Model"}),fullWidth:!0},Object(m.jsx)(v.EuiSuperSelect,{"data-telemetry-id":`entSearchContent-${h}-pipelines-configureInferencePipeline-selectTrainedModel`,fullWidth:!0,hasDividers:!0,disabled:I,itemLayoutAlign:"top",onChange:e=>g({...o,modelID:e}),options:S,valueOfSelected:""===x?ls:x})),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFormRow,{label:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.sourceFieldLabel",{defaultMessage:"Source field"}),error:O&&Object(m.jsx)(hs,null),isInvalid:O},Object(m.jsx)(v.EuiSelect,{"data-telemetry-id":`entSearchContent-${h}-pipelines-configureInferencePipeline-selectSchemaField`,disabled:I,value:y,options:[{disabled:!0,text:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.sourceField.placeholder",{defaultMessage:"Select a schema field"}),value:""},...null!==(r=null==d?void 0:d.map((e=>({text:e,value:e}))))&&void 0!==r?r:[]],onChange:e=>g({...o,sourceField:e.target.value})}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFormRow,{label:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.configure.targetField.label",{defaultMessage:"Target field (optional)"}),helpText:void 0===c.destinationField&&!0!==o.existingPipeline&&Object(m.jsx)(cs,{pipelineName:b,targetField:f,model:N}),error:c.destinationField,isInvalid:void 0!==c.destinationField},Object(m.jsx)(v.EuiFieldText,{"data-telemetry-id":`entSearchContent-${h}-pipelines-configureInferencePipeline-targetField`,disabled:I,placeholder:"custom_field_name",value:f,onChange:e=>g({...o,destinationField:e.target.value})}))))))};var ms=n(508),js=n.n(ms),xs=n(509),bs=n.n(xs);const ys=()=>{const{colorMode:e}=Object(v.useEuiTheme)();return Object(m.jsx)(v.EuiEmptyPrompt,{body:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiImage,{size:"xl",src:"LIGHT"===e?bs.a:js.a,alt:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.noModels.imageAlt",{defaultMessage:"No machine learning models illustration"})}),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.noModels.description",defaultMessage:"You have no trained machine learning models that can be used by an inference pipeline. {documentationLink}",values:{documentationLink:Object(m.jsx)(v.EuiLink,{href:D.a.machineLearningStart,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.noModels.esDocs.link",{defaultMessage:"Learn how to add a trained model"}))}}))))})},Ms=()=>{const{mlInferencePipeline:e}=Object(s.useValues)(Hr);return Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiText,null,Object(m.jsx)("h4",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.review.title",{defaultMessage:"Pipeline configuration"})))),Object(m.jsx)(v.EuiFlexItem,{grow:!0},Object(m.jsx)(v.EuiCodeBlock,{language:"json",isCopyable:!0,overflowHeight:"400px"},JSON.stringify(null!=e?e:{},null,2))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,null,Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.review.description",{defaultMessage:"This pipeline will be created and injected as a processor into your default pipeline for this index. You'll be able to use this new pipeline independently as well."})))))};n(243);const Os=()=>{const{addInferencePipelineModal:{configuration:{sourceField:e},indexName:t,simulateBody:n},getDocumentsErr:r,isGetDocumentsLoading:o,showGetDocumentErrors:c,simulatePipelineResult:l,simulatePipelineErrors:u}=Object(s.useValues)(Hr),{simulatePipeline:d,setPipelineSimulateBody:p,makeGetDocumentRequest:g}=Object(s.useActions)(Hr),h=Object(v.useIsWithinMaxBreakpoint)("s"),f=Object(a.useRef)();return Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,null,Object(m.jsx)("h4",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.test.title",{defaultMessage:"Review pipeline results (optional)"}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,null,Object(m.jsx)("h5",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.test.subtitle",{defaultMessage:"Documents"})))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFormRow,{label:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.test.addDocument",{defaultMessage:"Add document"}),helpText:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.test.addDocument.helptext",{defaultMessage:"Test with a document from your index"}),isInvalid:c,error:r},Object(m.jsx)(v.EuiFieldText,{prepend:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.test.addDocument.documentId",{defaultMessage:"Document ID"}),inputRef:e=>{f.current=e},isInvalid:c,isLoading:o,onKeyDown:e=>{var n,a,i;"Enter"===e.key&&0!==(null===(n=f.current)||void 0===n?void 0:n.value.trim().length)&&g({documentId:null!==(a=null===(i=f.current)||void 0===i?void 0:i.value.trim())&&void 0!==a?a:"",indexName:t})}}))))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiResizableContainer,{direction:h?"vertical":"horizontal",className:"resizableContainer"},((e,t)=>Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(e,{grow:!0,hasBorder:!0,initialSize:50,paddingSize:"xs"},Object(m.jsx)(mn.CodeEditor,{languageId:"json",options:{automaticLayout:!0,lineNumbers:"off",tabSize:2},value:n,onChange:e=>{p(e)}})),Object(m.jsx)(t,null),Object(m.jsx)(e,{grow:!0,hasBorder:!0,initialSize:50,paddingSize:"xs"},Object(m.jsx)(v.EuiCodeBlock,{language:"json",isCopyable:!0,className:"reviewCodeBlock"},u.length>0?JSON.stringify(u,null,2):JSON.stringify(l||"",null,2))))))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.test.description",{defaultMessage:"You can simulate your pipeline results by passing an array of documents."}),Object(m.jsx)("br",null),Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.test.example.code",defaultMessage:"Use JSON format: {code}",values:{code:Object(m.jsx)(v.EuiCode,null,`[{"_index":"index","_id":"id","_source":{"${e}":"bar"}}]`)}})))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)("div",null,Object(m.jsx)(v.EuiButton,{onClick:d},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.steps.test.runButton",{defaultMessage:"Simulate Pipeline"})))))))},Ss=e=>{const{indexName:t}=Object(s.useValues)(Be),{setIndexName:n}=Object(s.useActions)(Hr);return Object(a.useEffect)((()=>{n(t)}),[t]),Object(m.jsx)(v.EuiFlyout,{onClose:e.onClose,className:"enterpriseSearchInferencePipelineFlyout",size:"l"},Object(m.jsx)(v.EuiFlyoutHeader,null,Object(m.jsx)(v.EuiTitle,{size:"m"},Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.title",{defaultMessage:"Add an inference pipeline"})))),Object(m.jsx)(Es,e))},Es=({onClose:e})=>{const{ingestionMethod:t}=Object(s.useValues)(rt),{createErrors:n,supportedMLModels:r,isLoading:o,addInferencePipelineModal:{step:c}}=Object(s.useValues)(Hr),l=n.join("|");return Object(a.useEffect)((()=>{if(0===n.length)return;const e=document.getElementsByClassName("euiModalBody__overflow");0!==e.length&&(e[0].scrollTop=0)}),[l]),o?Object(m.jsx)(v.EuiFlyoutBody,null,Object(m.jsx)(v.EuiLoadingSpinner,{size:"xl"})):0===r.length?Object(m.jsx)(ys,null):Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiFlyoutBody,null,n.length>0&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiCallOut,{title:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.addInferencePipelineModal.createErrors",{defaultMessage:"Error creating pipeline"}),color:"danger",iconType:"alert"},n.map(((e,t)=>Object(m.jsx)("p",{key:`createError.${t}`},e)))),Object(m.jsx)(v.EuiSpacer,null)),Object(m.jsx)(vs,null),c===qr.Configuration&&Object(m.jsx)(fs,null),c===qr.Test&&Object(m.jsx)(Os,null),c===qr.Review&&Object(m.jsx)(Ms,null)),Object(m.jsx)(v.EuiFlyoutFooter,{className:"enterpriseSearchInferencePipelineFlyoutFooter"},Object(m.jsx)(ws,{onClose:e,ingestionMethod:t})))},vs=()=>{const{addInferencePipelineModal:{step:e},isPipelineDataValid:t}=Object(s.useValues)(Hr),{setAddInferencePipelineStep:n}=Object(s.useActions)(Hr),a=[{onClick:()=>n(qr.Configuration),status:t?"complete":"disabled",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.transforms.addInferencePipelineModal.steps.configure.title",{defaultMessage:"Configure"})},{onClick:()=>{t&&n(qr.Test)},status:t?"incomplete":"disabled",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.transforms.addInferencePipelineModal.steps.test.title",{defaultMessage:"Test"})},{onClick:()=>{t&&n(qr.Review)},status:t?"incomplete":"disabled",title:w.i18n.translate("xpack.enterpriseSearch.content.indices.transforms.addInferencePipelineModal.steps.review.title",{defaultMessage:"Review"})}];switch(e){case qr.Configuration:a[0].status=t?"complete":"current";break;case qr.Test:a[1].status="current";break;case qr.Review:a[2].status="current"}return Object(m.jsx)(v.EuiStepsHorizontal,{steps:a})},ws=({ingestionMethod:e,onClose:t})=>{const{addInferencePipelineModal:n,isPipelineDataValid:a}=Object(s.useValues)(Hr),{attachPipeline:i,createPipeline:r,setAddInferencePipelineStep:o}=Object(s.useActions)(Hr),c=Boolean(n.configuration.existingPipeline);let l,u;switch(n.step){case qr.Test:l=qr.Review,u=qr.Configuration;break;case qr.Review:u=qr.Test;break;case qr.Configuration:l=qr.Test}return Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1},void 0!==u?Object(m.jsx)(v.EuiButtonEmpty,{flush:"both",iconType:"arrowLeft",onClick:()=>o(u)},$.c):null),Object(m.jsx)(v.EuiFlexItem,null),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":`entSearchContent-${e}-pipelines-addMlInference-cancel`,onClick:t},$.d)),Object(m.jsx)(v.EuiFlexItem,{grow:!1},void 0!==l?Object(m.jsx)(v.EuiButton,{"data-telemetry-id":`entSearchContent-${e}-pipelines-addMlInference-continue`,iconType:"arrowRight",iconSide:"right",onClick:()=>o(l),disabled:!a,fill:!0},$.f):c?Object(m.jsx)(v.EuiButton,{color:"primary","data-telemetry-id":`entSearchContent-${e}-pipelines-addMlInference-attach`,disabled:!a,fill:!0,onClick:i},w.i18n.translate("xpack.enterpriseSearch.content.indices.transforms.addInferencePipelineModal.footer.attach",{defaultMessage:"Attach"})):Object(m.jsx)(v.EuiButton,{color:"success","data-telemetry-id":`entSearchContent-${e}-pipelines-addMlInference-create`,disabled:!a,fill:!0,onClick:r},w.i18n.translate("xpack.enterpriseSearch.content.indices.transforms.addInferencePipelineModal.footer.create",{defaultMessage:"Create"}))))};var Is=n(96);const Ns=({onClick:e})=>{var t,n;const{capabilities:a}=Object(s.useValues)(Is.a),{ingestionMethod:i}=Object(s.useValues)(rt),{canUseMlInferencePipeline:r,hasIndexIngestionPipeline:o}=Object(s.useValues)(lr),{hasPlatinumLicense:c}=Object(s.useValues)(dr.a);return null!==(t=null==a||null===(n=a.ml)||void 0===n?void 0:n.canAccessML)&&void 0!==t&&t&&c?o?r?Object(m.jsx)(Ds,{ingestionMethod:i,onClick:e}):Object(m.jsx)(v.EuiToolTip,{content:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.mlInference.addButton.mlInferenceDisabled.disabledTooltip",{defaultMessage:"You must enable ML Inference Pipelines on the Ingest Pipeline to add ML Inference Pipeline Processors."})},Object(m.jsx)(Ds,{ingestionMethod:i,disabled:!0})):Object(m.jsx)(v.EuiToolTip,{content:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.mlInference.addButton.defaultIngestPipeline.disabledTooltip",{defaultMessage:"You cannot add machine learning inference pipeline processors to the default ingest pipeline. You must first copy and customize the default ingest pipeline to add machine learning inference pipeline processors."})},Object(m.jsx)(Ds,{ingestionMethod:i,disabled:!0})):Object(m.jsx)(v.EuiToolTip,{content:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.mlInference.addButton.mlPermissions.disabledTooltip",{defaultMessage:"You do not have permission to Machine Learning on this cluster."})},Object(m.jsx)(Ds,{ingestionMethod:i,disabled:!0}))},Ds=({disabled:e,ingestionMethod:t,onClick:n})=>Object(m.jsx)(v.EuiButton,{"data-telemetry-id":`entSearchContent-${t}-pipelines-addInferencePipeline`,color:"success",disabled:e,iconType:"plusInCircle",onClick:n},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.mlInference.addButtonLabel",{defaultMessage:"Add Inference Pipeline"})),Ts=w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.action.delete",{defaultMessage:"Delete pipeline"}),ks=e=>{if(e.pipeline.pipelineReferences.length>1){const t=e.pipeline.pipelineReferences.map((e=>e.replace("@ml-inference",""))).join(", ");return Object(m.jsx)(v.EuiToolTip,{position:"top",content:w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.action.delete.disabledDescription",{defaultMessage:"This inference pipeline cannot be deleted because it is used in multiple pipelines [{indexReferences}]. You must detach this pipeline from all but one ingest pipeline before it can be deleted.",values:{indexReferences:t}})},Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":e["data-telemetry-id"],size:"s",flush:"both",iconType:"trash",color:"text",disabled:!0},Ts))}return Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":e["data-telemetry-id"],size:"s",flush:"both",iconType:"trash",color:"text",onClick:e.onClick},Ts)},Cs=e=>{const{http:t}=Object(s.useValues)(l.a),{indexName:n}=Object(s.useValues)(Be),{ingestionMethod:i}=Object(s.useValues)(rt),[r,o]=Object(a.useState)(!1),[c,u]=Object(a.useState)(!1),{deleteMlPipeline:d,detachMlPipeline:p}=Object(s.useActions)(lr),{pipelineName:g,types:h}=e,f=zr(h),j=Fr(f),x=Object(m.jsx)(v.EuiButtonEmpty,{iconSide:"right",flush:"both",iconType:"boxesVertical",onClick:()=>o(!r)},w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.actionButton",{defaultMessage:"Actions"}));return Object(m.jsx)(v.EuiPanel,{color:"subdued"},Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h4",null,null!=j?j:g))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiPopover,{button:x,isOpen:r,closePopover:()=>o(!1)},Object(m.jsx)(v.EuiPopoverTitle,{paddingSize:"m"},w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.action.title",{defaultMessage:"Actions"})),Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("div",null,Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":`entSearchContent-${i}-pipelines-inferencePipeline-stackManagement`,size:"s",flush:"both",iconType:"eye",color:"text",href:t.basePath.prepend(`/app/management/ingest/ingest_pipelines/?pipeline=${g}`)},w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.action.view",{defaultMessage:"View in Stack Management"})))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("div",null,Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":`entSearchContent-${i}-pipelines-inferencePipeline-detachPipeline`,size:"s",flush:"both",iconType:"unlink",color:"text",onClick:()=>{p({indexName:n,pipelineName:g}),o(!1)}},w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.action.detach",{defaultMessage:"Detach pipeline"})))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("div",null,Object(m.jsx)(ks,{"data-telemetry-id":`entSearchContent-${i}-pipelines-inferencePipeline-deletePipeline`,onClick:()=>{u(!0),o(!1)},pipeline:e})))))))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"flexEnd"},j&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiTextColor,{color:"subdued"},g)),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(rs,{modelState:e.modelState,modelStateReason:e.modelStateReason})),e.modelState===xr.NotDeployed&&Object(m.jsx)(v.EuiFlexItem,{grow:!1,style:{paddingRight:"1rem"}},Object(m.jsx)(v.EuiToolTip,{position:"top",content:w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.modelState.notDeployed.fixLink",{defaultMessage:"Fix issue in Trained Models"})},Object(m.jsx)(v.EuiButtonIcon,{"data-telemetry-id":`entSearchContent-${i}-pipelines-inferencePipeline-fixIssueInTrainedModels`,href:t.basePath.prepend(R.a),display:"base",size:"xs",iconType:"wrench"}))),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"xs"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("span",null,Object(m.jsx)(v.EuiBadge,{color:"hollow"},f)))))))))),c&&Object(m.jsx)(v.EuiConfirmModal,{onCancel:()=>u(!1),onConfirm:()=>{u(!1),d({indexName:n,pipelineName:g})},title:w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.deleteConfirm.title",{defaultMessage:"Delete Pipeline"}),buttonColor:"danger",cancelButtonText:$.d,confirmButtonText:$.j,defaultFocusedButton:"confirm",maxWidth:!0},Object(m.jsx)(v.EuiText,null,Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.inferencePipelineCard.deleteConfirm.description",{defaultMessage:'You are removing the pipeline "{pipelineName}" from the Machine Learning Inference Pipeline and deleting it.',values:{pipelineName:g}})))))},_s=()=>{const{indexName:e}=Object(s.useValues)(Be),{mlInferencePipelineProcessors:t}=Object(s.useValues)(lr),{fetchMlInferenceProcessors:n}=Object(s.useActions)(lr);return Object(a.useEffect)((()=>{n({indexName:e})}),[e]),void 0===t||0===t.length?null:Object(m.jsx)(v.EuiFlexGroup,{direction:"column",gutterSize:"s"},t.map(((e,t)=>Object(m.jsx)(v.EuiFlexItem,{key:`${t}-${e.pipelineName}`},Object(m.jsx)(Cs,e)))))},As=e=>!!(e=>e.hasOwnProperty("_meta"))(e)&&Boolean(e._meta.managed),Ls=Object(s.kea)({actions:{selectPipeline:e=>({pipeline:e})},connect:{actions:[tr,["apiSuccess as fetchIndexPipelinesDataSuccess"]],values:[Be,["indexName"],tr,["data as indexPipelinesData"]]},events:({actions:e,values:t})=>({afterMount:()=>{if(!t.indexPipelinesData||0===t.indexPipelinesData.length)return;const n=Object.keys(t.indexPipelinesData).sort(),a=n.includes(t.indexName)?t.indexName:n[0];e.selectPipeline(a)}}),listeners:({actions:e,values:t})=>({fetchIndexPipelinesDataSuccess:n=>{const a=Object.keys(null!=n?n:{}).sort();if(a.length>0&&0===t.selectedPipelineId.length){const n=a.includes(t.indexName)?t.indexName:a[0];e.selectPipeline(n)}}}),path:["enterprise_search","content","pipelines_json_configurations"],reducers:()=>({selectedPipelineId:["",{selectPipeline:(e,{pipeline:t})=>t}]}),selectors:({selectors:e})=>({pipelines:[()=>[e.indexPipelinesData],e=>null!=e?e:{}],pipelineNames:[()=>[e.pipelines],e=>Object.keys(e).sort()],selectedPipeline:[()=>[e.selectedPipelineId,e.pipelines],(e,t)=>{if(t.hasOwnProperty(e))return t[e]}],selectedPipelineJSON:[()=>[e.selectedPipeline],e=>e?JSON.stringify(e,null,2):""]})}),zs=()=>Object(m.jsx)(v.EuiToolTip,{position:"top",content:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.managed.description",{defaultMessage:"This pipeline is managed and cannot be edited"})},Object(m.jsx)(v.EuiBadge,{iconType:"lock",color:"warning"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.managed",{defaultMessage:"Managed"}))),Fs=()=>Object(m.jsx)(v.EuiToolTip,{position:"top",content:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.unmanaged.description",defaultMessage:"Edit this pipeline from {ingestPipelines} in Stack Management",values:{ingestPipelines:Object(m.jsx)("strong",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.ingestPipelines",{defaultMessage:"Ingest Pipelines"}))}})},Object(m.jsx)(v.EuiBadge,{iconType:"lockOpen"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.unmanaged",{defaultMessage:"Unmanaged"}))),Rs=()=>Object(m.jsx)(v.EuiToolTip,{position:"top",content:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.shared.description",{defaultMessage:"This pipeline is shared across all Enterprise Search ingestion methods"})},Object(m.jsx)(v.EuiBadge,{iconType:"logstashIf",color:"hollow"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.shared",{defaultMessage:"Shared"}))),Ps=()=>Object(m.jsx)(v.EuiToolTip,{position:"top",content:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.indexSpecific.description",{defaultMessage:"This pipeline contains configurations specific to this index only"})},Object(m.jsx)(v.EuiBadge,{iconType:"document",color:"hollow"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.indexSpecific",{defaultMessage:"Index specific"}))),Us=()=>Object(m.jsx)(v.EuiToolTip,{position:"top",content:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.mlInference.description",{defaultMessage:"This pipeline references one or more ML Inference Pipelines for this index"})},Object(m.jsx)(v.EuiBadge,{iconType:"compute",color:"hollow"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.mlInference",{defaultMessage:"ML Inference"}))),$s=()=>{const{indexName:e,selectedPipeline:t,selectedPipelineId:n}=Object(s.useValues)(Ls);if(!t)return Object(m.jsx)(i.a.Fragment,null);const a=[];return As(t)?a.push(Object(m.jsx)(zs,null)):a.push(Object(m.jsx)(Fs,null)),n===x.d&&a.push(Object(m.jsx)(Rs,null)),null!=n&&n.endsWith("@ml-inference")?a.push(Object(m.jsx)(Us,null)):null!=n&&n.includes(e)&&a.push(Object(m.jsx)(Ps,null)),Object(m.jsx)(v.EuiBadgeGroup,{gutterSize:"s"},a)},Qs=()=>{const{http:e}=Object(s.useValues)(l.a),{ingestionMethod:t}=Object(s.useValues)(rt),{pipelineNames:n,selectedPipeline:a,selectedPipelineId:r,selectedPipelineJSON:o}=Object(s.useValues)(Ls),{selectPipeline:c}=Object(s.useActions)(Ls);return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Ha.a,{hasBorder:!0,title:Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.title",{defaultMessage:"Pipeline configurations"})),subtitle:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.subtitle",{defaultMessage:"View the JSON for your pipeline configurations on this index."}),footerDocLink:Object(m.jsx)(v.EuiLink,{href:D.a.ingestPipelines,target:"_blank",color:"subdued"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.ingestionPipelines.docLink",{defaultMessage:"Learn more about how Enterprise Search uses ingest pipelines"})),action:n.length>0&&Object(m.jsx)(v.EuiNotificationBadge,{size:"m"},n.length),iconType:"visVega"},Object(m.jsx)(v.EuiFormRow,{fullWidth:!0,label:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.selectLabel",{defaultMessage:"Select an ingest pipeline to view"})},Object(m.jsx)(v.EuiSelect,{"data-telemetry-id":`entSearchContent-${t}-pipelines-ingestPipelines-selectPipeline`,fullWidth:!0,options:n.map((e=>({text:e,value:e}))),value:r,onChange:e=>c(e.target.value)})),Object(m.jsx)(v.EuiSpacer,{size:"m"}),a&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)($s,null)),Object(m.jsx)(v.EuiFlexItem,{grow:!1},As(a)?Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":`entSearchContent-${t}-pipelines-ingestPipelines-viewInStackManagement`,size:"s",flush:"both",iconType:"eye",color:"primary",href:e.basePath.prepend(`/app/management/ingest/ingest_pipelines/?pipeline=${r}`)},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.action.view",{defaultMessage:"View in Stack Management"})):Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":`entSearchContent-${t}-pipelines-ingestPipelines-editInStackManagement`,size:"s",flush:"both",iconType:"pencil",color:"primary",href:e.basePath.prepend(`/app/management/ingest/ingest_pipelines/edit/${r}`)},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations.action.edit",{defaultMessage:"Edit in Stack Management"})))),Object(m.jsx)(v.EuiSpacer,{size:"m"}),Object(m.jsx)(v.EuiCodeBlock,{language:"json",overflowHeight:300,isCopyable:!0},o))))},Vs=()=>{const{showAddMlInferencePipelineModal:e,hasIndexIngestionPipeline:t,index:n,pipelineName:a}=Object(s.useValues)(lr),{closeAddMlInferencePipelineModal:r,openAddMlInferencePipelineModal:o}=Object(s.useActions)(lr),c=Object(P.f)(n),l=[{content:Object(m.jsx)(er,null),id:"inference-history",name:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.inferenceHistory",{defaultMessage:"Inference history"})},{content:Object(m.jsx)(Qs,null),id:"json-configurations",name:w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.tabs.jsonConfigurations",{defaultMessage:"JSON configurations"})}];return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,{direction:"row",wrap:!0},Object(m.jsx)(v.EuiFlexItem,{grow:5},Object(m.jsx)(Ha.a,{hasBorder:!0,footerDocLink:Object(m.jsx)(v.EuiLink,{href:D.a.ingestPipelines,target:"_blank",color:"subdued"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.ingestionPipeline.docLink",{defaultMessage:"Learn more about using pipelines in Enterprise Search"})),title:Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.ingestionPipeline.title",{defaultMessage:"Ingest Pipelines"})),subtitle:c?w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.ingestionPipeline.apiIndexSubtitle",{defaultMessage:"Ingest pipelines optimize your index for search applications. If you'd like to use these pipelines in your API-based index, you'll need to reference them explicitly in your API requests."}):w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.ingestionPipeline.subtitle",{defaultMessage:"Ingest pipelines optimize your index for search applications"}),iconType:"logstashInput"},Object(m.jsx)(jr,null)),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Ha.a,{hasBorder:!0,footerDocLink:Object(m.jsx)(v.EuiLink,{href:D.a.deployTrainedModels,target:"_blank",color:"subdued"},w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.mlInferencePipelines.docLink",{defaultMessage:"Learn more about deploying Machine Learning models in Elastic"})),title:Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.mlInferencePipelines.title",{defaultMessage:"Machine Learning Inference Pipelines"})),subtitle:c&&t?w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.mlInferencePipelines.subtitleAPIindex",{defaultMessage:"Inference pipelines will be run as processors from the Enterprise Search Ingest Pipeline. In order to use these pipelines on API-based indices you'll need to reference the {pipelineName} pipeline in your API requests.",values:{pipelineName:a}}):w.i18n.translate("xpack.enterpriseSearch.content.indices.pipelines.mlInferencePipelines.subtitle",{defaultMessage:"Inference pipelines will be run as processors from the Enterprise Search Ingest Pipeline"}),iconType:"compute",action:Object(m.jsx)(Ns,{onClick:()=>o()})},Object(m.jsx)(_s,null))),Object(m.jsx)(v.EuiFlexItem,{grow:5},Object(m.jsx)(v.EuiPanel,{color:"subdued"},Object(m.jsx)(v.EuiTabbedContent,{tabs:l,initialSelectedTab:l[0],autoFocus:"selected"})))),Object(m.jsx)(Zi,null),e&&Object(m.jsx)(Ss,{onClose:r}))};let Bs;!function(e){e.OVERVIEW="overview",e.DOCUMENTS="documents",e.INDEX_MAPPINGS="index_mappings",e.PIPELINES="pipelines",e.CONFIGURATION="configuration",e.SYNC_RULES="sync_rules",e.SCHEDULING="scheduling",e.DOMAIN_MANAGEMENT="domain_management"}(Bs||(Bs={}));const Ys=()=>{const{hasFilteringFeature:e,index:t,isInitialLoading:n}=Object(s.useValues)(rt),{tabId:o=Bs.OVERVIEW}=Object(r.useParams)(),{indexName:c}=Object(s.useValues)(Be),{guidedOnboarding:l}=Object(s.useValues)(u.a),d=ve()(l.guidedOnboardingApi.isGuideStepActive$("search","add_data"));Object(a.useEffect)((()=>{var e;d&&null!=t&&t.count&&(null===(e=l.guidedOnboardingApi)||void 0===e||e.completeGuideStep("search","add_data"))}),[d,null==t?void 0:t.count]),Object(a.useEffect)((()=>{Object(P.g)(t)&&t.connector.is_native&&null===t.connector.service_type&&u.a.values.navigateToUrl(Object(Z.a)(R.f,{indexName:c}))}),[t]);const p=[{content:Object(m.jsx)(Wi,null),id:Bs.OVERVIEW,name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.overviewTabLabel",{defaultMessage:"Overview"})},{content:Object(m.jsx)(ka,null),id:Bs.DOCUMENTS,name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.documentsTabLabel",{defaultMessage:"Documents"})},{content:Object(m.jsx)(Ca,null),id:Bs.INDEX_MAPPINGS,name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.indexMappingsTabLabel",{defaultMessage:"Index Mappings"})}],g=[{content:Object(m.jsx)(Ct,null),id:Bs.CONFIGURATION,name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.configurationTabLabel",{defaultMessage:"Configuration"})},...e?[{content:Object(m.jsx)(Dn,null),id:Bs.SYNC_RULES,name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.syncRulesTabLabel",{defaultMessage:"Sync rules"})}]:[],{content:Object(m.jsx)(rn,null),id:Bs.SCHEDULING,name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.schedulingTabLabel",{defaultMessage:"Scheduling"})}],h=[{content:Object(m.jsx)(ua,null),id:Bs.DOMAIN_MANAGEMENT,name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.domainManagementTabLabel",{defaultMessage:"Manage Domains"})},{content:Object(m.jsx)(Ln,null),id:Bs.SCHEDULING,name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.schedulingTabLabel",{defaultMessage:"Scheduling"})}],f={content:Object(m.jsx)(Vs,null),id:Bs.PIPELINES,name:w.i18n.translate("xpack.enterpriseSearch.content.searchIndex.pipelinesTabLabel",{defaultMessage:"Pipelines"})},j=[...p,...Object(P.g)(t)?g:[],...Object(P.i)(t)?h:[],f],x=j.find((e=>e.id===o));return Object(m.jsx)(S,{pageChrome:[...ae,c],pageViewTelemetry:o,isLoading:n,pageHeader:{pageTitle:c,rightSideItems:ct(t)}},Object(m.jsx)(i.a.Fragment,null,c===(null==t?void 0:t.name)&&Object(m.jsx)(v.EuiTabbedContent,{tabs:j,selectedTab:x,onTabClick:e=>{u.a.values.navigateToUrl(Object(Z.a)(e.id===Bs.OVERVIEW?R.e:R.g,{indexName:c,tabId:e.id}))}}),Object(P.i)(t)&&Object(m.jsx)(Qn,null)))},qs=Object(s.kea)({connect:{actions:[xe,["apiError","apiSuccess","makeRequest"]]},listeners:{apiError:e=>{Object(Q.e)(e)},apiSuccess:({indexName:e})=>{u.a.values.navigateToUrl(Object(Z.a)(R.g,{indexName:e,tabId:Bs.OVERVIEW}))},makeRequest:()=>Object(Q.d)()},path:["enterprise_search","method_api"]}),Gs=()=>{const{makeRequest:e}=Object(s.useActions)(qs);return Object(m.jsx)(Se,{title:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.newIndex.methodApi.title",defaultMessage:"Index using the API"}),type:"api",onSubmit:(t,n)=>e({indexName:t,language:n})},Object(m.jsx)(v.EuiSteps,{steps:[ue,{children:Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.newIndex.methodApi.steps.configureIngestion.content",{defaultMessage:"Generate an API key and view the documentation for posting documents to the Elasticsearch API endpoint. Language clients are available for streamlined integration."}))),status:"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.configureIngestion.title",{defaultMessage:"Configure ingestion settings"}),titleSize:"xs"},de]}))},Ws=Object(V.a)(["enterprise_search_content","fetch_cloud_health_api_logic"],(async()=>await l.a.values.http.get("/internal/enterprise_search/stats/cloud_health")));let Hs;!function(e){e.NATIVE_CONNECTOR="nativeConnector",e.CRAWLER="crawler",e.INFERENCE="inference"}(Hs||(Hs={}));const Js=({feature:e})=>{const t={[Hs.NATIVE_CONNECTOR]:w.i18n.translate("xpack.enterpriseSearch.content.licensingCallout.nativeConnector.contentOne",{defaultMessage:"Built-in connectors require a Platinum license or higher and are not available to Standard license self-managed deployments. You need to upgrade to use this feature."}),[Hs.CRAWLER]:w.i18n.translate("xpack.enterpriseSearch.content.licensingCallout.crawler.contentOne",{defaultMessage:"The web crawler requires a Platinum license or higher and is not available to Standard license self-managed deployments. You need to upgrade to use this feature."}),[Hs.INFERENCE]:w.i18n.translate("xpack.enterpriseSearch.content.licensingCallout.inference.contentOne",{defaultMessage:"Inference processors require a Platinum license or higher and are not available to Standard license self-managed deployments. You need to upgrade to use this feature."})},n={[Hs.NATIVE_CONNECTOR]:w.i18n.translate("xpack.enterpriseSearch.content.licensingCallout.contentTwo",{defaultMessage:"Did you know that built-in connectors are available with a Standard Elastic Cloud license? Elastic Cloud gives you the flexibility to run where you want. Deploy our managed service on Google Cloud, Microsoft Azure, or Amazon Web Services, and we'll handle the maintenance and upkeep for you."}),[Hs.CRAWLER]:w.i18n.translate("xpack.enterpriseSearch.content.licensingCallout.crawler.contentTwo",{defaultMessage:"Did you know that web crawlers are available with a Standard Elastic Cloud license? Elastic Cloud gives you the flexibility to run where you want. Deploy our managed service on Google Cloud, Microsoft Azure, or Amazon Web Services, and we'll handle the maintenance and upkeep for you."}),[Hs.INFERENCE]:w.i18n.translate("xpack.enterpriseSearch.content.licensingCallout.inference.contentTwo",{defaultMessage:"Did you know that inference processors are available with a Standard Elastic Cloud license? Elastic Cloud gives you the flexibility to run where you want. Deploy our managed service on Google Cloud, Microsoft Azure, or Amazon Web Services, and we'll handle the maintenance and upkeep for you."})};return Object(m.jsx)(v.EuiCallOut,{title:w.i18n.translate("xpack.enterpriseSearch.content.licensingCallout.title",{defaultMessage:"Platinum features"})},Object(m.jsx)("p",null,t[e]),Object(m.jsx)("p",null,n[e]),Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiLink,{external:!0,href:Cn.a.licenseManagement},w.i18n.translate("xpack.enterpriseSearch.workplaceSearch.explorePlatinumFeatures.link",{defaultMessage:"Explore Platinum features"}))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiLink,{href:"https://www.elastic.co/subscriptions/cloud",external:!0},w.i18n.translate("xpack.enterpriseSearch.content.licensingCallout.contentCloudTrial",{defaultMessage:"Explore Enterprise Search on Elastic Cloud "})))))};let Zs;!function(e){e.ANALYTICS_COLLECTION_ALREADY_EXISTS="analytics_collection_already_exists",e.ANALYTICS_COLLECTION_NOT_FOUND="analytics_collection_not_found",e.ANALYTICS_COLLECTION_NAME_INVALID="analytics_collection_name_invalid",e.CONNECTOR_DOCUMENT_ALREADY_EXISTS="connector_document_already_exists",e.CRAWLER_ALREADY_EXISTS="crawler_already_exists",e.DOCUMENT_NOT_FOUND="document_not_found",e.INDEX_ALREADY_EXISTS="index_already_exists",e.INDEX_NOT_FOUND="index_not_found",e.PIPELINE_ALREADY_EXISTS="pipeline_already_exists",e.PIPELINE_IS_IN_USE="pipeline_is_in_use",e.PIPELINE_NOT_FOUND="pipeline_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.UNAUTHORIZED="unauthorized",e.UNCAUGHT_EXCEPTION="uncaught_exception"}(Zs||(Zs={}));const Ks=e=>{var t,n,a,i,r,s,o;if(e)return(null===(t=e.body)||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.error_code)===Zs.INDEX_ALREADY_EXISTS?w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildConnector.error.indexAlreadyExists",{defaultMessage:"This index already exists"}):(null===(a=e.body)||void 0===a||null===(i=a.attributes)||void 0===i?void 0:i.error_code)===Zs.CONNECTOR_DOCUMENT_ALREADY_EXISTS||(null===(r=e.body)||void 0===r||null===(s=r.attributes)||void 0===s?void 0:s.error_code)===Zs.CRAWLER_ALREADY_EXISTS?w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildConnector.error.connectorAlreadyExists",{defaultMessage:"A connector for this index already exists"}):403===(null==e||null===(o=e.body)||void 0===o?void 0:o.statusCode)?w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildConnector.error.unauthorizedError",{defaultMessage:"You are not authorized to create this connector"}):w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildConnector.error.genericError",{defaultMessage:"We were not able to create your index"})};var Xs=n(73);const eo=Object(s.kea)({actions:{setIsModalVisible:e=>({isModalVisible:e})},connect:{actions:[me,["apiError","apiSuccess"]]},listeners:{apiError:e=>Object(Q.e)(e),apiSuccess:async({indexName:e},t)=>{await t(1e3),u.a.values.navigateToUrl(Object(Xs.a)(R.g,{indexName:e,tabId:Bs.CONFIGURATION}))}},path:["enterprise_search","add_connector"],reducers:{isModalVisible:[!1,{apiError:(e,t)=>{var n,a;return(null===(n=t.body)||void 0===n||null===(a=n.attributes)||void 0===a?void 0:a.error_code)===Zs.CONNECTOR_DOCUMENT_ALREADY_EXISTS},apiSuccess:()=>!1,setIsModalVisible:(e,{isModalVisible:t})=>t}]}}),to=({isNative:e})=>{const{apiReset:t,makeRequest:n}=Object(s.useActions)(me),{error:i,status:r}=Object(s.useValues)(me),{isModalVisible:o}=Object(s.useValues)(eo),{setIsModalVisible:c}=Object(s.useActions)(eo),{fullIndexName:l,language:d}=Object(s.useValues)(Oe),{isCloud:p,cloud:g}=Object(s.useValues)(u.a),{hasPlatinumLicense:h}=Object(s.useValues)(dr.a),{data:f}=Object(s.useValues)(Ws),j=e&&!p&&!h,x=e&&p&&f&&!f.has_min_connector_memory,{makeRequest:b}=Object(s.useActions)(Ws);return Object(a.useEffect)((()=>{p&&b({})}),[p]),Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},j&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Js,{feature:Hs.NATIVE_CONNECTOR})),x&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCallOut,{title:w.i18n.translate("xpack.enterpriseSearch.content.nativeConnector.memoryCallout.title",{defaultMessage:"Your Enterprise Search deployment does not have enough memory"}),color:"warning",iconType:"alert"},w.i18n.translate("xpack.enterpriseSearch.content.nativeConnector.memoryCallout.content",{defaultMessage:"Enterprise Search needs at least 4GB of memory to use a native connector. To proceed, please edit your deployment settings."}),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiLink,{href:g.baseUrl,external:!0},w.i18n.translate("xpack.enterpriseSearch.content.nativeConnector.memoryCallout.link.title",{defaultMessage:"Manage deployment"})))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Se,{docsUrl:D.a.connectors,disabled:j||x,error:Ks(i),title:e?w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.nativeConnector.title",{defaultMessage:"Index using a connector"}):w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildConnector.title",{defaultMessage:"Build a connector"}),type:"connector",onNameChange:()=>{t()},onSubmit:(t,a)=>n({indexName:t,isNative:e,language:a}),buttonLoading:r===U.a.LOADING},Object(m.jsx)(v.EuiSteps,{steps:[ue,e?{children:Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.newIndex.steps.nativeConnector.content",defaultMessage:"Choose from our catalog of native connectors to start extracting searchable content from supported data sources like MongoDB. If you need to customize a connector’s behavior, you can always deploy the self-managed connector client version and register it via the {buildAConnectorLabel} workflow.",values:{buildAConnectorLabel:Object(m.jsx)("strong",null,w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildConnector.title",{defaultMessage:"Build a connector"}))}}))),status:"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.methodConnector.steps.nativeConnector.title",{defaultMessage:"Configure a connector"}),titleSize:"xs"}:{children:Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.newIndex.steps.buildConnector.content",defaultMessage:"Using our connector framework and connector client examples, you’ll be able to accelerate ingestion to the Elasticsearch {bulkApiDocLink} for any data source. After creating your index, you will be guided through the steps to access the connector framework and connect your first connector client.",values:{bulkApiDocLink:Object(m.jsx)(v.EuiLink,{href:D.a.bulkApi,target:"_blank",external:!0},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.methodConnector.steps.buildConnector.bulkAPILink",{defaultMessage:"Bulk API"}))}}))),status:"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.methodConnector.steps.buildConnector.title",{defaultMessage:"Build and configure a connector"}),titleSize:"xs"},de]}),o&&Object(m.jsx)(v.EuiConfirmModal,{title:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildConnector.confirmModal.title",{defaultMessage:"Replace existing connector"}),onCancel:e=>{null==e||e.preventDefault(),c(!1)},onConfirm:t=>{t.preventDefault(),n({deleteExistingConnector:!0,indexName:l,isNative:e,language:d})},cancelButtonText:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildConnector.confirmModal.cancelButton.label",{defaultMessage:"Cancel"}),confirmButtonText:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildConnector.confirmModal.confirmButton.label",{defaultMessage:"Replace configuration"}),defaultFocusedButton:"confirm"},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.buildConnector.confirmModal.description",{defaultMessage:"A deleted index named {indexName} was originally tied to an existing connector configuration. Would you like to replace the existing connector configuration with a new one?",values:{indexName:l}})))))},no=Object(s.kea)({connect:{actions:[je,["apiError","apiSuccess","makeRequest"]]},listeners:{apiError:e=>{Object(Q.e)(e)},apiSuccess:({created:e})=>{u.a.values.navigateToUrl(Object(Z.a)(R.g,{indexName:e,tabId:Bs.DOMAIN_MANAGEMENT}))},makeRequest:()=>Object(Q.d)()},path:["enterprise_search","method_crawler"]}),ao=()=>{const{status:e}=Object(s.useValues)(je),{makeRequest:t}=Object(s.useActions)(je),{isCloud:n}=Object(s.useValues)(u.a),{hasPlatinumLicense:a}=Object(s.useValues)(dr.a),i=!n&&!a;return no.mount(),Object(m.jsx)(v.EuiFlexGroup,{direction:"column"},i&&Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Js,{feature:Hs.CRAWLER})),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(Se,{title:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.createIndex.crawler.title",{defaultMessage:"Index using the web crawler"}),type:"crawler",onSubmit:(e,n)=>t({indexName:e,language:n}),disabled:i,buttonLoading:e===U.a.LOADING,docsUrl:D.a.crawlerOverview},Object(m.jsx)(v.EuiSteps,{steps:[ue,{children:Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.newIndex.methodCrawler.steps.configureIngestion.content",{defaultMessage:"Configure the domains you’d like to crawl, and when ready trigger your first crawl. Let Enterprise Search do the rest."}))),status:"incomplete",title:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.steps.configureIngestion.title",{defaultMessage:"Configure ingestion settings"}),titleSize:"xs"},de]}))))};let io;!function(e){e.api="api",e.connector="connector",e.crawler="crawler",e.native_connector="native_connector"}(io||(io={}));const ro=Object(m.jsx)(v.EuiBadge,{iconType:"beaker"},Object(m.jsx)(v.EuiText,{size:"xs"},$.y)),so=[{description:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.crawler.description",{defaultMessage:"Discover, extract, index, and sync all of your website content"}),footer:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.crawler.footer",{defaultMessage:"No development required"}),icon:"globe",id:io.crawler,label:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.crawler.label",{defaultMessage:"Use the web crawler"})},{badge:ro,description:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.nativeConnector.description",{defaultMessage:"Configure a connector to extract, index, and sync all of your content from supported data sources "}),footer:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.nativeConnector.footer",{defaultMessage:"No development required"}),icon:"visVega",id:io.native_connector,label:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.nativeConnector.label",{defaultMessage:"Use a connector"})},{description:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.api.description",{defaultMessage:"Add documents programmatically by connecting with the API"}),footer:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.api.footer",{defaultMessage:"Some development required"}),icon:"visVega",id:io.api,label:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.api.label",{defaultMessage:"Use the API"})},{badge:ro,description:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.connector.description",{defaultMessage:"Use the connector framework to quickly build connectors for custom data sources"}),footer:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.connector.footer",{defaultMessage:"Development required"}),icon:"package",id:io.connector,label:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.buttonGroup.connector.label",{defaultMessage:"Build a connector"})}],oo=()=>{var e;const{search:t}=Object(r.useLocation)(),{method:n}=Object(re.a)(t),s=null!==(e=so.find((e=>e.id===n)))&&void 0!==e?e:so[0],[o,c]=Object(a.useState)(s);return Object(m.jsx)(S,{pageChrome:[...ae,w.i18n.translate("xpack.enterpriseSearch.content.newIndex.breadcrumb",{defaultMessage:"New search index"})],pageViewTelemetry:"New Index",isLoading:!1,pageHeader:{pageTitle:w.i18n.translate("xpack.enterpriseSearch.content.newIndex.pageTitle",{defaultMessage:"New search index"})}},Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,{grow:!1,style:{maxWidth:"24rem"}},Object(m.jsx)(v.EuiPanel,{hasShadow:!1,paddingSize:"m",grow:!1,color:"subdued"},Object(m.jsx)(v.EuiTitle,{size:"s"},Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.content.newIndex.selectSearchIndex.title",{defaultMessage:"Select an ingestion method"}))),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.newIndex.selectSearchIndex.description",{defaultMessage:"Create a search optimized Elasticsearch index by selecting an ingestion method for your use case."}))),Object(m.jsx)(v.EuiSpacer,{size:"m"}),Object(m.jsx)(ce,{options:so,selected:o,onChange:c}),Object(m.jsx)(v.EuiSpacer,{size:"xxl"}),Object(m.jsx)(k.d,{to:"/app/integrations",shouldNotCreateHref:!0},w.i18n.translate("xpack.enterpriseSearch.content.newIndex.viewIntegrationsLink",{defaultMessage:"View additional integrations"})))),Object(m.jsx)(v.EuiFlexItem,null,o?Object(m.jsx)(i.a.Fragment,null,o.id===io.crawler&&Object(m.jsx)(ao,null),o.id===io.api&&Object(m.jsx)(Gs,null),o.id===io.connector&&Object(m.jsx)(to,{isNative:!1}),o.id===io.native_connector&&Object(m.jsx)(to,{isNative:!0})):Object(m.jsx)(le,null))))},co=Object(s.kea)({path:["enterprise_search","crawler","crawler_domain_detail_logic"],connect:{actions:[Vn,["apiError as deleteApiError","apiSuccess as deleteApiSuccess","makeRequest as deleteMakeRequest"]],values:[Vn,["status as deleteStatus"]]},actions:{deleteDomain:()=>!0,deleteDomainComplete:()=>!0,fetchDomainData:e=>({domainId:e}),receiveDomainData:e=>({domain:e}),submitAuthUpdate:e=>({auth:e}),submitDeduplicationUpdate:({fields:e,enabled:t})=>({enabled:t,fields:e}),updateCrawlRules:e=>({crawlRules:e}),updateEntryPoints:e=>({entryPoints:e}),updateSitemaps:e=>({sitemaps:e})},reducers:({props:e})=>({domain:[null,{receiveDomainData:(e,{domain:t})=>t,updateCrawlRules:(e,{crawlRules:t})=>({...e,crawlRules:t}),updateEntryPoints:(e,{entryPoints:t})=>({...e,entryPoints:t}),updateSitemaps:(e,{sitemaps:t})=>({...e,sitemaps:t})}],domainId:[e.domainId,{fetchDomainData:(e,{domainId:t})=>t}],getLoading:[!0,{receiveDomainData:()=>!1}]}),selectors:({selectors:e})=>({deleteLoading:[()=>[e.deleteStatus],e=>e===U.a.LOADING]}),listeners:({actions:e,values:t})=>({deleteDomain:async()=>{const{domain:n}=t,{indexName:a}=Be.values;n&&e.deleteMakeRequest({domain:n,indexName:a})},deleteApiSuccess:()=>{const{indexName:e}=Be.values;u.a.values.navigateToUrl(Object(Z.a)(R.g,{indexName:e,tabId:Bs.DOMAIN_MANAGEMENT}))},deleteApiError:e=>{Object(Q.e)(e)},fetchDomainData:async({domainId:t})=>{const{http:n}=l.a.values,{indexName:a}=Be.values;try{const i=_e(await n.get(`/internal/enterprise_search/indices/${a}/crawler/domains/${t}`));e.receiveDomainData(i)}catch(e){Object(Q.e)(e)}},submitAuthUpdate:async({auth:n})=>{const{http:a}=l.a.values,{indexName:i}=Be.values,{domainId:r}=t,s={auth:n};try{const t=_e(await a.put(`/internal/enterprise_search/indices/${i}/crawler/domains/${r}`,{body:JSON.stringify(s)}));e.receiveDomainData(t)}catch(e){Object(Q.e)(e)}},submitDeduplicationUpdate:async({fields:n,enabled:a})=>{const{http:i}=l.a.values,{indexName:r}=Be.values,{domainId:s}=t,o={deduplication_enabled:a,deduplication_fields:n};try{const t=_e(await i.put(`/internal/enterprise_search/indices/${r}/crawler/domains/${s}`,{body:JSON.stringify(o)}));e.receiveDomainData(t)}catch(e){Object(Q.e)(e)}}})}),lo=Object(s.kea)({path:["enterprise_search","app_search","crawler","authentication_panel"],connect:{actions:[co,["submitAuthUpdate","receiveDomainData"]]},actions:()=>({deleteCredentials:!0,disableEditing:!0,enableEditing:e=>({currentCrawlerAuth:e}),saveCredentials:!0,selectAuthOption:e=>({authType:e}),setHeaderContent:e=>({headerContent:e}),setIsModalVisible:e=>({isModalVisible:e}),setPassword:e=>({password:e}),setUsername:e=>({username:e})}),reducers:()=>({headerContent:["",{enableEditing:(e,{currentCrawlerAuth:t})=>{return void 0!==t&&null!==(n=t)&&"raw"===n.type?t.header:"";var n},receiveDomainData:()=>"",setHeaderContent:(e,{headerContent:t})=>t}],isEditing:[!1,{disableEditing:()=>!1,enableEditing:()=>!0,receiveDomainData:()=>!1}],isModalVisible:[!1,{receiveDomainData:()=>!1,setIsModalVisible:(e,{isModalVisible:t})=>t}],password:["",{enableEditing:(e,{currentCrawlerAuth:t})=>void 0!==t&&Pe(t)?t.password:"",receiveDomainData:()=>"",setPassword:(e,{password:t})=>t}],selectedAuthOption:[null,{enableEditing:(e,{currentCrawlerAuth:t})=>{var n;return null!==(n=null==t?void 0:t.type)&&void 0!==n?n:"basic"},receiveDomainData:()=>null,selectAuthOption:(e,{authType:t})=>t}],username:["",{enableEditing:(e,{currentCrawlerAuth:t})=>void 0!==t&&Pe(t)?t.username:"",receiveDomainData:()=>"",setUsername:(e,{username:t})=>t}]}),listeners:({values:e})=>({saveCredentials:()=>{const{headerContent:t,password:n,selectedAuthOption:a,username:i}=e;"basic"===a?co.actions.submitAuthUpdate({password:n,type:"basic",username:i}):"raw"===a&&co.actions.submitAuthUpdate({header:t,type:"raw"})},deleteCredentials:()=>{co.actions.submitAuthUpdate(null)}})}),uo=()=>{var e;const{domain:t}=Object(s.useValues)(co),n=null!==(e=null==t?void 0:t.auth)&&void 0!==e?e:null,{disableEditing:a,enableEditing:i,saveCredentials:r,setIsModalVisible:o}=Object(s.useActions)(lo),{isEditing:c}=Object(s.useValues)(lo);return c?Object(m.jsx)(v.EuiFlexGroup,{gutterSize:"s"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-authentication-save",iconType:"checkInCircleFilled",size:"s",color:"primary",onClick:()=>r()},$.w)),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-authentication-cancel",iconType:"crossInACircleFilled",size:"s",color:"danger",onClick:()=>a()},$.d))):null===n?Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-authentication-addCredentials",color:"success",iconType:"plusInCircle",size:"s",onClick:()=>i(n)},w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.resetToDefaultsButtonLabel",{defaultMessage:"Add credentials"})):Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-authentication-deleteCredentials",color:"primary",size:"s",onClick:()=>{o(!0)}},$.j)},po=()=>{const{deleteCredentials:e,setIsModalVisible:t}=Object(s.useActions)(lo);return Object(m.jsx)(v.EuiConfirmModal,{title:w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.deleteConfirmationModal.title",{defaultMessage:"Are you sure you want to delete these settings?"}),onCancel:e=>{null==e||e.preventDefault(),t(!1)},onConfirm:t=>{t.preventDefault(),e()},cancelButtonText:$.d,confirmButtonText:w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.deleteConfirmationModal.deleteButtonLabel",{defaultMessage:"Delete"}),defaultFocusedButton:"confirm",buttonColor:"danger"},w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.deleteConfirmationModal.description",{defaultMessage:"Deleting these settings might prevent the crawler from indexing protected areas of the domain. This can not be undone."}))},go={basic:w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.basicAuthenticationLabel",{defaultMessage:"Basic authentication"}),raw:w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.rawAuthenticationLabel",{defaultMessage:"Authentication header"})},ho=()=>{const{selectAuthOption:e,setHeaderContent:t,setPassword:n,setUsername:a}=Object(s.useActions)(lo),{headerContent:i,username:r,password:o,selectedAuthOption:c}=Object(s.useValues)(lo);return Object(m.jsx)(v.EuiFormFieldset,null,Object(m.jsx)(v.EuiFlexGroup,{direction:"row"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCheckableCard,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-authentication-basicAuthentication",id:"basicAuthenticationCheckableCard",className:"authenticationCheckable",label:Object(m.jsx)(v.EuiTitle,{size:"xxs"},Object(m.jsx)("h5",null,go.basic)),value:"basic",checked:"basic"===c,onChange:()=>e("basic")},Object(m.jsx)(v.EuiForm,null,Object(m.jsx)(v.EuiFormRow,{label:$.A},Object(m.jsx)(v.EuiFieldText,{value:r,onChange:e=>a(e.target.value),disabled:"basic"!==c})),Object(m.jsx)(v.EuiFormRow,{label:$.u},Object(m.jsx)(v.EuiFieldPassword,{type:"dual",value:o,onChange:e=>n(e.target.value),disabled:"basic"!==c}))))),Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiCheckableCard,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-authentication-authenticationHeader",id:"authenticationHeaderCheckableCard",className:"authenticationCheckable",label:Object(m.jsx)(v.EuiTitle,{size:"xxs"},Object(m.jsx)("h5",null,go.raw)),value:"raw",checked:"raw"===c,onChange:()=>e("raw")},Object(m.jsx)(v.EuiForm,null,Object(m.jsx)(v.EuiFormRow,{label:w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.editForm.headerValueLabel",{defaultMessage:"Header value"})},Object(m.jsx)(v.EuiFieldPassword,{type:"dual",value:i,onChange:e=>t(e.target.value),disabled:"raw"!==c})))))))};n(244);const fo=()=>{const{domain:e}=Object(s.useValues)(co);return null!=e&&e.auth?Object(m.jsx)(v.EuiPanel,{color:"subdued",borderRadius:"none",hasShadow:!1},Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("h3",null,w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.configurationSavePanel.title",{defaultMessage:"Configuration settings saved"}))),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{color:"subdued",size:"s"},w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.configurationSavePanel.description",{defaultMessage:"Authentication settings for crawling protected content have been saved. To update an authentication mechanism, delete settings and restart."}))):Object(m.jsx)(v.EuiEmptyPrompt,{title:Object(m.jsx)("h4",null,w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.emptyPrompt.title",{defaultMessage:"No authentication configured"})),body:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.crawler.authenticationPanel.emptyPrompt.description",defaultMessage:"Click {addAuthenticationButtonLabel} to provide the credentials needed to crawl protected content",values:{addAuthenticationButtonLabel:Object(m.jsx)("strong",null,w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.emptyPrompt.addAuthenticationButtonLabel",{defaultMessage:"Add authentication"}))}}),titleSize:"s"})},mo=()=>{const{isEditing:e,isModalVisible:t}=Object(s.useValues)(lo);return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(Ha.a,{className:"authenticationPanel",hasBorder:!0,title:Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.crawler.authenticationPanel.title",{defaultMessage:"Authentication"})),action:Object(m.jsx)(uo,null),subtitle:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.crawler.authenticationPanel.description",defaultMessage:"Setup authentication to enable crawling protected content for this domain."})},e?Object(m.jsx)(ho,null):Object(m.jsx)(fo,null)),t&&Object(m.jsx)(po,null))};var jo=n(107);const xo=e=>{switch(e){case De.beginsWith:return w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesCrawlerRules.beginsWithLabel",{defaultMessage:"Begins with"});case De.endsWith:return w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesCrawlerRules.endsWithLabel",{defaultMessage:"Ends with"});case De.contains:return w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesCrawlerRules.containsLabel",{defaultMessage:"Contains"});case De.regex:return w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesCrawlerRules.regexLabel",{defaultMessage:"Regex"})}},bo=e=>{switch(e){case Ne.allow:return w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesPolicies.allowLabel",{defaultMessage:"Allow"});case Ne.deny:return w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesPolicies.disallowLabel",{defaultMessage:"Disallow"})}},yo=e=>e.rule===De.regex?w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesTable.regexPathPatternTooltip",{defaultMessage:"The path pattern is a regular expression compatible with the Ruby language regular expression engine."}):w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesTable.pathPatternTooltip",{defaultMessage:"The path pattern is a literal string except for the asterisk (*) character, which is a meta character that will match anything."}),Mo=Object(m.jsx)("p",null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.crawler.crawlRulesTable.description",defaultMessage:"Create a crawl rule to include or exclude pages whose URL matches the rule. Rules run in sequential order, and each URL is evaluated according to the first match. {link}",values:{link:Object(m.jsx)(v.EuiLink,{href:D.a.crawlerManaging,target:"_blank",external:!0},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesTable.descriptionLinkText",{defaultMessage:"Learn more about crawl rules"}))}})),Oo=({description:e=Mo,domainId:t,indexName:n,crawlRules:a,defaultCrawlRule:i})=>{const{updateCrawlRules:r}=Object(s.useActions)(co),o=[{editingRender:(e,t,{isInvalid:n,isLoading:a})=>Object(m.jsx)(v.EuiSelect,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-crawlRules-policy",fullWidth:!0,hasNoInitialSelection:!0,value:e.policy,onChange:e=>t(e.target.value),disabled:a,isInvalid:n,options:[Ne.allow,Ne.deny].map((e=>({text:bo(e),value:e})))}),field:"policy",name:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesTable.policyTableHead",{defaultMessage:"Policy"}),render:e=>Object(m.jsx)(v.EuiText,{size:"s"},bo(e.policy))},{editingRender:(e,t,{isInvalid:n,isLoading:a})=>Object(m.jsx)(v.EuiSelect,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-crawlRules-rule",fullWidth:!0,hasNoInitialSelection:!0,value:e.rule,onChange:e=>t(e.target.value),disabled:a,isInvalid:n,options:[De.beginsWith,De.endsWith,De.contains,De.regex].map((e=>({text:xo(e),value:e})))}),field:"rule",name:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesTable.ruleTableHead",{defaultMessage:"Rule"}),render:e=>Object(m.jsx)(v.EuiText,{size:"s"},xo(e.rule))},{editingRender:(e,t,{isInvalid:n,isLoading:a})=>Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiFieldText,{fullWidth:!0,value:e.pattern,onChange:e=>t(e.target.value),disabled:a,isInvalid:n})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiIconTip,{content:yo(e),type:"iInCircle",position:"top"}))),field:"pattern",name:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesTable.pathPatternTableHead",{defaultMessage:"Path pattern"}),render:e=>Object(m.jsx)(v.EuiCode,null,e.pattern)}],c=`/internal/enterprise_search/indices/${n}/crawler/domains/${t}/crawl_rules`,l=`/internal/enterprise_search/indices/${n}/crawler/domains/${t}`,u=e=>`/internal/enterprise_search/indices/${n}/crawler/domains/${t}/crawl_rules/${e.id}`;return Object(m.jsx)(jo.a,{addButtonText:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesTable.addButtonLabel",{defaultMessage:"Add crawl rule"}),columns:o,description:e,instanceId:"CrawlRulesTable",items:a,addRoute:c,dataProperty:"crawl_rules",deleteRoute:u,updateRoute:u,reorderRoute:l,onAdd:(e,t)=>{r(t),Object(Q.d)()},onDelete:(e,t)=>{r(t),Object(Q.d)(),Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesTable.deleteSuccessToastMessage",{defaultMessage:"The crawl rule has been deleted."}))},onUpdate:(e,t)=>{r(t),Object(Q.d)()},onReorder:e=>{r(e),Object(Q.d)()},title:w.i18n.translate("xpack.enterpriseSearch.crawler.crawlRulesTable.title",{defaultMessage:"Crawl rules"}),uneditableItems:i?[i]:void 0,canRemoveLastItem:!0})},So=e=>e.filter((e=>e.checked)).map((e=>e.label));n(518);const Eo=()=>{const{domain:e}=Object(s.useValues)(co),{submitDeduplicationUpdate:t}=Object(s.useActions)(co),[n,r]=Object(a.useState)(!0),[o,c]=Object(a.useState)(!1);if(!e)return null;const{deduplicationEnabled:l,deduplicationFields:u}=e,d=((e,t)=>{const{availableDeduplicationFields:n,deduplicationFields:a,deduplicationEnabled:i}=e;let r;return r=t?n.map((e=>({label:e,checked:a.includes(e)?"on":void 0}))):n.filter((e=>a.includes(e))).map((e=>({label:e,checked:"on"}))),i||(r=r.map((e=>({...e,disabled:!0})))),r})(e,n);return Object(m.jsx)(Ha.a,{hasBorder:!0,title:Object(m.jsx)("h2",null,w.i18n.translate("xpack.enterpriseSearch.crawler.deduplicationPanel.title",{defaultMessage:"Duplicate document handling"})),action:Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-deduplication-reset",color:"warning",iconType:"refresh",size:"s",onClick:()=>t({fields:[]}),disabled:0===u.length},w.i18n.translate("xpack.enterpriseSearch.crawler.deduplicationPanel.resetToDefaultsButtonLabel",{defaultMessage:"Reset to defaults"})),subtitle:Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.crawler.deduplicationPanel.description",defaultMessage:"The web crawler only indexes unique pages. Choose which fields the crawler should use when considering which pages are duplicates. Deselect all schema fields to allow duplicate documents on this domain. {documentationLink}.",values:{documentationLink:Object(m.jsx)(v.EuiLink,{href:D.a.crawlerManaging,target:"_blank",external:!0},w.i18n.translate("xpack.enterpriseSearch.crawler.deduplicationPanel.learnMoreMessage",{defaultMessage:"Learn more about content hashing"}))}})},Object(m.jsx)(v.EuiSwitch,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-deduplication-preventDuplicates",label:w.i18n.translate("xpack.enterpriseSearch.crawler.deduplicationPanel.preventDuplicateLabel",{defaultMessage:"Prevent duplicate documents"}),checked:l,onChange:()=>t(l?{enabled:!1,fields:[]}:{enabled:!0})}),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiFlexGroup,null,Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)("div",{className:"selectableWrapper"},Object(m.jsx)(v.EuiSelectable,{options:d,onChange:e=>t({fields:So(e)}),searchable:!0,searchProps:{disabled:!l,append:Object(m.jsx)(v.EuiPopover,{button:Object(m.jsx)(v.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-deduplication-selectFields",size:"xs",iconType:"arrowDown",iconSide:"right",onClick:()=>c(!o),className:"showAllFieldsPopoverToggle",disabled:!l},n?w.i18n.translate("xpack.enterpriseSearch.crawler.deduplicationPanel.allFieldsLabel",{defaultMessage:"All fields"}):w.i18n.translate("xpack.enterpriseSearch.crawler.deduplicationPanel.selectedFieldsLabel",{defaultMessage:"Selected fields"})),isOpen:o,closePopover:()=>c(!1),panelPaddingSize:"none",anchorPosition:"downLeft"},Object(m.jsx)(v.EuiContextMenuPanel,{items:[Object(m.jsx)(v.EuiContextMenuItem,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-deduplication-showAllFields",key:"all fields",icon:n?"check":"empty",onClick:()=>{r(!0),c(!1)}},w.i18n.translate("xpack.enterpriseSearch.crawler.deduplicationPanel.showAllFieldsButtonLabel",{defaultMessage:"Show all fields"})),Object(m.jsx)(v.EuiContextMenuItem,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-deduplication-showSelectedFields",key:"selected fields",icon:n?"empty":"check",onClick:()=>{r(!1),c(!1)}},w.i18n.translate("xpack.enterpriseSearch.crawler.crawlerStatusIndicator.showSelectedFieldsButtonLabel",{defaultMessage:"Show only selected fields"}))]}))}},((e,t)=>Object(m.jsx)(i.a.Fragment,null,t,e)))))))},vo=Object(s.kea)({path:["enterprise_search","app_search","crawler","entry_points_table"],actions:()=>({onAdd:(e,t)=>({entryPoint:e,entryPoints:t}),onDelete:(e,t)=>({entryPoint:e,entryPoints:t}),onUpdate:(e,t)=>({entryPoint:e,entryPoints:t})}),listeners:()=>({onAdd:({entryPoints:e})=>{co.actions.updateEntryPoints(e),Object(Q.d)()},onDelete:({entryPoint:e,entryPoints:t})=>{co.actions.updateEntryPoints(t),Object(Q.d)(),Object(Q.g)(`Entry point "${e.value}" was removed.`)},onUpdate:({entryPoints:e})=>{co.actions.updateEntryPoints(e),Object(Q.d)()}})}),wo=({domain:e,indexName:t,items:n})=>{const{onAdd:a,onDelete:r,onUpdate:o}=Object(s.useActions)(vo),c=[{editingRender:(t,n,{isInvalid:a,isLoading:i})=>Object(m.jsx)(v.EuiFieldText,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-entryPoints-editEntryPoint",fullWidth:!0,value:t.value,onChange:e=>n(e.target.value),disabled:i,isInvalid:a,prepend:e.url}),render:t=>Object(m.jsx)(v.EuiText,{size:"s"},e.url,t.value),name:w.i18n.translate("xpack.enterpriseSearch.crawler.entryPointsTable.urlTableHead",{defaultMessage:"URL"}),field:"value"}],l=`/internal/enterprise_search/indices/${t}/crawler/domains/${e.id}/entry_points`,u=n=>`/internal/enterprise_search/indices/${t}/crawler/domains/${e.id}/entry_points/${n.id}`;return Object(m.jsx)(jo.a,{addButtonText:w.i18n.translate("xpack.enterpriseSearch.crawler.entryPointsTable.addButtonLabel",{defaultMessage:"Add entry point"}),columns:c,description:Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.crawler.entryPointsTable.description",{defaultMessage:"Include the most important URLs for your website here. Entry point URLs will be the first pages to be indexed and processed for links to other pages."})," ",Object(m.jsx)(v.EuiLink,{href:D.a.crawlerManaging,target:"_blank",external:!0},w.i18n.translate("xpack.enterpriseSearch.crawler.entryPointsTable.learnMoreLinkText",{defaultMessage:"Learn more about entry points."}))),instanceId:"EntryPointsTable",items:n,lastItemWarning:w.i18n.translate("xpack.enterpriseSearch.crawler.entryPointsTable.lastItemMessage",{defaultMessage:"The crawler requires at least one entry point."}),noItemsMessage:e=>Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiTitle,{size:"m"},Object(m.jsx)("h4",null,w.i18n.translate("xpack.enterpriseSearch.crawler.entryPointsTable.emptyMessageTitle",{defaultMessage:"There are no existing entry points."}))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,null,Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.crawler.entryPointsTable.emptyMessageDescription",defaultMessage:"{link} to specify an entry point for the crawler",values:{link:Object(m.jsx)(v.EuiLink,{onClick:e},w.i18n.translate("xpack.enterpriseSearch.crawler.entryPointsTable.emptyMessageLinkText",{defaultMessage:"Add an entry point"}))}})),Object(m.jsx)(v.EuiSpacer,null)),addRoute:l,canRemoveLastItem:!1,deleteRoute:u,updateRoute:u,dataProperty:"entry_points",onAdd:a,onDelete:r,onUpdate:o,title:w.i18n.translate("xpack.enterpriseSearch.crawler.entryPointsTable.title",{defaultMessage:"Entry points"}),disableReordering:!0})},Io=w.i18n.translate("xpack.enterpriseSearch.crawler.sitemapsTable.addButtonLabel",{defaultMessage:"Add sitemap"}),No=({domain:e,indexName:t,items:n})=>{const{updateSitemaps:a}=Object(s.useActions)(co),r=[{editingRender:(e,t,{isInvalid:n,isLoading:a})=>Object(m.jsx)(v.EuiFieldText,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-siteMaps-editSitemap",fullWidth:!0,value:e.url,onChange:e=>t(e.target.value),disabled:a,isInvalid:n}),render:e=>Object(m.jsx)(v.EuiText,{size:"s"},e.url),name:w.i18n.translate("xpack.enterpriseSearch.crawler.sitemapsTable.urlTableHead",{defaultMessage:"URL"}),field:"url"}],o=`/internal/enterprise_search/indices/${t}/crawler/domains/${e.id}/sitemaps`,c=n=>`/internal/enterprise_search/indices/${t}/crawler/domains/${e.id}/sitemaps/${n.id}`;return Object(m.jsx)(jo.a,{addButtonText:Io,columns:r,description:Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.crawler.sitemapsTable.description",{defaultMessage:"Specify sitemap URLs for the crawler on this domain."})),instanceId:"SitemapsTable",items:n,canRemoveLastItem:!0,noItemsMessage:e=>Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiEmptyPrompt,{title:Object(m.jsx)("h4",null,w.i18n.translate("xpack.enterpriseSearch.crawler.sitemapsTable.emptyMessageTitle",{defaultMessage:"There are no existing sitemaps."})),titleSize:"s",body:Object(m.jsx)(v.EuiText,null,"Add a sitemap to specify an entry point for the crawler."),actions:Object(m.jsx)(v.EuiButton,{onClick:e},Io)})),addRoute:o,deleteRoute:c,updateRoute:c,dataProperty:"sitemaps",onAdd:(e,t)=>{a(t),Object(Q.d)()},onDelete:(e,t)=>{a(t),Object(Q.d)(),Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.crawler.sitemapsTable.deleteSuccessToastMessage",{defaultMessage:"The sitemap has been deleted."}))},onUpdate:(e,t)=>{a(t),Object(Q.d)()},title:w.i18n.translate("xpack.enterpriseSearch.crawler.sitemapsTable.title",{defaultMessage:"Sitemaps"}),disableReordering:!0})},Do=()=>{var e;const{domainId:t}=Object(r.useParams)(),{indexName:n}=Object(s.useValues)(Be),o=co({domainId:t}),{domain:c,getLoading:l}=Object(s.useValues)(o),{fetchDomainData:u}=Object(s.useActions)(o),{showModal:d}=Object(s.useActions)(aa);Object(a.useEffect)((()=>{u(t)}),[t]);const p=null!==(e=null==c?void 0:c.url)&&void 0!==e?e:"...";return Object(m.jsx)(S,{pageChrome:[...ae,n,p],isLoading:l,pageHeader:{pageTitle:p,rightSideItems:[Object(m.jsx)(Xe,null),Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-header-deleteDomain",isLoading:l,color:"danger",onClick:()=>{c&&d(c)}},w.i18n.translate("xpack.enterpriseSearch.crawler.domainDetail.deleteDomainButtonLabel",{defaultMessage:"Delete domain"}))]}},Object(m.jsx)(na,null),Object(m.jsx)(k.b,{"data-telemetry-id":"entSearchContent-crawler-domainDetail-header-allDomains",size:"s",color:"text",iconType:"arrowLeft",to:Object(Z.a)(R.g,{indexName:n,tabId:Bs.DOMAIN_MANAGEMENT})},w.i18n.translate("xpack.enterpriseSearch.crawler.domainDetail.allDomainsButtonLabel",{defaultMessage:"All domains"})),Object(m.jsx)(v.EuiSpacer,null),c&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiPanel,{paddingSize:"l",hasBorder:!0},Object(m.jsx)(wo,{domain:c,indexName:n,items:c.entryPoints})),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(mo,null),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiPanel,{paddingSize:"l",hasBorder:!0},Object(m.jsx)(No,{domain:c,indexName:n,items:c.sitemaps})),Object(m.jsx)(v.EuiSpacer,{size:"xl"}),Object(m.jsx)(v.EuiPanel,{paddingSize:"l",hasBorder:!0},Object(m.jsx)(Oo,{domainId:t,indexName:n,crawlRules:c.crawlRules,defaultCrawlRule:c.defaultCrawlRule})),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(Eo,null)),Object(m.jsx)(ia,null),Object(m.jsx)(Qn,null))};n(523);const To=({documentationUrl:e,name:t,serviceType:n,...a})=>{const i=wt[n];return Object(m.jsx)(v.EuiCheckableCard,M()({},a,{id:`checkableCard-${n}`,className:"connectorCheckable","data-telemetry-id":`entSearchContent-connector-selectConnector-${n}-select`,label:Object(m.jsx)(v.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i&&Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiIcon,{type:i})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},Object(m.jsx)(v.EuiTitle,{size:"xs"},Object(m.jsx)("span",null,t)))),name:t,value:n}),Object(m.jsx)("div",{className:"connectorCheckableContent"},Object(m.jsx)(v.EuiText,{size:"s",color:"subdued"},w.i18n.translate("xpack.enterpriseSearch.content.indices.selectConnector.connectorCheckable.description",{defaultMessage:"Search over your {name} content with Enterprise Search.",values:{name:t}})),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{size:"s",color:"subdued"},w.i18n.translate("xpack.enterpriseSearch.content.indices.selectConnector.connectorCheckable.basicAuthenticationLabel",{defaultMessage:"Basic authentication"})),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiLink,{target:"_blank",href:e},w.i18n.translate("xpack.enterpriseSearch.content.indices.selectConnector.connectorCheckable.documentationLinkLabel",{defaultMessage:"Documentation"}))))},ko=Object(V.a)(["content","service_type_connector_api_logic"],(async({connectorId:e,serviceType:t})=>(await l.a.values.http.put(`/internal/enterprise_search/connectors/${e}/configure_native`,{body:JSON.stringify({service_type:t})}),{connectorId:e}))),Co=Object(s.kea)({actions:{saveNativeConnector:!0,setSelectedConnector:e=>({nativeConnector:e})},connect:{actions:[ko,["apiError","apiSuccess","makeRequest"]],values:[Ve,["indexData as index"]]},events:({actions:e,values:t})=>({afterMount:()=>{if(Object(P.g)(t.index)){const n=t.index.connector.service_type,a=It.find((e=>e.serviceType===n));a&&e.setSelectedConnector(a)}}}),listeners:({actions:e,values:t})=>({apiError:e=>Object(Q.e)(e),apiSuccess:()=>{Ve.actions.makeRequest({indexName:t.index.name})},makeRequest:()=>Object(Q.d)(),saveNativeConnector:()=>{Object(P.g)(t.index)&&null!==t.selectedNativeConnector?e.makeRequest({connectorId:t.index.connector.id,serviceType:t.selectedNativeConnector.serviceType}):u.a.values.navigateToUrl(Object(Z.a)(R.g,{indexName:t.index.name,tabId:"configuration"}))}}),path:["enterprise_search","content","select_connector"],reducers:()=>({selectedNativeConnector:[null,{setSelectedConnector:(e,{nativeConnector:t})=>t}]})}),_o=()=>{const{indexData:e,status:t}=Object(s.useValues)(Ve),{selectedNativeConnector:n}=Object(s.useValues)(Co),{saveNativeConnector:r,setSelectedConnector:o}=Object(s.useActions)(Co),{indexName:c}=Object(s.useValues)(Be);return Object(a.useEffect)((()=>{var t;Object(P.g)(e)&&e.connector.service_type&&(Object(Q.g)(w.i18n.translate("xpack.enterpriseSearch.content.indices.selectConnector.successToast.title",{defaultMessage:"Your index will now use the {connectorName} native connector.",values:{connectorName:null===(t=It.find((t=>t.serviceType===e.connector.service_type)))||void 0===t?void 0:t.name}})),u.a.values.navigateToUrl(Object(Z.a)(R.g,{indexName:c,tabId:"configuration"})))}),[e]),Object(m.jsx)(S,{pageChrome:[...ae,c],pageViewTelemetry:"select_connector",isLoading:t===U.a.IDLE||void 0===e&&t===U.a.LOADING,pageHeader:{pageTitle:c}},Object(m.jsx)("form",{onSubmit:e=>{e.preventDefault(),r()}},Object(m.jsx)(v.EuiFormFieldset,{legend:{children:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(v.EuiTitle,{size:"s"},Object(m.jsx)("span",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.selectConnector.title",{defaultMessage:"Select a connector"}))),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiText,{color:"subdued",size:"s"},Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.indices.selectConnector.description",{defaultMessage:"Get started by selecting the connector you'd like to configure to extract, index and sync data from your data source into your newly created search index."}))))}},Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(v.EuiFlexGroup,{direction:"row"},It.map((e=>Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(To,M()({},e,{onChange:()=>o(e),documentationUrl:e.docsUrl,checked:e===n})))))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiButton,{"data-telemetry-id":"entSearchContent-connector-selectConnector-selectAndConfigure",fill:!0,color:"primary",type:"submit",disabled:null===n},w.i18n.translate("xpack.enterpriseSearch.content.indices.selectConnector.selectAndConfigureButtonLabel",{defaultMessage:"Select and configure"})),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)(I.FormattedMessage,{id:"xpack.enterpriseSearch.content.indices.selectConnector.moreConnectorsMessage",defaultMessage:"Looking for more connectors? {workplaceSearchLink} or {buildYourOwnConnectorLink}.",values:{buildYourOwnConnectorLink:Object(m.jsx)(k.d,{to:`${Object(Z.a)(R.b,{})}?method=connector`},w.i18n.translate("xpack.enterpriseSearch.content.indices.selectConnector.buildYourOwnConnectorLinkLabel",{defaultMessage:"build your own"})),workplaceSearchLink:Object(m.jsx)(v.EuiLink,{target:"_blank",href:D.a.connectorsWorkplaceSearch},w.i18n.translate("xpack.enterpriseSearch.content.indices.selectConnector.workplaceSearchLinkLabel",{defaultMessage:"View additional integrations in Workplace Search"}))}})))))},Ao=()=>{const e=decodeURIComponent(Object(r.useParams)().indexName),t=Be({indexName:e}),{setIndexName:n}=Object(s.useActions)(t),{stopFetchIndexPoll:i}=Object(s.useActions)(rt);return Object(a.useEffect)((()=>{const e=t.mount(),n=rt.mount();return()=>{i(),e(),n()}}),[]),Object(a.useEffect)((()=>{n(e)}),[e]),Object(m.jsx)(r.Switch,null,Object(m.jsx)(r.Route,{path:R.e,exact:!0},Object(m.jsx)(Ys,null)),Object(m.jsx)(r.Route,{path:R.d,exact:!0},Object(m.jsx)(Do,null)),Object(m.jsx)(r.Route,{path:R.f,exact:!0},Object(m.jsx)(_o,null)),Object(m.jsx)(r.Route,{path:R.g},Object(m.jsx)(Ys,null)))},Lo=()=>Object(m.jsx)(r.Switch,null,Object(m.jsx)(r.Route,{exact:!0,path:R.b},Object(m.jsx)(oo,null)),Object(m.jsx)(r.Route,{exact:!0,path:R.h},Object(m.jsx)(ie,null)),Object(m.jsx)(r.Route,{path:R.e},Object(m.jsx)(Ao,null))),zo=({description:e,label:t,link:n,onChange:a,title:i,value:r})=>Object(m.jsx)(v.EuiSplitPanel.Outer,{hasBorder:!0,grow:!0},Object(m.jsx)(v.EuiSplitPanel.Inner,null,Object(m.jsx)(v.EuiText,{size:"m"},Object(m.jsx)("h4",null,Object(m.jsx)("strong",null,i))),Object(m.jsx)(v.EuiSpacer,null),Object(m.jsx)(v.EuiText,{size:"s"},Object(m.jsx)("p",null,e),Object(m.jsx)("p",null,w.i18n.translate("xpack.enterpriseSearch.content.settings.contentExtraction.descriptionTwo",{defaultMessage:"You can also enable or disable this feature for a specific index on the index’s configuration page."})))),Object(m.jsx)(v.EuiSplitPanel.Inner,{grow:!1,color:"subdued"},Object(m.jsx)(v.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(m.jsx)(v.EuiFlexItem,null,Object(m.jsx)(v.EuiSwitch,{checked:r,label:t,onChange:a})),Object(m.jsx)(v.EuiFlexItem,{grow:!1},n)))),Fo=()=>{const{makeRequest:e,setPipeline:t}=Object(s.useActions)(si),{defaultPipeline:n,hasNoChanges:a,isLoading:i,pipelineState:r}=Object(s.useValues)(si),{extract_binary_content:o,reduce_whitespace:c,run_ml_inference:l}=r;return Object(m.jsx)(S,{pageChrome:[w.i18n.translate("xpack.enterpriseSearch.content.settings.breadcrumb",{defaultMessage:"Settings"})],pageHeader:{pageTitle:w.i18n.translate("xpack.enterpriseSearch.content.settings.headerTitle",{defaultMessage:"Content Settings"}),rightSideItems:[Object(m.jsx)(v.EuiButton,{fill:!0,disabled:a,isLoading:i,onClick:()=>e(r)},w.i18n.translate("xpack.enterpriseSearch.content.settings.saveButtonLabel",{defaultMessage:"Save"})),Object(m.jsx)(v.EuiButton,{disabled:a,isLoading:i,onClick:()=>t(n)},w.i18n.translate("xpack.enterpriseSearch.content.settings.resetButtonLabel",{defaultMessage:"Reset"}))]},pageViewTelemetry:"Settings",isLoading:!1},Object(m.jsx)(zo,{description:w.i18n.translate("xpack.enterpriseSearch.content.settings.contentExtraction.description",{defaultMessage:"Allow all ingestion mechanisms on your Enterprise Search deployment to extract searchable content from binary files, like PDFs and Word documents. This setting applies to all new Elasticsearch indices created by an Enterprise Search ingestion mechanism."}),label:w.i18n.translate("xpack.enterpriseSearch.content.settings.contactExtraction.label",{defaultMessage:"Content extraction"}),link:Object(m.jsx)(v.EuiLink,{href:D.a.ingestPipelines,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.settings.contactExtraction.link",{defaultMessage:"Learn more about content extraction"})),onChange:()=>t({...r,extract_binary_content:!r.extract_binary_content}),title:w.i18n.translate("xpack.enterpriseSearch.content.settings.contentExtraction.title",{defaultMessage:"Deployment wide content extraction"}),value:o}),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(zo,{description:w.i18n.translate("xpack.enterpriseSearch.content.settings.whiteSpaceReduction.description",{defaultMessage:"Whitespace reduction will strip your full-text content of whitespace by default."}),label:w.i18n.translate("xpack.enterpriseSearch.content.settings.whitespaceReduction.label",{defaultMessage:"Whitespace reduction"}),link:Object(m.jsx)(v.EuiLink,{href:D.a.ingestPipelines,external:!0},w.i18n.translate("xpack.enterpriseSearch.content.settings.whitespaceReduction.link",{defaultMessage:"Learn more about whitespace reduction"})),onChange:()=>t({...r,reduce_whitespace:!r.reduce_whitespace}),title:w.i18n.translate("xpack.enterpriseSearch.content.settings.whitespaceReduction.deploymentHeaderTitle",{defaultMessage:"Deployment wide whitespace reduction"}),value:c}),Object(m.jsx)(v.EuiSpacer,{size:"s"}),Object(m.jsx)(zo,{description:w.i18n.translate("xpack.enterpriseSearch.content.settings.mlInference.description",{defaultMessage:"ML Inference Pipelines will run as part of your pipelines. You will have to configure processors for each index individually on its pipelines page."}),label:w.i18n.translate("xpack.enterpriseSearch.content.settings.mlInference.label",{defaultMessage:"ML Inference"}),link:Object(m.jsx)(v.EuiLink,{href:D.a.ingestPipelines,target:"_blank"},w.i18n.translate("xpack.enterpriseSearch.content.settings.mlInference.link",{defaultMessage:"Learn more about content extraction"})),onChange:()=>t({...r,run_ml_inference:!r.run_ml_inference}),title:w.i18n.translate("xpack.enterpriseSearch.content.settings.mlInference.deploymentHeaderTitle",{defaultMessage:"Deployment wide ML Inference Pipelines extraction"}),value:l}))},Ro=e=>{const{config:t}=Object(s.useValues)(u.a),{errorConnectingMessage:n}=Object(s.useValues)(l.a),{enterpriseSearchVersion:a,kibanaVersion:i}=e,p=Object(o.a)(a,i);return Object(m.jsx)(r.Switch,null,Object(m.jsx)(r.Route,{exact:!0,path:R.j},Object(m.jsx)(c.a,null)),Object(m.jsx)(r.Route,null,t.host?p?Object(m.jsx)(d.a,{enterpriseSearchVersion:a,kibanaVersion:i}):n?Object(m.jsx)(j,null):Object(m.jsx)(Uo,e):Object(m.jsx)(Po,null)))},Po=()=>Object(m.jsx)(r.Switch,null,Object(m.jsx)(r.Route,null,Object(m.jsx)(r.Redirect,{to:R.j}))),Uo=()=>Object(m.jsx)(r.Switch,null,Object(m.jsx)(r.Redirect,{exact:!0,from:R.c,to:R.h}),Object(m.jsx)(r.Route,{path:R.h},Object(m.jsx)(Lo,null)),Object(m.jsx)(r.Route,{path:R.i},Object(m.jsx)(Fo,null)),Object(m.jsx)(r.Route,null,Object(m.jsx)(E,null)))},89:function(e,t,n){"use strict";var a=n(127),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=d;var r=Object.create(n(113));r.inherits=n(100);var s=n(236),o=n(177);r.inherits(d,s);for(var c=i(o.prototype),l=0;l<c.length;l++){var u=c[l];d.prototype[u]||(d.prototype[u]=o.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||a.nextTick(g,this)}function g(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},97:function(e,t,n){"use strict";let a,i;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),function(e){e.CONNECTOR="connector",e.CRAWLER="crawler",e.API="api"}(a||(a={})),function(e){e[e.CONFIGURED=0]="CONFIGURED",e[e.CONNECTED=1]="CONNECTED",e[e.ERROR=2]="ERROR",e[e.SYNC_ERROR=3]="SYNC_ERROR",e[e.INCOMPLETE=4]="INCOMPLETE"}(i||(i={}))}}]);