/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[12],{225:function(e,s,t){"use strict";t.d(s,"a",(function(){return i}));var a=t(144);function i(e,s,t){const i=[];return s.rows.forEach((e=>{const s=e[t];s&&"__other__"!==s&&!i.includes(s)&&i.push(s)})),Object(a.a)({sampleValues:i},e)}},562:function(e,s,t){"use strict";t.r(s),t.d(s,"ChoroplethChart",(function(){return h}));var a=t(5),i=t.n(a),r=t(1),o=t(41),n=t(0),l=t(225),d=t(3),p=t.n(d),c=t(21),m=t.n(c),u=t(15),b=t(26),_=t(173),L=t(2);class passive_map_PassiveMap extends a.Component{constructor(...e){super(...e),p()(this,"_isMounted",!1),p()(this,"_prevPassiveLayer",this.props.passiveLayer),p()(this,"_embeddableRef",i.a.createRef()),p()(this,"state",{mapEmbeddable:null})}componentDidMount(){this._isMounted=!0,this._setupEmbeddable()}componentWillUnmount(){this._isMounted=!1,this.state.mapEmbeddable&&this.state.mapEmbeddable.destroy()}componentDidUpdate(){this.state.mapEmbeddable&&this._prevPassiveLayer!==this.props.passiveLayer&&(this.state.mapEmbeddable.updateLayerById(this.props.passiveLayer),this._prevPassiveLayer=this.props.passiveLayer)}async _setupEmbeddable(){const e=Object(_.a)(),s=e?[e]:[],t=await this.props.factory.create({id:m()(),attributes:{title:"",layerListJSON:JSON.stringify([...s,this.props.passiveLayer])},filters:[],hidePanelTitles:!0,viewMode:b.ViewMode.VIEW,isLayerTOCOpen:!1,hideFilterActions:!0,mapSettings:{disableInteractive:!1,hideToolbarOverlay:!1,hideLayerControl:!1,hideViewControl:!1,initialLocation:o.INITIAL_LOCATION.AUTO_FIT_TO_BOUNDS,autoFitToDataBounds:!0}});t&&this._isMounted&&this.setState({mapEmbeddable:t},(()=>{this.state.mapEmbeddable&&this._embeddableRef.current&&this.state.mapEmbeddable.render(this._embeddableRef.current)}))}render(){return this.state.mapEmbeddable?Object(L.jsx)("div",{className:"mapEmbeddableContainer",ref:this._embeddableRef}):Object(L.jsx)(u.EuiLoadingChart,{mono:!0,size:"l"})}}function h({data:e,args:s,formatFactory:t,uiSettings:a,emsFileLayers:i,mapEmbeddableFactory:d}){if(!s.regionAccessor||!s.valueAccessor)return null;let p=s.emsLayerId?s.emsLayerId:n.Hb,c=s.emsField?s.emsField:"iso2";if(!s.emsLayerId||!s.emsField){const t=Object(l.a)(i,e,s.regionAccessor);t&&(p=t.layerId,c=t.field)}const m=function(e,s){const t=s.find((s=>s.getId()===e));return t?t.getDisplayName():null}(p,i),u={id:s.layerId,label:m?r.i18n.translate("xpack.maps.lens.choroplethChart.choroplethLayerLabel",{defaultMessage:"{emsLayerLabel} by {accessorLabel}",values:{emsLayerLabel:m,accessorLabel:E(e,s.valueAccessor)}}):"",joins:[{leftField:c,right:{id:s.valueAccessor,type:o.SOURCE_TYPES.TABLE_SOURCE,__rows:e.rows,__columns:[{name:s.regionAccessor,label:E(e,s.regionAccessor),type:"string"},{name:s.valueAccessor,label:E(e,s.valueAccessor),type:"number"}],term:s.regionAccessor}}],sourceDescriptor:{type:o.SOURCE_TYPES.EMS_FILE,id:p,tooltipProperties:[c]},style:{type:"VECTOR",properties:{[o.VECTOR_STYLES.FILL_COLOR]:{type:o.STYLE_TYPE.DYNAMIC,options:{color:"Blue to Red",colorCategory:"palette_0",fieldMetaOptions:{isEnabled:!0,sigma:3},type:o.COLOR_MAP_TYPE.ORDINAL,field:{name:s.valueAccessor,origin:o.FIELD_ORIGIN.JOIN},useCustomColorRamp:!1}},[o.VECTOR_STYLES.LINE_COLOR]:{type:o.STYLE_TYPE.STATIC,options:{color:"#3d3d3d"}},[o.VECTOR_STYLES.LINE_WIDTH]:{type:o.STYLE_TYPE.STATIC,options:{size:1}}},isTimeAware:!1},type:o.LAYER_TYPE.GEOJSON_VECTOR};return Object(L.jsx)(passive_map_PassiveMap,{passiveLayer:u,factory:d})}function E(e,s){const t=e.columns.find((e=>e.id===s));return t?t.name:s}}}]);