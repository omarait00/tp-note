/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[4,1],{125:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(1),a=n(4);function r(){const e=Object(a.k)();return e.isIncludeElasticMapsService()?e.isEMSUrlSet()?e.hasOnPremLicense()?s.i18n.translate("xpack.maps.source.ems.noOnPremConnectionDescription",{defaultMessage:"Cannot connect to {host}.",values:{host:e.getEMSRoot()}}):s.i18n.translate("xpack.maps.source.ems.noOnPremLicenseDescription",{defaultMessage:"An enterprise license is required to connect to local Elastic Maps Server installations."}):s.i18n.translate("xpack.maps.source.ems.noAccessDescription",{defaultMessage:"Kibana is unable to access Elastic Maps Service. Contact your system administrator."}):s.i18n.translate("xpack.maps.source.ems.disabledDescription",{defaultMessage:'Access to Elastic Maps Service has been disabled. Ask your system administrator to set "map.includeElasticMapsService" in kibana.yml.'})}},137:function(e,t,n){"use strict";e.exports=n(214)},138:function(e,t,n){"use strict";e.exports=n(215)},139:function(e,t,n){"use strict";e.exports=n(222)},144:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var s=n(74);async function a(e){try{return r(e,await Object(s.getEmsFileLayers)())}catch(e){return null}}function r(e,t){const n=[];if(e.sampleValuesColumnName){const s=function(e,t,n){const s=[];return e.forEach((e=>{e.getFields().forEach((a=>{if(!a.alias||!a.alias.length)return;const r={layerId:e.getId(),field:a.id,displayName:e.getDisplayName()};a.alias.forEach((e=>{const o=new RegExp(e,"i"),l=!!t.match(o);let c;c=n?!(!a.values||!a.values.length)&&l&&i(n,a.values):l,c&&s.push(r)}))}))})),s}(t,e.sampleValuesColumnName,e.sampleValues);n.push(...s)}if(e.sampleValues&&e.sampleValues.length){const s=function(e,t){const n=[];return e.forEach((e=>{e.getFields().forEach((s=>{s.values&&s.values.length&&i(t,s.values)&&n.push({layerId:e.getId(),field:s.id,displayName:e.getDisplayName()})}))})),n}(t,e.sampleValues);n.push(...s)}const s=n.reduce(((e,t)=>{const n=e.find((e=>e.config.layerId===t.layerId&&e.config.field===t.layerId));return n?n.count+=1:e.push({config:t,count:1}),e}),[]);return s.sort(((e,t)=>t.count-e.count)),s.length?s[0].config:null}function i(e,t){for(let n=0;n<e.length;n++){const s=e[n].toString();if(!t.includes(s))return!1}return!0}},165:function(e,t,n){"use strict";n.d(t,"a",(function(){return EMSFileSelect}));var s=n(3),a=n.n(s),r=n(5),i=n(15),o=n(1),l=n(74),c=n(125),u=n(2);class EMSFileSelect extends r.Component{constructor(...e){super(...e),a()(this,"_isMounted",!1),a()(this,"state",{hasLoadedOptions:!1,emsFileOptions:[]}),a()(this,"_loadFileOptions",(async()=>{let e=[];try{e=await Object(l.getEmsFileLayers)()}catch(e){this._isMounted&&this.setState({hasLoadedOptions:!0,emsFileOptions:[]})}const t=e.map((e=>({value:e.getId(),label:e.getDisplayName()})));this._isMounted&&this.setState({hasLoadedOptions:!0,emsFileOptions:t})})),a()(this,"_onChange",(e=>{0!==e.length&&this.props.onChange(e[0].value)}))}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this._loadFileOptions()}_renderSelect(){if(!this.state.hasLoadedOptions)return Object(u.jsx)(i.EuiSelect,{isLoading:!0});const e=this.state.emsFileOptions.find((e=>e.value===this.props.value));return Object(u.jsx)(i.EuiComboBox,{placeholder:o.i18n.translate("xpack.maps.emsFileSelect.selectPlaceholder",{defaultMessage:"Select EMS boundaries"}),options:this.state.emsFileOptions,selectedOptions:e?[e]:[],onChange:this._onChange,isClearable:!1,singleSelection:!0,isDisabled:0===this.state.emsFileOptions.length,"data-test-subj":"emsVectorComboBox"})}render(){return Object(u.jsx)(i.EuiFormRow,{label:o.i18n.translate("xpack.maps.source.emsFileSelect.selectLabel",{defaultMessage:"EMS boundaries"}),helpText:0===this.state.emsFileOptions.length?Object(c.a)():null,display:this.props.isColumnCompressed?"columnCompressed":"row"},this._renderSelect())}}},214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(53),n(138),n(139);var s=n(223).default({key:"css"}),a=s.flush,r=s.hydrate,i=s.cx,o=s.merge,l=s.getRegisteredStyles,c=s.injectGlobal,u=s.keyframes,d=s.css,f=s.sheet,p=s.cache;t.cache=p,t.css=d,t.cx=i,t.flush=a,t.getRegisteredStyles=l,t.hydrate=r,t.injectGlobal=c,t.keyframes=u,t.merge=o,t.sheet=f},215:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(216),a=n(218),r=n(220);function i(e){return e&&e.__esModule?e:{default:e}}var o=i(s),l=i(a),c=/[A-Z]|^ms/g,u=/_EMO_([^_]+?)_([^]*?)_EMO_/g,d=function(e){return 45===e.charCodeAt(1)},f=function(e){return null!=e&&"boolean"!=typeof e},p=i(r).default((function(e){return d(e)?e:e.replace(c,"-$&").toLowerCase()})),m=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(u,(function(e,t,n){return g={name:t,styles:n,next:g},t}))}return 1===l.default[e]||d(e)||"number"!=typeof t||0===t?t:t+"px"};function h(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return g={name:n.name,styles:n.styles,next:g},n.name;if(void 0!==n.styles){var s=n.next;if(void 0!==s)for(;void 0!==s;)g={name:s.name,styles:s.styles,next:g},s=s.next;return n.styles+";"}return function(e,t,n){var s="";if(Array.isArray(n))for(var a=0;a<n.length;a++)s+=h(e,t,n[a])+";";else for(var r in n){var i=n[r];if("object"!=typeof i)null!=t&&void 0!==t[i]?s+=r+"{"+t[i]+"}":f(i)&&(s+=p(r)+":"+m(r,i)+";");else if(!Array.isArray(i)||"string"!=typeof i[0]||null!=t&&void 0!==t[i[0]]){var o=h(e,t,i);switch(r){case"animation":case"animationName":s+=p(r)+":"+o+";";break;default:s+=r+"{"+o+"}"}}else for(var l=0;l<i.length;l++)f(i[l])&&(s+=p(r)+":"+m(r,i[l])+";")}return s}(e,t,n);case"function":if(void 0!==e){var a=g,r=n(e);return g=a,h(e,t,r)}}if(null==t)return n;var i=t[n];return void 0!==i?i:n}var g,y=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var s=!0,a="";g=void 0;var r=e[0];null==r||void 0===r.raw?(s=!1,a+=h(n,t,r)):a+=r[0];for(var i=1;i<e.length;i++)a+=h(n,t,e[i]),s&&(a+=r[i]);y.lastIndex=0;for(var l,c="";null!==(l=y.exec(a));)c+="-"+l[1];return{name:o.default(a)+c,styles:a,next:g}}},216:function(e,t,n){"use strict";e.exports=n(217)},217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n=0,s=0,a=e.length;a>=4;++s,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(s+2))<<16;case 2:n^=(255&e.charCodeAt(s+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(s)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}},218:function(e,t,n){"use strict";e.exports=n(219)},219:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},220:function(e,t,n){"use strict";e.exports=n(221)},221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="undefined"!=typeof document,a=function(e,t,n){var a=e.key+"-"+t.name;(!1===n||!1===s&&void 0!==e.compat)&&void 0===e.registered[a]&&(e.registered[a]=t.styles)};t.getRegisteredStyles=function(e,t,n){var s="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):s+=n+" "})),s},t.insertStyles=function(e,t,n){a(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i="",o=t;do{var l=e.insert(t===o?"."+r:"",o,e.sheet,!0);s||void 0===l||(i+=l),o=o.next}while(void 0!==o);if(!s&&0!==i.length)return i}},t.registerStyles=a},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(53),a=n(138),r=n(139);function i(e){return e&&e.__esModule?e:{default:e}}var o=i(s);function l(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function c(e,t,n){var s=[],a=r.getRegisteredStyles(e,s,n);return s.length<2?n:a+t(s)}var u=function e(t){for(var n="",s=0;s<t.length;s++){var a=t[s];if(null!=a){var r=void 0;switch(typeof a){case"boolean":break;case"object":if(Array.isArray(a))r=e(a);else for(var i in r="",a)a[i]&&i&&(r&&(r+=" "),r+=i);break;default:r=a}r&&(n&&(n+=" "),n+=r)}}return n};t.default=function(e){var t=o.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var i=a.serializeStyles(n,t.registered,void 0);return r.insertStyles(t,i,!1),t.key+"-"+i.name};return{css:n,cx:function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return c(t.registered,n,u(s))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=a.serializeStyles(n,t.registered);l(t,r)},keyframes:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var r=a.serializeStyles(n,t.registered),i="animation-"+r.name;return l(t,{name:r.name,styles:"@keyframes "+i+"{"+r.styles+"}"}),i},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:r.getRegisteredStyles.bind(null,t.registered),merge:c.bind(null,t.registered,n)}}},225:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(144);function a(e,t,n){const a=[];return t.rows.forEach((e=>{const t=e[n];t&&"__other__"!==t&&!a.includes(t)&&a.push(t)})),Object(s.a)({sampleValues:a},e)}},558:function(e,t,n){"use strict";n.r(t),n.d(t,"getVisualization",(function(){return w}));var s=n(5),a=n.n(s),r=n(1),i=n(47),o=n(9),l=n(16),c=n(67),u=n(29),d=n.n(u),f=n(69),p=n.n(f),m=n(137),h=n(50),g={subdued:Object(m.css)("fill:",h.euiThemeVars.euiTextSubduedColor,";",""),accent:Object(m.css)("fill:",h.euiThemeVars.euiColorVis0,";","")},y=n(2),v=["title","titleId"],b=function(e){var t=e.title,n=e.titleId,s=p()(e,v);return Object(y.jsx)("svg",d()({xmlns:"http://www.w3.org/2000/svg",width:"30",height:"22",viewBox:"0 0 30 22"},s),t?Object(y.jsx)("title",{id:n}):null,Object(y.jsx)("path",{className:g.accent,d:"M.985.001L1.01 0H7c.325 0 .502.078.602.145.105.07.188.17.254.302A1.46 1.46 0 018 1.01v3.982a1.46 1.46 0 01-.144.562.758.758 0 01-.254.302C7.502 5.922 7.325 6 7 6c-.325 0-.502-.078-.602-.145a.758.758 0 01-.254-.302A1.46 1.46 0 016 4.99v-.012a1.984 1.984 0 00-.006-.135 3.457 3.457 0 00-.35-1.29 2.754 2.754 0 00-.933-1.073C4.248 2.172 3.675 2 3 2H1.009a1.46 1.46 0 01-.562-.144.758.758 0 01-.302-.254C.078 1.502 0 1.325 0 1 0 .675.078.498.145.398A.758.758 0 01.447.144 1.46 1.46 0 01.985.001zM0 21v-5.991l.001-.024a1.46 1.46 0 01.143-.538.757.757 0 01.254-.302C.498 14.078.675 14 1 14h8c.675 0 1.248-.172 1.71-.48.458-.305.75-.704.934-1.073A3.453 3.453 0 0012 11.056v-.046l.002-.025a1.464 1.464 0 01.143-.538.758.758 0 01.254-.302c.1-.067.277-.145.602-.145.325 0 .502.078.602.145.105.07.188.17.254.302a1.464 1.464 0 01.143.538l.001.024V21c0 .325-.078.502-.145.602a.758.758 0 01-.302.254 1.464 1.464 0 01-.538.143h-.013L12.99 22H1.009l-.024-.001a1.464 1.464 0 01-.538-.143.758.758 0 01-.302-.254C.078 21.502 0 21.325 0 21zM27.009 14l-.024.001a1.464 1.464 0 00-.538.143.757.757 0 00-.302.255c-.067.099-.145.276-.145.601v1.991l.001.024a1.464 1.464 0 00.143.538.757.757 0 00.254.302c.1.067.277.145.602.145h1.991l.024-.001a1.464 1.464 0 00.538-.143.757.757 0 00.302-.254c.067-.1.145-.277.145-.602v-1.991l-.001-.024a1.464 1.464 0 00-.143-.538.757.757 0 00-.254-.302c-.1-.067-.277-.145-.602-.145h-1.991z"}),Object(y.jsx)("path",{className:g.subdued,d:"M18 3V.981.959a1.424 1.424 0 00-.128-.522.7.7 0 00-.242-.29C17.53.081 17.346 0 17 0h-6c-.325 0-.502.078-.602.145a.758.758 0 00-.254.302 1.464 1.464 0 00-.143.538L10 1.01v4.013a1.984 1.984 0 01-.006.135 3.457 3.457 0 01-.35 1.29 2.754 2.754 0 01-.933 1.073C8.248 7.828 7.675 8 7 8s-1.248-.172-1.711-.48a2.754 2.754 0 01-.933-1.073A3.457 3.457 0 014 5.022V5.01a1.46 1.46 0 00-.144-.563.758.758 0 00-.254-.302C3.502 4.078 3.325 4 3 4H1.009l-.024.001a1.46 1.46 0 00-.538.143.758.758 0 00-.302.254C.078 4.498 0 4.675 0 5v5.991l.001.024a1.46 1.46 0 00.143.538.758.758 0 00.254.303c.1.066.277.144.602.144h8c.325 0 .502-.078.602-.145a.757.757 0 00.254-.302 1.46 1.46 0 00.143-.538L10 10.99v-.025l.001-.02c0-.027.003-.061.005-.102a3.453 3.453 0 01.35-1.29c.184-.369.476-.768.933-1.073C11.752 8.172 12.325 8 13 8s1.248.172 1.71.48c.458.305.75.704.934 1.073A3.453 3.453 0 0116 10.978v4.013l.001.024a1.464 1.464 0 00.143.538.757.757 0 00.254.302c.1.067.277.145.602.145.325 0 .502-.078.602-.145a.758.758 0 00.254-.302 1.464 1.464 0 00.143-.538v-.012l.001-.012V11c0-.675.172-1.248.48-1.711.305-.457.704-.75 1.073-.933A3.456 3.456 0 0120.944 8H20.99l.025-.002a1.46 1.46 0 00.538-.143.758.758 0 00.302-.254c.067-.1.145-.277.145-.602 0-.325-.078-.502-.145-.602a.758.758 0 00-.302-.254 1.46 1.46 0 00-.538-.143h-.017L20.99 6c-.671-.002-1.24-.173-1.702-.48a2.754 2.754 0 01-.933-1.073A3.453 3.453 0 0118 3.022V3z"}),Object(y.jsx)("path",{className:g.subdued,d:"M20 3V1.009l.001-.024a1.464 1.464 0 01.143-.538.758.758 0 01.254-.302C20.498.078 20.675 0 21 0h8c.325 0 .502.078.602.145.105.07.188.17.254.302a1.464 1.464 0 01.143.538L30 1.01V11c0 .325-.078.502-.145.602a.758.758 0 01-.302.254 1.464 1.464 0 01-.538.143H29L28.99 12h-7.982l-.024-.001a1.464 1.464 0 01-.538-.143.758.758 0 01-.302-.254c-.067-.1-.145-.277-.145-.602 0-.325.078-.502.145-.602a.758.758 0 01.302-.254 1.464 1.464 0 01.538-.143L21.01 10h.025l.02-.001c.027 0 .061-.003.102-.005a3.456 3.456 0 001.29-.35 2.755 2.755 0 001.073-.933C23.828 8.248 24 7.675 24 7s-.172-1.248-.48-1.711a2.755 2.755 0 00-1.073-.933A3.456 3.456 0 0021.022 4h-.012a1.46 1.46 0 01-.563-.144.757.757 0 01-.302-.254C20.078 3.502 20 3.325 20 3zM20.998 14l-.013.001a1.464 1.464 0 00-.538.143.757.757 0 00-.302.255c-.067.099-.145.276-.145.601 0 .675-.172 1.248-.48 1.71-.305.458-.704.75-1.073.934a3.453 3.453 0 01-1.425.356h-.012l-.025.001a1.464 1.464 0 00-.538.143.757.757 0 00-.302.254c-.067.1-.145.277-.145.602v1.991l.001.024a1.464 1.464 0 00.143.538.757.757 0 00.254.302c.1.067.277.145.602.145h11.991l.024-.001a1.464 1.464 0 00.538-.143.758.758 0 00.302-.254c.067-.1.145-.277.145-.602 0-.325-.078-.502-.145-.602a.758.758 0 00-.302-.254A1.464 1.464 0 0028.99 20H27c-.675 0-1.248-.172-1.71-.48a2.755 2.755 0 01-.934-1.073A3.453 3.453 0 0124 17.022V15c0-.325-.078-.502-.145-.601a.757.757 0 00-.302-.255A1.464 1.464 0 0022.99 14H20.998z"}))},x=n(28),O=n(225),C=n(15),j=n(165);function S(e){let t;const n=A(e.emsFileLayers,e.state.emsLayerId);if(n.length){let s;e.state.emsField&&(s=n.find((t=>e.state.emsField===t.value))),t=Object(y.jsx)(C.EuiFormRow,{label:r.i18n.translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"}),display:"columnCompressed"},Object(y.jsx)(C.EuiComboBox,{singleSelection:!0,isClearable:!1,options:n,selectedOptions:s?[s]:[],onChange:function(t){0!==t.length&&e.setState({...e.state,emsField:t[0].value})}}))}return Object(y.jsx)(a.a.Fragment,null,Object(y.jsx)(j.a,{isColumnCompressed:!0,value:e.state.emsLayerId?e.state.emsLayerId:null,onChange:function(t){const n=A(e.emsFileLayers,t);e.setState({...e.state,emsLayerId:t,emsField:n.length?n[0].value:void 0})}}),t)}function A(e,t){if(!t)return[];const n=e.find((e=>e.getId()===t));return n?n.getFieldsInLanguage().filter((e=>"id"===e.type)).map((e=>({value:e.name,label:e.description}))):[]}const M="region_key",I="metric",L=r.i18n.translate("xpack.maps.lens.choropleth.label",{defaultMessage:"Region map"}),w=({paletteService:e,theme:t,emsFileLayers:n})=>({id:"lnsChoropleth",visualizationTypes:[{id:"lnsChoropleth",icon:b,label:L,groupLabel:r.i18n.translate("xpack.maps.lens.groupLabel",{defaultMessage:"Map"}),sortPriority:1,showExperimentalBadge:!0}],getVisualizationTypeId:()=>"lnsChoropleth",clearLayer(e){const t={...e};return delete t.emsLayerId,delete t.emsField,delete t.regionAccessor,delete t.valueAccessor,t},getLayerIds:e=>[e.layerId],getDescription:()=>({icon:b,label:L}),getSuggestions:e=>function(e,t){const{activeData:n,keptLayerIds:s,state:a,table:i}=e;if(!n)return[];if(a&&"unchanged"===i.changeType||s.length>1||s.length&&i.layerId!==s[0])return[];const[o,l]=Object(x.partition)(i.columns,(e=>e.operation.isBucketed));if(1!==o.length||1!==l.length)return[];const c=l[0],u=[];return o.filter((e=>"string"===e.operation.dataType)).forEach((e=>{for(const s in n)if(n.hasOwnProperty(s)){const a=Object(O.a)(t,n[s],e.columnId);a&&u.push({title:r.i18n.translate("xpack.maps.lens.choroplethChart.suggestionLabel",{defaultMessage:"{emsLayerLabel} by {metricLabel}",values:{emsLayerLabel:a.displayName,metricLabel:c.operation.label.toLowerCase()}}),score:.7,state:{layerId:s,emsLayerId:a.layerId,emsField:a.field,valueAccessor:c.columnId,regionAccessor:e.columnId},previewIcon:b})}})),u}(e,n),initialize:(e,t)=>t||{layerId:e(),layerType:c.layerTypes.DATA},getConfiguration:({state:e})=>({groups:[{groupId:M,groupLabel:r.i18n.translate("xpack.maps.lens.choroplethChart.regionKeyLabel",{defaultMessage:"Region key"}),layerId:e.layerId,accessors:e.regionAccessor?[{columnId:e.regionAccessor}]:[],supportsMoreColumns:!e.regionAccessor,filterOperations:e=>e.isBucketed&&"string"===e.dataType,enableDimensionEditor:!0,required:!0,dataTestSubj:"lnsChoropleth_regionKeyDimensionPanel"},{groupId:I,groupLabel:r.i18n.translate("xpack.maps.lens.choroplethChart.metricValueLabel",{defaultMessage:"Metric"}),layerId:e.layerId,accessors:e.valueAccessor?[{columnId:e.valueAccessor}]:[],supportsMoreColumns:!e.valueAccessor,filterOperations:e=>!e.isBucketed&&"number"===e.dataType,enableDimensionEditor:!0,required:!0,dataTestSubj:"lnsChoropleth_valueDimensionPanel"}]}),getSupportedLayers:()=>[{type:c.layerTypes.DATA,label:r.i18n.translate("xpack.maps.lens.choroplethChart.addLayer",{defaultMessage:"Add visualization layer"})}],getLayerType(e,t){if((null==t?void 0:t.layerId)===e)return c.layerTypes.DATA},toExpression:(e,t,n,s={})=>{if(!e.regionAccessor||!e.valueAccessor)return null;const a=s[e.layerId];return{type:"expression",chain:[...a?a.chain:[],{type:"function",function:"lens_choropleth_chart",arguments:{title:[(null==n?void 0:n.title)||""],layerId:[e.layerId],emsField:e.emsField?[e.emsField]:[],emsLayerId:e.emsLayerId?[e.emsLayerId]:[],regionAccessor:[e.regionAccessor],valueAccessor:[e.valueAccessor]}}]}},toPreviewExpression:(e,t)=>null,setDimension({columnId:e,groupId:t,prevState:n}){const s={};return t===M?s.regionAccessor=e:t===I&&(s.valueAccessor=e),{...n,...s}},removeDimension({prevState:e,layerId:t,columnId:n}){const s={...e};return e.regionAccessor===n?(delete s.regionAccessor,delete s.emsLayerId,delete s.emsField):e.valueAccessor===n&&delete s.valueAccessor,s},renderDimensionEditor(e,s){s.groupId===M&&Object(o.render)(Object(y.jsx)(l.KibanaThemeProvider,{theme$:t.theme$},Object(y.jsx)(i.I18nProvider,null,Object(y.jsx)(S,{emsFileLayers:n,state:s.state,setState:s.setState}))),e)},getErrorMessages(e){}})},69:function(e,t,n){e.exports=n(30)(6)},74:function(e,t,n){"use strict";n.r(t),n.d(t,"getKibanaTileMap",(function(){return o})),n.d(t,"getEmsFileLayers",(function(){return l})),n.d(t,"getEmsTmsServices",(function(){return c})),n.d(t,"getGlyphUrl",(function(){return p})),n.d(t,"isRetina",(function(){return m})),n.d(t,"makePublicExecutionContext",(function(){return h}));var s=n(0),a=n(4),r=n(22),i=n(28);function o(){return Object(a.P)()}async function l(){return Object(a.k)().isEMSEnabled()?(await f()).getFileLayers():[]}async function c(){return Object(a.k)().isEMSEnabled()?(await f()).getTMSServices():[]}let u,d=null;async function f(){d||(d=new Promise((async(e,t)=>{try{e(await Object(a.A)().createEMSClient())}catch(e){t(e)}})));const e=await d,t=Object(r.c)();return u!==t&&(u=t,e.addQueryParams({license:t||""})),e}function p(){const e=Object(a.k)();return e.isEMSEnabled()?e.getEMSFontLibraryUrl():Object(a.q)().basePath.prepend(`/${s.G}/{fontstack}/{range}`)}function m(){return 2===window.devicePixelRatio}function h(e){const t=Object(a.n)().get(),n=function(e){return Object(i.omitBy)({name:s.e,type:"application",...e},i.isUndefined)}({url:window.location.pathname,description:e});return void 0!==t.name&&t.name!==n.name?{...t,child:n}:{...t,...n}}}}]);