/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[29,40],{125:function(e,s,t){"use strict";t.d(s,"a",(function(){return u})),t.d(s,"b",(function(){return l}));var o=t(90),n=t.n(o),i=t(3);const a=new RegExp(`^([\\d\\.]+)\\s*(${n.a.units.join("|")})$`),l=e=>{if(e){const s=e.match(a);if(s)return{value:Number(s[1]),unit:s[2]}}throw new Error(i.i18n.translate("xpack.triggersActionsUI.parseInterval.errorMessage",{defaultMessage:"{value} is not an interval string",values:{value:e}}))};t(27);const u="/internal/triggers_actions_ui"},92:function(e,s,t){"use strict";t.r(s),t.d(s,"SNOOZE_SUCCESS_MESSAGE",(function(){return g})),t.d(s,"UNSNOOZE_SUCCESS_MESSAGE",(function(){return j})),t.d(s,"SNOOZE_FAILED_MESSAGE",(function(){return f})),t.d(s,"RulesListNotifyBadge",(function(){return z})),t.d(s,"default",(function(){return z}));var o=t(1),n=t(89),i=t.n(n),a=t(4),l=t(3),u=t(143),c=t(127),r=t(22),d=t(13),b=t(0);const g=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeSuccess",{defaultMessage:"Rule successfully snoozed"}),j=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.unsnoozeSuccess",{defaultMessage:"Rule successfully unsnoozed"}),f=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeFailed",{defaultMessage:"Unable to change rule snooze settings"}),O=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.openSnoozePanel",{defaultMessage:"Open snooze panel"}),z=e=>{var s,t;const{isLoading:n=!1,rule:z,isOpen:p,onClick:S,onClose:x,onLoading:y,onRuleChanged:h,snoozeRule:L,unsnoozeRule:E,showOnHover:m=!1,showTooltipInline:M=!1}=e,{isSnoozedUntil:v,muteAll:N,isEditable:I}=z,B=N,{notifications:{toasts:k}}=Object(r.b)().services,A=Object(o.useMemo)((()=>Object(d.c)(z)),[z]),w=Object(o.useMemo)((()=>(e=>{if(!e.snoozeSchedule)return null;const s=e.snoozeSchedule.filter((e=>Boolean(e.id)));return 0===s.length?null:s.reduce(((e,s)=>i()(s.rRule.dtstart).isBefore(i()(e.rRule.dtstart))?s:e))})(z)),[z]),C=Object(o.useMemo)((()=>!A&&Boolean(w)),[w,A]),T=Object(o.useMemo)((()=>v?Object(u.a)(i()(v)):w?Object(u.a)(i()(w.rRule.dtstart)):""),[v,w]),U=Object(o.useMemo)((()=>B?l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedIndefinitelyTooltip",{defaultMessage:"Notifications snoozed indefinitely"}):C?l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozeScheduledTooltip",{defaultMessage:"Notifications scheduled to snooze starting {schedStart}",values:{schedStart:Object(u.b)(i()(w.rRule.dtstart))}}):A?l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedTooltip",{defaultMessage:"Notifications snoozing for {snoozeTime}",values:{snoozeTime:i()(v).fromNow(!0)}}):M?l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.noSnoozeAppliedTooltip",{defaultMessage:"Notify when alerts generated"}):""),[B,C,A,v,w,M]),_=Object(o.useMemo)((()=>Object(b.jsx)(a.EuiButton,{size:"s",isLoading:n,disabled:n||!I,"data-test-subj":"rulesListNotifyBadge-snoozed","aria-label":O,minWidth:85,iconType:"bellSlash",color:"accent",onClick:S},Object(b.jsx)(a.EuiText,{size:"xs"},T))),[T,n,I,S]),R=Object(o.useMemo)((()=>Object(b.jsx)(a.EuiButton,{size:"s",isLoading:n,disabled:n||!I,"data-test-subj":"rulesListNotifyBadge-scheduled",minWidth:85,iconType:"calendar",color:"text","aria-label":O,onClick:S},Object(b.jsx)(a.EuiText,{size:"xs"},T))),[T,n,I,S]),P=Object(o.useMemo)((()=>{const e=m?"ruleSidebarItem__action":"";return Object(b.jsx)(a.EuiButtonIcon,{size:"s",isLoading:n,disabled:n||!I,display:n?"base":"empty","data-test-subj":"rulesListNotifyBadge-unsnoozed","aria-label":O,className:p||n?"":e,iconType:"bell",onClick:S})}),[p,n,I,m,S]),F=Object(o.useMemo)((()=>Object(b.jsx)(a.EuiButtonIcon,{size:"s",isLoading:n,disabled:n||!I,display:"base","data-test-subj":"rulesListNotifyBadge-snoozedIndefinitely","aria-label":O,iconType:"bellSlash",color:"accent",onClick:S})),[n,I,S]),G=Object(o.useMemo)((()=>C?R:B?F:A?_:P),[A,C,B,R,_,F,P]),D=Object(o.useMemo)((()=>p||M?G:Object(b.jsx)(a.EuiToolTip,{content:U},G)),[p,G,U,M]),Z=Object(o.useCallback)((()=>{x()}),[x]),H=Object(o.useCallback)((async e=>{try{y(!0),Z(),await L(e),h(),k.addSuccess(g)}catch(e){k.addDanger(f)}finally{y(!1)}}),[y,L,h,k,Z]),W=Object(o.useCallback)((async e=>{try{y(!0),Z(),await E(e),h(),k.addSuccess(j)}catch(e){k.addDanger(f)}finally{y(!1)}}),[y,E,h,k,Z]),$=Object(b.jsx)(a.EuiPopover,{"data-test-subj":"rulesListNotifyBadge",isOpen:p,closePopover:Z,button:D,anchorPosition:"rightCenter",panelStyle:{maxHeight:"100vh",overflowY:"auto"}},Object(b.jsx)(c.a,{snoozeRule:H,unsnoozeRule:W,interval:Object(c.b)(v),showCancel:A,scheduledSnoozes:null!==(s=z.snoozeSchedule)&&void 0!==s?s:[],activeSnoozes:null!==(t=z.activeSnoozes)&&void 0!==t?t:[],inPopover:!0}));return M?Object(b.jsx)(a.EuiFlexGroup,{alignItems:"center"},Object(b.jsx)(a.EuiFlexItem,{grow:!1},$),Object(b.jsx)(a.EuiFlexItem,null,Object(b.jsx)(a.EuiText,{color:"subdued",size:"xs"},U))):$}}}]);