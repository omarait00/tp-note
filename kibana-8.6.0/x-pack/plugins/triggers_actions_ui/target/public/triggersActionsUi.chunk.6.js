/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[6,50,51,52],{101:function(e,t,s){"use strict";s.r(t),s.d(t,"RuleTagBadge",(function(){return c})),s.d(t,"default",(function(){return c}));var n=s(1),a=s(3),l=s(4),i=s(0);const o=a.i18n.translate("xpack.triggersActionsUI.sections.rules_list.rules_tag_badge.tagTitle",{defaultMessage:"Tag"}),r={width:"300px"},u=e=>`ruleTagBadgeItem-${e}`,c=e=>{const{tagsOutPopover:t=!1,tags:s=[],badgeDataTestSubj:a="ruleTagBadge",titleDataTestSubj:c="ruleTagPopoverTitle",tagItemDataTestSubj:d=u}=e,{isOpen:b,onClose:g,onClick:j}=e,p=Object(n.useMemo)((()=>Object(i.jsx)(l.EuiBadge,{"data-test-subj":a,color:"hollow",iconType:"tag",iconSide:"left",tabIndex:-1,onClick:j,onClickAriaLabel:"Tags",iconOnClick:j,iconOnClickAriaLabel:"Tags"},s.length)),[a,j,s.length]),O=Object(n.useMemo)((()=>s.map(((e,t)=>Object(i.jsx)(l.EuiBadge,{"data-test-subj":d(e),key:t,color:"hollow",iconType:"tag",iconSide:"left"},e)))),[s,d]);return t?Object(i.jsx)(l.EuiFlexGroup,{"data-test-subj":"tagsOutPopover",style:{marginLeft:0},wrap:!0},O):Object(i.jsx)(l.EuiPopover,{button:p,anchorPosition:"upCenter",isOpen:b,closePopover:g},Object(i.jsx)(l.EuiPopoverTitle,{"data-test-subj":c},o),Object(i.jsx)("div",{style:r},O))}},109:function(e,t,s){"use strict";s.r(t),s.d(t,"percentileFields",(function(){return Ke})),s.d(t,"RulesList",(function(){return We})),s.d(t,"default",(function(){return We}));var n=s(3),a=s(89),l=s.n(a),i=s(21),o=s(88),r=s(1),u=s.n(r),c=s(4),d=s(91),b=s(17),g=s(19),j=s(48),p=s(15),O=s(35),m=s(93),x=s.n(m),f=s(18),S=s(122),E=s(2),T=s(0);const h=e=>{const{children:t,numberOfSelectedRules:s=0,canModifySelectedRules:n}=e,[a]=Object(f.useUiSetting$)(E.c),[l,i]=Object(r.useState)(!1),o=Object(r.useMemo)((()=>x()(s).format(a)),[s,a]);return Object(T.jsx)(c.EuiPopover,{isOpen:l,closePopover:()=>i(!1),"data-test-subj":"bulkAction",panelPaddingSize:"s",button:Object(T.jsx)(c.EuiButtonEmpty,{size:"xs",iconSide:"right",iconType:n?"arrowDown":void 0,disabled:!n,"aria-label":S.u,"data-test-subj":"showBulkActionButton",onClick:()=>i(!l)},Object(S.r)(o,s))},t&&u.a.Children.map(t,(e=>u.a.isValidElement(e)?Object(T.jsx)(u.a.Fragment,null,u.a.cloneElement(e,{})):e)))};var I=s(121),y=(s(225),s(22));const k=({showTooltip:e,tooltip:t,children:s})=>e?Object(T.jsx)(c.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(T.jsx)(c.EuiFlexItem,{grow:!1},s),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiIconTip,{position:"right",color:"warning",size:"s",type:"alert",content:t}))):s,A=Object(I.a)((({selectedItems:e,isAllSelected:t=!1,getFilter:s,onPerformingAction:a=R,onActionPerformed:l=R,isDeletingRules:i=!1,isSnoozingRules:d=!1,isUnsnoozingRules:b=!1,isSchedulingRules:g=!1,isUnschedulingRules:j=!1,isUpdatingRuleAPIKeys:p=!1,enableRules:O,disableRules:m,setRulesToDelete:x,setRulesToDeleteFilter:f,setRulesToUpdateAPIKey:S,setRulesToSnooze:E,setRulesToUnsnooze:h,setRulesToSchedule:I,setRulesToUnschedule:A,setRulesToSnoozeFilter:C,setRulesToUnsnoozeFilter:v,setRulesToScheduleFilter:M,setRulesToUnscheduleFilter:F,setRulesToUpdateAPIKeyFilter:w})=>{const{notifications:{toasts:U}}=Object(y.b)().services,[z,_]=Object(r.useState)(!1),[D,P]=Object(r.useState)(!1),B=z||D||i||d||b||g||j||p,N=Object(r.useMemo)((()=>!t&&e.every(L)),[e,t]),G=Object(r.useMemo)((()=>!t&&!!e.find((e=>!e.enabledInLicense))),[e,t]);return Object(T.jsx)(c.EuiFlexGroup,{alignItems:"baseline",direction:"column",gutterSize:"none","data-test-subj":"ruleQuickEditButton"},Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiButtonEmpty,{onClick:async function(){a();try{t?C(s()):E(e)}catch(e){U.addDanger({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToSnoozeRules",{defaultMessage:"Failed to snooze or unsnooze rules"})})}finally{l()}},isLoading:d,isDisabled:B||G,"data-test-subj":"bulkSnooze"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.snoozeAllTitle",defaultMessage:"Snooze now"}))),Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiButtonEmpty,{onClick:async function(){a();try{t?v(s()):h(e)}catch(e){U.addDanger({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToSnoozeRules",{defaultMessage:"Failed to snooze or unsnooze rules"})})}finally{l()}},isLoading:b,isDisabled:B||G,"data-test-subj":"bulkUnsnooze"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.unsnoozeAllTitle",defaultMessage:"Unsnooze now"}))),Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiButtonEmpty,{onClick:async function(){a();try{t?M(s()):I(e)}catch(e){U.addDanger({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToSnoozeRules",{defaultMessage:"Failed to snooze or unsnooze rules"})})}finally{l()}},isLoading:g,isDisabled:B||G,"data-test-subj":"bulkSnoozeSchedule"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.snoozeScheduleAllTitle",defaultMessage:"Schedule snooze"}))),Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiButtonEmpty,{onClick:async function(){a();try{t?F(s()):A(e)}catch(e){U.addDanger({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToSnoozeRules",{defaultMessage:"Failed to snooze or unsnooze rules"})})}finally{l()}},isLoading:j,isDisabled:B||G,"data-test-subj":"bulkRemoveSnoozeSchedule"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.removeSnoozeScheduleAllTitle",defaultMessage:"Unschedule snooze"}))),Object(T.jsx)(k,{showTooltip:t,tooltip:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.enableDisableUnsupported",{defaultMessage:"Bulk enable or disable is unsupported when selecting all rules."})},Object(T.jsx)(u.a.Fragment,null,N&&Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiButtonEmpty,{onClick:async function(){if(!t){a(),_(!0);try{await O(e)}catch(e){U.addDanger({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToEnableRulesMessage",{defaultMessage:"Failed to enable rules"})})}finally{_(!1),l()}}},isLoading:z,isDisabled:B||G||t,"data-test-subj":"enableAll"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.enableAllTitle",defaultMessage:"Enable"}))),!N&&Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiButtonEmpty,{onClick:async function(){if(!t){a(),P(!0);try{await m(e)}catch(e){U.addDanger({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToDisableRulesMessage",{defaultMessage:"Failed to disable rules"})})}finally{P(!1),l()}}},isLoading:D,isDisabled:B||G||t,"data-test-subj":"disableAll"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.disableAllTitle",defaultMessage:"Disable"}))))),Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiButtonEmpty,{onClick:async function(){a();try{t?w(s()):S(e.map((e=>e.id)))}catch(e){U.addDanger({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToUpdateRuleAPIKeysMessage",{defaultMessage:"Failed to update API keys for rules"})})}finally{l()}},isLoading:p,isDisabled:B,"data-test-subj":"updateAPIKeys"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.updateRuleAPIKeysTitle",defaultMessage:"Update API keys"}))),Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiButtonEmpty,{onClick:async function(){a();try{t?f(s()):x(e.map((e=>e.id)))}catch(e){U.addDanger({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToDeleteRulesMessage",{defaultMessage:"Failed to delete rules"})})}finally{l()}},isLoading:i,iconType:"trash",color:"danger",isDisabled:B||G,"data-test-subj":"bulkDelete",className:"actBulkActionPopover__deleteAll"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.deleteAllTitle",defaultMessage:"Delete"}))))}));function L(e){return!1===e.enabled}function R(){}var C=s(105),v=s(13),M=(s(230),s(127)),F=s(92);const w=Object(I.a)((({item:e,onLoading:t,onRuleChanged:s,disableRule:a,enableRule:i,setRulesToDelete:o,onEditRule:u,onUpdateAPIKey:d,snoozeRule:b,unsnoozeRule:g,onRunRule:p,onCloneRule:O})=>{var m,x;const{ruleTypeRegistry:f,notifications:{toasts:S}}=Object(y.b)().services,[E,h]=Object(r.useState)(!1),[I,k]=Object(r.useState)(!e.enabled);Object(r.useEffect)((()=>{k(!e.enabled)}),[e.enabled]);const A=Object(r.useCallback)((()=>{h(!1)}),[h]),L=Object(r.useCallback)((async n=>{try{t(!0),await b(e,n),s(),S.addSuccess(F.SNOOZE_SUCCESS_MESSAGE)}catch(e){S.addDanger(F.SNOOZE_FAILED_MESSAGE)}finally{t(!1),A()}await b(e,n)}),[t,b,e,s,S,A]),R=Object(r.useCallback)((async n=>{try{t(!0),await g(e,n),s(),S.addSuccess(F.UNSNOOZE_SUCCESS_MESSAGE)}catch(e){S.addDanger(F.SNOOZE_FAILED_MESSAGE)}finally{t(!1),A()}}),[t,g,e,s,S,A]),w=!!f.has(e.ruleTypeId)&&!f.get(e.ruleTypeId).requiresAppContext,U=Object(T.jsx)(c.EuiButtonIcon,{disabled:!e.isEditable,"data-test-subj":"selectActionButton","data-testid":"selectActionButton",iconType:"boxesHorizontal",onClick:()=>h(!E),"aria-label":n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.popoverButtonTitle",{defaultMessage:"Actions"})}),z=Object(r.useMemo)((()=>Object(v.c)(e)),[e]),_=Object(r.useMemo)((()=>e.muteAll?n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActions.snoozedIndefinitely",{defaultMessage:"Snoozed indefinitely"}):z?n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActions.snoozedUntil",{defaultMessage:"Snoozed until {snoozeTime}",values:{snoozeTime:l()(e.isSnoozedUntil).format("MMM D")}}):n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActions.snooze",{defaultMessage:"Snooze"})),[z,e]),D=[{id:0,hasFocus:!1,items:[...Object(r.useMemo)((()=>I||e.consumer===j.V.SIEM?[]:[{disabled:!e.isEditable||!e.enabledInLicense,"data-test-subj":"snoozeButton",icon:"bellSlash",name:_,panel:1}]),[I,e,_]),{isSeparator:!0},{disabled:!e.isEditable||!e.enabledInLicense,"data-test-subj":"disableButton",onClick:async()=>{const t=!I;C.asyncScheduler.schedule((async()=>{t?await a({...e,enabled:t}):await i({...e,enabled:t}),s()}),10),k(!I),h(!E)},name:I?n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.enableTitle",{defaultMessage:"Enable"}):n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.disableTitle",{defaultMessage:"Disable"})},{disabled:!e.isEditable||e.consumer===j.V.SIEM,"data-test-subj":"cloneRule",onClick:async()=>{h(!E),O(e.id)},name:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.cloneRuleTitle",{defaultMessage:"Clone rule"})},{disabled:!e.isEditable||!w,"data-test-subj":"editRule",onClick:()=>{h(!E),u(e)},name:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.editTitle",{defaultMessage:"Edit rule"})},{disabled:!e.isEditable,"data-test-subj":"updateApiKey",onClick:()=>{h(!E),d([e.id])},name:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActions.updateApiKey",{defaultMessage:"Update API key"})},{disabled:!e.isEditable,"data-test-subj":"runRule",onClick:()=>{h(!E),p(e)},name:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActions.runRule",{defaultMessage:"Run rule"})},{disabled:!e.isEditable,className:"collapsedItemActions__deleteButton","data-test-subj":"deleteRule",onClick:()=>{h(!E),o([e.id])},name:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.deleteRuleTitle",{defaultMessage:"Delete rule"})}]},{id:1,title:Object(T.jsx)(c.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiIcon,{type:"bellSlash"})),Object(T.jsx)(c.EuiFlexItem,{grow:!1},n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.snoozeActions",{defaultMessage:"Snooze notifications"}))),width:500,content:Object(T.jsx)(c.EuiPanel,null,Object(T.jsx)(M.a,{interval:Object(M.b)(e.isSnoozedUntil),hasTitle:!1,scheduledSnoozes:null!==(m=e.snoozeSchedule)&&void 0!==m?m:[],activeSnoozes:null!==(x=e.activeSnoozes)&&void 0!==x?x:[],showCancel:Object(v.c)(e),snoozeRule:L,unsnoozeRule:R}))}];return Object(T.jsx)(c.EuiPopover,{button:U,isOpen:E,closePopover:()=>h(!1),ownFocus:!0,panelPaddingSize:"none","data-test-subj":"collapsedItemActions"},Object(T.jsx)(c.EuiContextMenu,{initialPanelId:0,panels:D,className:"actCollapsedItemActions","data-test-subj":"collapsedActionPanel","data-testid":"collapsedActionPanel"}))}));var U=s(49);const z=e=>{const{rulesStatuses:t,rulesLastRunOutcomes:s}=e;return Object(U.a)("ruleUseExecutionStatus")?Object(T.jsx)(c.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiHealth,{color:"success","data-test-subj":"totalActiveRulesCount"},Object(S.l)(t.active))),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiHealth,{color:"danger","data-test-subj":"totalErrorRulesCount"},Object(S.m)(t.error))),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiHealth,{color:"warning","data-test-subj":"totalWarningRulesCount"},Object(S.q)(t.warning))),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiHealth,{color:"primary","data-test-subj":"totalOkRulesCount"},Object(S.n)(t.ok))),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiHealth,{color:"accent","data-test-subj":"totalPendingRulesCount"},Object(S.o)(t.pending))),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiHealth,{color:"subdued","data-test-subj":"totalUnknownRulesCount"},Object(S.p)(t.unknown)))):Object(T.jsx)(c.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiHealth,{color:"success","data-test-subj":"totalSucceededRulesCount"},Object(S.i)(s.succeeded))),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiHealth,{color:"danger","data-test-subj":"totalFailedRulesCount"},Object(S.g)(s.failed))),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiHealth,{color:"warning","data-test-subj":"totalWarningRulesCount"},Object(S.k)(s.warning))))},_=({options:e,onChange:t,filters:s})=>{const[n,a]=Object(r.useState)(!1);return Object(T.jsx)(c.EuiPopover,{isOpen:n,closePopover:()=>a(!1),button:Object(T.jsx)(c.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:s.length>0,numActiveFilters:s.length,numFilters:s.length,onClick:()=>a(!n),"data-test-subj":"ruleTypeFilterButton"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.typeFilterLabel",defaultMessage:"Type"}))},Object(T.jsx)("div",{className:"euiFilterSelect__items"},e.map(((e,n)=>Object(T.jsx)(r.Fragment,{key:`group${n}`},Object(T.jsx)(c.EuiTitle,{"data-test-subj":`ruleType${n}Group`,size:"xxs"},Object(T.jsx)("h3",null,e.groupName)),e.subOptions.map(((e,n)=>Object(T.jsx)(c.EuiFilterSelectItem,{key:n,onClick:()=>{const n=s.includes(e.value);t(n?s.filter((t=>t!==e.value)):s.concat(e.value))},checked:s.includes(e.value)?"on":void 0,"data-test-subj":`ruleType${e.value}FilterOption`},e.name))))))))},D=({actionTypes:e,onChange:t,filters:s})=>{const[n,a]=Object(r.useState)(!1),l=Object(r.useCallback)((e=>()=>{const n=s.includes(e.id);t(n?s.filter((t=>t!==e.id)):s.concat(e.id))}),[s,t]);return Object(T.jsx)(c.EuiPopover,{isOpen:n,closePopover:()=>a(!1),button:Object(T.jsx)(c.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:s.length>0,numActiveFilters:s.length,numFilters:s.length,onClick:()=>a(!n),"data-test-subj":"actionTypeFilterButton"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.actionTypeFilterLabel",defaultMessage:"Action type"}))},Object(T.jsx)("div",{className:"euiFilterSelect__items"},e.map((e=>Object(T.jsx)(c.EuiFilterSelectItem,{key:e.id,onClick:l(e),checked:s.includes(e.id)?"on":void 0,"data-test-subj":`actionType${e.id}FilterOption`},e.name)))))};var P=s(51);const B=[...b.RuleExecutionStatusValues].sort(),N=({selectedStatuses:e,onChange:t})=>{const[s,n]=Object(r.useState)(e),[a,l]=Object(r.useState)(!1),i=Object(r.useCallback)((()=>{l((e=>!e))}),[l]),u=Object(r.useCallback)((()=>{l(!1)}),[l]);return Object(r.useEffect)((()=>{t&&t(s)}),[s]),Object(r.useEffect)((()=>{n(e)}),[e]),Object(T.jsx)(c.EuiPopover,{isOpen:a,closePopover:u,button:Object(T.jsx)(c.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:s.length>0,numActiveFilters:s.length,numFilters:s.length,onClick:i,"data-test-subj":"ruleExecutionStatusFilterButton"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.ruleExecutionStatusFilterLabel",defaultMessage:"Last response"}))},Object(T.jsx)("div",{className:"euiFilterSelect__items"},B.map((e=>{const t=Object(P.a)(e);return Object(T.jsx)(c.EuiFilterSelectItem,{key:e,style:{textTransform:"capitalize"},onClick:()=>{const t=s.includes(e);n(t?s.filter((t=>t!==e)):s.concat(e))},checked:s.includes(e)?"on":void 0,"data-test-subj":`ruleExecutionStatus${e}FilterOption`},Object(T.jsx)(c.EuiHealth,{color:t},S.E[e]))}))))},G=[...b.RuleLastRunOutcomeValues].sort(),K=({selectedOutcomes:e,onChange:t})=>{const[s,n]=Object(r.useState)(!1),a=Object(r.useCallback)((()=>{n((e=>!e))}),[n]),l=Object(r.useCallback)((()=>{n(!1)}),[n]),i=Object(r.useCallback)((s=>()=>{e.includes(s)?null==t||t(e.filter((e=>e!==s))):null==t||t(e.concat(s))}),[t,e]);return Object(T.jsx)(c.EuiPopover,{isOpen:s,closePopover:l,button:Object(T.jsx)(c.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:e.length>0,numActiveFilters:e.length,numFilters:e.length,onClick:a,"data-test-subj":"ruleLastRunOutcomeFilterButton"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeFilterLabel",defaultMessage:"Last response"}))},Object(T.jsx)("div",{className:"euiFilterSelect__items"},G.map((t=>{const s=Object(P.b)(t);return Object(T.jsx)(c.EuiFilterSelectItem,{key:t,style:{textTransform:"capitalize"},onClick:i(t),checked:e.includes(t)?"on":void 0,"data-test-subj":`ruleLastRunOutcome${t}FilterOption`},Object(T.jsx)(c.EuiHealth,{color:s},S.D[t]))}))))},$=e=>{const{rulesLastRunOutcomes:t,setRuleExecutionStatusesFilter:s,setRuleLastRunOutcomesFilter:n}=e;return 0===t.failed?null:Object(T.jsx)(u.a.Fragment,null,Object(T.jsx)(c.EuiCallOut,{color:"danger",size:"s","data-test-subj":"rulesErrorBanner"},Object(T.jsx)("p",null,Object(T.jsx)(c.EuiIcon,{color:"danger",type:"alert"})," ",Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.attentionBannerTitle",defaultMessage:"Error found in {totalStatusesError, plural, one {# rule} other {# rules}}.",values:{totalStatusesError:t.failed}})," ",Object(T.jsx)(c.EuiLink,{color:"primary",onClick:()=>{Object(U.a)("ruleUseExecutionStatus")?s(["error"]):n(["failed"])}},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.viewBannerButtonLabel",defaultMessage:"Show {totalStatusesError, plural, one {rule} other {rules}} with error",values:{totalStatusesError:t.failed}})))),Object(T.jsx)(c.EuiSpacer,{size:"s"}))};var W=s(60),H=s(23),q=s(120);const V=({confirmButtonText:e,confirmModalText:t,onCancel:s,onConfirm:n,showWarningText:a,warningText:l})=>Object(T.jsx)(c.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"rulesDeleteConfirmation",title:e,onCancel:s,onConfirm:n,cancelButtonText:S.c,confirmButtonText:e},Object(T.jsx)("p",null,t),a&&Object(T.jsx)(c.EuiCallOut,{title:Object(T.jsx)(u.a.Fragment,null,l),color:"warning",iconType:"alert"})),Y=({onCTAClicked:e,showCreateRuleButton:t=!0})=>Object(T.jsx)(c.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"createFirstRuleEmptyPrompt",title:Object(T.jsx)("h2",null,Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyTitle",defaultMessage:"Create your first rule"})),body:Object(T.jsx)("p",null,Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyDesc",defaultMessage:"Receive an alert through email, Slack, or another connector when a condition is met."})),actions:t&&Object(T.jsx)(c.EuiButton,{"data-test-subj":"createFirstRuleButton",key:"create-action",fill:!0,onClick:e},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyButton",defaultMessage:"Create rule"}))});s(235);var Z=s(61);const Q=({licenseType:e,ruleTypeId:t,onConfirm:s,onCancel:a})=>{const l=Object(i.capitalize)(e);return Object(T.jsx)(c.EuiConfirmModal,{title:n.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseTitle",{defaultMessage:"{licenseRequired} license required",values:{licenseRequired:l}}),onCancel:a,onConfirm:s,confirmButtonText:n.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseConfirmButtonText",{defaultMessage:"Manage license"}),cancelButtonText:n.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseCancelButtonText",{defaultMessage:"Cancel"}),defaultFocusedButton:"confirm","data-test-subj":"manageLicenseModal"},Object(T.jsx)("p",null,Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.manageLicense.manageLicenseMessage",defaultMessage:"Rule type {ruleTypeId} is disabled because it requires a {licenseRequired} license. Continue to License Management to view upgrade options.",values:{ruleTypeId:t,licenseRequired:l}})))};var J=s(131),X=s(98),ee=s(99),te=s(108);const se=({typesFilter:e,actionTypesFilter:t,ruleExecutionStatusesFilter:s,ruleLastRunOutcomesFilter:n,ruleStatusesFilter:a,tagsFilter:l,searchText:i})=>{const o=[];if(e&&e.length&&o.push(te.nodeBuilder.or(e.map((e=>te.nodeBuilder.is("alert.attributes.alertTypeId",e))))),t&&t.length&&o.push(te.nodeBuilder.or(t.map((e=>Object(te.fromKueryExpression)(`alert.attributes.actions:{ actionTypeId: ${e} }`))))),s&&s.length&&o.push(te.nodeBuilder.or(s.map((e=>te.nodeBuilder.is("alert.attributes.executionStatus.status",e))))),n&&n.length&&o.push(te.nodeBuilder.or(n.map((e=>te.nodeBuilder.is("alert.attributes.lastRun.outcome",e))))),a&&a.length){const e=te.nodeBuilder.or([Object(te.fromKueryExpression)("alert.attributes.muteAll: true"),Object(te.fromKueryExpression)("alert.attributes.snoozeSchedule:{ duration > 0 }")]),t=Object(te.fromKueryExpression)("alert.attributes.enabled: true"),s=Object(te.fromKueryExpression)("alert.attributes.enabled: false"),n=[];a.includes("enabled")&&n.push(t),a.includes("disabled")&&n.push(s),a.includes("snoozed")&&n.push(e),o.push(te.nodeBuilder.or(n))}if(l&&l.length&&o.push(te.nodeBuilder.or(l.map((e=>te.nodeBuilder.is("alert.attributes.tags",e))))),i&&""!==i){const e=i.match(/(['"`])(.*?)\1/g)?te.nodeTypes.literal.buildNode(i,!0):te.nodeTypes.wildcard.buildNode(i);o.push(te.nodeBuilder.or([te.nodeBuilder.is("alert.attributes.name",e),te.nodeBuilder.is("alert.attributes.tags",e)]))}return o.length?te.nodeBuilder.and(o):null};var ne,ae=s(72);!function(e){e.SET_RULE_STATE="SET_RULE_STATE",e.SET_LOADING="SET_LOADING",e.SET_INITIAL_LOAD="SET_INITIAL_LOAD",e.SET_NO_DATA="SET_NO_DATA"}(ne||(ne={}));const le={rulesState:{isLoading:!1,data:[],totalItemCount:0},noData:!0,initialLoad:!0},ie=(e,t)=>{const{type:s,payload:n}=t;switch(s){case ne.SET_RULE_STATE:return{...e,rulesState:n};case ne.SET_LOADING:return{...e,rulesState:{...e.rulesState,isLoading:n}};case ne.SET_INITIAL_LOAD:return{...e,initialLoad:n};case ne.SET_NO_DATA:return{...e,noData:n};default:return e}};var oe=s(56);const re=e=>e.reduce(((e,t)=>({...e,[t]:0})),{});var ue=s(129);const ce=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.ruleExecutionPercentileSelectButton",{defaultMessage:"select percentile"}),de={width:200},be=Object(r.memo)((e=>{const{options:t,onOptionsChange:s}=e,[n,a]=Object(r.useState)(!1),l=Object(r.useCallback)((e=>{e.stopPropagation(),a((e=>!e))}),[]),i=Object(r.useCallback)((()=>{a(!1)}),[]),o=Object(r.useCallback)((e=>{i(),s(e)}),[s,i]),u=Object(r.useCallback)((e=>{e.stopPropagation()}),[]);return Object(T.jsx)(c.EuiPopover,{button:Object(T.jsx)(c.EuiButtonIcon,{iconType:"gear",size:"s","data-test-subj":"percentileSelectablePopover-iconButton",title:ce,"aria-label":ce,onClick:l}),panelPaddingSize:"s",isOpen:n,closePopover:i,anchorPosition:"downRight"},Object(T.jsx)("div",{style:de,onClick:u},Object(T.jsx)(c.EuiSelectable,{"data-test-subj":"percentileSelectablePopover-selectable",singleSelection:"always",options:t,onChange:o},(e=>e))))}));var ge=s(160),je=s(155),pe=s(151),Oe=s(101),me=s(97),xe=s(24);const fe=e=>{const{rule:t,onManageLicenseClick:s}=e,{lastRun:n}=t,a=Object(xe.b)(t),l=Object(xe.d)(t),i=Object(xe.e)({rule:t,licenseErrorText:S.a,lastOutcomeTranslations:S.D,executionStatusTranslations:S.E}),r="failed"===(null==n?void 0:n.outcome)?`Error: ${null==n?void 0:n.outcomeMsg}`:null;if(!i)return Object(T.jsx)(c.EuiStat,{titleSize:"xs",title:"--",description:"",isLoading:!(null!=n&&n.outcome||t.nextRun)});const u=Object(T.jsx)(c.EuiHealth,{"data-test-subj":`ruleStatus-${(null==n?void 0:n.outcome)||"pending"}`,color:l||"default"},i),d=r?Object(T.jsx)(c.EuiToolTip,{"data-test-subj":"ruleStatus-error-tooltip",position:"top",content:r},u):u;return Object(T.jsx)(c.EuiFlexGroup,{gutterSize:"none"},Object(T.jsx)(c.EuiFlexItem,null,d),a&&Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiButtonEmpty,{size:"xs","data-test-subj":"ruleStatus-error-license-fix",onClick:()=>s(t)},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.fixLicenseLink",defaultMessage:"Fix"}))))},Se=["ruleName","ruleTags","ruleExecutionStatusLastDate","ruleSnoozeNotify","ruleScheduleInterval","ruleExecutionStatusLastDuration","ruleExecutionPercentile","ruleExecutionSuccessRatio","ruleExecutionStatus","ruleExecutionState"],Ee={[p.j.P50]:"50th",[p.j.P95]:"95th",[p.j.P99]:"99th"},Te={[p.j.P50]:"monitoring.run.calculated_metrics.p50",[p.j.P95]:"monitoring.run.calculated_metrics.p95",[p.j.P99]:"monitoring.run.calculated_metrics.p99"},he={},Ie=()=>{},ye=()=>null;function ke(e){const{rules:t,ruleTypeIndex:s,canExecuteActions:n,config:a}=e,l=a.minimumScheduleInterval?Object(b.parseDuration)(a.minimumScheduleInterval.value):0;return t.map(((e,t)=>{var a,i,o;return{...e,index:t,actionsCount:e.actions.length,ruleType:null!==(a=null===(i=s.get(e.ruleTypeId))||void 0===i?void 0:i.name)&&void 0!==a?a:e.ruleTypeId,isEditable:Object(q.a)(e,s.get(e.ruleTypeId))&&(n||!n&&!e.actions.length),enabledInLicense:!(null===(o=s.get(e.ruleTypeId))||void 0===o||!o.enabledInLicense),showIntervalWarning:Object(b.parseDuration)(e.schedule.interval)<l}}))}const Ae=e=>{const{rulesListKey:t,rulesState:s,items:a=[],ruleTypesState:i,ruleTypeRegistry:o,isLoading:d=!1,sort:g,isPageSelected:O=!1,isAllSelected:m=!1,numberOfSelectedRules:h=0,page:I,percentileOptions:k,itemIdToExpandedRowMap:A=he,config:L=he,onSort:R=Ie,onPage:C=Ie,onRuleClick:v=Ie,onRuleEditClick:M=Ie,onRuleDeleteClick:w=Ie,onManageLicenseClick:z=Ie,onPercentileOptionsChange:_=Ie,onRuleChanged:D,onEnableRule:P=Ie,onDisableRule:B=Ie,onSnoozeRule:N=Ie,onUnsnoozeRule:G=Ie,onSelectAll:K=Ie,onSelectPage:$=Ie,onSelectRow:W=Ie,isRowSelected:H=(()=>!1),renderCollapsedItemActions:q=ye,renderSelectAllDropdown:V,renderRuleError:Y=ye,visibleColumns:Z}=e,[Q,J]=Object(r.useState)(-1),[X,ee]=Object(r.useState)(),[te,se]=Object(r.useState)({}),ne=Object(U.a)("ruleUseExecutionStatus"),[ae]=Object(f.useUiSetting$)(E.c),{euiTheme:le}=Object(c.useEuiTheme)(),ie=Object(r.useMemo)((()=>{const e=k.find((e=>"on"===e.checked));if(e)return p.j[e.key]}),[k]),oe=(e,t)=>{se((s=>({...s,[e]:t})))},re=Object(r.useCallback)((()=>Object(T.jsx)("span",{"data-test-subj":`rulesTable-${ie}ColumnName`},Object(T.jsx)(c.EuiToolTip,{content:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.ruleExecutionPercentileTooltip",{defaultMessage:"{percentileOrdinal} percentile of this rule's past {sampleLimit} run durations (mm:ss).",values:{percentileOrdinal:Ee[ie],sampleLimit:b.MONITORING_HISTORY_LIMIT}})},Object(T.jsx)("span",null,ie," ",Object(T.jsx)(c.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),Object(T.jsx)(be,{options:k,onOptionsChange:_}))),[_,k,ie]),ce=Object(r.useCallback)((e=>Object(T.jsx)("span",{"data-test-subj":`${ie}Percentile`},Object(T.jsx)(ge.a,{allowZero:!1,duration:e}))),[ie]),de=Object(r.useCallback)((e=>!!o.has(e)&&!o.get(e).requiresAppContext),[o]),xe=Object(r.useCallback)(((e,t)=>Object(T.jsx)(me.RuleStatusDropdown,{hideSnoozeOption:!0,disableRule:async()=>await B(t),enableRule:async()=>await P(t),snoozeRule:async()=>{},unsnoozeRule:async()=>{},rule:t,onRuleChanged:D,isEditable:t.isEditable&&de(t.ruleTypeId)})),[de,B,P,D]),ke=Object(r.useMemo)((()=>({id:"ruleSelection",field:"selection",sortable:!1,width:"32px",mobileOptions:{header:!1},name:Object(T.jsx)(c.EuiCheckbox,{id:"rulesListTable_selectAll",checked:O,onChange:$,"data-test-subj":"checkboxSelectAll"}),render:(e,t)=>Object(T.jsx)(c.EuiCheckbox,{id:`ruleListTable_select_${t.id}}`,onChange:()=>W(t),disabled:!t.isEditable,checked:H(t),"data-test-subj":`checkboxSelectRow-${t.id}`})})),[O,$,W,H]),Ae=Object(r.useMemo)((()=>ne?"executionStatus.status":"lastRun.outcome"),[ne]),Le=Object(r.useCallback)((()=>[{id:"ruleName",field:"name",name:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.nameTitle",{defaultMessage:"Name"}),sortable:!0,truncateText:!0,width:"25%","data-test-subj":"rulesTableCell-name",render:(e,t)=>{const s=i.data.get(t.ruleTypeId),n=Object(je.a)(s),a=Object(T.jsx)(u.a.Fragment,null,Object(T.jsx)(c.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiFlexGroup,{gutterSize:"xs"},Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiLink,{title:e,onClick:()=>v(t)},e)),Object(T.jsx)(c.EuiFlexItem,{grow:!1},!n.isEnabled&&Object(T.jsx)(c.EuiIconTip,{anchorClassName:"ruleDisabledQuestionIcon","data-test-subj":"ruleDisabledByLicenseTooltip",type:"questionInCircle",content:n.message,position:"right"})))),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiText,{color:"subdued",size:"xs"},t.ruleType))));return Object(T.jsx)(u.a.Fragment,null,a)}},{id:"ruleTags",field:"tags",selectorName:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selector.tagsTitle",{defaultMessage:"Tags"}),name:"",sortable:!1,width:"50px","data-test-subj":"rulesTableCell-tagsPopover",render:(e,t)=>e.length>0?Object(T.jsx)(Oe.RuleTagBadge,{isOpen:Q===t.index,tags:e,onClick:()=>J(t.index),onClose:()=>J(-1)}):null},{id:"ruleExecutionStatusLastDate",field:"executionStatus.lastExecutionDate",selectorName:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selector.lastRunTitle",{defaultMessage:"Last run"}),name:Object(T.jsx)(c.EuiToolTip,{"data-test-subj":"rulesTableCell-lastExecutionDateTooltip",content:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.lastExecutionDateTitle",{defaultMessage:"Start time of the last run."})},Object(T.jsx)("span",null,"Last run"," ",Object(T.jsx)(c.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:!0,width:"20%","data-test-subj":"rulesTableCell-lastExecutionDate",render:e=>{if(e)return Object(T.jsx)(u.a.Fragment,null,Object(T.jsx)(c.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(T.jsx)(c.EuiFlexItem,{grow:!1},l()(e).format("MMM D, YYYY HH:mm:ssa")),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiText,{color:"subdued",size:"xs"},l()(e).fromNow()))))}},{id:"ruleSnoozeNotify",selectorName:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selector.notifyTitle",{defaultMessage:"Notify"}),name:Object(T.jsx)(c.EuiToolTip,{"data-test-subj":"rulesTableCell-notifyTooltip",content:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.notifyTooltip",{defaultMessage:"Snooze notifications for a rule."})},Object(T.jsx)("span",null,n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.notifyTitle",{defaultMessage:"Notify"})," ",Object(T.jsx)(c.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),width:"14%","data-test-subj":"rulesTableCell-rulesListNotify",render:e=>e.consumer!==j.V.SIEM&&e.enabled?Object(T.jsx)(F.RulesListNotifyBadge,{showOnHover:!0,rule:e,isLoading:!!te[e.id],onLoading:t=>oe(e.id,t),isOpen:X===e.id,onClick:()=>ee(e.id),onClose:()=>ee(""),onRuleChanged:D,snoozeRule:async t=>{await N(e,t)},unsnoozeRule:async t=>await G(e,t)}):null},{id:"ruleScheduleInterval",field:"schedule.interval",width:"6%",name:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.scheduleTitle",{defaultMessage:"Interval"}),sortable:!1,truncateText:!1,"data-test-subj":"rulesTableCell-interval",render:(e,t)=>{const s=Object(b.formatDuration)(e);return Object(T.jsx)(u.a.Fragment,null,Object(T.jsx)(c.EuiFlexGroup,{direction:"row",gutterSize:"xs"},Object(T.jsx)(c.EuiFlexItem,{grow:!1},s),Object(T.jsx)(c.EuiFlexItem,{grow:!1},t.showIntervalWarning&&Object(T.jsx)(c.EuiToolTip,{"data-test-subj":`ruleInterval-config-tooltip-${t.index}`,title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.intervalTooltipTitle",{defaultMessage:"Below configured minimum interval"}),content:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.intervalTooltipText",{defaultMessage:"Rule interval of {interval} is below the minimum configured interval of {minimumInterval}. This may impact alerting performance.",values:{minimumInterval:Object(b.formatDuration)(L.minimumScheduleInterval.value,!0),interval:Object(b.formatDuration)(e,!0)}}),position:"top"},Object(T.jsx)(c.EuiButtonIcon,{color:"text","data-test-subj":`ruleInterval-config-icon-${t.index}`,onClick:()=>M(t),iconType:"flag","aria-label":n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.intervalIconAriaLabel",{defaultMessage:"Below configured minimum interval"})})))))}},{id:"ruleExecutionStatusLastDuration",field:"executionStatus.lastDuration",width:"12%",selectorName:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selector.durationTitle",{defaultMessage:"Duration"}),name:Object(T.jsx)(c.EuiToolTip,{"data-test-subj":"rulesTableCell-durationTooltip",content:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.durationTitle",{defaultMessage:"The length of time it took for the rule to run (mm:ss)."})},Object(T.jsx)("span",null,"Duration"," ",Object(T.jsx)(c.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:!0,truncateText:!1,"data-test-subj":"rulesTableCell-duration",render:(e,t)=>{const s=Object(ue.b)(i.data.get(t.ruleTypeId),e);return Object(T.jsx)(u.a.Fragment,null,Object(T.jsx)(ge.a,{duration:e}),s&&Object(T.jsx)(c.EuiIconTip,{"data-test-subj":"ruleDurationWarning",anchorClassName:"ruleDurationWarningIcon",type:"rule",color:"warning",content:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleTypeExcessDurationMessage",{defaultMessage:"Duration exceeds the rule's expected run time."}),position:"right"}))}},{id:"ruleExecutionPercentile",mobileOptions:{header:!1},selectorName:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selector.percentileTitle",{defaultMessage:"Percentile"}),field:Te[ie],width:"16%",name:re(),"data-test-subj":"rulesTableCell-ruleExecutionPercentile",sortable:!0,truncateText:!1,render:ce},{id:"ruleExecutionSuccessRatio",field:"monitoring.run.calculated_metrics.success_ratio",width:"12%",selectorName:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selector.successRatioTitle",{defaultMessage:"Success ratio"}),name:Object(T.jsx)(c.EuiToolTip,{"data-test-subj":"rulesTableCell-successRatioTooltip",content:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.successRatioTitle",{defaultMessage:"How often this rule runs successfully."})},Object(T.jsx)("span",null,"Success ratio"," ",Object(T.jsx)(c.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:!0,truncateText:!1,"data-test-subj":"rulesTableCell-successRatio",render:e=>Object(T.jsx)("span",{"data-test-subj":"successRatio"},void 0!==e?Object(pe.c)(e):"N/A")},{id:"ruleExecutionStatus",field:Ae,name:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.lastResponseTitle",{defaultMessage:"Last response"}),sortable:!0,truncateText:!1,width:"120px","data-test-subj":"rulesTableCell-lastResponse",render:(e,t)=>Object(T.jsx)(fe,{rule:t,onManageLicenseClick:z})},{id:"ruleExecutionState",field:"enabled",name:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.stateTitle",{defaultMessage:"State"}),sortable:!0,truncateText:!1,width:"10%","data-test-subj":"rulesTableCell-status",render:(e,t)=>xe(t.enabled,t)},{name:"",width:"90px",render:e=>Object(T.jsx)(c.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"none"},Object(T.jsx)(c.EuiFlexItem,{grow:!1,className:"ruleSidebarItem"},Object(T.jsx)(c.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e.isEditable&&de(e.ruleTypeId)?Object(T.jsx)(c.EuiFlexItem,{grow:!1,"data-test-subj":"ruleSidebarEditAction"},Object(T.jsx)(c.EuiButtonIcon,{color:"primary",title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.editButtonTooltip",{defaultMessage:"Edit"}),className:"ruleSidebarItem__action","data-test-subj":"editActionHoverButton",onClick:()=>M(e),iconType:"pencil","aria-label":n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.editAriaLabel",{defaultMessage:"Edit"})})):null,e.isEditable?Object(T.jsx)(c.EuiFlexItem,{grow:!1,"data-test-subj":"ruleSidebarDeleteAction"},Object(T.jsx)(c.EuiButtonIcon,{color:"danger",title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.deleteButtonTooltip",{defaultMessage:"Delete"}),className:"ruleSidebarItem__action","data-test-subj":"deleteActionHoverButton",onClick:()=>w(e),iconType:"trash","aria-label":n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.deleteAriaLabel",{defaultMessage:"Delete"})})):null)),Object(T.jsx)(c.EuiFlexItem,{grow:!1},q(e,(t=>oe(e.id,t)))))},{align:c.RIGHT_ALIGNMENT,width:"40px",isExpander:!0,name:Object(T.jsx)(c.EuiScreenReaderOnly,null,Object(T.jsx)("span",null,"Expand rows")),render:Y}]),[L.minimumScheduleInterval,X,te,de,D,v,w,M,N,G,z,q,ce,re,Y,xe,i.data,ie,Q,Ae]),Re=Object(r.useMemo)((()=>Le()),[Le]),[Ce,ve]=(({allRuleColumns:e,rulesListKey:t="triggersActionsUi_rulesListColumns",visibleColumns:s=Se})=>{const{storage:n}=Object(y.b)().services,a=null==n?void 0:n.get(t),[l,i]=Object(r.useState)(null!=a?a:s),o=Object(r.useMemo)((()=>e.filter((e=>null!=e.id))),[e]),u=Object(r.useMemo)((()=>e.filter((e=>void 0===e.id))),[e]),d=Object(r.useMemo)((()=>{const e=l.map((e=>{var t;const{id:s="",selectorName:n="",...a}=null!==(t=o.find((t=>t.id===e)))&&void 0!==t?t:{};return a}));return e.push(...u),e}),[o,l,u]),b=Object(r.useMemo)((()=>o.map((e=>({id:e.id})))),[o]),g=Object(r.useCallback)((e=>{t&&(null==n||n.set(t,e))}),[t,n]),j=Object(r.useMemo)((()=>({visibleColumns:l,setVisibleColumns:e=>{g(e),i(e)}})),[l,g]),p=Object(r.useMemo)((()=>e.filter((e=>null!=e.id)).reduce(((e,{id:t,name:s,selectorName:n})=>t?{...e,[t]:null!=n?n:s}:e),{})),[e]),[O]=Object(c.useDataGridColumnSelector)(b,j,!0,p);return Object(r.useMemo)((()=>[d,O]),[O,d])})({allRuleColumns:Re,rulesListKey:t,visibleColumns:Z}),Me=Object(r.useMemo)((()=>x()(s.totalItemCount).format(ae)),[s.totalItemCount,ae]),Fe=Object(r.useMemo)((()=>m?S.d:Object(S.t)(Me,s.totalItemCount)),[m,Me,s.totalItemCount]),we=Object(r.useCallback)((e=>{var t;const s=H(e)?"euiTableRow-isSelected":"";return{"data-test-subj":"rule-row",className:null!==(t=i.data.get(e.ruleTypeId))&&void 0!==t&&t.enabledInLicense?s:`actRulesList__tableRowDisabled ${s}`}}),[i,H]),Ue=Object(r.useMemo)((()=>{let e=!0;return i.data.forEach((t=>{e&&(Object.values(t.authorizedConsumers).every((e=>e.all))||(e=!1))})),e}),[i]);return Object(T.jsx)(c.EuiFlexGroup,{gutterSize:"none",direction:"column"},Object(T.jsx)(c.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(T.jsx)(c.EuiFlexItem,{grow:!1},ve),Object(T.jsx)(c.EuiFlexItem,{grow:!1},h>0?null==V?void 0:V():Object(T.jsx)(c.EuiText,{size:"xs",style:{fontWeight:le.font.weight.semiBold},"data-test-subj":"totalRulesCount"},Object(S.w)(Me,s.totalItemCount))),Object(T.jsx)(c.EuiFlexItem,{grow:!1},h>0&&Ue&&Object(T.jsx)(c.EuiButtonEmpty,{size:"xs","aria-label":S.s,"data-test-subj":"selectAllRulesButton",iconType:m?"cross":"pagesSelect",onClick:K},Fe))),Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiBasicTable,{loading:d,items:a,itemId:"id",columns:[ke,...Ce],sorting:{sort:g},rowProps:we,cellProps:e=>{var t;return{"data-test-subj":"cell",className:null!==(t=i.data.get(e.ruleTypeId))&&void 0!==t&&t.enabledInLicense?"":"actRulesList__tableCellDisabled"}},"data-test-subj":"rulesList",pagination:{pageIndex:I.index,pageSize:I.size,totalItemCount:!1===i.isInitialized?0:s.totalItemCount},onChange:({page:e,sort:t})=>{e&&C(e),t&&R(t)},itemIdToExpandedRowMap:A,isExpandable:!0})))},Le={marginLeft:"auto"},Re=e=>l()(e).isValid()?n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListAutoRefresh.lastUpdateText",{defaultMessage:"Updated {lastUpdateText}",values:{lastUpdateText:l()(e).fromNow()}}):"",Ce=3e5,ve=e=>{const{lastUpdate:t,initialUpdateInterval:s=Ce,onRefresh:n}=e,[a,l]=Object(r.useState)(!1),[i,o]=Object(r.useState)(Math.max(s,1e3)),[u,d]=Object(r.useState)(""),b=Object(r.useRef)((()=>{})),g=Object(r.useRef)(),j=Object(r.useRef)();Object(r.useEffect)((()=>{b.current=n}),[n]),Object(r.useEffect)((()=>{d(Re(t));const e=()=>{g.current=window.setTimeout((()=>{d(Re(t)),e()}),6e4)};return e(),()=>{g.current&&clearTimeout(g.current)}}),[t,d]),Object(r.useEffect)((()=>{if(a)return;const e=()=>{j.current=window.setTimeout((()=>{b.current(),e()}),i)};return e(),()=>{j.current&&clearTimeout(j.current)}}),[a,i]);const p=Object(r.useCallback)((({isPaused:e,refreshInterval:t})=>{l(e),o(t)}),[l,o]);return Object(T.jsx)(c.EuiFlexGroup,{"data-test-subj":"rulesListAutoRefresh",alignItems:"center"},Object(T.jsx)(c.EuiFlexItem,{grow:!1,style:Le},Object(T.jsx)(c.EuiText,{"data-test-subj":"rulesListAutoRefresh-lastUpdateText",size:"s",color:"subdued"},u)),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiAutoRefreshButton,{isPaused:a,shortHand:!0,refreshInterval:i,onRefreshChange:p})))};var Me=s(161),Fe=s(144);const we=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkSnoozeFailMessage",{defaultMessage:"Failed to bulk snooze rules"}),Ue=Object(I.a)((e=>{const{rulesToSnooze:t,rulesToUnsnooze:s,rulesToSnoozeFilter:a,rulesToUnsnoozeFilter:l,numberOfSelectedRules:i=0,onClose:u,onSave:d,setIsSnoozingRule:b,setIsUnsnoozingRule:g,onSearchPopulate:j,bulkSnoozeRules:p,bulkUnsnoozeRules:O}=e,{notifications:{toasts:m}}=Object(y.b)().services,{showToast:x}=Object(Fe.a)({onSearchPopulate:j}),f=Object(r.useMemo)((()=>void 0!==a||t.length>0),[t,a]),S=Object(r.useMemo)((()=>void 0!==l||s.length>0),[s,l]),E=Object(r.useMemo)((()=>{if(a)return;const e=t.find((e=>e.isSnoozedUntil));return e?Object(M.b)(e.isSnoozedUntil):void 0}),[t,a]),h=async()=>{u(),g(!0);try{const e=await O({ids:s.map((e=>e.id)),filter:l});x(e,"snooze")}catch(e){m.addError(e,{title:we})}g(!1),d()},I=Object(r.useMemo)((()=>{return!l&&1===i&&s[0]?(e=s[0].name,n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkUnsnoozeConfirmationSingle",{defaultMessage:"Unsnooze {ruleName}?",values:{ruleName:e}})):(t=i,n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkUnsnoozeConfirmationPlural",{defaultMessage:"Unsnooze {total, plural, one {# rule} other {# rules}}? ",values:{total:t}}));var e,t}),[s,l,i]);return S?Object(T.jsx)(c.EuiConfirmModal,{title:I,onCancel:u,onConfirm:h,confirmButtonText:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkUnsnoozeConfirmButton",{defaultMessage:"Unsnooze"}),cancelButtonText:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkUnsnoozeCancelButton",{defaultMessage:"Cancel"}),buttonColor:"danger",defaultFocusedButton:"confirm","data-test-subj":"bulkUnsnoozeConfirmationModal"}):f?Object(T.jsx)(c.EuiModal,{onClose:u},Object(T.jsx)(c.EuiModalHeader,null,Object(T.jsx)(c.EuiModalHeaderTitle,null,Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkSnoozeModal.modalTitle",defaultMessage:"Add snooze now"}),Object(T.jsx)(c.EuiSpacer,{size:"s"}))),Object(T.jsx)(c.EuiModalBody,null,Object(T.jsx)(M.a,{hasTitle:!1,showCancel:!1,showAddSchedule:!1,interval:E,snoozeRule:async e=>{u(),b(!0);try{const s=await p({ids:t.map((e=>e.id)),filter:a,snoozeSchedule:e});x(s,"snooze")}catch(e){m.addError(e,{title:we})}b(!1),d()},unsnoozeRule:h,scheduledSnoozes:[],activeSnoozes:[]})),Object(T.jsx)(c.EuiModalFooter,null,Object(T.jsx)(c.EuiButtonEmpty,{onClick:u},"Close"))):null}));var ze=s(178);const _e=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkSnoozeScheduleFailMessage",{defaultMessage:"Failed to bulk snooze rules"}),De=Object(I.a)((e=>{const{rulesToSchedule:t,rulesToUnschedule:s,rulesToScheduleFilter:a,rulesToUnscheduleFilter:l,numberOfSelectedRules:i=0,onClose:u,onSave:d,bulkSnoozeRules:b,bulkUnsnoozeRules:g,setIsSchedulingRule:j,setIsUnschedulingRule:p,onSearchPopulate:O}=e,{notifications:{toasts:m}}=Object(y.b)().services,{showToast:x}=Object(Fe.a)({onSearchPopulate:O}),f=Object(r.useMemo)((()=>void 0!==a||t.length>0),[t,a]),S=Object(r.useMemo)((()=>void 0!==l||s.length>0),[s,l]),E=async()=>{u(),p(!0);try{const e=await g({ids:s.map((e=>e.id)),filter:l,scheduleIds:[]});x(e,"snoozeSchedule")}catch(e){m.addError(e,{title:_e})}p(!1),d()},h=Object(r.useMemo)((()=>{return!a&&1===i&&t[0]?(e=t[0].name,n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkDeleteConfirmationSingle",{defaultMessage:"Delete all snooze schedules for {ruleName}?",values:{ruleName:e}})):(s=i,n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkDeleteConfirmationPlural",{defaultMessage:"Delete all snooze schedules for {total, plural, one {# rule} other {# rules}}? ",values:{total:s}}));var e,s}),[t,a,i]);return S?Object(T.jsx)(c.EuiConfirmModal,{title:h,onCancel:u,onConfirm:E,confirmButtonText:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkDeleteConfirmButton",{defaultMessage:"Delete"}),cancelButtonText:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkDeleteCancelButton",{defaultMessage:"Cancel"}),buttonColor:"danger",defaultFocusedButton:"confirm","data-test-subj":"bulkRemoveScheduleConfirmationModal"}):f?Object(T.jsx)(c.EuiModal,{onClose:u},Object(T.jsx)(c.EuiModalHeader,null,Object(T.jsx)(c.EuiModalHeaderTitle,null,Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkSnoozeScheduleModal.modalTitle",defaultMessage:"Add snooze schedule"}),Object(T.jsx)(c.EuiSpacer,{size:"s"}))),Object(T.jsx)(c.EuiModalBody,null,Object(T.jsx)(ze.a,{bulkSnoozeSchedule:!0,hasTitle:!1,isLoading:!1,initialSchedule:null,onSaveSchedule:async e=>{u(),j(!0);try{const s=await b({ids:t.map((e=>e.id)),filter:a,snoozeSchedule:e});x(s,"snoozeSchedule")}catch(e){m.addError(e,{title:_e})}j(!1),d()},onCancelSchedules:E,onClose:()=>{}})),Object(T.jsx)(c.EuiModalFooter,null,Object(T.jsx)(c.EuiButtonEmpty,{onClick:u},"Close"))):null}));var Pe;!function(e){e.TOGGLE_SELECT_ALL="TOGGLE_SELECT_ALL",e.TOGGLE_ROW="TOGGLE_ROW",e.SET_SELECTION="SET_SELECTION",e.CLEAR_SELECTION="CLEAR_SELECTION"}(Pe||(Pe={}));const Be={selectedIds:new Set,isAllSelected:!1},Ne=(e,t)=>{const{type:s,payload:n}=t;switch(s){case Pe.TOGGLE_SELECT_ALL:return{...e,isAllSelected:!e.isAllSelected,selectedIds:new Set};case Pe.TOGGLE_ROW:{const t=n;return e.selectedIds.has(t)?e.selectedIds.delete(t):e.selectedIds.add(t),{...e,selectedIds:new Set(e.selectedIds)}}case Pe.SET_SELECTION:{const t=n;return{...e,selectedIds:new Set(t)}}case Pe.CLEAR_SELECTION:return{...Be,selectedIds:new Set};default:return e}};var Ge=s(162);const Ke={[p.j.P50]:"monitoring.run.calculated_metrics.p50",[p.j.P95]:"monitoring.run.calculated_metrics.p95",[p.j.P99]:"monitoring.run.calculated_metrics.p99"},$e=Object.values(p.j).map((e=>({checked:e===p.j.P50?"on":void 0,label:e,key:e}))),We=({filteredRuleTypes:e=[],showActionFilter:t=!0,ruleDetailsRoute:s,showCreateRuleButton:a=!0,statusFilter:p,onStatusFilterChange:m,lastResponseFilter:x,onLastResponseFilterChange:I,lastRunOutcomeFilter:k,onLastRunOutcomeFilterChange:L,refresh:R,rulesListKey:C,visibleColumns:v})=>{const M=Object(d.useHistory)(),{http:F,notifications:{toasts:P},application:{capabilities:B},ruleTypeRegistry:G,actionTypeRegistry:ue,kibanaFeatures:ce}=Object(y.b)().services,de=Object(q.c)(B),[be,ge]=Object(r.useState)({isUsingSecurity:!1}),[je,pe]=Object(r.useState)([]),[Oe,me]=Object(r.useState)(!1),[xe,fe]=Object(r.useState)({index:0,size:E.e}),[Se,Ee]=Object(r.useState)(),[Te,he]=Object(r.useState)(),[Ie,ye]=Object(r.useState)([]),[Le,Re]=Object(r.useState)([]),[Ce,Fe]=Object(r.useState)(x||[]),[we,ze]=Object(r.useState)(k||[]),[_e,Ke]=Object(r.useState)(p||[]),[We,Ve]=Object(r.useState)([]),[Ye,Ze]=Object(r.useState)(!1),[Qe,Je]=Object(r.useState)(!1),[Xe,et]=Object(r.useState)(null),[tt,st]=Object(r.useState)({}),[nt,at]=Object(r.useState)(!1),[lt,it]=Object(r.useState)(""),ot=Object(U.a)("ruleTagFilter"),rt=Object(U.a)("ruleStatusFilter"),ut=Object(U.a)("ruleUseExecutionStatus"),ct=Object(r.useRef)(null);Object(r.useEffect)((()=>{(async()=>{ge(await Object(J.a)({http:F}))})()}),[F]);const[dt,bt]=Object(r.useState)($e),[gt,jt]=Object(r.useState)({field:"name",direction:"asc"}),[pt,Ot]=Object(r.useState)(null),[mt,xt]=Object(r.useState)({isLoading:!1,isInitialized:!1,data:new Map}),[ft,St]=Object(r.useState)([]),[Et,Tt]=Object(r.useState)(),[ht,It]=Object(r.useState)(!1),[yt,kt]=Object(r.useState)([]),[At,Lt]=Object(r.useState)(),[Rt,Ct]=Object(r.useState)([]),[vt,Mt]=Object(r.useState)(),[Ft,wt]=Object(r.useState)([]),[Ut,zt]=Object(r.useState)(),[_t,Dt]=Object(r.useState)([]),[Pt,Bt]=Object(r.useState)(),[Nt,Gt]=Object(r.useState)([]),[Kt,$t]=Object(r.useState)(),[Wt,Ht]=Object(r.useState)(!1),[qt,Vt]=Object(r.useState)(!1),[Yt,Zt]=Object(r.useState)(!1),[Qt,Jt]=Object(r.useState)(!1),[Xt,es]=Object(r.useState)(!1),[ts,ss]=Object(r.useState)(!1),ns=Object(r.useMemo)((()=>mt.isInitialized&&mt.data.size>0),[mt]),as=Object(r.useCallback)((e=>{P.addDanger(e)}),[P]),ls=Object(r.useMemo)((()=>[...mt.data.values()]),[mt]),is=ls.some((e=>{var t;return null===(t=e.authorizedConsumers[b.ALERTS_FEATURE_ID])||void 0===t?void 0:t.all})),[os,rs]=Object(r.useMemo)((()=>Object(i.isEmpty)(Ie)?[ls.map((e=>e.id)),!0]:[Ie,!1]),[Ie,ls]),{rulesState:us,setRulesState:cs,loadRules:ds,noData:bs,initialLoad:gs}=function({page:e,searchText:t,typesFilter:s,actionTypesFilter:a,ruleExecutionStatusesFilter:l,ruleLastRunOutcomesFilter:o,ruleStatusesFilter:u,tagsFilter:c,sort:d,onPage:b,onError:g,hasDefaultRuleTypesFiltersOn:j=!1}){const{http:p}=Object(y.b)().services,[O,m]=Object(r.useReducer)(ie,le),x=Object(r.useCallback)((e=>{m({type:ne.SET_RULE_STATE,payload:e})}),[m]),f=Object(r.useCallback)((async()=>{m({type:ne.SET_LOADING,payload:!0});try{var r;const n=await async function({http:e,page:t,searchText:s,typesFilter:n,actionTypesFilter:a,ruleExecutionStatusesFilter:l,ruleLastRunOutcomesFilter:i,ruleStatusesFilter:o,tagsFilter:r,sort:u={field:"name",direction:"asc"}}){const c=se({typesFilter:n,actionTypesFilter:a,tagsFilter:r,ruleExecutionStatusesFilter:l,ruleLastRunOutcomesFilter:i,ruleStatusesFilter:o,searchText:s}),d=await e.get(`${E.g}/rules/_find`,{query:{page:t.index+1,per_page:t.size,...c?{filter:JSON.stringify(c)}:{},sort_field:u.field,sort_order:u.direction}});return{page:d.page,perPage:d.per_page,total:d.total,data:Object(ae.a)(d.data)}}({http:p,page:e,searchText:t,typesFilter:s,actionTypesFilter:a,ruleExecutionStatusesFilter:l,ruleLastRunOutcomesFilter:o,ruleStatusesFilter:u,tagsFilter:c,sort:d});m({type:ne.SET_RULE_STATE,payload:{isLoading:!1,data:n.data,totalItemCount:n.total}}),(null===(r=n.data)||void 0===r||!r.length)&&e.index>0&&b({...e,index:0});const g=!!j||Object(i.isEmpty)(s),O=!(Object(i.isEmpty)(t)&&g&&Object(i.isEmpty)(a)&&Object(i.isEmpty)(l)&&Object(i.isEmpty)(o)&&Object(i.isEmpty)(u)&&Object(i.isEmpty)(c));m({type:ne.SET_NO_DATA,payload:0===n.data.length&&!O})}catch(e){g(n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadRulesMessage",{defaultMessage:"Unable to load rules"})),m({type:ne.SET_LOADING,payload:!1})}m({type:ne.SET_INITIAL_LOAD,payload:!1})}),[p,e,t,s,a,l,o,u,c,d,j,b,g]);return Object(r.useMemo)((()=>({rulesState:O.rulesState,noData:O.noData,initialLoad:O.initialLoad,loadRules:f,setRulesState:x})),[O,x,f])}({page:xe,searchText:Se,typesFilter:os,actionTypesFilter:Le,ruleExecutionStatusesFilter:Ce,ruleLastRunOutcomesFilter:we,ruleStatusesFilter:_e,tagsFilter:We,sort:gt,onPage:fe,onError:as,hasDefaultRuleTypesFiltersOn:rs}),{tags:js,loadTags:ps}=function(e){const{onError:t}=e,{http:s}=Object(y.b)().services,[a,l]=Object(r.useState)([]),i=Object(r.useCallback)((async()=>{try{const e=await Object(W.u)({http:s});null!=e&&e.ruleTags&&l(e.ruleTags)}catch(e){t(n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadRuleTags",{defaultMessage:"Unable to load rule tags"}))}}),[s,l,t]);return Object(r.useMemo)((()=>({tags:a,loadTags:i,setTags:l})),[a,i,l])}({onError:as}),{loadRuleAggregations:Os,rulesStatusesTotal:ms,rulesLastRunOutcomesTotal:xs}=function({searchText:e,typesFilter:t,actionTypesFilter:s,ruleExecutionStatusesFilter:a,ruleLastRunOutcomesFilter:l,ruleStatusesFilter:i,tagsFilter:o,onError:u}){const{http:c}=Object(y.b)().services,[d,g]=Object(r.useState)(re(b.RuleExecutionStatusValues)),[j,p]=Object(r.useState)(re(b.RuleLastRunOutcomeValues)),O=Object(r.useCallback)((async()=>{try{const n=await async function({http:e,searchText:t,typesFilter:s,actionTypesFilter:n,ruleExecutionStatusesFilter:a,ruleStatusesFilter:l,tagsFilter:i}){const o=se({typesFilter:s,actionTypesFilter:n,tagsFilter:i,ruleExecutionStatusesFilter:a,ruleStatusesFilter:l,searchText:t}),r=await e.get(`${E.g}/rules/_aggregate`,{query:{...o?{filter:JSON.stringify(o)}:{},default_search_operator:"AND"}});return Object(oe.a)(r)}({http:c,searchText:e,typesFilter:t,actionTypesFilter:s,ruleExecutionStatusesFilter:a,ruleLastRunOutcomesFilter:l,ruleStatusesFilter:i,tagsFilter:o});null!=n&&n.ruleExecutionStatus&&g(n.ruleExecutionStatus),null!=n&&n.ruleLastRunOutcome&&p(n.ruleLastRunOutcome)}catch(e){u(n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadRuleStatusInfoMessage",{defaultMessage:"Unable to load rule status info"}))}}),[c,e,t,s,a,l,i,o,u,g,p]);return Object(r.useMemo)((()=>({loadRuleAggregations:O,rulesStatusesTotal:d,rulesLastRunOutcomesTotal:j,setRulesStatusesTotal:g,setRulesLastRunOutcomesTotal:p})),[O,d,j,g,p])}({searchText:Se,typesFilter:os,actionTypesFilter:Le,ruleExecutionStatusesFilter:Ce,ruleLastRunOutcomesFilter:we,ruleStatusesFilter:_e,tagsFilter:We,onError:as}),fs=e=>{Je(!0),et(e)},Ss=Object(r.useCallback)((async()=>{mt&&ns&&(await ds(),await Os(),rt&&await ps(),it(l()().format()))}),[ds,ps,Os,it,rt,ns,mt]),Es=Object(r.useMemo)((()=>!1===mt.isInitialized?[]:ke({rules:us.data,ruleTypeIndex:mt.data,canExecuteActions:de,config:be})),[mt,us.data,de,be]);Object(r.useEffect)((()=>{Ss()}),[Ss,R,dt]),Object(r.useEffect)((()=>{(async()=>{try{xt({...mt,isLoading:!0});const t=await Object(W.v)({http:F}),s=new Map;for(const e of t)s.set(e.id,e);let n=s;e&&e.length>0&&(n=new Map([...s].filter((([t,s])=>e.includes(s.id))))),xt({isLoading:!1,data:n,isInitialized:!0})}catch(e){P.addDanger({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadRuleTypesMessage",{defaultMessage:"Unable to load rule types"})}),xt({...mt,isLoading:!1})}})()}),[]),Object(r.useEffect)((()=>{(async()=>{try{const e=(await Object(H.d)({http:F,featureId:g.AlertingConnectorFeatureId})).filter((({id:e})=>ue.has(e))).sort(((e,t)=>e.name.localeCompare(t.name)));pe(e)}catch(e){P.addDanger({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}})()}),[]),Object(r.useEffect)((()=>{m&&m(_e)}),[_e]),Object(r.useEffect)((()=>{p&&Ke(p)}),[p]),Object(r.useEffect)((()=>{x&&Fe(x)}),[x]),Object(r.useEffect)((()=>{k&&ze(k)}),[x]),Object(r.useEffect)((()=>{I&&I(Ce)}),[Ce]),Object(r.useEffect)((()=>{L&&L(we)}),[we]),Object(r.useEffect)((()=>{zs()}),[Se,os,Le,Ce,we,_e,We,rs]),Object(r.useEffect)((()=>{if(ct.current){const e=Es.find((e=>e.id===ct.current));ct.current=null,ss(!1),e&&fs(e)}}),[Es]);const Ts=e=>{var t,s;const n="error"===e.status,a=null==e||null===(t=e.error)||void 0===t?void 0:t.message,l=(null===(s=e.error)||void 0===s?void 0:s.reason)===b.RuleExecutionStatusErrorReasons.License?S.a:null;return[{title:Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.expandRow.title",defaultMessage:"Error from last run"}),description:Object(T.jsx)(u.a.Fragment,null,a,n&&l&&Object(T.jsx)(c.EuiSpacer,{size:"xs"}),l)}]},hs=Object(r.useCallback)((()=>{at((e=>{if(e)st({});else{const e=us.data.reduce(((e,t)=>{var s;return(null===(s=t.lastRun)||void 0===s?void 0:s.outcome)===b.RuleLastRunOutcomeValues[2]||"error"===t.executionStatus.status?{...e,[t.id]:Object(T.jsx)(c.EuiDescriptionList,{listItems:Ts(t.executionStatus)})}:e}),{});st(e)}return!e}))}),[nt,us]),Is=e=>{he(e),Ee(e)},ys=Object(i.sortBy)(Object.entries(ls.reduce(((e,t)=>{const s=t.producer;return(e[s]=e[s]||[]).push({value:t.id,name:t.name}),e}),{}))).map((([e,t])=>{var s,n,a;return{groupName:null!==(n=e,s=null==ce||null===(a=ce.find((e=>e.id===n)))||void 0===a?void 0:a.name)&&void 0!==s?s:Object(i.capitalize)(e),subOptions:t.sort(((e,t)=>e.name.localeCompare(t.name)))}})),ks=[Object(T.jsx)(_,{key:"type-filter",onChange:ye,options:ys,filters:Ie}),t&&Object(T.jsx)(D,{key:"action-type-filter",actionTypes:je,onChange:Re,filters:Le}),...ut?[Object(T.jsx)(N,{key:"rule-status-filter",selectedStatuses:Ce,onChange:Fe})]:[Object(T.jsx)(K,{key:"rule-last-run-outcome-filter",selectedOutcomes:we,onChange:ze})],...ot?[Object(T.jsx)(X.RuleTagFilter,{isGrouped:!0,tags:js,selectedTags:We,onChange:Ve})]:[]],{isAllSelected:As,selectedIds:Ls,isPageSelected:Rs,numberOfSelectedItems:Cs,isRowSelected:vs,getFilter:Ms,onSelectRow:Fs,onSelectAll:ws,onSelectPage:Us,onClearSelection:zs}=function(e){const{totalItemCount:t=0,items:s=[],typesFilter:n,actionTypesFilter:a,tagsFilter:l,ruleExecutionStatusesFilter:i,ruleLastRunOutcomesFilter:o,ruleStatusesFilter:u,searchText:c}=e,[d,b]=Object(r.useReducer)(Ne,Be),g=Object(r.useMemo)((()=>s.map((e=>e.id))),[s]),j=Object(r.useMemo)((()=>{const{selectedIds:e,isAllSelected:s}=d;return t?s?t-e.size:g.filter((t=>e.has(t))).length:0}),[d,g,t]),p=Object(r.useMemo)((()=>{const{selectedIds:e,isAllSelected:t}=d;return!!s.length&&s.every((s=>!s.isEditable||(t?!e.has(s.id):e.has(s.id))))}),[d,s]),O=Object(r.useCallback)((e=>{const{selectedIds:t,isAllSelected:s}=d;return!!e.isEditable&&(s?!t.has(e.id):t.has(e.id))}),[d]),m=Object(r.useCallback)((e=>{b({type:Pe.TOGGLE_ROW,payload:e.id})}),[]),x=Object(r.useCallback)((()=>{b({type:Pe.TOGGLE_SELECT_ALL,payload:!d.isAllSelected})}),[d]),f=Object(r.useCallback)((()=>{const{selectedIds:e,isAllSelected:t}=d;if(!p&&!t){const t=s.filter((e=>e.isEditable)).map((e=>e.id));b({type:Pe.SET_SELECTION,payload:[...e,...t]})}p&&!t&&(s.forEach((t=>e.delete(t.id))),b({type:Pe.SET_SELECTION,payload:[...e]})),!p&&t&&(s.forEach((t=>{t.isEditable&&e.delete(t.id)})),b({type:Pe.SET_SELECTION,payload:[...e]})),p&&t&&b({type:Pe.SET_SELECTION,payload:[...e,...g]})}),[d,p,s,g]),S=Object(r.useCallback)((()=>{b({type:Pe.CLEAR_SELECTION})}),[]),E=Object(r.useCallback)((e=>{const t=se({typesFilter:n,actionTypesFilter:a,tagsFilter:l,ruleExecutionStatusesFilter:i,ruleLastRunOutcomesFilter:o,ruleStatusesFilter:u,searchText:c});if(e&&e.length){const s=Object(te.fromKueryExpression)(`NOT (${e.map((e=>`alert.id: "alert:${e}"`)).join(" or ")})`);return t?te.nodeBuilder.and([t,s]):s}return t}),[n,a,l,i,o,u,c]),T=Object(r.useCallback)((()=>{const{selectedIds:e,isAllSelected:t}=d,s=[...e];return t?0===s.length?E():E(s):E()}),[d,E]);return Object(r.useMemo)((()=>({selectedIds:d.selectedIds,isAllSelected:d.isAllSelected,isPageSelected:p,numberOfSelectedItems:j,isRowSelected:O,getFilter:T,onSelectRow:m,onSelectAll:x,onSelectPage:f,onClearSelection:S})),[d,p,j,O,T,m,x,f,S])}({totalItemCount:us.totalItemCount,items:Es,searchText:Se,typesFilter:os,actionTypesFilter:Le,ruleExecutionStatusesFilter:Ce,ruleLastRunOutcomesFilter:we,ruleStatusesFilter:_e,tagsFilter:We}),_s=Object(r.useMemo)((()=>{if(As)return!0;const e=[...Ls];return!!e.length&&qe(us.data,e).every((e=>Object(q.a)(e,mt.data.get(e.ruleTypeId))))}),[Ls,us.data,mt.data,As]),Ds=()=>{kt([]),Lt(void 0)},Ps=()=>{St([]),Tt(void 0)},Bs=()=>{Ct([]),Mt(void 0)},Ns=()=>{wt([]),zt(void 0)},Gs=()=>{Dt([]),Bt(void 0)},Ks=()=>{Gt([]),$t(void 0)},$s=Object(r.useMemo)((()=>us.isLoading||mt.isLoading||Oe||ht||Wt||Yt||qt||Qt||Xt||ts),[us,mt,Oe,ht,Wt,Yt,qt,Qt,Xt,ts]),Ws=async e=>{ss(!0);try{const t=await Object(W.f)({http:F,ruleId:e});ct.current=t.id,await ds()}catch{ct.current=null,ss(!1),P.addDanger(n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.cloneFailed",{defaultMessage:"Unable to clone rule"}))}},Hs=Object(T.jsx)(u.a.Fragment,null,Object(T.jsx)($,{rulesLastRunOutcomes:xs,setRuleExecutionStatusesFilter:Fe,setRuleLastRunOutcomesFilter:ze}),Object(T.jsx)(c.EuiFlexGroup,{gutterSize:"s"},is&&a?Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiButton,{key:"create-rule","data-test-subj":"createRuleButton",fill:!0,onClick:()=>Ze(!0)},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.addRuleButtonLabel",defaultMessage:"Create rule"}))):null,Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiFieldSearch,{fullWidth:!0,isClearable:!0,"data-test-subj":"ruleSearchField",value:Te,onChange:e=>{he(e.target.value),""===e.target.value&&Ee(e.target.value)},onKeyUp:e=>{13===e.keyCode&&Ee(Te)},placeholder:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.searchPlaceholderTitle",{defaultMessage:"Search"})})),Object(T.jsx)(c.EuiFlexItem,{grow:!1},rt?Object(T.jsx)(ee.RuleStatusFilter,{selectedStatuses:_e,onChange:Ke}):null),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiFilterGroup,null,ks.map(((e,t)=>Object(T.jsx)(u.a.Fragment,{key:t},e))))),Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiButton,{"data-test-subj":"refreshRulesButton",iconType:"refresh",onClick:()=>{zs(),Ss()},name:"refresh",color:"primary"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.refreshRulesButtonLabel",defaultMessage:"Refresh"})))),Object(T.jsx)(c.EuiSpacer,{size:"m"}),Object(T.jsx)(c.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(T.jsx)(c.EuiFlexItem,null,Object(T.jsx)(c.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(T.jsx)(z,{rulesStatuses:ms,rulesLastRunOutcomes:xs}),Object(T.jsx)(ve,{lastUpdate:lt,onRefresh:Ss}))),ms.error>0&&Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiLink,{"data-test-subj":"expandRulesError",color:"primary",onClick:hs},!nt&&Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.showAllErrors",defaultMessage:"Show {totalStatusesError, plural, one {error} other {errors}}",values:{totalStatusesError:ms.error}}),nt&&Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.hideAllErrors",defaultMessage:"Hide {totalStatusesError, plural, one {error} other {errors}}",values:{totalStatusesError:ms.error}})))),Object(T.jsx)(c.EuiSpacer,{size:"s"}),Object(T.jsx)(Ae,{items:Es,isLoading:$s,rulesState:us,ruleTypesState:mt,ruleTypeRegistry:G,isPageSelected:Rs,isAllSelected:As,numberOfSelectedRules:Cs,sort:gt,page:xe,percentileOptions:dt,itemIdToExpandedRowMap:tt,onSort:jt,onPage:fe,onRuleChanged:()=>Ss(),onRuleClick:e=>{const t=s||j.eb;M.push(t.replace(":ruleId",e.id))},onRuleEditClick:e=>{var t;e.isEditable&&(t=e.ruleTypeId,G.has(t)&&!G.get(t).requiresAppContext)&&fs(e)},onRuleDeleteClick:e=>St([e.id]),onManageLicenseClick:e=>{var t;return Ot({licenseType:null===(t=mt.data.get(e.ruleTypeId))||void 0===t?void 0:t.minimumLicenseRequired,ruleTypeId:e.ruleTypeId})},onPercentileOptionsChange:bt,onDisableRule:e=>Object(W.i)({http:F,id:e.id}),onEnableRule:e=>Object(W.k)({http:F,id:e.id}),onSnoozeRule:(e,t)=>Object(W.B)({http:F,id:e.id,snoozeSchedule:t}),onUnsnoozeRule:(e,t)=>Object(W.F)({http:F,id:e.id,scheduleIds:t}),onSelectAll:ws,onSelectPage:Us,onSelectRow:Fs,isRowSelected:vs,renderCollapsedItemActions:(e,t)=>Object(T.jsx)(w,{key:e.id,item:e,onLoading:t,onRuleChanged:()=>Ss(),setRulesToDelete:St,onEditRule:()=>fs(e),onUpdateAPIKey:Gt,onRunRule:()=>(async e=>{await Object(Ge.a)(F,P,e)})(e.id),onCloneRule:Ws}),renderRuleError:e=>{var t;const s=e.executionStatus,n="error"===s.status;return(null===(t=s.error)||void 0===t?void 0:t.reason)===b.RuleExecutionStatusErrorReasons.License||n?Object(T.jsx)(c.EuiButtonIcon,{onClick:()=>((e,t)=>{st((s=>{const n={...s};return n[t.id]?delete n[t.id]:n[t.id]=Object(T.jsx)(c.EuiDescriptionList,{listItems:Ts(e)}),n}))})(s,e),"aria-label":tt[e.id]?"Collapse":"Expand",iconType:tt[e.id]?"arrowUp":"arrowDown"}):null},renderSelectAllDropdown:()=>Object(T.jsx)(h,{numberOfSelectedRules:Cs,canModifySelectedRules:_s},Object(T.jsx)(A,{selectedItems:ke({rules:qe(us.data,[...Ls]),ruleTypeIndex:mt.data,canExecuteActions:de,config:be}),isAllSelected:As,getFilter:Ms,onPerformingAction:()=>me(!0),onActionPerformed:()=>{Ss(),me(!1)},isDeletingRules:ht,isSnoozingRules:Wt,isUnsnoozingRules:Yt,isSchedulingRules:qt,isUnschedulingRules:Qt,isUpdatingRuleAPIKeys:Xt,setRulesToDelete:St,setRulesToDeleteFilter:Tt,setRulesToUpdateAPIKey:Gt,setRulesToSnooze:kt,setRulesToUnsnooze:Ct,setRulesToSchedule:wt,setRulesToUnschedule:Dt,setRulesToSnoozeFilter:Lt,setRulesToUnsnoozeFilter:Mt,setRulesToScheduleFilter:zt,setRulesToUnscheduleFilter:Bt,setRulesToUpdateAPIKeyFilter:$t})),rulesListKey:C,config:be,visibleColumns:v}),pt&&Object(T.jsx)(Q,{licenseType:pt.licenseType,ruleTypeId:pt.ruleTypeId,onConfirm:()=>{window.open(`${F.basePath.get()}/app/management/stack/license_management`,"_blank"),Ot(null)},onCancel:()=>Ot(null)})),[qs,Vs]=Object(r.useState)(!1);Object(r.useEffect)((()=>{Vs(ft.length>0||Boolean(Et))}),[ft,Et]);const{showToast:Ys}=(({onSearchPopulate:e})=>{const{notifications:{toasts:t}}=Object(y.b)().services,s=Object(r.useCallback)((t=>{if(!e)return;const s=t.errors.map((e=>e.rule.name)).join(",");e(s)}),[e]),n=Object(r.useCallback)(((t,n)=>Object(T.jsx)(c.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e&&Object(T.jsx)(c.EuiFlexItem,{grow:!1},Object(T.jsx)(c.EuiButton,{color:n,size:"s",onClick:()=>s(t),"data-test-subj":"bulkDeleteResponseFilterErrors"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.filterByErrors",defaultMessage:"Filter by errored rules"}))))),[e,s]),a=Object(r.useCallback)((e=>{const{errors:s,total:a}=e,l=a-s.length,i=s.length;i?i!==a?t.addWarning({title:Object(S.A)(l,i,S.v,S.e),text:Object(f.toMountPoint)(n(e,"warning"))}):t.addDanger({title:Object(S.z)(i,S.v,S.e),text:Object(f.toMountPoint)(n(e,"danger"))}):t.addSuccess(Object(S.B)(l,S.v,S.e))}),[t,n]);return Object(r.useMemo)((()=>({showToast:a})),[a])})({onSearchPopulate:Is}),Zs=Object(r.useCallback)((async()=>{Vs(!1),It(!0);const{errors:e,total:t}=await Object(W.b)({filter:Et,ids:ft,http:F});It(!1),Ys({errors:e,total:t}),await Ss(),Ps(),zs()}),[F,ft,Et,It,P]),Qs=ft.length||Cs;return Object(T.jsx)("section",{"data-test-subj":"rulesList"},qs&&Object(T.jsx)(V,{onConfirm:Zs,onCancel:()=>{Vs(!1),Ps()},confirmButtonText:Object(S.x)(Qs,S.v,S.e),confirmModalText:Object(S.y)(Qs,S.v,S.e)}),Object(T.jsx)(Ue,{rulesToSnooze:yt,rulesToUnsnooze:Rt,rulesToSnoozeFilter:At,rulesToUnsnoozeFilter:vt,numberOfSelectedRules:Cs,setIsSnoozingRule:Ht,setIsUnsnoozingRule:Zt,onClose:()=>{Ds(),Bs()},onSave:async()=>{Ds(),Bs(),zs(),await Ss()},onSearchPopulate:Is}),Object(T.jsx)(De,{rulesToSchedule:Ft,rulesToUnschedule:_t,rulesToScheduleFilter:Ut,rulesToUnscheduleFilter:Pt,numberOfSelectedRules:Cs,setIsSchedulingRule:Vt,setIsUnschedulingRule:Jt,onClose:()=>{Ns(),Gs()},onSave:async()=>{Ns(),Gs(),zs(),await Ss()},onSearchPopulate:Is}),Object(T.jsx)(Me.a,{onCancel:()=>{Ks()},idsToUpdate:Nt,idsToUpdateFilter:Kt,numberOfSelectedRules:Cs,apiUpdateApiKeyCall:W.e,setIsLoadingState:e=>{es(e),cs({...us,isLoading:e})},onUpdated:async()=>{Ks(),zs(),await Ss()},onSearchPopulate:Is}),Object(T.jsx)(c.EuiSpacer,{size:"xs"}),!bs||us.isLoading||mt.isLoading?gs?Object(T.jsx)(Z.a,null):Hs:is?Object(T.jsx)(Y,{showCreateRuleButton:a,onCTAClicked:()=>Ze(!0)}):He,Ye&&Object(T.jsx)(O.a,{consumer:b.ALERTS_FEATURE_ID,onClose:()=>{Ze(!1)},actionTypeRegistry:ue,ruleTypeRegistry:G,ruleTypeIndex:mt.data,onSave:Ss}),Qe&&Xe&&Object(T.jsx)(O.b,{initialRule:Xe,onClose:()=>{Je(!1)},actionTypeRegistry:ue,ruleTypeRegistry:G,ruleType:mt.data.get(Xe.ruleTypeId),onSave:Ss}))},He=Object(T.jsx)(c.EuiEmptyPrompt,{"data-test-subj":"noPermissionPrompt",iconType:"securityApp",title:Object(T.jsx)("h1",null,Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.noPermissionToCreateTitle",defaultMessage:"No permissions to create rules"})),body:Object(T.jsx)("p",{"data-test-subj":"permissionDeniedMessage"},Object(T.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.noPermissionToCreateDescription",defaultMessage:"Contact your system administrator."}))});function qe(e,t){return e.filter((e=>t.includes(e.id)))}},120:function(e,t,s){"use strict";s.d(t,"f",(function(){return n})),s.d(t,"e",(function(){return a})),s.d(t,"c",(function(){return l})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return o})),s.d(t,"d",(function(){return r}));const n=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},a=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},l=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute},i=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function o(e,t){var s,n;return null!==(s=null==t||null===(n=t.authorizedConsumers[e.consumer])||void 0===n?void 0:n.all)&&void 0!==s&&s}const r=e=>{var t,s;return null==e||null===(t=e.management)||void 0===t||null===(s=t.security)||void 0===s?void 0:s.api_keys}},121:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(8),a=s.n(n),l=(s(1),s(60)),i=s(22),o=s(0);function r(e){return t=>{const{http:s}=Object(i.b)().services;return Object(o.jsx)(e,a()({},t,{muteRules:async e=>Object(l.y)({http:s,ids:e.filter((e=>!c(e))).map((e=>e.id))}),unmuteRules:async e=>Object(l.E)({http:s,ids:e.filter(c).map((e=>e.id))}),enableRules:async e=>Object(l.l)({http:s,ids:e.filter(u).map((e=>e.id))}),disableRules:async e=>Object(l.j)({http:s,ids:e.filter((e=>!u(e))).map((e=>e.id))}),deleteRules:async e=>Object(l.h)({http:s,ids:e.map((e=>e.id))}),muteRule:async e=>{if(!c(e))return await Object(l.x)({http:s,id:e.id})},unmuteRule:async e=>{if(c(e))return await Object(l.D)({http:s,id:e.id})},muteAlertInstance:async(e,t)=>{if(!d(e,t))return Object(l.w)({http:s,id:e.id,instanceId:t})},unmuteAlertInstance:async(e,t)=>{if(d(e,t))return Object(l.C)({http:s,id:e.id,instanceId:t})},enableRule:async e=>{if(u(e))return await Object(l.k)({http:s,id:e.id})},disableRule:async e=>{if(!u(e))return await Object(l.i)({http:s,id:e.id})},deleteRule:async e=>Object(l.h)({http:s,ids:[e.id]}),loadRule:async e=>Object(l.r)({http:s,ruleId:e}),loadRuleState:async e=>Object(l.s)({http:s,ruleId:e}),loadRuleSummary:async(e,t)=>Object(l.t)({http:s,ruleId:e,numberOfExecutions:t}),loadRuleTypes:async()=>Object(l.v)({http:s}),loadExecutionLogAggregations:async e=>Object(l.o)({...e,http:s}),loadGlobalExecutionLogAggregations:async e=>Object(l.q)({...e,http:s}),loadActionErrorLog:async e=>Object(l.m)({...e,http:s}),loadExecutionKPIAggregations:async e=>Object(l.n)({...e,http:s}),loadGlobalExecutionKPIAggregations:async e=>Object(l.p)({...e,http:s}),resolveRule:async e=>Object(l.z)({http:s,ruleId:e}),getHealth:async()=>Object(l.a)({http:s}),snoozeRule:async(e,t)=>await Object(l.B)({http:s,id:e.id,snoozeSchedule:t}),bulkSnoozeRules:async e=>await Object(l.c)({http:s,...e}),unsnoozeRule:async(e,t)=>await Object(l.F)({http:s,id:e.id,scheduleIds:t}),bulkUnsnoozeRules:async e=>await Object(l.d)({http:s,...e}),cloneRule:async e=>await Object(l.f)({http:s,ruleId:e})}))}}function u(e){return!1===e.enabled}function c(e){return!0===e.muteAll}function d(e,t){return e.mutedInstanceIds.findIndex((e=>e===t))>=0}},122:function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return u})),s.d(t,"h",(function(){return d})),s.d(t,"j",(function(){return b})),s.d(t,"f",(function(){return g})),s.d(t,"E",(function(){return j})),s.d(t,"D",(function(){return p})),s.d(t,"C",(function(){return A})),s.d(t,"F",(function(){return L})),s.d(t,"s",(function(){return R})),s.d(t,"u",(function(){return C})),s.d(t,"w",(function(){return v})),s.d(t,"r",(function(){return M})),s.d(t,"t",(function(){return F})),s.d(t,"d",(function(){return w})),s.d(t,"l",(function(){return U})),s.d(t,"m",(function(){return z})),s.d(t,"q",(function(){return _})),s.d(t,"n",(function(){return D})),s.d(t,"o",(function(){return P})),s.d(t,"p",(function(){return B})),s.d(t,"i",(function(){return N})),s.d(t,"k",(function(){return G})),s.d(t,"g",(function(){return K})),s.d(t,"v",(function(){return $})),s.d(t,"e",(function(){return W})),s.d(t,"c",(function(){return H})),s.d(t,"y",(function(){return q})),s.d(t,"x",(function(){return V})),s.d(t,"B",(function(){return Y})),s.d(t,"z",(function(){return Z})),s.d(t,"A",(function(){return Q}));var n=s(3);const a=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusOk",{defaultMessage:"Ok"}),l=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusActive",{defaultMessage:"Active"}),i=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusError",{defaultMessage:"Error"}),o=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusLicenseError",{defaultMessage:"License Error"}),r=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusPending",{defaultMessage:"Pending"}),u=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusUnknown",{defaultMessage:"Unknown"}),c=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusWarning",{defaultMessage:"Warning"}),d=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeSucceeded",{defaultMessage:"Succeeded"}),b=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeWarning",{defaultMessage:"Warning"}),g=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeFailed",{defaultMessage:"Failed"}),j={ok:a,active:l,error:i,pending:r,unknown:u,warning:c},p={succeeded:d,warning:b,failed:g},O=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonUnknown",{defaultMessage:"An error occurred for unknown reasons."}),m=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonReading",{defaultMessage:"An error occurred when reading the rule."}),x=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonDecrypting",{defaultMessage:"An error occurred when decrypting the rule."}),f=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonRunning",{defaultMessage:"An error occurred when running the rule."}),S=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonLicense",{defaultMessage:"Cannot run rule"}),E=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonTimeout",{defaultMessage:"Rule execution cancelled due to timeout."}),T=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonDisabled",{defaultMessage:"Rule failed to execute because rule ran after it was disabled."}),h=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonValidate",{defaultMessage:"An error occurred when validating the rule parameters."}),I=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxExecutableActions",{defaultMessage:"Action limit exceeded"}),y=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxAlerts",{defaultMessage:"Alert limit exceeded"}),k=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonUnknown",{defaultMessage:"Unknown reason"}),A={read:m,decrypt:x,execute:f,unknown:O,license:S,timeout:E,disabled:T,validate:h},L={maxExecutableActions:I,maxAlerts:y,unknown:k},R=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selectAllAriaLabel",{defaultMessage:"Toggle select all rules"}),C=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selectShowBulkActionsAriaLabel",{defaultMessage:"Show bulk actions"}),v=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalRulesLabel",{values:{formattedTotalRules:e,totalRules:t},defaultMessage:"{formattedTotalRules} {totalRules, plural, =1 {rule} other {rules}}"}),M=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.selectedRulesButton",{values:{formattedSelectedRules:e,selectedRules:t},defaultMessage:"Selected {formattedSelectedRules} {selectedRules, plural, =1 {rule} other {rules}}"}),F=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.selectAllRulesButton",{values:{formattedTotalRules:e,totalRules:t},defaultMessage:"Select all {formattedTotalRules} {totalRules, plural, =1 {rule} other {rules}}"}),w=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.clearAllSelectionButton",{defaultMessage:"Clear selection"}),U=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesActiveDescription",{defaultMessage:"Active: {totalStatusesActive}",values:{totalStatusesActive:e}}),z=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesErrorDescription",{defaultMessage:"Error: {totalStatusesError}",values:{totalStatusesError:e}}),_=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesWarningDescription",{defaultMessage:"Warning: {totalStatusesWarning}",values:{totalStatusesWarning:e}}),D=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesOkDescription",{defaultMessage:"Ok: {totalStatusesOk}",values:{totalStatusesOk:e}}),P=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesPendingDescription",{defaultMessage:"Pending: {totalStatusesPending}",values:{totalStatusesPending:e}}),B=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesUnknownDescription",{defaultMessage:"Unknown: {totalStatusesUnknown}",values:{totalStatusesUnknown:e}}),N=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeSucceededDescription",{defaultMessage:"Succeeded: {total}",values:{total:e}}),G=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeWarningDescription",{defaultMessage:"Warning: {total}",values:{total:e}}),K=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeFailedDescription",{defaultMessage:"Failed: {total}",values:{total:e}}),$=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.singleTitle",{defaultMessage:"rule"}),W=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.multipleTitle",{defaultMessage:"rules"}),H=n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),q=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.descriptionText",{defaultMessage:"You won't be able to recover {numIdsToDelete, plural, one {a deleted {singleTitle}} other {deleted {multipleTitle}}}.",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:s}}),V=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numIdsToDelete, plural, one {{singleTitle}} other {# {multipleTitle}}} ",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:s}}),Y=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:s}}),Z=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:s}}),Q=(e,t,s,a)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Deleted {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:s,multipleTitle:a}})},129:function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return r}));var n=s(89),a=s.n(n),l=s(21),i=s(17);function o(e){if(!e)return"00:00:00.000";const t=a.a.duration(e);return`${[t.hours(),t.minutes(),t.seconds()].map((e=>Object(l.padStart)(`${e}`,2,"0"))).join(":")}.${Object(l.padStart)(`${t.milliseconds()}`,3,"0")}`}function r(e,t){if(!e||!e.ruleTaskTimeout)return!1;const s=e.ruleTaskTimeout;return t>Object(i.parseDuration)(s)}},131:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(125);async function a({http:e}){return await e.get(`${n.a}/_config`)}},144:function(e,t,s){"use strict";s.d(t,"a",(function(){return j}));var n=s(1),a=s(88),l=s(4),i=s(3),o=s(18),r=s(22),u=s(0);const c=(e,t,s)=>i.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.someSuccess",{defaultMessage:"Updated {property} for {success, plural, one {# rule} other {# rules}}, {failure, plural, one {# rule} other {# rules}} encountered errors.",values:{success:e,failure:t,property:s}}),d=(e,t)=>i.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.failure",{defaultMessage:"Failed to update {property} for {failure, plural, one {# rule} other {# rules}}.",values:{failure:e,property:t}}),b=i.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.property.snoozeSettings",{defaultMessage:"snooze settings"}),g={snooze:b,snoozeSchedule:b,apiKey:i.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.property.apiKey",{defaultMessage:"API key"})};function j(e){const{onSearchPopulate:t}=e,{notifications:{toasts:s}}=Object(r.b)().services,b=Object(n.useCallback)((e=>{if(!t)return;const s=e.errors.map((e=>e.rule.name)).join(",");t(s)}),[t]),j=Object(n.useCallback)((e=>Object(u.jsx)(l.EuiFlexGroup,{direction:"column",gutterSize:"xs"},t&&Object(u.jsx)(l.EuiFlexItem,{grow:!1},Object(u.jsx)("div",null,Object(u.jsx)(l.EuiButtonEmpty,{iconType:"search",size:"xs",flush:"left",onClick:()=>b(e),"data-test-subj":"bulkEditResponseFilterErrors"},Object(u.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.filterByErrors",defaultMessage:"Filter by errored rules"})))))),[t,b]),p=Object(n.useCallback)(((e,t)=>{const{errors:n,total:a}=e,l=a-n.length,r=n.length;r?r!==a?s.addWarning({title:c(l,r,g[t]),text:Object(o.toMountPoint)(j(e))}):s.addDanger({title:d(r,g[t]),text:Object(o.toMountPoint)(j(e))}):s.addSuccess(((e,t)=>i.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.success",{defaultMessage:"Updated {property} for {total, plural, one {# rule} other {# rules}}.",values:{total:e,property:t}}))(l,g[t]))}),[s,j]);return Object(n.useMemo)((()=>({showToast:p})),[p])}},151:function(e,t,s){"use strict";s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return u}));var n=s(89),a=s.n(n),l=s(93),i=s.n(l);function o(e){return`${i()(100*e).format("0,0")}%`}function r(e){if(!e)return"00:00";const t=a.a.duration(e);let s=Math.floor(t.asMinutes()),n=t.seconds();return t.milliseconds()>=500&&(n+=1,60===n&&(n=0,s+=1)),`${s.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function u(e){return`${i()(e).format("0,0")} ms`}},155:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s(21),a=s(3);function l(e){return!1===(null==e?void 0:e.enabledInLicense)?(e=>({isEnabled:!1,message:a.i18n.translate("xpack.triggersActionsUI.checkRuleTypeEnabled.ruleTypeDisabledByLicenseMessage",{defaultMessage:"This rule type requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(n.upperFirst)(e.minimumLicenseRequired)}})}))(e):{isEnabled:!0}}},160:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(1),a=s(4),l=s(151),i=s(0);const o=Object(n.memo)((e=>{const{duration:t,allowZero:s=!0}=e,o=Object(n.useMemo)((()=>s||"number"==typeof t?Object(l.a)(t):"N/A"),[t,s]),r=Object(n.useMemo)((()=>s||"number"==typeof t?Object(l.b)(t):"N/A"),[t,s]);return Object(i.jsx)(a.EuiToolTip,{"data-test-subj":"rule-duration-format-tooltip",content:r},Object(i.jsx)("span",{"data-test-subj":"rule-duration-format-value"},o))}))},161:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s(4),a=s(3),l=s(1),i=s(22),o=s(144),r=s(0);const u=({onCancel:e,idsToUpdate:t,idsToUpdateFilter:s,numberOfSelectedRules:u=0,apiUpdateApiKeyCall:c,setIsLoadingState:d,onUpdated:b,onSearchPopulate:g})=>{const{http:j,notifications:{toasts:p}}=Object(i.b)().services,[O,m]=Object(l.useState)(!1),{showToast:x}=Object(o.a)({onSearchPopulate:g});Object(l.useEffect)((()=>{m(void 0!==s||t.length>0)}),[t,s]);const f=Object(l.useMemo)((()=>void 0!==s?u:t.length),[t,s,u]);return O?Object(r.jsx)(n.EuiConfirmModal,{buttonColor:"primary","data-test-subj":"updateApiKeyIdsConfirmation",title:a.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.title",{defaultMessage:"Update API key"}),onCancel:()=>{m(!1),e()},onConfirm:async()=>{m(!1),d(!0);try{const e=await c({ids:t,filter:s,http:j});x(e,"apiKey")}catch(e){p.addError(e,{title:a.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.failureMessage",{defaultMessage:"Failed to update the API {idsToUpdate, plural, one {key} other {keys}}",values:{idsToUpdate:f}})})}d(!1),b()},cancelButtonText:a.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:a.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.confirmButton",{defaultMessage:"Update"})},a.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.description",{defaultMessage:"You will not be able to recover the old API {idsToUpdate, plural, one {key} other {keys}}",values:{idsToUpdate:f}})):null}},162:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s(3),a=s(60);async function l(e,t,s){try{const l=await Object(a.A)({http:e,id:s});l?t.addWarning({title:l}):t.addSuccess({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ableToRunRuleSoon",{defaultMessage:"Your rule is scheduled to run"})})}catch(e){t.addError(e,{title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToRunRuleSoon",{defaultMessage:"Unable to schedule your rule to run"})})}}},225:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(226);case"v8light":return s(228)}},226:function(e,t,s){var n=s(58),a=s(227);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},227:function(e,t,s){(t=s(59)(!1)).push([e.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}",""]),e.exports=t},228:function(e,t,s){var n=s(58),a=s(229);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},229:function(e,t,s){(t=s(59)(!1)).push([e.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}",""]),e.exports=t},230:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(231);case"v8light":return s(233)}},231:function(e,t,s){var n=s(58),a=s(232);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},232:function(e,t,s){(t=s(59)(!1)).push([e.i,".collapsedItemActions__deleteButton{color:#f86b63}",""]),e.exports=t},233:function(e,t,s){var n=s(58),a=s(234);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},234:function(e,t,s){(t=s(59)(!1)).push([e.i,".collapsedItemActions__deleteButton{color:#bd271e}",""]),e.exports=t},235:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(236);case"v8light":return s(238)}},236:function(e,t,s){var n=s(58),a=s(237);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},237:function(e,t,s){(t=s(59)(!1)).push([e.i,".actRulesList__tableRowDisabled{background-color:#25262e}.actRulesList__tableRowDisabled .actRulesList__tableCellDisabled{color:#98a2b3}.euiTableRow:focus-within .ruleSidebarItem__action,.euiTableRow:hover .ruleSidebarItem__action,.euiTableRow[class*=-isActive] .ruleSidebarItem__action{opacity:1}.ruleSidebarItem__action{opacity:0}.ruleSidebarItem__action.ruleSidebarItem__mobile,.ruleSidebarItem__action:focus{opacity:1}.ruleDurationWarningIcon{margin-bottom:4px;margin-left:8px}.ruleDisabledQuestionIcon{bottom:4px;margin-left:4px;position:relative}",""]),e.exports=t},238:function(e,t,s){var n=s(58),a=s(239);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},239:function(e,t,s){(t=s(59)(!1)).push([e.i,".actRulesList__tableRowDisabled{background-color:#f5f7fa}.actRulesList__tableRowDisabled .actRulesList__tableCellDisabled{color:#69707d}.euiTableRow:focus-within .ruleSidebarItem__action,.euiTableRow:hover .ruleSidebarItem__action,.euiTableRow[class*=-isActive] .ruleSidebarItem__action{opacity:1}.ruleSidebarItem__action{opacity:0}.ruleSidebarItem__action.ruleSidebarItem__mobile,.ruleSidebarItem__action:focus{opacity:1}.ruleDurationWarningIcon{margin-bottom:4px;margin-left:8px}.ruleDisabledQuestionIcon{bottom:4px;margin-left:4px;position:relative}",""]),e.exports=t},92:function(e,t,s){"use strict";s.r(t),s.d(t,"SNOOZE_SUCCESS_MESSAGE",(function(){return g})),s.d(t,"UNSNOOZE_SUCCESS_MESSAGE",(function(){return j})),s.d(t,"SNOOZE_FAILED_MESSAGE",(function(){return p})),s.d(t,"RulesListNotifyBadge",(function(){return m})),s.d(t,"default",(function(){return m}));var n=s(1),a=s(89),l=s.n(a),i=s(4),o=s(3),r=s(143),u=s(127),c=s(22),d=s(13),b=s(0);const g=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeSuccess",{defaultMessage:"Rule successfully snoozed"}),j=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.unsnoozeSuccess",{defaultMessage:"Rule successfully unsnoozed"}),p=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeFailed",{defaultMessage:"Unable to change rule snooze settings"}),O=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.openSnoozePanel",{defaultMessage:"Open snooze panel"}),m=e=>{var t,s;const{isLoading:a=!1,rule:m,isOpen:x,onClick:f,onClose:S,onLoading:E,onRuleChanged:T,snoozeRule:h,unsnoozeRule:I,showOnHover:y=!1,showTooltipInline:k=!1}=e,{isSnoozedUntil:A,muteAll:L,isEditable:R}=m,C=L,{notifications:{toasts:v}}=Object(c.b)().services,M=Object(n.useMemo)((()=>Object(d.c)(m)),[m]),F=Object(n.useMemo)((()=>(e=>{if(!e.snoozeSchedule)return null;const t=e.snoozeSchedule.filter((e=>Boolean(e.id)));return 0===t.length?null:t.reduce(((e,t)=>l()(t.rRule.dtstart).isBefore(l()(e.rRule.dtstart))?t:e))})(m)),[m]),w=Object(n.useMemo)((()=>!M&&Boolean(F)),[F,M]),U=Object(n.useMemo)((()=>A?Object(r.a)(l()(A)):F?Object(r.a)(l()(F.rRule.dtstart)):""),[A,F]),z=Object(n.useMemo)((()=>C?o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedIndefinitelyTooltip",{defaultMessage:"Notifications snoozed indefinitely"}):w?o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozeScheduledTooltip",{defaultMessage:"Notifications scheduled to snooze starting {schedStart}",values:{schedStart:Object(r.b)(l()(F.rRule.dtstart))}}):M?o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedTooltip",{defaultMessage:"Notifications snoozing for {snoozeTime}",values:{snoozeTime:l()(A).fromNow(!0)}}):k?o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.noSnoozeAppliedTooltip",{defaultMessage:"Notify when alerts generated"}):""),[C,w,M,A,F,k]),_=Object(n.useMemo)((()=>Object(b.jsx)(i.EuiButton,{size:"s",isLoading:a,disabled:a||!R,"data-test-subj":"rulesListNotifyBadge-snoozed","aria-label":O,minWidth:85,iconType:"bellSlash",color:"accent",onClick:f},Object(b.jsx)(i.EuiText,{size:"xs"},U))),[U,a,R,f]),D=Object(n.useMemo)((()=>Object(b.jsx)(i.EuiButton,{size:"s",isLoading:a,disabled:a||!R,"data-test-subj":"rulesListNotifyBadge-scheduled",minWidth:85,iconType:"calendar",color:"text","aria-label":O,onClick:f},Object(b.jsx)(i.EuiText,{size:"xs"},U))),[U,a,R,f]),P=Object(n.useMemo)((()=>{const e=y?"ruleSidebarItem__action":"";return Object(b.jsx)(i.EuiButtonIcon,{size:"s",isLoading:a,disabled:a||!R,display:a?"base":"empty","data-test-subj":"rulesListNotifyBadge-unsnoozed","aria-label":O,className:x||a?"":e,iconType:"bell",onClick:f})}),[x,a,R,y,f]),B=Object(n.useMemo)((()=>Object(b.jsx)(i.EuiButtonIcon,{size:"s",isLoading:a,disabled:a||!R,display:"base","data-test-subj":"rulesListNotifyBadge-snoozedIndefinitely","aria-label":O,iconType:"bellSlash",color:"accent",onClick:f})),[a,R,f]),N=Object(n.useMemo)((()=>w?D:C?B:M?_:P),[M,w,C,D,_,B,P]),G=Object(n.useMemo)((()=>x||k?N:Object(b.jsx)(i.EuiToolTip,{content:z},N)),[x,N,z,k]),K=Object(n.useCallback)((()=>{S()}),[S]),$=Object(n.useCallback)((async e=>{try{E(!0),K(),await h(e),T(),v.addSuccess(g)}catch(e){v.addDanger(p)}finally{E(!1)}}),[E,h,T,v,K]),W=Object(n.useCallback)((async e=>{try{E(!0),K(),await I(e),T(),v.addSuccess(j)}catch(e){v.addDanger(p)}finally{E(!1)}}),[E,I,T,v,K]),H=Object(b.jsx)(i.EuiPopover,{"data-test-subj":"rulesListNotifyBadge",isOpen:x,closePopover:K,button:G,anchorPosition:"rightCenter",panelStyle:{maxHeight:"100vh",overflowY:"auto"}},Object(b.jsx)(u.a,{snoozeRule:$,unsnoozeRule:W,interval:Object(u.b)(A),showCancel:M,scheduledSnoozes:null!==(t=m.snoozeSchedule)&&void 0!==t?t:[],activeSnoozes:null!==(s=m.activeSnoozes)&&void 0!==s?s:[],inPopover:!0}));return k?Object(b.jsx)(i.EuiFlexGroup,{alignItems:"center"},Object(b.jsx)(i.EuiFlexItem,{grow:!1},H),Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiText,{color:"subdued",size:"xs"},z))):H}},97:function(e,t,s){"use strict";s.r(t),s.d(t,"RuleStatusDropdown",(function(){return g})),s.d(t,"futureTimeToInterval",(function(){return p})),s.d(t,"default",(function(){return g}));var n=s(1),a=s.n(n),l=s(89),i=s.n(l),o=s(3),r=s(4),u=s(127),c=s(13),d=s(0);const b="LL @ LT",g=({rule:e,onRuleChanged:t,disableRule:s,enableRule:a,snoozeRule:l,unsnoozeRule:o,isEditable:u,hideSnoozeOption:g=!1,direction:p="column"})=>{const[f,T]=Object(n.useState)(e.enabled),[h,I]=Object(n.useState)(!g&&Object(c.c)(e));Object(n.useEffect)((()=>{T(e.enabled)}),[e.enabled]),Object(n.useEffect)((()=>{g||I(Object(c.c)(e))}),[e,g]);const[y,k]=Object(n.useState)(!1),[A,L]=Object(n.useState)(!1),R=Object(n.useCallback)((()=>L((e=>!e))),[L]),C=Object(n.useCallback)((()=>L(!1)),[L]),v=Object(n.useCallback)((async n=>{if(e.enabled!==n){k(!0);try{n?await a():await s(),T(!f),t()}finally{k(!1)}}}),[e.enabled,f,t,a,s]),M=Object(n.useCallback)((async e=>{try{await l(e),t()}finally{C()}}),[l,t,C]),F=Object(n.useCallback)((async e=>{try{await o(e),t()}finally{C()}}),[o,t,C]),w=f?h?"warning":"primary":"default",U=f?h?x:O:m,z=f&&h?Object(d.jsx)(r.EuiToolTip,{content:e.muteAll?E:i()(new Date(e.isSnoozedUntil)).format(b)},Object(d.jsx)(r.EuiText,{color:"subdued",size:"xs"},e.muteAll?E:i()(new Date(e.isSnoozedUntil)).fromNow(!0))):null,_=Object(d.jsx)(r.EuiBadge,{color:w,"data-test-subj":"statusDropdownReadonly"},U),D=Object(d.jsx)(r.EuiBadge,{color:w,iconSide:"right",iconType:!y&&u?"arrowDown":void 0,onClick:R,iconOnClick:R,onClickAriaLabel:S,iconOnClickAriaLabel:S,isDisabled:y},U,y&&Object(d.jsx)(r.EuiLoadingSpinner,{style:{marginLeft:"4px",marginRight:"4px"},size:"s"}));return Object(d.jsx)(r.EuiFlexGroup,{direction:p,alignItems:"row"===p?"center":"flexStart",justifyContent:"flexStart",gutterSize:"row"===p?"s":"xs",responsive:!1},Object(d.jsx)(r.EuiFlexItem,{grow:!1},u?Object(d.jsx)(r.EuiPopover,{button:D,isOpen:A&&u,closePopover:C,panelPaddingSize:"s","data-test-subj":"statusDropdown",title:U},Object(d.jsx)(j,{onClosePopover:C,onChangeEnabledStatus:v,isEnabled:f,isSnoozed:h,snoozeEndTime:e.isSnoozedUntil,hideSnoozeOption:g,snoozeRule:M,unsnoozeRule:F,scheduledSnoozes:e.snoozeSchedule,activeSnoozes:e.activeSnoozes})):_),Object(d.jsx)(r.EuiFlexItem,{"data-test-subj":"remainingSnoozeTime",grow:!1},z))},j=({onChangeEnabledStatus:e,onClosePopover:t,isEnabled:s,isSnoozed:l,snoozeEndTime:o,hideSnoozeOption:c=!1,snoozeRule:g,unsnoozeRule:j,scheduledSnoozes:x=[],activeSnoozes:S=[]})=>{const E=Object(n.useCallback)((()=>{l?j():e(!0),t()}),[e,t,j,l]),T=Object(n.useCallback)((()=>{e(!1),t()}),[e,t]);let h=Object(d.jsx)(r.EuiText,{size:"s"},f);l&&o&&(h=Object(d.jsx)(a.a.Fragment,null,Object(d.jsx)(r.EuiText,{size:"s"},f)," ",Object(d.jsx)(r.EuiText,{size:"xs",color:"subdued"},i()(o).format(b))));const I=[{id:0,width:360,items:[{name:O,icon:s&&!l?"check":"empty",onClick:E,"data-test-subj":"statusDropdownEnabledItem"},{name:m,icon:s?"empty":"check",onClick:T,"data-test-subj":"statusDropdownDisabledItem"},...c?[]:[{name:h,icon:s&&l?"check":"empty",panel:1,disabled:!s,"data-test-subj":"statusDropdownSnoozeItem"}]]},...c?[]:[{id:1,width:400,title:f,content:Object(d.jsx)(r.EuiPanel,{paddingSize:"none",hasShadow:!1},Object(d.jsx)(u.a,{interval:p(o),showCancel:l,snoozeRule:g,unsnoozeRule:j,scheduledSnoozes:x,activeSnoozes:S,hasTitle:!1}))}]];return Object(d.jsx)(r.EuiContextMenu,{"data-test-subj":"ruleStatusMenu",initialPanelId:0,panels:I})},p=e=>{if(!e)return;const t=i()(e).locale("en").fromNow(!0),[s,n]=t.split(" ");let a,l="a"===s||"an"===s?1:parseInt(s,10);switch(n){case"year":case"years":a="M",l*=12;break;case"month":case"months":a="M";break;case"day":case"days":a="d";break;case"hour":case"hours":a="h";break;case"minute":case"minutes":a="m"}return a?`${l}${a}`:void 0},O=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.enabledRuleStatus",{defaultMessage:"Enabled"}),m=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.disabledRuleStatus",{defaultMessage:"Disabled"}),x=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozedRuleStatus",{defaultMessage:"Snoozed"}),f=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeMenuTitle",{defaultMessage:"Snooze"}),S=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusDropdownMenuLabel",{defaultMessage:"Change rule status or snooze"}),E=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.remainingSnoozeIndefinite",{defaultMessage:"Indefinitely"})},98:function(e,t,s){"use strict";s.r(t),s.d(t,"RuleTagFilter",(function(){return u})),s.d(t,"default",(function(){return u}));var n=s(1),a=s.n(n),l=s(88),i=s(4),o=s(0);const r=e=>`ruleTagFilterOption-${e}`,u=e=>{const{tags:t=[],selectedTags:s=[],isGrouped:u=!1,isLoading:c=!1,loadingMessage:d,noMatchesMessage:b,emptyMessage:g,errorMessage:j,dataTestSubj:p="ruleTagFilter",selectableDataTestSubj:O="ruleTagFilterSelectable",optionDataTestSubj:m=r,buttonDataTestSubj:x="ruleTagFilterButton",onChange:f=(()=>{})}=e,[S,E]=Object(n.useState)(!1),T=Object(n.useMemo)((()=>[...new Set([...t,...s])].sort()),[t,s]),h=Object(n.useMemo)((()=>T.map((e=>({label:e,checked:s.includes(e)?"on":void 0,"data-test-subj":m(e)})))),[T,s,m]),I=Object(n.useCallback)((e=>{const t=e.reduce(((e,t)=>("on"===t.checked&&(e=[...e,t.label]),e)),[]);f(t)}),[f]),y=()=>{E(!S)},k=Object(n.useMemo)((()=>u?a.a.Fragment:i.EuiFilterGroup),[u]);return Object(o.jsx)(k,null,Object(o.jsx)(i.EuiPopover,{"data-test-subj":p,isOpen:S,closePopover:y,button:Object(o.jsx)(i.EuiFilterButton,{"data-test-subj":x,iconType:"arrowDown",hasActiveFilters:s.length>0,numActiveFilters:s.length,numFilters:s.length,onClick:y},Object(o.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.ruleTagFilterButton",defaultMessage:"Tags"}))},Object(o.jsx)(i.EuiSelectable,{searchable:!0,"data-test-subj":O,isLoading:c,options:h,loadingMessage:d,noMatchesMessage:b,emptyMessage:g,errorMessage:j,onChange:I},((e,t)=>Object(o.jsx)(a.a.Fragment,null,t,Object(o.jsx)(i.EuiSpacer,{size:"xs"}),e)))))}},99:function(e,t,s){"use strict";s.r(t),s.d(t,"RuleStatusFilter",(function(){return u})),s.d(t,"default",(function(){return u}));var n=s(1),a=s(88),l=s(4),i=s(0);const o=["enabled","disabled","snoozed"],r=e=>`ruleStatusFilterOption-${e}`,u=e=>{const{selectedStatuses:t=[],dataTestSubj:s="ruleStatusFilter",selectDataTestSubj:u="ruleStatusFilterSelect",buttonDataTestSubj:c="ruleStatusFilterButton",optionDataTestSubj:d=r,onChange:b=(()=>{})}=e,[g,j]=Object(n.useState)(!1),p=Object(n.useCallback)((e=>()=>{t.includes(e)?b(t.filter((t=>t!==e))):b([...t,e])}),[t,b]),O=Object(n.useCallback)((()=>{j((e=>!e))}),[j]);return Object(i.jsx)(l.EuiFilterGroup,{"data-test-subj":s},Object(i.jsx)(l.EuiPopover,{isOpen:g,closePopover:()=>j(!1),button:Object(i.jsx)(l.EuiFilterButton,{"data-test-subj":c,iconType:"arrowDown",hasActiveFilters:t.length>0,numActiveFilters:t.length,numFilters:t.length,onClick:O},Object(i.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.ruleStateFilterButton",defaultMessage:"Rule state"}))},Object(i.jsx)("div",{"data-test-subj":u},o.map((e=>Object(i.jsx)(l.EuiSelectableListItem,{key:e,"data-test-subj":d(e),onClick:p(e),checked:t.includes(e)?"on":void 0},(e=>"enabled"===e?Object(i.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.ruleStateFilter.enabledOptionText",defaultMessage:"Rule is enabled"}):"disabled"===e?Object(i.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.ruleStateFilter.disabledOptionText",defaultMessage:"Rule is disabled"}):"snoozed"===e?Object(i.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.ruleStateFilter.snoozedOptionText",defaultMessage:"Rule has snoozed"}):void 0)(e)))))))}}}]);