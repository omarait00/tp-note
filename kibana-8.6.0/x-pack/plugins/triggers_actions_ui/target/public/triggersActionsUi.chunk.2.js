/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[2],{120:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o}));const s=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},r=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},l=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute},a=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function i(e,t){var n,s;return null!==(n=null==t||null===(s=t.authorizedConsumers[e.consumer])||void 0===s?void 0:s.all)&&void 0!==n&&n}const o=e=>{var t,n;return null==e||null===(t=e.management)||void 0===t||null===(n=t.security)||void 0===n?void 0:n.api_keys}},130:function(e,t,n){"use strict";n.r(t),n.d(t,"NOTIFY_WHEN_OPTIONS",(function(){return p})),n.d(t,"RuleNotifyWhen",(function(){return j}));var s=n(1),r=n.n(s),l=n(3),a=n(88),i=n(4),o=n(124),u=n(63),c=n(50),d=n(0);const p=[{value:"onActionGroupChange",inputDisplay:l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActionGroupChange.display",{defaultMessage:"On status changes"}),"data-test-subj":"onActionGroupChange",dropdownDisplay:Object(d.jsx)(r.a.Fragment,null,Object(d.jsx)("strong",null,Object(d.jsx)(a.FormattedMessage,{defaultMessage:"On status changes",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActionGroupChange.label"})),Object(d.jsx)(i.EuiText,{size:"s",color:"subdued"},Object(d.jsx)("p",null,Object(d.jsx)(a.FormattedMessage,{defaultMessage:"Actions run if the alert status changes.",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActionGroupChange.description"}))))},{value:"onActiveAlert",inputDisplay:l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActiveAlert.display",{defaultMessage:"On check intervals"}),"data-test-subj":"onActiveAlert",dropdownDisplay:Object(d.jsx)(r.a.Fragment,null,Object(d.jsx)("strong",null,Object(d.jsx)(a.FormattedMessage,{defaultMessage:"On check intervals",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActiveAlert.label"})),Object(d.jsx)(i.EuiText,{size:"s",color:"subdued"},Object(d.jsx)("p",null,Object(d.jsx)(a.FormattedMessage,{defaultMessage:"Actions run if rule conditions are met.",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActiveAlert.description"}))))},{value:"onThrottleInterval",inputDisplay:l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onThrottleInterval.display",{defaultMessage:"On custom action intervals"}),"data-test-subj":"onThrottleInterval",dropdownDisplay:Object(d.jsx)(r.a.Fragment,null,Object(d.jsx)("strong",null,Object(d.jsx)(a.FormattedMessage,{defaultMessage:"On custom action intervals",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onThrottleInterval.label"})),Object(d.jsx)(i.EuiText,{size:"s",color:"subdued"},Object(d.jsx)("p",null,Object(d.jsx)(a.FormattedMessage,{defaultMessage:"Actions run if rule conditions are met.",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onThrottleInterval.description"}))))}],j=({rule:e,throttle:t,throttleUnit:n,onNotifyWhenChange:j,onThrottleChange:b})=>{const[g,m]=Object(s.useState)(t||1),[x,O]=Object(s.useState)(!1),[f,h]=Object(s.useState)("onActionGroupChange");Object(s.useEffect)((()=>{e.notifyWhen?h(e.notifyWhen):h(e.throttle?"onThrottleInterval":"onActiveAlert")}),[e]),Object(s.useEffect)((()=>{O("onThrottleInterval"===f)}),[f]);const y=Object(s.useCallback)((e=>{b("onThrottleInterval"===e?g:null,n),j(e),h(e)}),[]),v=Object(d.jsx)(r.a.Fragment,null,Object(d.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.renotifyFieldLabel",defaultMessage:"Notify"})," ",Object(d.jsx)(i.EuiIconTip,{position:"right",type:"questionInCircle",content:l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.renotifyWithTooltip",{defaultMessage:"Define how often alerts generate actions."})}));return Object(d.jsx)(r.a.Fragment,null,Object(d.jsx)(i.EuiFormRow,{fullWidth:!0,label:v},Object(d.jsx)(i.EuiFlexGroup,{gutterSize:"s"},Object(d.jsx)(i.EuiFlexItem,null,Object(d.jsx)(i.EuiSuperSelect,{"data-test-subj":"notifyWhenSelect",options:p,valueOfSelected:f,onChange:y}),x&&Object(d.jsx)(r.a.Fragment,null,Object(d.jsx)(i.EuiSpacer,null),Object(d.jsx)(i.EuiFormRow,{fullWidth:!0},Object(d.jsx)(i.EuiFlexGroup,{gutterSize:"s"},Object(d.jsx)(i.EuiFlexItem,null,Object(d.jsx)(i.EuiFieldNumber,{fullWidth:!0,min:1,value:g,name:"throttle","data-test-subj":"throttleInput",prepend:l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.label",{defaultMessage:"Every"}),onChange:e=>{Object(u.pipe)(Object(o.some)(e.target.value.trim()),Object(o.filter)((e=>""!==e)),Object(o.map)((e=>parseInt(e,10))),Object(o.filter)((e=>!isNaN(e))),Object(o.map)((e=>{m(e),b(e,n)})))}})),Object(d.jsx)(i.EuiFlexItem,{grow:!1},Object(d.jsx)(i.EuiSelect,{"data-test-subj":"throttleUnitInput",value:n,options:Object(c.b)(null!=t?t:1),onChange:e=>{b(t,e.target.value)}})))))))))}},131:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(125);async function r({http:e}){return await e.get(`${s.a}/_config`)}},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(21);const r=(e,t)=>{const{rule:n}=e;switch(t.command.type){case"setRule":{const{key:n,value:s}=t.payload;return"rule"===n?{...e,rule:s}:e}case"setProperty":{const{key:r,value:l}=t.payload;return Object(s.isEqual)(n[r],l)?e:{...e,rule:{...n,[r]:l}}}case"setScheduleProperty":{const{key:r,value:l}=t.payload;return n.schedule&&Object(s.isEqual)(n.schedule[r],l)?e:{...e,rule:{...n,schedule:{...n.schedule,[r]:l}}}}case"setRuleParams":{const{key:r,value:l}=t.payload;return Object(s.isEqual)(n.params[r],l)?e:{...e,rule:{...n,params:{...n.params,[r]:l}}}}case"setRuleActionParams":{const{key:r,value:l,index:a}=t.payload;if(void 0===a||null==n.actions[a]||n.actions[a][r]&&Object(s.isEqual)(n.actions[a][r],l))return e;{const t=n.actions.splice(a,1)[0],s={...t,params:{...t.params,[r]:l}};return n.actions.splice(a,0,s),{...e,rule:{...n,actions:[...n.actions]}}}}case"setRuleActionProperty":{const{key:r,value:l,index:a}=t.payload;if(void 0===a||Object(s.isEqual)(n.actions[a][r],l))return e;{const t={...n.actions.splice(a,1)[0],[r]:l};return n.actions.splice(a,0,t),{...e,rule:{...n,actions:[...n.actions]}}}}}}},149:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return a}));var s=n(21);function r(e){return t=>{if(null==t)throw new Error(e);return t}}function l(e,t,n){const r="function"==typeof t?t:Object(s.constant)(t);return t=>{const s=new Set(t.map(n));for(const t of e.values())if(!s.has(t))throw new Error(r(t));return t}}function a(e,t,n,r){return Object.keys(t).forEach((n=>{t[n].length>=1&&void 0===Object(s.get)(e.params,n)&&Object(s.set)(e.params,n,null)})),Object.keys(n).forEach((t=>{n[t].length>=1&&void 0===Object(s.get)(e,t)&&Object(s.set)(e,t,null)})),r.forEach(((t,n)=>{const r=e.actions.length>n?e.actions[n]:null;r&&Object.keys(t).forEach((e=>{t[e].length>=1&&void 0===Object(s.get)(r.params,e)&&Object(s.set)(r.params,e,null)}))})),e}},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n(21),r=n(3);function l(e){return!1===(null==e?void 0:e.enabledInLicense)?(e=>({isEnabled:!1,message:r.i18n.translate("xpack.triggersActionsUI.checkRuleTypeEnabled.ruleTypeDisabledByLicenseMessage",{defaultMessage:"This rule type requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(s.upperFirst)(e.minimumLicenseRequired)}})}))(e):{isEnabled:!0}}},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n(17),r=n(2);function l(e){return e&&Object(s.parseDuration)(e)>Object(s.parseDuration)(r.d)?e:r.d}},167:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return u}));var s=n(21),r=n(3),l=n(104);function a(e,t,n){const s=t?t.validate(e.params).errors:[],a=function(e,t){const n={errors:{}},s={name:new Array,"schedule.interval":new Array,ruleTypeId:new Array,actionConnectors:new Array};n.errors=s,e.name||s.name.push(r.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.requiredNameText",{defaultMessage:"Name is required."})),e.schedule.interval.length<2?s["schedule.interval"].push(r.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.requiredIntervalText",{defaultMessage:"Check interval is required."})):t.minimumScheduleInterval&&t.minimumScheduleInterval.enforce&&Object(l.parseDuration)(e.schedule.interval)<Object(l.parseDuration)(t.minimumScheduleInterval.value)&&s["schedule.interval"].push(r.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.belowMinimumText",{defaultMessage:"Interval must be at least {minimum}.",values:{minimum:Object(l.formatDuration)(t.minimumScheduleInterval.value,!0)}})),e.ruleTypeId||s.ruleTypeId.push(r.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.requiredRuleTypeIdText",{defaultMessage:"Rule type is required."}));const a=e.actions.find((e=>/^\d+$/.test(e.id)&&Object.keys(e.params).length>0));return void 0!==a&&s.actionConnectors.push(r.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.requiredActionConnector",{defaultMessage:"Action for {actionTypeId} connector is required.",values:{actionTypeId:a.actionTypeId}})),n}(e,n).errors;return{ruleParamsErrors:s,ruleBaseErrors:a,ruleErrors:{...s,...a}}}async function i(e,t){return await Promise.all(e.actions.map((async e=>{var n;return(await(null===(n=t.get(e.actionTypeId))||void 0===n?void 0:n.validateParams(e.params))).errors})))}const o=e=>!!Object.values(e).find((e=>Object(s.isObject)(e)?o(e):e.length>=1));function u(e,t,n){return!o(t)&&n.every((e=>!o(e)))}},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n(1);var s=n(4),r=n(88),l=n(3),a=n(0);const i=({onConfirm:e,onCancel:t})=>Object(a.jsx)(s.EuiConfirmModal,{title:l.i18n.translate("xpack.triggersActionsUI.sections.confirmRuleClose.confirmRuleCloseTitle",{defaultMessage:"Discard unsaved changes to rule?"}),onCancel:t,onConfirm:e,buttonColor:"danger",confirmButtonText:l.i18n.translate("xpack.triggersActionsUI.sections.confirmRuleClose.confirmRuleCloseConfirmButtonText",{defaultMessage:"Discard changes"}),cancelButtonText:l.i18n.translate("xpack.triggersActionsUI.sections.confirmRuleClose.confirmRuleCloseCancelButtonText",{defaultMessage:"Cancel"}),defaultFocusedButton:"confirm","data-test-subj":"confirmRuleCloseModal"},Object(a.jsx)("p",null,Object(a.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.confirmRuleClose.confirmRuleCloseMessage",defaultMessage:"You can't recover unsaved changes."})))},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var s=n(67),r=n.n(s),l=n(21);const a=["tags","schedule","actions","notifyWhen"];function i(e){const{name:t,ruleTypeId:n,throttle:s}=e;return{...t&&t.length>0?{name:t}:{},...n&&n.length>0?{ruleTypeId:n}:{},...s&&s.length>0?{throttle:s}:{}}}function o(e,t,n){let s=r()(Object(l.pick)(e,a),Object(l.pick)(t,a));n&&(s=s&&r()(e.params,t.params));const o=r()(i(e),i(t));return!s||!o}function u(e,t){return!r()(e,t)}},179:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var s=n(1),r=n.n(s),l=n(3),a=n(88),i=n(4),o=n(21),u=n(104),c=n(17),d=n(19),p=n(50),j=n(20),b=n(120),g=n(0);const m=({solutions:e,onChange:t})=>{const[n,r]=Object(s.useState)([]),[l,o]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{t&&t(n)}),[n]),Object(g.jsx)(i.EuiFilterGroup,null,Object(g.jsx)(i.EuiPopover,{isOpen:l,closePopover:()=>o(!1),button:Object(g.jsx)(i.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:n.length>0,numActiveFilters:n.length,numFilters:n.length,onClick:()=>o(!l),"data-test-subj":"solutionsFilterButton"},Object(g.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.solutionFilterLabel",defaultMessage:"Filter by use case"}))},Object(g.jsx)("div",{className:"euiFilterSelect__items"},[...e.entries()].map((([e,t])=>Object(g.jsx)(i.EuiFilterSelectItem,{key:e,onClick:()=>{const t=n.includes(e);r(t?n.filter((t=>t!==e)):[...n,e])},checked:n.includes(e)?"on":void 0,"data-test-subj":`solution${e}FilterOption`},t))))))};n(185);var x=n(22),O=n(2),f=n(130),h=n(155),y=n(9),v=n(62),I=n(68),T=n(166);const E=/^[1-9][0-9]*$/;function F(e,t){var n;return null===(n=t.find((t=>t.id===e)))||void 0===n?void 0:n.name}const A=({rule:e,config:t,canChangeTrigger:n=!0,dispatch:A,errors:C,setHasActionsDisabled:M,setHasActionsWithBrokenConnector:S,operation:R,ruleTypeRegistry:U,actionTypeRegistry:w,metadata:N,filteredRuleTypes:D,connectorFeatureId:W=d.AlertingConnectorFeatureId,onChangeMetaData:G})=>{var z,L,_;const{notifications:{toasts:P},docLinks:q,application:{capabilities:B},kibanaFeatures:$,charts:H,data:V,unifiedSearch:Y,dataViews:K}=Object(x.b)().services,J=Object(b.f)(B),[Q,X]=Object(s.useState)(null),Z=Object(T.a)(null===(z=t.minimumScheduleInterval)||void 0===z?void 0:z.value),ee=Object(u.getDurationNumberInItsUnit)(Z),te=Object(u.getDurationUnitValue)(Z),[ne,se]=Object(s.useState)(e.schedule.interval?Object(u.getDurationNumberInItsUnit)(e.schedule.interval):ee),[re,le]=Object(s.useState)(e.schedule.interval?Object(u.getDurationUnitValue)(e.schedule.interval):te),[ae,ie]=Object(s.useState)(e.throttle?Object(u.getDurationNumberInItsUnit)(e.throttle):null),[oe,ue]=Object(s.useState)(e.throttle?Object(u.getDurationUnitValue)(e.throttle):"h"),[ce,de]=Object(s.useState)(void 0),[pe,je]=Object(s.useState)([]),[be,ge]=Object(s.useState)([]),[me,xe]=Object(s.useState)(),[Oe,fe]=Object(s.useState)(),[he,ye]=Object(s.useState)(void 0),[ve,Ie]=Object(s.useState)([]);let Te=!1;const{ruleTypes:Ee,error:Fe,ruleTypeIndex:Ae,ruleTypesIsLoading:ke}=Object(I.a)({filteredRuleTypes:D});Object(s.useEffect)((()=>{e.ruleTypeId&&null!=Ae&&Ae.has(e.ruleTypeId)&&de(Ae.get(e.ruleTypeId).defaultActionGroupId);const t=(n=Ee,U.list().reduce(((e,t)=>{const s=n.find((e=>t.id===e.id));return s&&e.push({ruleType:s,ruleTypeModel:t}),e}),[]).filter((t=>t.ruleType&&Object(b.a)(e,t.ruleType))).filter((t=>e.consumer===c.ALERTS_FEATURE_ID?!t.ruleTypeModel.requiresAppContext:t.ruleType.producer===e.consumer)));var n;je(t);const s=t.reduce(((e,t)=>{var n;return e.has(t.ruleType.producer)||e.set(t.ruleType.producer,null!==(n=$?F(t.ruleType.producer,$):Object(o.capitalize)(t.ruleType.producer))&&void 0!==n?n:Object(o.capitalize)(t.ruleType.producer)),e}),new Map);ye(new Map([...s.entries()].sort((([,e],[,t])=>e.localeCompare(t)))))}),[Ee,Ae,e.ruleTypeId,$,e,U]),Object(s.useEffect)((()=>{Fe&&P.addDanger({title:l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.unableToLoadRuleTypesMessage",{defaultMessage:"Unable to load rule types"})})}),[Fe,P]),Object(s.useEffect)((()=>{X(e.ruleTypeId?U.get(e.ruleTypeId):null),e.ruleTypeId&&Ae&&Ae.has(e.ruleTypeId)&&de(Ae.get(e.ruleTypeId).defaultActionGroupId)}),[e,e.ruleTypeId,Ae,U]),Object(s.useEffect)((()=>{if(e.schedule.interval){const t=Object(u.getDurationNumberInItsUnit)(e.schedule.interval),n=Object(u.getDurationUnitValue)(e.schedule.interval);se(t),le(n)}}),[e.schedule.interval,ee,te]);const Ce=Object(s.useCallback)(((e,t)=>{A({command:{type:"setProperty"},payload:{key:e,value:t}})}),[A]),Me=Object(s.useCallback)((e=>Ce("actions",e)),[Ce]),Se=(e,t)=>{A({command:{type:"setScheduleProperty"},payload:{key:e,value:t}})},Re=(e,t,n)=>{A({command:{type:"setRuleActionProperty"},payload:{key:e,value:t,index:n}})},Ue=Object(s.useCallback)(((e,t,n)=>{A({command:{type:"setRuleActionParams"},payload:{key:e,value:t,index:n}})}),[A]);Object(s.useEffect)((()=>{const e=me?me.trim().toLocaleLowerCase():null;ge(pe.filter((e=>ve.length>0?ve.find((t=>e.ruleType.producer===t)):e)).filter((t=>e?t.ruleType.name.toString().toLocaleLowerCase().includes(e)||t.ruleType.producer.toLocaleLowerCase().includes(e)||t.ruleTypeModel.description.toLocaleLowerCase().includes(e):t)))}),[U,pe,me,JSON.stringify(ve)]);const we=null!=e&&e.ruleTypeId?null==Ae?void 0:Ae.get(null==e?void 0:e.ruleTypeId):void 0,Ne=null==we||null===(L=we.recoveryActionGroup)||void 0===L?void 0:L.id,De=e.tags?e.tags.map((e=>({label:e}))):[],We=Object(s.useCallback)(((e,t,n)=>{var s;return Object(c.isActionGroupDisabledForActionTypeId)(t===(null==e||null===(s=e.recoveryActionGroup)||void 0===s?void 0:s.id)?c.RecoveredActionGroup.id:t,n)}),[]),Ge=Q?Q.ruleParamsExpression:null,ze=be.reduce(((e,t)=>{const n=t.ruleType.producer;if(n){const s=Object(h.a)(t.ruleType);s.isEnabled||(Te=!0),(e[n]=e[n]||[]).push({name:t.ruleType.name,id:t.ruleTypeModel.id,checkEnabledResult:s,ruleTypeItem:t.ruleTypeModel})}return e}),{}),Le=Object.entries(ze).sort(((e,t)=>function(e,t,n){const s=e[0],r=t[0],l=e[1],a=t[1],i=void 0!==l.find((e=>e.checkEnabledResult.isEnabled)),o=void 0!==a.find((e=>e.checkEnabledResult.isEnabled));return i&&!o?-1:!i&&o?1:n?n.get(s).localeCompare(n.get(r)):s.localeCompare(r)}(e,t,he))).map((([e,t],n)=>{var r;return Object(g.jsx)(s.Fragment,{key:`group${n}`},Object(g.jsx)(i.EuiFlexGroup,{gutterSize:"none",alignItems:"center",className:"triggersActionsUI__ruleTypeNodeHeading"},Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiTitle,{"data-test-subj":`ruleType${n}Group`,size:"xxxs",textTransform:"uppercase"},Object(g.jsx)(i.EuiTextColor,{color:"subdued"},null!==(r=$?F(e,$):Object(o.capitalize)(e))&&void 0!==r?r:Object(o.capitalize)(e)))),Object(g.jsx)(i.EuiFlexItem,{grow:!1},Object(g.jsx)(i.EuiNotificationBadge,{color:"subdued"},t.length))),Object(g.jsx)(i.EuiHorizontalRule,{size:"full",margin:"xs"}),Object(g.jsx)(i.EuiListGroup,{flush:!0,gutterSize:"m",size:"l",maxWidth:!1},t.sort(((e,t)=>function(e,t){return!0===e.checkEnabledResult.isEnabled&&!1===t.checkEnabledResult.isEnabled?-1:!1===e.checkEnabledResult.isEnabled&&!0===t.checkEnabledResult.isEnabled?1:e.name.localeCompare(t.name)}(e,t))).map(((e,t)=>{const n=Object(g.jsx)("span",null,Object(g.jsx)("strong",null,e.name),Object(g.jsx)(i.EuiText,{color:"subdued",size:"s"},Object(g.jsx)("p",null,e.ruleTypeItem.description)));return Object(g.jsx)(i.EuiListGroupItem,{wrapText:!0,key:t,"data-test-subj":`${e.id}-SelectOption`,color:"primary",label:e.checkEnabledResult.isEnabled?n:Object(g.jsx)(i.EuiToolTip,{position:"top","data-test-subj":`${e.id}-disabledTooltip`,content:e.checkEnabledResult.message},n),isDisabled:!e.checkEnabledResult.isEnabled,onClick:()=>{Ce("ruleTypeId",e.id),Me([]),X(e.ruleTypeItem),Ce("params",{}),Ae&&Ae.has(e.id)&&de(Ae.get(e.id).defaultActionGroupId)}})}))),Object(g.jsx)(i.EuiSpacer,null))})),_e=Object(g.jsx)(r.a.Fragment,null,Object(g.jsx)(i.EuiHorizontalRule,null),Object(g.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiTitle,{size:"s","data-test-subj":"selectedRuleTypeTitle"},Object(g.jsx)("h5",{id:"selectedRuleTypeTitle"},e.ruleTypeId&&Ae&&Ae.has(e.ruleTypeId)?Ae.get(e.ruleTypeId).name:""))),n?Object(g.jsx)(i.EuiFlexItem,{grow:!1},Object(g.jsx)(i.EuiButtonIcon,{iconType:"cross",color:"danger","aria-label":l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.changeRuleTypeAriaLabel",{defaultMessage:"Delete"}),onClick:()=>{Ce("ruleTypeId",null),X(null),Ce("params",{})}})):null),(null==Q?void 0:Q.description)&&Object(g.jsx)(i.EuiFlexGroup,null,Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiText,{color:"subdued",size:"s","data-test-subj":"ruleDescription"},Q.description," ",(null==Q?void 0:Q.documentationUrl)&&Object(g.jsx)(i.EuiLink,{external:!0,target:"_blank","data-test-subj":"ruleDocumentationLink",href:"function"==typeof Q.documentationUrl?Q.documentationUrl(q):Q.documentationUrl},Object(g.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.documentationLabel",defaultMessage:"Learn more"}))))),Object(g.jsx)(i.EuiHorizontalRule,null),Ge&&ce&&e.ruleTypeId&&we?Object(g.jsx)(i.EuiErrorBoundary,null,Object(g.jsx)(s.Suspense,{fallback:Object(g.jsx)(v.a,null,Object(g.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.loadingRuleTypeParamsDescription",defaultMessage:"Loading rule type params…"}))},Object(g.jsx)(Ge,{ruleParams:e.params,ruleInterval:`${null!=ne?ne:1}${re}`,ruleThrottle:`${null!=ae?ae:1}${oe}`,alertNotifyWhen:null!==(_=e.notifyWhen)&&void 0!==_?_:"onActionGroupChange",errors:C,setRuleParams:(e,t)=>{A({command:{type:"setRuleParams"},payload:{key:e,value:t}})},setRuleProperty:Ce,defaultActionGroupId:ce,actionGroups:we.actionGroups,metadata:N,charts:H,data:V,dataViews:K,unifiedSearch:Y,onChangeMetaData:G}))):null,J&&ce&&Q&&e.ruleTypeId&&we?Object(g.jsx)(r.a.Fragment,null,C.actionConnectors.length>=1?Object(g.jsx)(r.a.Fragment,null,Object(g.jsx)(i.EuiSpacer,null),Object(g.jsx)(i.EuiCallOut,{color:"danger",size:"s",title:C.actionConnectors}),Object(g.jsx)(i.EuiSpacer,null)):null,Object(g.jsx)(j.a,{actions:e.actions,setHasActionsDisabled:M,setHasActionsWithBrokenConnector:S,messageVariables:we.actionVariables,defaultActionGroupId:ce,featureId:W,isActionGroupDisabledForActionType:(e,t)=>We(we,e,t),actionGroups:we.actionGroups.map((e=>e.id===we.recoveryActionGroup.id?{...e,omitMessageVariables:we.doesSetRecoveryContext?"keepContext":"all",defaultActionMessage:(null==Q?void 0:Q.defaultRecoveryMessage)||O.n}:{...e,defaultActionMessage:null==Q?void 0:Q.defaultActionMessage})),recoveryActionGroup:Ne,setActionIdByIndex:(e,t)=>Re("id",e,t),setActionGroupIdByIndex:(e,t)=>Re("group",e,t),setActions:Me,setActionParamsProperty:Ue,actionTypeRegistry:w})):null),Pe=Object(g.jsx)(r.a.Fragment,null,Object(g.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.checkFieldLabel",defaultMessage:"Check every"})," ",Object(g.jsx)(i.EuiIconTip,{position:"right",type:"questionInCircle",content:l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.checkWithTooltip",{defaultMessage:"Define how often to evaluate the condition. Checks are queued; they run as close to the defined value as capacity allows."})}));return Object(g.jsx)(i.EuiForm,null,Object(g.jsx)(i.EuiFlexGrid,{columns:2},Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiFormRow,{fullWidth:!0,id:"ruleName",label:Object(g.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.ruleNameLabel",defaultMessage:"Name"}),isInvalid:C.name.length>0&&void 0!==e.name,error:C.name},Object(g.jsx)(i.EuiFieldText,{fullWidth:!0,autoFocus:!0,isInvalid:C.name.length>0&&void 0!==e.name,name:"name","data-test-subj":"ruleNameInput",value:e.name||"",onChange:e=>{Ce("name",e.target.value)},onBlur:()=>{e.name||Ce("name","")}}))),Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiFormRow,{fullWidth:!0,label:l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.tagsFieldLabel",{defaultMessage:"Tags (optional)"})},Object(g.jsx)(i.EuiComboBox,{noSuggestions:!0,fullWidth:!0,"data-test-subj":"tagsComboBox",selectedOptions:De,onCreateOption:e=>{const t=[...De,{label:e}];Ce("tags",t.map((e=>e.label)))},onChange:e=>{Ce("tags",e.map((e=>e.label)))},onBlur:()=>{e.tags||Ce("tags",[])}})))),Object(g.jsx)(i.EuiSpacer,{size:"m"}),Object(g.jsx)(i.EuiFlexGrid,{columns:2},Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiFormRow,{fullWidth:!0,"data-test-subj":"intervalFormRow",display:"rowCompressed",helpText:t&&t.minimumScheduleInterval?C["schedule.interval"].length>0?"":t.minimumScheduleInterval.enforce?l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.checkEveryHelpText",{defaultMessage:"Interval must be at least {minimum}.",values:{minimum:Object(u.formatDuration)(t.minimumScheduleInterval.value,!0)}}):e.schedule.interval&&Object(u.parseDuration)(e.schedule.interval)<Object(u.parseDuration)(t.minimumScheduleInterval.value)?l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.checkEveryHelpSuggestionText",{defaultMessage:"Intervals less than {minimum} are not recommended due to performance considerations.",values:{minimum:Object(u.formatDuration)(t.minimumScheduleInterval.value,!0)}}):"":"",label:Pe,isInvalid:C["schedule.interval"].length>0,error:C["schedule.interval"]},Object(g.jsx)(i.EuiFlexGroup,{gutterSize:"s"},Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiFieldNumber,{fullWidth:!0,min:1,isInvalid:C["schedule.interval"].length>0,value:ne||"",name:"interval","data-test-subj":"intervalInput",onChange:e=>{const t=e.target.value;if(""===t||E.test(t)){const e=""===t?"":parseInt(t,10);se(e||void 0),Se("interval",`${e}${re}`)}}})),Object(g.jsx)(i.EuiFlexItem,{grow:!1},Object(g.jsx)(i.EuiSelect,{fullWidth:!0,value:re,options:Object(p.b)(null!=ne?ne:1),onChange:e=>{le(e.target.value),Se("interval",`${ne}${e.target.value}`)},"data-test-subj":"intervalInputUnit"}))))),Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(f.RuleNotifyWhen,{rule:e,throttle:ae,throttleUnit:oe,onNotifyWhenChange:Object(s.useCallback)((e=>{Ce("notifyWhen",e)}),[Ce]),onThrottleChange:Object(s.useCallback)(((e,t)=>{ie(e),ue(t),Ce("throttle",e?`${e}${t}`:null)}),[Ce])}))),Object(g.jsx)(i.EuiSpacer,{size:"m"}),Q?Object(g.jsx)(r.a.Fragment,null,_e):pe.length?Object(g.jsx)(r.a.Fragment,null,Object(g.jsx)(i.EuiHorizontalRule,null),Object(g.jsx)(i.EuiFormRow,{fullWidth:!0,labelAppend:Te&&Object(g.jsx)(i.EuiTitle,{size:"xxs"},Object(g.jsx)(i.EuiLink,{href:y.VIEW_LICENSE_OPTIONS_LINK,target:"_blank",external:!0,className:"actActionForm__getMoreActionsLink"},Object(g.jsx)(a.FormattedMessage,{defaultMessage:"Get more rule types",id:"xpack.triggersActionsUI.sections.actionForm.getMoreRuleTypesTitle"}))),label:Object(g.jsx)(i.EuiTitle,{size:"xxs"},Object(g.jsx)("h5",null,Object(g.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.ruleTypeSelectLabel",defaultMessage:"Select rule type"})))},Object(g.jsx)(i.EuiFlexGroup,{gutterSize:"s"},Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiFieldSearch,{fullWidth:!0,"data-test-subj":"ruleSearchField",onChange:e=>{fe(e.target.value),""===e.target.value&&xe("")},onKeyUp:e=>{13===e.keyCode&&xe(Oe)},placeholder:l.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.searchPlaceholderTitle",{defaultMessage:"Search"})})),he?Object(g.jsx)(i.EuiFlexItem,{grow:!1},Object(g.jsx)(m,{key:"solution-filter",solutions:he,onChange:e=>Ie(e)})):null)),Object(g.jsx)(i.EuiSpacer,null),C.ruleTypeId.length>=1&&void 0!==e.ruleTypeId?Object(g.jsx)(r.a.Fragment,null,Object(g.jsx)(i.EuiSpacer,null),Object(g.jsx)(i.EuiCallOut,{color:"danger",size:"s",title:C.ruleTypeId}),Object(g.jsx)(i.EuiSpacer,null)):null,Le):Ae&&!ke?Object(g.jsx)(k,{operation:R}):Object(g.jsx)(v.a,null,Object(g.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.loadingRuleTypesDescription",defaultMessage:"Loading rule types…"})))},k=({operation:e})=>Object(g.jsx)(i.EuiEmptyPrompt,{iconType:"lock","data-test-subj":"noAuthorizedRuleTypesPrompt",titleSize:"xs",title:Object(g.jsx)("h2",null,Object(g.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.error.noAuthorizedRuleTypesTitle",defaultMessage:"You have not been authorized to {operation} any rule types",values:{operation:e}})),body:Object(g.jsx)("div",null,Object(g.jsx)("p",{role:"banner"},Object(g.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.error.noAuthorizedRuleTypes",defaultMessage:"In order to {operation} a Rule you need to have been granted the appropriate privileges.",values:{operation:e}})))})},185:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(186);case"v8light":return n(188)}},186:function(e,t,n){var s=n(58),r=n(187);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);s(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},187:function(e,t,n){(t=n(59)(!1)).push([e.i,".triggersActionsUI__ruleTypeNodeHeading{margin-left:8px;margin-right:8px}",""]),e.exports=t},188:function(e,t,n){var s=n(58),r=n(189);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);s(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},189:function(e,t,n){(t=n(59)(!1)).push([e.i,".triggersActionsUI__ruleTypeNodeHeading{margin-left:8px;margin-right:8px}",""]),e.exports=t}}]);