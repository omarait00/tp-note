/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[28,40],{125:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var s=n(90),a=n.n(s),o=n(3);const i=new RegExp(`^([\\d\\.]+)\\s*(${a.a.units.join("|")})$`),l=e=>{if(e){const t=e.match(i);if(t)return{value:Number(t[1]),unit:t[2]}}throw new Error(o.i18n.translate("xpack.triggersActionsUI.parseInterval.errorMessage",{defaultMessage:"{value} is not an interval string",values:{value:e}}))};n(27);const u="/internal/triggers_actions_ui"},97:function(e,t,n){"use strict";n.r(t),n.d(t,"RuleStatusDropdown",(function(){return j})),n.d(t,"futureTimeToInterval",(function(){return p})),n.d(t,"default",(function(){return j}));var s=n(1),a=n.n(s),o=n(89),i=n.n(o),l=n(3),u=n(4),c=n(127),r=n(13),d=n(0);const b="LL @ LT",j=({rule:e,onRuleChanged:t,disableRule:n,enableRule:a,snoozeRule:o,unsnoozeRule:l,isEditable:c,hideSnoozeOption:j=!1,direction:p="column"})=>{const[x,w]=Object(s.useState)(e.enabled),[h,k]=Object(s.useState)(!j&&Object(r.c)(e));Object(s.useEffect)((()=>{w(e.enabled)}),[e.enabled]),Object(s.useEffect)((()=>{j||k(Object(r.c)(e))}),[e,j]);const[E,y]=Object(s.useState)(!1),[C,v]=Object(s.useState)(!1),I=Object(s.useCallback)((()=>v((e=>!e))),[v]),R=Object(s.useCallback)((()=>v(!1)),[v]),T=Object(s.useCallback)((async s=>{if(e.enabled!==s){y(!0);try{s?await a():await n(),w(!x),t()}finally{y(!1)}}}),[e.enabled,x,t,a,n]),L=Object(s.useCallback)((async e=>{try{await o(e),t()}finally{R()}}),[o,t,R]),M=Object(s.useCallback)((async e=>{try{await l(e),t()}finally{R()}}),[l,t,R]),A=x?h?"warning":"primary":"default",D=x?h?f:z:S,U=x&&h?Object(d.jsx)(u.EuiToolTip,{content:e.muteAll?m:i()(new Date(e.isSnoozedUntil)).format(b)},Object(d.jsx)(u.EuiText,{color:"subdued",size:"xs"},e.muteAll?m:i()(new Date(e.isSnoozedUntil)).fromNow(!0))):null,P=Object(d.jsx)(u.EuiBadge,{color:A,"data-test-subj":"statusDropdownReadonly"},D),_=Object(d.jsx)(u.EuiBadge,{color:A,iconSide:"right",iconType:!E&&c?"arrowDown":void 0,onClick:I,iconOnClick:I,onClickAriaLabel:O,iconOnClickAriaLabel:O,isDisabled:E},D,E&&Object(d.jsx)(u.EuiLoadingSpinner,{style:{marginLeft:"4px",marginRight:"4px"},size:"s"}));return Object(d.jsx)(u.EuiFlexGroup,{direction:p,alignItems:"row"===p?"center":"flexStart",justifyContent:"flexStart",gutterSize:"row"===p?"s":"xs",responsive:!1},Object(d.jsx)(u.EuiFlexItem,{grow:!1},c?Object(d.jsx)(u.EuiPopover,{button:_,isOpen:C&&c,closePopover:R,panelPaddingSize:"s","data-test-subj":"statusDropdown",title:D},Object(d.jsx)(g,{onClosePopover:R,onChangeEnabledStatus:T,isEnabled:x,isSnoozed:h,snoozeEndTime:e.isSnoozedUntil,hideSnoozeOption:j,snoozeRule:L,unsnoozeRule:M,scheduledSnoozes:e.snoozeSchedule,activeSnoozes:e.activeSnoozes})):P),Object(d.jsx)(u.EuiFlexItem,{"data-test-subj":"remainingSnoozeTime",grow:!1},U))},g=({onChangeEnabledStatus:e,onClosePopover:t,isEnabled:n,isSnoozed:o,snoozeEndTime:l,hideSnoozeOption:r=!1,snoozeRule:j,unsnoozeRule:g,scheduledSnoozes:f=[],activeSnoozes:O=[]})=>{const m=Object(s.useCallback)((()=>{o?g():e(!0),t()}),[e,t,g,o]),w=Object(s.useCallback)((()=>{e(!1),t()}),[e,t]);let h=Object(d.jsx)(u.EuiText,{size:"s"},x);o&&l&&(h=Object(d.jsx)(a.a.Fragment,null,Object(d.jsx)(u.EuiText,{size:"s"},x)," ",Object(d.jsx)(u.EuiText,{size:"xs",color:"subdued"},i()(l).format(b))));const k=[{id:0,width:360,items:[{name:z,icon:n&&!o?"check":"empty",onClick:m,"data-test-subj":"statusDropdownEnabledItem"},{name:S,icon:n?"empty":"check",onClick:w,"data-test-subj":"statusDropdownDisabledItem"},...r?[]:[{name:h,icon:n&&o?"check":"empty",panel:1,disabled:!n,"data-test-subj":"statusDropdownSnoozeItem"}]]},...r?[]:[{id:1,width:400,title:x,content:Object(d.jsx)(u.EuiPanel,{paddingSize:"none",hasShadow:!1},Object(d.jsx)(c.a,{interval:p(l),showCancel:o,snoozeRule:j,unsnoozeRule:g,scheduledSnoozes:f,activeSnoozes:O,hasTitle:!1}))}]];return Object(d.jsx)(u.EuiContextMenu,{"data-test-subj":"ruleStatusMenu",initialPanelId:0,panels:k})},p=e=>{if(!e)return;const t=i()(e).locale("en").fromNow(!0),[n,s]=t.split(" ");let a,o="a"===n||"an"===n?1:parseInt(n,10);switch(s){case"year":case"years":a="M",o*=12;break;case"month":case"months":a="M";break;case"day":case"days":a="d";break;case"hour":case"hours":a="h";break;case"minute":case"minutes":a="m"}return a?`${o}${a}`:void 0},z=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.enabledRuleStatus",{defaultMessage:"Enabled"}),S=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.disabledRuleStatus",{defaultMessage:"Disabled"}),f=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozedRuleStatus",{defaultMessage:"Snoozed"}),x=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeMenuTitle",{defaultMessage:"Snooze"}),O=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusDropdownMenuLabel",{defaultMessage:"Change rule status or snooze"}),m=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.remainingSnoozeIndefinite",{defaultMessage:"Indefinitely"})}}]);