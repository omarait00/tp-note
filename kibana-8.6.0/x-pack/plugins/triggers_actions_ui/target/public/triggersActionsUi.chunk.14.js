/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[14,32,40],{102:function(e,t,n){"use strict";n.r(t),n.d(t,"RuleStatusPanel",(function(){return f})),n.d(t,"default",(function(){return b}));var s=n(3),r=n(90),a=n.n(r),i=n(1),u=n(89),o=n.n(u),l=n(88),c=n(4),d=n(6),p=n(121),g=n(0);const f=({rule:e,disableRule:t,enableRule:n,snoozeRule:r,unsnoozeRule:u,requestRefresh:p,isEditable:f,healthColor:b,statusMessage:j,loadExecutionLogAggregations:m})=>{const[x,h]=Object(i.useState)(!1),[O,v]=Object(i.useState)(!1),[y,I]=Object(i.useState)(null),E=Object(i.useCallback)((()=>v(!0)),[v]),A=Object(i.useCallback)((()=>v(!1)),[v]),k=Object(i.useCallback)((t=>r(e,t)),[e,r]),R=Object(i.useCallback)((t=>u(e,t)),[e,u]),M=Object(i.useMemo)((()=>{var t;return j||Object(g.jsx)(c.EuiStat,{titleSize:"xs",title:"--",description:"",isLoading:!(null!==(t=e.lastRun)&&void 0!==t&&t.outcome||e.nextRun)})}),[e,j]),w=Object(i.useCallback)((async()=>{try{const t=await m({id:e.id,dateStart:a.a.parse("now-24h").format(),dateEnd:a.a.parse("now").format(),page:0,perPage:10});I(t.total)}catch(e){}}),[m,I,e]);return Object(i.useEffect)((()=>{w()}),[w]),Object(g.jsx)(c.EuiPanel,{"data-test-subj":"ruleStatusPanel",hasBorder:!0,paddingSize:"none"},Object(g.jsx)(c.EuiPanel,{hasShadow:!1},Object(g.jsx)(c.EuiFlexGroup,{justifyContent:"flexStart"},Object(g.jsx)(c.EuiFlexItem,{grow:!1},Object(g.jsx)(c.EuiTitle,{size:"xxs"},Object(g.jsx)("h5",null,Object(g.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.rule.statusPanel.ruleIsEnabledDisabledTitle",defaultMessage:"Rule is"})))),Object(g.jsx)(c.EuiFlexItem,null,Object(g.jsx)(d.h,{disableRule:async()=>await t(e),enableRule:async()=>await n(e),snoozeRule:async()=>{},unsnoozeRule:async()=>{},rule:e,onRuleChanged:p,direction:"row",isEditable:f,hideSnoozeOption:!0}))),Object(g.jsx)(c.EuiSpacer,{size:"s"}),Object(g.jsx)(c.EuiText,{size:"s",color:"subdued","data-test-subj":"ruleStatus-numberOfExecutions"},null!==y&&Object(g.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.rule.statusPanel.totalExecutions",defaultMessage:"{executions, plural, one {# execution} other {# executions}} in the last 24 hr",values:{executions:y}}))),Object(g.jsx)(c.EuiHorizontalRule,{margin:"none"}),Object(g.jsx)(c.EuiPanel,{hasShadow:!1},Object(g.jsx)(c.EuiFlexGroup,{gutterSize:"none",direction:"row",responsive:!1},Object(g.jsx)(c.EuiFlexItem,null,Object(g.jsx)(c.EuiStat,{"data-test-subj":`ruleStatus-${e.executionStatus.status}`,titleSize:"m",descriptionElement:"strong",titleElement:"h5",title:Object(g.jsx)(c.EuiHealth,{"data-test-subj":`ruleStatus-${e.executionStatus.status}`,textSize:"m",color:b,style:{fontWeight:400}},M),description:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rulesList.ruleLastExecutionDescription",{defaultMessage:"Last response"})})),Object(g.jsx)(c.EuiFlexItem,{grow:!1},Object(g.jsx)(c.EuiSpacer,{size:"xs"}),Object(g.jsx)(c.EuiText,{color:"subdued",size:"xs"},o()(e.executionStatus.lastExecutionDate).fromNow())))),Object(g.jsx)(c.EuiHorizontalRule,{margin:"none"}),Object(g.jsx)(c.EuiPanel,{hasShadow:!1},Object(g.jsx)(d.n,{rule:{...e,isEditable:f},isOpen:O,isLoading:x,onLoading:h,onClick:E,onClose:A,onRuleChanged:p,snoozeRule:k,unsnoozeRule:R,showTooltipInline:!0})))},b=Object(p.a)(f)},120:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return o}));const s=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},r=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},a=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute},i=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function u(e,t){var n,s;return null!==(n=null==t||null===(s=t.authorizedConsumers[e.consumer])||void 0===s?void 0:s.all)&&void 0!==n&&n}const o=e=>{var t,n;return null==e||null===(t=e.management)||void 0===t||null===(n=t.security)||void 0===n?void 0:n.api_keys}},121:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n(8),r=n.n(s),a=(n(1),n(60)),i=n(22),u=n(0);function o(e){return t=>{const{http:n}=Object(i.b)().services;return Object(u.jsx)(e,r()({},t,{muteRules:async e=>Object(a.y)({http:n,ids:e.filter((e=>!c(e))).map((e=>e.id))}),unmuteRules:async e=>Object(a.E)({http:n,ids:e.filter(c).map((e=>e.id))}),enableRules:async e=>Object(a.l)({http:n,ids:e.filter(l).map((e=>e.id))}),disableRules:async e=>Object(a.j)({http:n,ids:e.filter((e=>!l(e))).map((e=>e.id))}),deleteRules:async e=>Object(a.h)({http:n,ids:e.map((e=>e.id))}),muteRule:async e=>{if(!c(e))return await Object(a.x)({http:n,id:e.id})},unmuteRule:async e=>{if(c(e))return await Object(a.D)({http:n,id:e.id})},muteAlertInstance:async(e,t)=>{if(!d(e,t))return Object(a.w)({http:n,id:e.id,instanceId:t})},unmuteAlertInstance:async(e,t)=>{if(d(e,t))return Object(a.C)({http:n,id:e.id,instanceId:t})},enableRule:async e=>{if(l(e))return await Object(a.k)({http:n,id:e.id})},disableRule:async e=>{if(!l(e))return await Object(a.i)({http:n,id:e.id})},deleteRule:async e=>Object(a.h)({http:n,ids:[e.id]}),loadRule:async e=>Object(a.r)({http:n,ruleId:e}),loadRuleState:async e=>Object(a.s)({http:n,ruleId:e}),loadRuleSummary:async(e,t)=>Object(a.t)({http:n,ruleId:e,numberOfExecutions:t}),loadRuleTypes:async()=>Object(a.v)({http:n}),loadExecutionLogAggregations:async e=>Object(a.o)({...e,http:n}),loadGlobalExecutionLogAggregations:async e=>Object(a.q)({...e,http:n}),loadActionErrorLog:async e=>Object(a.m)({...e,http:n}),loadExecutionKPIAggregations:async e=>Object(a.n)({...e,http:n}),loadGlobalExecutionKPIAggregations:async e=>Object(a.p)({...e,http:n}),resolveRule:async e=>Object(a.z)({http:n,ruleId:e}),getHealth:async()=>Object(a.a)({http:n}),snoozeRule:async(e,t)=>await Object(a.B)({http:n,id:e.id,snoozeSchedule:t}),bulkSnoozeRules:async e=>await Object(a.c)({http:n,...e}),unsnoozeRule:async(e,t)=>await Object(a.F)({http:n,id:e.id,scheduleIds:t}),bulkUnsnoozeRules:async e=>await Object(a.d)({http:n,...e}),cloneRule:async e=>await Object(a.f)({http:n,ruleId:e})}))}}function l(e){return!1===e.enabled}function c(e){return!0===e.muteAll}function d(e,t){return e.mutedInstanceIds.findIndex((e=>e===t))>=0}},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"E",(function(){return f})),n.d(t,"D",(function(){return b})),n.d(t,"C",(function(){return R})),n.d(t,"F",(function(){return M})),n.d(t,"s",(function(){return w})),n.d(t,"u",(function(){return T})),n.d(t,"w",(function(){return S})),n.d(t,"r",(function(){return U})),n.d(t,"t",(function(){return L})),n.d(t,"d",(function(){return C})),n.d(t,"l",(function(){return D})),n.d(t,"m",(function(){return F})),n.d(t,"q",(function(){return P})),n.d(t,"n",(function(){return z})),n.d(t,"o",(function(){return B})),n.d(t,"p",(function(){return _})),n.d(t,"i",(function(){return N})),n.d(t,"k",(function(){return W})),n.d(t,"g",(function(){return q})),n.d(t,"v",(function(){return K})),n.d(t,"e",(function(){return G})),n.d(t,"c",(function(){return $})),n.d(t,"y",(function(){return H})),n.d(t,"x",(function(){return Y})),n.d(t,"B",(function(){return V})),n.d(t,"z",(function(){return J})),n.d(t,"A",(function(){return Q}));var s=n(3);const r=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusOk",{defaultMessage:"Ok"}),a=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusActive",{defaultMessage:"Active"}),i=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusError",{defaultMessage:"Error"}),u=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusLicenseError",{defaultMessage:"License Error"}),o=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusPending",{defaultMessage:"Pending"}),l=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusUnknown",{defaultMessage:"Unknown"}),c=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusWarning",{defaultMessage:"Warning"}),d=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeSucceeded",{defaultMessage:"Succeeded"}),p=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeWarning",{defaultMessage:"Warning"}),g=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeFailed",{defaultMessage:"Failed"}),f={ok:r,active:a,error:i,pending:o,unknown:l,warning:c},b={succeeded:d,warning:p,failed:g},j=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonUnknown",{defaultMessage:"An error occurred for unknown reasons."}),m=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonReading",{defaultMessage:"An error occurred when reading the rule."}),x=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonDecrypting",{defaultMessage:"An error occurred when decrypting the rule."}),h=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonRunning",{defaultMessage:"An error occurred when running the rule."}),O=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonLicense",{defaultMessage:"Cannot run rule"}),v=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonTimeout",{defaultMessage:"Rule execution cancelled due to timeout."}),y=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonDisabled",{defaultMessage:"Rule failed to execute because rule ran after it was disabled."}),I=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonValidate",{defaultMessage:"An error occurred when validating the rule parameters."}),E=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxExecutableActions",{defaultMessage:"Action limit exceeded"}),A=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxAlerts",{defaultMessage:"Alert limit exceeded"}),k=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonUnknown",{defaultMessage:"Unknown reason"}),R={read:m,decrypt:x,execute:h,unknown:j,license:O,timeout:v,disabled:y,validate:I},M={maxExecutableActions:E,maxAlerts:A,unknown:k},w=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selectAllAriaLabel",{defaultMessage:"Toggle select all rules"}),T=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selectShowBulkActionsAriaLabel",{defaultMessage:"Show bulk actions"}),S=(e,t)=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalRulesLabel",{values:{formattedTotalRules:e,totalRules:t},defaultMessage:"{formattedTotalRules} {totalRules, plural, =1 {rule} other {rules}}"}),U=(e,t)=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.selectedRulesButton",{values:{formattedSelectedRules:e,selectedRules:t},defaultMessage:"Selected {formattedSelectedRules} {selectedRules, plural, =1 {rule} other {rules}}"}),L=(e,t)=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.selectAllRulesButton",{values:{formattedTotalRules:e,totalRules:t},defaultMessage:"Select all {formattedTotalRules} {totalRules, plural, =1 {rule} other {rules}}"}),C=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.clearAllSelectionButton",{defaultMessage:"Clear selection"}),D=e=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesActiveDescription",{defaultMessage:"Active: {totalStatusesActive}",values:{totalStatusesActive:e}}),F=e=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesErrorDescription",{defaultMessage:"Error: {totalStatusesError}",values:{totalStatusesError:e}}),P=e=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesWarningDescription",{defaultMessage:"Warning: {totalStatusesWarning}",values:{totalStatusesWarning:e}}),z=e=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesOkDescription",{defaultMessage:"Ok: {totalStatusesOk}",values:{totalStatusesOk:e}}),B=e=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesPendingDescription",{defaultMessage:"Pending: {totalStatusesPending}",values:{totalStatusesPending:e}}),_=e=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesUnknownDescription",{defaultMessage:"Unknown: {totalStatusesUnknown}",values:{totalStatusesUnknown:e}}),N=e=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeSucceededDescription",{defaultMessage:"Succeeded: {total}",values:{total:e}}),W=e=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeWarningDescription",{defaultMessage:"Warning: {total}",values:{total:e}}),q=e=>s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeFailedDescription",{defaultMessage:"Failed: {total}",values:{total:e}}),K=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.singleTitle",{defaultMessage:"rule"}),G=s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.multipleTitle",{defaultMessage:"rules"}),$=s.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),H=(e,t,n)=>s.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.descriptionText",{defaultMessage:"You won't be able to recover {numIdsToDelete, plural, one {a deleted {singleTitle}} other {deleted {multipleTitle}}}.",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:n}}),Y=(e,t,n)=>s.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numIdsToDelete, plural, one {{singleTitle}} other {# {multipleTitle}}} ",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:n}}),V=(e,t,n)=>s.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:n}}),J=(e,t,n)=>s.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:n}}),Q=(e,t,n,r)=>s.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Deleted {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:n,multipleTitle:r}})},124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.bind=t.bindTo=t.getRefinement=t.exists=t.elem=t.option=t.MonadThrow=t.Witherable=t.Traversable=t.Filterable=t.Compactable=t.Extend=t.Alternative=t.Alt=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getMonoid=t.getLastMonoid=t.getFirstMonoid=t.getApplyMonoid=t.getApplySemigroup=t.getOrd=t.getEq=t.getShow=t.URI=t.wilt=t.wither=t.sequence=t.traverse=t.partitionMap=t.partition=t.filterMap=t.filter=t.separate=t.compact=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.throwError=t.zero=t.alt=t.flatten=t.chainFirst=t.chain=t.of=t.apSecond=t.apFirst=t.ap=t.map=t.mapNullable=t.getOrElse=t.getOrElseW=t.toUndefined=t.toNullable=t.fold=t.fromEither=t.getRight=t.getLeft=t.tryCatch=t.fromPredicate=t.fromNullable=t.some=t.none=t.isNone=t.isSome=void 0;var s=n(64);function r(e){return null==e?t.none:t.some(e)}function a(e){return"Right"===e._tag?t.none:t.some(e.left)}function i(e){return"Left"===e._tag?t.none:t.some(e.right)}t.isSome=function(e){return"Some"===e._tag},t.isNone=function(e){return"None"===e._tag},t.none={_tag:"None"},t.some=function(e){return{_tag:"Some",value:e}},t.fromNullable=r,t.fromPredicate=function(e){return function(n){return e(n)?t.some(n):t.none}},t.tryCatch=function(e){try{return t.some(e())}catch(e){return t.none}},t.getLeft=a,t.getRight=i,t.fromEither=function(e){return"Left"===e._tag?t.none:t.some(e.right)},t.fold=function(e,n){return function(s){return t.isNone(s)?e():n(s.value)}},t.toNullable=function(e){return t.isNone(e)?null:e.value},t.toUndefined=function(e){return t.isNone(e)?void 0:e.value},t.getOrElseW=function(e){return function(n){return t.isNone(n)?e():n.value}},t.getOrElse=t.getOrElseW,t.mapNullable=function(e){return function(n){return t.isNone(n)?t.none:r(e(n.value))}};var u=function(e,n){return s.pipe(e,t.map(n))},o=function(e,n){return s.pipe(e,t.ap(n))},l=function(e,n){return s.pipe(e,t.chain(n))},c=function(e,n,r){return s.pipe(e,t.reduce(n,r))},d=function(e){var n=t.foldMap(e);return function(e,t){return s.pipe(e,n(t))}},p=function(e,n,r){return s.pipe(e,t.reduceRight(n,r))},g=function(e){var n=t.traverse(e);return function(e,t){return s.pipe(e,n(t))}},f=function(e,n){return s.pipe(e,t.alt(n))},b=function(e,n){return s.pipe(e,t.filter(n))},j=function(e,n){return s.pipe(e,t.filterMap(n))},m=function(e,n){return s.pipe(e,t.extend(n))},x=function(e,n){return s.pipe(e,t.partition(n))},h=function(e,n){return s.pipe(e,t.partitionMap(n))},O=function(e){var n=t.wither(e);return function(e,t){return s.pipe(e,n(t))}},v=function(e){var n=t.wilt(e);return function(e,t){return s.pipe(e,n(t))}};t.map=function(e){return function(n){return t.isNone(n)?t.none:t.some(e(n.value))}},t.ap=function(e){return function(n){return t.isNone(n)||t.isNone(e)?t.none:t.some(n.value(e.value))}},t.apFirst=function(e){return s.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return s.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.some,t.chain=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)}},t.chainFirst=function(e){return t.chain((function(n){return s.pipe(e(n),t.map((function(){return n})))}))},t.flatten=t.chain(s.identity),t.alt=function(e){return function(n){return t.isNone(n)?e():n}},t.zero=function(){return t.none},t.throwError=function(){return t.none},t.extend=function(e){return function(n){return t.isNone(n)?t.none:t.some(e(n))}},t.duplicate=t.extend(s.identity),t.reduce=function(e,n){return function(s){return t.isNone(s)?e:n(e,s.value)}},t.foldMap=function(e){return function(n){return function(s){return t.isNone(s)?e.empty:n(s.value)}}},t.reduceRight=function(e,n){return function(s){return t.isNone(s)?e:n(s.value,e)}},t.compact=t.flatten;var y={left:t.none,right:t.none};function I(e){return{equals:function(n,s){return n===s||(t.isNone(n)?t.isNone(s):!t.isNone(s)&&e.equals(n.value,s.value))}}}function E(e){return{concat:function(n,s){return t.isSome(n)&&t.isSome(s)?t.some(e.concat(n.value,s.value)):t.none}}}t.separate=function(e){var n=s.pipe(e,t.map((function(e){return{left:a(e),right:i(e)}})));return t.isNone(n)?y:n.value},t.filter=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)?n:t.none}},t.filterMap=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)}},t.partition=function(e){return function(n){return{left:s.pipe(n,t.filter((function(t){return!e(t)}))),right:s.pipe(n,t.filter(e))}}},t.partitionMap=function(e){return function(n){return t.separate(s.pipe(n,t.map(e)))}},t.traverse=function(e){return function(n){return function(s){return t.isNone(s)?e.of(t.none):e.map(n(s.value),t.some)}}},t.sequence=function(e){return function(n){return t.isNone(n)?e.of(t.none):e.map(n.value,t.some)}},t.wither=function(e){return function(n){return function(s){return t.isNone(s)?e.of(t.none):n(s.value)}}},t.wilt=function(e){return function(n){return function(r){var u=s.pipe(r,t.map((function(t){return e.map(n(t),(function(e){return{left:a(e),right:i(e)}}))})));return t.isNone(u)?e.of({left:t.none,right:t.none}):u.value}}},t.URI="Option",t.getShow=function(e){return{show:function(n){return t.isNone(n)?"none":"some("+e.show(n.value)+")"}}},t.getEq=I,t.getOrd=function(e){return{equals:I(e).equals,compare:function(n,s){return n===s?0:t.isSome(n)?t.isSome(s)?e.compare(n.value,s.value):1:-1}}},t.getApplySemigroup=E,t.getApplyMonoid=function(e){return{concat:E(e).concat,empty:t.some(e.empty)}},t.getFirstMonoid=function(){return{concat:function(e,n){return t.isNone(e)?n:e},empty:t.none}},t.getLastMonoid=function(){return{concat:function(e,n){return t.isNone(n)?e:n},empty:t.none}},t.getMonoid=function(e){return{concat:function(n,s){return t.isNone(n)?s:t.isNone(s)?n:t.some(e.concat(n.value,s.value))},empty:t.none}},t.Functor={URI:t.URI,map:u},t.Applicative={URI:t.URI,map:u,ap:o,of:t.of},t.Monad={URI:t.URI,map:u,ap:o,of:t.of,chain:l},t.Foldable={URI:t.URI,reduce:c,foldMap:d,reduceRight:p},t.Alt={URI:t.URI,map:u,alt:f},t.Alternative={URI:t.URI,map:u,ap:o,of:t.of,alt:f,zero:t.zero},t.Extend={URI:t.URI,map:u,extend:m},t.Compactable={URI:t.URI,compact:t.compact,separate:t.separate},t.Filterable={URI:t.URI,map:u,compact:t.compact,separate:t.separate,filter:b,filterMap:j,partition:x,partitionMap:h},t.Traversable={URI:t.URI,map:u,reduce:c,foldMap:d,reduceRight:p,traverse:g,sequence:t.sequence},t.Witherable={URI:t.URI,map:u,reduce:c,foldMap:d,reduceRight:p,traverse:g,sequence:t.sequence,compact:t.compact,separate:t.separate,filter:b,filterMap:j,partition:x,partitionMap:h,wither:O,wilt:v},t.MonadThrow={URI:t.URI,map:u,ap:o,of:t.of,chain:l,throwError:t.throwError},t.option={URI:t.URI,map:u,of:t.of,ap:o,chain:l,reduce:c,foldMap:d,reduceRight:p,traverse:g,sequence:t.sequence,zero:t.zero,alt:f,extend:m,compact:t.compact,separate:t.separate,filter:b,filterMap:j,partition:x,partitionMap:h,wither:O,wilt:v,throwError:t.throwError},t.elem=function(e){return function(n,s){return!t.isNone(s)&&e.equals(n,s.value)}},t.exists=function(e){return function(n){return!t.isNone(n)&&e(n.value)}},t.getRefinement=function(e){return function(n){return t.isSome(e(n))}},t.bindTo=function(e){return t.map(s.bindTo_(e))},t.bind=function(e,n){return t.chain((function(r){return s.pipe(n(r),t.map((function(t){return s.bind_(r,e,t)})))}))},t.apS=function(e,n){return s.flow(t.map((function(t){return function(n){return s.bind_(t,e,n)}})),t.ap(n))}},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var s=n(90),r=n.n(s),a=n(3);const i=new RegExp(`^([\\d\\.]+)\\s*(${r.a.units.join("|")})$`),u=e=>{if(e){const t=e.match(i);if(t)return{value:Number(t[1]),unit:t[2]}}throw new Error(a.i18n.translate("xpack.triggersActionsUI.parseInterval.errorMessage",{defaultMessage:"{value} is not an interval string",values:{value:e}}))};n(27);const o="/internal/triggers_actions_ui"},131:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(125);async function r({http:e}){return await e.get(`${s.a}/_config`)}},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var s=n(1),r=n(88),a=n(4),i=n(3),u=n(18),o=n(22),l=n(0);const c=(e,t,n)=>i.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.someSuccess",{defaultMessage:"Updated {property} for {success, plural, one {# rule} other {# rules}}, {failure, plural, one {# rule} other {# rules}} encountered errors.",values:{success:e,failure:t,property:n}}),d=(e,t)=>i.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.failure",{defaultMessage:"Failed to update {property} for {failure, plural, one {# rule} other {# rules}}.",values:{failure:e,property:t}}),p=i.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.property.snoozeSettings",{defaultMessage:"snooze settings"}),g={snooze:p,snoozeSchedule:p,apiKey:i.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.property.apiKey",{defaultMessage:"API key"})};function f(e){const{onSearchPopulate:t}=e,{notifications:{toasts:n}}=Object(o.b)().services,p=Object(s.useCallback)((e=>{if(!t)return;const n=e.errors.map((e=>e.rule.name)).join(",");t(n)}),[t]),f=Object(s.useCallback)((e=>Object(l.jsx)(a.EuiFlexGroup,{direction:"column",gutterSize:"xs"},t&&Object(l.jsx)(a.EuiFlexItem,{grow:!1},Object(l.jsx)("div",null,Object(l.jsx)(a.EuiButtonEmpty,{iconType:"search",size:"xs",flush:"left",onClick:()=>p(e),"data-test-subj":"bulkEditResponseFilterErrors"},Object(l.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.filterByErrors",defaultMessage:"Filter by errored rules"})))))),[t,p]),b=Object(s.useCallback)(((e,t)=>{const{errors:s,total:r}=e,a=r-s.length,o=s.length;o?o!==r?n.addWarning({title:c(a,o,g[t]),text:Object(u.toMountPoint)(f(e))}):n.addDanger({title:d(o,g[t]),text:Object(u.toMountPoint)(f(e))}):n.addSuccess(((e,t)=>i.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.success",{defaultMessage:"Updated {property} for {total, plural, one {# rule} other {# rules}}.",values:{total:e,property:t}}))(a,g[t]))}),[n,f]);return Object(s.useMemo)((()=>({showToast:b})),[b])}},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(3),r=n(2);const a=(e,t=!1)=>{switch(e){case"logs":return{text:s.i18n.translate("xpack.triggersActionsUI.logs.breadcrumbTitle",{defaultMessage:"Logs"}),...t?{href:`${r.r}`}:{}};case"connectors":return{text:s.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"}),...t?{href:`${r.o}`}:{}};case"rules":return{text:s.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"}),...t?{href:`${r.s}`}:{}};default:return{text:s.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules"}),...t?{href:`${r.p}`}:{}}}}},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(3);const r=e=>{let t;switch(e){case"logs":t=s.i18n.translate("xpack.triggersActionsUI.logs.breadcrumbTitle",{defaultMessage:"Logs"});break;case"connectors":t=s.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"});break;case"rules":t=s.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"});break;default:t=s.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules"})}return t}},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(21);const r=(e,t)=>{const{rule:n}=e;switch(t.command.type){case"setRule":{const{key:n,value:s}=t.payload;return"rule"===n?{...e,rule:s}:e}case"setProperty":{const{key:r,value:a}=t.payload;return Object(s.isEqual)(n[r],a)?e:{...e,rule:{...n,[r]:a}}}case"setScheduleProperty":{const{key:r,value:a}=t.payload;return n.schedule&&Object(s.isEqual)(n.schedule[r],a)?e:{...e,rule:{...n,schedule:{...n.schedule,[r]:a}}}}case"setRuleParams":{const{key:r,value:a}=t.payload;return Object(s.isEqual)(n.params[r],a)?e:{...e,rule:{...n,params:{...n.params,[r]:a}}}}case"setRuleActionParams":{const{key:r,value:a,index:i}=t.payload;if(void 0===i||null==n.actions[i]||n.actions[i][r]&&Object(s.isEqual)(n.actions[i][r],a))return e;{const t=n.actions.splice(i,1)[0],s={...t,params:{...t.params,[r]:a}};return n.actions.splice(i,0,s),{...e,rule:{...n,actions:[...n.actions]}}}}case"setRuleActionProperty":{const{key:r,value:a,index:i}=t.payload;if(void 0===i||Object(s.isEqual)(n.actions[i][r],a))return e;{const t={...n.actions.splice(i,1)[0],[r]:a};return n.actions.splice(i,0,t),{...e,rule:{...n,actions:[...n.actions]}}}}}}},149:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var s=n(21);function r(e){return t=>{if(null==t)throw new Error(e);return t}}function a(e,t,n){const r="function"==typeof t?t:Object(s.constant)(t);return t=>{const s=new Set(t.map(n));for(const t of e.values())if(!s.has(t))throw new Error(r(t));return t}}function i(e,t,n,r){return Object.keys(t).forEach((n=>{t[n].length>=1&&void 0===Object(s.get)(e.params,n)&&Object(s.set)(e.params,n,null)})),Object.keys(n).forEach((t=>{n[t].length>=1&&void 0===Object(s.get)(e,t)&&Object(s.set)(e,t,null)})),r.forEach(((t,n)=>{const r=e.actions.length>n?e.actions[n]:null;r&&Object.keys(t).forEach((e=>{t[e].length>=1&&void 0===Object(s.get)(r.params,e)&&Object(s.set)(r.params,e,null)}))})),e}},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n(4),r=n(3),a=n(1),i=n(22),u=n(144),o=n(0);const l=({onCancel:e,idsToUpdate:t,idsToUpdateFilter:n,numberOfSelectedRules:l=0,apiUpdateApiKeyCall:c,setIsLoadingState:d,onUpdated:p,onSearchPopulate:g})=>{const{http:f,notifications:{toasts:b}}=Object(i.b)().services,[j,m]=Object(a.useState)(!1),{showToast:x}=Object(u.a)({onSearchPopulate:g});Object(a.useEffect)((()=>{m(void 0!==n||t.length>0)}),[t,n]);const h=Object(a.useMemo)((()=>void 0!==n?l:t.length),[t,n,l]);return j?Object(o.jsx)(s.EuiConfirmModal,{buttonColor:"primary","data-test-subj":"updateApiKeyIdsConfirmation",title:r.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.title",{defaultMessage:"Update API key"}),onCancel:()=>{m(!1),e()},onConfirm:async()=>{m(!1),d(!0);try{const e=await c({ids:t,filter:n,http:f});x(e,"apiKey")}catch(e){b.addError(e,{title:r.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.failureMessage",{defaultMessage:"Failed to update the API {idsToUpdate, plural, one {key} other {keys}}",values:{idsToUpdate:h}})})}d(!1),p()},cancelButtonText:r.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:r.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.confirmButton",{defaultMessage:"Update"})},r.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.description",{defaultMessage:"You will not be able to recover the old API {idsToUpdate, plural, one {key} other {keys}}",values:{idsToUpdate:h}})):null}},162:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(3),r=n(60);async function a(e,t,n){try{const a=await Object(r.A)({http:e,id:n});a?t.addWarning({title:a}):t.addSuccess({title:s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ableToRunRuleSoon",{defaultMessage:"Your rule is scheduled to run"})})}catch(e){t.addError(e,{title:s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToRunRuleSoon",{defaultMessage:"Unable to schedule your rule to run"})})}}},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n(4),r=n(1),a=n.n(r),i=n(22),u=n(122),o=n(0);const l=({idsToDelete:e,apiDeleteCall:t,onDeleted:n,onCancel:l,onErrors:c,singleTitle:d,multipleTitle:p,showWarningText:g,warningText:f,setIsLoadingState:b})=>{const[j,m]=Object(r.useState)(!1);Object(r.useEffect)((()=>{m(e.length>0)}),[e]);const{http:x,notifications:{toasts:h}}=Object(i.b)().services,O=e.length;return j?Object(o.jsx)(s.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"deleteIdsConfirmation",title:Object(u.x)(O,d,p),onCancel:()=>{m(!1),l()},onConfirm:async()=>{m(!1),b(!0);const{successes:s,errors:r}=await t({ids:e,http:x});b(!1);const a=s.length,i=r.length;a>0&&h.addSuccess(Object(u.B)(a,d,p)),i>0&&(h.addDanger(Object(u.z)(i,d,p)),await c()),await n(s)},cancelButtonText:u.c,confirmButtonText:Object(u.x)(O,d,p)},Object(o.jsx)("p",null,Object(u.y)(O,d,p)),g&&Object(o.jsx)(s.EuiCallOut,{title:Object(o.jsx)(a.a.Fragment,null,f),color:"warning",iconType:"alert"})):null}},251:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(252);case"v8light":return n(254)}},252:function(e,t,n){var s=n(58),r=n(253);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);s(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},253:function(e,t,n){(t=n(59)(!1)).push([e.i,".ruleActionsPopover__deleteButton{color:#f86b63}",""]),e.exports=t},254:function(e,t,n){var s=n(58),r=n(255);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);s(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},255:function(e,t,n){(t=n(59)(!1)).push([e.i,".ruleActionsPopover__deleteButton{color:#bd271e}",""]),e.exports=t},256:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(257);case"v8light":return n(259)}},257:function(e,t,n){var s=n(58),r=n(258);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);s(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},258:function(e,t,n){(t=n(59)(!1)).push([e.i,".rulesList__health{width:100%}.rulesList__health .euiFlexItem:last-of-type{max-width:100%;min-width:0;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;width:85%}.ruleDurationWarningIcon{bottom:4px;position:relative}",""]),e.exports=t},259:function(e,t,n){var s=n(58),r=n(260);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);s(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},260:function(e,t,n){(t=n(59)(!1)).push([e.i,".rulesList__health{width:100%}.rulesList__health .euiFlexItem:last-of-type{max-width:100%;min-width:0;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;width:85%}.ruleDurationWarningIcon{bottom:4px;position:relative}",""]),e.exports=t},274:function(e,t,n){"use strict";n.r(t),n.d(t,"RuleDetailsRoute",(function(){return X})),n.d(t,"getRuleData",(function(){return Z})),n.d(t,"default",(function(){return ee}));var s=n(3),r=n(1),a=n.n(r),i=n(4),u=n(91),o=n(88),l=n(18),c=n(17),d=n(48),p=n(161),g=n(60),f=n(163),b=(n(251),n(0));const j=({rule:e,canSaveRule:t,onDelete:n,onApiKeyUpdate:a,onEnableDisable:u,onRunRule:o})=>{const[l,c]=Object(r.useState)(!1);return Object(b.jsx)(i.EuiPopover,{button:Object(b.jsx)(i.EuiButtonEmpty,{disabled:!1,"data-test-subj":"ruleActionsButton","data-testid":"ruleActionsButton",iconType:"boxesHorizontal",onClick:()=>c(!l),"aria-label":s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.popoverButtonTitle",{defaultMessage:"Actions"})}),isOpen:l,closePopover:()=>c(!1),ownFocus:!0,panelPaddingSize:"none"},Object(b.jsx)(i.EuiContextMenu,{initialPanelId:0,panels:[{id:0,items:[{disabled:!t,"data-test-subj":"disableButton",onClick:async()=>{c(!1),u(!e.enabled)},name:e.enabled?s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.disableRuleButtonLabel",{defaultMessage:"Disable"}):s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.enableRuleButtonLabel",{defaultMessage:"Enable"})},{disabled:!t,"data-test-subj":"updateAPIKeyButton",onClick:()=>{c(!1),a(e.id)},name:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.updateAPIKeyButtonLabel",{defaultMessage:"Update API key"})},{disabled:!t,"data-test-subj":"runRuleButton",onClick:()=>{c(!1),o(e.id)},name:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.runRuleButtonLabel",{defaultMessage:"Run rule"})},{disabled:!t,className:"ruleActionsPopover__deleteButton","data-test-subj":"deleteRuleButton",onClick:()=>{c(!1),n(e.id)},name:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.deleteRuleButtonLabel",{defaultMessage:"Delete rule"})}]}],className:"ruleActionsPopover","data-test-subj":"ruleActionsPopover","data-testid":"ruleActionsPopover"}))};var m=n(120),x=n(145),h=n(146),O=n(121),v=n(22),y=(n(256),n(49)),I=n(5),E=n(24),A=n(102),k=n(122);const R=Object(r.lazy)((()=>Promise.all([n.e(3),n.e(30)]).then(n.bind(null,110)))),M=Object(r.lazy)((()=>n.e(47).then(n.bind(null,291)))),w=Object(r.lazy)((()=>n.e(33).then(n.bind(null,111)))),T=Object(O.a)((function({rule:e,ruleType:t,readOnly:n,ruleSummary:r,muteAlertInstance:u,unmuteAlertInstance:o,requestRefresh:l,refreshToken:c,numberOfExecutions:d,onChangeDuration:p,durationEpoch:g=Date.now(),isLoadingChart:f}){const{ruleTypeRegistry:j,actionTypeRegistry:m}=Object(v.b)().services,x=Object.entries(r.alerts).map((([e,n])=>function(e,t,n,s){const r=!(null==s||!s.muted),a="Active"===(null==s?void 0:s.status)?{label:S,actionGroup:L(t,null==s?void 0:s.actionGroupId),healthColor:"primary"}:{label:U,healthColor:"subdued"},i=null!=s&&s.activeStartDate?new Date(s.activeStartDate):void 0,u=i?e-i.valueOf():0,o=function(e){switch(e){case"Active":return 0;case"OK":return 1}return 2}(null==s?void 0:s.status);return{alert:n,status:a,start:i,duration:u,isMuted:r,sortPriority:o}}(g,t,e,n))).sort(((e,t)=>e.sortPriority-t.sortPriority)),h=async t=>{await(t.isMuted?o(e,t.alert):u(e,t.alert)),l()},O=Object(E.d)(e),T=Object(E.e)({rule:e,licenseErrorText:k.a,lastOutcomeTranslations:k.D,executionStatusTranslations:k.E}),C=()=>Object(I.a)(M,"xl")({items:x,readOnly:n,onMuteAction:h}),D=[{id:"rule_alert_list",name:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rule.alertsTabText",{defaultMessage:"Alerts"}),"data-test-subj":"ruleAlertListTab",content:Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(i.EuiSpacer,null),C())},{id:"rule_event_log_list",name:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rule.eventLogTabText",{defaultMessage:"History"}),"data-test-subj":"eventLogListTab",content:Object(I.a)(R,"xl")({fetchRuleSummary:!1,ruleId:e.id,ruleType:t,ruleSummary:r,numberOfExecutions:d,refreshToken:c,isLoadingRuleSummary:f,onChangeDuration:p,requestRefresh:l})}];return Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(i.EuiFlexGroup,{gutterSize:"s",wrap:!0},Object(b.jsx)(i.EuiFlexItem,{grow:2},Object(b.jsx)(A.default,{rule:e,isEditable:!n,healthColor:O,statusMessage:T,requestRefresh:l})),Object(I.a)(w,"xl")({rule:e,actionTypeRegistry:m,ruleTypeRegistry:j,hideEditButton:!0,onEditRule:l})),Object(b.jsx)(i.EuiSpacer,{size:"xl"}),Object(b.jsx)("input",{type:"hidden","data-test-subj":"alertsDurationEpoch",name:"alertsDurationEpoch",value:g}),Object(y.a)("rulesDetailLogs")?Object(b.jsx)(i.EuiTabbedContent,{"data-test-subj":"ruleDetailsTabbedContent",tabs:D}):C())})),S=s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rulesList.status.active",{defaultMessage:"Active"}),U=s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rulesList.status.inactive",{defaultMessage:"Recovered"});function L(e,t){var n;t=t||e.defaultActionGroupId;const s=null==e||null===(n=e.actionGroups)||void 0===n?void 0:n.find((e=>e.id===t));return null==s?void 0:s.name}var C=n(61);const D=Object(O.a)((({rule:e,ruleType:t,readOnly:n,requestRefresh:a,loadRuleSummary:i,refreshToken:u})=>{const{notifications:{toasts:o}}=Object(v.b)().services,[l,c]=Object(r.useState)(null),[d,p]=Object(r.useState)(60),[g,f]=Object(r.useState)(!0),j=Object(r.useRef)(null),m=Object(r.useRef)(u),x=Object(r.useCallback)((async(e=d)=>{f(!0),await async function(e,t,n,r,a){try{n(await t(e,a))}catch(e){r.addDanger({title:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.unableToLoadRulesMessage",{defaultMessage:"Unable to load rules: {message}",values:{message:e.message}})})}}(j.current,i,c,o,e),f(!1)}),[f,j,i,c,o,d]);Object(r.useEffect)((()=>{j.current!==e.id&&(j.current=e.id,x())}),[e,j,x]),Object(r.useEffect)((()=>{m.current!==u&&(m.current=u,x())}),[u,m,x]);const h=Object(r.useCallback)((e=>{p(e),x(e)}),[x]);return l?Object(b.jsx)(T,{requestRefresh:a,refreshToken:u,rule:e,ruleType:t,readOnly:n,ruleSummary:l,numberOfExecutions:d,isLoadingChart:g,onChangeDuration:h}):Object(b.jsx)(C.a,null)}));var F=n(8),P=n.n(F),z=n(124),B=n(63);const _=!1,N=({rule:e})=>{const{application:{navigateToApp:t},alerting:n}=Object(v.b)().services,[s,a]=Object(r.useState)(null);return Object(r.useEffect)((()=>{Object(B.pipe)(Object(z.fromNullable)(n),Object(z.fold)((()=>a(_)),(t=>t.getNavigation(e.id).then((e=>a(e||_))).catch((()=>{a(_)})))))}),[e.id,n]),Object(b.jsx)(i.EuiButtonEmpty,P()({"data-test-subj":"ruleDetails-viewInApp",isLoading:null===s,disabled:!W(s),iconType:"popout"},function(e,t,n){return W(e)?{onClick:()=>{n(t.consumer,e)}}:{}}(s,e,t)),Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.viewRuleInAppButtonLabel",defaultMessage:"View in app"}))};function W(e){return e?e.hasOwnProperty("state")||e.hasOwnProperty("path"):_}var q=n(35),K=n(2),G=n(148),$=n(23),H=n(131),Y=n(162);const V={minWidth:0},J=Object(O.a)((({rule:e,ruleType:t,actionTypes:n,disableRule:O,enableRule:y,snoozeRule:I,unsnoozeRule:E,requestRefresh:A,refreshToken:R})=>{var M,w,T;const S=Object(u.useHistory)(),{application:{capabilities:U},ruleTypeRegistry:L,actionTypeRegistry:C,setBreadcrumbs:F,chrome:P,http:z,notifications:{toasts:B}}=Object(v.b)().services,[{},_]=Object(r.useReducer)(G.a,{rule:e}),[W,J]=Object(r.useState)([]),[Q,X]=Object(r.useState)([]),[Z,ee]=Object(r.useState)(!1),[te,ne]=Object(r.useState)({isUsingSecurity:!1});Object(r.useEffect)((()=>{(async()=>{ne(await Object(H.a)({http:z}))})()}),[z]),Object(r.useEffect)((()=>{F([Object(x.a)("rules",!0),{text:e.name}]),P.docTitle.change(Object(h.a)("rules"))}),[]),Object(r.useEffect)((()=>{(async()=>{let t=[];try{t=await Object($.e)({http:z})}catch(e){t=[]}if(t.length>0){const n=e.actions.some((e=>!t.find((t=>t.id===e.id))));ee&&ee(n)}})()}),[]);const se=Object(m.c)(U),re=Object(m.a)(e,t)&&(se||!se&&0===e.actions.length),ae=re&&!!L.has(e.ruleTypeId)&&!L.get(e.ruleTypeId).requiresAppContext,[ie,ue]=Object(r.useState)(!1);Object(r.useEffect)((()=>{if(e.schedule.interval&&te.minimumScheduleInterval&&Object(c.parseDuration)(e.schedule.interval)<Object(c.parseDuration)(te.minimumScheduleInterval.value)){const e=B.addInfo({"data-test-subj":"intervalConfigToast",title:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.scheduleIntervalToastTitle",{defaultMessage:"Configuration settings"}),text:Object(l.toMountPoint)(Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)("p",null,Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.scheduleIntervalToastMessage",defaultMessage:"This rule has an interval set below the minimum configured interval. This may impact performance."})),ae&&Object(b.jsx)(i.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(i.EuiButton,{"data-test-subj":"ruleIntervalToastEditButton",onClick:()=>{B.remove(e),ue(!0)}},Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.scheduleIntervalToastMessageButton",defaultMessage:"Edit rule"}))))))})}}),[e.schedule.interval,te.minimumScheduleInterval,B,ae]);const oe=ae?Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(i.EuiButtonEmpty,{"data-test-subj":"openEditRuleFlyoutButton",iconType:"pencil",onClick:()=>ue(!0),name:"edit",disabled:!t.enabledInLicense},Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.editRuleButtonLabel",defaultMessage:"Edit"})),ie&&Object(b.jsx)(q.b,{initialRule:e,onClose:()=>{_({command:{type:"setRule"},payload:{key:"rule",value:e}}),ue(!1)},actionTypeRegistry:C,ruleTypeRegistry:L,ruleType:t,onSave:async()=>{S.push(Object(d.db)(e.id))}})):null;return Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(f.a,{onDeleted:async()=>{J([]),S.push(K.s)},onErrors:async()=>{await A(),J([])},onCancel:()=>{J([])},apiDeleteCall:g.h,idsToDelete:W,singleTitle:s.i18n.translate("xpack.triggersActionsUI.sections.rulesList.singleTitle",{defaultMessage:"rule"}),multipleTitle:"",setIsLoadingState:()=>{}}),Object(b.jsx)(p.a,{onCancel:()=>{X([])},idsToUpdate:Q,apiUpdateApiKeyCall:g.e,setIsLoadingState:()=>{},onUpdated:async()=>{X([]),A()}}),Object(b.jsx)(i.EuiPageHeader,{"data-test-subj":"ruleDetailsTitle",bottomBorder:!0,pageTitle:Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.ruleDetailsTitle",defaultMessage:"{ruleName}",values:{ruleName:e.name}}),description:Object(b.jsx)(i.EuiFlexGroup,{gutterSize:"m"},Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(i.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(i.EuiText,{size:"s"},Object(b.jsx)("p",null,Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.ruleTypeTitle",defaultMessage:"Type"})))),Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(i.EuiBadge,{"data-test-subj":"ruleTypeLabel"},t.name)))),Object(m.d)(U)&&e.apiKeyOwner&&Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(i.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(i.EuiText,{size:"s"},Object(b.jsx)("p",null,Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.apiKeyOwnerTitle",defaultMessage:"API key owner"})))),Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(i.EuiText,{size:"s","data-test-subj":"apiKeyOwnerLabel"},Object(b.jsx)("b",null,e.apiKeyOwner)))))),rightSideItems:[Object(b.jsx)(j,{canSaveRule:re,rule:e,onDelete:e=>{J([e])},onApiKeyUpdate:e=>{X([e])},onEnableDisable:async t=>{t?await y(e):await O(e),A()},onRunRule:async e=>{await Object(Y.a)(z,B,e)}}),oe,Object(b.jsx)(i.EuiButtonEmpty,{"data-test-subj":"refreshRulesButton",iconType:"refresh",onClick:A,name:"refresh",color:"primary"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.refreshRulesButtonLabel",defaultMessage:"Refresh"})),Object(b.jsx)(N,{rule:e})]}),Object(b.jsx)(i.EuiSpacer,{size:"l"}),Object(b.jsx)(i.EuiPageContentBody_Deprecated,null,e.enabled&&(null===(M=e.executionStatus.error)||void 0===M?void 0:M.reason)===c.RuleExecutionStatusErrorReasons.License?Object(b.jsx)(i.EuiFlexGroup,null,Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiCallOut,{color:"danger","data-test-subj":"ruleErrorBanner",size:"s",iconType:"rule"},Object(b.jsx)("p",null,Object(b.jsx)(i.EuiIcon,{color:"danger",type:"alert"})," ",Object(b.jsx)("b",null,e.executionStatus.error&&e.executionStatus.error.reason?k.C[e.executionStatus.error.reason]:k.C.unknown),", ",null===(w=e.executionStatus.error)||void 0===w?void 0:w.message," ",Object(b.jsx)(i.EuiLink,{href:`${z.basePath.get()}/app/management/stack/license_management`,color:"primary",target:"_blank"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.manageLicensePlanBannerLinkTitle",defaultMessage:"Manage license"})))))):null,e.enabled&&"warning"===e.executionStatus.status?Object(b.jsx)(i.EuiFlexGroup,null,Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiCallOut,{color:"warning","data-test-subj":"ruleWarningBanner",size:"s",iconType:"alert"},Object(b.jsx)("p",null,Object(b.jsx)(i.EuiIcon,{color:"warning",type:"alert"})," ",e.executionStatus.warning&&e.executionStatus.warning.reason?k.F[e.executionStatus.warning.reason]:k.F.unknown," ",null===(T=e.executionStatus.warning)||void 0===T?void 0:T.message)))):null,Z&&Object(b.jsx)(i.EuiFlexGroup,null,Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiSpacer,{size:"s"}),Object(b.jsx)(i.EuiCallOut,{color:"warning","data-test-subj":"actionWithBrokenConnectorWarningBanner",size:"s"},Object(b.jsx)("p",null,Object(b.jsx)(i.EuiIcon,{color:"warning",type:"alert"})," ",Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.actionWithBrokenConnectorWarningBannerTitle",defaultMessage:"There is an issue with one of the connectors associated with this rule."})," ",ae&&Object(b.jsx)(i.EuiLink,{"data-test-subj":"actionWithBrokenConnectorWarningBannerEdit",color:"primary",onClick:()=>ue(!0)},Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.actionWithBrokenConnectorWarningBannerEditText",defaultMessage:"Edit rule"})))))),Object(b.jsx)(i.EuiFlexGroup,null,Object(b.jsx)(i.EuiFlexItem,{style:V},Object(b.jsx)(D,{requestRefresh:A,refreshToken:R,rule:e,ruleType:t,readOnly:!re})))))}));var Q=n(149);const X=({match:{params:{ruleId:e}},loadRuleTypes:t,loadActionTypes:n,resolveRule:u})=>{const{http:o,notifications:{toasts:l},spaces:c}=Object(v.b)().services,{basePath:d}=o,[p,g]=Object(r.useState)(null),[f,j]=Object(r.useState)(null),[m,x]=Object(r.useState)(null),[h,O]=a.a.useState();return Object(r.useEffect)((()=>{Z(e,t,u,n,g,j,x,l)}),[e,o,n,t,u,l,h]),Object(r.useEffect)((()=>{if(p){const e=p.outcome;if(c&&"aliasMatch"===e){const e=d.prepend(`insightsAndAlerting/triggersActions/rule/${p.id}`);c.ui.redirectLegacyUrl({path:e,aliasPurpose:p.alias_purpose,objectNoun:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.redirectObjectNoun",{defaultMessage:"rule"})})}}}),[p,c,d]),p&&f&&m?Object(b.jsx)(a.a.Fragment,null,(()=>{const e=p.outcome;if(c&&"conflict"===e){const e=p.alias_target_id,t=d.prepend(`insightsAndAlerting/triggersActions/rule/${e}`);return Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(i.EuiSpacer,null),c.ui.components.getLegacyUrlConflict({objectNoun:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.redirectObjectNoun",{defaultMessage:"rule"}),currentObjectId:null==p?void 0:p.id,otherObjectId:e,otherObjectPath:t}))}return null})(),Object(b.jsx)(J,{rule:p,ruleType:f,actionTypes:m,requestRefresh:async()=>O(Date.now()),refreshToken:h})):Object(b.jsx)(C.a,null)};async function Z(e,t,n,r,a,i,u,o){try{const s=await n(e);a(s);const[o,l]=await Promise.all([t().then((e=>e.find((e=>e.id===s.ruleTypeId)))).then(Object(Q.b)(`Invalid Rule Type: ${s.ruleTypeId}`)),r().then(Object(Q.c)(new Set(s.actions.map((e=>e.actionTypeId))),(e=>`Invalid Connector Type: ${e}`),(e=>e.id)))]);i(o),u(l)}catch(e){o.addDanger({title:s.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.unableToLoadRuleMessage",{defaultMessage:"Unable to load rule: {message}",values:{message:e.message}})})}}const ee=(te=Object(O.a)(X),e=>{const{http:t}=Object(v.b)().services;return Object(b.jsx)(te,P()({},e,{loadActionTypes:async()=>Object($.d)({http:t})}))});var te}}]);