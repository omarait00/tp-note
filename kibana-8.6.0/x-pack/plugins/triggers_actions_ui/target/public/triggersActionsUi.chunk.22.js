/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[22,29,40],{116:function(e,t,s){"use strict";s.r(t),s.d(t,"RuleSnoozeModal",(function(){return r})),s.d(t,"default",(function(){return r}));var o=s(1),n=s(4),i=s(22),a=s(60),l=s(92),c=s(127),u=s(0);const r=({rule:e,onClose:t,onLoading:s,onRuleChanged:r})=>{var d,b;const{http:g,notifications:{toasts:j}}=Object(i.b)().services,S=Object(o.useMemo)((()=>(e=>Boolean(e.isSnoozedUntil&&new Date(e.isSnoozedUntil).getTime()>Date.now()||e.muteAll))(e)),[e]),O=Object(o.useCallback)((async o=>{try{s(!0),t(),await Object(a.B)({http:g,id:e.id,snoozeSchedule:o}),r(),j.addSuccess(l.SNOOZE_SUCCESS_MESSAGE)}catch(e){j.addDanger(l.SNOOZE_FAILED_MESSAGE)}finally{s(!1)}}),[s,t,g,e.id,r,j]),f=Object(o.useCallback)((async o=>{try{s(!0),t(),await Object(a.F)({http:g,id:e.id,scheduleIds:o}),r(),j.addSuccess(l.UNSNOOZE_SUCCESS_MESSAGE)}catch(e){j.addDanger(l.SNOOZE_FAILED_MESSAGE)}finally{s(!1)}}),[s,t,g,e.id,r,j]);return Object(u.jsx)(n.EuiModal,{onClose:t,"data-test-subj":"ruleSnoozeModal"},Object(u.jsx)(n.EuiModalBody,null,Object(u.jsx)(n.EuiSpacer,{size:"s"}),Object(u.jsx)(c.a,{inPopover:!1,interval:Object(c.b)(e.isSnoozedUntil),activeSnoozes:null!==(d=e.activeSnoozes)&&void 0!==d?d:[],scheduledSnoozes:null!==(b=e.snoozeSchedule)&&void 0!==b?b:[],showCancel:S,snoozeRule:O,unsnoozeRule:f})))}},125:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l}));var o=s(90),n=s.n(o),i=s(3);const a=new RegExp(`^([\\d\\.]+)\\s*(${n.a.units.join("|")})$`),l=e=>{if(e){const t=e.match(a);if(t)return{value:Number(t[1]),unit:t[2]}}throw new Error(i.i18n.translate("xpack.triggersActionsUI.parseInterval.errorMessage",{defaultMessage:"{value} is not an interval string",values:{value:e}}))};s(27);const c="/internal/triggers_actions_ui"},92:function(e,t,s){"use strict";s.r(t),s.d(t,"SNOOZE_SUCCESS_MESSAGE",(function(){return g})),s.d(t,"UNSNOOZE_SUCCESS_MESSAGE",(function(){return j})),s.d(t,"SNOOZE_FAILED_MESSAGE",(function(){return S})),s.d(t,"RulesListNotifyBadge",(function(){return f})),s.d(t,"default",(function(){return f}));var o=s(1),n=s(89),i=s.n(n),a=s(4),l=s(3),c=s(143),u=s(127),r=s(22),d=s(13),b=s(0);const g=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeSuccess",{defaultMessage:"Rule successfully snoozed"}),j=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.unsnoozeSuccess",{defaultMessage:"Rule successfully unsnoozed"}),S=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeFailed",{defaultMessage:"Unable to change rule snooze settings"}),O=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.openSnoozePanel",{defaultMessage:"Open snooze panel"}),f=e=>{var t,s;const{isLoading:n=!1,rule:f,isOpen:z,onClick:E,onClose:p,onLoading:h,onRuleChanged:x,snoozeRule:y,unsnoozeRule:M,showOnHover:v=!1,showTooltipInline:L=!1}=e,{isSnoozedUntil:m,muteAll:N,isEditable:C}=f,A=N,{notifications:{toasts:I}}=Object(r.b)().services,U=Object(o.useMemo)((()=>Object(d.c)(f)),[f]),_=Object(o.useMemo)((()=>(e=>{if(!e.snoozeSchedule)return null;const t=e.snoozeSchedule.filter((e=>Boolean(e.id)));return 0===t.length?null:t.reduce(((e,t)=>i()(t.rRule.dtstart).isBefore(i()(e.rRule.dtstart))?t:e))})(f)),[f]),w=Object(o.useMemo)((()=>!U&&Boolean(_)),[_,U]),B=Object(o.useMemo)((()=>m?Object(c.a)(i()(m)):_?Object(c.a)(i()(_.rRule.dtstart)):""),[m,_]),k=Object(o.useMemo)((()=>A?l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedIndefinitelyTooltip",{defaultMessage:"Notifications snoozed indefinitely"}):w?l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozeScheduledTooltip",{defaultMessage:"Notifications scheduled to snooze starting {schedStart}",values:{schedStart:Object(c.b)(i()(_.rRule.dtstart))}}):U?l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedTooltip",{defaultMessage:"Notifications snoozing for {snoozeTime}",values:{snoozeTime:i()(m).fromNow(!0)}}):L?l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.noSnoozeAppliedTooltip",{defaultMessage:"Notify when alerts generated"}):""),[A,w,U,m,_,L]),R=Object(o.useMemo)((()=>Object(b.jsx)(a.EuiButton,{size:"s",isLoading:n,disabled:n||!C,"data-test-subj":"rulesListNotifyBadge-snoozed","aria-label":O,minWidth:85,iconType:"bellSlash",color:"accent",onClick:E},Object(b.jsx)(a.EuiText,{size:"xs"},B))),[B,n,C,E]),T=Object(o.useMemo)((()=>Object(b.jsx)(a.EuiButton,{size:"s",isLoading:n,disabled:n||!C,"data-test-subj":"rulesListNotifyBadge-scheduled",minWidth:85,iconType:"calendar",color:"text","aria-label":O,onClick:E},Object(b.jsx)(a.EuiText,{size:"xs"},B))),[B,n,C,E]),D=Object(o.useMemo)((()=>{const e=v?"ruleSidebarItem__action":"";return Object(b.jsx)(a.EuiButtonIcon,{size:"s",isLoading:n,disabled:n||!C,display:n?"base":"empty","data-test-subj":"rulesListNotifyBadge-unsnoozed","aria-label":O,className:z||n?"":e,iconType:"bell",onClick:E})}),[z,n,C,v,E]),P=Object(o.useMemo)((()=>Object(b.jsx)(a.EuiButtonIcon,{size:"s",isLoading:n,disabled:n||!C,display:"base","data-test-subj":"rulesListNotifyBadge-snoozedIndefinitely","aria-label":O,iconType:"bellSlash",color:"accent",onClick:E})),[n,C,E]),F=Object(o.useMemo)((()=>w?T:A?P:U?R:D),[U,w,A,T,R,P,D]),G=Object(o.useMemo)((()=>z||L?F:Object(b.jsx)(a.EuiToolTip,{content:k},F)),[z,F,k,L]),Z=Object(o.useCallback)((()=>{p()}),[p]),H=Object(o.useCallback)((async e=>{try{h(!0),Z(),await y(e),x(),I.addSuccess(g)}catch(e){I.addDanger(S)}finally{h(!1)}}),[h,y,x,I,Z]),W=Object(o.useCallback)((async e=>{try{h(!0),Z(),await M(e),x(),I.addSuccess(j)}catch(e){I.addDanger(S)}finally{h(!1)}}),[h,M,x,I,Z]),$=Object(b.jsx)(a.EuiPopover,{"data-test-subj":"rulesListNotifyBadge",isOpen:z,closePopover:Z,button:G,anchorPosition:"rightCenter",panelStyle:{maxHeight:"100vh",overflowY:"auto"}},Object(b.jsx)(u.a,{snoozeRule:H,unsnoozeRule:W,interval:Object(u.b)(m),showCancel:U,scheduledSnoozes:null!==(t=f.snoozeSchedule)&&void 0!==t?t:[],activeSnoozes:null!==(s=f.activeSnoozes)&&void 0!==s?s:[],inPopover:!0}));return L?Object(b.jsx)(a.EuiFlexGroup,{alignItems:"center"},Object(b.jsx)(a.EuiFlexItem,{grow:!1},$),Object(b.jsx)(a.EuiFlexItem,null,Object(b.jsx)(a.EuiText,{color:"subdued",size:"xs"},k))):$}}}]);