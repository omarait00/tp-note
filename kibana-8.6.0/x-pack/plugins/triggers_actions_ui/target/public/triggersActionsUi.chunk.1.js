/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[1,40],{124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.bind=t.bindTo=t.getRefinement=t.exists=t.elem=t.option=t.MonadThrow=t.Witherable=t.Traversable=t.Filterable=t.Compactable=t.Extend=t.Alternative=t.Alt=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getMonoid=t.getLastMonoid=t.getFirstMonoid=t.getApplyMonoid=t.getApplySemigroup=t.getOrd=t.getEq=t.getShow=t.URI=t.wilt=t.wither=t.sequence=t.traverse=t.partitionMap=t.partition=t.filterMap=t.filter=t.separate=t.compact=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.throwError=t.zero=t.alt=t.flatten=t.chainFirst=t.chain=t.of=t.apSecond=t.apFirst=t.ap=t.map=t.mapNullable=t.getOrElse=t.getOrElseW=t.toUndefined=t.toNullable=t.fold=t.fromEither=t.getRight=t.getLeft=t.tryCatch=t.fromPredicate=t.fromNullable=t.some=t.none=t.isNone=t.isSome=void 0;var r=n(64);function i(e){return null==e?t.none:t.some(e)}function o(e){return"Right"===e._tag?t.none:t.some(e.left)}function a(e){return"Left"===e._tag?t.none:t.some(e.right)}t.isSome=function(e){return"Some"===e._tag},t.isNone=function(e){return"None"===e._tag},t.none={_tag:"None"},t.some=function(e){return{_tag:"Some",value:e}},t.fromNullable=i,t.fromPredicate=function(e){return function(n){return e(n)?t.some(n):t.none}},t.tryCatch=function(e){try{return t.some(e())}catch(e){return t.none}},t.getLeft=o,t.getRight=a,t.fromEither=function(e){return"Left"===e._tag?t.none:t.some(e.right)},t.fold=function(e,n){return function(r){return t.isNone(r)?e():n(r.value)}},t.toNullable=function(e){return t.isNone(e)?null:e.value},t.toUndefined=function(e){return t.isNone(e)?void 0:e.value},t.getOrElseW=function(e){return function(n){return t.isNone(n)?e():n.value}},t.getOrElse=t.getOrElseW,t.mapNullable=function(e){return function(n){return t.isNone(n)?t.none:i(e(n.value))}};var u=function(e,n){return r.pipe(e,t.map(n))},c=function(e,n){return r.pipe(e,t.ap(n))},s=function(e,n){return r.pipe(e,t.chain(n))},l=function(e,n,i){return r.pipe(e,t.reduce(n,i))},p=function(e){var n=t.foldMap(e);return function(e,t){return r.pipe(e,n(t))}},f=function(e,n,i){return r.pipe(e,t.reduceRight(n,i))},d=function(e){var n=t.traverse(e);return function(e,t){return r.pipe(e,n(t))}},h=function(e,n){return r.pipe(e,t.alt(n))},m=function(e,n){return r.pipe(e,t.filter(n))},g=function(e,n){return r.pipe(e,t.filterMap(n))},b=function(e,n){return r.pipe(e,t.extend(n))},y=function(e,n){return r.pipe(e,t.partition(n))},j=function(e,n){return r.pipe(e,t.partitionMap(n))},v=function(e){var n=t.wither(e);return function(e,t){return r.pipe(e,n(t))}},x=function(e){var n=t.wilt(e);return function(e,t){return r.pipe(e,n(t))}};t.map=function(e){return function(n){return t.isNone(n)?t.none:t.some(e(n.value))}},t.ap=function(e){return function(n){return t.isNone(n)||t.isNone(e)?t.none:t.some(n.value(e.value))}},t.apFirst=function(e){return r.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return r.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.some,t.chain=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)}},t.chainFirst=function(e){return t.chain((function(n){return r.pipe(e(n),t.map((function(){return n})))}))},t.flatten=t.chain(r.identity),t.alt=function(e){return function(n){return t.isNone(n)?e():n}},t.zero=function(){return t.none},t.throwError=function(){return t.none},t.extend=function(e){return function(n){return t.isNone(n)?t.none:t.some(e(n))}},t.duplicate=t.extend(r.identity),t.reduce=function(e,n){return function(r){return t.isNone(r)?e:n(e,r.value)}},t.foldMap=function(e){return function(n){return function(r){return t.isNone(r)?e.empty:n(r.value)}}},t.reduceRight=function(e,n){return function(r){return t.isNone(r)?e:n(r.value,e)}},t.compact=t.flatten;var k={left:t.none,right:t.none};function E(e){return{equals:function(n,r){return n===r||(t.isNone(n)?t.isNone(r):!t.isNone(r)&&e.equals(n.value,r.value))}}}function N(e){return{concat:function(n,r){return t.isSome(n)&&t.isSome(r)?t.some(e.concat(n.value,r.value)):t.none}}}t.separate=function(e){var n=r.pipe(e,t.map((function(e){return{left:o(e),right:a(e)}})));return t.isNone(n)?k:n.value},t.filter=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)?n:t.none}},t.filterMap=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)}},t.partition=function(e){return function(n){return{left:r.pipe(n,t.filter((function(t){return!e(t)}))),right:r.pipe(n,t.filter(e))}}},t.partitionMap=function(e){return function(n){return t.separate(r.pipe(n,t.map(e)))}},t.traverse=function(e){return function(n){return function(r){return t.isNone(r)?e.of(t.none):e.map(n(r.value),t.some)}}},t.sequence=function(e){return function(n){return t.isNone(n)?e.of(t.none):e.map(n.value,t.some)}},t.wither=function(e){return function(n){return function(r){return t.isNone(r)?e.of(t.none):n(r.value)}}},t.wilt=function(e){return function(n){return function(i){var u=r.pipe(i,t.map((function(t){return e.map(n(t),(function(e){return{left:o(e),right:a(e)}}))})));return t.isNone(u)?e.of({left:t.none,right:t.none}):u.value}}},t.URI="Option",t.getShow=function(e){return{show:function(n){return t.isNone(n)?"none":"some("+e.show(n.value)+")"}}},t.getEq=E,t.getOrd=function(e){return{equals:E(e).equals,compare:function(n,r){return n===r?0:t.isSome(n)?t.isSome(r)?e.compare(n.value,r.value):1:-1}}},t.getApplySemigroup=N,t.getApplyMonoid=function(e){return{concat:N(e).concat,empty:t.some(e.empty)}},t.getFirstMonoid=function(){return{concat:function(e,n){return t.isNone(e)?n:e},empty:t.none}},t.getLastMonoid=function(){return{concat:function(e,n){return t.isNone(n)?e:n},empty:t.none}},t.getMonoid=function(e){return{concat:function(n,r){return t.isNone(n)?r:t.isNone(r)?n:t.some(e.concat(n.value,r.value))},empty:t.none}},t.Functor={URI:t.URI,map:u},t.Applicative={URI:t.URI,map:u,ap:c,of:t.of},t.Monad={URI:t.URI,map:u,ap:c,of:t.of,chain:s},t.Foldable={URI:t.URI,reduce:l,foldMap:p,reduceRight:f},t.Alt={URI:t.URI,map:u,alt:h},t.Alternative={URI:t.URI,map:u,ap:c,of:t.of,alt:h,zero:t.zero},t.Extend={URI:t.URI,map:u,extend:b},t.Compactable={URI:t.URI,compact:t.compact,separate:t.separate},t.Filterable={URI:t.URI,map:u,compact:t.compact,separate:t.separate,filter:m,filterMap:g,partition:y,partitionMap:j},t.Traversable={URI:t.URI,map:u,reduce:l,foldMap:p,reduceRight:f,traverse:d,sequence:t.sequence},t.Witherable={URI:t.URI,map:u,reduce:l,foldMap:p,reduceRight:f,traverse:d,sequence:t.sequence,compact:t.compact,separate:t.separate,filter:m,filterMap:g,partition:y,partitionMap:j,wither:v,wilt:x},t.MonadThrow={URI:t.URI,map:u,ap:c,of:t.of,chain:s,throwError:t.throwError},t.option={URI:t.URI,map:u,of:t.of,ap:c,chain:s,reduce:l,foldMap:p,reduceRight:f,traverse:d,sequence:t.sequence,zero:t.zero,alt:h,extend:b,compact:t.compact,separate:t.separate,filter:m,filterMap:g,partition:y,partitionMap:j,wither:v,wilt:x,throwError:t.throwError},t.elem=function(e){return function(n,r){return!t.isNone(r)&&e.equals(n,r.value)}},t.exists=function(e){return function(n){return!t.isNone(n)&&e(n.value)}},t.getRefinement=function(e){return function(n){return t.isSome(e(n))}},t.bindTo=function(e){return t.map(r.bindTo_(e))},t.bind=function(e,n){return t.chain((function(i){return r.pipe(n(i),t.map((function(t){return r.bind_(i,e,t)})))}))},t.apS=function(e,n){return r.flow(t.map((function(t){return function(n){return r.bind_(t,e,n)}})),t.ap(n))}},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(90),i=n.n(r),o=n(3);const a=new RegExp(`^([\\d\\.]+)\\s*(${i.a.units.join("|")})$`),u=e=>{if(e){const t=e.match(a);if(t)return{value:Number(t[1]),unit:t[2]}}throw new Error(o.i18n.translate("xpack.triggersActionsUI.parseInterval.errorMessage",{defaultMessage:"{value} is not an interval string",values:{value:e}}))};n(27);const c="/internal/triggers_actions_ui"},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n(1),i=n(0);const o={loadingHealthCheck:!1,setLoadingHealthCheck:e=>{throw new Error("setLoadingHealthCheck was not initialized, set it when you invoke the context")}},a=Object(r.createContext)(o),u=({children:e})=>{const[t,n]=Object(r.useState)(!1),o=Object(r.useCallback)((e=>{n(e)}),[]),u=Object(r.useMemo)((()=>({loadingHealthCheck:t,setLoadingHealthCheck:o})),[t,o]);return Object(i.jsx)(a.Provider,{value:u},e)},c=()=>{const e=Object(r.useContext)(a);if(!e)throw new Error("HealthContext has not been set.");return e}},165:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(1),i=n.n(r),o=n(124),a=n(63),u=n(88),c=n(4),s=n(3),l=(n(190),n(142)),p=n(22),f=n(61),d=n(125),h=n(60),m=n(0);const g=({children:e,waitForCheck:t,inFlyout:n=!1})=>{const{http:r,docLinks:u}=Object(p.b)().services,{setLoadingHealthCheck:s}=Object(l.b)(),[g,x]=i.a.useState(o.none);i.a.useEffect((()=>{!async function(){s(!0);const e=await async function({http:e}){const t=await e.get(`${d.a}/_health`);return t?{isRulesAvailable:t.isAlertsAvailable}:t}({http:r}),t={...e,isSufficientlySecure:!1,hasPermanentEncryptionKey:!1};if(t.isRulesAvailable){const e=await async function(e){try{return Object(o.some)(await Object(h.a)({http:e}))}catch(e){return o.none}}(r);Object(o.isSome)(e)?(t.isSufficientlySecure=e.value.isSufficientlySecure,t.hasPermanentEncryptionKey=e.value.hasPermanentEncryptionKey):(t.isSufficientlySecure=!0,t.hasPermanentEncryptionKey=!0),x(Object(o.some)(t))}s(!1)}()}),[r,s]);const k=n?"alertingFlyoutHealthCheck":"alertingHealthCheck";return Object(a.pipe)(g,Object(o.fold)((()=>t?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(c.EuiSpacer,{size:"m"}),Object(m.jsx)(f.a,null)):Object(m.jsx)(i.a.Fragment,null,e)),(t=>null!=t&&t.isSufficientlySecure&&null!=t&&t.hasPermanentEncryptionKey?Object(m.jsx)(i.a.Fragment,null,e):t.isRulesAvailable?t.isSufficientlySecure||t.hasPermanentEncryptionKey?t.hasPermanentEncryptionKey?Object(m.jsx)(y,{docLinks:u,className:k}):Object(m.jsx)(b,{docLinks:u,className:k}):Object(m.jsx)(v,{docLinks:u,className:k}):Object(m.jsx)(j,{docLinks:u,className:k}))))},b=({docLinks:e,className:t})=>Object(m.jsx)(c.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(m.jsx)("h2",null,Object(m.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.encryptionErrorTitle",defaultMessage:"Additional setup required"})),body:Object(m.jsx)("div",{className:`${t}__body`},Object(m.jsx)("p",{role:"banner"},s.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorBeforeKey",{defaultMessage:"You must configure an encryption key to use Alerting. "}),Object(m.jsx)(c.EuiLink,{href:e.links.alerting.generalSettings,external:!0,target:"_blank"},s.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorAction",{defaultMessage:"Learn more."}))))}),y=({docLinks:e,className:t})=>Object(m.jsx)(c.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(m.jsx)("h2",null,Object(m.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledErrorTitle",defaultMessage:"Additional setup required"})),body:Object(m.jsx)("div",{className:`${t}__body`},Object(m.jsx)("p",{role:"banner"},s.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledError",{defaultMessage:"You must enable API keys to use Alerting. "}),Object(m.jsx)(c.EuiLink,{href:e.links.security.elasticsearchEnableApiKeys,external:!0,target:"_blank"},s.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledErrorAction",{defaultMessage:"Learn more."}))))}),j=({docLinks:e,className:t})=>Object(m.jsx)(c.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"alertsNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(m.jsx)("h2",null,Object(m.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.alertsErrorTitle",defaultMessage:"You must enable Alerting and Actions"})),body:Object(m.jsx)("div",{className:`${t}__body`},Object(m.jsx)("p",{role:"banner"},s.i18n.translate("xpack.triggersActionsUI.components.healthCheck.alertsError",{defaultMessage:"To create a rule, you must enable the alerting and actions plugins. "}),Object(m.jsx)(c.EuiLink,{href:e.links.alerting.generalSettings,external:!0,target:"_blank"},s.i18n.translate("xpack.triggersActionsUI.components.healthCheck.alertsErrorAction",{defaultMessage:"Learn how."}))))}),v=({docLinks:e,className:t})=>Object(m.jsx)(c.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(m.jsx)("h2",null,Object(m.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionErrorTitle",defaultMessage:"Additional setup required"})),body:Object(m.jsx)("div",{className:`${t}__body`},Object(m.jsx)("p",{role:"banner"},s.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionError",{defaultMessage:"You must enable API keys and configure an encryption key to use Alerting. "}),Object(m.jsx)(c.EuiLink,{href:e.links.alerting.setupPrerequisites,external:!0,target:"_blank"},s.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionErrorAction",{defaultMessage:"Learn more."}))))})},190:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(191);case"v8light":return n(193)}},191:function(e,t,n){var r=n(58),i=n(192);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},192:function(e,t,n){(t=n(59)(!1)).push([e.i,".alertingFlyoutHealthCheck__body,.alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{margin-top:16px}",""]),e.exports=t},193:function(e,t,n){var r=n(58),i=n(194);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},194:function(e,t,n){(t=n(59)(!1)).push([e.i,".alertingFlyoutHealthCheck__body,.alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{margin-top:16px}",""]),e.exports=t}}]);