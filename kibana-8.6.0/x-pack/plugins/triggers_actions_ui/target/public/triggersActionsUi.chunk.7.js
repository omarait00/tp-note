/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[7,18],{120:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return r}));const o=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},i=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},c=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute},a=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function s(e,t){var n,o;return null!==(n=null==t||null===(o=t.authorizedConsumers[e.consumer])||void 0===o?void 0:o.all)&&void 0!==n&&n}const r=e=>{var t,n;return null==e||null===(t=e.management)||void 0===t||null===(n=t.security)||void 0===n?void 0:n.api_keys}},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(3);const i={label:o.i18n.translate("xpack.triggersActionsUI.technicalPreviewBadgeLabel",{defaultMessage:"Technical preview"}),tooltipContent:o.i18n.translate("xpack.triggersActionsUI.technicalPreviewBadgeDescription",{defaultMessage:"This functionality is in technical preview and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but features in technical preview are not subject to the support SLA of official GA features."})}},128:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p})),n(1);var o=n(21),i=n(3),c=n(88),a=n(4),s=n(9),r=(n(135),n(0));const l=e=>({isEnabled:!1,message:i.i18n.translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByLicenseMessage",{defaultMessage:"This connector requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(o.upperFirst)(e.minimumLicenseRequired)}}),messageCard:Object(r.jsx)(a.EuiCard,{titleSize:"xs",title:i.i18n.translate("xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByLicenseMessageTitle",{defaultMessage:"This feature requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(o.upperFirst)(e.minimumLicenseRequired)}}),description:i.i18n.translate("xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByLicenseMessageDescription",{defaultMessage:"To re-enable this action, please upgrade your license."}),className:"actCheckActionTypeEnabled__disabledActionWarningCard",children:Object(r.jsx)(a.EuiLink,{href:s.VIEW_LICENSE_OPTIONS_LINK,target:"_blank"},Object(r.jsx)(c.FormattedMessage,{defaultMessage:"View license options",id:"xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByLicenseLinkTitle"}))})}),d={isEnabled:!1,message:i.i18n.translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByConfigMessage",{defaultMessage:"This connector is disabled by the Kibana configuration."}),messageCard:Object(r.jsx)(a.EuiCard,{title:i.i18n.translate("xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByConfigMessageTitle",{defaultMessage:"This feature is disabled by the Kibana configuration."}),description:"",className:"actCheckActionTypeEnabled__disabledActionWarningCard"})};function u(e){return!1===(null==e?void 0:e.enabledInLicense)?l(e):!1===(null==e?void 0:e.enabledInConfig)?d:{isEnabled:!0}}function p(e,t){return!1===(null==e?void 0:e.enabledInLicense)?l(e):!1!==(null==e?void 0:e.enabledInConfig)||t.find((t=>t.actionTypeId===e.id))?{isEnabled:!0}:d}},134:function(e,t,n){"use strict";function o(e,t,n){const o=i(e,n),c=i(t,n);return!0===o&&!1===c?-1:!1===o&&!0===c?1:e.name.localeCompare(t.name)}n.d(t,"a",(function(){return o}));const i=(e,t)=>{let n=e.enabled;return!e.enabledInConfig&&t&&t.length>0&&(n=void 0!==t.find((t=>t.actionTypeId===e.id))),n}},135:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(136);case"v8light":return n(138)}},136:function(e,t,n){var o=n(58),i=n(137);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);o(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},137:function(e,t,n){(t=n(59)(!1)).push([e.i,".actAccordionActionForm,.actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#25262e}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px}",""]),e.exports=t},138:function(e,t,n){var o=n(58),i=n(139);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);o(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},139:function(e,t,n){(t=n(59)(!1)).push([e.i,".actAccordionActionForm,.actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#f5f7fa}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px}",""]),e.exports=t},141:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=(e,t,n)=>{const o=n[t.actionTypeId];return e.filter((e=>e.actionTypeId===t.actionTypeId&&((null==o?void 0:o.enabledInConfig)||e.isPreconfigured)))}},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(4),i=n(1),c=n.n(i),a=n(3),s=n(141),r=n(0);const l=c.a.memo(d);function d({actionItem:e,accordionIndex:t,actionTypesIndex:n,actionTypeRegistered:c,connectors:a,onConnectorSelected:l}){var d;const b=Object(i.useMemo)((()=>Object(s.a)(a,e,n)),[e,n,a]),g=Object(i.useMemo)((()=>u(e.id,b,c)),[e.id,b,c]),m=Object(i.useMemo)((()=>p(b,c)),[b,c]),[x,f]=Object(i.useState)(g.length>0?g[0]:void 0),A=Object(i.useCallback)((e=>{var t,n;f(e[0]),l(null!==(t=null===(n=e[0].value)||void 0===n?void 0:n.id)&&void 0!==t?t:"")}),[l]);return Object(r.jsx)(o.EuiComboBox,{"aria-label":j,"data-test-subj":`selectActionConnector-${e.actionTypeId}-${t}`,fullWidth:!0,singleSelection:{asPlainText:!0},id:`selectActionConnector-${e.id}`,isClearable:!1,onChange:A,options:m,selectedOptions:g,prepend:null==x||null===(d=x.value)||void 0===d?void 0:d.prependComponent})}const u=(e,t,n)=>{const o=t.find((t=>t.id===e));return o?[b(o,n)]:[]},p=(e,t)=>e.map((e=>b(e,t))),b=(e,t)=>{const n=g(e,t);let o;if(null!=t.customConnectorSelectItem){const n=t.customConnectorSelectItem.getComponent(e);n&&(o=Object(r.jsx)(n,{actionConnector:e}))}return{label:n,value:{title:n,id:e.id,prependComponent:o},key:e.id,"data-test-subj":`dropdown-connector-${e.id}`}},g=(e,t)=>null!=t.customConnectorSelectItem?t.customConnectorSelectItem.getText(e):e.name,j=a.i18n.translate("xpack.triggersActionsUI.sections.actionForm.incidentManagementSystemLabel",{defaultMessage:"Incident management system"})},80:function(e,t,n){"use strict";n.r(t),n.d(t,"ActionForm",(function(){return v})),n.d(t,"default",(function(){return v}));var o=n(1),i=n.n(o),c=n(3),a=n(88),s=n(4),r=n(123),l=n(23),d=n(62),u=n(21),p=n(15),b=n(128),g=n(120),j=n(69),m=n(22),x=n(147),f=n(0);const A=c.i18n.translate("xpack.triggersActionsUI.sections.actionForm.preconfiguredTitleMessage",{defaultMessage:"(preconfigured)"}),I=({actionItem:e,actionConnector:t,index:n,onAddConnector:l,onConnectorSelected:d,onDeleteAction:I,setActionParamsProperty:y,actionTypesIndex:O,connectors:T,defaultActionGroupId:C,defaultActionMessage:E,messageVariables:v,actionGroups:F,setActionGroupIdByIndex:h,actionTypeRegistry:M,isActionGroupDisabledForActionType:k,recoveryActionGroup:S})=>{var w,U;const{application:{capabilities:_}}=Object(m.b)().services,[L,B]=Object(o.useState)(!0),[N,G]=Object(o.useState)([]),z=null==F?void 0:F.find((({id:e})=>e===C)),D=null!==(w=null==F?void 0:F.find((({id:t})=>t===e.group)))&&void 0!==w?w:z,[P,$]=Object(o.useState)(),[R,W]=Object(o.useState)({errors:{}}),q=async()=>{const t=await M.get(e.actionTypeId);let n;return e.group===S&&(n=t.defaultRecoveredActionParams),n||(n=t.defaultActionParams),n};Object(o.useEffect)((()=>{(async()=>{G(v?function(e,t){const n=Object(j.b)(e,null==t?void 0:t.omitMessageVariables);return Object(u.partition)(n,(e=>!0!==e.deprecated)).reduce(((e,t)=>[...e,...t.sort(((e,t)=>e.name.toUpperCase().localeCompare(t.name.toUpperCase())))]),[])}(v,D):[]);const t=await q();if(t)for(const[o,i]of Object.entries(t))void 0!==e.params[o]&&null!==e.params[o]||y(o,i,n)})()}),[e.group]),Object(o.useEffect)((()=>{(async()=>{const e=await q();if(e&&P)for(const[t,o]of Object.entries(e))y(t,o,n)})()}),[P]),Object(o.useEffect)((()=>{(async()=>{var t;const n=await(null===(t=M.get(e.actionTypeId))||void 0===t?void 0:t.validateParams(e.params));W(n)})()}),[e]);const V=Object(g.e)(_),K=(e,t)=>!!k&&k(e,t),H=M.get(t.actionTypeId);if(!H)return null;const J=H.actionParamsFields,Q=Object(b.a)(O[t.actionTypeId],T.filter((e=>e.isPreconfigured))),X=Q.isEnabled?Object(f.jsx)(i.a.Fragment,null,F&&D&&h&&Object(f.jsx)(i.a.Fragment,null,Object(f.jsx)(s.EuiSuperSelect,{prepend:Object(f.jsx)(s.EuiFormLabel,{htmlFor:`addNewActionConnectorActionGroup-${e.actionTypeId}`},Object(f.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionTypeForm.actionRunWhenInActionGroup",defaultMessage:"Run when"})),fullWidth:!0,id:`addNewActionConnectorActionGroup-${e.actionTypeId}`,"data-test-subj":`addNewActionConnectorActionGroup-${n}`,options:F.map((({id:t,name:o})=>{return{value:t,inputDisplay:(i=t,a=o,s=e.actionTypeId,k&&k(i,s)?c.i18n.translate("xpack.triggersActionsUI.sections.actionTypeForm.addNewActionConnectorActionGroup.display",{defaultMessage:"{actionGroupName} (Not Currently Supported)",values:{actionGroupName:a}}):a),disabled:K(t,e.actionTypeId),"data-test-subj":`addNewActionConnectorActionGroup-${n}-option-${t}`};var i,a,s})),valueOfSelected:D.id,onChange:e=>{h(e,n),$(e)}}),Object(f.jsx)(s.EuiSpacer,{size:"l"})),Object(f.jsx)(s.EuiFormRow,{fullWidth:!0,label:Object(f.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionTypeForm.actionIdLabel",defaultMessage:"{connectorInstance} connector",values:{connectorInstance:O?O[t.actionTypeId].name:t.actionTypeId}}),labelAppend:V&&O&&O[t.actionTypeId].enabledInConfig?Object(f.jsx)(s.EuiButtonEmpty,{size:"xs","data-test-subj":`addNewActionConnectorButton-${e.actionTypeId}`,onClick:l},Object(f.jsx)(a.FormattedMessage,{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.actionTypeForm.addNewConnectorEmptyButton"})):null},Object(f.jsx)(x.a,{actionItem:e,accordionIndex:n,actionTypesIndex:O,actionTypeRegistered:H,connectors:T,onConnectorSelected:d})),Object(f.jsx)(s.EuiSpacer,{size:"xl"}),J?Object(f.jsx)(s.EuiErrorBoundary,null,Object(f.jsx)(o.Suspense,{fallback:null},Object(f.jsx)(J,{actionParams:e.params,index:n,errors:R.errors,editAction:y,messageVariables:N,defaultMessage:null!==(U=null==D?void 0:D.defaultActionMessage)&&void 0!==U?U:E,actionConnector:t,executionMode:p.b.ActionForm}))):null):Q.messageCard;return Object(f.jsx)(s.EuiAccordion,{initialIsOpen:!0,key:n,id:n.toString(),onToggle:B,paddingSize:"l",className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":`alertActionAccordion-${n}`,buttonContent:Object(f.jsx)(s.EuiFlexGroup,{gutterSize:"l",alignItems:"center"},!L&&Object(u.some)(R.errors,(e=>!Object(u.isEmpty)(e)))?Object(f.jsx)(s.EuiFlexItem,{grow:!1},Object(f.jsx)(s.EuiToolTip,{content:c.i18n.translate("xpack.triggersActionsUI.sections.actionTypeForm.actionErrorToolTip",{defaultMessage:"Action contains errors."})},Object(f.jsx)(s.EuiIcon,{"data-test-subj":"action-group-error-icon",type:"alert",color:"danger",size:"m"}))):Object(f.jsx)(s.EuiFlexItem,{grow:!1},Object(f.jsx)(s.EuiIcon,{type:H.iconClass,size:"m"})),Object(f.jsx)(s.EuiFlexItem,null,Object(f.jsx)(s.EuiText,null,Object(f.jsx)("div",null,Object(f.jsx)(s.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(f.jsx)(s.EuiFlexItem,{grow:!1},Object(f.jsx)(a.FormattedMessage,{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.actionTypeForm.existingAlertActionTypeEditTitle",values:{actionConnectorName:`${t.name} ${t.isPreconfigured?A:""}`}})),D&&!L&&Object(f.jsx)(s.EuiFlexItem,{grow:!1},Object(f.jsx)(s.EuiBadge,null,D.name)),Object(f.jsx)(s.EuiFlexItem,{grow:!1},!1===Q.isEnabled&&Object(f.jsx)(i.a.Fragment,null,Object(f.jsx)(s.EuiIconTip,{type:"alert",color:"danger",content:c.i18n.translate("xpack.triggersActionsUI.sections.actionTypeForm.actionDisabledTitle",{defaultMessage:"This action is disabled"}),position:"right"}))))))),H&&H.isExperimental&&Object(f.jsx)(s.EuiFlexItem,{grow:!1},Object(f.jsx)(s.EuiBetaBadge,{"data-test-subj":"action-type-form-beta-badge",label:r.a.label,tooltipContent:r.a.tooltipContent}))),extraAction:Object(f.jsx)(s.EuiButtonIcon,{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":c.i18n.translate("xpack.triggersActionsUI.sections.actionTypeForm.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:I})},X)};var y=n(96),O=n(134),T=n(9),C=n(20),E=n(5);const v=({actions:e,defaultActionGroupId:t,setActionIdByIndex:n,setActionGroupIdByIndex:u,setActions:p,setActionParamsProperty:g,featureId:j,messageVariables:x,actionGroups:A,defaultActionMessage:v,setHasActionsDisabled:F,setHasActionsWithBrokenConnector:h,actionTypeRegistry:M,recoveryActionGroup:k,isActionGroupDisabledForActionType:S,hideActionHeader:w})=>{const{http:U,notifications:{toasts:_}}=Object(m.b)().services,[L,B]=Object(o.useState)(!1),[N,G]=Object(o.useState)(void 0),[z,D]=Object(o.useState)(!0),[P,$]=Object(o.useState)([]),[R,W]=Object(o.useState)(!1),[q,V]=Object(o.useState)(!1),[K,H]=Object(o.useState)(void 0),[J,Q]=Object(o.useState)([]),X=Object(o.useCallback)((()=>B(!1)),[B]);Object(o.useEffect)((()=>{(async()=>{try{V(!0);const e=(await Object(l.d)({http:U,featureId:j})).sort(((e,t)=>e.name.localeCompare(t.name))),t={};for(const n of e)t[n.id]=n;H(t)}catch(e){_.addDanger({title:c.i18n.translate("xpack.triggersActionsUI.sections.actionForm.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}finally{V(!1)}})()}),[]),Object(o.useEffect)((()=>{(async()=>{try{W(!0);const e=await Object(l.e)({http:U});$(e.filter((e=>!e.isMissingSecrets)))}catch(e){_.addDanger({title:c.i18n.translate("xpack.triggersActionsUI.sections.actionForm.unableToLoadActionsMessage",{defaultMessage:"Unable to load connectors"})})}finally{W(!1)}})()}),[]),Object(o.useEffect)((()=>{P.length>0&&K&&(()=>{const t=P.filter((e=>e.isPreconfigured)),n=e.some((e=>K&&!K[e.actionTypeId].enabled&&!Object(b.a)(K[e.actionTypeId],t).isEnabled));F&&F(n)})()}),[P,K]),Object(o.useEffect)((()=>{const t=e.some((e=>!P.find((t=>t.id===e.id))));h&&h(t)}),[e,P]);let Y=null,Z=!1;if(K){const o=P.filter((e=>e.isPreconfigured));Y=M.list().filter((e=>K[e.id])).filter((e=>!!e.actionParamsFields)).sort(((e,t)=>Object(O.a)(K[e.id],K[t.id],o))).map((function(i,a){const l=K[i.id],d=Object(b.a)(K[i.id],o);if(!l.enabledInConfig&&!d.isEnabled)return null;l.enabledInLicense||(Z=!0);const u=Object(f.jsx)(s.EuiKeyPadMenuItem,{key:a,isDisabled:!d.isEnabled,"data-test-subj":`${i.id}-${j}-ActionTypeSelectOption`,label:K[i.id].name,betaBadgeLabel:i.isExperimental?r.a.label:void 0,betaBadgeTooltipContent:i.isExperimental?r.a.tooltipContent:void 0,onClick:()=>function(o){if(!t)return void _.addDanger({title:c.i18n.translate("xpack.triggersActionsUI.sections.actionForm.unableToAddAction",{defaultMessage:"Unable to add action, because default action group is not defined"})});D(!1);const i=P.filter((e=>e.actionTypeId===o.id));i.length>0&&(e.push({id:"",actionTypeId:o.id,group:t,params:{}}),n(i[0].id,e.length-1)),0===i.length&&(e.push({id:"",actionTypeId:o.id,group:t,params:{}}),n(e.length.toString(),e.length-1),Q([...J,e.length.toString()]))}(i)},Object(f.jsx)(s.EuiIcon,{size:"xl",type:"string"==typeof i.iconClass?i.iconClass:Object(E.a)(i.iconClass)}));return Object(f.jsx)(s.EuiFlexItem,{grow:!1,key:`keypad-${i.id}`},d.isEnabled&&u,!1===d.isEnabled&&Object(f.jsx)(s.EuiToolTip,{position:"top",content:d.message},u))}))}return R?Object(f.jsx)(d.a,null,Object(f.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionForm.loadingConnectorsDescription",defaultMessage:"Loading connectors…"})):Object(f.jsx)(i.a.Fragment,null,!w&&Object(f.jsx)(i.a.Fragment,null,Object(f.jsx)(s.EuiTitle,{size:"s"},Object(f.jsx)("h4",null,Object(f.jsx)(a.FormattedMessage,{defaultMessage:"Actions",id:"xpack.triggersActionsUI.sections.actionForm.actionSectionsTitle"}))),Object(f.jsx)(s.EuiSpacer,{size:"m"})),K&&e.map(((o,i)=>{const c=P.find((e=>e.id===o.id));return c?Object(f.jsx)(I,{actionItem:o,actionConnector:c,index:i,key:`action-form-action-at-${i}`,setActionParamsProperty:g,actionTypesIndex:K,connectors:P,defaultActionGroupId:t,messageVariables:x,actionGroups:A,defaultActionMessage:v,recoveryActionGroup:k,isActionGroupDisabledForActionType:S,setActionGroupIdByIndex:u,onAddConnector:()=>{G({actionTypeId:o.actionTypeId,indices:[i]}),B(!0)},onConnectorSelected:e=>{n(e,i)},actionTypeRegistry:M,onDeleteAction:()=>{const t=e.filter(((e,t)=>t!==i));p(t),D(0===t.filter((e=>e.id!==o.id)).length),G(void 0)}}):Object(f.jsx)(y.AddConnectorInline,{actionTypesIndex:K,actionItem:o,index:i,key:`action-form-action-at-${i}`,actionTypeRegistry:M,emptyActionsIds:J,connectors:P,onDeleteConnector:()=>{const t=e.filter(((e,t)=>t!==i));p(t),D(0===t.filter((e=>e.id!==o.id)).length),G(void 0)},onAddConnector:()=>{G({actionTypeId:o.actionTypeId,indices:e.map(((e,t)=>e.id===o.id?t:-1)).filter((e=>e>=0))}),B(!0)},onSelectConnector:e=>{n(e,i)}})})),Object(f.jsx)(s.EuiSpacer,{size:"m"}),z?Object(f.jsx)(i.a.Fragment,null,Object(f.jsx)(s.EuiFlexGroup,{id:"alertActionTypeTitle",justifyContent:"spaceBetween"},Object(f.jsx)(s.EuiFlexItem,{grow:!1},Object(f.jsx)(s.EuiTitle,{size:"xs"},Object(f.jsx)("h5",null,Object(f.jsx)(a.FormattedMessage,{defaultMessage:"Select a connector type",id:"xpack.triggersActionsUI.sections.actionForm.selectConnectorTypeTitle"})))),Z&&Object(f.jsx)(s.EuiFlexItem,{grow:!1},Object(f.jsx)(s.EuiTitle,{size:"xs"},Object(f.jsx)("h5",null,Object(f.jsx)(s.EuiLink,{href:T.VIEW_LICENSE_OPTIONS_LINK,target:"_blank",external:!0,className:"actActionForm__getMoreActionsLink"},Object(f.jsx)(a.FormattedMessage,{defaultMessage:"Get more connectors",id:"xpack.triggersActionsUI.sections.actionForm.getMoreConnectorsTitle"})))))),Object(f.jsx)(s.EuiSpacer,null),Object(f.jsx)(s.EuiFlexGroup,{gutterSize:"m",wrap:!0},q?Object(f.jsx)(d.a,null,Object(f.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionForm.loadingConnectorTypesDescription",defaultMessage:"Loading connector types…"})):Y)):Object(f.jsx)(s.EuiFlexGroup,null,Object(f.jsx)(s.EuiFlexItem,{grow:!1},Object(f.jsx)(s.EuiButton,{size:"s","data-test-subj":"addAlertActionButton",onClick:()=>D(!0)},Object(f.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionForm.addActionButtonLabel",defaultMessage:"Add action"})))),K&&N&&L?Object(f.jsx)(C.b,{actionType:K[N.actionTypeId],onClose:X,postSaveEventHandler:e=>{P.push(e),(N.indices||[]).forEach((t=>n(e.id,t)))},actionTypeRegistry:M}):null)}},96:function(e,t,n){"use strict";n.r(t),n.d(t,"AddConnectorInline",(function(){return g})),n.d(t,"default",(function(){return g}));var o=n(1),i=n.n(o),c=n(3),a=n(88),s=n(4),r=n(123),l=n(120),d=n(22),u=n(141),p=n(147),b=n(0);const g=({actionTypesIndex:e,actionItem:t,index:n,connectors:g,onAddConnector:j,onDeleteConnector:m,onSelectConnector:x,actionTypeRegistry:f,emptyActionsIds:A})=>{const{application:{capabilities:I}}=Object(d.b)().services,y=Object(l.e)(I),[O,T]=Object(o.useState)(!1),[C,E]=Object(o.useState)(!1),v=e?e[t.actionTypeId].name:t.actionTypeId,F=f.get(t.actionTypeId),h=Object(o.useMemo)((()=>[`Unable to load ${F.actionTypeTitle} connector`]),[F.actionTypeTitle]),M=Object(b.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.emptyConnectorsLabel",defaultMessage:"No {actionTypeName} connectors",values:{actionTypeName:v}}),k=Object(b.jsx)(s.EuiText,{color:"danger"},Object(b.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.unableToLoadConnectorTitle",defaultMessage:"Unable to load connector"}));Object(o.useEffect)((()=>{Object(u.a)(g,t,e).length>0&&T(!0),E(!!A.find((e=>t.id===e)))}),[]);const S=Object(b.jsx)(s.EuiFormRow,{fullWidth:!0,label:Object(b.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.connectorAddInline.actionIdLabel",defaultMessage:"Use another {connectorInstance} connector",values:{connectorInstance:v}}),labelAppend:Object(b.jsx)(s.EuiButtonEmpty,{size:"xs","data-test-subj":`addNewActionConnectorButton-${t.actionTypeId}`,onClick:j},Object(b.jsx)(a.FormattedMessage,{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.connectorAddInline.connectorAddInline.addNewConnectorEmptyButton"})),error:h,isInvalid:!0},Object(b.jsx)(p.a,{actionItem:t,accordionIndex:n,actionTypesIndex:e,actionTypeRegistered:F,connectors:g,onConnectorSelected:x}));return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(s.EuiAccordion,{key:n,initialIsOpen:!0,id:n.toString(),className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":`alertActionAccordion-${n}`,buttonContent:Object(b.jsx)(s.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiIcon,{type:F.iconClass,size:"m"})),Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(s.EuiText,null,Object(b.jsx)("div",null,Object(b.jsx)(a.FormattedMessage,{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.connectorAddInline.newRuleActionTypeEditTitle",values:{actionConnectorName:F.actionTypeTitle}})))),!C&&Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiIconTip,{type:"alert",size:"m",color:"danger","data-test-subj":"alertActionAccordionErrorTooltip",content:Object(b.jsx)(a.FormattedMessage,{defaultMessage:"Unable to load connector",id:"xpack.triggersActionsUI.sections.connectorAddInline.unableToLoadConnectorTitle'"})})),F&&F.isExperimental&&Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiBetaBadge,{label:r.a.label,tooltipContent:r.a.tooltipContent}))),extraAction:Object(b.jsx)(s.EuiButtonIcon,{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":c.i18n.translate("xpack.triggersActionsUI.sections.connectorAddInline.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:m}),paddingSize:"l"},y?O?S:Object(b.jsx)(s.EuiEmptyPrompt,{title:C?M:k,actions:Object(b.jsx)(s.EuiButton,{color:"primary",fill:!0,size:"s","data-test-subj":`createActionConnectorButton-${n}`,onClick:j},Object(b.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.addConnectorButtonLabel",defaultMessage:"Create a connector"}))}):Object(b.jsx)(s.EuiCallOut,{title:M},Object(b.jsx)("p",null,Object(b.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.unauthorizedToCreateForEmptyConnectors",defaultMessage:"Only authorized users can configure a connector. Contact your administrator."})))),Object(b.jsx)(s.EuiSpacer,{size:"xs"}))}}}]);