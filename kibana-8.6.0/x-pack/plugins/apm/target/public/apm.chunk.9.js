/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.apm_bundle_jsonpfunction=window.apm_bundle_jsonpfunction||[]).push([[9],{100:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(15),r=a(7),i=a(1),l=a.n(i),o=a(61);function s({customOptions:e,customOptionText:t,defaultValue:a,fieldName:s,start:c,end:u,onChange:d,placeholder:m,isInvalid:p,dataTestSubj:v,isClearable:f=!0,prepend:b}){var g;let E;a&&(E={label:a,value:a});const[h,y]=Object(i.useState)(E?[E]:[]),[S,O]=Object(i.useState)(""),{data:I,status:T}=Object(o.c)((e=>e("GET /internal/apm/suggestions",{params:{query:{fieldName:s,fieldValue:S,start:c,end:u}}})),[s,S,c,u],{preservePreviousData:!1}),w=Object(i.useCallback)((e=>{y(e),0===e.length&&d(""),1===e.length&&d(e[0].value?e[0].value.trim():e[0].value)}),[d]),x=Object(i.useCallback)((e=>{w([{label:e,value:e}])}),[w]),j=[...e||[],...(null!==(g=null==I?void 0:I.terms)&&void 0!==g?g:[]).map((e=>({label:e,value:e})))];return l.a.createElement(n.EuiComboBox,{async:!0,customOptionText:t,isClearable:f,isLoading:T===o.a.LOADING,onChange:w,onSearchChange:Object(r.throttle)(O,500),options:j,placeholder:m,selectedOptions:h,singleSelection:{asPlainText:!0},isInvalid:p,style:{minWidth:"256px"},onCreateOption:x,"data-test-subj":v,prepend:b})}},101:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(1),r=a(115);function i(){return Object(n.useContext)(r.a)}},1098:function(e,t,a){"use strict";a.r(t),a.d(t,"TransactionDurationAnomalyRuleType",(function(){return S}));var n=a(0),r=a(7),i=a(1),l=a.n(i),o=a(21),s=a(38),c=a(12),u=a(5),d=a(74),m=a(110),p=a(111),v=a(96),f=a(34),b=a(15),g=a(119),E=a(13);function h({type:e}){const t=E.a.find((t=>t.type===e));return l.a.createElement(b.EuiHealth,{color:Object(g.c)(t.threshold),style:{lineHeight:"inherit"}},t.label)}function y({onChange:e,value:t}){return l.a.createElement(b.EuiSuperSelect,{hasDividers:!0,style:{width:200},options:E.a.map((e=>({value:e.type,inputDisplay:l.a.createElement(h,{type:e.type}),dropdownDisplay:l.a.createElement(l.a.Fragment,null,l.a.createElement(h,{type:e.type}),l.a.createElement(b.EuiSpacer,{size:"xs"}),l.a.createElement(b.EuiText,{size:"xs",color:"subdued"},l.a.createElement("p",{"data-test-subj":"SelectAnomalySeverity option text"},l.a.createElement(f.FormattedMessage,{id:"xpack.apm.alerts.anomalySeverity.scoreDetailsDescription",defaultMessage:"score {value} {value, select, critical {} other {and above}}",values:{value:e.type}}))))}))),valueOfSelected:t,onChange:t=>{e(t)}})}function S(e){const{services:t}=Object(o.useKibana)(),{ruleParams:a,metadata:f,setRuleParams:b,setRuleProperty:g}=e;Object(i.useEffect)((()=>{Object(d.createCallApmApi)(t)}),[t]);const E=Object(r.defaults)({...Object(r.omit)(f,["start","end"]),...a},{windowSize:30,windowUnit:s.TIME_UNITS.MINUTE,anomalySeverityType:u.a.CRITICAL,environment:c.a.value}),S=[l.a.createElement(m.c,{currentValue:E.serviceName,onChange:e=>b("serviceName",e)}),l.a.createElement(m.d,{currentValue:E.transactionType,onChange:e=>b("transactionType",e)}),l.a.createElement(m.a,{currentValue:E.environment,onChange:e=>b("environment",e)}),l.a.createElement(v.a,{value:l.a.createElement(h,{type:E.anomalySeverityType}),title:n.i18n.translate("xpack.apm.transactionDurationAnomalyRuleType.anomalySeverity",{defaultMessage:"Has anomaly with severity"})},l.a.createElement(y,{value:E.anomalySeverityType,onChange:e=>{b("anomalySeverityType",e)}}))];return l.a.createElement(p.a,{fields:S,defaultParams:E,setRuleParams:b,setRuleProperty:g})}t.default=S},110:function(e,t,a){"use strict";a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return v})),a.d(t,"d",(function(){return f})),a.d(t,"b",(function(){return b}));var n=a(8),r=a.n(n),i=a(15),l=a(0),o=a(1),s=a.n(o),c=a(20),u=a(12),d=a(100),m=a(96);function p({allowAll:e=!0,currentValue:t,onChange:a}){return s.a.createElement(m.a,{value:t||u.c,title:l.i18n.translate("xpack.apm.alerting.fields.service",{defaultMessage:"Service"})},s.a.createElement(d.a,{customOptions:e?[{label:u.c,value:""}]:void 0,customOptionText:l.i18n.translate("xpack.apm.serviceNamesSelectCustomOptionText",{defaultMessage:"Add \\{searchValue\\} as a new service name"}),defaultValue:t,fieldName:c.x,onChange:a,placeholder:l.i18n.translate("xpack.apm.serviceNamesSelectPlaceholder",{defaultMessage:"Select service name"}),start:r()().subtract(24,"h").toISOString(),end:r()().toISOString()}))}function v({currentValue:e,onChange:t}){return s.a.createElement(m.a,{value:Object(u.d)(e),title:l.i18n.translate("xpack.apm.alerting.fields.environment",{defaultMessage:"Environment"})},s.a.createElement(d.a,{customOptions:[u.a],customOptionText:l.i18n.translate("xpack.apm.environmentsSelectCustomOptionText",{defaultMessage:"Add \\{searchValue\\} as a new environment"}),defaultValue:Object(u.d)(e),fieldName:c.v,onChange:t,placeholder:l.i18n.translate("xpack.apm.environmentsSelectPlaceholder",{defaultMessage:"Select environment"}),start:r()().subtract(24,"h").toISOString(),end:r()().toISOString()}))}function f({currentValue:e,onChange:t}){const a=l.i18n.translate("xpack.apm.alerting.fields.type",{defaultMessage:"Type"});return s.a.createElement(m.a,{value:e||u.c,title:a},s.a.createElement(d.a,{customOptions:[{label:u.c,value:""}],customOptionText:l.i18n.translate("xpack.apm.transactionTypesSelectCustomOptionText",{defaultMessage:"Add \\{searchValue\\} as a new transaction type"}),defaultValue:e,fieldName:c.L,onChange:t,placeholder:l.i18n.translate("xpack.apm.transactionTypesSelectPlaceholder",{defaultMessage:"Select transaction type"}),start:r()().subtract(24,"h").toISOString(),end:r()().toISOString()}))}function b({value:e,unit:t,onChange:a,step:n}){return s.a.createElement(m.a,{value:`${e}${t}`,title:l.i18n.translate("xpack.apm.transactionErrorRateRuleType.isAbove",{defaultMessage:"is above"})},s.a.createElement(i.EuiFieldNumber,{min:0,value:null!=e?e:0,onChange:e=>a(parseInt(e.target.value,10)),append:t,compressed:!0,step:n}))}},111:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(15),r=a(1),i=a.n(r),l=a(0),o=a(8),s=a.n(o),c=a(38);function u(e){const{fields:t,setRuleParams:a,defaultParams:l,chartPreview:o,minimumWindowSize:c}=e,u={...l},m=function({windowSize:e,windowUnit:t,minimumWindowSize:a}){const[n,i]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{if(void 0===e||void 0===a)return;const n=s.a.duration(e,t).asMilliseconds(),r=s.a.duration(a.value,a.unit).asMilliseconds();i(n<r)}),[e,t,a]),n}({windowSize:u.windowSize,windowUnit:u.windowUnit,minimumWindowSize:c});return Object(r.useEffect)((()=>{Object.keys(u).forEach((e=>{a(e,u[e])}))}),[]),i.a.createElement(i.a.Fragment,null,m&&c&&i.a.createElement(d,{minimumWindowSize:c}),i.a.createElement(n.EuiSpacer,{size:"l"}),i.a.createElement(n.EuiFlexGrid,{gutterSize:"l",direction:"row",columns:2},t.map(((e,t)=>i.a.createElement(n.EuiFlexItem,{grow:!1,key:t},e)))),o,i.a.createElement(n.EuiSpacer,{size:"m"}))}function d({minimumWindowSize:e}){const t=l.i18n.translate("xpack.apm.alertTypes.minimumWindowSize.description",{defaultMessage:"The recommended minimum value is {sizeValue} {sizeUnit}. This is to ensure that the alert has enough data to evaluate. If you choose a value that is too low, the alert may not fire as expected.",values:{sizeValue:e.value,sizeUnit:Object(c.getTimeUnitLabel)(e.unit)}});return i.a.createElement(n.EuiCallOut,{title:`Please increase "For the last" to at least ${e.value} ${Object(c.getTimeUnitLabel)(e.unit)}`,color:"warning",iconType:"alert"},i.a.createElement("p",null,t))}},115:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));var n=a(1),r=a.n(n);const i=Object(n.createContext)({incrementTimeRangeId:()=>{},timeRangeId:0});function l({children:e}){const[t,a]=Object(n.useState)(0),l=Object(n.useMemo)((()=>({incrementTimeRangeId:()=>a((e=>e+1)),timeRangeId:t})),[t,a]);return r.a.createElement(i.Provider,{value:l},e)}},119:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return s}));var n=a(0),r=a(46),i=a(5);function l(e){return void 0===e?i.a.UNKNOWN:Object(r.getSeverityType)(e)}function o(e){return Object(r.getSeverityColor)(e)}const s={INVALID_LICENSE:n.i18n.translate("xpack.apm.anomaly_detection.error.invalid_license",{defaultMessage:"To use anomaly detection, you must be subscribed to an Elastic Platinum license. With it, you'll be able to monitor your services with the aid of machine learning."}),MISSING_READ_PRIVILEGES:n.i18n.translate("xpack.apm.anomaly_detection.error.missing_read_privileges",{defaultMessage:'You must have "read" privileges to Machine Learning and APM in order to view Anomaly Detection jobs'}),MISSING_WRITE_PRIVILEGES:n.i18n.translate("xpack.apm.anomaly_detection.error.missing_write_privileges",{defaultMessage:'You must have "write" privileges to Machine Learning and APM in order to create Anomaly Detection jobs'}),ML_NOT_AVAILABLE:n.i18n.translate("xpack.apm.anomaly_detection.error.not_available",{defaultMessage:"Machine learning is not available"}),ML_NOT_AVAILABLE_IN_SPACE:n.i18n.translate("xpack.apm.anomaly_detection.error.not_available_in_space",{defaultMessage:"Machine learning is not available in the selected space"})}},61:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return m}));var n=a(0),r=a(1),i=a.n(r),l=a(21),o=a(19),s=a(101),c=a(74);let u;!function(e){e.LOADING="loading",e.SUCCESS="success",e.FAILURE="failure",e.NOT_INITIATED="not_initiated"}(u||(u={}));const d=e=>e===u.LOADING||e===u.NOT_INITIATED;function m(e,t,a={}){const{notifications:d}=Object(l.useKibana)(),{preservePreviousData:m=!0,showToastOnError:p=!0}=a,[v,f]=Object(r.useState)({data:void 0,status:u.NOT_INITIATED}),[b,g]=Object(r.useState)(0),{timeRangeId:E}=Object(s.a)(),{addInspectorRequest:h}=Object(o.useInspectorContext)();return Object(r.useEffect)((()=>{let t=new AbortController;return async function(){t.abort(),t=new AbortController;const a=t.signal,r=e((e=>(t,a)=>Object(c.callApmApi)(t,{...a,signal:e}))(a));if(r){f((e=>({data:m?e.data:void 0,status:u.LOADING,error:void 0})));try{const e=await r;a.aborted||f({data:e,status:u.SUCCESS,error:void 0})}catch(e){const t=e;if(!a.aborted){const a="response"in t?function(e){var t,a,r,l,o;const s=null!==(t=null===(a=e.body)||void 0===a?void 0:a.message)&&void 0!==t?t:null===(r=e.response)||void 0===r?void 0:r.statusText;return i.a.createElement(i.a.Fragment,null,s," (",null===(l=e.response)||void 0===l?void 0:l.status,")",i.a.createElement("h5",null,n.i18n.translate("xpack.apm.fetcher.error.url",{defaultMessage:"URL"})),null===(o=e.response)||void 0===o?void 0:o.url)}(t):t.message;p&&d.toasts.danger({title:n.i18n.translate("xpack.apm.fetcher.error.title",{defaultMessage:"Error while fetching resource"}),body:i.a.createElement("div",null,i.a.createElement("h5",null,n.i18n.translate("xpack.apm.fetcher.error.status",{defaultMessage:"Error"})),a)}),f({data:void 0,status:u.FAILURE,error:e})}}}}(),()=>{t.abort()}}),[b,m,E,p,...t]),Object(r.useEffect)((()=>{var e;v.error?h({...v,data:null===(e=v.error.body)||void 0===e?void 0:e.attributes}):h(v)}),[h,v]),Object(r.useMemo)((()=>({...v,refetch:()=>{g((e=>e+1))}})),[v])}},96:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(1),r=a.n(n),i=a(15);function l(e){const{title:t,value:a,children:l}=e,[o,s]=Object(n.useState)(!1);return r.a.createElement(i.EuiPopover,{isOpen:o,anchorPosition:"downLeft",closePopover:()=>s(!1),button:r.a.createElement(i.EuiExpression,{description:t,value:a,isActive:o,onClick:()=>s((e=>!e))}),repositionOnScroll:!0},l)}}}]);