/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.spaces_bundle_jsonpfunction=window.spaces_bundle_jsonpfunction||[]).push([[3],{102:function(e,a,t){switch(window.__kbnThemeTag__){case"v8dark":return t(103);case"v8light":return t(105)}},103:function(e,a,t){var s=t(34),n=t(104);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);s(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},104:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__flyoutBodyWrapper{padding:24px}",""]),e.exports=a},105:function(e,a,t){var s=t(34),n=t(106);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);s(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},106:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__flyoutBodyWrapper{padding:24px}",""]),e.exports=a},107:function(e,a,t){switch(window.__kbnThemeTag__){case"v8dark":return t(108);case"v8light":return t(110)}},108:function(e,a,t){var s=t(34),n=t(109);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);s(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},109:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpaceIncludeRelated .euiIcon{margin-right:28px}.spcShareToSpaceIncludeRelated__label{font-size:14px}",""]),e.exports=a},110:function(e,a,t){var s=t(34),n=t(111);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);s(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},111:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpaceIncludeRelated .euiIcon{margin-right:28px}.spcShareToSpaceIncludeRelated__label{font-size:14px}",""]),e.exports=a},112:function(e,a,t){switch(window.__kbnThemeTag__){case"v8dark":return t(113);case"v8light":return t(115)}},113:function(e,a,t){var s=t(34),n=t(114);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);s(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},114:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__spacesList{margin-top:4px}",""]),e.exports=a},115:function(e,a,t){var s=t(34),n=t(116);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);s(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},116:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__spacesList{margin-top:4px}",""]),e.exports=a},124:function(e,a,t){"use strict";t.r(a),t.d(a,"ShareToSpaceFlyoutInternal",(function(){return U})),t(102);var s=t(2),n=t(1),c=t.n(n),i=t(3),o=t(11),r=t(6),l=t(12),p=t(23),u=t(13),d=t(5),b=t(0);const j=Object(n.lazy)((()=>Object(d.a)().then((e=>({default:e}))))),h=({spaces:e,aliasesToDisable:a})=>{const[t,i]=Object(n.useState)(0),[r,l]=Object(n.useState)(5),p=Object(n.useMemo)((()=>e.reduce(((e,a)=>e.set(a.id,a)),new Map)),[e]),u=Object(n.useMemo)((()=>a.filter((({spaceExists:e})=>e))),[a]),d=u.length,h={pageIndex:t,pageSize:r,totalItemCount:d,pageSizeOptions:[5,10,15,20]};return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiCallOut,{size:"s",title:Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.aliasTableCalloutTitle",defaultMessage:"Legacy URL conflict"}),color:"warning"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.aliasTableCalloutBody",defaultMessage:"{aliasesToDisableCount, plural, one {# legacy URL} other {# legacy URLs}} will be disabled.",values:{aliasesToDisableCount:d}})),Object(b.jsx)(s.EuiSpacer,{size:"m"})),Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(n.Suspense,{fallback:Object(b.jsx)(s.EuiLoadingSpinner,null)},Object(b.jsx)(s.EuiInMemoryTable,{items:u,columns:[{name:"Type",field:"targetType",sortable:!0},{name:"ID",field:"sourceId",sortable:!0,truncateText:!0},{name:"Space",render:({targetSpace:e})=>{const a=p.get(e);return Object(b.jsx)(j,{space:a,size:"s"})},sortable:({targetSpace:e})=>e}],sorting:!0,pagination:h,onTableChange:({page:{index:e,size:a}})=>{i(e),l(a)},tableLayout:"auto"}))))},g=e=>{const{savedObjectTarget:a,referenceGraph:t,isDisabled:i}=e,r=Object(n.useMemo)((()=>{const{type:e,id:s}=a;return t.filter((a=>(a.type!==e||a.id!==s)&&a.spaces.length>0&&!a.isMissing)).length}),[a,t]);return r>0?Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(s.EuiText,{size:"s",color:i?"subdued":void 0},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.relativesControl.description",defaultMessage:"{relativesCount} related {relativesCount, plural, one {object} other {objects}} will also change.",values:{relativesCount:r}})),Object(b.jsx)(s.EuiHorizontalRule,{margin:"s"})):null};t(107),t(112);var f=t(15);const x=e=>{const{capabilities:a,getUrlForApp:t}=e.application;return a.spaces.manage?Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(s.EuiSpacer,{size:"xs"}),Object(b.jsx)(s.EuiText,{size:"s",color:"subdued"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.noAvailableSpaces.canCreateNewSpace.text",defaultMessage:"You can {createANewSpaceLink} for sharing your objects.",values:{createANewSpaceLink:Object(b.jsx)(s.EuiLink,{"data-test-subj":"sts-new-space-link",href:t("management",{path:"kibana/spaces/create"})},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.noAvailableSpaces.canCreateNewSpace.linkText",defaultMessage:"create a new space"}))}}))):null},S=Object(n.lazy)((()=>Object(d.a)().then((e=>({default:e}))))),T=Object(b.jsx)(s.EuiBadge,{color:"hollow"},i.i18n.translate("xpack.spaces.shareToSpace.currentSpaceBadge",{defaultMessage:"This space"})),v=Object(b.jsx)(s.EuiIconTip,{content:i.i18n.translate("xpack.spaces.shareToSpace.partiallyAuthorizedSpaceTooltip.unchecked",{defaultMessage:"You need additional privileges to select this space."}),position:"left",type:"iInCircle"}),m=Object(b.jsx)(s.EuiIconTip,{content:i.i18n.translate("xpack.spaces.shareToSpace.partiallyAuthorizedSpaceTooltip.checked",{defaultMessage:"You need additional privileges to deselect this space."}),position:"left",type:"iInCircle"}),O=Object(b.jsx)(s.EuiIconTip,{title:i.i18n.translate("xpack.spaces.shareToSpace.prohibitedSpaceTooltipTitle",{defaultMessage:"Cannot share to this space"}),content:i.i18n.translate("xpack.spaces.shareToSpace.prohibitedSpaceTooltip",{defaultMessage:"A copy of this saved object exists in this space."}),position:"left",type:"iInCircle"}),y=Object(b.jsx)(s.EuiIconTip,{content:i.i18n.translate("xpack.spaces.shareToSpace.featureIsDisabledTooltip",{defaultMessage:"This feature is disabled in this space."}),position:"left",type:"alert",color:"warning"}),C=e=>{const{spaces:a,shareOptions:t,onChange:l,enableCreateNewSpaceLink:p,enableSpaceAgnosticBehavior:d,prohibitedSpaces:j}=e,{services:h}=Object(u.b)(),{application:g,docLinks:C}=h,{selectedSpaceIds:k,initiallySelectedSpaceIds:E}=t,M=!d&&a.find((e=>e.isActiveSpace)).id,w=k.includes(r.a),F=a.filter((({id:e,isFeatureDisabled:a})=>!a||E.includes(e)||w)),I=F.sort(function(e){return(a,t)=>a.id===e?-1:t.id===e?1:a.isFeatureDisabled!==t.isFeatureDisabled?a.isFeatureDisabled?1:-1:0}(M)).map((e=>{const a=k.includes(e.id),{isAvatarDisabled:t,...s}=function(e,a,t,s,n){return e.id===a?{append:T,disabled:!0,checked:"on"}:s||e.isAuthorizedForPurpose("shareSavedObjectsIntoSpace")?n.has(e.id)||n.has(r.a)?{append:Object(b.jsx)(c.a.Fragment,null,O,e.isFeatureDisabled?y:null),...e.isFeatureDisabled&&{isAvatarDisabled:!0},disabled:!0}:e.isFeatureDisabled?{append:y,isAvatarDisabled:!0}:{}:{append:Object(b.jsx)(c.a.Fragment,null,t?m:v,e.isFeatureDisabled?y:null),...e.isFeatureDisabled&&{isAvatarDisabled:!0},disabled:!0}}(e,M,a,w,j);return{label:e.name,prepend:Object(b.jsx)(S,{space:e,isDisabled:t,size:"s"}),checked:a||w?"on":void 0,"data-space-id":e.id,"data-test-subj":`sts-space-selector-row-${e.id}`,...w&&{disabled:!0},...s}})),A=d?0:1,L=w?F.length:k.filter((e=>e!==r.a&&e!==r.f)).length+A,_=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.selectSpacesLabel",{defaultMessage:"Select spaces"}),z=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.selectedCountLabel",{defaultMessage:"{selectedCount}/{totalCount} selected",values:{selectedCount:L,totalCount:F.length}});return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(s.EuiFormRow,{label:_,labelAppend:Object(b.jsx)(s.EuiText,{size:"xs"},z),fullWidth:!0},Object(b.jsx)(c.a.Fragment,null)),Object(b.jsx)(s.EuiFlexGroup,{direction:"column",gutterSize:"none",responsive:!1,style:{minHeight:200}},Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(n.Suspense,{fallback:Object(b.jsx)(s.EuiLoadingSpinner,null)},Object(b.jsx)(s.EuiSelectable,{options:I,onChange:e=>function(e){const a=[...e.filter((e=>e.checked&&e["data-space-id"]!==M)).map((e=>e["data-space-id"])),...k.filter((e=>e===r.f))];l(a)}(e),listProps:{bordered:!0,rowHeight:40,className:"spcShareToSpace__spacesList","data-test-subj":"sts-form-space-selector"},height:"full",searchable:I.length>f.SPACE_SEARCH_COUNT_THRESHOLD},((e,a)=>Object(b.jsx)(c.a.Fragment,null,a,e))))),(()=>{if(!k.filter((e=>e===r.f)).length)return null;const e=k.filter((e=>e===r.f)).length,a=null==C?void 0:C.links.security.kibanaPrivileges;return Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiText,{size:"s",color:"subdued"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.unknownSpacesLabel.text",defaultMessage:"To view {hiddenCount} hidden spaces, you need {additionalPrivilegesLink}.",values:{hiddenCount:e,additionalPrivilegesLink:Object(b.jsx)(s.EuiLink,{href:a,target:"_blank"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.unknownSpacesLabel.additionalPrivilegesLink",defaultMessage:"additional privileges"}))}})))})(),p&&a.length<2?Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(x,{application:g})):null))},k=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.buttonGroupLegend",{defaultMessage:"Choose how this is shared"}),E="shareToAllSpacesId",M=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.buttonLabel",{defaultMessage:"All spaces"}),w="shareToExplicitSpacesId",F=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToExplicitSpaces.buttonLabel",{defaultMessage:"Select spaces"}),I=Object(b.jsx)(s.EuiIconTip,{content:i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.cannotChangeTooltip",{defaultMessage:"You need additional privileges to change this option."}),position:"left",type:"iInCircle"}),A=Object(b.jsx)(s.EuiIconTip,{title:i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.allSpacesProhibitedTooltipTitle",{defaultMessage:"Cannot share to all spaces"}),content:i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.allSpacesProhibitedTooltipContent",{defaultMessage:"A copy of this saved object exists in at least one other space."}),position:"left",type:"iInCircle"}),L=e=>{const{spaces:a,objectNoun:t,canShareToAllSpaces:n,shareOptions:l,onChange:p,enableCreateNewSpaceLink:d,enableSpaceAgnosticBehavior:j,prohibitedSpaces:h}=e,{services:g}=Object(u.b)(),{docLinks:f}=g;if(0===a.length)return Object(b.jsx)(s.EuiLoadingSpinner,null);const{selectedSpaceIds:x}=l,S=x.includes(r.a),T=h.size>0&&!S;let v=null;return n?T&&(v=A):v=I,Object(b.jsx)(c.a.Fragment,null,(()=>{if(n||!S)return null;const e=null==f?void 0:f.links.security.kibanaPrivileges;return Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiCallOut,{size:"s",iconType:"help",title:Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.privilegeWarningTitle",defaultMessage:"Additional privileges required"}),color:"warning"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.privilegeWarningBody",defaultMessage:"To edit the spaces for this {objectNoun}, you need {readAndWritePrivilegesLink} in all spaces.",values:{objectNoun:t,readAndWritePrivilegesLink:Object(b.jsx)(s.EuiLink,{href:e,target:"_blank"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.privilegeWarningLink",defaultMessage:"read and write privileges"}))}})),Object(b.jsx)(s.EuiSpacer,{size:"m"}))})(),Object(b.jsx)(s.EuiButtonGroup,{type:"single",idSelected:S?E:w,options:[{id:w,label:F},{id:E,label:M}],onChange:e=>{const a=e===E?[r.a,...x]:x.filter((e=>e!==r.a));p(a)},legend:k,color:"success",isFullWidth:!0,isDisabled:!n||T}),Object(b.jsx)(s.EuiSpacer,{size:"s"}),Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiFlexGroup,{responsive:!1},Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(s.EuiText,{color:"subdued",textAlign:"center",size:"s","data-test-subj":"share-mode-control-description"},S?i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.text",{defaultMessage:"Make {objectNoun} available in all current and future spaces.",values:{objectNoun:t}}):i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToExplicitSpaces.text",{defaultMessage:"Make {objectNoun} available in selected spaces only.",values:{objectNoun:t}}))),v&&Object(b.jsx)(s.EuiFlexItem,{grow:!1},v))),Object(b.jsx)(s.EuiSpacer,{size:"m"}),Object(b.jsx)(s.EuiFlexGroup,{direction:"column",gutterSize:"none",responsive:!1},Object(b.jsx)(C,{spaces:a,shareOptions:l,onChange:p,enableCreateNewSpaceLink:d,enableSpaceAgnosticBehavior:j,prohibitedSpaces:h})))},_=e=>{const{spaces:a,objectNoun:t,onUpdate:n,shareOptions:i,showCreateCopyCallout:r,canShareToAllSpaces:l,makeCopy:p,enableCreateNewSpaceLink:u,enableSpaceAgnosticBehavior:d,prohibitedSpaces:j}=e,h=r?Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiCallOut,{size:"s",title:Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.shareWarningTitle",defaultMessage:"Changes are synchronized across spaces"}),color:"warning"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.shareWarningBody",defaultMessage:"Your changes appear in each space you select. {makeACopyLink} if you don't want to synchronize your changes.",values:{makeACopyLink:Object(b.jsx)(s.EuiLink,{"data-test-subj":"sts-copy-button",onClick:()=>p()},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.shareWarningLink",defaultMessage:"Make a copy"}))}})),Object(b.jsx)(s.EuiSpacer,{size:"m"})):null;return Object(b.jsx)(c.a.Fragment,null,h,Object(b.jsx)(L,{spaces:a,objectNoun:t,canShareToAllSpaces:l,shareOptions:i,onChange:e=>{return a=e,n({...i,selectedSpaceIds:a});var a},enableCreateNewSpaceLink:u,enableSpaceAgnosticBehavior:d,prohibitedSpaces:j}))},z=Object(n.lazy)((()=>Object(p.a)().then((e=>({default:e}))))),N=i.i18n.translate("xpack.spaces.shareToSpace.allSpacesTarget",{defaultMessage:"all spaces"});function D(e){return e.includes(r.a)?N:i.i18n.translate("xpack.spaces.shareToSpace.spacesTarget",{defaultMessage:"{spacesCount, plural, one {# space} other {# spaces}}",values:{spacesCount:e.length}})}const B=(e,a)=>e.every((e=>a.includes(e)))&&a.every((a=>e.includes(a)));function R(e,a,t){return async(s,n,c)=>{const{title:o}=e,l=s.map((({type:e,id:a})=>({type:e,id:a}))),p=s.length-1,u=i.i18n.translate("xpack.spaces.shareToSpace.shareSuccessTitle",{values:{objectNoun:e.noun},defaultMessage:"Updated {objectNoun}",description:'Object noun can be plural or singular, examples: "Updated objects", "Updated job"'});await a.updateSavedObjectsSpaces(l,n,c);const d=n.includes(r.a);let b;b=n.length>0&&c.length>0&&!d?i.i18n.translate("xpack.spaces.shareToSpace.shareSuccessAddRemoveText",{defaultMessage:"'{object}' {relativesCount, plural, =0 {was} =1 {and {relativesCount} related object were} other {and {relativesCount} related objects were}} added to {spacesTargetAdd} and removed from {spacesTargetRemove}.",values:{object:o,relativesCount:p,spacesTargetAdd:D(n),spacesTargetRemove:D(c)},description:"Uses output of xpack.spaces.shareToSpace.spacesTarget or xpack.spaces.shareToSpace.allSpacesTarget as 'spacesTarget...' inputs. Example strings: \"'Finance dashboard' was added to 1 space and removed from 2 spaces.\", \"'Finance dashboard' and 2 related objects were added to 3 spaces and removed from all spaces.\""}):n.length>0?i.i18n.translate("xpack.spaces.shareToSpace.shareSuccessAddText",{defaultMessage:"'{object}' {relativesCount, plural, =0 {was} =1 {and {relativesCount} related object were} other {and {relativesCount} related objects were}} added to {spacesTarget}.",values:{object:o,relativesCount:p,spacesTarget:D(n)},description:"Uses output of xpack.spaces.shareToSpace.spacesTarget or xpack.spaces.shareToSpace.allSpacesTarget as 'spacesTarget' input. Example strings: \"'Finance dashboard' was added to 1 space.\", \"'Finance dashboard' and 2 related objects were added to all spaces.\""}):i.i18n.translate("xpack.spaces.shareToSpace.shareSuccessRemoveText",{defaultMessage:"'{object}' {relativesCount, plural, =0 {was} =1 {and {relativesCount} related object were} other {and {relativesCount} related objects were}} removed from {spacesTarget}.",values:{object:o,relativesCount:p,spacesTarget:D(c)},description:"Uses output of xpack.spaces.shareToSpace.spacesTarget or xpack.spaces.shareToSpace.allSpacesTarget as 'spacesTarget' input. Example strings: \"'Finance dashboard' was removed from 1 space.\", \"'Finance dashboard' and 2 related objects were removed from all spaces.\""}),t.addSuccess({title:u,text:b})}}const U=e=>{const{spacesManager:a,spacesDataPromise:t,services:p}=Object(u.b)(),{notifications:d}=p,j=d.toasts,{savedObjectTarget:f}=e,x=Object(n.useMemo)((()=>({type:f.type,id:f.id,namespaces:f.namespaces,icon:f.icon,title:f.title||`${f.type} [id=${f.id}]`,noun:f.noun||l.a})),[f]),{flyoutIcon:S,flyoutTitle:T=i.i18n.translate("xpack.spaces.shareToSpace.flyoutTitle",{defaultMessage:"Share {objectNoun} to spaces",values:{objectNoun:x.noun}}),enableCreateCopyCallout:v=!1,enableCreateNewSpaceLink:m=!1,behaviorContext:O,changeSpacesHandler:y=R(x,a,j),onUpdate:C=(()=>null),onClose:k=(()=>null)}=e,E="outside-space"===O,[M,w]=Object(n.useState)({selectedSpaceIds:[],initiallySelectedSpaceIds:[]}),[F,I]=Object(n.useState)(!1),[A,L]=Object(n.useState)(!1),[{isLoading:N,spaces:D,referenceGraph:U,aliasTargets:W,prohibitedSpaces:P},G]=Object(n.useState)({isLoading:!0,spaces:[],referenceGraph:[],aliasTargets:[],prohibitedSpaces:new Set});Object(n.useEffect)((()=>{const{type:e,id:s}=x,n=a.getShareableReferences([{type:e,id:s}]),c=a.getShareSavedObjectPermissions(e);Promise.all([t,n,c]).then((([e,a,t])=>{const s=!E&&e.activeSpaceId,n=x.namespaces.filter((e=>e!==s));w({selectedSpaceIds:n,initiallySelectedSpaceIds:n}),I(t.shareToAllSpaces),G({isLoading:!1,spaces:[...e.spacesMap].map((([,e])=>e)),referenceGraph:a.objects,aliasTargets:a.objects.reduce(((a,t)=>{for(const n of null!==(s=t.spacesWithMatchingAliases)&&void 0!==s?s:[]){var s;if(n!==r.f){const s=e.spacesMap.has(n);a.push({targetSpace:n,targetType:t.type,sourceId:t.id,spaceExists:s})}}return a}),[]),prohibitedSpaces:a.objects.reduce(((e,a)=>{for(const c of null!==(t=a.spacesWithMatchingOrigins)&&void 0!==t?t:[]){var t;c===r.f||n.includes(c)||c===s||e.add(c)}return e}),new Set)})})).catch((e=>{j.addError(e,{title:i.i18n.translate("xpack.spaces.shareToSpace.spacesLoadErrorTitle",{defaultMessage:"Error loading available spaces"})})}))}),[x,a,t,j,E]);const{isSelectionChanged:H,spacesToAdd:Y,spacesToRemove:$,aliasesToDisable:q}=(()=>{if(!D.length)return{isSelectionChanged:!1,spacesToAdd:[],spacesToRemove:[],aliasesToDisable:[]};const e=!E&&D.find((e=>e.isActiveSpace)).id,a=x.namespaces.filter((a=>a!==e&&a!==r.f)),{selectedSpaceIds:t}=M,s=t.filter((e=>e!==r.f)),n=a.includes(r.a),c=s.includes(r.a),i=!n&&c,o=n&&!c,l=!c&&!B(a,s),p=i||o||!i&&!o&&l,u=s.filter((e=>!a.includes(e))),d=a.filter((e=>!s.includes(e))),b=e?[e]:[],j=i?[r.a]:o?[...b,...u]:u,h=new Set(j);return{isSelectionChanged:p,spacesToAdd:j,spacesToRemove:o||!i?d:[...b,...a],aliasesToDisable:i?W:W.filter((({targetSpace:e})=>h.has(e)))}})(),[J,K]=Object(n.useState)(!1),[Q,V]=Object(n.useState)(!1);if(A)return Object(b.jsx)(n.Suspense,{fallback:Object(b.jsx)(s.EuiLoadingSpinner,null)},Object(b.jsx)(z,{onClose:k,savedObjectTarget:x}));const X=!H||Q||E&&!M.selectedSpaceIds.length;return Object(b.jsx)(s.EuiFlyout,{onClose:k,maxWidth:500,"data-test-subj":"share-to-space-flyout"},Object(b.jsx)(s.EuiFlyoutHeader,{hasBorder:!0},Object(b.jsx)(s.EuiFlexGroup,{alignItems:"center",gutterSize:"m",responsive:!1},S&&Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiIcon,{size:"l",type:S})),Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(s.EuiTitle,{size:"m"},Object(b.jsx)("h2",null,T))))),Object(b.jsx)(s.EuiFlexGroup,{direction:"column",gutterSize:"none",className:"spcShareToSpace__flyoutBodyWrapper eui-yScroll",responsive:!1},Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiFlexGroup,{alignItems:"center",gutterSize:"m",responsive:!1},x.icon&&Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiIcon,{type:x.icon})),Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(s.EuiText,null,Object(b.jsx)("p",null,x.title))))),Object(b.jsx)(s.EuiSpacer,{size:"m"}),(()=>{if(N)return Object(b.jsx)(s.EuiLoadingSpinner,null);if(!J){const e=v&&D.length>1&&1===x.namespaces.length&&!B(x.namespaces,[r.a]);return Object(b.jsx)(_,{spaces:D,objectNoun:x.noun,shareOptions:M,onUpdate:w,showCreateCopyCallout:e,canShareToAllSpaces:F,makeCopy:()=>L(!0),enableCreateNewSpaceLink:m,enableSpaceAgnosticBehavior:E,prohibitedSpaces:P})}return Object(b.jsx)(h,{spaces:D,aliasesToDisable:q})})()),Object(b.jsx)(s.EuiFlyoutFooter,null,(()=>{const e=q.filter((({spaceExists:e})=>e)).length&&!J;return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(g,{savedObjectTarget:x,referenceGraph:U,isDisabled:X}),Object(b.jsx)(s.EuiFlexGroup,{justifyContent:"spaceBetween",responsive:!1},Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiButtonEmpty,{onClick:()=>k(),"data-test-subj":"sts-cancel-button",disabled:Q},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.cancelButton",defaultMessage:"Cancel"}))),Object(b.jsx)(s.EuiFlexItem,{grow:!1},e?Object(b.jsx)(s.EuiButton,{fill:!0,onClick:()=>K(!0),"data-test-subj":"sts-continue-button",disabled:X},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.continueButton",defaultMessage:"Continue"})):Object(b.jsx)(s.EuiButton,{fill:!0,onClick:()=>async function(){V(!0);try{if(q.length){const e=q.map((({spaceExists:e,...a})=>a));await a.disableLegacyUrlAliases(e)}await y(U,Y,$);const e=U.map((({type:e,id:a})=>({type:e,id:a})));C(e),k()}catch(e){V(!1),j.addError(e,{title:i.i18n.translate("xpack.spaces.shareToSpace.shareErrorTitle",{values:{objectNoun:x.noun},defaultMessage:"Error updating {objectNoun}"})})}}(),"data-test-subj":"sts-save-button",disabled:X},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.saveButton",defaultMessage:"Save & close"})))))})()))}},34:function(e,a,t){"use strict";var s,n=function(){var e={};return function(a){if(void 0===e[a]){var t=document.querySelector(a);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[a]=t}return e[a]}}(),c=[];function i(e){for(var a=-1,t=0;t<c.length;t++)if(c[t].identifier===e){a=t;break}return a}function o(e,a){for(var t={},s=[],n=0;n<e.length;n++){var o=e[n],r=a.base?o[0]+a.base:o[0],l=t[r]||0,p="".concat(r," ").concat(l);t[r]=l+1;var u=i(p),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(c[u].references++,c[u].updater(d)):c.push({identifier:p,updater:h(d,a),references:1}),s.push(p)}return s}function r(e){var a=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var c=t.nc;c&&(s.nonce=c)}if(Object.keys(s).forEach((function(e){a.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(a);else{var i=n(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(a)}return a}var l,p=(l=[],function(e,a){return l[e]=a,l.filter(Boolean).join("\n")});function u(e,a,t,s){var n=t?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=p(a,n);else{var c=document.createTextNode(n),i=e.childNodes;i[a]&&e.removeChild(i[a]),i.length?e.insertBefore(c,i[a]):e.appendChild(c)}}function d(e,a,t){var s=t.css,n=t.media,c=t.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),c&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(c))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var b=null,j=0;function h(e,a){var t,s,n;if(a.singleton){var c=j++;t=b||(b=r(a)),s=u.bind(null,t,c,!1),n=u.bind(null,t,c,!0)}else t=r(a),s=d.bind(null,t,a),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return s(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;s(e=a)}else n()}}e.exports=function(e,a){(a=a||{}).singleton||"boolean"==typeof a.singleton||(a.singleton=(void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s));var t=o(e=e||[],a);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<t.length;s++){var n=i(t[s]);c[n].references--}for(var r=o(e,a),l=0;l<t.length;l++){var p=i(t[l]);0===c[p].references&&(c[p].updater(),c.splice(p,1))}t=r}}}},35:function(e,a,t){"use strict";e.exports=function(e){var a=[];return a.toString=function(){return this.map((function(a){var t=function(e,a){var t,s,n,c=e[1]||"",i=e[3];if(!i)return c;if(a&&"function"==typeof btoa){var o=(t=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(n," */")),r=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[c].concat(r).concat([o]).join("\n")}return[c].join("\n")}(a,e);return a[2]?"@media ".concat(a[2]," {").concat(t,"}"):t})).join("")},a.i=function(e,t,s){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(s)for(var c=0;c<this.length;c++){var i=this[c][0];null!=i&&(n[i]=!0)}for(var o=0;o<e.length;o++){var r=[].concat(e[o]);s&&n[r[0]]||(t&&(r[2]?r[2]="".concat(t," and ").concat(r[2]):r[2]=t),a.push(r))}},a}}}]);