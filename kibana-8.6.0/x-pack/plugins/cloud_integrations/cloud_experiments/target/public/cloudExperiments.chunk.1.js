/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cloudExperiments_bundle_jsonpfunction=window.cloudExperiments_bundle_jsonpfunction||[]).push([[1],{12:function(e,n,t){"use strict";function r(e,n){var t,r=Object.keys(e);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(e),n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)),r}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){if(e){if("string"==typeof e)return s(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function c(e){function n(e,n){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.message=e,this.code=n}return(n.prototype=new Error).name=e,n.prototype.constructor=n}Object.defineProperty(n,"__esModule",{value:!0});var l=c("LaunchDarklyUnexpectedResponseError"),f=c("LaunchDarklyInvalidEnvironmentIdError"),d=c("LaunchDarklyInvalidUserError"),v=c("LaunchDarklyInvalidEventKeyError"),g=c("LaunchDarklyInvalidArgumentError"),p=c("LaunchDarklyFlagFetchError"),m=c("LaunchDarklyInvalidDataError");function h(e){return!(400<=e&&e<500)||400===e||408===e||429===e}for(var y=Object.freeze({__proto__:null,LDUnexpectedResponseError:l,LDInvalidEnvironmentIdError:f,LDInvalidUserError:d,LDInvalidEventKeyError:v,LDInvalidArgumentError:g,LDFlagFetchError:p,LDInvalidDataError:m,isHttpErrorRecoverable:h}),w=[],b=[],k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,D=k.length;E<D;++E)w[E]=k[E],b[k.charCodeAt(E)]=E;function O(e,n,t){for(var r,o=[],i=n;i<t;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(w[r>>18&63]+w[r>>12&63]+w[r>>6&63]+w[63&r]);return o.join("")}b["-".charCodeAt(0)]=62,b["_".charCodeAt(0)]=63;var S=Array.isArray,P=Object.keys,U=Object.prototype.hasOwnProperty,j=["key","secondary","ip","country","email","firstName","lastName","avatar","name"];function I(e,n){return(e.endsWith("/")?e.substring(0,e.length-1):e)+(n.startsWith("/")?"":"/")+n}function R(e){return function(e){for(var n,t=e.length,r=t%3,o=[],i=0,a=t-r;i<a;i+=16383)o.push(O(e,i,a<i+16383?a:i+16383));return 1==r?(n=e[t-1],o.push(w[n>>2]+w[n<<4&63]+"==")):2==r&&(n=(e[t-2]<<8)+e[t-1],o.push(w[n>>10]+w[n>>4&63]+w[n<<2&63]+"=")),o.join("")}(function(e){for(var n=[],t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n}(e=unescape(encodeURIComponent(e))))}function T(e){return R(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function L(e){return JSON.parse(JSON.stringify(e))}function N(e,n){return function e(n,t){if(n===t)return!0;if(n&&t&&"object"==typeof n&&"object"==typeof t){var r,o,i,a=S(n),u=S(t);if(a&&u){if((o=n.length)!=t.length)return!1;for(r=o;0!=r--;)if(!e(n[r],t[r]))return!1;return!0}if(a!=u)return!1;if((a=n instanceof Date)!=(u=t instanceof Date))return!1;if(a&&u)return n.getTime()==t.getTime();if((a=n instanceof RegExp)!=(u=t instanceof RegExp))return!1;if(a&&u)return n.toString()==t.toString();var s=P(n);if((o=s.length)!==P(t).length)return!1;for(r=o;0!=r--;)if(!U.call(t,s[r]))return!1;for(r=o;0!=r--;)if(!e(n[i=s[r]],t[i]))return!1;return!0}return n!=n&&t!=t}(e,n)}function A(e){setTimeout(e,0)}function C(e,n){return e=e.then((function(e){return n&&setTimeout((function(){n(null,e)}),0),e}),(function(e){if(!n)return Promise.reject(e);setTimeout((function(){n(e,null)}),0)})),n?void 0:e}function x(e){var n,t={};for(n in e)z(e,n)&&(t[n]={value:e[n],version:0});return t}function F(e){var n,t={};for(n in e)z(e,n)&&(t[n]=e[n].value);return t}function q(e,n){for(var t,r=n.slice(0),o=[],i=e;0<r.length;){for(t=[];0<i;){var a=r.shift();if(!a)break;(i-=T(JSON.stringify(a)).length)<0&&0<t.length?r.unshift(a):t.push(a)}i=e,o.push(t)}return o}function _(e){var n=e.version||"3.6.0";return e.userAgent+"/"+n}function V(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((function(e,n){return o(o({},e),n)}),{})}function z(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function M(e){if(!e)return e;var n,t;for(t in j){var r=j[t],i=e[r];void 0!==i&&"string"!=typeof i&&((n=n||o({},e))[r]=String(i))}return n||e}for(var J=Object.freeze({__proto__:null,appendUrlPath:I,btoa:R,base64URLEncode:T,clone:L,deepEquals:N,onNextTick:A,wrapPromiseCallback:C,transformValuesToVersionedValues:x,transformVersionedValuesToValues:F,chunkUserEventsForUrl:q,getLDUserAgentString:_,extend:V,objectHasOwnProperty:z,sanitizeUser:M}),$=function(e){var n,t,r=e={exports:{}},o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);return o?(n=new Uint8Array(16),r.exports=function(){return o(n),n}):(t=new Array(16),r.exports=function(){for(var e,n=0;n<16;n++)0==(3&n)&&(e=4294967296*Math.random()),t[n]=e>>>((3&n)<<3)&255;return t}),e.exports}(),H=[],K=0;K<256;++K)H[K]=(K+256).toString(16).substr(1);var B,G,X=0,W=0,Q=function(e,n,t){var r=n&&t||0,o=n||[],i=(e=e||{}).node||B,a=(t=void 0!==e.clockseq?e.clockseq:G,null!=i&&null!=t||(a=$(),null==i&&(i=B=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==t&&(t=G=16383&(a[6]<<8|a[7]))),void 0!==e.msecs?e.msecs:(new Date).getTime()),u=void 0!==e.nsecs?e.nsecs:W+1,s=a-X+(u-W)/1e4;if(s<0&&void 0===e.clockseq&&(t=t+1&16383),1e4<=(u=(s<0||X<a)&&void 0===e.nsecs?0:u))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");X=a,G=t,s=(1e4*(268435455&(a+=122192928e5))+(W=u))%4294967296,o[r++]=s>>>24&255,o[r++]=s>>>16&255,o[r++]=s>>>8&255,o[r++]=255&s,e=a/4294967296*1e4&268435455,o[r++]=e>>>8&255,o[r++]=255&e,o[r++]=e>>>24&15|16,o[r++]=e>>>16&255,o[r++]=t>>>8|128,o[r++]=255&t;for(var c=0;c<6;++c)o[r+c]=i[c];return n||function(e,n){n=n||0;var t=H;return[t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]],t[e[+n]]].join("")}(o)},Y=["debug","info","warn","error","none"];function Z(e,n){if(e&&e.destination&&"function"!=typeof e.destination)throw new Error("destination for basicLogger was set to a non-function");function t(e){return function(n){console&&console[e]&&console[e].call(console,n)}}var r=e&&e.destination?[e.destination,e.destination,e.destination,e.destination]:[t("log"),t("info"),t("warn"),t("error")],o=!(!e||!e.destination),i=e&&void 0!==e.prefix&&null!==e.prefix?e.prefix:"[LaunchDarkly] ",a=1;if(e&&e.level)for(var s=0;s<Y.length;s++)Y[s]===e.level&&(a=s);for(var c={},l=function(e){var t,s=Y[e];"none"!==s&&(e<a?c[s]=function(){}:(t=e,c[s]=function(){var e=t,a=s,c=arguments;if(!(c.length<1)){var l=o?a+": "+i:i,f=1!==c.length&&n?((f=u(c))[0]=l+f[0],n.apply(void 0,u(f))):l+c[0];try{r[e](f)}catch(e){console&&console.log&&console.log("[LaunchDarkly] Configured logger's "+a+" method threw an exception: "+e)}}}))},f=0;f<Y.length;f++)l(f);return c}function ee(e,n){return Z({level:e,prefix:n})}function ne(e){return e&&e.message?e.message:"string"==typeof e||e instanceof String?e:JSON.stringify(e)}var te=" Please see https://docs.launchdarkly.com/sdk/client-side/javascript#initializing-the-client for instructions on SDK initialization.",re=function(e){return'Expected application/json content type but got "'+e+'"'},oe=function(e){return"local storage is unavailable: "+ne(e)},ie=function(e){return"network error"+(e?" ("+e+")":"")},ae=function(e){return'Custom event "'+e+'" does not exist'},ue=function(){return"Environment not found. Double check that you specified a valid environment/client-side ID."+te},se=function(){return"No environment/client-side ID was specified."+te},ce=function(e){return"Error fetching flag settings: "+ne(e)},le=function(){return"No user specified."+te},fe=function(){return"Invalid user specified."+te},de=function(){return"LaunchDarkly client was initialized with bootstrap data that did not include flag metadata. Events may not be sent correctly."+te},ve=function(e,n){return n?'"'+e+'" is deprecated, please use "'+n+'"':'"'+e+'" is deprecated'},ge=function(e,n,t){return"Received error "+e+(401===e?" (invalid SDK key)":"")+" for "+n+" - "+(h(e)?t:"giving up permanently")},pe=function(){return"Cannot make HTTP requests in this environment."+te},me=function(e){return"Opening stream connection to "+e},he=function(e,n){return"Error on stream connection: "+ne(e)+", will continue retrying every "+n+" milliseconds."},ye=function(e){return'Ignoring unknown config option "'+e+'"'},we=function(e,n,t){return'Config option "'+e+'" should be of type '+n+", got "+t+", using default value"},be=function(e,n){return'Config option "'+e+'" should be a boolean, got '+n+", converting to boolean"},ke=function(e,n,t){return'Config option "'+e+'" was set to '+n+", changing to minimum value of "+t},Ee=function(e){return"polling for feature flags at "+e},De=function(e){return'received streaming update for flag "'+e+'"'},Oe=function(e){return'received streaming update for flag "'+e+'" but ignored due to version check'},Se=function(e){return'received streaming deletion for flag "'+e+'"'},Pe=function(e){return'received streaming deletion for flag "'+e+'" but ignored due to version check'},Ue=function(e){return'enqueueing "'+e+'" event'},je=function(e){return"sending "+e+" events"},Ie=function(e){return'Config option "'.concat(e,'" must only contain letters, numbers, ., _ or -.')},Re=Object.freeze({__proto__:null,clientInitialized:function(){return"LaunchDarkly client initialized"},clientNotReady:function(){return"LaunchDarkly client is not ready"},eventCapacityExceeded:function(){return"Exceeded event queue capacity. Increase capacity to avoid dropping events."},eventWithoutUser:function(){return"Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"},invalidContentType:re,invalidKey:function(){return"Event key must be a string"},localStorageUnavailable:oe,networkError:ie,unknownCustomEventKey:ae,environmentNotFound:ue,environmentNotSpecified:se,errorFetchingFlags:ce,userNotSpecified:le,invalidUser:fe,invalidData:function(){return"Invalid data received from LaunchDarkly; connection may have been interrupted"},bootstrapOldFormat:de,bootstrapInvalid:function(){return"LaunchDarkly bootstrap data is not available because the back end could not read the flags."},deprecated:ve,httpErrorMessage:ge,httpUnavailable:pe,identifyDisabled:function(){return"identify() has no effect here; it must be called on the main client instance"},streamClosing:function(){return"Closing stream connection"},streamConnecting:me,streamError:he,unknownOption:ye,wrongOptionType:we,wrongOptionTypeBoolean:be,optionBelowMinimum:ke,debugPolling:Ee,debugStreamPing:function(){return"received ping message from stream"},debugStreamPut:function(){return"received streaming update for all flags"},debugStreamPatch:De,debugStreamPatchIgnored:Oe,debugStreamDelete:Se,debugStreamDeleteIgnored:Pe,debugEnqueueingEvent:Ue,debugPostingEvents:je,debugPostingDiagnosticEvent:function(e){return"sending diagnostic event ("+e.kind+")"},invalidTagValue:Ie}),Te={baseUrl:{default:"https://app.launchdarkly.com"},streamUrl:{default:"https://clientstream.launchdarkly.com"},eventsUrl:{default:"https://events.launchdarkly.com"},sendEvents:{default:!0},streaming:{type:"boolean"},sendLDHeaders:{default:!0},requestHeaderTransform:{type:"function"},inlineUsersInEvents:{default:!1},allowFrequentDuplicateEvents:{default:!1},sendEventsOnlyForVariation:{default:!1},useReport:{default:!1},evaluationReasons:{default:!1},eventCapacity:{default:100,minimum:1},flushInterval:{default:2e3,minimum:2e3},samplingInterval:{default:0,minimum:0},streamReconnectDelay:{default:1e3,minimum:0},allAttributesPrivate:{default:!1},privateAttributeNames:{default:[]},bootstrap:{type:"string|object"},diagnosticRecordingInterval:{default:9e5,minimum:2e3},diagnosticOptOut:{default:!1},wrapperName:{type:"string"},wrapperVersion:{type:"string"},stateProvider:{type:"object"},autoAliasingOptOut:{default:!1},application:{validator:function(e,n,t,r){var o={};return t.id&&(o.id=Ne("".concat(e,".id"),0,t.id,r)),t.version&&(o.version=Ne("".concat(e,".version"),0,t.version,r)),o}}},Le=/^(\w|\.|-)+$/;function Ne(e,n,t,r){if("string"==typeof t&&t.match(Le))return t;r.warn(Ie(e))}function Ae(e,n,t,r){var o,a,u,s,c,l=V({logger:{default:r}},Te,t),f={all_attributes_private:"allAttributesPrivate",private_attribute_names:"privateAttributeNames",samplingInterval:null};function d(e){A((function(){n&&n.maybeReportError(new g(e))}))}return t=V({},e||{}),c=t,Object.keys(f).forEach((function(e){var n;void 0!==c[e]&&(n=f[e],r&&r.warn(ve(e,n)),n&&(void 0===c[n]&&(c[n]=c[e]),delete c[e]))})),o=(s=V({},t),Object.keys(l).forEach((function(e){void 0!==s[e]&&null!==s[e]||(s[e]=l[e]&&l[e].default)})),a=t=s,u=V({},a),Object.keys(a).forEach((function(e){var n,t,o,i,s=a[e];null!=s&&(void 0===(n=l[e])?d(ye(e)):(t=n.type||v(n.default),(o=n.validator)?void 0!==(o=o(e,a,a[e],r))?u[e]=o:delete u[e]:"any"!==t&&(o=t.split("|"),i=v(s),o.indexOf(i)<0?"boolean"===t?(u[e]=!!s,d(be(e,i))):(d(we(e,t,i)),u[e]=n.default):"number"===i&&void 0!==n.minimum&&s<n.minimum&&(d(ke(e,s,n.minimum)),u[e]=n.minimum))))})),t=u).logger,Y.forEach((function(e){if("none"!==e&&(!o[e]||"function"!=typeof o[e]))throw new Error("Provided logger instance must support logger."+e+"(...) method")})),t;function v(e){return null===e?"any":void 0!==e?Array.isArray(e)?"array":"boolean"===(e=i(e))||"string"===e||"number"===e||"function"===e?e:"object":void 0}}function Ce(e){var n={};return e&&(e.application&&void 0!==e.application.id&&null!==e.application.id&&(n["application-id"]=[e.application.id]),e.application&&void 0!==e.application.version&&null!==e.application.id&&(n["application-version"]=[e.application.version])),n}function xe(e,n){if(n&&!n.sendLDHeaders)return{};e={"X-LaunchDarkly-User-Agent":_(e)};var t=(n&&n.wrapperName&&(e["X-LaunchDarkly-Wrapper"]=n.wrapperVersion?n.wrapperName+"/"+n.wrapperVersion:n.wrapperName),Ce(n));return(n=Object.keys(t)).length&&(e["x-launchdarkly-tags"]=n.sort().flatMap((function(e){return Array.isArray(t[e])?t[e].sort().map((function(n){return"".concat(e,"/").concat(n)})):["".concat(e,"/").concat(t[e])]})).join(" ")),e}function Fe(e,n){return n&&n.requestHeaderTransform?n.requestHeaderTransform(o({},e)):e}function qe(e,n,t){var r="/a/"+n+".gif",o=V({"Content-Type":"application/json"},xe(e,t)),i=e.httpFallbackPing,a={sendChunk:function(n,a,u,s){var c=JSON.stringify(n),l=u?null:Q();return s?function n(r){var i=u?o:V({},o,{"X-LaunchDarkly-Event-Schema":"3","X-LaunchDarkly-Payload-ID":l});return e.httpRequest("POST",a,Fe(i,t),c).promise.then((function(e){if(e)return 400<=e.status&&h(e.status)&&r?n(!1):(t={status:e.status},(e=(e=e.header("date"))&&Date.parse(e))&&(t.serverTime=e),t);var t})).catch((function(){return r?n(!1):Promise.reject()}))}(!0).catch((function(){})):(i&&i(a+r+"?d="+T(c)),Promise.resolve())},sendEvents:function(n,t,r){if(!e.httpRequest)return Promise.resolve();for(var o=e.httpAllowsPost(),i=o?[n]:q(2e3-t.length,n),u=[],s=0;s<i.length;s++)u.push(a.sendChunk(i[s],t,r,o));return Promise.all(u)}};return a}function _e(){var e={},n=0,t=0,r={};return e.summarizeEvent=function(e){var o,i;"feature"===e.kind&&(o=e.key+":"+(null!==e.variation&&void 0!==e.variation?e.variation:"")+":"+(null!==e.version&&void 0!==e.version?e.version:""),(i=r[o])?i.count=i.count+1:r[o]={count:1,key:e.key,variation:e.variation,version:e.version,value:e.value,default:e.default},(0===n||e.creationDate<n)&&(n=e.creationDate),e.creationDate>t&&(t=e.creationDate))},e.getSummary=function(){var e,o={},i=!0;for(e in r){var a=r[e],u=o[a.key],s=(u||(u={default:a.default,counters:[]},o[a.key]=u),{value:a.value,count:a.count});void 0!==a.variation&&null!==a.variation&&(s.variation=a.variation),a.version?s.version=a.version:s.unknown=!0,u.counters.push(s),i=!1}return i?null:{startDate:n,endDate:t,features:o}},e.clearSummary=function(){t=n=0,r={}},e}function Ve(e){var n={},t=e.allAttributesPrivate,r=e.privateAttributeNames||[],o={key:!0,custom:!0,anonymous:!0},i={key:!0,secondary:!0,ip:!0,country:!0,email:!0,firstName:!0,lastName:!0,avatar:!0,name:!0,anonymous:!0,custom:!0};return n.filterUser=function(e){if(!e)return null;function n(e,n){return Object.keys(e).reduce((function(i,u){var s;return n(u)&&(o[s=u]||!t&&-1===a.indexOf(s)&&-1===r.indexOf(s)?i[0][u]=e[u]:i[1][u]=!0),i}),[{},{}])}var a=e.privateAttributeNames||[],u=n(e,(function(e){return i[e]})),s=u[0];return u=u[1],(e.custom&&(e=n(e.custom,(function(){return 1})),s.custom=e[0],u=V({},u,e[1])),e=Object.keys(u)).length&&(e.sort(),s.privateAttrs=e),s},n}function ze(e,n,t,r){var o={};function i(){var e="",o=r.getUser();return o&&(e=t||R(JSON.stringify(o))),"ld:"+n+":"+e}return o.loadFlags=function(){return e.get(i()).then((function(e){if(null==e)return null;try{var n,t=JSON.parse(e);return t&&(void 0===(n=t.$schema)||n<1?t=x(t):delete t.$schema),t}catch(e){return o.clearFlags().then((function(){return null}))}}))},o.saveFlags=function(n){return n=V({},n,{$schema:1}),e.set(i(),JSON.stringify(n))},o.clearFlags=function(){return e.clear(i())},o}function Me(e,n,t,r){var o,i=n.streamUrl,a=n.logger,u={},s=I(i,"/eval/"+t),c=n.useReport,l=n.evaluationReasons,f=n.streamReconnectDelay,d=xe(e,n),v=!1,g=null,p=null,m=null,h=null,y=null;function w(e){v||(a.warn(he(e,f)),v=!0),D(!1),E(),b(f)}function b(e){p||(e?p=setTimeout(k,e):k())}function k(){p=null;var r,u="",f={headers:d,readTimeoutMillis:3e5};if(e.eventSourceFactory){for(var v in null!=h&&(u="h="+h),c?e.eventSourceAllowsReport?(r=s,f.method="REPORT",f.headers["Content-Type"]="application/json",f.body=JSON.stringify(m)):(r=I(i,"/ping/"+t),u=""):r=s+"/"+T(JSON.stringify(m)),f.headers=Fe(f.headers,n),r=r+((u=l?u+(u?"&":"")+"withReasons=true":u)?"?":"")+u,E(),a.info(me(r)),o=(new Date).getTime(),g=e.eventSourceFactory(r,f),y)z(y,v)&&g.addEventListener(v,y[v]);g.onerror=w}}function E(){g&&(a.info("Closing stream connection"),g.close(),g=null)}function D(e){o&&r&&r.recordStreamInit(o,!e,(new Date).getTime()-o),o=null}return u.connect=function(e,n,t){for(var r in m=e,h=n,y={},t||{})!function(e){y[e]=function(n){D(!(v=!1)),t[e]&&t[e](n)}}(r);b()},u.disconnect=function(){clearTimeout(p),p=null,E()},u.isConnected=function(){return!!(g&&e.eventSourceIsActive&&e.eventSourceIsActive(g))},u}function Je(e,n,t){var r=n.baseUrl,o=n.useReport,i=n.evaluationReasons,a=n.logger,u={},s={};function c(t,r){if(!e.httpRequest)return new Promise((function(e,n){n(new p(pe()))}));var o,i,a,u,c,l=r?"REPORT":"GET",d=xe(e,n),v=(r&&(d["Content-Type"]="application/json"),s[t]),g=(v||(o=function(){delete s[t]},(m={addPromise:function(e,n){i=e,a&&a(),a=n,e.then((function(n){i===e&&(u(n),o())}),(function(n){i===e&&(c(n),o())}))}}).resultPromise=new Promise((function(e,n){u=e,c=n})),v=m,s[t]=v),e.httpRequest(l,t,Fe(d,n),r)),m=g.promise.then((function(e){if(200!==e.status)return Promise.reject(404===(n=e).status?new f(ue()):new p(ce(n.statusText||String(n.status))));if(e.header("content-type")&&"application/json"===e.header("content-type").substring(0,"application/json".length))return JSON.parse(e.body);var n=re(e.header("content-type")||"");return Promise.reject(new p(n))}),(function(e){return Promise.reject(new p(ie(e)))}));return v.addPromise(m,(function(){g.cancel&&g.cancel()})),v.resultPromise}return u.fetchJSON=function(e){return c(I(r,e),null)},u.fetchFlagSettings=function(e,n){var u,s,l="";return o?(u=[r,"/sdk/evalx/",t,"/user"].join(""),s=JSON.stringify(e)):(e=T(JSON.stringify(e)),u=[r,"/sdk/evalx/",t,"/users/",e].join("")),n&&(l="h="+n),a.debug(Ee(u=u+((l=i?l+(l?"&":"")+"withReasons=true":l)?"?":"")+l)),c(u,s)},u}function $e(e){var n={validateUser:function(n){if(!n)return Promise.reject(new d(le()));var t=L(n);return null!==t.key&&void 0!==t.key?(t.key=t.key.toString(),Promise.resolve(t)):t.anonymous?e.get("ld:$anonUserId").then((function(n){return n?(t.key=n,t):(n=Q(),t.key=n,e.set("ld:$anonUserId",n).then((function(){return t})))})):Promise.reject(new d(fe()))}};return n}var He=Object.freeze({__proto__:null,baseOptionDefs:Te,validate:Ae,getTags:Ce}).baseOptionDefs,Ke=J.appendUrlPath,Be=function(e){var n={diagnosticId:Q()};return e&&(n.sdkKeySuffix=6<e.length?e.substring(e.length-6):e),n};function Ge(e,n,t,r,a){var u,s,c,d,g,y,w,b,k,E,D,O=t&&t.logger?t.logger:a&&a.logger&&a.logger.default||ee("warn"),S=function(e){var n={},t={};return n.on=function(e,n,r){t[e]=t[e]||[],t[e]=t[e].concat({handler:n,context:r})},n.off=function(e,n,r){if(t[e])for(var o=0;o<t[e].length;o++)t[e][o].handler===n&&t[e][o].context===r&&(t[e]=t[e].slice(0,o).concat(t[e].slice(o+1)))},n.emit=function(e){if(t[e])for(var n=t[e].slice(0),r=0;r<n.length;r++)n[r].handler.apply(n[r].context,Array.prototype.slice.call(arguments,1))},n.getEvents=function(){return Object.keys(t)},n.getEventListenerCount=function(e){return t[e]?t[e].length:0},n.maybeReportError=function(n){n&&(t.error?this.emit("error",n):(e||console).error(n.message))},n}(O),P=function(e){var n=!1,t=!1,r=null,o=null,i=new Promise((function(n){e.on("ready",(function t(){e.off("ready",t),n()}))})).catch((function(){}));return{getInitializationPromise:function(){return o||(n?Promise.resolve():t?Promise.reject(r):o=new Promise((function(n,t){e.on("initialized",(function t(){e.off("initialized",t),n()})),e.on("failed",(function n(r){e.off("failed",n),t(r)}))})))},getReadyPromise:function(){return i},signalSuccess:function(){n||t||(n=!0,e.emit("initialized"),e.emit("ready"))},signalFailure:function(o){n||t||(t=!0,r=o,e.emit("failed",o),e.emit("ready")),e.maybeReportError(o)}}}(S),U=Ae(t,S,a,O),j=U.sendEvents,R=e,T=U.hash,x=(y=r.localStorage,w=O,b=!(t={}),t.isEnabled=function(){return!!y},t.get=function(e){return new Promise((function(n){y?y.get(e).then(n).catch((function(e){ie(e),n(void 0)})):n(void 0)}))},t.set=function(e,n){return new Promise((function(t){y?y.set(e,n).then((function(){return t(!0)})).catch((function(e){ie(e),t(!1)})):t(!1)}))},t.clear=function(e){return new Promise((function(n){y?y.clear(e).then((function(){return n(!0)})).catch((function(e){ie(e),n(!1)})):n(!1)}))},a=t,t=qe(r,R,U),U.sendEvents&&!U.diagnosticOptOut),q=x?Be(R):null,_=x?function(e){var n,t,r,o;function i(e){n=e,r=t=0,o=[]}return i((new Date).getTime()),{getProps:function(){return{dataSinceDate:n,droppedEvents:t,eventsInLastBatch:r,streamInits:o}},setProps:function(e){n=e.dataSinceDate,t=e.droppedEvents||0,r=e.eventsInLastBatch||0,o=e.streamInits||[]},incrementDroppedEvents:function(){t++},setEventsInLastBatch:function(e){r=e},recordStreamInit:function(e,n,t){o.push({timestamp:e,failed:n,durationMillis:t})},reset:i}}():null,J=x?function(e,n,t,r,i,a,u){var s,c,l=!!e.diagnosticUseCombinedEvent,f="ld:"+i+":$diagnostics",d=Ke(a.eventsUrl,"/events/diagnostic/"+i),v=a.diagnosticRecordingInterval,g=t,p=!!a.streaming;function m(){return{sdk:(n=o({},e.diagnosticSdkData),a.wrapperName&&(n.wrapperName=a.wrapperName),a.wrapperVersion&&(n.wrapperVersion=a.wrapperVersion),n),configuration:{customBaseURI:a.baseUrl!==He.baseUrl.default,customStreamURI:a.streamUrl!==He.streamUrl.default,customEventsURI:a.eventsUrl!==He.eventsUrl.default,eventsCapacity:a.eventCapacity,eventsFlushIntervalMillis:a.flushInterval,reconnectTimeMillis:a.streamReconnectDelay,streamingDisabled:!p,allAttributesPrivate:!!a.allAttributesPrivate,inlineUsersInEvents:!!a.inlineUsersInEvents,diagnosticRecordingIntervalMillis:a.diagnosticRecordingInterval,usingSecureMode:!!a.hash,bootstrapMode:!!a.bootstrap,fetchGoalsDisabled:!a.fetchGoals,allowFrequentDuplicateEvents:!!a.allowFrequentDuplicateEvents,sendEventsOnlyForVariation:!!a.sendEventsOnlyForVariation,autoAliasingOptOut:!!a.autoAliasingOptOut},platform:e.diagnosticPlatformData};var n}function h(e){a.logger&&a.logger.debug(Re.debugPostingDiagnosticEvent(e)),r.sendEvents(e,d,!0).then((function(){})).catch((function(){}))}function y(){var e,t;h((t=(new Date).getTime(),e=o({kind:l?"diagnostic-combined":"diagnostic",id:u,creationDate:t},g.getProps()),l&&(e=o(o({},e),m())),g.reset(t),e)),c=setTimeout(y,v),s=(new Date).getTime(),l&&n.isEnabled()&&(t=o({},g.getProps()),n.set(f,JSON.stringify(t)))}return(i={}).start=function(){var e;l?(e=function(e){var n;e?(e=(s||0)+v)<=(n=(new Date).getTime())?y():c=setTimeout(y,e-n):0===Math.floor(4*Math.random())?y():c=setTimeout(y,v)},n.isEnabled()?n.get(f).then((function(n){if(n)try{var t=JSON.parse(n);g.setProps(t),s=t.dataSinceDate}catch(n){}e(!0)})).catch((function(){e(!1)})):e(!1)):(h(o({kind:"diagnostic-init",id:u,creationDate:g.getProps().dataSinceDate},m())),c=setTimeout(y,v))},i.stop=function(){c&&clearTimeout(c)},i.setStreaming=function(e){p=e},i}(r,a,_,t,R,U,q):null,$=Me(r,U,R,_),H=U.eventProcessor||function(e,n,t,r,o,i){var a,u=3<arguments.length&&void 0!==r?r:null,s=4<arguments.length&&void 0!==o?o:null,c={},f=(5<arguments.length&&void 0!==i?i:null)||qe(e,t,n),d=I(n.eventsUrl,"/events/bulk/"+t),v=_e(),g=Ve(n),p=n.inlineUsersInEvents,m=n.samplingInterval,y=n.eventCapacity,w=n.flushInterval,b=n.logger,k=[],E=0,D=!1,O=!1;function S(){return 0===m||0===Math.floor(Math.random()*m)}function P(e){k.length<y?(k.push(e),O=!1):(O||(O=!0,b.warn("Exceeded event queue capacity. Increase capacity to avoid dropping events.")),u&&u.incrementDroppedEvents())}return c.enqueue=function(e){var n,t,r;D||(n=t=!1,v.summarizeEvent(e),"feature"===e.kind?S()&&(t=!!e.trackEvents,n=!!(r=e).debugEventsUntilDate&&r.debugEventsUntilDate>E&&r.debugEventsUntilDate>(new Date).getTime()):t=S(),t&&P((t=V({},r=e),"alias"!==r.kind&&(p||"identify"===r.kind?t.user=g.filterUser(r.user):(t.userKey=r.user.key,delete t.user),"feature"===r.kind&&(delete t.trackEvents,delete t.debugEventsUntilDate)),t)),n&&((t=V({},e,{kind:"debug"})).user=g.filterUser(t.user),delete t.trackEvents,delete t.debugEventsUntilDate,P(t)))},c.flush=function(){if(D)return Promise.resolve();var e=k,n=v.getSummary();return v.clearSummary(),n&&(n.kind="summary",e.push(n)),u&&u.setEventsInLastBatch(e.length),0===e.length?Promise.resolve():(k=[],b.debug(je(e.length)),f.sendEvents(e,d).then((function(e){e&&(e.serverTime&&(E=e.serverTime),h(e.status)||(D=!0),400<=e.status&&A((function(){s.maybeReportError(new l(ge(e.status,"event posting","some events were dropped")))})))})))},c.start=function(){a=setTimeout((function e(){c.flush(),a=setTimeout(e,w)}),w)},c.stop=function(){clearTimeout(a)},c}(r,U,R,_,S,t),K=Je(r,U,R),B={},G={},X=U.streaming,W=!1,Q=!1,Y=!0,Z=U.stateProvider,ne=(d=function(e,n){Z||e&&ue({kind:"identify",key:e.key,user:e,creationDate:(new Date).getTime()}),!U.autoAliasingOptOut&&n&&n.anonymous&&e&&!e.anonymous&&me(e,n)},{setUser:function(e){var n=g&&L(g);(g=M(e))&&d&&d(L(g),n)},getUser:function(){return g?L(g):null}}),te=$e(a),re=a.isEnabled()?new ze(a,R,T,ne,O):null;function ie(e){b||(b=!0,w.warn(oe(e)))}function ue(e){if(R&&!(Z&&Z.enqueueEvent&&Z.enqueueEvent(e))){if("alias"!==e.kind){if(!e.user)return void(Y&&(O.warn("Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"),Y=!1));Y=!1}!j||Q||r.isDoNotTrack()||(O.debug(Ue(e.kind)),H.enqueue(e))}}function le(e,n,t,r){var o=ne.getUser(),i=new Date,a=n?n.value:null;if(!U.allowFrequentDuplicateEvents){var u=JSON.stringify(a)+(o&&o.key?o.key:"")+e,s=B[u];if(s&&i-s<3e5)return;B[u]=i}s={kind:"feature",key:e,user:o,value:a,variation:n?n.variationIndex:null,default:t,creationDate:i.getTime()},o&&o.anonymous&&(s.contextKind=pe(o)),(u=G[e])&&(s.version=u.flagVersion||u.version,s.trackEvents=u.trackEvents,s.debugEventsUntilDate=u.debugEventsUntilDate),(r||u&&u.trackReason)&&n&&(s.reason=n.reason),ue(s)}function fe(e,n,t,r){var o,i;return G&&z(G,e)&&G[e]&&!G[e].deleted?(i=ve(o=G[e]),null!==o.value&&void 0!==o.value||(i.value=n)):i={value:n,variationIndex:null,reason:{kind:"ERROR",errorKind:"FLAG_NOT_FOUND"}},t&&le(e,i,n,r),i}function ve(e){return{value:e.value,variationIndex:void 0===e.variation?null:e.variation,reason:e.reason||null}}function pe(e){return e.anonymous?"anonymousUser":"user"}function me(e,n){Z||e&&n&&ue({kind:"alias",key:e.key,contextKind:pe(e),previousKey:n.key,previousContextKind:pe(n),creationDate:(new Date).getTime()})}function he(){var e;s=!0,ne.getUser()&&(e=function(e){try{return JSON.parse(e)}catch(e){return void S.maybeReportError(new m("Invalid data received from LaunchDarkly; connection may have been interrupted"))}},$.connect(ne.getUser(),T,{ping:function(){O.debug("received ping message from stream");var e=ne.getUser();K.fetchFlagSettings(e,T).then((function(n){N(e,ne.getUser())&&we(n||{})})).catch((function(e){S.maybeReportError(new p(ce(e)))}))},put:function(n){(n=e(n.data))&&(O.debug("received streaming update for all flags"),we(n))},patch:function(n){var t,r,o;(n=e(n.data))&&(!(t=G[n.key])||!t.version||!n.version||t.version<n.version?(O.debug(De(n.key)),r={},delete(o=V({},n)).key,o=ve(G[n.key]=o),r[n.key]=t?{previous:t.value,current:o}:{current:o},be(r)):O.debug(Oe(n.key)))},delete:function(n){var t;(n=e(n.data))&&(!G[n.key]||G[n.key].version<n.version?(O.debug(Se(n.key)),t={},G[n.key]&&!G[n.key].deleted&&(t[n.key]={previous:G[n.key].value}),G[n.key]={version:n.version,deleted:!0},be(t)):O.debug(Pe(n.key)))}}))}function ye(){s&&($.disconnect(),s=!1)}function we(e){var n,t,r={};if(!e)return Promise.resolve();for(n in G)z(G,n)&&G[n]&&(e[n]&&!N(e[n].value,G[n].value)?r[n]={previous:G[n].value,current:ve(e[n])}:e[n]&&!e[n].deleted||(r[n]={previous:G[n].value}));for(t in e)z(e,t)&&e[t]&&(!G[t]||G[t].deleted)&&(r[t]={current:ve(e[t])});return G=o({},e),be(r).catch((function(){}))}function be(e){var n,t=Object.keys(e);return 0<t.length&&(n={},t.forEach((function(t){var r=e[t].current,o=r?r.value:void 0,i=e[t].previous;S.emit("change:"+t,o,i),n[t]=r?{current:o,previous:i}:{previous:i}})),S.emit("change",n),S.emit("internal-change",G),U.sendEventsOnlyForVariation||Z||t.forEach((function(n){le(n,e[n].current)}))),u&&re?re.saveFlags(G):Promise.resolve()}function ke(){var e=X||c&&void 0===X;e&&!s?he():!e&&s&&ye(),J&&J.setStreaming(e)}function Ee(e){return"change"===e||"change:"===e.substr(0,"change".length+1)}function Ie(e){R=e.environment,ne.setUser(e.user),G=o({},e.flags),A(Te)}function Te(){O.info("LaunchDarkly client initialized"),W=!0,ke(),P.signalSuccess()}function Le(e){P.signalFailure(e)}return"string"==typeof U.bootstrap&&"LOCALSTORAGE"===U.bootstrap.toUpperCase()&&(re?u=!0:O.warn(oe())),"object"===i(U.bootstrap)&&(k=U.bootstrap,x=Object.keys(k),!(E=k.$flagsState)&&x.length&&O.warn(de()),!1===k.$valid&&O.warn("LaunchDarkly bootstrap data is not available because the back end could not read the flags."),D={},x.forEach((function(e){var n;"$flagsState"!==e&&"$valid"!==e&&(n={value:k[e]},E&&E[e]?n=V(n,E[e]):n.version=0,D[e]=n)})),G=D),Z?((q=Z.getInitialState())?Ie(q):Z.on("init",Ie),Z.on("update",(function(e){e.user&&ne.setUser(e.user),e.flags&&we(e.flags)}))):(e?te.validateUser(n).then((function(e){return ne.setUser(e),"object"===i(U.bootstrap)?Te():u?re.loadFlags().then((function(e){return null==e?(G={},K.fetchFlagSettings(ne.getUser(),T).then((function(e){return we(e||{})})).then(Te).catch((function(e){Le(new p(ce(e)))}))):(G=e,A(Te),K.fetchFlagSettings(ne.getUser(),T).then(we).catch((function(e){return S.maybeReportError(e)})))})):K.fetchFlagSettings(ne.getUser(),T).then((function(e){G=e||{},Te()})).catch((function(e){G={},Le(e)}))})):Promise.reject(new f(se()))).catch(Le),{client:{waitForInitialization:function(){return P.getInitializationPromise()},waitUntilReady:function(){return P.getReadyPromise()},identify:function(e,n,t){return Q?C(Promise.resolve({}),t):Z?(O.warn("identify() has no effect here; it must be called on the main client instance"),C(Promise.resolve(F(G)),t)):C((u&&re?re.clearFlags():Promise.resolve()).then((function(){return te.validateUser(e)})).then((function(e){return K.fetchFlagSettings(e,n).then((function(t){var r=F(t);return ne.setUser(e),T=n,t?we(t).then((function(){return r})):r}))})).then((function(e){return s&&he(),e})).catch((function(e){return S.maybeReportError(e),Promise.reject(e)})),t)},getUser:function(){return ne.getUser()},variation:function(e,n){return fe(e,n,!0,!1).value},variationDetail:function(e,n){return fe(e,n,!0,!0)},track:function(e,n,t){var o,i;"string"==typeof e?(r.customEventFilter&&!r.customEventFilter(e)&&O.warn(ae(e)),i={kind:"custom",key:e,user:o=ne.getUser(),url:r.getCurrentUrl(),creationDate:(new Date).getTime()},o&&o.anonymous&&(i.contextKind=pe(o)),null!=n&&(i.data=n),null!=t&&(i.metricValue=t),ue(i)):S.maybeReportError(new v(ae(e)))},alias:me,on:function(e,n,t){Ee(e)?(c=!0,W&&ke(),S.on(e,n,t)):S.on.apply(S,arguments)},off:function(e){var n;S.off.apply(S,arguments),Ee(e)&&(n=!1,S.getEvents().forEach((function(e){Ee(e)&&0<S.getEventListenerCount(e)&&(n=!0)})),n||(c=!1,s&&void 0===X&&ye()))},setStreaming:function(e){(e=null===e?void 0:e)!==X&&(X=e,ke())},flush:function(e){return C(j?H.flush():Promise.resolve(),e)},allFlags:function(){var e,n={};if(!G)return n;for(e in G)z(G,e)&&(n[e]=fe(e,null,!U.sendEventsOnlyForVariation).value);return n},close:function(e){if(Q)return C(Promise.resolve(),e);function n(){Q=!0,G={}}return C(Promise.resolve().then((function(){if(ye(),J&&J.stop(),j)return H.stop(),H.flush()})).then(n).catch(n),e)}},options:U,emitter:S,ident:ne,logger:O,requestor:K,start:function(){j&&(J&&J.start(),H.start())},enqueueEvent:ue,getFlagsInternal:function(){return G},getEnvironmentId:function(){return R},internalChangeEventName:"internal-change"}}function Xe(e,n){var t,r=Object.keys(e);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(e),n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)),r}function We(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Xe(Object(t),!0).forEach((function(n){Qe(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Qe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Ye=Object.freeze({__proto__:null,commonBasicLogger:Z,createConsoleLogger:ee,errors:y,initialize:Ge,messages:Re,utils:J,version:"3.6.0"}).commonBasicLogger,Ze=function(e){return Ye(We({destination:console.log},e))},en={promise:Promise.resolve({status:200,header:function(){return null},body:null})};function nn(e){var n,t,r={synchronousFlush:!1},o=(window.XMLHttpRequest&&(n=e&&e.disableSyncEventPost,r.httpRequest=function(e,t,o,i){var a=r.synchronousFlush&!n;return r.synchronousFlush=!1,function(e,n,t,r,o){if(o&&!function(){var e=window.navigator&&window.navigator.userAgent;return!e||!(e=e.match(/Chrom(e|ium)\/([0-9]+)\./))||parseInt(e[2],10)<73}())return en;var i,a,u=new window.XMLHttpRequest;for(i in u.open(e,n,!o),t||{})Object.prototype.hasOwnProperty.call(t,i)&&u.setRequestHeader(i,t[i]);return o?(u.send(r),en):{promise:new Promise((function(e,n){u.addEventListener("load",(function(){a||e({status:u.status,header:function(e){return u.getResponseHeader(e)},body:u.responseText})})),u.addEventListener("error",(function(){a||n(new Error)})),u.send(r)})),cancel:function(){a=!0,u.abort()}}}(e,t,o,i,a)}),r.httpAllowsPost=function(){return t=void 0===t?!!window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest:t},r.httpFallbackPing=function(e){(new window.Image).src=e},e&&e.eventUrlTransformer);r.getCurrentUrl=function(){return o?o(window.location.href):window.location.href},r.isDoNotTrack=function(){var e=window.navigator&&void 0!==window.navigator.doNotTrack?window.navigator.doNotTrack:window.navigator&&void 0!==window.navigator.msDoNotTrack?window.navigator.msDoNotTrack:window.doNotTrack;return 1===e||!0===e||"1"===e||"yes"===e};try{window.localStorage&&(r.localStorage={get:function(e){return new Promise((function(n){n(window.localStorage.getItem(e))}))},set:function(e,n){return new Promise((function(t){window.localStorage.setItem(e,n),t()}))},clear:function(e){return new Promise((function(n){window.localStorage.removeItem(e),n()}))}})}catch(e){r.localStorage=null}var i=e&&e.useReport&&"function"==typeof window.EventSourcePolyfill&&window.EventSourcePolyfill.supportedOptions&&window.EventSourcePolyfill.supportedOptions.method?(r.eventSourceAllowsReport=!0,window.EventSourcePolyfill):(r.eventSourceAllowsReport=!1,window.EventSource);return window.EventSource&&(r.eventSourceFactory=function(e,n){return n=We(We({},{heartbeatTimeout:3e5,silentTimeout:3e5,skipDefaultHeaders:!0}),n),new i(e,n)},r.eventSourceIsActive=function(e){return e.readyState===window.EventSource.OPEN||e.readyState===window.EventSource.CONNECTING}),r.userAgent="JSClient",r.version="2.22.1",r.diagnosticSdkData={name:"js-client-sdk",version:"2.22.1"},r.diagnosticPlatformData={name:"JS"},r.diagnosticUseCombinedEvent=!0,r}var tn=/[|\\{}()[\]^$+*?.]/g,rn=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(tn,"\\$&")};function on(e,n,t,r){var o,i,a=("substring"!==e.kind&&"regex"!==e.kind||!r.includes("/")?n.replace(r,""):n).replace(t,"");switch(e.kind){case"exact":i=n,o=new RegExp("^"+rn(e.url)+"/?$");break;case"canonical":i=a,o=new RegExp("^"+rn(e.url)+"/?$");break;case"substring":i=a,o=new RegExp(".*"+rn(e.substring)+".*$");break;case"regex":i=a,o=new RegExp(e.pattern);break;default:return!1}return o.test(i)}function an(e,n){for(var t={},r=null,o=[],i=0;i<e.length;i++)for(var a=e[i],u=a.urls||[],s=0;s<u.length;s++)if(on(u[s],window.location.href,window.location.search,window.location.hash)){"pageview"===a.kind?n("pageview",a):(o.push(a),n("click_pageview",a));break}return 0<o.length&&(r=function(e){for(var t=function(e,n){for(var t=[],r=0;r<n.length;r++)for(var o=e.target,i=n[r],a=i.selector,u=document.querySelectorAll(a);o&&0<u.length;){for(var s=0;s<u.length;s++)o===u[s]&&t.push(i);o=o.parentNode}return t}(e,o),r=0;r<t.length;r++)n("click",t[r])},document.addEventListener("click",r)),t.dispose=function(){document.removeEventListener("click",r)},t}function un(e,n){var t,r;function o(){r&&r.dispose(),t&&t.length&&(r=an(t,i))}function i(n,t){var r=e.ident.getUser(),o={kind:n,key:t.key,data:null,url:window.location.href,user:r,creationDate:(new Date).getTime()};return r&&r.anonymous&&(o.contextKind="anonymousUser"),"click"===n&&(o.selector=t.selector),e.enqueueEvent(o)}return e.requestor.fetchJSON("/sdk/goals/"+e.getEnvironmentId()).then((function(e){e&&0<e.length&&(r=an(t=e,i),function(e,n){var t,r=window.location.href;function o(){(t=window.location.href)!==r&&(r=t,n())}!function e(n,t){n(),setTimeout((function(){e(n,t)}),t)}(o,300),window.history&&window.history.pushState?window.addEventListener("popstate",o):window.addEventListener("hashchange",o)}(0,o)),n()})).catch((function(t){e.emitter.maybeReportError(new y.LDUnexpectedResponseError((t&&t.message,t.message))),n()})),{}}var sn="goalsReady",cn={fetchGoals:{default:!0},hash:{type:"string"},eventProcessor:{type:"object"},eventUrlTransformer:{type:"function"},disableSyncEventPost:{default:!1}};function ln(e,n){function t(){o.synchronousFlush=!0,i.flush().catch((function(){})),o.synchronousFlush=!1}var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=nn(r),i=(e=Ge(e,n,r,o,cn)).client,a=(n=e.options,e.emitter),u=new Promise((function(e){var n=a.on(sn,(function(){a.off(sn,n),e()}))}));return i.waitUntilGoalsReady=function(){return u},n.fetchGoals?un(e,(function(){return a.emit(sn)})):a.emit(sn),"complete"!==document.readyState?window.addEventListener("load",e.start):e.start(),window.addEventListener("beforeunload",t),window.addEventListener("unload",t),i}var fn=Ze,dn=ee,vn="2.22.1",gn={initialize:function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return console&&console.warn&&console.warn(Re.deprecated("default export","named LDClient export")),ln(e,n,t)},version:vn};n.basicLogger=fn,n.createConsoleLogger=dn,n.default=gn,n.initialize=ln,n.version=vn}}]);