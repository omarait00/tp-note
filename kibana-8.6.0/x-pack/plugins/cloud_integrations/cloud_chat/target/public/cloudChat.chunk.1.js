/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cloudChat_bundle_jsonpfunction=window.cloudChat_bundle_jsonpfunction||[]).push([[1],{15:function(e,t,i){e.exports=i(7)(3)},16:function(e,t,i){"use strict";i.r(t),i.d(t,"Chat",(function(){return l}));var n=i(15),a=i.n(n),s=i(0),o=i(1),r=i(13),c=i(4),d=i(14),u=i(3);const l=({onHide:e=(()=>{}),onReady:t,onResize:i})=>{const n=(({onReady:e=(()=>{}),onResize:t=(()=>{})})=>{const i=Object(s.useRef)(null),n=Object(u.b)(),[a,o]=Object(s.useState)({height:0,width:0}),[r,c]=Object(s.useState)(!1),[d,l]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{const s=s=>{const{current:r}=i;if(!n||null==r||!r.contentWindow||s.source!==(null==r?void 0:r.contentWindow))return;const u=(()=>{const{location:e,navigator:t,innerHeight:i,innerWidth:n}=window,{hash:a,host:s,hostname:o,href:r,origin:c,pathname:d,port:u,protocol:l,search:h}=e,{language:b,userAgent:f}=t,{title:m,referrer:g}=document;return{window:{location:{hash:a,host:s,hostname:o,href:r,origin:c,pathname:d,port:u,protocol:l,search:h},navigator:{language:b,userAgent:f},innerHeight:i,innerWidth:n},document:{title:m,referrer:g}}})(),{data:h}=s,{user:b}=n,{id:f,email:m,jwt:g}=b;switch(h.type){case"driftIframeReady":{const e={id:f,attributes:{email:m},jwt:g};r.contentWindow.postMessage({type:"driftSetContext",data:{context:u,user:e}},"*");break}case"driftIframeResize":{const e=h.data.styles||{};o({...a,...e}),d||l(!0),t();break}case"driftWidgetReady":c(!0),e()}};return window.addEventListener("message",s),()=>window.removeEventListener("message",s)}),[n,a,e,t,r,d]),n?{enabled:!0,src:n.chatURL,ref:i,style:a,isReady:r,isResized:d}:{enabled:!1}})({onReady:t,onResize:i}),l=Object(s.useRef)(null),[h,b]=Object(s.useState)(!1);if(!n.enabled||h)return null;const{isReady:f,isResized:m,style:g}=n,{bottom:j,height:w,right:p}=g,R=Object(o.css)("bottom:calc(",j," + ",w,");position:fixed;right:calc(",p," + ",d.euiThemeVars.euiSizeXS,");visibility:",f&&m?"visible":"hidden",";",""),y=Object(o.jsx)(c.EuiButtonEmpty,{css:R,"data-test-subj":"cloud-chat-hide",name:"cloudChatHide",onClick:()=>{e(),b(!0)},size:"xs"},r.i18n.translate("xpack.cloudChat.hideChatButtonLabel",{defaultMessage:"Hide chat"})),v=Object(o.css)("bottom:",d.euiThemeVars.euiSizeXL,";position:fixed;right:",d.euiThemeVars.euiSizeXL,";z-index:",d.euiThemeVars.euiZMaskBelowHeader-1,";&:focus [name='cloudChatHide'],&:hover [name='cloudChatHide']{visibility:visible;}","");return Object(o.jsx)("div",{css:v,ref:l,"data-test-subj":"cloud-chat"},y,Object(o.jsx)("iframe",a()({"data-test-subj":"cloud-chat-frame",title:r.i18n.translate("xpack.cloudChat.chatFrameTitle",{defaultMessage:"Chat"})},n)))}}}]);