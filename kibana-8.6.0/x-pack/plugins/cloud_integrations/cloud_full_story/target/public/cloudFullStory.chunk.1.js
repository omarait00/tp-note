/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cloudFullStory_bundle_jsonpfunction=window.cloudFullStory_bundle_jsonpfunction||[]).push([[1],[,,,,,,function(t,n,e){t.exports=e(1)(10)},function(t,n,e){t.exports=e(1)(644)},function(t,n,e){t.exports=e(1)(2745)},function(t,n,e){t.exports=e(1)(6)},function(t,n,e){t.exports=e(1)(16)},function(t,n,e){t.exports=e(1)(17)},function(t,n,e){t.exports=e(1)(445)},function(t,n,e){t.exports=e(1)(49)},function(t,n,e){"use strict";e.r(n),e.d(n,"FullStoryShipper",(function(){return U}));var i=e(7),o=e.n(i),r=e(8),s=e.n(r),c=e(9),u=e.n(c),l=e(10),a=e.n(l),f=e(11),d=e.n(f),p=e(0),y=e.n(p),v=e(12),h=e.n(v),g=e(13),w=e.n(g),_=e(6),m=e.n(_),S=e(5),b=e.n(S),A=["uid","displayName","email","acctId","website","pageName"];function I(t){return Object.fromEntries(Object.entries(t).map((function(t){var n=m()(t,2),e=n[0],i=n[1];return Array.isArray(i)?[e,i.filter((function(t){return void 0!==t}))]:[e,i]})).filter((function(t){var n=m()(t,2)[1];return void 0!==n&&(!Array.isArray(n)||n.length>0)})).map((function(t){var n=m()(t,2),e=n[0],i=n[1];if(A.includes(e))return[e,i];if(function(t){return"object"===w()(t)&&null!==t&&!Array.isArray(t)&&!x(t)}(i))return[e,I(i)];var o=function(t){var n,e=Array.isArray(t),i=e?t[0]:t;switch(w()(i)){case"string":n=b()(i,b.a.ISO_8601,!0).isValid()?"date":"str";break;case"number":n=Number.isInteger(i)?"int":"real";break;case"boolean":n="bool";break;case"object":if(x(i)){n="date";break}default:throw new Error("Unsupported type: ".concat(w()(i)))}return e?"".concat(n,"s"):n}(i);return[o?"".concat(e,"_").concat(o):e,i]})))}function x(t){return t instanceof Date}var C=["eventTypesAllowlist"],k=["userId","isElasticCloudUser"],U=function(){function t(n,e){a()(this,t),y()(this,"fullStoryApi",void 0),y()(this,"lastUserId",void 0),y()(this,"eventTypesAllowlist",void 0),this.initContext=e;var i=n.eventTypesAllowlist,o=u()(n,C);this.fullStoryApi=function(t){var n,e,i,o,r,s,c,u,l=t.scriptUrl,a=void 0===l?"edge.fullstory.com/s/fs.js":l,f=t.fullStoryOrgId,d=t.host,p=void 0===d?"fullstory.com":d,y=t.namespace,v=void 0===y?"FS":y,h=t.debug,g=void 0!==h&&h;window._fs_debug=g,window._fs_host=p,window._fs_script=a,window._fs_org=f,window._fs_namespace=v,n=window,e=document,i=window._fs_namespace,o="script",r="user",i in n?n.console&&n.console.log&&n.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].'):((c=n[i]=function(t,n,e){c.q?c.q.push([t,n,e]):c._api(t,n,e)}).q=[],(s=e.createElement(o)).async=1,s.crossOrigin="anonymous",s.src=_fs_script,(u=e.getElementsByTagName(o)[0]).parentNode.insertBefore(s,u),c.identify=function(t,n,e){c(r,{uid:t},e),n&&c(r,n,e)},c.setUserVars=function(t,n){c(r,t,n)},c.event=function(t,n,e){c("event",{n:t,p:n},e)},c.anonymize=function(){c.identify(!1)},c.shutdown=function(){c("rec",!1)},c.restart=function(){c("rec",!0)},c.log=function(t,n){c("log",[t,n])},c.consent=function(t){c("consent",!arguments.length||t)},c.identifyAccount=function(t,n){s="account",(n=n||{}).acctId=t,c(s,n)},c.clearUserCookie=function(){},c.setVars=function(t,n){c("setVars",[t,n])},c._w={},u="XMLHttpRequest",c._w[u]=n[u],u="fetch",c._w[u]=n[u],n[u]&&(n[u]=function(){return c._w[u].apply(this,arguments)}),c._v="1.3.0");var w=window[v];if(!w)throw new Error("FullStory snippet failed to load. Check browser logs for more information.");return w}(o),this.eventTypesAllowlist=i}var n;return d()(t,[{key:"extendContext",value:function(t){this.initContext.logger.debug("Received context ".concat(JSON.stringify(t)));var n,e,i,o,r,c,l=t.userId,a=t.isElasticCloudUser,f=u()(t,k);l&&l!==this.lastUserId&&(this.initContext.logger.debug("Calling FS.identify with userId ".concat(l)),this.fullStoryApi.identify(l),this.lastUserId=l),"boolean"==typeof a&&(this.initContext.logger.debug("Calling FS.setUserVars with isElasticCloudUser ".concat(a)),this.fullStoryApi.setUserVars(I({isElasticCloudUser:a}))),Object.keys(f).length&&(f.applicationId&&(f.app_id=f.applicationId),f.entityId&&(f.ent_id=f.entityId),f.cloudId&&(f.org_id=f.cloudId),this.initContext.logger.debug("Calling FS.setVars with context ".concat(JSON.stringify(f))),this.fullStoryApi.setVars("page",s()(s()({},I(f)),f.version?(e=(n=f.version).split("."),o=(i=m()(e,3))[0],r=i[1],c=i[2],{version_str:n,version_major_int:parseInt(o,10),version_minor_int:parseInt(r,10),version_patch_int:parseInt(c,10)}):{})))}},{key:"optIn",value:function(t){this.initContext.logger.debug("Setting FS to optIn ".concat(t)),this.fullStoryApi.consent(t),t?this.fullStoryApi.restart():this.fullStoryApi.shutdown()}},{key:"reportEvents",value:function(t){var n=this;this.initContext.logger.debug("Reporting ".concat(t.length," events to FS")),t.filter((function(t){var e,i;return null===(e=null===(i=n.eventTypesAllowlist)||void 0===i?void 0:i.includes(t.event_type))||void 0===e||e})).forEach((function(t){n.fullStoryApi.event(t.event_type,I(t.properties))}))}},{key:"flush",value:(n=o()(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"shutdown",value:function(){}}]),t}();y()(U,"shipperName","FullStory")}]]);