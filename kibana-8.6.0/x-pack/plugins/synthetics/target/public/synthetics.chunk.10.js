/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.synthetics_bundle_jsonpfunction=window.synthetics_bundle_jsonpfunction||[]).push([[10],{137:function(e,t,a){"use strict";a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return v}));var n=a(35),i=a(52),s=a(66);const l={[s.b.TLS_CERTIFICATE_AUTHORITIES]:e=>r(e[s.b.TLS_CERTIFICATE_AUTHORITIES]),[s.b.TLS_CERTIFICATE]:e=>r(e[s.b.TLS_CERTIFICATE]),[s.b.TLS_KEY]:e=>r(e[s.b.TLS_KEY]),[s.b.TLS_KEY_PASSPHRASE]:e=>o(e[s.b.TLS_KEY_PASSPHRASE]),[s.b.TLS_VERIFICATION_MODE]:e=>o(e[s.b.TLS_VERIFICATION_MODE]),[s.b.TLS_VERSION]:e=>c(e[s.b.TLS_VERSION])},r=(e="")=>e?JSON.stringify(e):null,o=(e="")=>e||null,c=(e=[])=>e.length?JSON.stringify(e):null,u={[s.b.NAME]:null,[s.b.LOCATIONS]:null,[s.b.MONITOR_TYPE]:null,[s.b.ENABLED]:null,[s.b.CONFIG_ID]:null,[s.b.SCHEDULE]:e=>{var t,a;return JSON.stringify(`@every ${null===(t=e[s.b.SCHEDULE])||void 0===t?void 0:t.number}${null===(a=e[s.b.SCHEDULE])||void 0===a?void 0:a.unit}`)},[s.b.APM_SERVICE_NAME]:null,[s.b.TAGS]:e=>d(e[s.b.TAGS]),[s.b.TIMEOUT]:e=>m(e[s.b.TIMEOUT]||void 0),[s.b.NAMESPACE]:null,[s.b.REVISION]:null,[s.b.MONITOR_SOURCE_TYPE]:null,[s.b.FORM_MONITOR_TYPE]:null,[s.b.JOURNEY_ID]:null,[s.b.PROJECT_ID]:null,[s.b.CUSTOM_HEARTBEAT_ID]:null,[s.b.ORIGINAL_SPACE]:null,[s.b.CONFIG_HASH]:null,[s.b.MONITOR_QUERY_ID]:null},d=(e=[])=>e.length?JSON.stringify(e):null,m=(e="")=>e?`${e}s`:null,p=(e={})=>Object.keys(e).length?JSON.stringify(e):null,E=(e="")=>e?JSON.stringify(e):null,g={[s.b.METADATA]:e=>p(e[s.b.METADATA]),[s.b.URLS]:null,[s.b.MAX_REDIRECTS]:null,[s.b.USERNAME]:null,[s.b.PASSWORD]:null,[s.b.PROXY_URL]:null,[s.b.RESPONSE_BODY_CHECK_NEGATIVE]:e=>d(e[s.b.RESPONSE_BODY_CHECK_NEGATIVE]),[s.b.RESPONSE_BODY_CHECK_POSITIVE]:e=>d(e[s.b.RESPONSE_BODY_CHECK_POSITIVE]),[s.b.RESPONSE_BODY_INDEX]:null,[s.b.RESPONSE_HEADERS_CHECK]:e=>p(e[s.b.RESPONSE_HEADERS_CHECK]),[s.b.RESPONSE_HEADERS_INDEX]:null,[s.b.RESPONSE_STATUS_CHECK]:e=>d(e[s.b.RESPONSE_STATUS_CHECK]),[s.b.REQUEST_BODY_CHECK]:e=>{var t,a;return null!==(t=e[s.b.REQUEST_BODY_CHECK])&&void 0!==t&&t.value?JSON.stringify(null===(a=e[s.b.REQUEST_BODY_CHECK])||void 0===a?void 0:a.value):null},[s.b.REQUEST_HEADERS_CHECK]:e=>p(e[s.b.REQUEST_HEADERS_CHECK]),[s.b.REQUEST_METHOD_CHECK]:null,[s.b.PORT]:null,...l,...u},h={[s.b.METADATA]:e=>p(e[s.b.METADATA]),[s.b.HOSTS]:null,[s.b.PROXY_URL]:null,[s.b.PROXY_USE_LOCAL_RESOLVER]:null,[s.b.RESPONSE_RECEIVE_CHECK]:null,[s.b.REQUEST_SEND_CHECK]:null,[s.b.PORT]:null,[s.b.URLS]:null,...l,...u},b={[s.b.HOSTS]:null,[s.b.WAIT]:e=>m(e[s.b.WAIT]),...u},f={[s.b.METADATA]:e=>p(e[s.b.METADATA]),[s.b.URLS]:null,[s.b.PORT]:null,[s.b.SOURCE_ZIP_URL]:null,[s.b.SOURCE_ZIP_USERNAME]:null,[s.b.SOURCE_ZIP_PASSWORD]:null,[s.b.SOURCE_ZIP_FOLDER]:null,[s.b.SOURCE_ZIP_PROXY_URL]:null,[s.b.SOURCE_PROJECT_CONTENT]:null,[s.b.SOURCE_INLINE]:e=>E(e[s.b.SOURCE_INLINE]),[s.b.PARAMS]:null,[s.b.SCREENSHOTS]:null,[s.b.IS_THROTTLING_ENABLED]:null,[s.b.DOWNLOAD_SPEED]:null,[s.b.UPLOAD_SPEED]:null,[s.b.LATENCY]:null,[s.b.SYNTHETICS_ARGS]:e=>d(e[s.b.SYNTHETICS_ARGS]),[s.b.ZIP_URL_TLS_CERTIFICATE_AUTHORITIES]:e=>r(e[s.b.ZIP_URL_TLS_CERTIFICATE_AUTHORITIES]),[s.b.ZIP_URL_TLS_CERTIFICATE]:e=>r(e[s.b.ZIP_URL_TLS_CERTIFICATE]),[s.b.ZIP_URL_TLS_KEY]:e=>r(e[s.b.ZIP_URL_TLS_KEY]),[s.b.ZIP_URL_TLS_KEY_PASSPHRASE]:e=>o(e[s.b.ZIP_URL_TLS_KEY_PASSPHRASE]),[s.b.ZIP_URL_TLS_VERIFICATION_MODE]:e=>o(e[s.b.ZIP_URL_TLS_VERIFICATION_MODE]),[s.b.ZIP_URL_TLS_VERSION]:e=>c(e[s.b.ZIP_URL_TLS_VERSION]),[s.b.JOURNEY_FILTERS_MATCH]:e=>E(e[s.b.JOURNEY_FILTERS_MATCH]),[s.b.JOURNEY_FILTERS_TAGS]:e=>d(e[s.b.JOURNEY_FILTERS_TAGS]),[s.b.THROTTLING_CONFIG]:e=>{if(!e[s.b.IS_THROTTLING_ENABLED])return"false";const t=(e,t)=>""!==e&&void 0!==e?`${e}${t}`:null;return[t(e[s.b.DOWNLOAD_SPEED],"d"),t(e[s.b.UPLOAD_SPEED],"u"),t(e[s.b.LATENCY],"l")].filter((e=>null!==e)).join("/")},[s.b.IGNORE_HTTPS_ERRORS]:null,[s.b.PLAYWRIGHT_OPTIONS]:null,[s.b.TEXT_ASSERTION]:null,...u,...l},y=(i.f.HTTP,i.f.ICMP,i.f.TCP,i.f.BROWSER,{...g,...b,...h,...f,...u}),v=e=>{const t=new RegExp(n.INVALID_NAMESPACE_CHARACTERS,"g");return e.replace(t,"_")}},212:function(e,t,a){e.exports=a(14)(154)},213:function(e,t,a){"use strict";e.exports=a(287)},214:function(e,t,a){"use strict";e.exports=a(288)},215:function(e,t,a){"use strict";e.exports=a(295)},286:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(30),i=a(1),s=n.__importDefault(a(201));t.default=function(e,t){void 0===t&&(t=200);var a=i.useState(e),n=a[0],l=a[1],r=i.useRef(),o=i.useRef(null),c=i.useRef(0);return i.useEffect((function(){if(r.current)o.current=e,c.current=!0;else{l(e);var a=function(){c.current?(c.current=!1,l(o.current),r.current=setTimeout(a,t)):r.current=void 0};r.current=setTimeout(a,t)}}),[e]),s.default((function(){r.current&&clearTimeout(r.current)})),n}},287:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a(41),a(214),a(215);var n=a(296).default({key:"css"}),i=n.flush,s=n.hydrate,l=n.cx,r=n.merge,o=n.getRegisteredStyles,c=n.injectGlobal,u=n.keyframes,d=n.css,m=n.sheet,p=n.cache;t.cache=p,t.css=d,t.cx=l,t.flush=i,t.getRegisteredStyles=o,t.hydrate=s,t.injectGlobal=c,t.keyframes=u,t.merge=r,t.sheet=m},288:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(289),i=a(291),s=a(293);function l(e){return e&&e.__esModule?e:{default:e}}var r=l(n),o=l(i),c=/[A-Z]|^ms/g,u=/_EMO_([^_]+?)_([^]*?)_EMO_/g,d=function(e){return 45===e.charCodeAt(1)},m=function(e){return null!=e&&"boolean"!=typeof e},p=l(s).default((function(e){return d(e)?e:e.replace(c,"-$&").toLowerCase()})),E=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(u,(function(e,t,a){return h={name:t,styles:a,next:h},t}))}return 1===o.default[e]||d(e)||"number"!=typeof t||0===t?t:t+"px"};function g(e,t,a){if(null==a)return"";if(void 0!==a.__emotion_styles)return a;switch(typeof a){case"boolean":return"";case"object":if(1===a.anim)return h={name:a.name,styles:a.styles,next:h},a.name;if(void 0!==a.styles){var n=a.next;if(void 0!==n)for(;void 0!==n;)h={name:n.name,styles:n.styles,next:h},n=n.next;return a.styles+";"}return function(e,t,a){var n="";if(Array.isArray(a))for(var i=0;i<a.length;i++)n+=g(e,t,a[i])+";";else for(var s in a){var l=a[s];if("object"!=typeof l)null!=t&&void 0!==t[l]?n+=s+"{"+t[l]+"}":m(l)&&(n+=p(s)+":"+E(s,l)+";");else if(!Array.isArray(l)||"string"!=typeof l[0]||null!=t&&void 0!==t[l[0]]){var r=g(e,t,l);switch(s){case"animation":case"animationName":n+=p(s)+":"+r+";";break;default:n+=s+"{"+r+"}"}}else for(var o=0;o<l.length;o++)m(l[o])&&(n+=p(s)+":"+E(s,l[o])+";")}return n}(e,t,a);case"function":if(void 0!==e){var i=h,s=a(e);return h=i,g(e,t,s)}}if(null==t)return a;var l=t[a];return void 0!==l?l:a}var h,b=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,a){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,i="";h=void 0;var s=e[0];null==s||void 0===s.raw?(n=!1,i+=g(a,t,s)):i+=s[0];for(var l=1;l<e.length;l++)i+=g(a,t,e[l]),n&&(i+=s[l]);b.lastIndex=0;for(var o,c="";null!==(o=b.exec(i));)c+="-"+o[1];return{name:r.default(i)+c,styles:i,next:h}}},289:function(e,t,a){"use strict";e.exports=a(290)},290:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,a=0,n=0,i=e.length;i>=4;++n,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),a=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&a)+(59797*(a>>>16)<<16);switch(i){case 3:a^=(255&e.charCodeAt(n+2))<<16;case 2:a^=(255&e.charCodeAt(n+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(n)))+(59797*(a>>>16)<<16)}return(((a=1540483477*(65535&(a^=a>>>13))+(59797*(a>>>16)<<16))^a>>>15)>>>0).toString(36)}},291:function(e,t,a){"use strict";e.exports=a(292)},292:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},293:function(e,t,a){"use strict";e.exports=a(294)},294:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(a){return void 0===t[a]&&(t[a]=e(a)),t[a]}}},295:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof document,i=function(e,t,a){var i=e.key+"-"+t.name;(!1===a||!1===n&&void 0!==e.compat)&&void 0===e.registered[i]&&(e.registered[i]=t.styles)};t.getRegisteredStyles=function(e,t,a){var n="";return a.split(" ").forEach((function(a){void 0!==e[a]?t.push(e[a]+";"):n+=a+" "})),n},t.insertStyles=function(e,t,a){i(e,t,a);var s=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var l="",r=t;do{var o=e.insert(t===r?"."+s:"",r,e.sheet,!0);n||void 0===o||(l+=o),r=r.next}while(void 0!==r);if(!n&&0!==l.length)return l}},t.registerStyles=i},296:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(41),i=a(214),s=a(215);function l(e){return e&&e.__esModule?e:{default:e}}var r=l(n);function o(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function c(e,t,a){var n=[],i=s.getRegisteredStyles(e,n,a);return n.length<2?a:i+t(n)}var u=function e(t){for(var a="",n=0;n<t.length;n++){var i=t[n];if(null!=i){var s=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))s=e(i);else for(var l in s="",i)i[l]&&l&&(s&&(s+=" "),s+=l);break;default:s=i}s&&(a&&(a+=" "),a+=s)}}return a};t.default=function(e){var t=r.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var a=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var l=i.serializeStyles(a,t.registered,void 0);return s.insertStyles(t,l,!1),t.key+"-"+l.name};return{css:a,cx:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return c(t.registered,a,u(n))},injectGlobal:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var s=i.serializeStyles(a,t.registered);o(t,s)},keyframes:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var s=i.serializeStyles(a,t.registered),l="animation-"+s.name;return o(t,{name:s.name,styles:"@keyframes "+l+"{"+s.styles+"}"}),l},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:s.getRegisteredStyles.bind(null,t.registered),merge:c.bind(null,t.registered,a)}}},302:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return hp}));var n=a(1),i=a.n(n),s=a(33),l=a.n(s),r=a(0),o=a(51),c=a(50),u=a(26),d=a(22),m=a(10),p=a(24),E=a(27),g=a(6);const h={lastRefresh:0,refreshInterval:3e4,refreshApp:()=>{throw new Error("App refresh was not initialized, set it when you invoke the context")}},b=Object(n.createContext)(h),f=({children:e})=>{const[t,a]=Object(n.useState)(Date.now()),s=Object(n.useCallback)((()=>{const e=Date.now();a(e)}),[a]),l=Object(n.useMemo)((()=>({lastRefresh:t,refreshApp:s,refreshInterval:3e4})),[t,s]);return Object(n.useEffect)((()=>{const e=setInterval((()=>{s()}),l.refreshInterval);return()=>clearInterval(e)}),[s,l.refreshInterval]),i.a.createElement(b.Provider,{value:l,children:e})},y=()=>Object(n.useContext)(b);var v=a(212),S=a.n(v);function x({from:e,to:t}){const{lastRefresh:a}=y();return Object(n.useMemo)((()=>{var a,n,i,s;return{from:null!==(a=null===(n=S.a.parse(e))||void 0===n?void 0:n.toISOString())&&void 0!==a?a:e,to:null!==(i=null===(s=S.a.parse(t))||void 0===s?void 0:s.toISOString())&&void 0!==i?i:t}}),[e,t,a])}var T=a(89),M=a(148),C=a(149),O=a(150);const{ABSOLUTE_DATE_RANGE_START:k,ABSOLUTE_DATE_RANGE_END:I,AUTOREFRESH_INTERVAL:w,AUTOREFRESH_IS_PAUSED:R,DATE_RANGE_START:_,DATE_RANGE_END:j,SEARCH:L,FILTERS:F,STATUS_FILTER:P}=o.e;var N=a(101);function D(e){return e?Object(T.parse)("?"===e[0]?e.slice(1):e,{sort:!1}):{}}const A=()=>{const{search:e}=Object(u.useLocation)();return(e=>{const t={};Object.keys(e).forEach((a=>{let n;n=void 0===e[a]?void 0:Array.isArray(e[a])?e[a][0]:e[a],t[a]=n}));const{autorefreshInterval:a,autorefreshIsPaused:n,dateRangeStart:i,dateRangeEnd:s,filters:l,excludedFilters:r,search:o,statusFilter:c,pagination:u,focusConnectorField:d,query:m,tags:p,monitorType:E,locations:g,locationId:h}=t;return{pagination:u,absoluteDateRangeStart:Object(O.a)(i||_,k),absoluteDateRangeEnd:Object(O.a)(s||j,I,{roundUp:!0}),autorefreshInterval:Object(C.a)(a,w),autorefreshIsPaused:Object(M.a)(n,R),dateRangeStart:i||_,dateRangeEnd:s||j,filters:l||F,excludedFilters:r||"",search:o||L,statusFilter:c||P,focusConnectorField:!!d,query:m||"",tags:p?JSON.parse(p):[],monitorType:E?JSON.parse(E):[],locations:g?JSON.parse(g):[],locationId:h||void 0}})(D(e))},H=()=>{const{pathname:e,search:t}=Object(u.useLocation)(),a=Object(u.useHistory)(),i=Object(n.useCallback)(((n,i=!1)=>{const s={...D(t),...n},l=n?Object(T.stringify)(Object.keys(s).reduce(((e,t)=>{const a=s[t];return void 0===a||""===a?e:{...e,[t]:a}}),{})):null;t!==l&&(i?a.replace({pathname:e,search:l||void 0}):a.push({pathname:e,search:l||void 0}))}),[a,e,t]);return[A,i]};var B=a(4);const z=e=>{var t,a,i,s,l,o;const c=H()[0](),u=Object(p.useKibana)(),d=null===(t=u.services.chrome)||void 0===t?void 0:t.setBreadcrumbs,m=null!==(a=null===(i=u.services.application)||void 0===i?void 0:i.getUrlForApp(B.a.SYNTHETICS_PLUGIN_ID))&&void 0!==a?a:"",E=null!==(s=null===(l=u.services.application)||void 0===l?void 0:l.getUrlForApp("observability-overview"))&&void 0!==s?s:"",g=null===(o=u.services.application)||void 0===o?void 0:o.navigateToUrl;Object(n.useEffect)((()=>{var t,a;d&&d((t=((e,t,a)=>{if(a){const t={...a};delete t.statusFilter;const n=Object(N.a)(t,!0);e+="?"===n?"":n}return[{text:r.i18n.translate("xpack.synthetics.breadcrumbs.observabilityText",{defaultMessage:"Observability"}),href:t},{text:r.i18n.translate("xpack.synthetics.breadcrumbs.overviewBreadcrumbText",{defaultMessage:"Synthetics"}),href:e}]})(m,E,c).concat(e),a=g,t.map((e=>({...e,...e.href?{onClick:t=>{a&&e.href&&(t.preventDefault(),a(e.href))}}:{}})))))}),[m,E,e,g,c,d])};var U=a(56);function $(){const e=Object(c.useDispatch)(),{loading:t,error:a,enablement:i}=Object(c.useSelector)(U.N);return Object(n.useEffect)((()=>{i||e(Object(U.u)())}),[e,i]),{enablement:{areApiKeysEnabled:null==i?void 0:i.areApiKeysEnabled,canEnable:null==i?void 0:i.canEnable,isEnabled:null==i?void 0:i.isEnabled},invalidApiKeyError:!!i&&!Boolean(null==i?void 0:i.isValidApiKey),error:a,loading:t,enableSynthetics:Object(n.useCallback)((()=>e(Object(U.c)())),[e]),disableSynthetics:Object(n.useCallback)((()=>e(Object(U.b)())),[e])}}function G(){const e=Object(c.useDispatch)(),{error:t,loading:a,locations:i,throttling:s,locationsLoaded:l}=Object(c.useSelector)(U.M);return Object(n.useEffect)((()=>{l||e(Object(U.t)())}),[e,i,l]),{error:t,loading:a,locations:i,throttling:s}}var V=a(86);const q=["monitor.duration.us"];function K({locationId:e}){const t=Object(c.useDispatch)(),{locationsLoaded:a,locations:i}=Object(c.useSelector)(U.M);return Object(n.useEffect)((()=>{a||t(Object(U.t)())})),Object(n.useMemo)((()=>{var t;return a?(null===(t=i.find((t=>t.id===e)))||void 0===t?void 0:t.label)||e:void 0}),[a,i,e])}function W(e){const{lastRefresh:t}=y(),{monitorId:a}=Object(u.useParams)(),{data:i,loading:s}=Object(g.useEsSearch)({index:o.G,body:{size:0,query:{bool:{filter:[V.c,V.b,{term:{config_id:null!=e?e:a}}]}},sort:[{"@timestamp":"desc"}],aggs:{locations:{terms:{field:"observer.geo.name",missing:o.K,size:1e3},aggs:{summary:{top_hits:{size:1}}}}}}},[t,a,e],{name:"getMonitorStatusByLocation"});return Object(n.useMemo)((()=>{var e,t;return{locations:(null!==(e=null==i||null===(t=i.aggregations)||void 0===t?void 0:t.locations.buckets)&&void 0!==e?e:[]).map((e=>{var t;return null===(t=e.summary.hits.hits)||void 0===t?void 0:t[0]._source})),loading:s}}),[i,s])}var Y=a(52);const X=(e,t,a)=>{const i=Object(c.useDispatch)(),{blocks:s}=Object(c.useSelector)(U.y);Object(n.useEffect)((()=>{i(Object(U.d)(e.ref.screenshotRef.screenshot_ref.blocks.map((({hash:e})=>e))))}),[i,e.ref.screenshotRef.screenshot_ref.blocks]);const[l,r]=Object(n.useState)(e);Object(n.useEffect)((()=>{const n=document.createElement("canvas");return function(e,t,a,n){return function(e,t){for(const a of t)if(!e[a]||Object(U.v)(e[a]))return!1;return!0}(n,t.ref.screenshotRef.screenshot_ref.blocks.map((({hash:e})=>e)))&&(void 0===e||(({ref:{screenshotRef:{synthetics:{step:{index:e}},monitor:{check_group:t}}}},{ref:{screenshotRef:{synthetics:{step:{index:a}},monitor:{check_group:n}}}})=>e!==a||t!==n)(t,a))}(a,e,l,s)&&(async function(){await async function(e,t,a){const{ref:{screenshotRef:n}}=e,i=t.getContext("2d",{alpha:!1});t.width=n.screenshot_ref.width,t.height=n.screenshot_ref.height;const s=[];for(const{hash:e,top:t,left:l,width:r,height:o}of n.screenshot_ref.blocks)s.push(new Promise(((n,s)=>{const c=new Image,u=a[e];u&&Object(Y.H)(u)?(c.onload=()=>{null==i||i.drawImage(c,l,t,r,o),n()},c.src=`data:image/jpg;base64,${u.synthetics.blob}`):s(Error(`Error processing image. Expected image data with hash ${e} is missing`))})));return Promise.all(s)}(e,n,s);const a=n.toDataURL("image/jpg",1);t(a)}(),r(e)),()=>{var e;null===(e=n.parentElement)||void 0===e||e.removeChild(n)}}),[s,l,a,e,t])},{BASE_PATH:J}=o.f,{DATE_RANGE_START:Z,DATE_RANGE_END:Q}=o.e,ee={basePath:J,dateRangeStart:Z,dateRangeEnd:Q,isApmAvailable:!0,isInfraAvailable:!0,isLogsAvailable:!0,isDev:!1},te=Object(n.createContext)(ee),ae=({children:e,...t})=>{const{basePath:a,isApmAvailable:s,isInfraAvailable:l,isLogsAvailable:r,commonlyUsedRanges:o,isDev:c}=t,{dateRangeStart:u,dateRangeEnd:d}=A(),m=Object(n.useMemo)((()=>({isDev:c,basePath:a,isApmAvailable:s,isInfraAvailable:l,isLogsAvailable:r,commonlyUsedRanges:o,dateRangeStart:null!=u?u:Z,dateRangeEnd:null!=d?d:Q})),[c,a,s,l,r,u,d,o]);return i.a.createElement(te.Provider,{value:m,children:e})},ne=()=>Object(n.useContext)(te);var ie=a(38),se=a(34),le=a(28);const re={colors:{danger:ie.euiLightVars.euiColorDanger,dangerBehindText:ie.euiDarkVars.euiColorVis9_behindText,mean:ie.euiLightVars.euiColorPrimary,range:ie.euiLightVars.euiFocusBackgroundColor,success:ie.euiLightVars.euiColorSuccess,warning:ie.euiLightVars.euiColorWarning,gray:ie.euiLightVars.euiColorLightShade,lightestShade:ie.euiLightVars.euiColorLightestShade},chartTheme:{baseTheme:le.LIGHT_THEME,theme:se.EUI_CHARTS_THEME_LIGHT.theme}},oe=Object(n.createContext)(re),ce=({darkMode:e,children:t})=>{let a;a=e?{danger:ie.euiDarkVars.euiColorVis9,dangerBehindText:ie.euiDarkVars.euiColorVis9_behindText,mean:ie.euiDarkVars.euiColorPrimary,gray:ie.euiDarkVars.euiColorLightShade,range:ie.euiDarkVars.euiFocusBackgroundColor,success:ie.euiDarkVars.euiColorSuccess,warning:ie.euiDarkVars.euiColorWarning,lightestShade:ie.euiDarkVars.euiColorLightestShade}:{danger:ie.euiLightVars.euiColorVis9,dangerBehindText:ie.euiLightVars.euiColorVis9_behindText,mean:ie.euiLightVars.euiColorPrimary,gray:ie.euiLightVars.euiColorLightShade,range:ie.euiLightVars.euiFocusBackgroundColor,success:ie.euiLightVars.euiColorSuccess,warning:ie.euiLightVars.euiColorWarning,lightestShade:ie.euiLightVars.euiColorLightestShade};const s=Object(n.useMemo)((()=>({colors:a,chartTheme:{baseTheme:e?le.DARK_THEME:le.LIGHT_THEME,theme:e?se.EUI_CHARTS_THEME_DARK.theme:se.EUI_CHARTS_THEME_LIGHT.theme}})),[a,e]);return i.a.createElement(oe.Provider,{value:s,children:t})},ue=Object(n.createContext)({}),de=({children:e,...t})=>i.a.createElement(ue.Provider,{value:{...t},children:e}),me=()=>Object(n.useContext)(ue),pe=Object(n.createContext)({}),Ee=({children:e,dataViews:t})=>{const{loading:a,error:s,data:l}=Object(c.useSelector)(U.A),r=(null==l?void 0:l.indices)||"",o=Object(c.useDispatch)(),u=Boolean(null==l?void 0:l.indexExists);Object(n.useEffect)((()=>{o(Object(U.n)())}),[o]);const{data:d,loading:m}=Object(g.useFetcher)((async()=>{if(r&&null!=l&&l.indexExists)return t.create({title:r})}),[r,null==l?void 0:l.indexExists]),p=m||a,E=Object(n.useMemo)((()=>({dataView:d,indices:r,isLoading:p,error:s,hasData:u})),[d,r,p,s,u]);return i.a.createElement(pe.Provider,{value:E,children:e})};var ge=a(58),he=a.n(ge),be=a(76),fe=a(23),ye=a(48);const ve=({name:e})=>{const{share:t}=Object(p.useKibana)().services,a=t.url.locators.get(ye.ILM_LOCATOR_ID),{basePath:n}=ne(),{data:s}=Object(g.useFetcher)((async()=>null==a?void 0:a.getLocation({page:"policy_edit",policyName:e})),[]);return s?i.a.createElement(d.EuiLink,{href:`${n}/app/${s.app}${s.path}`,target:"_blank"},e):i.a.createElement(d.EuiLoadingContent,{lines:1})};var Se=a(98),xe=a.n(Se);const Te=r.i18n.translate("xpack.synthetics.synthetics.waterfall.searchBox.placeholder",{defaultMessage:"Filter network requests"}),Me=r.i18n.translate("xpack.synthetics.synthetics.waterfall.filterGroup.filterScreenreaderLabel",{defaultMessage:"Filter by"}),Ce=r.i18n.translate("xpack.synthetics.synthetics.waterfall.filterGroup.removeFilterScreenReaderLabel",{defaultMessage:"Remove filter by"}),Oe=r.i18n.translate("xpack.synthetics.pingList.synthetics.waterfall.filters.popover",{defaultMessage:"Click to open waterfall filters"}),ke=r.i18n.translate("xpack.synthetics.pingList.synthetics.waterfall.filters.collapseRequestsLabel",{defaultMessage:"Collapse to only show matching requests"}),Ie=r.i18n.translate("xpack.synthetics.synthetics.waterfall.sidebar.filterMatchesScreenReaderLabel",{defaultMessage:"Resource matches filter"});let we,Re;!function(e){e.Blocked="blocked",e.Dns="dns",e.Connect="connect",e.Ssl="ssl",e.Send="send",e.Wait="wait",e.Receive="receive"}(we||(we={})),function(e){e.Status="status",e.ResourceSize="resourceSize",e.TransferSize="transferSize",e.CertificateIssuer="certificateIssuer",e.CertificateIssueDate="certificateIssueDate",e.CertificateExpiryDate="certificateExpiryDate",e.CertificateSubject="certificateSubject",e.IP="ip",e.MimeType="mimeType",e.RequestStart="requestStart"}(Re||(Re={}));const _e={[we.Blocked]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.blocked",{defaultMessage:"Queued / Blocked"}),[we.Dns]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.dns",{defaultMessage:"DNS"}),[we.Connect]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.connect",{defaultMessage:"Connecting"}),[we.Ssl]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.ssl",{defaultMessage:"TLS"}),[we.Send]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.send",{defaultMessage:"Sending request"}),[we.Wait]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.wait",{defaultMessage:"Waiting (TTFB)"}),[we.Receive]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.receive",{defaultMessage:"Content downloading"})},je={[Re.Status]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.status",{defaultMessage:"Status"}),[Re.MimeType]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.contentType",{defaultMessage:"Content type"}),[Re.RequestStart]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.requestStart",{defaultMessage:"Request start"}),[Re.ResourceSize]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.resourceSize",{defaultMessage:"Resource size"}),[Re.TransferSize]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.transferSize",{defaultMessage:"Transfer size"}),[Re.CertificateIssuer]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateIssuer",{defaultMessage:"Issuer"}),[Re.CertificateIssueDate]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateIssueDate",{defaultMessage:"Valid from"}),[Re.CertificateExpiryDate]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateExpiryDate",{defaultMessage:"Valid until"}),[Re.CertificateSubject]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateSubject",{defaultMessage:"Common name"}),[Re.IP]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.ip",{defaultMessage:"IP"})},Le=[we.Blocked,we.Dns,we.Connect,we.Ssl,we.Send,we.Wait,we.Receive];let Fe;Re.MimeType,we.Dns,we.Connect,we.Ssl,we.Wait,we.Receive,function(e){e.Html="html",e.Script="script",e.Stylesheet="stylesheet",e.Media="media",e.Font="font",e.XHR="xhr",e.Other="other"}(Fe||(Fe={}));const Pe={[Fe.Html]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.html",{defaultMessage:"HTML"}),[Fe.Script]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.script",{defaultMessage:"JS"}),[Fe.Stylesheet]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.stylesheet",{defaultMessage:"CSS"}),[Fe.Media]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.media",{defaultMessage:"Media"}),[Fe.Font]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.font",{defaultMessage:"Font"}),[Fe.XHR]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.xhr",{defaultMessage:"XHR"}),[Fe.Other]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.other",{defaultMessage:"Other"})},Ne={"text/html":Fe.Html,"application/javascript":Fe.Script,"text/javascript":Fe.Script,"text/css":Fe.Stylesheet,"image/apng":Fe.Media,"image/bmp":Fe.Media,"image/gif":Fe.Media,"image/x-icon":Fe.Media,"image/jpeg":Fe.Media,"image/png":Fe.Media,"image/svg+xml":Fe.Media,"image/tiff":Fe.Media,"image/webp":Fe.Media,"audio/wave":Fe.Media,"audio/wav":Fe.Media,"audio/x-wav":Fe.Media,"audio/x-pn-wav":Fe.Media,"audio/webm":Fe.Media,"video/webm":Fe.Media,"video/mp4":Fe.Media,"audio/ogg":Fe.Media,"video/ogg":Fe.Media,"application/ogg":Fe.Media,"font/otf":Fe.Font,"font/ttf":Fe.Font,"font/woff":Fe.Font,"font/woff2":Fe.Font,"application/x-font-opentype":Fe.Font,"application/font-woff":Fe.Font,"application/font-woff2":Fe.Font,"application/vnd.ms-fontobject":Fe.Font,"application/font-sfnt":Fe.Font,"application/json":Fe.XHR},De=[{label:Pe[Fe.XHR],mimeType:Fe.XHR},{label:Pe[Fe.Html],mimeType:Fe.Html},{label:Pe[Fe.Script],mimeType:Fe.Script},{label:Pe[Fe.Stylesheet],mimeType:Fe.Stylesheet},{label:Pe[Fe.Font],mimeType:Fe.Font},{label:Pe[Fe.Media],mimeType:Fe.Media},{label:Pe[Fe.Other],mimeType:Fe.Other}],Ae=({query:e,setQuery:t,activeFilters:a,setActiveFilters:s,onlyHighlighted:l,setOnlyHighlighted:r})=>{const[o,c]=Object(n.useState)(e),[u,m]=Object(n.useState)(!1),p=Object(g.useUiTracker)({app:"uptime"});return xe()((()=>{t(o)}),250,[o]),Object(n.useEffect)((()=>{e||a.length>0||r(!1)}),[a.length,r,e]),Object(n.useEffect)((()=>{e&&p({metric:"waterfall_filter_input_changed",metricType:g.METRIC_TYPE.CLICK})}),[e,p]),Object(n.useEffect)((()=>{l&&p({metric:"waterfall_filter_collapse_checked",metricType:g.METRIC_TYPE.CLICK})}),[l,p]),Object(n.useEffect)((()=>{a.length>0&&p({metric:"waterfall_filters_applied_changed",metricType:g.METRIC_TYPE.CLICK})}),[a,p]),i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFieldSearch,{fullWidth:!0,"aria-label":Te,placeholder:Te,onChange:e=>{c(e.target.value)},value:o})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiPopover,{button:i.a.createElement(d.EuiButtonIcon,{"aria-label":Oe,iconType:"filter",onClick:()=>m((e=>!e)),color:a.length>0?"primary":"text",isSelected:a.length>0}),isOpen:u,closePopover:()=>m(!1),anchorPosition:"rightCenter"},i.a.createElement(d.EuiFilterGroup,null,De.map((({label:e,mimeType:t})=>i.a.createElement(d.EuiFilterButton,{hasActiveFilters:a.includes(t),onClick:()=>{return e=t,void s((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]));var e},key:e,withNext:!0,"aria-label":`${a.includes(t)?Ce:Me} ${e}`},e)))),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(d.EuiCheckbox,{compressed:!0,disabled:!(e||a.length>0),id:"onlyHighlighted",label:ke,checked:l,onChange:e=>{r(e.target.checked)}}))))},He=({networkEvents:e})=>e,Be=()=>{var e,t;const{checkGroupId:a,stepIndex:n}=Object(u.useParams)(),i=null===(e=Object(c.useSelector)(He)[null!=a?a:""])||void 0===e?void 0:e[Number(n)],s={},l={};null==i||i.events.forEach((e=>{var t,a,n,i,r,o;e.mimeType&&(s[null!==(t=Ne[e.mimeType])&&void 0!==t?t:Fe.Other]=(null!==(a=s[null!==(n=Ne[e.mimeType])&&void 0!==n?n:Fe.Other])&&void 0!==a?a:0)+1,l[null!==(i=Ne[e.mimeType])&&void 0!==i?i:Fe.Other]=(null!==(r=l[null!==(o=Ne[e.mimeType])&&void 0!==o?o:Fe.Other])&&void 0!==r?r:0)+(e.transferSize||0))}));const r=Object.values(s).reduce(((e,t)=>e+t),0),o=Object.values(l).reduce(((e,t)=>e+t),0);return{loading:null===(t=null==i?void 0:i.loading)||void 0===t||t,totalObjects:r,totalObjectsWeight:ze(o),items:De.map((({label:e,mimeType:t})=>{var a,n,i,c;return{label:e,count:null!==(a=s[t])&&void 0!==a?a:0,total:r,mimeType:t,percent:(null!==(n=s[t])&&void 0!==n?n:0)/r*100,weight:ze(null!==(i=l[t])&&void 0!==i?i:0),weightPercent:(null!==(c=l[t])&&void 0!==c?c:0)/o*100}}))}},ze=(e,t=0)=>{if(0===e)return"0 Bytes";const a=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]};var Ue=a(77);const $e=[{name:"synthetics",label:r.i18n.translate("xpack.synthetics.settingsRoute.allChecks",{defaultMessage:"All Checks"})},{name:"synthetics-synthetics.browser-default_policy",label:r.i18n.translate("xpack.synthetics.settingsRoute.browserChecks",{defaultMessage:"Browser Checks"})},{name:"synthetics-synthetics.browser_network-default_policy",label:r.i18n.translate("xpack.synthetics.settingsRoute.browserNetworkRequests",{defaultMessage:"Browser Network Requests"})},{name:"synthetics-synthetics.browser_screenshot-default_policy",label:"Browser Screenshots"},{name:"synthetics-synthetics.http-default_policy",label:"HTTP Pings"},{name:"synthetics-synthetics.icmp-default_policy",label:"ICMP Pings"},{name:"synthetics-synthetics.tcp-default_policy",label:"TCP Pings"}],Ge=e=>{if(!e)return"";const[t]=e.split("d");return r.i18n.translate("xpack.synthetics.settingsRoute.table.retentionPeriodValue",{defaultMessage:"{value} days + rollover",values:{value:t}})},Ve=()=>{const{data:e,loading:t}=(()=>{var e;const{data:t,error:a,loading:n}=Object(g.useFetcher)((async()=>(async()=>await Ue.a.get("/api/index_lifecycle_management/policies"))()),[]),{data:i,loading:s}=Object(g.useFetcher)((async()=>(async()=>await Ue.a.get(o.F.INDEX_SIZE))()),[]),l=null!==(e=null==t?void 0:t.filter((({name:e})=>e.includes("synthetics"))))&&void 0!==e?e:[];return{data:$e.map((({name:e,label:t})=>{var a,n,s;const r=l.find((t=>t.name===e)),o=null==i||null===(a=i.data)||void 0===a?void 0:a.filter((e=>{var t;return null==r||null===(t=r.indices)||void 0===t?void 0:t.includes(e.index)}));let c=null!==(n=null==o?void 0:o.reduce(((e,t)=>{var a;return null!==(a=e+Number(null==t?void 0:t["store.size"]))&&void 0!==a?a:0}),0))&&void 0!==n?n:0;const u=(null!==(s=null==r?void 0:r.policy.phases)&&void 0!==s?s:{}).delete;var d,m;return"synthetics"===e&&(c=null!==(d=null==i||null===(m=i.data)||void 0===m?void 0:m.reduce(((e,t)=>{var a;return null!==(a=e+Number(null==t?void 0:t["store.size"]))&&void 0!==a?a:0}),0))&&void 0!==d?d:0),{name:e,label:t,policy:r,retentionPeriod:Ge(null==u?void 0:u.min_age),currentSize:ze(c)}})),error:a,loading:n||s}})(),a=[{field:"label",name:r.i18n.translate("xpack.synthetics.settingsRoute.table.dataset",{defaultMessage:"Dataset"})},{field:"currentSize",name:r.i18n.translate("xpack.synthetics.settingsRoute.table.currentSize",{defaultMessage:"Current size"})},{field:"retentionPeriod",name:r.i18n.translate("xpack.synthetics.settingsRoute.table.retentionPeriod",{defaultMessage:"Retention period"})},{field:"name",name:r.i18n.translate("xpack.synthetics.settingsRoute.table.policy",{defaultMessage:"Policy"}),render:(e,t)=>i.a.createElement(ve,{name:e})}];return i.a.createElement("div",null,i.a.createElement(d.EuiCallOut,{title:qe,iconType:"iInCircle"},i.a.createElement("p",null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.settingsRoute.retentionCalloutDescription",defaultMessage:"To change your data retention settings, we recommend creating your own index lifecycle policy and attaching it to the relevant custom Component Template in {stackManagement}. For more information, {docsLink}.",values:{stackManagement:i.a.createElement("strong",null,Ke),docsLink:i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/guide/en/observability/current/synthetics-manage-retention.html"},We)}}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiBasicTable,{loading:t,tableCaption:Ye,items:e,columns:a,tableLayout:"auto"}))},qe=r.i18n.translate("xpack.synthetics.settingsRoute.retentionCalloutTitle",{defaultMessage:"Synthetics data is configured by managed index lifecycle policies"}),Ke=r.i18n.translate("xpack.synthetics.stackManagement",{defaultMessage:"Stack Management"}),We=r.i18n.translate("xpack.synthetics.settingsRoute.readDocs",{defaultMessage:"read our documentation"}),Ye=r.i18n.translate("xpack.synthetics.settingsRoute.tableCaption",{defaultMessage:"Synthetics data retention policies"}),Xe=r.i18n.translate("xpack.synthetics.settings.title",{defaultMessage:"Settings"}),Je=()=>{(e=>{var t,a;const n=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(B.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"";z([{text:Xe,href:`${n}${o.H.replace(":tabId","alerting")}`}])})();const{tabId:e}=Object(u.useParams)();return e?i.a.createElement("div",null,"alerting"===e?i.a.createElement("div",null,"TODO: Alerting"):i.a.createElement(Ve,null)):i.a.createElement(u.Redirect,{to:"/settings/alerting"})},Ze=(e,t)=>{const a=Object(u.useRouteMatch)(o.H);if(!a)return{};const{tabId:n}=a.params;return{pageTitle:r.i18n.translate("xpack.synthetics.settingsRoute.pageHeaderTitle",{defaultMessage:"Settings"}),rightSideItems:[],tabs:[{label:r.i18n.translate("xpack.synthetics.settingsTabs.alerting",{defaultMessage:"Alerting"}),isSelected:"alerting"===n||!n,href:`${t}${o.H.replace(":tabId","alerting")}`},{label:r.i18n.translate("xpack.synthetics.settingsTabs.dataRetention",{defaultMessage:"Data retention"}),isSelected:"data-retention"===n,href:`${t}${o.H.replace(":tabId","data-retention")}`}]}},Qe=(e,t,a)=>[{title:r.i18n.translate("xpack.synthetics.settingsRoute.title",{defaultMessage:"Settings | {baseTitle}",values:{baseTitle:a}}),path:o.A,component:Je,dataTestSubj:"syntheticsSettingsPage",pageSectionProps:{paddingSize:"m"},pageHeader:Ze(0,t)},{title:r.i18n.translate("xpack.synthetics.settingsRoute.title",{defaultMessage:"Settings | {baseTitle}",values:{baseTitle:a}}),path:o.H,component:Je,dataTestSubj:"syntheticsSettingsPage",pageSectionProps:{paddingSize:"m"},pageHeader:Ze(0,t)}];var et=a(7),tt=a.n(et);const at=({stepIndex:e,totalSteps:t,handleNextStep:a,handlePreviousStep:n})=>{const s=e>1,l=e<t;return i.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:n,disabled:!s,iconType:"arrowLeft"},nt)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.synthetics.testDetails.stepNav",defaultMessage:"{stepIndex} / {totalSteps}",values:{stepIndex:e,totalSteps:t}}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:a,disabled:!l,iconType:"arrowRight",iconSide:"right"},it)))))},nt=r.i18n.translate("xpack.synthetics.synthetics.stepDetail.previousStepButtonText",{defaultMessage:"Previous"}),it=r.i18n.translate("xpack.synthetics.synthetics.stepDetail.nextStepButtonText",{defaultMessage:"Next"});var st=a(25),lt=a.n(st),rt=a(31),ot=a(133),ct=a.n(ot);const ut=rt.css`
  padding: 0;
  margin: auto;
  width: ${360}px;
  height: ${203}px;
  object-fit: contain;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
`,dt=({size:e,isLoading:t=!1})=>{const{euiTheme:a}=Object(d.useEuiTheme)(),n="m"===e?200:360,s="m"===e?114:203;return i.a.createElement(gt,{"data-test-subj":"stepScreenshotPlaceholder",role:"img","aria-label":t?mt:pt,title:t?mt:pt,$_css:n,$_css2:s,$_css3:Object(d.useEuiBackgroundColor)("subdued"),$_css4:a.border.thin},t?i.a.createElement(ht,{lines:1,"data-test-subj":"stepScreenshotPlaceholderLoading"}):i.a.createElement(bt,{$_css5:Object(rt.css)({border:"none",display:"flex",flexDirection:"column",alignItems:"center"})},i.a.createElement(d.EuiIcon,{"data-test-subj":"stepScreenshotNotAvailable",type:"eyeClosed",color:a.colors.disabledText}),i.a.createElement(d.EuiText,{color:a.colors.disabledText},Et)))},mt=r.i18n.translate("xpack.synthetics.monitor.step.screenshot.ariaLabel",{defaultMessage:"Step screenshot is being loaded."}),pt=r.i18n.translate("xpack.synthetics.monitor.step.screenshot.notAvailable",{defaultMessage:"Step screenshot is not available."}),Et=r.i18n.translate("xpack.synthetics.monitor.step.screenshot.unAvailable",{defaultMessage:"Image unavailable"});var gt=lt()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-2dboe6-0"})(["",";width:","px;height:","px;background:",";border:",";"],ut,(e=>e.$_css),(e=>e.$_css2),(e=>e.$_css3),(e=>e.$_css4)),ht=lt()(d.EuiLoadingContent).withConfig({displayName:"_StyledEuiLoadingContent",componentId:"sc-2dboe6-1"})(["width:100%;height:8%;transform:scale(1,13);"]),bt=lt()("div").withConfig({displayName:"_StyledDiv2",componentId:"sc-2dboe6-2"})(["",""],(e=>e.$_css5));function ft(e,t,a,n,i){var s,l,r,o,c,u;const d=(null!==(s=null===(l=e[t])||void 0===l?void 0:l.attempts)&&void 0!==s?s:0)+(a?1:0),m=null!==(r=null!=n?n:null===(o=e[t])||void 0===o?void 0:o.data)&&void 0!==r?r:null,p=null!==(c=null!=i?i:null===(u=e[t])||void 0===u?void 0:u.loading)&&void 0!==c&&c;return{...e,[t]:{attempts:d,data:m,loading:p}}}const yt=({captionContent:e,imgRef:t,imgSrc:a,maxSteps:s,setStepNumber:l,stepNumber:r,isLoading:o,label:c,onVisible:u})=>{const{euiTheme:m}=Object(d.useEuiTheme)();Object(n.useEffect)((()=>(u(!0),()=>{u(!1)})),[]);const p=Object(d.useIsWithinMaxBreakpoint)("m");return i.a.createElement(xt,{onClick:e=>{e.stopPropagation()},onKeyDown:e=>{},$_css:m.colors.lightShade},i.a.createElement("div",{className:"stepArrowsFullScreen"},(a||t)&&i.a.createElement(d.EuiFlexGroup,{alignItems:"center",justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(Tt,{disabled:1===r,onClick:e=>{l(r-1),e.preventDefault()},iconType:"arrowLeft","aria-label":vt,isLoading:o,$_css2:p?0:"auto"},vt)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{color:m.colors.text},e)),i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(Mt,{disabled:r===s,onClick:e=>{l(r+1),e.stopPropagation()},iconType:"arrowRight",iconSide:"right","aria-label":St,isLoading:o,$_css3:p?0:"auto"},St))),i.a.createElement(Ct,{color:m.colors.text,className:"eui-textNoWrap",size:"s",$_css4:m.size.xs},c)))},vt=r.i18n.translate("xpack.synthetics.monitor.step.previousStep",{defaultMessage:"Previous step"}),St=r.i18n.translate("xpack.synthetics.monitor.step.nextStep",{defaultMessage:"Next step"});var xt=lt()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-xo7eg5-0"})(["background-color:",";display:inline-block;width:100%;text-decoration:none;"],(e=>e.$_css)),Tt=lt()(d.EuiButtonEmpty).withConfig({displayName:"_StyledEuiButtonEmpty",componentId:"sc-xo7eg5-1"})((e=>({marginLeft:e.$_css2}))),Mt=lt()(d.EuiButtonEmpty).withConfig({displayName:"_StyledEuiButtonEmpty2",componentId:"sc-xo7eg5-2"})((e=>({marginRight:e.$_css3}))),Ct=lt()(d.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-xo7eg5-3"})((e=>({padding:e.$_css4})));const Ot=rt.css`
  padding: 0;
  margin: auto;
  width: ${96}px;
  height: ${64}px;
  object-fit: contain;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
`,kt=({isLoading:e=!1,width:t=96,height:a=64})=>{const{euiTheme:n}=Object(d.useEuiTheme)();return i.a.createElement(Rt,{"data-test-subj":"stepScreenshotPlaceholder",role:"img","aria-label":e?It:wt,title:e?It:wt,$_css:t,$_css2:a,$_css3:Object(d.useEuiBackgroundColor)("subdued"),$_css4:n.border.thin},e?i.a.createElement(_t,{"data-test-subj":"stepScreenshotPlaceholderLoading"}):i.a.createElement(d.EuiIcon,{"data-test-subj":"stepScreenshotNotAvailable",type:"eyeClosed",color:n.colors.disabledText}))},It=r.i18n.translate("xpack.synthetics.monitor.step.screenshot.ariaLabel",{defaultMessage:"Step screenshot is being loaded."}),wt=r.i18n.translate("xpack.synthetics.monitor.step.screenshot.notAvailable",{defaultMessage:"Step screenshot is not available."});var Rt=lt()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-1jrxwpc-0"})(["",";width:","px;height:","px;background:",";border:",";"],Ot,(e=>e.$_css),(e=>e.$_css2),(e=>e.$_css3),(e=>e.$_css4)),_t=lt()(d.EuiLoadingContent).withConfig({displayName:"_StyledEuiLoadingContent",componentId:"sc-1jrxwpc-1"})(["width:100%;height:100%;transform:scale(1,100);"]);const jt=({captionContent:e,imageCaption:t,imageData:a,isStepFailed:n,isLoading:s,asThumbnail:l=!0,size:r})=>a?i.a.createElement(d.EuiImage,{allowFullScreen:!0,alt:e,caption:t,"data-test-subj":"stepScreenshotThumbnail",hasShadow:!0,url:a,size:r,className:"syntheticsStepImage"}):l?i.a.createElement(kt,{isLoading:s}):i.a.createElement(dt,{isLoading:s,size:r}),Lt=({captionContent:e,imageCaption:t,imageData:a,imgRef:n,setImageData:s,isStepFailed:l,isLoading:r,asThumbnail:o,size:c})=>(X(n,s,a),i.a.createElement(jt,{captionContent:e,imageCaption:t,imageData:a,isStepFailed:l,isLoading:r,asThumbnail:o,size:c})),Ft=({captionContent:e,imageCaption:t,imageData:a,imgRef:n,imgSrc:s,setImageData:l,isStepFailed:r,isLoading:o,asThumbnail:c=!0,size:u})=>s?i.a.createElement(jt,{captionContent:e,imageCaption:t,imageData:a,isStepFailed:r,isLoading:o,asThumbnail:c,size:u}):n?i.a.createElement(Lt,{captionContent:e,imageCaption:t,imageData:a,imgRef:n,setImageData:l,isStepFailed:r,isLoading:o,asThumbnail:c,size:u}):null,Pt=({captionContent:e,imageCaption:t,imgRef:a,imgSrc:s,isImagePopoverOpen:l,isStepFailed:r,isLoading:o,asThumbnail:c=!0,size:u})=>{const{euiTheme:m}=Object(d.useEuiTheme)(),[p,E]=Object(n.useState)(s||void 0);Object(n.useEffect)((()=>{s&&s!==p&&E(s)}),[s,p]);const g=Object(n.useCallback)((e=>E(e)),[E]),h=o||!!a&&!p,b=c?Ot:null;return i.a.createElement(Dt,{anchorPosition:"leftDown",button:i.a.createElement(Ft,{captionContent:e,imageCaption:t,imgRef:a,imgSrc:s,setImageData:g,imageData:p,isStepFailed:r,isLoading:h,asThumbnail:c,size:u}),isOpen:l,closePopover:()=>{},$_css:b,$_css2:m.border.thin,$_css3:r?`border-color: ${m.colors.danger}`:""},p&&!o?i.a.createElement(At,{alt:Nt,url:p}):c?i.a.createElement(kt,{isLoading:o}):i.a.createElement(dt,{isLoading:o}))},Nt=r.i18n.translate("xpack.synthetics.monitor.step.thumbnail.alt",{defaultMessage:"A larger version of the screenshot for this journey step's thumbnail."});var Dt=lt()(d.EuiPopover).withConfig({displayName:"_StyledEuiPopover",componentId:"sc-1fwmw7w-0"})(["figure{img{",";border:",";",";}}"],(e=>e.$_css),(e=>e.$_css2),(e=>e.$_css3)),At=lt()(d.EuiImage).withConfig({displayName:"_StyledEuiImage",componentId:"sc-1fwmw7w-1"})(["width:","px;height:","px;object-fit:contain;"],640,360);const Ht=({stepLabels:e,checkGroup:t,stepStatus:a,allStepsLoaded:s,initialStepNo:l=1,retryFetchOnRevisit:r=!1,asThumbnail:o=!0,size:c})=>{var u,d,m,p,E;const[h,b]=Object(n.useState)(l),[f,y]=Object(n.useState)(!1),[v,S]=Object(n.useState)([]),x=i.a.useRef(null),{basePath:T}=Object(n.useContext)(te),M=`${T}/internal/uptime/journey/screenshot/${t}/${h}`,C=null!==(u=null==e?void 0:e[h-1])&&void 0!==u?u:"",O=ct()(x,{root:null,rootMargin:"0px",threshold:1}),[k,I]=Object(n.useState)(void 0),w=Boolean(k&&(null==k||null===(d=k.ref)||void 0===d||null===(m=d.screenshotRef)||void 0===m||null===(p=m.synthetics)||void 0===p||null===(E=p.step)||void 0===E?void 0:E.index)===h),{data:R,loading:_}=(({stepStatus:e,hasImage:t,hasIntersected:a,imgPath:i,retryFetchOnRevisit:s})=>{var l;const[r,o]=Object(n.useState)({}),c="skipped"===e;return Object(g.useFetcher)((()=>{var e,n;const l=(null!==(e=null===(n=r[i])||void 0===n?void 0:n.attempts)&&void 0!==e?e:0)>0;return c||!a||t||!s&&l?new Promise((e=>e(null))):(o((e=>ft(e,i,!1,void 0,!0))),Object(U.o)(i).then((e=>(o((t=>ft(t,i,!0,e,!1))),e))).catch((()=>{o((e=>ft(e,i,!0,null,!1)))})))}),[c,a,i,s,t]),null!==(l=r[i])&&void 0!==l?l:{data:null,loading:!1}})({hasImage:Boolean(v[h-1])||w,hasIntersected:Boolean(O&&1===O.intersectionRatio),stepStatus:a,imgPath:M,retryFetchOnRevisit:r});let j;var L;Object(n.useEffect)((()=>{Object(Y.J)(R)?I(R):Object(Y.I)(R)&&S((e=>[...e,null==R?void 0:R.src]))}),[R]),Object(Y.I)(R)&&(j=null!==(L=null==v?void 0:v[h-1])&&void 0!==L?L:R.src);const F=Bt(h,null==R?void 0:R.maxSteps),[P,N]=Object(n.useState)(0),D=i.a.createElement(yt,{captionContent:F,imgSrc:j,imgRef:k,maxSteps:null==R?void 0:R.maxSteps,setStepNumber:b,stepNumber:h,isLoading:Boolean(_),label:C,onVisible:e=>N((t=>e?t+1:t-1))});return Object(n.useEffect)((()=>{1===P&&h!==l&&b(l)}),[P,l,h]),i.a.createElement(zt,{onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),ref:x},j||k?i.a.createElement(Pt,{captionContent:F,imageCaption:D,imgSrc:j,imgRef:k,isImagePopoverOpen:f,isStepFailed:"failed"===a,isLoading:Boolean(_),asThumbnail:o,size:c}):o?i.a.createElement(kt,{isLoading:_||!s}):i.a.createElement(dt,{isLoading:_||!s,size:c}))},Bt=(e,t)=>r.i18n.translate("xpack.synthetics.monitor.stepOfSteps",{defaultMessage:"Step: {stepNumber} of {totalSteps}",values:{stepNumber:e,totalSteps:t}});var zt=lt()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-3eft8x-0"})(["figcaption{display:none;}"]);const Ut=({stepIndex:e,step:t})=>{var a;const{checkGroupId:n}=Object(u.useParams)(),s=Object(g.useTheme)();return i.a.createElement($t,{hasShadow:!1,hasBorder:!1,$_css:s.eui.euiColorLightestShade},i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(Gt,null,i.a.createElement(Ht,{key:e,checkGroup:n,initialStepNo:e,stepStatus:null==t||null===(a=t.synthetics.payload)||void 0===a?void 0:a.status,allStepsLoaded:!0,retryFetchOnRevisit:!1,asThumbnail:!1,size:"m"})),i.a.createElement(d.EuiFlexItem,null)))};var $t=lt()(d.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-1issfds-0"})((e=>({backgroundColor:e.$_css}))),Gt=lt()(d.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-1issfds-1"})({alignItems:"flex-start"});const Vt=({stepsData:e,step:t,loading:a})=>{var s;let l=[{id:"code",name:qt},{id:"console",name:Wt}];const r="failed"===(null==t||null===(s=t.synthetics.step)||void 0===s?void 0:s.status);r&&(l=[{id:"stackTrace",name:Kt},...l]);const[o,c]=Object(n.useState)("code");Object(n.useEffect)((()=>{c(r?"stackTrace":"code")}),[r]);const u=Object(n.useCallback)((t=>null==e?void 0:e.steps.filter((e=>{var a,n,i;return"journey/browserconsole"===(null===(a=e.synthetics)||void 0===a?void 0:a.type)&&(null===(n=e.synthetics)||void 0===n||null===(i=n.step)||void 0===i?void 0:i.index)===t})).map((e=>{var t,a;return null===(t=e.synthetics)||void 0===t||null===(a=t.payload)||void 0===a?void 0:a.text}))),[null==e?void 0:e.steps]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTabs,{size:"s"},l.map(((e,t)=>i.a.createElement(d.EuiTab,{key:t,onClick:()=>{return t=e.id,void c(t);var t},isSelected:e.id===o},e.name)))),(()=>{var e,n,s,l,r;if(a)return i.a.createElement(d.EuiLoadingContent,null);switch(o){case"code":return i.a.createElement(d.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"javascript"},null==t||null===(e=t.synthetics)||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.source);case"console":return i.a.createElement(d.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"html"},null==t||null===(s=t.synthetics)||void 0===s||null===(l=s.error)||void 0===l?void 0:l.stack);default:return i.a.createElement(d.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"javascript"},null===(r=u(1))||void 0===r?void 0:r.join("\n"))}})())},qt=r.i18n.translate("xpack.synthetics.testDetails.codeExecuted",{defaultMessage:"Code executed"}),Kt=r.i18n.translate("xpack.synthetics.testDetails.stackTrace",{defaultMessage:"Stacktrace"}),Wt=r.i18n.translate("xpack.synthetics.testDetails.console",{defaultMessage:"Console"});var Yt=a(29),Xt=a(95);function Jt(){return Xt.a.core.uiSettings.get("dateFormat","MMM D, YYYY @ HH:mm:ss.SSS")}const Zt=()=>{var e,t;return!(null===(e=Object(p.useKibana)().services)||void 0===e||null===(t=e.application)||void 0===t||!t.capabilities.uptime.save)};var Qt=a(104),ea=a(66);function ta({configId:e,reloadPage:t,labels:a}){var i;const s=Object(c.useDispatch)(),l=null===(i=Object(c.useSelector)(U.F)[e])||void 0===i?void 0:i.status,[r,o]=Object(n.useState)(null);return Object(n.useEffect)((()=>{l===g.FETCH_STATUS.FAILURE&&o(null)}),[o,l]),{isEnabled:r,updateMonitorEnabledState:Object(n.useCallback)((n=>{s(Object(U.m)({id:e,monitor:{[ea.b.ENABLED]:n},success:{message:n?a.enabledSuccessLabel:a.disabledSuccessLabel,lifetimeMs:3e3,testAttribute:"uptimeMonitorEnabledUpdateSuccess"},error:{message:{title:a.failureLabel},lifetimeMs:1e4,testAttribute:"uptimeMonitorEnabledUpdateFailure"}})),o(n),t&&t()}),[s,e,a.disabledSuccessLabel,a.enabledSuccessLabel,a.failureLabel,o,t]),status:l}}const aa=({configId:e,monitor:t,reloadPage:a,initialLoading:s=!1,isSwitchable:l=!0})=>{const r=!Zt(),o=t[Y.b.NAME],c=Object(n.useMemo)((()=>({failureLabel:Qt.n(o),enabledSuccessLabel:Qt.m(o),disabledSuccessLabel:Qt.l(o)})),[o]),{isEnabled:u,updateMonitorEnabledState:m,status:p}=ta({configId:e,isEnabled:t[Y.b.ENABLED],reloadPage:a,labels:c}),E=null!=u?u:t[Y.b.ENABLED],h=p===g.FETCH_STATUS.LOADING;return i.a.createElement(i.a.Fragment,null,h||s?i.a.createElement(d.EuiLoadingSpinner,{size:"m"}):i.a.createElement(na,{compressed:!0,checked:E,disabled:h||r,showLabel:!1,label:E?Qt.b:Qt.d,title:E?Qt.b:Qt.d,"data-test-subj":"syntheticsIsMonitorEnabled",isSwitchable:l,onChange:e=>{const t=e.target.checked;m(t)}}))},na=Object(E.euiStyled)(d.EuiSwitch)`
  & > button {
    cursor: ${({isSwitchable:e})=>e?void 0:"not-allowed"};
  }
`;var ia=a(103),sa=a(8);function la({configId:e,locationId:t}){var a,i;const[s,l]=Object(n.useState)(void 0),r=null===(a=me())||void 0===a||null===(i=a.share)||void 0===i?void 0:i.url.locators.get(sa.syntheticsMonitorDetailLocatorID);return Object(n.useEffect)((()=>{!async function(){const a=await(null==r?void 0:r.getUrl({configId:e,locationId:t}));l(a)}()}),[r,e,t]),s}const ra=lt.a.div.withConfig({displayName:"Container",componentId:"sc-1fweaiq-0"})([""," border-radius:",";",""],(({position:e})=>"relative"===e?"\n  display: inline-block;\n  position: relative;\n  bottom: 42px;\n  left: 12px;\n  z-index: 1;\n":""),(({theme:e})=>e.eui.euiBorderRadius),(({boxShadow:e,position:t})=>"relative"===t?e:"")),oa=lt()(d.EuiPanel).withConfig({displayName:"CustomShadowPanel",componentId:"sc-1fweaiq-1"})(["",""],(e=>e.shadow));function ca({children:e,hasPanel:t}){const a=Object(d.useEuiShadow)("s");return t?i.a.createElement(oa,{color:"plain",element:"button",grow:!1,paddingSize:"none",hasShadow:!1,shadow:a},e):e}function ua({isPopoverOpen:e,isInspectView:t,setIsPopoverOpen:a,monitor:s,position:l,iconHasPanel:r=!0,iconSize:o="s"}){const u=Object(d.useEuiShadow)("l"),m=Object(c.useDispatch)(),p=K({locationId:s.location.id}),E=la({configId:s.configId,locationId:s.location.id}),h=function({configId:e}){var t,a;const[i,s]=Object(n.useState)(void 0),l=null===(t=me())||void 0===t||null===(a=t.share)||void 0===a?void 0:a.url.locators.get(sa.syntheticsEditMonitorLocatorID);return Object(n.useEffect)((()=>{!async function(){const t=await(null==l?void 0:l.getUrl({configId:e}));s(t)}()}),[l,e]),i}({configId:s.configId}),b=Object(n.useMemo)((()=>({enabledSuccessLabel:ya(s.name),disabledSuccessLabel:va(s.name),failureLabel:Sa(s.name)})),[s.name]),{status:f,isEnabled:y,updateMonitorEnabledState:v}=ta({configId:s.configId,isEnabled:s.isEnabled,labels:b}),[S,x]=Object(n.useState)(s.isEnabled?fa:ba);Object(n.useEffect)((()=>{f===g.FETCH_STATUS.LOADING?x(ha(s.isEnabled)):f===g.FETCH_STATUS.SUCCESS&&(x(y?fa:ba),e&&a(!1))}),[x,f,y,s.isEnabled,e,a]);const T={name:da,icon:"inspect",disabled:!p,onClick:()=>{p&&(m(Object(ia.f)({configId:s.configId,location:p,id:s.id})),a(!1))}};let M=[{name:Ea,icon:"sortRight",href:E},T,{name:ga,icon:"pencil",href:h},{name:S,icon:"invert",onClick:()=>{f!==g.FETCH_STATUS.LOADING&&v(!s.isEnabled)}}];return t&&(M=M.filter((e=>e!==T))),i.a.createElement(ra,{boxShadow:u,position:l},i.a.createElement(d.EuiPopover,{button:i.a.createElement(ca,{hasPanel:r},i.a.createElement(d.EuiButtonIcon,{"aria-label":ma,iconType:"boxesHorizontal",color:"primary",size:o,display:"empty",onClick:()=>a((e=>!e))})),color:"lightestShade",isOpen:e,closePopover:()=>a(!1),anchorPosition:"rightUp",panelPaddingSize:"none"},i.a.createElement(d.EuiContextMenu,{initialPanelId:0,panels:[{id:"0",title:pa,items:M}]})))}const da=r.i18n.translate("xpack.synthetics.overview.actions.quickInspect.title",{defaultMessage:"Quick inspect"}),ma=r.i18n.translate("xpack.synthetics.overview.actions.openPopover.ariaLabel",{defaultMessage:"Open actions menu"}),pa=r.i18n.translate("xpack.synthetics.overview.actions.menu.title",{defaultMessage:"Actions",description:"This is the text in the heading of a menu containing a set of actions"}),Ea=r.i18n.translate("xpack.synthetics.overview.actions.goToMonitor.name",{defaultMessage:"Go to monitor",description:"This is the text for a menu item that will take the user to the monitor detail page"}),ga=r.i18n.translate("xpack.synthetics.overview.actions.editMonitor.name",{defaultMessage:"Edit monitor",description:"This is the text for a menu item that will take the user to the monitor edit page"}),ha=e=>e?r.i18n.translate("xpack.synthetics.overview.actions.disablingLabel",{defaultMessage:"Disabling monitor"}):r.i18n.translate("xpack.synthetics.overview.actions.enablingLabel",{defaultMessage:"Enabling monitor"}),ba=r.i18n.translate("xpack.synthetics.overview.actions.enableLabelEnableMonitor",{defaultMessage:"Enable monitor"}),fa=r.i18n.translate("xpack.synthetics.overview.actions.enableLabelDisableMonitor",{defaultMessage:"Disable monitor"}),ya=e=>r.i18n.translate("xpack.synthetics.overview.actions.enabledSuccessLabel",{defaultMessage:'Monitor "{name}" enabled successfully',values:{name:e}}),va=e=>r.i18n.translate("xpack.synthetics.overview.actions.disabledSuccessLabel",{defaultMessage:'Monitor "{name}" disabled successfully.',values:{name:e}}),Sa=e=>r.i18n.translate("xpack.synthetics.overview.actions.enabledFailLabel",{defaultMessage:'Unable to update monitor "{name}".',values:{name:e}});var xa=a(135);function Ta({id:e,location:t,currentDurationChartFrom:a,currentDurationChartTo:n,previousDurationChartFrom:s,previousDurationChartTo:l}){var r,o;const c=Object(g.useTheme)(),{observability:u}=Object(p.useKibana)().services,{ExploratoryViewEmbeddable:m}=u;return i.a.createElement(d.EuiPageSection,{bottomBorder:"extended"},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,za)),i.a.createElement(m,{customHeight:"200px",reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!0,legendPosition:"bottom",attributes:[{seriesType:"area",color:null==c||null===(r=c.eui)||void 0===r?void 0:r.euiColorVis1,time:{from:null!=a?a:"now-12h",to:null!=n?n:"now"},reportDefinitions:{"monitor.id":[e],"observer.geo.name":[t]},filters:[{field:"observer.geo.name",values:[t]}],dataType:"synthetics",selectedMetricField:"monitor.duration.us",name:Ua,operationType:"average"},{seriesType:"line",color:null==c||null===(o=c.eui)||void 0===o?void 0:o.euiColorVis7,time:{from:null!=s?s:"now-24h",to:null!=l?l:"now-12h"},reportDefinitions:{"monitor.id":[e],"observer.geo.name":[t]},filters:[{field:"observer.geo.name",values:[t]}],dataType:"synthetics",selectedMetricField:"monitor.duration.us",name:$a,operationType:"average"}]}))}function Ma({locations:e,currentLocation:t,configId:a,setCurrentLocation:s,monitor:l,onEnabledChange:r}){var o,c;const[u,m]=Object(n.useState)(!1),p=!(null===(o=e.find((e=>{var a,n;return(null===(a=e.observer)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.name)===t})))||void 0===o||null===(c=o.summary)||void 0===c||!c.down);return i.a.createElement(d.EuiFlexGroup,{wrap:!0,responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiDescriptionList,{compressed:!0},i.a.createElement(d.EuiDescriptionListTitle,null,Ba),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(d.EuiPopover,{button:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiLink,{"aria-label":Ja,onClick:()=>m(!u)},i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},t),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiIcon,{type:"arrowDown",size:"s",color:"inherit"}))))),isOpen:u,closePopover:()=>m(!1),panelPaddingSize:"none"},i.a.createElement(d.EuiContextMenu,{initialPanelId:0,size:"s",panels:[{id:0,title:Xa,items:e.map((e=>{var a,n,l,r,o;return{name:null===(a=e.observer)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.name,icon:i.a.createElement(d.EuiHealth,{color:null!==(l=e.summary)&&void 0!==l&&l.down?"danger":"success"}),disabled:!(null!==(r=e.observer)&&void 0!==r&&null!==(o=r.geo)&&void 0!==o&&o.name)||e.observer.geo.name===t,onClick:()=>{var a,n,i,l;null!==(a=e.observer)&&void 0!==a&&null!==(n=a.geo)&&void 0!==n&&n.name&&t!==e.observer.geo.name&&s(null===(i=e.observer)||void 0===i||null===(l=i.geo)||void 0===l?void 0:l.name)}}}))}]}))))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiDescriptionList,{align:"left",compressed:!0},i.a.createElement(d.EuiDescriptionListTitle,null,Ha),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(d.EuiBadge,{color:p?"danger":"success"},p?Qa:Za)))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiDescriptionList,{align:"left",compressed:!0},i.a.createElement(d.EuiDescriptionListTitle,null,Va),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(aa,{configId:a,monitor:l,reloadPage:r})))))}function Ca(){return i.a.createElement(d.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"100%"}},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLoadingSpinner,{size:"xl"})))}function Oa(e){var t,a,s,l,r,u;const{id:m,configId:p,onLocationChange:E}=e,{data:{monitors:h}}=Object(c.useSelector)(U.H),b=Object(n.useMemo)((()=>{const e=h.filter((({id:e})=>e===m))[0];if(e)return e}),[m,h]),f=Object(n.useCallback)((e=>E({id:m,configId:p,location:e})),[m,p,E]),y=la({configId:m}),{data:v,error:S,status:x}=Object(g.useFetcher)((()=>Object(xa.c)(p)),[p]),[T,M]=Object(n.useState)(!1),C=((e,t)=>{const a={index:o.G,body:{size:1,query:{bool:{filter:[{term:{config_id:e}},{term:{"observer.geo.name":t}},{exists:{field:"summary"}}]}},sort:[{"@timestamp":"desc"}]}},{data:n,loading:i}=Object(g.useEsSearch)(a,[e,t],{name:"getMonitorStatusByLocation"});return n&&1===n.hits.hits.length?{data:{...n.hits.hits[0]._source,timestamp:n.hits.hits[0]._source["@timestamp"]},loading:i}:{data:void 0,loading:i}})(p,e.location),O=null!==(t=null===(a=W(p).locations)||void 0===a?void 0:a.filter((e=>{var t,a;return!(null==e||null===(t=e.observer)||void 0===t||null===(a=t.geo)||void 0===a||!a.name)})))&&void 0!==t?t:[],k=Object(d.useIsWithinMaxBreakpoint)("xl");return i.a.createElement(d.EuiFlyout,{size:"600px",type:k?"overlay":"push",onClose:e.onClose,paddingSize:"none"},x===g.FETCH_STATUS.FAILURE&&i.a.createElement(d.EuiErrorBoundary,null,null==S?void 0:S.message),x===g.FETCH_STATUS.LOADING&&i.a.createElement(Ca,null),x===g.FETCH_STATUS.SUCCESS&&v&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(d.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"l"},i.a.createElement(d.EuiFlexGroup,{responsive:!1,gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",null,null==v?void 0:v.attributes[ea.b.NAME]))),i.a.createElement(d.EuiFlexItem,{grow:!1},b&&i.a.createElement(ua,{isPopoverOpen:T,isInspectView:!0,monitor:b,setIsPopoverOpen:M,position:"default",iconHasPanel:!1,iconSize:"xs"}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Ma,{currentLocation:e.location,locations:O,setCurrentLocation:f,configId:p,monitor:v.attributes,onEnabledChange:e.onEnabledChange}))),i.a.createElement(d.EuiFlyoutBody,null,i.a.createElement(Ta,he()({},e,{location:e.location})),i.a.createElement(d.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"l"},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Ga)),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiDescriptionList,{align:"left",type:"column",compressed:!0,listItems:[null!==(s=C.data)&&void 0!==s&&null!==(l=s.url)&&void 0!==l&&l.full?{title:La,description:i.a.createElement(d.EuiLink,{external:!0,href:C.data.url.full},C.data.url.full)}:void 0,{title:Aa,description:null!==(r=C.data)&&void 0!==r&&r.timestamp?i.a.createElement(Ia,{timestamp:C.data.timestamp}):i.a.createElement(d.EuiText,{color:"subdued"},"--")},{title:Da,description:i.a.createElement(Ia,{timestamp:v.updated_at})},null!=v&&v.attributes[ea.b.PROJECT_ID]?{title:qa,description:(null==v?void 0:v.attributes[ea.b.PROJECT_ID])||""}:void 0,{title:Ka,description:e.id},{title:Na,description:Object(Yt.capitalize)(null==v?void 0:v.attributes[ea.b.FORM_MONITOR_TYPE])},{title:Pa,description:ka(null==v?void 0:v.attributes[ea.b.SCHEDULE])},null!=v&&v.attributes[ea.b.TAGS]&&null!=v&&v.attributes[ea.b.TAGS].length?{title:Fa,description:i.a.createElement(d.EuiBadgeGroup,null,null==v||null===(u=v.attributes[ea.b.TAGS])||void 0===u?void 0:u.map((e=>i.a.createElement(d.EuiBadge,{key:`${e}-tag`,color:"hollow"},e))))}:void 0].filter((e=>!!e))}))),i.a.createElement(d.EuiFlyoutFooter,null,i.a.createElement(d.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"l",color:"transparent"},i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:e.onClose},Wa)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{isDisabled:!y,href:y,iconType:"sortRight",iconSide:"right",fill:!0},Ya)))))))}function ka(e){return t=`${e.number} ${function(e,t){switch(e){case"s":return wa(t);case"m":return Ra(t);case"h":return _a(t);case"d":return ja(t);default:return e}}(e.unit,parseInt(e.number,10))}`,r.i18n.translate("xpack.synthetics.monitorList.flyout.unitStr",{defaultMessage:"Every {unitMsg}",values:{unitMsg:t},description:'This displays a message like "Every 10 minutes" or "Every 30 seconds"'});var t}const Ia=({timestamp:e})=>{const t=Jt();return e?i.a.createElement("time",{dateTime:e},tt()(e).format(t)):null},wa=e=>r.i18n.translate("xpack.synthetics.monitorDetail.seconds",{defaultMessage:"{n, plural, one {second} other {seconds}}",values:{n:e}}),Ra=e=>r.i18n.translate("xpack.synthetics.monitorDetail.minutes",{defaultMessage:"{n, plural, one {minute} other {minutes}}",values:{n:e}}),_a=e=>r.i18n.translate("xpack.synthetics.monitorDetail.hours",{defaultMessage:"{n, plural, one {hour} other {hours}}",values:{n:e}}),ja=e=>r.i18n.translate("xpack.synthetics.monitorDetail.days",{defaultMessage:"{n, plural, one {day} other {days}}",values:{n:e}}),La=r.i18n.translate("xpack.synthetics.monitorList.urlHeaderText",{defaultMessage:"URL"}),Fa=r.i18n.translate("xpack.synthetics.monitorList.tagsHeaderText",{defaultMessage:"Tags"}),Pa=r.i18n.translate("xpack.synthetics.monitorList.frequencyHeaderText",{defaultMessage:"Frequency"}),Na=r.i18n.translate("xpack.synthetics.monitorList.monitorType",{defaultMessage:"Monitor type"}),Da=r.i18n.translate("xpack.synthetics.monitorList.lastModified",{defaultMessage:"Last modified"}),Aa=r.i18n.translate("xpack.synthetics.monitorList.lastRunHeaderText",{defaultMessage:"Last run"}),Ha=r.i18n.translate("xpack.synthetics.monitorList.statusColumnName",{defaultMessage:"Status"}),Ba=r.i18n.translate("xpack.synthetics.monitorList.locationColumnName",{defaultMessage:"Location"}),za=r.i18n.translate("xpack.synthetics.monitorList.durationHeaderText",{defaultMessage:"Duration"}),Ua=r.i18n.translate("xpack.synthetics.monitorList.durationChart.durationSeriesName",{defaultMessage:"Duration"}),$a=r.i18n.translate("xpack.synthetics.monitorList.durationChart.previousPeriodSeriesName",{defaultMessage:"Previous period"}),Ga=r.i18n.translate("xpack.synthetics.monitorList.monitorDetailsHeaderText",{defaultMessage:"Monitor Details"}),Va=r.i18n.translate("xpack.synthetics.monitorList.enabledItemText",{defaultMessage:"Enabled"}),qa=r.i18n.translate("xpack.synthetics.monitorList.projectIdHeaderText",{defaultMessage:"Project ID"}),Ka=r.i18n.translate("xpack.synthetics.monitorList.monitorIdItemText",{defaultMessage:"Monitor ID"}),Wa=r.i18n.translate("xpack.synthetics.monitorList.closeFlyoutText",{defaultMessage:"Close"}),Ya=r.i18n.translate("xpack.synthetics.monitorList.goToMonitorLinkText",{defaultMessage:"Go to monitor"}),Xa=r.i18n.translate("xpack.synthetics.monitorList.flyoutHeader.goToLocations",{defaultMessage:"Go to location"}),Ja=r.i18n.translate("xpack.synthetics.monitorList.flyout.locationSelect.iconButton.label",{defaultMessage:"This button opens a context menu that will allow you to change the monitor's selected location. If you change the location, the flyout will display metrics for the monitor's performance in that location."}),Za=r.i18n.translate("xpack.synthetics.monitorList.flyout.monitorStatus.up",{defaultMessage:"Up",description:'"Up" in the sense that a process is running and available.'}),Qa=r.i18n.translate("xpack.synthetics.monitorList.flyout.monitorStatus.down",{defaultMessage:"Down",description:'"Down" in the sense that a process is not running or available.'}),en=()=>{const{monitorId:e}=Object(u.useParams)(),t=Object(c.useSelector)(U.z),{loading:a}=Object(c.useSelector)(U.D),i=Object(n.useMemo)((()=>{var a;return null!==(a=t.find((t=>t[Y.b.CONFIG_ID]===e)))&&void 0!==a?a:null}),[e,t]),{lastRefresh:s,refreshInterval:l}=y(),{syntheticsMonitor:r,syntheticsMonitorLoading:o,syntheticsMonitorDispatchedAt:d}=Object(c.useSelector)(U.O),m=Object(c.useDispatch)(),p=e&&i&&i[Y.b.CONFIG_ID]===e,E=e&&r&&r[Y.b.CONFIG_ID]===e?r:p?i:null;return Object(n.useEffect)((()=>{!e||E||o||m(U.p.get({monitorId:e}))}),[m,e,E,o]),Object(n.useEffect)((()=>{!o&&!a&&Date.now()-d>l&&m(U.p.get({monitorId:e}))}),[m,s,l,e,a,o,d]),{monitor:E,loading:o||a}},tn=({tags:e})=>i.a.createElement(d.EuiBadgeGroup,null,e.map((e=>i.a.createElement(d.EuiBadge,{color:"hollow"},e)))),an=()=>{const{locations:e,loading:t}=W(),a=Object(g.useTheme)();return t?i.a.createElement(d.EuiLoadingSpinner,null):i.a.createElement(d.EuiBadgeGroup,null,e.map((e=>{var t,n;return i.a.createElement(d.EuiBadge,{iconType:()=>{var t,n;return i.a.createElement(d.EuiIcon,{size:"s",type:"dot",color:(null!==(t=null===(n=e.summary)||void 0===n?void 0:n.down)&&void 0!==t?t:0)>0?a.eui.euiColorVis9:a.eui.euiColorVis0})},color:"hollow"},null===(t=e.observer)||void 0===t||null===(n=t.geo)||void 0===n?void 0:n.name)})))},nn=()=>{const[e,t]=H(),{locations:a}=G(),i=Object(c.useSelector)(U.L),s=Object(c.useDispatch)(),{locationId:l}=e();return Object(n.useEffect)((()=>{if(!l){var e;const n=null==a||null===(e=a[0])||void 0===e?void 0:e.id;n&&t({locationId:n},!0)}l&&i!==l&&s(Object(U.Q)(l))}),[s,t,a,l,i]),Object(n.useMemo)((()=>{var e;return null!==(e=a.find((e=>e.id===l)))&&void 0!==e?e:null}),[l,a])},sn=e=>{var t,a,i,s;const l=Object(c.useDispatch)(),{monitor:r}=en(),o=nn(),u=null!==(t=null==e?void 0:e.monitorId)&&void 0!==t?t:null==r?void 0:r.id,d=null!==(a=null==e?void 0:e.locationLabel)&&void 0!==a?a:null==o?void 0:o.label,{data:m,loading:p}=Object(c.useSelector)(U.C),E=null==m?void 0:m.monitor.id,g=E===u||E===(null==r?void 0:r[Y.b.CUSTOM_HEARTBEAT_ID]),h=(null==m||null===(i=m.observer)||void 0===i||null===(s=i.geo)||void 0===s?void 0:s.name)===d,b=g&&h;return Object(n.useEffect)((()=>{u&&d&&!b&&l(U.q.get({monitorId:u,locationId:d}))}),[l,u,d,b]),u&&d&&m&&g&&h?{loading:p,latestPing:m}:{loading:p,latestPing:void 0}},ln=()=>{var e,t;const{euiTheme:a}=Object(d.useEuiTheme)(),{latestPing:n}=sn(),{monitorId:s}=Object(u.useParams)(),l=Object(c.useDispatch)(),{monitor:r,loading:o}=en();if(n&&(null==n?void 0:n.config_id)!==s||r&&r[Y.b.CONFIG_ID]!==s)return i.a.createElement(d.EuiLoadingContent,{lines:6});const m=rt.css`
    .euiDescriptionList.euiDescriptionList--column > *,
    .euiDescriptionList.euiDescriptionList--responsiveColumn > * {
      margin-top: ${a.size.s};
    }
  `;return i.a.createElement(d.EuiPanel,{hasShadow:!1,hasBorder:!0,paddingSize:"m"},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,pn)),i.a.createElement(En,{$_css:m},i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiDescriptionList,{type:"column",compressed:!0},i.a.createElement(d.EuiDescriptionListTitle,null,dn),i.a.createElement(d.EuiDescriptionListDescription,null,r&&i.a.createElement(aa,{initialLoading:o,configId:s,monitor:r,reloadPage:()=>{l(U.p.get({monitorId:s}))}})),i.a.createElement(d.EuiDescriptionListTitle,null,mn),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(d.EuiBadge,null,Object(Yt.capitalize)(null==r?void 0:r.type))),i.a.createElement(d.EuiDescriptionListTitle,null,rn),i.a.createElement(d.EuiDescriptionListDescription,null,r&&ka(r[Y.b.SCHEDULE])),i.a.createElement(d.EuiDescriptionListTitle,null,on),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(an,null)),i.a.createElement(d.EuiDescriptionListTitle,null,cn),i.a.createElement(d.EuiDescriptionListDescription,{style:{wordBreak:"break-all"}},i.a.createElement(d.EuiLink,{href:null==n||null===(e=n.url)||void 0===e?void 0:e.full,external:!0},null==n||null===(t=n.url)||void 0===t?void 0:t.full)),i.a.createElement(d.EuiDescriptionListTitle,null,un),i.a.createElement(d.EuiDescriptionListDescription,null,r&&i.a.createElement(tn,{tags:r[Y.b.TAGS]})))))},rn=r.i18n.translate("xpack.synthetics.management.monitorList.frequency",{defaultMessage:"Frequency"}),on=r.i18n.translate("xpack.synthetics.management.monitorList.locations",{defaultMessage:"Locations"}),cn=r.i18n.translate("xpack.synthetics.management.monitorList.url",{defaultMessage:"URL"}),un=r.i18n.translate("xpack.synthetics.management.monitorList.tags",{defaultMessage:"Tags"}),dn=r.i18n.translate("xpack.synthetics.detailsPanel.monitorDetails.enabled",{defaultMessage:"Enabled"}),mn=r.i18n.translate("xpack.synthetics.detailsPanel.monitorDetails.monitorType",{defaultMessage:"Monitor type"}),pn=r.i18n.translate("xpack.synthetics.detailsPanel.monitorDetails",{defaultMessage:"Monitor details"});var En=lt()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-g1yacn-0"})(["",""],(e=>e.$_css));const gn=({status:e})=>i.a.createElement(d.EuiBadge,{color:bn(e)},"succeeded"===e?yn:"failed"===e?vn:Sn),hn=e=>{switch(e){case"succeeded":case"success":case"up":return"succeeded";case"fail":case"failed":case"down":return"failed";default:return"skipped"}},bn=e=>"succeeded"===e?"success":"failed"===e?"danger":"default",fn=e=>"skipped"===e?"disabledText":"text",yn=r.i18n.translate("xpack.synthetics.monitorStatus.complete",{defaultMessage:"Complete"}),vn=r.i18n.translate("xpack.synthetics.monitorStatus.failed",{defaultMessage:"Failed"}),Sn=r.i18n.translate("xpack.synthetics.monitorStatus.skipped",{defaultMessage:"Skipped"}),xn=(e=0,t=!1)=>{const a=t?e/1e3:e/1e6;return a>=60?`${(a/60).toFixed(1)} min`:a>=1?`${a.toFixed(1)} s`:t?`${e.toFixed(0)} ms`:`${(e/1e3).toFixed(0)} ms`};function Tn(e,t){return tt()(e).format(t)}const Mn=({step:e})=>{var t,a,s;const{euiTheme:l}=Object(d.useEuiTheme)(),r=Object(n.useMemo)((()=>{var t,a,n,i;const s=hn(null!==(t=null===(a=e.synthetics.step)||void 0===a?void 0:a.status)&&void 0!==t?t:""),r=l.colors[fn(s)];return"skipped"===s?{text:"-",color:r}:{text:xn(null===(n=e.synthetics.step)||void 0===n||null===(i=n.duration)||void 0===i?void 0:i.us),color:r}}),[l.colors,null===(t=e.synthetics.step)||void 0===t||null===(a=t.duration)||void 0===a?void 0:a.us,null===(s=e.synthetics.step)||void 0===s?void 0:s.status]);return i.a.createElement(d.EuiText,{size:"s",color:r.color},r.text)};function Cn(e){var t;return"step/end"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)}const On=({steps:e,error:t,loading:a,showStepNumber:n=!1,compressed:s=!0})=>{const{euiTheme:l}=Object(d.useEuiTheme)(),o=e.filter(Cn),c=o.map((e=>{var t,a,n;return null!==(t=null==e||null===(a=e.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.name)&&void 0!==t?t:""})),{basePath:u}=ne(),m=[...n?[{field:"synthetics.step.index",name:"#",render:(e,t)=>i.a.createElement(kn,{stepIndex:e,step:t,euiTheme:l})}]:[],{align:"left",field:"timestamp",name:wn,render:(e,t)=>{var a,n,s;return i.a.createElement(Ht,{checkGroup:t.monitor.check_group,initialStepNo:null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index,stepStatus:null===(s=t.synthetics.payload)||void 0===s?void 0:s.status,allStepsLoaded:!0,stepLabels:c,retryFetchOnRevisit:!1})},mobileOptions:{render:e=>{var t,a,n,s;return i.a.createElement(d.EuiText,null,i.a.createElement("strong",null,null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index,". ",null===(n=e.synthetics)||void 0===n||null===(s=n.step)||void 0===s?void 0:s.name))},header:wn,enlarge:!0}},{field:"synthetics.step.name",name:Rn,render:(e,t)=>{var a,n;const s=hn(null!==(a=null===(n=t.synthetics.step)||void 0===n?void 0:n.status)&&void 0!==a?a:""),r=l.colors[fn(s)];return i.a.createElement(d.EuiText,{color:r,size:"m"},e)}},{field:"synthetics.step.status",name:In,render:e=>i.a.createElement(gn,{status:hn(e)})},{align:"left",name:_n,render:e=>i.a.createElement(Mn,{step:e}),mobileOptions:{header:_n,show:!0}},{align:"right",field:"timestamp",name:"",mobileOptions:{show:!1},render:(e,t)=>{var a,n;return i.a.createElement(d.EuiButtonIcon,{"aria-label":jn,title:jn,size:"s",href:`${u}/app/synthetics/journey/${t.monitor.check_group}/step/${null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index}`,target:"_self",iconType:"apmTrace"})}}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBasicTable,{compressed:s,loading:a,columns:m,error:null==t?void 0:t.message,isExpandable:!0,hasActions:!0,items:o,noItemsMessage:a?r.i18n.translate("xpack.synthetics.monitor.step.loading",{defaultMessage:"Loading steps..."}):r.i18n.translate("xpack.synthetics.monitor.step.noDataFound",{defaultMessage:"No data found"}),tableLayout:"auto"}))},kn=({stepIndex:e,step:t,euiTheme:a})=>{var n,s,l;const r=hn(null!==(n=null===(s=t.synthetics)||void 0===s||null===(l=s.step)||void 0===l?void 0:l.status)&&void 0!==n?n:"");return i.a.createElement(Ln,{size:"s",color:a.colors[fn(r)],$_css:a.font.weight.bold},e)},In=r.i18n.translate("xpack.synthetics.monitor.result.label",{defaultMessage:"Result"}),wn=r.i18n.translate("xpack.synthetics.monitor.screenshot.label",{defaultMessage:"Screenshot"}),Rn=r.i18n.translate("xpack.synthetics.monitor.stepName.label",{defaultMessage:"Step name"}),_n=r.i18n.translate("xpack.synthetics.monitor.step.duration.label",{defaultMessage:"Duration"}),jn=r.i18n.translate("xpack.synthetics.monitor.step.viewDetails",{defaultMessage:"View Details"});var Ln=lt()(d.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-1pk2009-0"})((e=>({fontWeight:e.$_css})));const Fn=(e,t)=>{var a,n;const{stepIndex:i}=Object(u.useParams)(),{checkGroupId:s}=Object(u.useParams)(),l=null!=e?e:s,{data:r,loading:o}=Object(g.useFetcher)((()=>l?Object(U.g)({checkGroup:l}):Promise.resolve(null)),[l,t]),c=null!==(a=null==r?void 0:r.steps.some((e=>{var t,a,n,i;return"failed"===(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.status)||"skipped"===(null===(n=e.synthetics)||void 0===n||null===(i=n.step)||void 0===i?void 0:i.status)})))&&void 0!==a&&a,d=(null!==(n=null==r?void 0:r.steps)&&void 0!==n?n:[]).filter(Cn),m=d.map((e=>{var t,a,n;return null!==(t=null==e||null===(a=e.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.name)&&void 0!==t?t:""}));return{data:r,loading:null!=o&&o,isFailed:c,stepEnds:d,stepLabels:m,currentStep:i?null==r?void 0:r.steps.find((e=>{var t,a;return(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index)===Number(i)})):void 0}},Pn=()=>{const{monitor:e}=en();return null==e?void 0:e[Y.b.MONITOR_QUERY_ID]},Nn=({legendPosition:e})=>{const{observability:t}=Object(p.useKibana)().services,a=x({from:"now-24h/h",to:"now"}),{ExploratoryViewEmbeddable:n}=t,{monitor:s}=en(),l=Pn(),r=nn(),o="browser"===(null==s?void 0:s.type);return r&&l?i.a.createElement(d.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,o?Dn:An))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{size:"s",color:"subdued"},Hn))),i.a.createElement(n,{axisTitlesVisibility:{yLeft:!1,yRight:!1,x:!1},customHeight:"300px",reportType:g.ReportTypes.KPI,legendPosition:e,attributes:[{time:a,name:Dn,reportDefinitions:{"monitor.id":[l],"observer.geo.name":[null==r?void 0:r.label]},selectedMetricField:o?"synthetics.step.duration.us":"monitor.duration.us",dataType:"synthetics",breakdown:o?"synthetics.step.name.keyword":"observer.geo.name",operationType:"last_value",seriesType:"area_stacked"}]})):null},Dn=r.i18n.translate("xpack.synthetics.detailsPanel.durationByStep",{defaultMessage:"Duration by step"}),An=r.i18n.translate("xpack.synthetics.detailsPanel.durationByLocation",{defaultMessage:"Duration by location"}),Hn=r.i18n.translate("xpack.synthetics.detailsPanel.last24Hours",{defaultMessage:"Last 24 hours"}),Bn=({isLoading:e,steps:t})=>{const a=t.filter(Cn).reduce(((e,t)=>{var a,n,i;return e+(null!==(a=null===(n=t.synthetics)||void 0===n||null===(i=n.step)||void 0===i?void 0:i.duration.us)&&void 0!==a?a:0)}),0);return i.a.createElement(d.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h2",null,zn))),i.a.createElement(d.EuiFlexItem,{grow:!1},Un,xn(a))),i.a.createElement(On,{steps:t,loading:e,showStepNumber:!0,compressed:!1}))},zn=r.i18n.translate("xpack.synthetics.testDetails.stepExecuted",{defaultMessage:"Steps executed"}),Un=r.i18n.translate("xpack.synthetics.testDetails.totalDuration",{defaultMessage:"Total duration: "}),$n=r.i18n.translate("xpack.synthetics.monitorsPage.monitorsMCrumb",{defaultMessage:"Monitors"}),Gn=()=>{var e,t;const[a,n]=i.a.useState(1),{data:s,loading:l,stepEnds:r}=Fn();(e=>{var t,a,n,i;const s=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(B.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",{monitor:l}=en();z([{text:$n,href:`${s}${o.q}`},{text:null!==(n=null==l?void 0:l.name)&&void 0!==n?n:"",href:`${s}${o.w.replace(":monitorId",null!==(i=null==l?void 0:l[Y.b.CONFIG_ID])&&void 0!==i?i:"")}`},...null!=e?e:[]])})([{text:s?tt()(null===(e=s.details)||void 0===e?void 0:e.timestamp).format("LLL"):""}]);const c=r.find((e=>{var t,n;return(null===(t=e.synthetics)||void 0===t||null===(n=t.step)||void 0===n?void 0:n.index)===a})),u=l?1:r.length;return i.a.createElement(d.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(d.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.synthetics.testDetail.totalSteps",defaultMessage:"Step {stepIndex} of {totalSteps}",values:{stepIndex:a,totalSteps:u}})))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(at,{stepIndex:a,totalSteps:u,handleNextStep:()=>{n(a+1)},handlePreviousStep:()=>{n(a-1)}}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Ut,{stepIndex:a,step:c}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Vt,{stepsData:s,step:c,loading:l})),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Bn,{isLoading:l,steps:null!==(t=null==s?void 0:s.steps)&&void 0!==t?t:[]})),i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(Nn,{legendPosition:"bottom"}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(ln,null)))};function Vn(){return i.a.createElement("div",null,"TODO: ",i.a.createElement(d.EuiLoadingLogo,{logo:"logoObservability",size:"xl"}))}const qn=()=>{var e,t;const{checkGroupId:a,stepIndex:n}=Object(u.useParams)(),{data:s}=Fn(a),l=null==s?void 0:s.steps.find((e=>{var t;return(null===(t=e.synthetics.step)||void 0===t?void 0:t.index)===Number(n)}));return i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,{grow:!0},null==l||null===(e=l.synthetics)||void 0===e||null===(t=e.step)||void 0===t?void 0:t.name))},Kn=({children:e})=>{const{isAllowed:t,signupUrl:a,loading:s}=(()=>{const e=Object(c.useDispatch)();return Object(n.useEffect)((()=>{}),[e]),{isAllowed:!0,signupUrl:"https://example.com",loading:!1}})();return s?i.a.createElement(d.EuiEmptyPrompt,{icon:i.a.createElement(d.EuiLoadingLogo,{logo:"logoKibana",size:"xl"}),title:i.a.createElement("h2",null,Xn)}):!1===t?i.a.createElement(d.EuiEmptyPrompt,{title:i.a.createElement("h2",null,Yn),body:i.a.createElement("p",null,Jn),actions:[i.a.createElement(d.EuiButton,{color:"primary",fill:!0,isDisabled:!a,href:null!=a?a:void 0},Wn)]}):i.a.createElement(i.a.Fragment,null,e)},Wn=r.i18n.translate("xpack.synthetics.monitorManagement.requestAccess",{defaultMessage:"Request access"}),Yn=r.i18n.translate("xpack.synthetics.monitorManagement.label",{defaultMessage:"Monitor Management"}),Xn=r.i18n.translate("xpack.synthetics.monitorManagement.loading.label",{defaultMessage:"Loading Monitor Management"}),Jn=r.i18n.translate("xpack.synthetics.monitorManagement.publicBetaDescription",{defaultMessage:"We've got a brand new app on the way. In the meantime, we're excited to give you early access to our globally managed testing infrastructure. This will allow you to upload synthetic monitors using our new point and click script recorder and manage your monitors with a new UI."}),Zn=()=>{const e=Object(u.useRouteMatch)({path:o.s});return(null==e?void 0:e.isExact)||!1},Qn=()=>{const{services:e}=Object(p.useKibana)(),{data:t,loading:a,error:n}=Object(g.useFetcher)((()=>{var t;return null===(t=e.spaces)||void 0===t?void 0:t.getActiveSpace()}),[e.spaces]);return{space:t,loading:a,error:n}};var ei=a(72),ti=(a(91),a(35)),ai=a(209),ni=a(15),ii=a(102);const si=({search:e=""})=>{const[t,a]=Object(n.useState)([]),{monitorId:i}=Object(u.useParams)(),{savedObjects:s}=Object(p.useKibana)().services,{data:l}=Object(g.useFetcher)((()=>{const e={monitorNames:{terms:{field:`${ii.b}.attributes.name.keyword`,size:1e4}}};return null==s?void 0:s.client.find({type:ii.b,perPage:0,aggs:e})}),[]);Object(n.useEffect)((()=>{if(null!=l&&l.aggregations){var t;const n=null===(t=l.aggregations)||void 0===t?void 0:t.monitorNames.buckets.map((({key:e})=>e.toLowerCase()));i&&n.includes(e.toLowerCase())?a(n.filter((t=>t!==e.toLowerCase()))):a(n)}}),[l,i]);const r=Boolean(e&&t&&t.length>0&&(null==t?void 0:t.includes(e.trim().toLowerCase())));return{nameAlreadyExists:r,validName:r?"":e}},li=({id:e,value:t,label:a,icon:n,onChange:s,name:l,isSelected:r,"data-test-subj":o})=>i.a.createElement(d.EuiKeyPadMenuItem,{checkable:"single",label:a,id:e,value:t,onChange:s,name:l,isSelected:r,"data-test-subj":o},i.a.createElement(d.EuiIcon,{type:n}));var ri=lt()(d.EuiKeyPadMenu).withConfig({displayName:"_StyledEuiKeyPadMenu",componentId:"sc-yr2c61-0"})({width:"100%"}),oi=a(70),ci=a(64);const ui=lt()(d.EuiFormFieldset).withConfig({displayName:"StyledFieldset",componentId:"sc-butblz-0"})(["&&&{legend{width:calc(100% - 52px);margin-right:40px;}.euiFlexGroup{margin-left:0;}.euiFlexItem{margin-left:0;padding-left:12px;}}"]),di=lt()(d.EuiFieldText).withConfig({displayName:"StyledField",componentId:"sc-butblz-1"})(["text-align:left;"]),mi=({addPairControlLabel:e,defaultPairs:t,onChange:a,onBlur:s,"data-test-subj":l})=>{const[o,c]=Object(n.useState)(t),u=Object(n.useCallback)(((e,t,a)=>{const n=e.target.value;c((e=>{const i=[...e],[s,l]=e[t];return i[t]=a?[n,l]:[s,n],i}))}),[c]),m=Object(n.useCallback)((()=>{c((e=>[["",""],...e]))}),[c]),p=Object(n.useCallback)((e=>{c((t=>{const a=[...t];return a.splice(e,1),[...a]}))}),[c]);return Object(n.useEffect)((()=>{a(o)}),[a,o]),i.a.createElement("div",{"data-test-subj":l},i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiFlexGroup,{justifyContent:"flexEnd"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{iconType:"plus",onClick:m,"data-test-subj":`${l}__button`},e))),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(ui,{legend:o.length?{children:i.a.createElement(d.EuiFlexGroup,{responsive:!1},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.keyValuePairsField.key.label",defaultMessage:"Key"})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.keyValuePairsField.value.label",defaultMessage:"Value"})))}:void 0},o.map(((e,t)=>{const[a,l]=e;return i.a.createElement(n.Fragment,{key:t},i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(d.EuiFormControlLayoutDelimited,{fullWidth:!0,append:i.a.createElement(d.EuiFormLabel,null,i.a.createElement(d.EuiButtonIcon,{iconType:"trash","aria-label":r.i18n.translate("xpack.synthetics.keyValuePairsField.deleteItem.label",{defaultMessage:"Delete item number {index}, {key}:{value}",values:{index:t+1,key:a,value:l}}),onClick:()=>p(t)})),startControl:i.a.createElement(di,{"aria-label":r.i18n.translate("xpack.synthetics.keyValuePairsField.key.ariaLabel",{defaultMessage:"Key"}),"data-test-subj":`keyValuePairsKey${t}`,value:a,onChange:e=>u(e,t,!0),onBlur:()=>null==s?void 0:s()}),endControl:i.a.createElement(di,{"aria-label":r.i18n.translate("xpack.synthetics.keyValuePairsField.value.ariaLabel",{defaultMessage:"Value"}),"data-test-subj":`keyValuePairsValue${t}`,value:l,onChange:e=>u(e,t,!1),onBlur:()=>null==s?void 0:s()}),delimiter:":"}),i.a.createElement(d.EuiSpacer,{size:"xs"}))}))))},pi=({contentMode:e,defaultValue:t,onChange:a,onBlur:s,"data-test-subj":l})=>{const r=[...Object.keys(t).filter((e=>"Content-Type"!==e)).map((e=>[e||"",t[e]||""]))],[o,c]=Object(n.useState)(r);return Object(n.useEffect)((()=>{const t=o.reduce(((e,t)=>{const[a,n]=t;return a?{...e,[a]:n}:e}),{});a(e?{"Content-Type":Ei[e],...t}:t)}),[e,o,a]),i.a.createElement(mi,{addPairControlLabel:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.headerField.addHeader.label",defaultMessage:"Add header"}),defaultPairs:o,onChange:c,onBlur:()=>null==s?void 0:s(),"data-test-subj":l})},Ei={[ea.i.JSON]:ea.c.JSON,[ea.i.PLAINTEXT]:ea.c.TEXT,[ea.i.XML]:ea.c.XML,[ea.i.FORM]:ea.c.FORM},gi=lt()(d.EuiPanel).withConfig({displayName:"CodeEditorContainer",componentId:"sc-i9zn40-0"})(["padding:0;"]),hi=({ariaLabel:e,id:t,languageId:a,onChange:n,value:s,placeholder:l})=>i.a.createElement(gi,{borderRadius:"none",hasShadow:!1,hasBorder:!0},i.a.createElement(bi,{id:`${t}-editor`,"aria-label":e,"data-test-subj":"codeEditorContainer"},i.a.createElement(p.CodeEditor,{languageId:a,width:"100%",height:"250px",value:s,onChange:n,options:{renderValidationDecorations:s?"on":"off"},isCopyable:!0,allowFullScreen:!0,placeholder:l}))),bi=E.euiStyled.div`
  & > .kibanaCodeEditor {
    z-index: 0;
  }
`;var fi;!function(e){e.CODE="code",e.FORM="form"}(fi||(fi={}));const yi={[ea.i.FORM]:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.form",{defaultMessage:"Form"}),[ea.i.PLAINTEXT]:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.text",{defaultMessage:"Text"}),[ea.i.JSON]:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.JSON",{defaultMessage:"JSON"}),[ea.i.XML]:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.XML",{defaultMessage:"XML"})},vi=[{value:ea.o.ALWAYS,text:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.responseBodyIndex.always",{defaultMessage:"Always"})},{value:ea.o.ON_ERROR,text:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.responseBodyIndex.onError",{defaultMessage:"On error"})}],Si=({onChange:e,onBlur:t,selectedOptions:a,...s})=>{const[l,r]=Object(n.useState)(a.map((e=>({label:e,key:e})))),[o,c]=Object(n.useState)(!1),u=Object(n.useCallback)((t=>{r(t);const a=t.map((e=>e.label));e(a),c(!1)}),[e,r,c]),m=Object(n.useCallback)((t=>{const n=t.trim(),i={label:n};e([...a,n]),r([...l,i])}),[e,l,a,r]),p=Object(n.useCallback)((e=>{c(!!e&&!xi(e))}),[c]);return i.a.createElement(d.EuiComboBox,he()({"data-test-subj":"syntheticsFleetComboBox",noSuggestions:!0,selectedOptions:l,onCreateOption:m,onChange:u,onBlur:()=>null==t?void 0:t(),onSearchChange:p,isInvalid:o},s))},xi=e=>null!==e.match(/\S+/);function Ti({onUpload:e}){const t=Object(n.useRef)(null),[a,s]=Object(n.useState)(null),l=Object(n.useRef)(null);return i.a.createElement(d.EuiFormRow,{isInvalid:Boolean(a),error:a,"aria-label":Mi,fullWidth:!0},i.a.createElement(d.EuiFilePicker,{id:"syntheticsFleetScriptRecorderUploader","data-test-subj":"syntheticsFleetScriptRecorderUploader",ref:l,initialPromptText:Ci,onChange:a=>{if(a&&a.length){var n;if(a.length&&!a[0].type.includes("javascript"))return s(Oi),void(null===(n=l.current)||void 0===n||n.removeFiles());t.current=new FileReader,t.current.onloadend=()=>(a=>{var n;const i=null==t||null===(n=t.current)||void 0===n?void 0:n.result;var r;if("step"!==(null==i?void 0:i.trim().slice(0,4)))return s(ki),void(null===(r=l.current)||void 0===r||r.removeFiles());e({scriptText:i,fileName:a}),s(null)})(a[0].name),t.current.readAsText(a[0])}else e({scriptText:"",fileName:""})},display:"large",fullWidth:!0}))}const Mi=r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.uploader.fieldLabel",{defaultMessage:"Testing script"}),Ci=r.i18n.translate("xpack.synthetics.monitorConfig.uploader.label",{defaultMessage:"Select or drag and drop a .js file"}),Oi=r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.uploader.invalidFileError",{defaultMessage:"Invalid file type. Please upload a .js file generated by the Elastic Synthetics Recorder."}),ki=r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.uploader.parsingError",{defaultMessage:"Error uploading file. Please upload a .js file generated by the Elastic Synthetics Recorder in inline script format."});function Ii({onChange:e,script:t,fileName:a,isEditable:s}){const[l,r]=Object(n.useState)(!1),o=Object(n.useCallback)((({scriptText:t,fileName:a})=>{e({scriptText:t,fileName:a})}),[e]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),s&&t?i.a.createElement(d.EuiFormRow,{"aria-label":"Testing script",fullWidth:!0},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("strong",null,a))):i.a.createElement(Ti,{onUpload:o}),t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{onClick:()=>r(!0),iconType:"editorCodeBlock",iconSide:"right"},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.zipUrl.showScriptLabel",defaultMessage:"Show script"}))),i.a.createElement(d.EuiFlexItem,{grow:!1},s&&i.a.createElement(d.EuiButton,{onClick:()=>e({scriptText:"",fileName:""}),iconType:"trash",iconSide:"right",color:"danger"},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.zipUrl.removeScriptLabel",defaultMessage:"Remove script"}))))),l&&i.a.createElement(d.EuiFlyout,{ownFocus:!0,onClose:()=>r(!1),"aria-labelledby":"syntheticsBrowserScriptBlockHeader",closeButtonAriaLabel:Ri},i.a.createElement(d.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"m"},i.a.createElement("span",{id:"syntheticsBrowserScriptBlockHeader"},a||wi))),i.a.createElement("div",{style:{height:"100%"}},i.a.createElement(d.EuiCodeBlock,{language:"js",overflowHeight:"100%",fontSize:"m",isCopyable:!0},t))))}const wi=r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.scriptRecorder.mockFileName",{defaultMessage:"test_script.js"}),Ri=r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.scriptRecorder.closeButtonLabel",{defaultMessage:"Close script flyout"});var _i;!function(e){e.INLINE="syntheticsBrowserInlineConfig",e.SCRIPT_RECORDER="syntheticsBrowserScriptRecorderConfig",e.ZIP="syntheticsBrowserZipURLConfig"}(_i||(_i={}));const ji=lt()(d.EuiFlexItem).withConfig({displayName:"StyledBetaBadgeWrapper",componentId:"sc-kvlqxc-0"})([".euiToolTipAnchor{display:flex;}"]);var Li=a(137);const Fi=(e="default")=>{const t=Object(Li.a)(e);return{[ea.f.MULTISTEP]:{...ci.d[ea.e.BROWSER],"source.inline":{type:"recorder",script:"",fileName:""},[ea.b.FORM_MONITOR_TYPE]:ea.f.MULTISTEP,[ea.b.NAMESPACE]:t},[ea.f.SINGLE]:{...ci.d[ea.e.BROWSER],[ea.b.FORM_MONITOR_TYPE]:ea.f.SINGLE,[ea.b.NAMESPACE]:t},[ea.f.HTTP]:{...ci.d[ea.e.HTTP],isTLSEnabled:!1,[ea.b.FORM_MONITOR_TYPE]:ea.f.HTTP,[ea.b.NAMESPACE]:t},[ea.f.TCP]:{...ci.d[ea.e.TCP],isTLSEnabled:!1,[ea.b.FORM_MONITOR_TYPE]:ea.f.TCP,[ea.b.NAMESPACE]:t},[ea.f.ICMP]:{...ci.d[ea.e.ICMP],[ea.b.FORM_MONITOR_TYPE]:ea.f.ICMP,[ea.b.NAMESPACE]:t}}},Pi=e=>{var t,a,n,i;if(!e)return;let s=e[ea.b.FORM_MONITOR_TYPE];const l=e[ea.b.MONITOR_TYPE],r={...e};switch(s||(s=l===ea.e.BROWSER?ea.f.MULTISTEP:l,r[ea.b.FORM_MONITOR_TYPE]=s),s){case ea.f.MULTISTEP:const s=e;return{...r,"source.inline":{type:null!==(t=s[ea.b.METADATA])&&void 0!==t&&null!==(a=t.script_source)&&void 0!==a&&a.is_generated_script?"recorder":"inline",script:s[ea.b.SOURCE_INLINE],fileName:null===(n=s[ea.b.METADATA])||void 0===n||null===(i=n.script_source)||void 0===i?void 0:i.file_name}};case ea.f.SINGLE:case ea.f.ICMP:return{...r};case ea.f.HTTP:case ea.f.TCP:return{...r,isTLSEnabled:Ni(e)}}},Ni=e=>{const t=Object.keys(e).filter((e=>e.includes("ssl"))),a={};return t.map((t=>a[t]=e[t])),!Object(Yt.isEqual)(a,ci.k)},Di=/^[0-9]*$/g,Ai=/[^\:]+:[0-9]{1,5}$/g,Hi=/^[0-9]+(.?[0]+)?$/,Bi=/^[0-9]+(.?[0-9]+)?$/;function zi(e){return Object.keys(e).some((e=>!!e&&/[\s]/g.test(e)))}const Ui={[ea.b.SCHEDULE]:({[ea.b.SCHEDULE]:e})=>{const{number:t,unit:a}=e,n=parseFloat(t);return!n||!a||n<1},[ea.b.TIMEOUT]:({[ea.b.MONITOR_TYPE]:e,[ea.b.TIMEOUT]:t,[ea.b.SCHEDULE]:a})=>{const{number:n,unit:i}=a;return e!==ea.e.BROWSER&&(!t||parseFloat(t)<0||(({scheduleNumber:e,scheduleUnit:t,timeout:a})=>{let n;switch(t){case ea.p.SECONDS:n=parseFloat(e);break;case ea.p.MINUTES:n=60*parseFloat(e);break;default:n=parseFloat(e)}return parseFloat(a)>n})({timeout:t,scheduleNumber:n,scheduleUnit:i}))}},$i={[ea.b.RESPONSE_STATUS_CHECK]:({[ea.b.RESPONSE_STATUS_CHECK]:e})=>{const t=e;return!!t.length&&t.some((e=>!`${e}`.match(Di)))},[ea.b.RESPONSE_HEADERS_CHECK]:({[ea.b.RESPONSE_HEADERS_CHECK]:e})=>zi(e),[ea.b.REQUEST_HEADERS_CHECK]:({[ea.b.REQUEST_HEADERS_CHECK]:e})=>zi(e),[ea.b.MAX_REDIRECTS]:({[ea.b.MAX_REDIRECTS]:e})=>!!e&&!`${e}`.match(Di)||parseFloat(e)<0,[ea.b.URLS]:({[ea.b.URLS]:e})=>!e,...Ui},Gi={[ea.b.HOSTS]:({[ea.b.HOSTS]:e})=>!e||!`${e}`.match(Ai),...Ui},Vi={[ea.b.HOSTS]:({[ea.b.HOSTS]:e})=>!e,[ea.b.WAIT]:({[ea.b.WAIT]:e})=>!!e&&!Di.test(`${e}`)&&parseFloat(e)<0,...Ui},qi=(e,t)=>{if(void 0===e||""===e)return!1;const a=parseFloat(e);return isNaN(a)||(t?a<0:a<=0)},Ki={...Ui,[ea.b.SOURCE_ZIP_URL]:({[ea.b.SOURCE_ZIP_URL]:e,[ea.b.SOURCE_INLINE]:t})=>!e&&!t,[ea.b.SOURCE_INLINE]:({[ea.b.SOURCE_ZIP_URL]:e,[ea.b.SOURCE_INLINE]:t})=>!e&&!t,[ea.b.DOWNLOAD_SPEED]:({[ea.b.DOWNLOAD_SPEED]:e})=>qi(e),[ea.b.UPLOAD_SPEED]:({[ea.b.UPLOAD_SPEED]:e})=>qi(e),[ea.b.LATENCY]:({[ea.b.LATENCY]:e})=>qi(e,!0),[ea.b.PLAYWRIGHT_OPTIONS]:({[ea.b.PLAYWRIGHT_OPTIONS]:e})=>!!e&&!(e=>{let t;try{if(t=JSON.parse(e),!t||"object"!=typeof t)return!1}catch(e){return!1}return!0})(e)},Wi={[ea.e.HTTP]:$i,[ea.e.TCP]:Gi,[ea.e.ICMP]:Vi,[ea.e.BROWSER]:Ki};var Yi,Xi,Ji;const Zi=e=>e>60?r.i18n.translate("xpack.synthetics.monitorConfig.schedule.label",{defaultMessage:"Every {value, number} {value, plural, one {hour} other {hours}}",values:{value:e/60}}):r.i18n.translate("xpack.synthetics.monitorConfig.schedule.minutes.label",{defaultMessage:"Every {value, number} {value, plural, one {minute} other {minutes}}",values:{value:e}}),Qi=e=>e.map((e=>({value:`${e}`,text:Zi(e)}))),es=Qi([3,5,10,15,30,60,120,240]),ts=Qi([1,3,5,10,15,30,60]),as={[ea.f.MULTISTEP]:{id:"syntheticsMonitorTypeMultistep","data-test-subj":"syntheticsMonitorTypeMultistep",label:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.multiStep.label",{defaultMessage:"Multistep"}),value:ea.f.MULTISTEP,descriptionTitle:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.multiStep.title",{defaultMessage:"Multistep Browser Journey"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.multiStep.description",{defaultMessage:"Navigate through multiple steps or pages to test key user flows from a real browser."}),link:"#",icon:"videoPlayer",beta:!0},[ea.f.SINGLE]:{id:"syntheticsMonitorTypeSingle","data-test-subj":"syntheticsMonitorTypeSingle",label:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.singlePage.label",{defaultMessage:"Single Page"}),value:ea.f.SINGLE,descriptionTitle:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.singlePage.title",{defaultMessage:"Single Page Browser Test"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.singlePage.description",{defaultMessage:"Test a single page load including all objects on the page from a real web browser."}),link:"#",icon:"videoPlayer",beta:!0},[ea.f.HTTP]:{id:"syntheticsMonitorTypeHTTP","data-test-subj":"syntheticsMonitorTypeHTTP",label:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.http.label",{defaultMessage:"HTTP Ping"}),value:ea.f.HTTP,descriptionTitle:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.http.title",{defaultMessage:"HTTP Ping"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.http.description",{defaultMessage:"A lightweight API check to validate the availability of a web service or endpoint."}),link:"#",icon:"online",beta:!1},[ea.f.TCP]:{id:"syntheticsMonitorTypeTCP","data-test-subj":"syntheticsMonitorTypeTCP",label:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.tcp.label",{defaultMessage:"TCP Ping"}),value:ea.f.TCP,descriptionTitle:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.tcp.title",{defaultMessage:"TCP Ping"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.tcp.description",{defaultMessage:"A lightweight API check to validate the availability of a web service or endpoint."}),link:"#",icon:"online",beta:!1},[ea.f.ICMP]:{id:"syntheticsMonitorTypeICMP","data-test-subj":"syntheticsMonitorTypeICMP",label:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.icmp.label",{defaultMessage:"ICMP Ping"}),value:ea.f.ICMP,descriptionTitle:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.icmp.title",{defaultMessage:"ICMP Ping"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.icmp.description",{defaultMessage:"A lightweight API check to validate the availability of a web service or endpoint."}),link:"#",icon:"online",beta:!1}},ns={[ea.b.FORM_MONITOR_TYPE]:{fieldKey:ea.b.FORM_MONITOR_TYPE,required:!0,component:({options:e,value:t,name:a,onChange:n,ariaLegend:s,...l})=>{const o=e.find((e=>e.value===t));return i.a.createElement(i.a.Fragment,null,i.a.createElement(ri,{checkable:{ariaLegend:s}},e.map((e=>i.a.createElement(li,he()({},l,e,{name:a,onChange:n,isSelected:e.value===t,"data-test-subj":e["data-test-subj"]}))))),i.a.createElement(d.EuiSpacer,null),o&&i.a.createElement(d.EuiPanel,{color:"primary"},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("h4",null,o.descriptionTitle)),i.a.createElement(d.EuiText,{size:"s",color:"subdued"},i.a.createElement("span",null,`${o.description} `),i.a.createElement(d.EuiLink,{href:o.link,target:"_blank"},r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.learnMoreLink",{defaultMessage:"Learn more"}))),i.a.createElement(d.EuiSpacer,{size:"xs"})))},ariaLabel:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.label",{defaultMessage:"Monitor type"}),controlled:!0,props:({field:e,reset:t,space:a})=>({onChange:(e,n)=>{const i=Fi(a)[n];t(i)},selectedOption:null==e?void 0:e.value,options:Object.values(as)}),validation:()=>({required:!0})},[`${ea.b.URLS}__single`]:{fieldKey:ea.b.URLS,required:!0,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.urlsSingle.label",{defaultMessage:"Website URL"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.urlsSingle.helpText",{defaultMessage:"For example, https://www.elastic.co."}),controlled:!0,dependencies:[ea.b.NAME],props:({setValue:e,dependenciesFieldMeta:t,isEdit:a,formState:n})=>({"data-test-subj":"syntheticsMonitorConfigURL",onChange:i=>{e(ea.b.URLS,i.target.value,{shouldValidate:Boolean(n.submitCount>0)}),t[ea.b.NAME].isDirty||a||e(ea.b.NAME,i.target.value,{shouldValidate:Boolean(n.submitCount>0)})}})},[`${ea.b.URLS}__http`]:{fieldKey:ea.b.URLS,required:!0,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.urls.label",{defaultMessage:"URL"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.urls.helpText",{defaultMessage:"For example, your service endpoint."}),controlled:!0,dependencies:[ea.b.NAME],props:({setValue:e,dependenciesFieldMeta:t,isEdit:a,formState:n})=>({onChange:i=>{e(ea.b.URLS,i.target.value,{shouldValidate:Boolean(n.submitCount>0)}),t[ea.b.NAME].isDirty||a||e(ea.b.NAME,i.target.value,{shouldValidate:Boolean(n.submitCount>0)})},"data-test-subj":"syntheticsMonitorConfigURL"})},[`${ea.b.HOSTS}__tcp`]:{fieldKey:ea.b.HOSTS,required:!0,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.hostsTCP.label",{defaultMessage:"Host:Port"}),controlled:!0,dependencies:[ea.b.NAME],props:({setValue:e,dependenciesFieldMeta:t,isEdit:a,formState:n})=>({onChange:i=>{e(ea.b.HOSTS,i.target.value,{shouldValidate:Boolean(n.submitCount>0)}),t[ea.b.NAME].isDirty||a||e(ea.b.NAME,i.target.value,{shouldValidate:Boolean(n.submitCount>0)})},"data-test-subj":"syntheticsMonitorConfigHost"})},[`${ea.b.HOSTS}__icmp`]:{fieldKey:ea.b.HOSTS,required:!0,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.hostsICMP.label",{defaultMessage:"Host"}),controlled:!0,dependencies:[ea.b.NAME],props:({setValue:e,dependenciesFieldMeta:t,isEdit:a,formState:n})=>({onChange:i=>{e(ea.b.HOSTS,i.target.value,{shouldValidate:Boolean(n.submitCount>0)}),t[ea.b.NAME].isDirty||a||e(ea.b.NAME,i.target.value,{shouldValidate:Boolean(n.submitCount>0)})},"data-test-subj":"syntheticsMonitorConfigHost"})},[ea.b.NAME]:{fieldKey:ea.b.NAME,required:!0,component:d.EuiFieldText,controlled:!0,label:r.i18n.translate("xpack.synthetics.monitorConfig.name.label",{defaultMessage:"Monitor name"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.name.helpText",{defaultMessage:"Choose a name to help identify this monitor in the future."}),dependencies:[ea.b.URLS,ea.b.HOSTS],customHook:e=>({fieldKey:"nameAlreadyExists",func:si,params:{search:e},error:r.i18n.translate("xpack.synthetics.monitorConfig.name.existsError",{defaultMessage:"Monitor name already exists"})}),validation:()=>({validate:{notEmpty:e=>Boolean(e.trim())}}),error:r.i18n.translate("xpack.synthetics.monitorConfig.name.error",{defaultMessage:"Monitor name is required"}),props:()=>({"data-test-subj":"syntheticsMonitorConfigName"})},[ea.b.SCHEDULE]:{fieldKey:`${ea.b.SCHEDULE}.number`,required:!0,component:d.EuiSelect,label:r.i18n.translate("xpack.synthetics.monitorConfig.frequency.label",{defaultMessage:"Frequency"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.frequency.helpText",{defaultMessage:"How often do you want to run this test? Higher frequencies will increase your total cost."}),dependencies:[ea.b.MONITOR_TYPE],props:({dependencies:e})=>{const[t]=e;return{"data-test-subj":"syntheticsMonitorConfigSchedule",options:t===ea.e.BROWSER?es:ts}}},[ea.b.LOCATIONS]:{fieldKey:ea.b.LOCATIONS,required:!0,controlled:!0,component:d.EuiComboBox,label:r.i18n.translate("xpack.synthetics.monitorConfig.locations.label",{defaultMessage:"Locations"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.locations.helpText",{defaultMessage:"Where do you want to run this test from? Additional locations will increase your total cost."}),props:({field:e,setValue:t,locations:a,formState:n})=>({options:Object.values(a).map((e=>{var t;return{label:null==a||null===(t=a.find((t=>e.id===t.id)))||void 0===t?void 0:t.label,id:e.id,key:e.id,isServiceManaged:e.isServiceManaged}})),selectedOptions:Object.values(null==e?void 0:e.value).map((e=>{var t,n;return{color:a.some((t=>t.id===e.id))?"default":"danger",label:null!==(t=null==a||null===(n=a.find((t=>e.id===t.id)))||void 0===n?void 0:n.label)&&void 0!==t?t:e.id,id:e.id,key:e.id,isServiceManaged:e.isServiceManaged}})),"data-test-subj":"syntheticsMonitorConfigLocations",onChange:e=>{t(ea.b.LOCATIONS,e.map((e=>Object(ai.a)(e))),{shouldValidate:Boolean(n.submitCount>0)})}})},[ea.b.ENABLED]:{fieldKey:ea.b.ENABLED,component:d.EuiSwitch,label:r.i18n.translate("xpack.synthetics.monitorConfig.enabled.label",{defaultMessage:"Enable Monitor"}),controlled:!0,props:({isEdit:e,setValue:t})=>({id:"syntheticsMontiorConfigIsEnabled",label:e?r.i18n.translate("xpack.synthetics.monitorConfig.edit.enabled.label",{defaultMessage:"Disabled monitors do not run tests."}):r.i18n.translate("xpack.synthetics.monitorConfig.create.enabled.label",{defaultMessage:"Disabled monitors do not run tests. You can create a disabled monitor and enable it later."}),onChange:e=>{t(ea.b.ENABLED,!!e.target.checked)}})},[ea.b.TAGS]:{fieldKey:ea.b.TAGS,component:Si,label:r.i18n.translate("xpack.synthetics.monitorConfig.tags.label",{defaultMessage:"Tags"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.tags.helpText",{defaultMessage:"A list of tags that will be sent with each monitor event. Useful for searching and segmenting data."}),controlled:!0,props:({field:e})=>({selectedOptions:null==e?void 0:e.value})},[ea.b.TIMEOUT]:{fieldKey:ea.b.TIMEOUT,component:d.EuiFieldNumber,label:r.i18n.translate("xpack.synthetics.monitorConfig.timeout.label",{defaultMessage:"Timeout in seconds"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.timeout.helpText",{defaultMessage:"The total time allowed for testing the connection and exchanging data."}),props:()=>({min:1,step:"any"}),dependencies:[ea.b.SCHEDULE],validation:([e])=>({validate:t=>{switch(!0){case t<0:return r.i18n.translate("xpack.synthetics.monitorConfig.timeout.greaterThan0Error",{defaultMessage:"Timeout must be greater than or equal to 0."});case t>60*parseFloat(e.number):return r.i18n.translate("xpack.synthetics.monitorConfig.timeout.scheduleError",{defaultMessage:"Timemout must be less than the monitor frequency."});case!Boolean(`${t}`.match(Bi)):return r.i18n.translate("xpack.synthetics.monitorConfig.timeout.formatError",{defaultMessage:"Timeout is invalid."});default:return!0}}})},[ea.b.APM_SERVICE_NAME]:{fieldKey:ea.b.APM_SERVICE_NAME,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.apmServiceName.label",{defaultMessage:"APM service name"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.apmServiceName.helpText",{defaultMessage:"Corrseponds to the service.name ECS field from APM. Set this to enable integrations between APM and Synthetics data."}),controlled:!0,props:({field:e})=>({selectedOptions:null==e?void 0:e.value,"data-test-subj":"syntheticsMonitorConfigAPMServiceName"})},[ea.b.NAMESPACE]:{fieldKey:ea.b.NAMESPACE,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.namespace.label",{defaultMessage:"Data stream namespace"}),helpText:i.a.createElement("span",null,r.i18n.translate("xpack.synthetics.monitorConfig.namespace.helpText",{defaultMessage:"Change the default namespace. This setting changes the name of the monitor's data stream. "}),i.a.createElement(d.EuiLink,{href:"#",target:"_blank"},r.i18n.translate("xpack.synthetics.monitorConfig.namespace.learnMore",{defaultMessage:"Learn more"}))),controlled:!0,props:({field:e})=>({selectedOptions:e}),validation:()=>({validate:e=>Object(ti.isValidNamespace)(e).error})},[ea.b.MAX_REDIRECTS]:{fieldKey:ea.b.MAX_REDIRECTS,component:d.EuiFieldNumber,label:r.i18n.translate("xpack.synthetics.monitorConfig.maxRedirects.label",{defaultMessage:"Max redirects"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.maxRedirects.helpText",{defaultMessage:"The total number of redirects to follow."}),props:()=>({min:0,max:10,step:1}),validation:()=>({min:0,pattern:Hi}),error:r.i18n.translate("xpack.synthetics.monitorConfig.maxRedirects.error",{defaultMessage:"Max redirects is invalid."})},[ea.b.WAIT]:{fieldKey:ea.b.WAIT,component:d.EuiFieldNumber,label:r.i18n.translate("xpack.synthetics.monitorConfig.wait.label",{defaultMessage:"Wait"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.wait.helpText",{defaultMessage:"The duration to wait before emitting another ICMP Echo Request if no response is received."}),props:()=>({min:1,step:1}),validation:()=>({min:1,pattern:Hi}),error:r.i18n.translate("xpack.synthetics.monitorConfig.wait.error",{defaultMessage:"Wait duration is invalid."})},[ea.b.USERNAME]:{fieldKey:ea.b.USERNAME,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.username.label",{defaultMessage:"Username"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.username.helpText",{defaultMessage:"Username for authenticating with the server."})},[ea.b.PASSWORD]:{fieldKey:ea.b.PASSWORD,component:d.EuiFieldPassword,label:r.i18n.translate("xpack.synthetics.monitorConfig.password.label",{defaultMessage:"Password"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.password.helpText",{defaultMessage:"Password for authenticating with the server."})},[ea.b.PROXY_URL]:{fieldKey:ea.b.PROXY_URL,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.proxyUrl.label",{defaultMessage:"Proxy URL"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.proxyUrl.helpText",{defaultMessage:"HTTP proxy URL"})},[ea.b.REQUEST_METHOD_CHECK]:{fieldKey:ea.b.REQUEST_METHOD_CHECK,component:d.EuiSelect,label:r.i18n.translate("xpack.synthetics.monitorConfig.requestMethod.label",{defaultMessage:"Request method"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.requestMethod.helpText",{defaultMessage:"The HTTP method to use."}),props:()=>({options:Object.keys(ea.g).map((e=>({value:e,text:e})))})},[ea.b.REQUEST_HEADERS_CHECK]:{fieldKey:ea.b.REQUEST_HEADERS_CHECK,component:pi,label:r.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.label",{defaultMessage:"Request headers"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.helpText",{defaultMessage:"A dictionary of additional HTTP headers to send. By default the client will set the User-Agent header to identify itself."}),controlled:!0,validation:()=>({validate:e=>!zi(e)}),error:r.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.error",{defaultMessage:"Header key must be a valid HTTP token."})},[ea.b.REQUEST_BODY_CHECK]:{fieldKey:ea.b.REQUEST_BODY_CHECK,component:({onChange:e,onBlur:t,value:{type:a,value:s}})=>{const[l,o]=Object(n.useState)({[fi.FORM]:a===ea.i.FORM?s:"",[fi.CODE]:a!==ea.i.FORM?s:""});Object(n.useEffect)((()=>{e({type:a,value:a===ea.i.FORM?l[fi.FORM]:l[fi.CODE]})}),[e,a,l]);const c=Object(n.useCallback)((t=>{e({type:t,value:t===ea.i.FORM?l[fi.FORM]:l[fi.CODE]})}),[e,l]),u=Object(n.useCallback)((e=>{const t=e.reduce(((e,t)=>{const[a,n]=t;return a?{...e,[a]:n}:e}),{});return o((e=>({...e,[ea.i.FORM]:Object(T.stringify)(t)})))}),[o]),m=Object(n.useMemo)((()=>{const e=Object(T.parse)(l[ea.i.FORM]);return Object.keys(e).map((t=>[t,`${e[t]}`]))}),[l]),p=[{id:ea.i.PLAINTEXT,name:yi[ea.i.PLAINTEXT],"data-test-subj":`syntheticsRequestBodyTab__${ea.i.PLAINTEXT}`,content:i.a.createElement(hi,{ariaLabel:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.codeEditor.text.ariaLabel",{defaultMessage:"Text code editor"}),id:ea.i.PLAINTEXT,languageId:ea.j.PLAINTEXT,onChange:e=>{o((t=>({...t,[fi.CODE]:e}))),null==t||t()},value:l[fi.CODE]})},{id:ea.i.JSON,name:yi[ea.i.JSON],"data-test-subj":`syntheticsRequestBodyTab__${ea.i.JSON}`,content:i.a.createElement(hi,{ariaLabel:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.codeEditor.json.ariaLabel",{defaultMessage:"JSON code editor"}),id:ea.i.JSON,languageId:ea.j.JSON,onChange:e=>{o((t=>({...t,[fi.CODE]:e}))),null==t||t()},value:l[fi.CODE]})},{id:ea.i.XML,name:yi[ea.i.XML],"data-test-subj":`syntheticsRequestBodyTab__${ea.i.XML}`,content:i.a.createElement(hi,{ariaLabel:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.codeEditor.xml.ariaLabel",{defaultMessage:"XML code editor"}),id:ea.i.XML,languageId:ea.j.XML,onChange:e=>{o((t=>({...t,[fi.CODE]:e}))),null==t||t()},value:l[fi.CODE]})},{id:ea.i.FORM,name:yi[ea.i.FORM],"data-test-subj":`syntheticsRequestBodyTab__${ea.i.FORM}`,content:i.a.createElement(mi,{addPairControlLabel:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.formField.addFormField.label",defaultMessage:"Add form field"}),defaultPairs:m,onChange:u,onBlur:()=>null==t?void 0:t()})}];return i.a.createElement(d.EuiTabbedContent,{tabs:p,initialSelectedTab:p.find((e=>e.id===a)),autoFocus:"selected",onTabClick:e=>{c(e.id)}})},label:r.i18n.translate("xpack.synthetics.monitorConfig.requestBody.label",{defaultMessage:"Request body"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.requestBody.helpText",{defaultMessage:"Request body content."}),controlled:!0},[ea.b.RESPONSE_HEADERS_INDEX]:{fieldKey:ea.b.RESPONSE_HEADERS_INDEX,component:d.EuiCheckbox,helpText:i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorConfig.indexResponseHeaders.helpText",defaultMessage:"Controls the indexing of the HTTP response headers to "}),i.a.createElement(d.EuiCode,null,"http.response.body.headers")),props:()=>({label:r.i18n.translate("xpack.synthetics.monitorConfig.indexResponseHeaders.label",{defaultMessage:"Index response headers"}),id:"syntheticsMonitorConfigResponseHeadersIndex"}),controlled:!0},[ea.b.RESPONSE_BODY_INDEX]:{fieldKey:ea.b.RESPONSE_BODY_INDEX,component:({defaultValue:e,onChange:t,onBlur:a})=>{const[s,l]=Object(n.useState)(e!==ea.o.NEVER?e:ea.o.ON_ERROR),[o,c]=Object(n.useState)(e!==ea.o.NEVER);return Object(n.useEffect)((()=>{o?(l(s),t(s)):t(ea.o.NEVER)}),[o,s,l,t]),Object(n.useEffect)((()=>{t(s)}),[t,s]),i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{"data-test-subj":"syntheticsIndexResponseBody"},i.a.createElement(d.EuiCheckbox,{id:"uptimeFleetIndexResponseBody",checked:o,label:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.httpAdvancedOptions.responseConfig.indexResponseBody",defaultMessage:"Index response body"}),onChange:e=>{const t=e.target.checked;c(t)},onBlur:()=>null==a?void 0:a()})),o&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiSelect,{"aria-label":r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.httpAdvancedOptions.responseConfig.responseBodyIndexPolicy",{defaultMessage:"Response body index policy"}),"data-test-subj":"indexResponseBodyFieldSelect",options:vi,value:s,onChange:e=>{l(e.target.value)},onBlur:()=>null==a?void 0:a()})))},helpText:i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorConfig.indexResponseBody.helpText",defaultMessage:"Controls the indexing of the HTTP response body contents to"}),i.a.createElement(d.EuiCode,null,"http.response.body.contents")),props:()=>({label:r.i18n.translate("xpack.synthetics.monitorConfig.indexResponseBody.label",{defaultMessage:"Index response body"})}),controlled:!0},[ea.b.RESPONSE_STATUS_CHECK]:{fieldKey:ea.b.RESPONSE_STATUS_CHECK,component:Si,label:r.i18n.translate("xpack.synthetics.monitorConfig.responseStatusCheck.label",{defaultMessage:"Check response status equals"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.responseStatusCheck.helpText",{defaultMessage:"A list of expected status codes. Press enter to add a new code. 4xx and 5xx codes are considered down by default. Other codes are considered up."}),controlled:!0,props:({field:e})=>({selectedOptions:null==e?void 0:e.value}),validation:()=>({validate:e=>{const t=Wi[ea.e.HTTP][ea.b.RESPONSE_STATUS_CHECK];if(t)return!t({[ea.b.RESPONSE_STATUS_CHECK]:e})}}),error:r.i18n.translate("xpack.synthetics.monitorConfig.responseStatusCheck.error",{defaultMessage:"Status code must contain digits only."})},[ea.b.RESPONSE_HEADERS_CHECK]:{fieldKey:ea.b.RESPONSE_HEADERS_CHECK,component:pi,label:r.i18n.translate("xpack.synthetics.monitorConfig.responseHeadersCheck.label",{defaultMessage:"Check response headers contain"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.responseHeadersCheck.helpText",{defaultMessage:"A list of expected response headers."}),controlled:!0,validation:()=>({validate:e=>!zi(e)}),error:r.i18n.translate("xpack.synthetics.monitorConfig.responseHeadersCheck.error",{defaultMessage:"Header key must be a valid HTTP token."})},[ea.b.RESPONSE_BODY_CHECK_POSITIVE]:{fieldKey:ea.b.RESPONSE_BODY_CHECK_POSITIVE,component:Si,label:r.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheck.label",{defaultMessage:"Check response body contains"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheck.helpText",{defaultMessage:"A list of regular expressions to match the body output. Press enter to add a new expression. Only a single expression needs to match."}),controlled:!0,props:({field:e})=>({selectedOptions:null==e?void 0:e.value})},[ea.b.RESPONSE_BODY_CHECK_NEGATIVE]:{fieldKey:ea.b.RESPONSE_BODY_CHECK_NEGATIVE,component:Si,label:r.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheckNegative.label",{defaultMessage:"Check response body does not contain"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheckNegative.helpText",{defaultMessage:"A list of regular expressions to match the the body output negatively. Press enter to add a new expression. Return match failed if single expression matches."}),controlled:!0,props:({field:e})=>({selectedOptions:null==e?void 0:e.value})},[ea.b.RESPONSE_RECEIVE_CHECK]:{fieldKey:ea.b.RESPONSE_RECEIVE_CHECK,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.responseReceiveCheck.label",{defaultMessage:"Check response contains"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.responseReceiveCheck.helpText",{defaultMessage:"The expected remote host response."})},[`${ea.b.PROXY_URL}__tcp`]:{fieldKey:ea.b.PROXY_URL,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.proxyURLTCP.label",{defaultMessage:"Proxy URL"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.proxyURLTCP.helpText",{defaultMessage:"The URL of the SOCKS5 proxy to use when connecting to the server. The value must be a URL with a scheme of socks5://."})},[ea.b.REQUEST_SEND_CHECK]:{fieldKey:ea.b.REQUEST_SEND_CHECK,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.requestSendCheck.label",{defaultMessage:"Request payload"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.requestSendCheck.helpText",{defaultMessage:"A payload string to send to the remote host."})},[ea.b.SOURCE_INLINE]:{fieldKey:"source.inline",required:!0,component:({onChange:e,onBlur:t,value:a,isEditFlow:s=!1})=>{const[l,o]=Object(n.useState)("inline"===a.type?_i.INLINE:_i.SCRIPT_RECORDER),[c,u]=Object(n.useState)(a);Object(n.useEffect)((()=>{e(c)}),[c,e]);const m=[{id:"syntheticsBrowserScriptRecorderConfig",name:i.a.createElement(d.EuiFlexGroup,{responsive:!1,alignItems:"center",gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,{grow:!1},s?i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorConfig.scriptRecorderEdit.label",defaultMessage:"Upload new script"}):i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorConfig.scriptRecorder.label",defaultMessage:"Upload script"})),i.a.createElement(ji,{grow:!1},i.a.createElement(d.EuiBetaBadge,{label:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browser.scriptRecorder.experimentalLabel",{defaultMessage:"Tech preview"}),iconType:"beaker",tooltipContent:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browser.scriptRecorder.experimentalTooltip",{defaultMessage:"Preview the quickest way to create Elastic Synthetics monitoring scripts with our Elastic Synthetics Recorder"})}))),"data-test-subj":"syntheticsSourceTab__scriptRecorder",content:i.a.createElement(Ii,{onChange:({scriptText:e,fileName:t})=>{u((a=>({...a,script:e,type:"recorder",fileName:t})))},script:c.script,isEditable:s,fileName:c.fileName})},{id:"syntheticsBrowserInlineConfig",name:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.addEditMonitor.scriptEditor.label",defaultMessage:"Script editor"}),"data-test-subj":"syntheticsSourceTab__inline",content:i.a.createElement(d.EuiFormRow,{helpText:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.addEditMonitor.scriptEditor.helpText",defaultMessage:"Runs Synthetic test scripts that are defined inline."}),fullWidth:!0},i.a.createElement(hi,{ariaLabel:r.i18n.translate("xpack.synthetics.addEditMonitor.scriptEditor.ariaLabel",{defaultMessage:"JavaScript code editor"}),id:"javascript",languageId:ea.j.JAVASCRIPT,onChange:e=>{u((t=>({...t,script:e}))),t(ea.b.SOURCE_INLINE)},value:c.script,placeholder:r.i18n.translate("xpack.synthetics.addEditMonitor.scriptEditor.placeholder",{defaultMessage:"// Paste your Playwright script here..."})}))}];return s&&m.reverse(),i.a.createElement(d.EuiTabbedContent,{tabs:m,initialSelectedTab:s?m.find((e=>e.id===_i.INLINE)):m.find((e=>e.id===l)),autoFocus:"selected",onTabClick:e=>{e.id!==l&&u({script:"",type:e.id===_i.INLINE?"inline":"recorder",fileName:""}),o(e.id)}})},ariaLabel:r.i18n.translate("xpack.synthetics.monitorConfig.monitorScript.label",{defaultMessage:"Monitor script"}),controlled:!0,props:({isEdit:e})=>({isEditFlow:e}),validation:()=>({validate:e=>Boolean(e.script)}),error:r.i18n.translate("xpack.synthetics.monitorConfig.monitorScript.error",{defaultMessage:"Monitor script is required"})},isTLSEnabled:{fieldKey:"isTLSEnabled",component:d.EuiSwitch,controlled:!0,props:({setValue:e})=>({id:"syntheticsMontiorConfigIsTLSEnabledSwitch",label:r.i18n.translate("xpack.synthetics.monitorConfig.customTLS.label",{defaultMessage:"Use custom TLS configuration"}),onChange:t=>{e("isTLSEnabled",t.target.checked)}})},[ea.b.TLS_VERIFICATION_MODE]:{fieldKey:ea.b.TLS_VERIFICATION_MODE,component:d.EuiSelect,label:r.i18n.translate("xpack.synthetics.monitorConfig.verificationMode.label",{defaultMessage:"Verification mode"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.verificationMode.helpText",{defaultMessage:"Verifies that the provided certificate is signed by a trusted authority (CA) and also verifies that the servers hostname (or IP address) matches the names identified within the certificate. If the Subject Alternative Name is empty, it returns an error."}),showWhen:["isTLSEnabled",!0],props:()=>({options:Object.values(ea.v).map((e=>({value:e,text:e.toUpperCase()})))})},[ea.b.TLS_VERSION]:{fieldKey:ea.b.TLS_VERSION,component:d.EuiComboBox,label:r.i18n.translate("xpack.synthetics.monitorConfig.tlsVersion.label",{defaultMessage:"Supported TLS protocols"}),controlled:!0,showWhen:["isTLSEnabled",!0],props:({field:e,setValue:t})=>({options:Object.values(ea.t).map((e=>({label:e}))),selectedOptions:Object.values(null==e?void 0:e.value).map((e=>({label:e}))),onChange:e=>{t(ea.b.TLS_VERSION,e.map((e=>e.label)))}})},[ea.b.TLS_CERTIFICATE_AUTHORITIES]:{fieldKey:ea.b.TLS_CERTIFICATE_AUTHORITIES,component:d.EuiTextArea,label:r.i18n.translate("xpack.synthetics.monitorConfig.certificateAuthorities.label",{defaultMessage:"Certificate authorities"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.certificateAuthorities.helpText",{defaultMessage:"PEM-formatted custom certificate authorities."}),showWhen:["isTLSEnabled",!0]},[ea.b.TLS_CERTIFICATE]:{fieldKey:ea.b.TLS_CERTIFICATE,component:d.EuiTextArea,label:r.i18n.translate("xpack.synthetics.monitorConfig.clientCertificate.label",{defaultMessage:"Client certificate"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.clientCertificate.helpText",{defaultMessage:"PEM-formatted certificate for TLS client authentication."}),showWhen:["isTLSEnabled",!0]},[ea.b.TLS_KEY]:{fieldKey:ea.b.TLS_KEY,component:d.EuiTextArea,label:r.i18n.translate("xpack.synthetics.monitorConfig.clientKey.label",{defaultMessage:"Client key"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.clientKey.helpText",{defaultMessage:"PEM-formatted certificate key for TLS client authentication."}),showWhen:["isTLSEnabled",!0]},[ea.b.TLS_KEY_PASSPHRASE]:{fieldKey:ea.b.TLS_KEY_PASSPHRASE,component:d.EuiFieldPassword,label:r.i18n.translate("xpack.synthetics.monitorConfig.clientKeyPassphrase.label",{defaultMessage:"Client key passphrase"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.clientKeyPassphrase.helpText",{defaultMessage:"Certificate key passphrase for TLS client authentication."}),showWhen:["isTLSEnabled",!0]},[ea.b.SCREENSHOTS]:{fieldKey:ea.b.SCREENSHOTS,component:d.EuiButtonGroup,label:r.i18n.translate("xpack.synthetics.monitorConfig.screenshotOptions.label",{defaultMessage:"Screenshot options"}),helpText:r.i18n.translate("xpack.synthetics.monitorConfig.screenshotOptions.helpText",{defaultMessage:"Set this option to manage the screenshots captured by the synthetics agent."}),controlled:!0,props:({field:e,setValue:t})=>({type:"single",idSelected:null==e?void 0:e.value,onChange:e=>t(ea.b.SCREENSHOTS,e),options:Object.values(ea.q).map((e=>({id:e,label:e.replace(/-/g," ")}))),css:{"text-transform":"capitalize"}})},[ea.b.TEXT_ASSERTION]:{fieldKey:ea.b.TEXT_ASSERTION,component:d.EuiFieldText,label:r.i18n.translate("xpack.synthetics.monitorConfig.textAssertion.label",{defaultMessage:"Text assertion"}),required:!0,helpText:r.i18n.translate("xpack.synthetics.monitorConfig.textAssertion.helpText",{defaultMessage:"Consider the page loaded when the specified text is rendered."}),validation:()=>({required:!0})},[ea.b.THROTTLING_CONFIG]:{fieldKey:ea.b.THROTTLING_CONFIG,component:d.EuiSuperSelect,label:r.i18n.translate("xpack.synthetics.monitorConfig.throttling.label",{defaultMessage:"Connection profile"}),required:!0,controlled:!0,helpText:r.i18n.translate("xpack.synthetics.monitorConfig.throttling.helpText",{defaultMessage:"Simulate network throttling (download, upload, latency). More options will be added in a future version."}),props:()=>({options:[{value:ci.a[ea.b.THROTTLING_CONFIG],inputDisplay:i.a.createElement(d.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,null,r.i18n.translate("xpack.synthetics.monitorConfig.throttling.options.default",{defaultMessage:"Default"}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"xs",color:"subdued"},"(5 Mbps, 3 Mbps, 20 ms)")))}],disabled:!0}),validation:()=>({required:!0})},[ea.b.PLAYWRIGHT_OPTIONS]:{fieldKey:ea.b.PLAYWRIGHT_OPTIONS,component:e=>i.a.createElement(hi,he()({languageId:ea.j.JSON},e)),label:r.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.label",{defaultMessage:"Playwright options"}),helpText:i.a.createElement("span",null,r.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.helpText",{defaultMessage:"Configure Playwright agent with custom options. "}),i.a.createElement(d.EuiLink,{href:null===(Yi=Object(ni.a)())||void 0===Yi||null===(Xi=Yi.links)||void 0===Xi||null===(Ji=Xi.observability)||void 0===Ji?void 0:Ji.syntheticsCommandReference,target:"_blank"},r.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.learnMore",{defaultMessage:"Learn more"}))),error:r.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.error",{defaultMessage:"Invalid JSON format"}),ariaLabel:r.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.codeEditor.json.ariaLabel",{defaultMessage:"Playwright options JSON code editor"}),controlled:!0,required:!1,props:({field:e,setValue:t})=>({onChange:e=>t(ea.b.PLAYWRIGHT_OPTIONS,e)}),validation:()=>({validate:e=>{const t=Wi[ea.e.BROWSER][ea.b.PLAYWRIGHT_OPTIONS];if(t)return!t({[ea.b.PLAYWRIGHT_OPTIONS]:e})}})}},is={title:r.i18n.translate("xpack.synthetics.monitorConfig.section.dataOptions.title",{defaultMessage:"Data options"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.section.dataOptions.description",{defaultMessage:"Configure data options to add context to the data coming from your monitors."}),components:[ns[ea.b.TAGS],ns[ea.b.APM_SERVICE_NAME],ns[ea.b.NAMESPACE]]},ss={requestConfig:{title:r.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfiguration.title",{defaultMessage:"Request configuration"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfiguration.description",{defaultMessage:"Configure an optional request to send to the remote host including method, body, and headers."}),components:[ns[ea.b.USERNAME],ns[ea.b.PASSWORD],ns[ea.b.PROXY_URL],ns[ea.b.REQUEST_METHOD_CHECK],ns[ea.b.REQUEST_HEADERS_CHECK],ns[ea.b.REQUEST_BODY_CHECK]]},responseConfig:{title:r.i18n.translate("xpack.synthetics.monitorConfig.section.responseConfiguration.title",{defaultMessage:"Response configuration"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.section.responseConfiguration.description",{defaultMessage:"Control the indexing of the HTTP response contents."}),components:[ns[ea.b.RESPONSE_HEADERS_INDEX],ns[ea.b.RESPONSE_BODY_INDEX]]},responseChecks:{title:r.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecks.title",{defaultMessage:"Response checks"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecks.description",{defaultMessage:"Configure the expected HTTP response."}),components:[ns[ea.b.RESPONSE_STATUS_CHECK],ns[ea.b.RESPONSE_HEADERS_CHECK],ns[ea.b.RESPONSE_BODY_CHECK_POSITIVE],ns[ea.b.RESPONSE_BODY_CHECK_NEGATIVE]]}},ls={requestConfig:{title:r.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfigTCP.title",{defaultMessage:"Request configuration"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfigTCP.description",{defaultMessage:"Configure the payload sent to the remote host."}),components:[ns[`${ea.b.PROXY_URL}__tcp`],ns[ea.b.REQUEST_SEND_CHECK]]},responseChecks:{title:r.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecksTCP.title",{defaultMessage:"Response checks"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecksTCP.description",{defaultMessage:"Configure the expected response from the remote host."}),components:[ns[ea.b.RESPONSE_RECEIVE_CHECK]]}},rs=[{title:r.i18n.translate("xpack.synthetics.monitorConfig.section.syntAgentOptions.title",{defaultMessage:"Synthetics agent options"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.section.syntAgentOptions.description",{defaultMessage:"Provide fine-tuned configuration for the synthetics agent."}),components:[ns[`${ea.b.PLAYWRIGHT_OPTIONS}`]]}],os={title:r.i18n.translate("xpack.synthetics.monitorConfig.section.tlsOptions.title",{defaultMessage:"TLS options"}),description:r.i18n.translate("xpack.synthetics.monitorConfig.section.tlsOptions.description",{defaultMessage:"Configure TLS options, including verification mode, certificate authorities, and client certificates."}),components:[ns.isTLSEnabled,ns[ea.b.TLS_VERIFICATION_MODE],ns[ea.b.TLS_VERSION],ns[ea.b.TLS_CERTIFICATE_AUTHORITIES],ns[ea.b.TLS_CERTIFICATE],ns[ea.b.TLS_KEY],ns[ea.b.TLS_KEY_PASSPHRASE]]},cs={[ea.f.HTTP]:{step1:[ns[ea.b.FORM_MONITOR_TYPE]],step2:[ns[`${ea.b.URLS}__http`],ns[ea.b.NAME],ns[ea.b.LOCATIONS],ns[ea.b.SCHEDULE],ns[ea.b.MAX_REDIRECTS],ns[ea.b.TIMEOUT],ns[ea.b.ENABLED]],advanced:[is,ss.requestConfig,ss.responseConfig,ss.responseChecks,os]},[ea.f.TCP]:{step1:[ns[ea.b.FORM_MONITOR_TYPE]],step2:[ns[`${ea.b.HOSTS}__tcp`],ns[ea.b.NAME],ns[ea.b.LOCATIONS],ns[ea.b.SCHEDULE],ns[ea.b.TIMEOUT],ns[ea.b.ENABLED]],advanced:[is,ls.requestConfig,ls.responseChecks,os]},[ea.f.MULTISTEP]:{step1:[ns[ea.b.FORM_MONITOR_TYPE]],step2:[ns[ea.b.NAME],ns[ea.b.LOCATIONS],ns[ea.b.SCHEDULE],ns[ea.b.THROTTLING_CONFIG],ns[ea.b.ENABLED]],step3:[ns[ea.b.SOURCE_INLINE]],scriptEdit:[ns[ea.b.SOURCE_INLINE]],advanced:[{...is,components:[ns[ea.b.TAGS],ns[ea.b.APM_SERVICE_NAME],ns[ea.b.SCREENSHOTS],ns[ea.b.NAMESPACE]]},...rs]},[ea.f.SINGLE]:{step1:[ns[ea.b.FORM_MONITOR_TYPE]],step2:[ns[`${ea.b.URLS}__single`],ns[ea.b.NAME],ns[ea.b.TEXT_ASSERTION],ns[ea.b.LOCATIONS],ns[ea.b.SCHEDULE],ns[ea.b.THROTTLING_CONFIG],ns[ea.b.ENABLED]],advanced:[{...is,components:[ns[ea.b.TAGS],ns[ea.b.APM_SERVICE_NAME],ns[ea.b.SCREENSHOTS],ns[ea.b.NAMESPACE]]},...rs]},[ea.f.ICMP]:{step1:[ns[ea.b.FORM_MONITOR_TYPE]],step2:[ns[`${ea.b.HOSTS}__icmp`],ns[ea.b.NAME],ns[ea.b.LOCATIONS],ns[ea.b.SCHEDULE],ns[ea.b.WAIT],ns[ea.b.TIMEOUT],ns[ea.b.ENABLED]],advanced:[is]}},us=({component:e,props:t,fieldKey:a,shouldUseSetValue:s,field:l,formRowProps:r,fieldState:o,customHook:u,error:m,dependenciesValues:p,dependenciesFieldMeta:E})=>{var g,h,b,f,y;const{setValue:v,reset:S,formState:x,setError:T,clearErrors:M}=Object(ei.useFormContext)();let C,O=()=>{};const{locations:k}=Object(c.useSelector)(U.M),{space:I}=Qn(),w=Zn();u&&(C=u(l.value),O=C.func);const{[null===(g=C)||void 0===g?void 0:g.fieldKey]:R}=O(null===(h=C)||void 0===h?void 0:h.params)||{},_=s?((e,t)=>a=>{t(e,a)})(a,v):l.onChange,j=t?t({field:l,setValue:v,reset:S,locations:k,dependencies:p,dependenciesFieldMeta:E,space:null==I?void 0:I.id,isEdit:w,formState:x}):{},L=R||Boolean(o.error),F=null===(b=C)||void 0===b?void 0:b.error,P=R?null===(f=C)||void 0===f?void 0:f.error:void 0;return Object(n.useEffect)((()=>{var e;u&&(R&&!o.error?T(a,{type:"custom",message:F}):R||(null===(e=o.error)||void 0===e?void 0:e.message)!==F||M(a))}),[T,a,M,o,u,R,F]),i.a.createElement(d.EuiFormRow,he()({},r,{isInvalid:L,error:L?P||(null===(y=o.error)||void 0===y?void 0:y.message)||m:void 0}),i.a.createElement(e,he()({},l,{checked:l.value,defaultValue:l.value,onChange:_},j,{isInvalid:L,fullWidth:!0})))},ds=Object(n.memo)((({component:e,helpText:t,label:a,ariaLabel:s,props:l,fieldKey:r,controlled:o,showWhen:u,shouldUseSetValue:m,required:p,validation:E,error:g,fieldError:h,dependencies:b,customHook:f})=>{const{register:y,watch:v,control:S,setValue:x,reset:T,getFieldState:M,formState:C}=Object(ei.useFormContext)(),{locations:O}=Object(c.useSelector)(U.M),{space:k}=Qn(),I=Zn(),[w,R]=Object(n.useState)({});let _=!0,j=[];if(u){const[e,t]=u,[a]=v([e]);_=a===t}if(b&&(j=v(b)),Object(n.useEffect)((()=>{b&&b.forEach((e=>{R((t=>({...t,[e]:M(e)})))}))}),[JSON.stringify(j||[]),b,M]),!_)return null;const L={label:a,"aria-label":s,helpText:t,fullWidth:!0};return o?i.a.createElement(ei.Controller,{control:S,name:r,rules:{required:p,...E?E(j):{}},render:({field:t,fieldState:a})=>i.a.createElement(us,{field:t,component:e,props:l,shouldUseSetValue:m,fieldKey:r,customHook:f,formRowProps:L,fieldState:a,error:g,dependenciesValues:j,dependenciesFieldMeta:w})}):i.a.createElement(d.EuiFormRow,he()({},L,{isInvalid:Boolean(h),error:(null==h?void 0:h.message)||g}),i.a.createElement(e,he()({},y(r,{required:p,...E?E(j):{}}),l?l({field:void 0,formState:C,setValue:x,reset:T,locations:O,dependencies:j,dependenciesFieldMeta:w,space:null==k?void 0:k.id,isEdit:I}):{},{isInvalid:Boolean(h),fullWidth:!0})))})),ms=()=>{var e,t;const{watch:a,formState:{errors:n}}=Object(ei.useFormContext)(),[s]=a([ea.b.FORM_MONITOR_TYPE]);return null!==(e=cs[s])&&void 0!==e&&e.advanced?i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiAccordion,{id:"syntheticsAdvancedPanel",buttonContent:r.i18n.translate("xpack.synthetics.monitorConfig.advancedOptions.title",{defaultMessage:"Advanced options"})},i.a.createElement(d.EuiSpacer,null),null===(t=cs[s].advanced)||void 0===t?void 0:t.map((e=>i.a.createElement(d.EuiDescribedFormGroup,{description:e.description,title:i.a.createElement("h4",null,e.title),fullWidth:!0,key:e.title},e.components.map((e=>i.a.createElement(ds,he()({},e,{key:e.fieldKey,fieldError:n[e.fieldKey]}))))))))):null},ps=Object(be.c)(),Es=Object(be.c)(),gs=({monitorType:e})=>{const t=as[e];return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiText,{color:"subdued",size:"s"},r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.label",{defaultMessage:"Monitor type"})),i.a.createElement(d.EuiText,{size:"s"},i.a.createElement(d.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement("strong",null,t.descriptionTitle)),i.a.createElement(d.EuiFlexItem,{grow:!1},t.beta&&i.a.createElement(d.EuiBetaBadge,{label:"Beta",tooltipContent:r.i18n.translate("xpack.synthetics.monitorConfig.monitorType.betaLabel",{defaultMessage:"This functionality is in beta and is subject to change. The design and code is less mature than official generally available features and is being provided as-is with no warranties. Beta features are not subject to the support service level agreement of official generally available features."})})))))},hs=({monitorType:e})=>i.a.createElement(be.a,{node:ps},i.a.createElement(gs,{monitorType:e})),bs=({stepMap:e,isEditFlow:t=!1})=>{const{watch:a}=Object(ei.useFormContext)(),[n]=a([ea.b.FORM_MONITOR_TYPE]),s=e[n];return i.a.createElement(i.a.Fragment,null,t?s.map((e=>i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("h2",null,e.title)),i.a.createElement(d.EuiSpacer,{size:"xs"}),e.children),i.a.createElement(d.EuiSpacer,{size:"m"})))):i.a.createElement(d.EuiSteps,{steps:s,headingElement:"h2"}),i.a.createElement(ms,null),i.a.createElement(hs,{monitorType:n}))};var fs=a(164);const ys=e=>{const t={};return Object.keys(ci.k).map((a=>{t[a]=e[a]})),!Object(Yt.isEqual)(t,ci.k)},vs=async({id:e})=>await Ue.a.get(`${o.a.SYNTHETICS_MONITORS}/${e}`),Ss=()=>{var e,t,a;const{monitorId:s}=Object(u.useParams)(),l=Object(u.useHistory)(),r=Object(u.useRouteMatch)({path:o.s}),c=null==r?void 0:r.isExact,{handleSubmit:m,formState:{errors:p}}=Object(ei.useFormContext)(),[E,h]=Object(n.useState)(!1),[b,f]=Object(n.useState)(void 0),{data:y}=Object(g.useFetcher)((()=>{if(c)return vs({id:s})}),[]),{data:v,status:S}=Object(g.useFetcher)((()=>b?c?(async({monitor:e,id:t})=>await Ue.a.put(`${o.a.SYNTHETICS_MONITORS}/${t}`,e))({id:s,monitor:b}):(async({monitor:e})=>await Ue.a.post(o.a.SYNTHETICS_MONITORS,e))({monitor:b}):null),[b]),x=S===g.FETCH_STATUS.LOADING;return Object(n.useEffect)((()=>{S===g.FETCH_STATUS.FAILURE?Xt.a.toasts.addDanger({title:Is,toastLifeTimeMs:3e3}):S!==g.FETCH_STATUS.SUCCESS||x||Xt.a.toasts.addSuccess({title:s?ks:Os,toastLifeTimeMs:3e3})}),[v,S,s,x]),S===g.FETCH_STATUS.SUCCESS?i.a.createElement(u.Redirect,{to:o.q}):i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!0},c&&i.a.createElement("div",null,i.a.createElement(d.EuiButton,{color:"danger",onClick:()=>{h(!0)}},Ms))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLink,{href:l.createHref({pathname:o.q})},xs)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{fill:!0,isLoading:x,iconType:"plusInCircleFilled",onClick:m((e=>{Object.keys(p).length||f((e=>{const t=(e=>{const t=e[ea.b.MONITOR_TYPE],a={},n=ci.d[t];return Object.keys(n).map((t=>{var i;a[t]=null!==(i=Object(Yt.get)(e,t.split(".")))&&void 0!==i?i:n[t]})),a})(e);return{[ea.f.SINGLE]:{...t,[ea.b.SOURCE_INLINE]:`step('Go to ${t[ea.b.URLS]}', async () => {\n          await page.goto('${t[ea.b.URLS]}');\n          expect(await page.isVisible('text=${t[ea.b.TEXT_ASSERTION]}')).toBeTruthy();\n        });`,[ea.b.FORM_MONITOR_TYPE]:ea.f.SINGLE},[ea.f.MULTISTEP]:{...t,[ea.b.METADATA]:{script_source:{is_generated_script:"recorder"===Object(Yt.get)(e,"source.inline.type"),file_name:Object(Yt.get)(e,"source.inline.fileName")}},[ea.b.FORM_MONITOR_TYPE]:ea.f.MULTISTEP},[ea.f.HTTP]:{...t,[ea.b.METADATA]:{is_tls_enabled:ys(t)},[ea.b.FORM_MONITOR_TYPE]:ea.f.HTTP},[ea.f.TCP]:{...t,[ea.b.METADATA]:{is_tls_enabled:ys(t)},[ea.b.FORM_MONITOR_TYPE]:ea.f.TCP},[ea.f.ICMP]:{...t,[ea.b.FORM_MONITOR_TYPE]:ea.f.ICMP}}[e[ea.b.FORM_MONITOR_TYPE]]})(e))})),"data-test-subj":"syntheticsMonitorConfigSubmitButton"},c?Cs:Ts))),E&&i.a.createElement(fs.a,{configId:s,name:null!==(e=null==y||null===(t=y.attributes)||void 0===t?void 0:t[ea.b.NAME])&&void 0!==e?e:"",reloadPage:()=>{l.push(o.q)},isProjectMonitor:(null==y||null===(a=y.attributes)||void 0===a?void 0:a[ea.b.MONITOR_SOURCE_TYPE])===ea.s.PROJECT,setIsDeleteModalVisible:h}))},xs=r.i18n.translate("xpack.synthetics.monitorManagement.discardLabel",{defaultMessage:"Cancel"}),Ts=r.i18n.translate("xpack.synthetics.monitorManagement.addEdit.createMonitorLabel",{defaultMessage:"Create monitor"}),Ms=r.i18n.translate("xpack.synthetics.monitorManagement.addEdit.deleteMonitorLabel",{defaultMessage:"Delete monitor"}),Cs=r.i18n.translate("xpack.synthetics.monitorManagement.updateMonitorLabel",{defaultMessage:"Update monitor"}),Os=r.i18n.translate("xpack.synthetics.monitorManagement.monitorAddedSuccessMessage",{defaultMessage:"Monitor added successfully."}),ks=r.i18n.translate("xpack.synthetics.monitorManagement.monitorEditedSuccessMessage",{defaultMessage:"Monitor updated successfully."}),Is=r.i18n.translate("xpack.synthetics.monitorManagement.monitorFailureMessage",{defaultMessage:"Monitor was unable to be saved. Please try again later."}),ws=()=>{const{watch:e}=Object(ei.useFormContext)(),[t]=e([ea.b.LOCATIONS]);return t.find((e=>!0===e.isServiceManaged))?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"l"}),i.a.createElement(d.EuiText,{size:"xs",color:"subdued"},i.a.createElement("p",null,r.i18n.translate("xpack.synthetics.monitorConfig.locations.disclaimer",{defaultMessage:"You consent to the transfer of testing instructions and the output of such instructions (including any data shown therein) to your selected testing location, on infrastructure provided by a cloud service provider chosen by Elastic."})))):null},Rs=({children:e,defaultValues:t,space:a})=>{const s=function(e){const{register:t,...a}=Object(ei.useForm)(e);return{register:Object(n.useCallback)(((e,...a)=>{const{ref:n,...i}=t(e,...a);return{inputRef:n,ref:n,...i}}),[t]),...a}}({mode:"onSubmit",reValidateMode:"onChange",defaultValues:Pi(t)||Fi(a)[ea.f.MULTISTEP],shouldFocusError:!1}),{formState:{isSubmitted:l,errors:r,dirtyFields:o}}=s;return i.a.createElement(ei.FormProvider,s,i.a.createElement(d.EuiForm,{isInvalid:Boolean(l&&Object.keys(r).length),component:"form",noValidate:!0},e,i.a.createElement(d.EuiSpacer,null),i.a.createElement(Ss,null)),i.a.createElement(ws,null))},_s=({description:e,children:t})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,null,e)),i.a.createElement(d.EuiFlexItem,null,t)),js=({description:e,stepKey:t})=>{var a;const{watch:n,formState:{errors:s}}=Object(ei.useFormContext)(),[l]=n([ea.b.FORM_MONITOR_TYPE]);return i.a.createElement(_s,{description:e},null===(a=cs[l][t])||void 0===a?void 0:a.map((e=>i.a.createElement(ds,he()({},e,{key:e.fieldKey,fieldError:s[e.fieldKey]})))))},Ls={title:r.i18n.translate("xpack.synthetics.monitorConfig.monitorTypeStep.title",{defaultMessage:"Select a monitor type"}),children:i.a.createElement(js,{description:i.a.createElement("p",null,r.i18n.translate("xpack.synthetics.monitorConfig.monitorTypeStep.description",{defaultMessage:"Choose a monitor that best fits your use case"})),stepKey:"step1"})},Fs={title:r.i18n.translate("xpack.synthetics.monitorConfig.monitorDetailsStep.title",{defaultMessage:"Monitor details"}),children:i.a.createElement(js,{description:i.a.createElement("p",null,r.i18n.translate("xpack.synthetics.monitorConfig.monitorDetailsStep.description",{defaultMessage:"Provide some details about how your monitor should run"})),stepKey:"step2"})},Ps=i.a.createElement(d.EuiFlexGroup,{justifyContent:"flexStart"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{href:"elastic-synthetics-recorder://",iconType:"popout",iconSide:"right"},r.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptStep.scriptRecorder.launch",{defaultMessage:"Launch Synthetics Recorder"}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{href:"https://github.com/elastic/synthetics-recorder/releases/",iconType:"download"},r.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptStep.scriptRecorder.download",{defaultMessage:"Download Synthetics Recorder"})))),Ns={title:r.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptStep.title",{defaultMessage:"Add a script"}),children:i.a.createElement(js,{description:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptStep.description",defaultMessage:"Use Elastic Synthetics Recorder to generate a script and then upload it. Alternatively, you can write your own {playwright} script and paste it in the script editor.",values:{playwright:i.a.createElement(d.EuiLink,{href:"https://playwright.dev/",target:"_blank",external:!0},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptStep.playwrightLink",defaultMessage:"Playwright"}))}})),Ps),stepKey:"step3"})},Ds={title:r.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptEditStep.title",{defaultMessage:"Monitor script"}),children:i.a.createElement(js,{description:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptEditStep.description",defaultMessage:"Use Elastic Synthetics Recorder to generate and upload a script. Alternatively, you can edit the existing {playwright} script (or paste a new one) in the script editor.",values:{playwright:i.a.createElement(d.EuiLink,{href:"https://playwright.dev/",target:"_blank",external:!0},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptEditStep.playwrightLink",defaultMessage:"Playwright"}))}})),Ps),stepKey:"scriptEdit"})},As={[ea.f.MULTISTEP]:[Ls,Fs,Ns],[ea.f.SINGLE]:[Ls,Fs],[ea.f.HTTP]:[Ls,Fs],[ea.f.ICMP]:[Ls,Fs],[ea.f.TCP]:[Ls,Fs]},Hs={[ea.f.MULTISTEP]:[Ds,Fs],[ea.f.SINGLE]:[Fs],[ea.f.HTTP]:[Fs],[ea.f.ICMP]:[Fs],[ea.f.TCP]:[Fs]},Bs=e=>{var t,a;const n=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(B.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",i=e?{text:Us,href:`${n}/${o.s}`}:{text:zs,href:`${n}/${o.r}`};z([i])},zs=r.i18n.translate("xpack.synthetics.monitorManagement.addMonitorCrumb",{defaultMessage:"Add monitor"}),Us=r.i18n.translate("xpack.synthetics.monitorManagement.editMonitorCrumb",{defaultMessage:"Edit monitor"}),$s=()=>{Object(g.useTrackPageview)({app:"synthetics",path:"add-monitor"});const{space:e,loading:t,error:a}=Qn();Object(g.useTrackPageview)({app:"synthetics",path:"add-monitor",delay:15e3}),Bs();const s=Object(c.useDispatch)();return Object(n.useEffect)((()=>{s(Object(U.t)())}),[s]),t||a?i.a.createElement(d.EuiLoadingSpinner,null):i.a.createElement(Rs,{space:null==e?void 0:e.id},i.a.createElement(bs,{stepMap:As}))},Gs=i.a.memo((()=>i.a.createElement(Kn,null,i.a.createElement($s,null)))),Vs=({name:e,configId:t})=>i.a.createElement(be.a,{node:Es},i.a.createElement(qs,{name:e,configId:t})),qs=({name:e,configId:t})=>{const a=Object(u.useHistory)().createHref({pathname:`monitor/${t}`});return i.a.createElement(d.EuiLink,{href:a},i.a.createElement(d.EuiIcon,{type:"arrowLeft"})," ",e)},Ks=()=>{Object(g.useTrackPageview)({app:"synthetics",path:"edit-monitor"}),Object(g.useTrackPageview)({app:"synthetics",path:"edit-monitor",delay:15e3});const{monitorId:e}=Object(u.useParams)();Bs(!0);const t=Object(c.useDispatch)();Object(n.useEffect)((()=>{t(Object(U.t)())}),[t]);const{data:a,loading:s,error:l}=Object(g.useFetcher)((()=>vs({id:e})),[]);return!a||s||l?i.a.createElement(d.EuiLoadingSpinner,null):i.a.createElement(Rs,{defaultValues:null==a?void 0:a.attributes},i.a.createElement(bs,{stepMap:Hs,isEditFlow:!0}),i.a.createElement(Vs,{configId:null==a?void 0:a.attributes[Y.b.CONFIG_ID],name:null==a?void 0:a.attributes.name}))},Ws=i.a.memo((()=>i.a.createElement(Kn,null,i.a.createElement(Ks,null))));var Ys=a(130),Xs=a.n(Ys);const Js=r.i18n.translate("xpack.synthetics.monitorSummary.recentlyViewed",{defaultMessage:"Recently viewed"}),Zs=()=>{const{basePath:e}=ne();return i.a.createElement(d.EuiButtonEmpty,{href:`${e}/app/synthetics/add-monitor`},Qs)},Qs=r.i18n.translate("xpack.synthetics.monitorSummary.createNewMonitor",{defaultMessage:"Create monitor"}),el=({closePopover:e})=>{const t=Object(u.useHistory)(),a=(()=>{const[e,t]=Xs()("xpack.synthetics.recentlyViewedMonitors",[]),{monitorId:a}=Object(u.useParams)(),{savedObjects:i}=Object(p.useKibana)().services;Object(n.useEffect)((()=>{const n=[...new Set([...a?[a]:[],...null!=e?e:[]])].slice(0,5);(null==n?void 0:n[0])===(null==e?void 0:e[0])&&n.length===(null==e?void 0:e.length)||t(n)}),[a,e,t]);const{data:s}=Object(g.useFetcher)((async()=>{const n=null!=e?e:[],{resolved_objects:s}=await i.client.bulkResolve(n.map((e=>({type:ii.b,id:e})))),l=s.filter((e=>{var t;return 404===(null===(t=e.saved_object.error)||void 0===t?void 0:t.statusCode)})).map((e=>e.saved_object.id));return l.length>0&&t(n.filter((e=>!l.includes(e)))),s.filter((({saved_object:e})=>Boolean(e.attributes)&&e.id!==a)).map((({saved_object:e})=>({key:e.id,label:e.attributes.name})))}),[a,e]);return Object(n.useMemo)((()=>0===(null!=s?s:[]).length?[]:[{key:"recently_viewed",label:Js,isGroupLabel:!0},...null!=s?s:[]]),[s])})(),[s,l]=Object(n.useState)([]),[r,o]=Object(n.useState)(""),c=nn(),{basePath:m}=ne(),{values:E,loading:h}=(({search:e=""})=>{const{data:t,loading:a}=Object(g.useFetcher)((()=>Object(U.j)({pageSize:100,pageIndex:0,sortField:"name.keyword",sortOrder:"asc",query:e})),[e]),{monitorId:i}=Object(u.useParams)();return Object(n.useMemo)((()=>{const{monitors:e=[]}=null!=t?t:{};return{values:e.map((e=>({label:e.attributes.name,key:e.id}))).filter((e=>e.key!==i)),loading:a}}),[t,a,i])})({search:r});return Object(n.useEffect)((()=>{const e=[];if(a.length>0&&!r){const t=E.filter((e=>a.every((t=>t.key!==e.key))));t.length>0&&e.push({key:"monitors",label:sl,isGroupLabel:!0}),l([...a,...e,...t])}else l(E)}),[a,r,E]),i.a.createElement(d.EuiSelectable,{searchable:!0,isLoading:h,searchProps:{placeholder:il,compressed:!0,onChange:e=>o(e),autoFocus:!0},options:s,onChange:a=>{l(a);const n=a.find((e=>"on"===e.checked));n&&t.push(`/monitor/${n.key}?locationId=${null==c?void 0:c.id}`),e()},singleSelection:!0,listProps:{showIcons:!1},renderOption:(e,t)=>i.a.createElement(d.EuiLink,{href:`${m}/app/synthetics/monitor/${e.key}?locationId=${null==c?void 0:c.id}`},i.a.createElement(d.EuiHighlight,{search:r},e.label)),noMatchesMessage:nl,emptyMessage:i.a.createElement(Zs,null),loadingMessage:tl},((e,t)=>i.a.createElement("div",{style:{width:280}},i.a.createElement(d.EuiPopoverTitle,{paddingSize:"s"},s.length>0||r?t:i.a.createElement(d.EuiText,{color:"subdued",size:"s",className:"eui-textCenter"},al)),e)))},tl=r.i18n.translate("xpack.synthetics.monitorSummary.loadingMonitors",{defaultMessage:"Loading monitors"}),al=r.i18n.translate("xpack.synthetics.monitorSummary.noOtherMonitors",{defaultMessage:"No other monitors exist."}),nl=r.i18n.translate("xpack.synthetics.monitorSummary.noResultsFound",{defaultMessage:"No monitors found. Try modifying your query."}),il=r.i18n.translate("xpack.synthetics.monitorSummary.placeholderSearch",{defaultMessage:"Monitor name or tag"}),sl=r.i18n.translate("xpack.synthetics.monitorSummary.otherMonitors",{defaultMessage:"Other monitors"}),ll=()=>{const[e,t]=Object(n.useState)(!1),a=()=>{t(!1)},s=i.a.createElement(d.EuiButtonIcon,{size:"s",iconType:"arrowDown",onClick:()=>{t(!e)},"aria-label":ol});return i.a.createElement(n.Fragment,null,i.a.createElement(d.EuiPopover,{id:"monitorSelector",panelPaddingSize:"none",button:s,isOpen:e,closePopover:a},i.a.createElement(d.EuiPopoverTitle,{paddingSize:"s"},rl),i.a.createElement(el,{closePopover:a})))},rl=r.i18n.translate("xpack.synthetics.monitorSummary.goToMonitor",{defaultMessage:"Go to monitor"}),ol=r.i18n.translate("xpack.synthetics.monitorSummary.selectMonitor",{defaultMessage:"Select a different monitor to view its details"}),cl=()=>{const{monitor:e}=en();return i.a.createElement(d.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1}," ",null==e?void 0:e.name),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(ll,null)))},ul=e=>{var t,a;const n=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(B.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"";z([{text:dl,href:`${n}/${o.q}`},...null!=e?e:[]])},dl=r.i18n.translate("xpack.synthetics.monitorsPage.monitorsMCrumb",{defaultMessage:"Monitors"}),ml=({children:e})=>{var t;const{monitor:a}=en();return ul([{text:null!==(t=null==a?void 0:a.name)&&void 0!==t?t:""}]),e};var pl=a(5),El=a(206);const gl=({errors:e,control:t})=>{const{locations:a}=Object(c.useSelector)(U.M);return i.a.createElement(d.EuiFormRow,{fullWidth:!0,label:bl,helpText:null!=e&&e[oi.a.LOCATIONS]?void 0:hl,isInvalid:!(null==e||!e[oi.a.LOCATIONS]),error:hl},i.a.createElement(ei.Controller,{name:oi.a.LOCATIONS,control:t,rules:{required:!0},render:({field:t})=>i.a.createElement(d.EuiComboBox,he()({fullWidth:!0,"aria-label":hl,placeholder:hl,options:a.map((e=>({...e,"data-test-subj":`syntheticsServiceLocation--${e.id}`}))),selectedOptions:t.value,isClearable:!0,"data-test-subj":"syntheticsServiceLocations"},t,{isInvalid:!(null==e||!e[oi.a.LOCATIONS])}))}))},hl=r.i18n.translate("xpack.synthetics.monitorManagement.selectOneOrMoreLocations",{defaultMessage:"Select one or more locations"}),bl=r.i18n.translate("xpack.synthetics.monitorManagement.locationsLabel",{defaultMessage:"Locations"});var fl=a(210);const yl=()=>{const{control:e,register:t,handleSubmit:a,formState:{errors:s,isValid:l,isSubmitted:r}}=Object(fl.a)({mode:"onSubmit",reValidateMode:"onChange",shouldFocusError:!0,defaultValues:{urls:"",locations:[]}}),[o,u]=Object(n.useState)(),{loading:m,data:E}=(({monitorData:e})=>{const{application:t}=Object(p.useKibana)().services,{locations:a}=Object(c.useSelector)(U.M),{refreshApp:i}=y(),{data:s,loading:l}=Object(g.useFetcher)((()=>{if(!e)return new Promise((e=>e(void 0)));const{urls:t,locations:a}=e;return Object(U.e)({monitor:{...ci.d.browser,"source.inline.script":`step('Go to ${t}', async () => {\n  await page.goto('${t}');\n});`,[oi.a.MONITOR_TYPE]:Y.f.BROWSER,[oi.a.NAME]:t,[oi.a.LOCATIONS]:a,[oi.a.URLS]:t}})}),[e]);return Object(n.useEffect)((()=>{var e;const n=s;var r;s&&"attributes"in s&&(null===(e=s.attributes.errors)||void 0===e?void 0:e.length)>0&&!l&&Object(El.a)(null!==(r=null==s?void 0:s.attributes.errors)&&void 0!==r?r:[],a,Xt.a.toasts),!l&&null!=n&&n.id&&(Xt.a.toasts.addSuccess({title:Ml,toastLifeTimeMs:3e3}),i(),null==t||t.navigateToApp("synthetics",{path:"monitors"}))}),[t,s,l,i,a]),{data:s,loading:l}})({monitorData:o}),h=!(null==s||!s[Y.b.URLS]);return i.a.createElement(d.EuiForm,{onSubmit:a((e=>{u(e)})),component:"form",isInvalid:r&&!l&&!m&&!(null!=E&&E.id),noValidate:!0},i.a.createElement(d.EuiFormRow,{fullWidth:!0,label:vl,helpText:h?"":xl,isInvalid:!(null==s||!s[Y.b.URLS]),error:h?Cl:void 0},i.a.createElement(d.EuiFieldText,he()({placeholder:Sl,fullWidth:!0},t(Y.b.URLS,{required:!0}),{isInvalid:!(null==s||!s[Y.b.URLS]),"data-test-subj":`${Y.b.URLS}-input`,tabIndex:0}))),i.a.createElement(d.EuiSpacer,null),i.a.createElement(gl,{errors:s,control:e}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiFlexGroup,{justifyContent:"flexEnd"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{type:"submit",fill:!0,iconType:"plusInCircleFilled",isLoading:m,"data-test-subj":"syntheticsMonitorConfigSubmitButton"},Tl))))},vl=r.i18n.translate("xpack.synthetics.monitorManagement.websiteUrlLabel",{defaultMessage:"Website URL"}),Sl=r.i18n.translate("xpack.synthetics.monitorManagement.websiteUrlPlaceholder",{defaultMessage:"Enter a website URL"}),xl=r.i18n.translate("xpack.synthetics.monitorManagement.websiteUrlHelpText",{defaultMessage:"For example, your company's homepage or https://elastic.co"}),Tl=r.i18n.translate("xpack.synthetics.monitorManagement.createMonitorLabel",{defaultMessage:"Create monitor"}),Ml=r.i18n.translate("xpack.synthetics.monitorManagement.monitorAddedSuccessMessage",{defaultMessage:"Monitor added successfully."}),Cl=r.i18n.translate("xpack.synthetics.monitorManagement.urlRequiredLabel",{defaultMessage:"URL is required"}),Ol=()=>{const e=Object(c.useDispatch)(),t=Object(u.useHistory)();return Object(n.useEffect)((()=>{e(Object(U.t)())}),[e]),z([{text:_l}]),i.a.createElement(kl,null,i.a.createElement(d.EuiEmptyPrompt,{title:i.a.createElement("h2",null,Il),layout:"horizontal",color:"plain",body:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiText,{size:"s"},Rl," ",i.a.createElement(d.EuiLink,{href:t.createHref({pathname:pl.j})},wl),r.i18n.translate("xpack.synthetics.gettingStarted.createSingle.description",{defaultMessage:" to get started with Elastic Synthetics Monitoring"})),i.a.createElement(d.EuiSpacer,null),i.a.createElement(yl,null))}))},kl=lt.a.div.withConfig({displayName:"Wrapper",componentId:"sc-dsce70-0"})(["&&&{.euiEmptyPrompt__content{max-width:40em;padding:0;}}"]),Il=r.i18n.translate("xpack.synthetics.gettingStarted.createSinglePageLabel",{defaultMessage:"Create a single page browser monitor"}),wl=r.i18n.translate("xpack.synthetics.gettingStarted.gettingStartedLabel.selectDifferentMonitor",{defaultMessage:"select a different monitor type"}),Rl=r.i18n.translate("xpack.synthetics.gettingStarted.orLabel",{defaultMessage:"Or"}),_l=r.i18n.translate("xpack.synthetics.overview.heading",{defaultMessage:"Monitors"}),jl=r.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel",{defaultMessage:"Loading Monitor Management"}),Ll=r.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel.callout.learnMore",{defaultMessage:"Learn more."}),Fl=r.i18n.translate("xpack.synthetics.monitorManagement.callout.disabled",{defaultMessage:"Monitor Management is disabled"}),Pl=r.i18n.translate("xpack.synthetics.monitorManagement.callout.disabled.adminContact",{defaultMessage:"Please contact your administrator to enable Monitor Management."}),Nl=r.i18n.translate("xpack.synthetics.monitorManagement.callout.description.disabled",{defaultMessage:"Monitor Management is currently disabled. To run your monitors on Elastic managed Synthetics service, enable Monitor Management. Your existing monitors are paused."}),Dl=r.i18n.translate("xpack.synthetics.monitorManagement.editMonitorError.description",{defaultMessage:"Monitor Management settings could not be loaded. Please contact Support."}),Al=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableLabel.management",{defaultMessage:"Enable Monitor Management"}),Hl=r.i18n.translate("xpack.synthetics.monitorManagement.editMonitorError",{defaultMessage:"Error loading Monitor Management"}),Bl=r.i18n.translate("xpack.synthetics.monitors.management.betaLabel",{defaultMessage:"This functionality is in beta and is subject to change. The design and code is less mature than official generally available features and is being provided as-is with no warranties. Beta features are not subject to the support service level agreement of official generally available features."}),zl=()=>i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitors.pageHeader.title",defaultMessage:"Monitors"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement("div",null,i.a.createElement(d.EuiBetaBadge,{label:"Beta",tooltipContent:Bl})))),Ul=()=>{const{basePath:e}=Object(n.useContext)(te),{enablement:{isEnabled:t}}=$();return i.a.createElement(d.EuiButton,{color:"primary",fill:!0,iconSide:"left",iconType:"plusInCircleFilled",href:`${e}/app/synthetics${o.r}`,isDisabled:!t,"data-test-subj":"syntheticsAddMonitorBtn"},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitors.pageHeader.createButton.label",defaultMessage:"Create Monitor"}))};var $l=a(122);function Gl(){var e,t;const a=Object(c.useDispatch)(),i=Object(n.useRef)(!1),{pageState:s,loading:l,loaded:r,error:o,data:d}=Object(c.useSelector)(U.D),m=Object(c.useSelector)(U.z),{query:p,tags:E,monitorType:g,locations:h}=A(),{search:b}=Object(u.useLocation)(),f=Object(n.useCallback)((e=>a(U.i.get({...e,query:p,tags:E,monitorType:g,locations:h}))),[a,h,g,p,E]),y=Object(n.useCallback)((()=>f(s)),[s,f]);return Object(n.useEffect)((()=>{y()}),[b]),Object(n.useEffect)((()=>{l||i.current||(i.current=!0,y()),l&&(i.current=!0)}),[y,m,l]),{loading:l,loaded:r,error:o,pageState:s,syntheticsMonitors:m,total:null!==(e=null==d?void 0:d.total)&&void 0!==e?e:0,loadPage:f,reloadPage:y,isDataQueried:i.current,absoluteTotal:null!==(t=d.absoluteTotal)&&void 0!==t?t:0}}const Vl=r.i18n.translate("xpack.synthetics.overviewPage.overviewCrumb",{defaultMessage:"Overview"});var ql=a(286),Kl=a.n(ql),Wl=a(94);const Yl=()=>i.a.createElement(d.EuiPanel,{style:{height:"160px"},hasBorder:!0},i.a.createElement(d.EuiLoadingContent,{lines:2})),Xl=()=>{const e=Array(16).fill(null);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGrid,{gutterSize:"m",columns:4},e.map(((e,t)=>i.a.createElement(d.EuiFlexItem,{key:t},i.a.createElement(Yl,null))))))},Jl=({page:e,loading:t,total:a,startRange:n,endRange:s})=>{const{loaded:l}=Object(c.useSelector)(Wl.j);return l&&void 0!==a?i.a.createElement(d.EuiText,{size:"xs"},n&&s?i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.overview.pagination.description",defaultMessage:"Showing {currentCount} of {total} {monitors}",values:{currentCount:i.a.createElement("strong",null,`${n}-${s}`),total:a,monitors:i.a.createElement("strong",null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.overview.monitors.label",defaultMessage:"Monitors"}))}}):i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.management.monitorList.recordTotal",defaultMessage:"Showing {total} {monitorsLabel}",values:{total:i.a.createElement("strong",null,i.a.createElement(d.EuiI18nNumber,{value:a})),monitorsLabel:i.a.createElement("strong",null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.management.monitorList.recordRangeLabel",defaultMessage:"{monitorCount, plural, one {Monitor} other {Monitors}}",values:{monitorCount:a}}))}})):i.a.createElement(d.EuiText,{size:"xs"},i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLoadingSpinner,{size:"m"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.overview.pagination.loading",defaultMessage:"Loading Monitors..."}))))},Zl=(e,t,a)=>{var n;return t?((null==a||null===(n=a.summary)||void 0===n?void 0:n.down)||0)>0?e.eui.euiColorVis9_behindText:e.eui.euiColorVis0_behindText:e.eui.euiColorLightestShade},Ql=({monitor:e,averageDuration:t,data:a,loaded:s,onClick:l})=>{var o,c;const[u,m]=Object(n.useState)(!1),[p,E]=Object(n.useState)(!1),h=K({locationId:null===(o=e.location)||void 0===o?void 0:o.id}),{locations:b}=W(e.configId),f=b.find((e=>{var t,a;return(null===(t=e.observer)||void 0===t||null===(a=t.geo)||void 0===a?void 0:a.name)===h})),y=Object(g.useTheme)();return i.a.createElement("div",{"data-test-subj":`${e.name}-metric-item`,style:{height:"160px"}},s?i.a.createElement(d.EuiPanel,{paddingSize:"none",onMouseOver:()=>{u||m(!0)},onMouseLeave:()=>{u&&m(!1)},style:{height:"100%",overflow:"hidden"}},i.a.createElement(le.Chart,null,i.a.createElement(le.Settings,{onElementClick:()=>e.configId&&h&&l({configId:e.configId,id:e.id,location:h}),baseTheme:le.DARK_THEME}),i.a.createElement(le.Metric,{id:`${e.configId}-${null===(c=e.location)||void 0===c?void 0:c.id}`,data:[[{title:e.name,subtitle:h,value:t,trendShape:le.MetricTrendShape.Area,trend:a,extra:i.a.createElement("span",null,r.i18n.translate("xpack.synthetics.overview.duration.label",{defaultMessage:"Duration Avg."})),valueFormatter:e=>(e=>{if(e<1e6)return r.i18n.translate("xpack.synthetics.overview.durationMsFormatting",{values:{millis:(t=e,t||0===t?Math.floor(t/1e3):null)},defaultMessage:"{millis} ms"});var t;const a=(e/1e6).toFixed(0);return r.i18n.translate("xpack.synthetics.overview.durationSecondsFormatting",{values:{seconds:a},defaultMessage:"{seconds} s"})})(e),color:Zl(y,e.isEnabled,f)}]]})),(u||p)&&i.a.createElement(ua,{monitor:e,isPopoverOpen:p,setIsPopoverOpen:E,position:"relative"})):i.a.createElement(Yl,null))},er=({monitor:e,onClick:t})=>{var a;const{data:s,loading:l,averageDuration:r}=function({monitorId:e,locationId:t}){const{hits:a,loading:i}=function({monitorId:e,locationId:t,fields:a=["*"],size:i=50}){var s,l;const{lastRefresh:r}=y(),{locationsLoaded:u,locations:d}=Object(c.useSelector)(U.M),m=Object(g.createEsParams)({index:u?o.G:"",body:{size:i,query:{bool:{filter:[V.c,V.b,{term:{"monitor.id":e}}],...Object(V.d)({locationId:t,locationName:(null===(s=d.find((e=>e.id===t)))||void 0===s?void 0:s.label)||o.K})}},sort:[{"@timestamp":"desc"}],fields:a}}),{data:p}=Object(g.useEsSearch)(m,[r],{name:"getLastXMonitorRunsByLocation"}),E=JSON.stringify(null==p||null===(l=p.hits)||void 0===l?void 0:l.hits);return Object(n.useMemo)((()=>{var e;return{hits:(null==p||null===(e=p.hits)||void 0===e?void 0:e.hits.map((e=>e.fields)))||[],loading:!p}}),[E])}({monitorId:e,locationId:t,fields:q,size:50}),{data:s,averageDuration:l}=Object(n.useMemo)((()=>{if(i)return{data:[],averageDuration:0};let e=0;const t=a.reverse().map(((t,a)=>{var n;const i=null==t||null===(n=t["monitor.duration.us"])||void 0===n?void 0:n[0];return e+=i||0,void 0===i?null:{x:a,y:i}})).filter((e=>null!==e));return{data:t,averageDuration:e/t.length}}),[a,i]);return Object(n.useMemo)((()=>({data:s,averageDuration:l,loading:i})),[i,s,l])}({locationId:null===(a=e.location)||void 0===a?void 0:a.id,monitorId:e.id});return i.a.createElement(Ql,{data:s,monitor:e,loaded:!l,averageDuration:r,onClick:t})},tr=({sortOptions:e,orderOptions:t,sortField:a})=>{const[s,l]=Object(n.useState)(!1),r=Object(d.useGeneratedHtmlId)({prefix:"singleContextMenuPopover"}),o=()=>{l(!1)},c=i.a.createElement(d.EuiButtonEmpty,{size:"xs",iconType:"arrowDown",iconSide:"right",onClick:()=>{l(!s)}},a),u=[i.a.createElement(d.EuiPanel,{paddingSize:"s",hasShadow:!1},i.a.createElement(d.EuiText,{size:"xs"},i.a.createElement("h4",null,nr))),...e.map((e=>i.a.createElement(ar,{option:e,onClosePopover:o}))),i.a.createElement(d.EuiHorizontalRule,{key:"hr",margin:"none"}),i.a.createElement(d.EuiPanel,{paddingSize:"s",hasShadow:!1},i.a.createElement(d.EuiText,{size:"xs"},i.a.createElement("h4",null,ir))),...t.map((e=>i.a.createElement(ar,{option:e,onClosePopover:o})))];return i.a.createElement(d.EuiPopover,{id:r,button:c,isOpen:s,closePopover:o,panelPaddingSize:"none",anchorPosition:"downLeft"},i.a.createElement(d.EuiContextMenuPanel,{size:"s",items:u,style:{minWidth:160}}))},ar=({option:e,onClosePopover:t})=>{return i.a.createElement(d.EuiContextMenuItem,{size:"s",key:e.value,icon:(a=e.checked,a?"check":"empty"),onClick:()=>{t(),e.onClick()}},e.label);var a},nr=r.i18n.translate("xpack.synthetics.overview.sortPopover.sortBy.title",{defaultMessage:"Sort by"}),ir=r.i18n.translate("xpack.synthetics.overview.sortPopover.orderBy.title",{defaultMessage:"Order"}),sr=({onSortChange:e})=>{const{pageState:{sortOrder:t,sortField:a}}=Object(c.useSelector)(Wl.j),n=Object(c.useDispatch)(),{asc:s,desc:l,label:r}=lr(a),o=t=>{e&&e(),n(t)},u=[{label:s,value:"asc",checked:"asc"===t,onClick:()=>{o(Object(Wl.m)({sortOrder:"asc"}))}},{label:l,value:"desc",checked:"desc"===t,onClick:()=>{o(Object(Wl.m)({sortOrder:"desc"}))}}],m=[{label:hr,value:"status",checked:"status"===a,defaultSortOrder:"asc",onClick:()=>{o(Object(Wl.m)({sortField:"status",sortOrder:"asc"}))}},{label:br,value:`${Y.b.NAME}.keyword`,checked:a===`${Y.b.NAME}.keyword`,defaultSortOrder:"asc",onClick:()=>{o(Object(Wl.m)({sortField:`${Y.b.NAME}.keyword`,sortOrder:"asc"}))}},{label:fr,value:"updated_at",checked:"updated_at"===a,defaultSortOrder:"desc",onClick:()=>{o(Object(Wl.m)({sortField:"updated_at",sortOrder:"desc"}))}}];return i.a.createElement(d.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"xxxs"},i.a.createElement("span",null,rr))),i.a.createElement(d.EuiFlexItem,{grow:!1,"data-test-subj":"syntheticsOverviewSortButton"},i.a.createElement(tr,{sortOptions:m,orderOptions:u,sortField:r})))))},lr=e=>{switch(e){case`${Y.b.NAME}.keyword`:return{asc:or,desc:cr,label:br};case"updated_at":return{asc:ur,desc:dr,label:fr};case"status":return{asc:mr,desc:pr,label:hr};default:return{asc:Er,desc:gr,label:""}}},rr=r.i18n.translate("xpack.synthetics.overview.sortPopover.sort.title",{defaultMessage:"Sort by"}),or=r.i18n.translate("xpack.synthetics.overview.sortPopover.alphabetical.asc",{defaultMessage:"A -> Z",description:"Describes ascending alphabetical sort order"}),cr=r.i18n.translate("xpack.synthetics.overview.sortPopover.alphabetical.desc",{defaultMessage:"Z -> A",description:"Describes descending alphabetical sort order"}),ur=r.i18n.translate("xpack.synthetics.overview.sortPopover.lastModified.asc",{defaultMessage:"Oldest first"}),dr=r.i18n.translate("xpack.synthetics.overview.sortPopover.lastModified.desc",{defaultMessage:"Newest first"}),mr=r.i18n.translate("xpack.synthetics.overview.sortPopover.status.asc",{defaultMessage:"Down first"}),pr=r.i18n.translate("xpack.synthetics.overview.sortPopover.status.desc",{defaultMessage:"Up first"}),Er=r.i18n.translate("xpack.synthetics.overview.sortPopover.ascending.label",{defaultMessage:"Ascending"}),gr=r.i18n.translate("xpack.synthetics.overview.sortPopover.descending.label",{defaultMessage:"Descending"}),hr=r.i18n.translate("xpack.synthetics.overview.sortPopover.status.label",{defaultMessage:"Status"}),br=r.i18n.translate("xpack.synthetics.overview.sortPopover.alphabetical.label",{defaultMessage:"Alphabetical"}),fr=r.i18n.translate("xpack.synthetics.overview.sortPopover.lastModified.label",{defaultMessage:"Last modified"});function yr(){return i.a.createElement(d.EuiEmptyPrompt,{iconType:"search",iconColor:"subdued",title:i.a.createElement("span",null,Sr),titleSize:"s",body:i.a.createElement(d.EuiText,{size:"s"},xr," ",i.a.createElement(vr,null))})}function vr(){const[e,t]=H();return i.a.createElement(d.EuiLink,{onClick:()=>t(null)},Tr)}const Sr=r.i18n.translate("xpack.synthetics.overview.noMonitorsFoundHeading",{defaultMessage:"No monitors found"}),xr=r.i18n.translate("xpack.synthetics.overview.noMonitorsFoundContent",{defaultMessage:"Try refining your search."}),Tr=r.i18n.translate("xpack.synthetics.overview.overview.clearFilters",{defaultMessage:"Clear filters"}),Mr=Object(n.memo)((()=>{const{statusFilter:e}=A(),{data:{monitors:t},status:a,flyoutConfig:s,loaded:l,pageState:r}=Object(c.useSelector)(Wl.j),{perPage:o,sortField:u}=r,[m,p]=Object(n.useState)(!1),[E,g]=Object(n.useState)(1),{monitorsSortedByStatus:h}=function(){const{statusFilter:e}=A(),{pageState:{sortOrder:t},data:{monitors:a},status:i}=Object(c.useSelector)(Wl.j),s=Object(n.useRef)(null),l=function(){const e=Object(c.useDispatch)(),{locationsLoaded:t,locations:a}=Object(c.useSelector)(U.M);return Object(n.useEffect)((()=>{t||e(Object(U.t)())})),Object(n.useMemo)((()=>a.reduce(((e,t)=>(e[t.id]=t.label,e)),{})),[a])}(),r=Object(n.useMemo)((()=>{if(!i)return{down:[],up:[],disabled:[]};const{downConfigs:e}=i,t={};e.forEach((({location:e,configId:a})=>{t[a]?t[a].push(e):t[a]=[e]}));const n=[],r=[],o=[];return a.forEach((e=>{const a=l[e.location.id];e.isEnabled?e.configId in t&&t[e.configId].includes(a)?n.push(e):r.push(e):o.push(e)})),s.current=t,{down:n,up:r,disabled:o}}),[a,l,s,i]);return Object(n.useMemo)((()=>{switch(e){case"down":return{monitorsSortedByStatus:r.down,downMonitors:s.current};case"up":return{monitorsSortedByStatus:r.up,downMonitors:s.current};case"disabled":return{monitorsSortedByStatus:r.disabled,downMonitors:s.current}}return{monitorsSortedByStatus:[..."asc"===t?[...r.down,...r.up]:[...r.up,...r.down],...r.disabled],downMonitors:s.current}}),[s,r,t,e])}(),b=Cr({monitors:t,monitorsSortedByStatus:h,perPage:o,page:E,sortField:u,statusFilter:e}),f=Object(c.useDispatch)(),y=Object(n.useCallback)((({configId:e,id:t,location:a})=>f(Object(Wl.l)({configId:e,id:t,location:a}))),[f]),v=Object(n.useCallback)((()=>f(Object(Wl.l)(null))),[f]),S=Object(n.useCallback)((()=>f(Wl.g.get(r))),[f,r]),x=Object(n.useRef)(null),T=ct()(x,{root:null,rootMargin:"640px",threshold:.1}),M=T&&T.intersectionRatio>0;return Kl()((()=>{M&&b.length===E*o&&b.length!==t.length?p(!0):p(!1)}),1e3),Object(n.useEffect)((()=>{m&&(g((e=>e+1)),p(!1))}),[m]),a&&!h.length?i.a.createElement(yr,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"baseline",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Jl,{page:E,loading:!l,total:a?h.length:void 0})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(sr,{onSortChange:()=>g(1)}))),i.a.createElement(d.EuiSpacer,{size:"m"}),l&&b.length?i.a.createElement(d.EuiFlexGrid,{columns:4,gutterSize:"m","data-test-subj":"syntheticsOverviewGridItemContainer"},b.map((e=>{var t;return i.a.createElement(d.EuiFlexItem,{key:`${e.id}-${null===(t=e.location)||void 0===t?void 0:t.id}`,"data-test-subj":"syntheticsOverviewGridItem"},i.a.createElement(er,{monitor:e,onClick:y}))}))):i.a.createElement(Xl,null),i.a.createElement("div",{ref:x},i.a.createElement(d.EuiSpacer,{size:"l"})),i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},b.length===t.length&&i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"xs"},Or)),b.length===t.length&&b.length>o&&i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:()=>window.scrollTo(0,0),iconType:"sortUp",iconSide:"right",size:"xs"},kr))),(null==s?void 0:s.configId)&&(null==s?void 0:s.location)&&i.a.createElement(Oa,{configId:s.configId,id:s.id,location:s.location,onClose:v,onEnabledChange:S,onLocationChange:y}))})),Cr=({sortField:e,perPage:t,page:a,monitors:n,monitorsSortedByStatus:i,statusFilter:s})=>"status"===e||s?i.slice(0,t*a):n.slice(0,t*a),Or=r.i18n.translate("xpack.synthetics.overview.grid.showingAllMonitors.label",{defaultMessage:"Showing all monitors"}),kr=r.i18n.translate("xpack.synthetics.overview.grid.scrollToTop.label",{defaultMessage:"Back to top"});function Ir(e){return null!=e?e:"-"}function wr(){const{statusFilter:e}=A(),{status:t,statusError:a}=Object(c.useSelector)(U.I),s=Object(c.useSelector)(U.G),l=Object(c.useDispatch)(),[r,o]=Object(n.useState)({up:null==t?void 0:t.up,down:null==t?void 0:t.down,disabledCount:null==t?void 0:t.disabledCount}),{lastRefresh:u}=y(),m=Object(n.useRef)(u);return Object(n.useEffect)((()=>{u!==m.current?(l(U.x.get(s)),m.current=u):l(U.l.get(s))}),[l,u,s]),Object(n.useEffect)((()=>{a&&(l(Object(U.a)()),Xt.a.toasts.addError(a.body,{title:Fr,toastLifeTimeMs:5e3}))}),[l,a]),Object(n.useEffect)((()=>{if(e)switch(e){case"up":o({up:(null==t?void 0:t.up)||0,down:0,disabledCount:0});break;case"down":o({up:0,down:(null==t?void 0:t.down)||0,disabledCount:0});break;case"disabled":o({up:0,down:0,disabledCount:(null==t?void 0:t.disabledCount)||0})}else t&&o({up:t.up,down:t.down,disabledCount:t.disabledCount})}),[t,e]),i.a.createElement(d.EuiPanel,null,i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Rr)),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiFlexGroup,{gutterSize:"xl"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.up",description:_r,reverse:!0,title:Ir(null==r?void 0:r.up),titleColor:"success",titleSize:"m"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.down",description:jr,reverse:!0,title:Ir(null==r?void 0:r.down),titleColor:"danger",titleSize:"m"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.disabled",description:Lr,reverse:!0,title:Ir(null==r?void 0:r.disabledCount),titleColor:"subdued",titleSize:"m"}))))}const Rr=r.i18n.translate("xpack.synthetics.overview.status.headingText",{defaultMessage:"Current status"}),_r=r.i18n.translate("xpack.synthetics.overview.status.up.description",{defaultMessage:"Up"}),jr=r.i18n.translate("xpack.synthetics.overview.status.down.description",{defaultMessage:"Down"}),Lr=r.i18n.translate("xpack.synthetics.overview.status.disabled.description",{defaultMessage:"Disabled"}),Fr=r.i18n.translate("xpack.synthetics.overview.status.error.title",{defaultMessage:"Unable to get monitor status metrics"}),Pr=()=>{const{statusFilter:e}=A(),[t,a]=H(),n=t=>()=>{a({statusFilter:e!==t?t:void 0})};return i.a.createElement(d.EuiFilterGroup,null,i.a.createElement(d.EuiFilterButton,{hasActiveFilters:"up"===e,onClick:n("up")},Dr),i.a.createElement(d.EuiFilterButton,{hasActiveFilters:"down"===e,onClick:n("down")},Nr),i.a.createElement(d.EuiFilterButton,{hasActiveFilters:"disabled"===e,onClick:n("disabled")},Ar))},Nr=r.i18n.translate("xpack.synthetics.overview.status.filters.down",{defaultMessage:"Down"}),Dr=r.i18n.translate("xpack.synthetics.overview.status.filters.up",{defaultMessage:"Up"}),Ar=r.i18n.translate("xpack.synthetics.overview.status.filters.disabled",{defaultMessage:"Disabled"});function Hr(){const{query:e}=A(),[t,a]=H(),[s,l]=Object(n.useState)(e||"");return xe()((()=>{s!==e&&a({query:s})}),300,[s]),i.a.createElement(d.EuiFieldSearch,{fullWidth:!0,placeholder:Br,value:s,onChange:e=>{l(e.target.value)},isClearable:!0,"aria-label":Br,"data-test-subj":"syntheticsOverviewSearchInput"})}const Br=r.i18n.translate("xpack.synthetics.monitorManagement.filter.placeholder",{defaultMessage:"Search by name, url, host, tag, project or location"}),zr=()=>{Object(g.useTrackPageview)({app:"synthetics",path:"overview"}),Object(g.useTrackPageview)({app:"synthetics",path:"overview",delay:15e3}),(()=>{var e,t;const a=null!==(e=null===(t=Object(p.useKibana)().services.application)||void 0===t?void 0:t.getUrlForApp(B.a.SYNTHETICS_PLUGIN_ID))&&void 0!==e?e:"";z([{text:Vl,href:`${a}`}])})();const e=Object(c.useDispatch)(),{lastRefresh:t}=y(),{query:a}=A(),{search:s}=Object(u.useLocation)(),l=Object(c.useSelector)(U.G),{loading:r,locationsLoaded:m}=Object(c.useSelector)(U.M);Object(n.useEffect)((()=>{r||m||e(Object($l.b)())}),[e,m,r]),Object(n.useEffect)((()=>{l.query!==a&&(e(U.k.get({...l,query:a})),e(Object(U.R)({query:a})))}),[e,l,a]),Object(n.useEffect)((()=>{e(U.k.get(l))}),[e,l]),Object(n.useEffect)((()=>{e(U.w.get(l))}),[e,l,t]);const{enablement:{isEnabled:E},loading:h}=$(),{syntheticsMonitors:b,loading:f,loaded:v}=Gl();return!s&&h&&E&&!f&&0===b.length?i.a.createElement(u.Redirect,{to:o.l}):s||h||E||!v||0!==b.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Hr,null)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Pr,null))),i.a.createElement(d.EuiSpacer,null),Boolean(!v||(null==b?void 0:b.length)>0)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{gutterSize:"none"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(wr,null))),i.a.createElement(d.EuiSpacer,null),i.a.createElement(Mr,null)),v&&0===(null==b?void 0:b.length)&&i.a.createElement(yr,null)):i.a.createElement(u.Redirect,{to:o.q})},Ur=()=>i.a.createElement(d.EuiEmptyPrompt,{body:i.a.createElement(n.Fragment,null,i.a.createElement(d.EuiLoadingSpinner,{size:"xl"}),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiTitle,{size:"l"},i.a.createElement("h2",null,r.i18n.translate("xpack.synthetics.emptyState.loadingMessage",{defaultMessage:"Loading"}))))}),$r=({errors:e})=>{const t=e.find((e=>{var t;return(null==e||null===(t=e.body)||void 0===t?void 0:t.message)&&e.body.message.includes("unauthorized")}));return i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiEmptyPrompt,{iconType:"securityApp",iconColor:"subdued",title:i.a.createElement(d.EuiTitle,{size:"m"},t?i.a.createElement("h3",null,r.i18n.translate("xpack.synthetics.emptyStateError.notAuthorized",{defaultMessage:"You are not authorized to view Uptime data, please contact your system administrator."})):i.a.createElement("h3",null,r.i18n.translate("xpack.synthetics.emptyStateError.title",{defaultMessage:"Error"}))),body:i.a.createElement(n.Fragment,null,!t&&e.map((e=>{var t,a;return i.a.createElement("p",{key:null===(t=e.body)||void 0===t?void 0:t.message},null===(a=e.body)||void 0===a?void 0:a.message)})))}))))},Gr=({path:e,pageHeader:t,children:a,...s})=>{const{services:{observability:l}}=Object(p.useKibana)(),r=l.navigation.PageTemplate,{loading:o,error:c,hasData:u}=Object(n.useContext)(pe),{inspectorAdapters:d}=Object(g.useInspectorContext)();if(Object(n.useEffect)((()=>{d.requests.reset()}),[d.requests]),c)return i.a.createElement($r,{errors:[c]});const m=o&&!u;return i.a.createElement(i.a.Fragment,null,i.a.createElement(r,he()({pageHeader:t,"data-test-subj":"synthetics-page-template",isPageDataLoaded:!1===o},s),m&&i.a.createElement(Ur,null),i.a.createElement("div",{style:{visibility:m?"hidden":"initial"}},a)))},Vr=()=>{const e=Object(u.useHistory)();return i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiPanel,null,i.a.createElement(d.EuiEmptyPrompt,{iconType:"faceNeutral",iconColor:"subdued",title:i.a.createElement(d.EuiTitle,{size:"m"},i.a.createElement("h3",null,i.a.createElement(fe.FormattedMessage,{defaultMessage:"Page not found",id:"xpack.synthetics.emptyStateError.notFoundPage"}))),body:i.a.createElement(d.EuiButton,{href:e.createHref({pathname:"/"})},i.a.createElement(fe.FormattedMessage,{defaultMessage:"Back to home",id:"xpack.synthetics.notFountPage.homeLinkText"}))}))))},qr=({loading:e,loadingTitle:t,error:a,errorTitle:n,errorBody:s,children:l})=>i.a.createElement(i.a.Fragment,null,e||a?null:l,a&&!e?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"xxl"}),i.a.createElement(d.EuiEmptyPrompt,{iconType:"alert",color:"danger",title:i.a.createElement("h2",null,n),body:i.a.createElement("p",null,s)})):null,e?i.a.createElement(d.EuiEmptyPrompt,{color:"subdued",icon:i.a.createElement(d.EuiLoadingLogo,{logo:"logoKibana",size:"xl"}),title:i.a.createElement("h2",null,t),"data-test-subj":"uptimeLoader"}):null),Kr=(r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnabledFailure",{defaultMessage:"Monitor Management was not able to be enabled. Please contact support."}),r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabledFailure",{defaultMessage:"Monitor Management was not able to be disabled. Please contact support."}),r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableSuccess",{defaultMessage:"Monitor Management enabled successfully."})),Wr=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabledSuccess",{defaultMessage:"Monitor Management disabled successfully."}),Yr=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.enabled.title",{defaultMessage:"Enable Monitor Management"}),Xr=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.disabled.title",{defaultMessage:"Monitor Management is disabled"}),Jr=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement",{defaultMessage:"Enable Monitor Management to run lightweight and real-browser monitors from hosted testing locations around the world. Enabling Monitor Management will generate an API key to allow the Synthetics Service to write back to your Elasticsearch cluster."}),Zr=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.disabledDescription",{defaultMessage:"Monitor Management is currently disabled. Monitor Management allows you to run lightweight and real-browser monitors from hosted testing locations around the world. To enable Monitor Management, please contact an administrator."}),Qr=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.title",{defaultMessage:"Enable"}),eo=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.doc",{defaultMessage:"Read the docs"}),to=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.learnMore",{defaultMessage:"Want to learn more?"}),ao=()=>{const{error:e,enablement:t,enableSynthetics:a,loading:s}=$(),[l,r]=Object(n.useState)(!1),[o,c]=Object(n.useState)(!1),{isEnabled:u,canEnable:m}=t,p=Object(n.useRef)(u),E=Object(n.useRef)(null);return Object(n.useEffect)((()=>{u||!0!==p.current||r(!0),p.current=Boolean(u)}),[u]),Object(n.useEffect)((()=>{o&&u?(c(!1),Xt.a.toasts.addSuccess({title:Kr,toastLifeTimeMs:3e3})):o&&e&&(c(!1),Xt.a.toasts.addSuccess({title:Wr,toastLifeTimeMs:3e3}))}),[u,o,e]),Object(n.useEffect)((()=>{var e;l&&(null===(e=E.current)||void 0===e||e.focus())}),[l]),u||s?null:i.a.createElement(d.EuiEmptyPrompt,{title:i.a.createElement("h2",null,m?Yr:Xr),body:i.a.createElement("p",null,m?Jr:Zr),actions:m?i.a.createElement(d.EuiButton,{color:"primary",fill:!0,onClick:()=>{a(),c(!0)},"data-test-subj":"syntheticsEnableButton",buttonRef:E},Qr):null,footer:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"xxs"},i.a.createElement("h3",null,to)),i.a.createElement(d.EuiLink,{href:"https://docs.google.com/document/d/1hkzFibu9LggPWXQqfbAd0mMlV75wCME7_BebXlEH-oI",target:"_blank"},eo))})},no=()=>{const[e,t]=Object(n.useState)(!1),{data:{syncErrors:a}}=Object(c.useSelector)(U.D),{locations:s}=Object(c.useSelector)(U.M);return a&&a.length>0&&!e?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorSync.failure.title",defaultMessage:"Monitors failed to sync with the Synthetics service"}),color:"warning",iconType:"alert"},i.a.createElement("p",null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorSync.failure.content",defaultMessage:"There was a problem syncing your monitors for one or more locations:"})),i.a.createElement("ul",null,Object.values(null!=a?a:{}).map((e=>{var t,a,n,l,r;return i.a.createElement("li",{key:e.locationId},`${null===(t=s.find((t=>t.id===e.locationId)))||void 0===t?void 0:t.label} - ${so}: ${null!==(a=null===(n=e.error)||void 0===n?void 0:n.status)&&void 0!==a?a:lo}; ${io}: ${null!==(l=null===(r=e.error)||void 0===r?void 0:r.reason)&&void 0!==l?l:lo}`)}))),i.a.createElement(d.EuiButton,{onClick:()=>t(!0),color:"warning"},ro)),i.a.createElement(d.EuiSpacer,{size:"m"})):null},io=r.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.reasonLabel",{defaultMessage:"Reason"}),so=r.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.statusLabel",{defaultMessage:"Status"}),lo=r.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.notAvailable",{defaultMessage:"Not available"}),ro=r.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.dismissLabel",{defaultMessage:"Dismiss"}),oo={"name.keyword":"monitor.name","urls.keyword":"url.full","type.keyword":"monitor.type","@timestamp":"@timestamp"},co=()=>[{exists:{field:"summary"}},{exists:{field:"error"}},{bool:{minimum_should_match:1,should:[{match_phrase:{"error.message":"journey did not finish executing"}},{match_phrase:{"error.message":"ReferenceError:"}}]}},Object(V.e)(),V.b];const uo={types:{terms:{field:`${ii.b}.attributes.type.keyword`,size:1e4}},tags:{terms:{field:`${ii.b}.attributes.tags`,size:1e4}},locations:{terms:{field:`${ii.b}.attributes.locations.id`,size:1e4}}},mo=({filter:e})=>{const{label:t,values:a,field:s}=e,[l,r]=Object(n.useState)(""),[,o]=H(),c=A();return i.a.createElement(g.FieldValueSelection,{selectedValue:c[s]||[],singleSelection:!1,label:t,values:l?a.filter((({label:e})=>e.toLowerCase().includes(l.toLowerCase()))):a,setQuery:r,onChange:e=>{o({[s]:e&&e.length>0?JSON.stringify(e):void 0})},allowExclusions:!1,loading:!1,asFilterButton:!0})},po=(e,t)=>t.find((({id:t,label:a})=>e===t||a===e)),Eo=()=>{const e=(()=>{const{savedObjects:e}=Object(p.useKibana)().services,{data:t}=Object(g.useFetcher)((async()=>null==e?void 0:e.client.find({type:ii.b,perPage:0,aggs:uo})),[]);return Object(n.useMemo)((()=>{var e,a,n,i,s,l,r;const{types:o,tags:c,locations:u}=null!==(e=null==t?void 0:t.aggregations)&&void 0!==e?e:{};return{types:null!==(a=null==o||null===(n=o.buckets)||void 0===n?void 0:n.map((({key:e,doc_count:t})=>({label:e,count:t}))))&&void 0!==a?a:[],tags:null!==(i=null==c||null===(s=c.buckets)||void 0===s?void 0:s.map((({key:e,doc_count:t})=>({label:e,count:t}))))&&void 0!==i?i:[],locations:null!==(l=null==u||null===(r=u.buckets)||void 0===r?void 0:r.map((({key:e,doc_count:t})=>({label:e,count:t}))))&&void 0!==l?l:[]}}),[t])})(),{locations:t}=Object(c.useSelector)(U.M),a=[{label:go,field:"monitorType",values:e.types},{label:ho,field:"locations",values:e.locations.map((({label:e,count:a})=>{var n,i;return{label:null!==(n=null===(i=po(e,t))||void 0===i?void 0:i.label)&&void 0!==n?n:e,count:a}}))},{label:bo,field:"tags",values:e.tags}];return i.a.createElement(d.EuiFilterGroup,null,a.map(((e,t)=>i.a.createElement(mo,{key:t,filter:e}))))},go=r.i18n.translate("xpack.synthetics.monitorManagement.filter.typeLabel",{defaultMessage:"Type"}),ho=r.i18n.translate("xpack.synthetics.monitorManagement.filter.locationLabel",{defaultMessage:"Location"}),bo=r.i18n.translate("xpack.synthetics.monitorManagement.filter.tagsLabel",{defaultMessage:"Tags"});function fo(){return i.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(Hr,null)),i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(Eo,null)))}const yo=({basePath:e,monitor:t})=>{var a,n,s;const l=Object(c.useSelector)(U.L),r=null===(a=t[Y.b.LOCATIONS])||void 0===a?void 0:a.find((e=>e.id===l)),o=null===(n=t[Y.b.LOCATIONS])||void 0===n||null===(s=n[0])||void 0===s?void 0:s.id,u=l&&r?l:o,m=la({configId:t[Y.b.CONFIG_ID],locationId:u});return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiLink,{href:m},t.name))},vo=({euiTheme:e,configId:t,name:a,reloadPage:s,canEditSynthetics:l,isProjectMonitor:r})=>{const{basePath:o}=Object(n.useContext)(te),[c,u]=Object(n.useState)(!1),[m,p]=Object(n.useState)(!1),E=()=>{u(!1)},g=i.a.createElement(d.EuiButtonEmpty,{iconType:"boxesHorizontal",color:"primary",iconSide:"right","data-test-subj":"syntheticsMonitorListActions",onClick:()=>{u(!0)}}),h=[i.a.createElement(d.EuiContextMenuItem,{key:"xpack.synthetics.editMonitor",icon:"pencil",onClick:E,href:`${o}/app/synthetics/edit-monitor/${t}`,disabled:!l},Qt.c),i.a.createElement(So,{key:"xpack.synthetics.deleteMonitor",icon:"trash",disabled:!l,onClick:()=>{p(!0),E()},$_css:e.colors.danger},Qt.a)];return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiPopover,{id:`xpack.synthetics.${t}`,button:g,isOpen:c,closePopover:E,panelPaddingSize:"s",anchorPosition:"downLeft"},i.a.createElement(d.EuiContextMenuPanel,{size:"s",items:h})),m&&i.a.createElement(fs.a,{configId:t,name:a,reloadPage:s,isProjectMonitor:r,setIsDeleteModalVisible:p}))};var So=lt()(d.EuiContextMenuItem).withConfig({displayName:"_StyledEuiContextMenuItem",componentId:"sc-1vqn31x-0"})((e=>({color:e.$_css})));const xo=({locations:e})=>{const{locations:t}=G(),[a,s]=Object(n.useState)(3),l=e.slice(0,a);return i.a.createElement(To,null,l.map((e=>{var a;return i.a.createElement(Mo,{key:e.id,color:"hollow",className:"eui-textTruncate"},`${null===(a=t.find((t=>t.id===e.id)))||void 0===a?void 0:a.label}`)})),e.length>a&&i.a.createElement(d.EuiBadge,{color:"hollow",onClick:()=>{s(e.length)},onClickAriaLabel:Qt.e},"+",e.length-3))};var To=lt()(d.EuiBadgeGroup).withConfig({displayName:"_StyledEuiBadgeGroup",componentId:"sc-73q72h-0"})({width:"100%"}),Mo=lt()(d.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-73q72h-1"})({display:"flex",maxWidth:120});const Co=({pageState:{pageIndex:e,pageSize:t,sortField:a,sortOrder:s},syntheticsMonitors:l,total:o,error:c,loading:u,loadPage:m,reloadPage:p,errorSummaries:E})=>{var g;const{basePath:h}=Object(n.useContext)(te),b=Object(d.useIsWithinMinBreakpoint)("xxl"),f=Zt(),{euiTheme:y}=Object(d.useEuiTheme)(),v=Object(n.useMemo)((()=>(null!=E?E:[]).reduce(((e,t)=>(t.config_id&&e.set(t.config_id,t),e)),new Map)),[E]),S=Object(n.useCallback)((({page:e={index:0,size:10},sort:t={field:Y.b.NAME,direction:"asc"}})=>{const{index:a,size:n}=e,{field:i,direction:s}=t;m({pageIndex:a,pageSize:n,sortField:"enabled"===i?i:`${i}.keyword`,sortOrder:s})}),[m]),x={pageIndex:e,pageSize:t,totalItemCount:o,pageSizeOptions:[5,10,25,50,100]},T={sort:{field:a.replace(".keyword",""),direction:s}},M=Qt.o({rangeStart:0===o?0:t*e+1,rangeEnd:t*e+t,total:o}),C=function({basePath:e,euiTheme:t,errorSummaries:a,errorSummariesById:n,canEditSynthetics:s,reloadPage:l,loading:o,syntheticsMonitors:c}){return[{align:"left",field:Y.b.NAME,name:r.i18n.translate("xpack.synthetics.management.monitorList.monitorName",{defaultMessage:"Monitor name"}),sortable:!0,render:(t,a)=>i.a.createElement(yo,{basePath:e,monitor:a})},{align:"left",field:"id",name:r.i18n.translate("xpack.synthetics.management.monitorList.monitorStatus",{defaultMessage:"Status"}),sortable:!1,render:(e,a)=>{const s=!(e=>{const t=n.get(e.id);return!!t&&tt()(e.updated_at).isBefore(tt()(t.timestamp))})(a);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiIcon,{type:"dot",color:s?t.colors.success:t.colors.danger}),s?i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.management.monitorList.monitorHealthy",defaultMessage:"Healthy"}):i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.management.monitorList.monitorUnhealthy",defaultMessage:"Unhealthy"}))}},{align:"left",field:Y.b.MONITOR_TYPE,name:r.i18n.translate("xpack.synthetics.management.monitorList.monitorType",{defaultMessage:"Type"}),sortable:!0,render:e=>i.a.createElement(d.EuiBadge,null,e===Y.f.BROWSER?"Browser":"Ping")},{align:"left",field:Y.b.LOCATIONS,name:r.i18n.translate("xpack.synthetics.management.monitorList.locations",{defaultMessage:"Locations"}),render:e=>e?i.a.createElement(xo,{locations:e}):null},{align:"left",field:Y.b.SCHEDULE,sortable:!0,name:r.i18n.translate("xpack.synthetics.management.monitorList.frequency",{defaultMessage:"Frequency"}),render:e=>Object(Qt.k)(e)},{align:"left",field:Y.b.ENABLED,sortable:!0,name:r.i18n.translate("xpack.synthetics.management.monitorList.enabled",{defaultMessage:"Enabled"}),render:(e,t)=>i.a.createElement(aa,{configId:t[Y.b.CONFIG_ID],monitor:t,reloadPage:l,isSwitchable:!o})},{align:"right",name:r.i18n.translate("xpack.synthetics.management.monitorList.actions",{defaultMessage:"Actions"}),render:e=>i.a.createElement(vo,{euiTheme:t,configId:e[Y.b.CONFIG_ID],name:e[Y.b.NAME],canEditSynthetics:s,reloadPage:l,isProjectMonitor:e[Y.b.MONITOR_SOURCE_TYPE]===Y.B.PROJECT})}]}({basePath:h,euiTheme:y,errorSummaries:E,errorSummariesById:v,canEditSynthetics:f,syntheticsMonitors:l,loading:u,reloadPage:p});return i.a.createElement(d.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none"},M,i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement("hr",{style:{border:`1px solid ${y.colors.lightShade}`}}),i.a.createElement(d.EuiBasicTable,{"aria-label":r.i18n.translate("xpack.synthetics.management.monitorList.title",{defaultMessage:"Synthetics monitors list"}),error:null==c||null===(g=c.body)||void 0===g?void 0:g.message,loading:u,isExpandable:!0,hasActions:!0,itemId:"monitor_id",items:l,columns:C,tableLayout:b?"auto":"fixed",pagination:x,sorting:T,onChange:S,noItemsMessage:u?Qt.f:Qt.h}))},Oo=({isEnabled:e,monitorListProps:t})=>{const{pageState:a,error:s,loading:l,syntheticsMonitors:r,total:u,absoluteTotal:m,loadPage:p,reloadPage:E}=t,{errorSummaries:h,loading:b}=function({onlyInvalidMonitors:e,sortField:t="@timestamp",sortOrder:a="desc"}){const i=Object(c.useSelector)(U.z),{lastRefresh:s}=y(),l=i.map((e=>e.id)).length>0||e,{data:r}=Object(g.useEsSearch)({index:l?o.G:"",body:{size:1e3,query:{bool:{filter:co()}},collapse:{field:"monitor.id"},sort:oo[t]?[{[oo[t]]:a}]:void 0}},[i,s,l,t,a],{name:"getInvalidMonitors"}),{count:u,loading:d}=function(){const e=Object(c.useSelector)(U.z),{lastRefresh:t}=y(),{data:a,loading:i}=Object(g.useEsSearch)({index:o.G,body:{size:0,query:{bool:{filter:co()}},aggs:{total:{cardinality:{field:"monitor.id"}}}}},[e,t],{name:"getInvalidMonitorsCount"});return Object(n.useMemo)((()=>{var e;const t=null==a||null===(e=a.aggregations)||void 0===e?void 0:e.total.value;return{loading:null!=i&&i,count:t}}),[a,i])}();return Object(n.useMemo)((()=>{const e=null==r?void 0:r.hits.hits.map((({_source:e})=>({...e,timestamp:e["@timestamp"]})));return{loading:d,errorSummaries:e,count:u}}),[u,d,r])}({onlyInvalidMonitors:!1,sortField:a.sortField,sortOrder:a.sortOrder});return e||0!==m?i.a.createElement(i.a.Fragment,null,i.a.createElement(no,null),i.a.createElement(fo,null),i.a.createElement(d.EuiSpacer,null),i.a.createElement(Co,{syntheticsMonitors:r,total:u,pageState:a,error:s,loading:l||b,errorSummaries:h,loadPage:p,reloadPage:E})):null},ko=()=>{Object(g.useTrackPageview)({app:"synthetics",path:"monitors"}),Object(g.useTrackPageview)({app:"synthetics",path:"monitors",delay:15e3}),ul();const e=Gl(),{syntheticsMonitors:t,loading:a,isDataQueried:n,absoluteTotal:s}=e,{error:l,enablement:{isEnabled:r,canEnable:c},loading:m,enableSynthetics:p}=$(),{loading:E}=G(),h=void 0!==r&&0===t.length;return r&&!a&&0===s&&n?i.a.createElement(u.Redirect,{to:o.l}):i.a.createElement(i.a.Fragment,null,i.a.createElement(qr,{loading:m||E,error:Boolean(l),loadingTitle:jl,errorTitle:Hl,errorBody:Dl},!r&&t.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:Fl,color:"warning",iconType:"help"},i.a.createElement("p",null,Nl),c?i.a.createElement(d.EuiButton,{fill:!0,color:"primary",onClick:()=>{p()}},Al):i.a.createElement("p",null,Pl," ",i.a.createElement(d.EuiLink,{href:"#",target:"_blank"},Ll))),i.a.createElement(d.EuiSpacer,{size:"s"})):null,i.a.createElement(Oo,{isEnabled:r,monitorListProps:e})),h&&i.a.createElement(ao,null))},Io=i.a.memo((()=>i.a.createElement(Kn,null,i.a.createElement(ko,null)))),wo=()=>i.a.createElement(d.EuiButton,{fill:!0,iconType:"beaker",isDisabled:!0},Ro),Ro=r.i18n.translate("xpack.synthetics.monitorSummary.runTestManually",{defaultMessage:"Run test manually"}),_o=()=>{const e=Object(g.useTheme)(),{latestPing:t,loading:a}=sn(),{monitor:n}=en();if(!n)return null;const s="browser"===n.type,l=a?i.a.createElement(d.EuiLoadingSpinner,{size:"s"}):t?"up"===t.monitor.status?i.a.createElement(d.EuiBadge,{color:e.eui.euiColorVis0},s?Po:No):i.a.createElement(d.EuiBadge,{color:e.eui.euiColorVis9},s?Lo:Do):i.a.createElement(d.EuiBadge,{color:"default"},Fo);return i.a.createElement(d.EuiDescriptionList,{listItems:[{title:jo,description:l}]})},jo=r.i18n.translate("xpack.synthetics.monitorStatus.statusLabel",{defaultMessage:"Status"}),Lo=r.i18n.translate("xpack.synthetics.monitorStatus.failedLabel",{defaultMessage:"Failed"}),Fo=r.i18n.translate("xpack.synthetics.monitorStatus.pendingLabel",{defaultMessage:"Pending"}),Po=r.i18n.translate("xpack.synthetics.monitorStatus.succeededLabel",{defaultMessage:"Succeeded"}),No=r.i18n.translate("xpack.synthetics.monitorStatus.upLabel",{defaultMessage:"Up"}),Do=r.i18n.translate("xpack.synthetics.monitorStatus.downLabel",{defaultMessage:"Down"}),Ao=()=>{const{monitor:e}=en(),{services:t}=Object(p.useKibana)(),{locations:a}=G(),s=Object(g.useTheme)(),{locations:l,loading:o}=W(),c=nn(),[u,m]=Object(n.useState)(!1),E=Object(n.useCallback)((()=>m(!0)),[]),h=Object(n.useCallback)((()=>m(!1)),[]),b=Object(n.useMemo)((()=>{if(!c||!e)return"";if(null!=e&&e.locations&&e.locations.length>1){const n=i.a.createElement(d.EuiLink,{onClick:E},c.label," ",i.a.createElement(d.EuiIcon,{type:"arrowDown"})),m=o?[i.a.createElement("span",null,"Loading...")]:e.locations.map((n=>{var r,o;const c=a.find((e=>e.id===n.id));if(!c)return;const u=l.find((e=>{var t,a;return(null===(t=e.observer)||void 0===t||null===(a=t.geo)||void 0===a?void 0:a.name)===c.label})),m=void 0===u?"subdued":(null!==(r=null==u||null===(o=u.summary)||void 0===o?void 0:o.down)&&void 0!==r?r:0)>0?s.eui.euiColorVis9:s.eui.euiColorVis0;return i.a.createElement(d.EuiContextMenuItem,{key:n.label,icon:i.a.createElement(d.EuiHealth,{color:m}),onClick:()=>{h(),t.application.navigateToApp(B.a.SYNTHETICS_PLUGIN_ID,{path:`/monitor/${e.config_id}?locationId=${c.id}`})}},c.label)})).filter((e=>void 0!==typeof e));return i.a.createElement(d.EuiPopover,{button:n,isOpen:u,closePopover:h,panelPaddingSize:"none"},i.a.createElement(d.EuiContextMenuPanel,{items:m,size:"s",title:r.i18n.translate("xpack.synthetics.monitorLocation.locationContextMenuTitleLabel",{defaultMessage:"Go to location"})}))}return c.label}),[h,u,o,a,l,e,E,c,t.application,s]);return c&&e?i.a.createElement(d.EuiDescriptionList,{listItems:[{title:Ho,description:b}]}):null},Ho=r.i18n.translate("xpack.synthetics.monitorLocation.locationLabel",{defaultMessage:"Location"}),Bo=()=>{const{monitor:e}=en(),{latestPing:t,loading:a}=sn();if(!e)return null;const n=a?i.a.createElement(d.EuiLoadingSpinner,{size:"s"}):t?tt()(t.timestamp).fromNow():"--";return i.a.createElement(d.EuiDescriptionList,{listItems:[{title:zo,description:n}]})},zo=r.i18n.translate("xpack.synthetics.monitorLastRun.lastRunLabel",{defaultMessage:"Last run"}),Uo=e=>{const{observability:t}=Object(p.useKibana)().services,{ExploratoryViewEmbeddable:a}=t,{monitorId:n}=Object(u.useParams)(),{euiTheme:s}=Object(d.useEuiTheme)(),l=nn();return l?i.a.createElement(a,{reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{seriesType:"area",time:e,reportDefinitions:{"monitor.id":[n],"observer.geo.name":[null==l?void 0:l.label]},dataType:"synthetics",selectedMetricField:"state.up",name:"Monitor errors",color:s.colors.danger,operationType:"unique_count"}]}):null};a(213);const $o=r.i18n.translate("xpack.synthetics.monitorDetails.availability.label",{defaultMessage:"Availability"}),Go=r.i18n.translate("xpack.synthetics.monitorDetails.complete.label",{defaultMessage:"Complete"}),Vo=r.i18n.translate("xpack.synthetics.monitorDetails.failed.label",{defaultMessage:"Failed"}),qo=r.i18n.translate("xpack.synthetics.monitorDetails.skipped.label",{defaultMessage:"Skipped"}),Ko=(r.i18n.translate("xpack.synthetics.monitorDetails.error.label",{defaultMessage:"Error"}),r.i18n.translate("xpack.synthetics.monitorDetails.status",{defaultMessage:"Status"})),Wo=r.i18n.translate("xpack.synthetics.monitorDetails.last24Hours",{defaultMessage:"Last 24 hours"}),Yo=r.i18n.translate("xpack.synthetics.monitorDetails.viewHistory",{defaultMessage:"View History"}),Xo=r.i18n.translate("xpack.synthetics.monitorDetails.brushArea.message",{defaultMessage:"Brush an area for higher fidelity"}),Jo=({from:e,to:t,periodCaption:a,showViewHistoryButton:n})=>{const s=Object(u.useHistory)(),l=A(),{monitor:r}=en(),c=a||("now-24h"===e&&"now"===t?Wo:"");return i.a.createElement(Zo,{direction:"row",alignItems:"baseline"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h4",null,Ko))),c?i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"xs",color:"subdued"},c)):null,i.a.createElement(d.EuiFlexItem,{grow:!0}),n?i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLink,{href:null!=r&&r[Y.b.CONFIG_ID]?s.createHref({pathname:o.u.replace(":monitorId",r[Y.b.CONFIG_ID]),search:Object(N.a)({...l,dateRangeStart:"now-24h",dateRangeEnd:"now"},!0)}):void 0},i.a.createElement(d.EuiButtonEmpty,{"data-test-subj":"monitorStatusChartViewHistoryButton",size:"xs",iconType:"list"},Yo))):null)};var Zo=lt()(d.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-1ezfhq8-0"})(["margin-bottom:0;"]);const Qo=d.VISUALIZATION_COLORS[0],ec=d.VISUALIZATION_COLORS[d.VISUALIZATION_COLORS.length-1];function tc(e,t){const a=t===d.COLOR_MODES_STANDARD.dark?d.transparentize:d.tint;return[{color:ec,start:-1/0,end:-1},{color:ec,start:-1,end:-.75},{color:a(ec,.25),start:-.75,end:-.5},{color:a(ec,.5),start:-.5,end:-.25},{color:a(ec,.75),start:-.25,end:-1e-9},{color:ac(e),start:-1e-9,end:1e-9},{color:a(Qo,.5),start:1e-9,end:.25},{color:a(Qo,.35),start:.25,end:.5},{color:a(Qo,.2),start:.5,end:.8},{color:Qo,start:.8,end:1},{color:Qo,start:1,end:1/0}]}function ac(e){return e.colors.lightestShade}function nc(e){if("number"==typeof e)return e;let t=e;return"string"==typeof e&&(t=S.a.parse(e,{momentInstance:tt.a})),tt()(t).valueOf()}const ic=({timeBin:e})=>{var t,a;const{euiTheme:n}=Object(d.useEuiTheme)(),s=Object(c.useSelector)(U.B);if(!e)return i.a.createElement(i.a.Fragment,null,"");const l=tt()(e.start),r=tt()(e.end),o=l.format("LL"),u=l.format("HH:mm"),m=r.format("HH:mm"),p=`${o} @ ${u} - ${l.dayOfYear()!==r.dayOfYear()?`${r.format("LL")} @ `:""}${m}`,E=e.ups+e.downs>0?`${Math.round(e.ups/(e.ups+e.downs)*100)}%`:"-";return i.a.createElement(i.a.Fragment,null,i.a.createElement(le.TooltipHeader,null,i.a.createElement(lc,{size:"xs",$_css:Object(rt.css)({border:0,fontWeight:n.font.weight.bold})},p)),s?i.a.createElement(d.EuiProgress,{size:"xs"}):i.a.createElement(le.TooltipDivider,null),i.a.createElement(rc,{$_css2:Object(rt.css)({border:0,padding:n.size.xs})},i.a.createElement(le.TooltipTable,null,i.a.createElement(le.TooltipTableBody,null,i.a.createElement(le.TooltipTableRow,null,i.a.createElement(sc,{label:$o,value:E})),i.a.createElement(le.TooltipTableRow,null,i.a.createElement(sc,{label:Go,value:null!==(t=`${e.ups}`)&&void 0!==t?t:"",color:Qo})),i.a.createElement(le.TooltipTableRow,null,i.a.createElement(sc,{label:Vo,value:null!==(a=`${e.downs}`)&&void 0!==a?a:"",color:ec}))))))},sc=({color:e,label:t,value:a})=>{const{euiTheme:n}=Object(d.useEuiTheme)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(oc,{$_css3:Object(rt.css)({outline:0,border:0,borderLeft:4,borderStyle:"solid",borderColor:null!=e?e:"transparent",padding:n.size.s})},i.a.createElement(d.EuiText,{size:"xs"},t)),i.a.createElement(le.TooltipTableCell,null," "),i.a.createElement(cc,{$_css4:Object(rt.css)({border:0,padding:n.size.xs,textAlign:"right"})},i.a.createElement(uc,{size:"xs",$_css5:Object(rt.css)({border:0,fontWeight:n.font.weight.bold})},a)))};var lc=lt()(d.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-18xc4xc-0"})(["",""],(e=>e.$_css)),rc=lt()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-18xc4xc-1"})(["",""],(e=>e.$_css2)),oc=lt()(le.TooltipTableCell).withConfig({displayName:"_StyledTooltipTableCell",componentId:"sc-18xc4xc-2"})(["",""],(e=>e.$_css3)),cc=lt()(le.TooltipTableCell).withConfig({displayName:"_StyledTooltipTableCell2",componentId:"sc-18xc4xc-3"})(["",""],(e=>e.$_css4)),uc=lt()(d.EuiText).withConfig({displayName:"_StyledEuiText2",componentId:"sc-18xc4xc-4"})(["",""],(e=>e.$_css5));const dc=({brushable:e})=>{const{euiTheme:t}=Object(d.useEuiTheme)(),a=Object(n.useMemo)((()=>({color:e,label:t,iconType:a="dot"})=>i.a.createElement(mc,{grow:!1},i.a.createElement(d.EuiIcon,{type:a,color:e}),i.a.createElement(d.EuiText,{size:"xs"},t))),[]);return i.a.createElement(d.EuiFlexGroup,{wrap:!0,responsive:!1},i.a.createElement(a,{color:Qo,label:Go}),i.a.createElement(a,{color:ec,label:Vo}),i.a.createElement(a,{color:ac(t),label:qo}),e?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexItem,{"aria-hidden":!0,grow:!0}),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"xs",color:t.colors.subduedText},Xo))):null)};var mc=lt()(d.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-4wu9ae-0"})(["display:flex;flex-direction:row;gap:2px;"]),pc=a(161);const Ec=({from:e,to:t})=>{const{lastRefresh:a}=y(),{monitor:i}=en(),s=Math.max(3,null!=i&&i.schedule?Object(pc.b)(null==i?void 0:i.schedule):3),l=nc(e),r=nc(t),o=Math.ceil(r-l)/6e4,u=(({from:e,to:t,size:a,monitorInterval:i,lastRefresh:s})=>{const{monitor:l}=en(),r=nn(),o=Object(n.useCallback)((()=>{var e,t;return Object(U.J)(null!==(e=null==l?void 0:l[Y.b.CONFIG_ID])&&void 0!==e?e:"",null!==(t=null==r?void 0:r.label)&&void 0!==t?t:"")}),[l,null==r?void 0:r.label]),u=Object(c.useSelector)(U.B),d=Object(c.useSelector)(o()),m=Object(c.useDispatch)(),p=Object(n.useRef)({monitorId:"",locationLabel:"",to:0,from:0,lastRefresh:0}),E=Math.abs(p.current.to-t)/6e4,g=Math.abs(p.current.from-e)/6e4,h=Math.abs(p.current.lastRefresh-s)/6e4,b=E>=i||g>=i||h>=3||(null==l?void 0:l.id)!==p.current.monitorId||(null==r?void 0:r.label)!==p.current.locationLabel;return Object(n.useEffect)((()=>{!u&&b&&null!=l&&l.id&&null!=r&&r.label&&e&&t&&a&&(m(U.r.get({monitorId:l.id,locationId:r.label,from:e,to:t,size:a})),p.current={monitorId:l.id,locationLabel:null==r?void 0:r.label,to:t,from:e,lastRefresh:s})}),[m,null==l?void 0:l.id,null==r?void 0:r.label,e,t,a,b,s]),d.filter((({timestamp:a})=>{const n=Number(new Date(a));return n>=e&&n<=t}))})({from:l,to:r,size:Math.min(1e4,Math.ceil(o/s*2)),monitorInterval:s,lastRefresh:a}),[d,m]=Object(n.useState)(50),p=Math.floor(Math.max(s,o/d)),E=Object(n.useCallback)(Object(Yt.throttle)((e=>{m(Math.floor(e.width/17))}),500),[]),{timeBins:g,timeBinsByEndTime:h,xDomain:b}=Object(n.useMemo)((()=>{var e,t,a,n;const i=function(e,t){let a=0;return(null!=e?e:[]).map((e=>{const n={start:e.start,end:e.end,ups:0,downs:0,value:0};for(;a<t.length&&tt()(t[a].timestamp).valueOf()<e.end;){var i,s,l,r;n.ups+=null!==(i=null===(s=t[a])||void 0===s?void 0:s.summary.up)&&void 0!==i?i:0,n.downs+=null!==(l=null===(r=t[a])||void 0===r?void 0:r.summary.down)&&void 0!==l?l:0,n.value=(o=n.ups,c=n.downs,o===c?-.1:(o-c)/(o+c)),a++}var o,c;return n}))}(function(e,t,a){const n=function(e,t){const a=Math.floor(e)%60,n=Math.ceil(new Date(t).getUTCMinutes()/a)*a;return tt()(t).utc().startOf("hour").add(n,"minute").valueOf()}(e,a),i=[];let s=n,l=5e3;for(;s>=t&&l>0;){const t=s-Math.floor(60*e*1e3);i.unshift({start:t,end:s}),s=t,--l}return i}(p,l,r),u),s=function(e){return e.reduce(((e,t)=>e.set(t.end,t)),new Map)}(i);return{timeBins:i,timeBinsByEndTime:s,xDomain:{min:null!==(e=null==i||null===(t=i[0])||void 0===t?void 0:t.end)&&void 0!==e?e:l,max:null!==(a=null==i||null===(n=i[i.length-1])||void 0===n?void 0:n.end)&&void 0!==a?a:r}}}),[p,u,l,r]);return{intervalByWidth:p,timeBins:g,xDomain:b,handleResize:E,getTimeBinByXValue:e=>void 0===e?void 0:h.get(e)}},gc=({from:e="now-24h",to:t="now",brushable:a=!0,periodCaption:s,showViewHistoryButton:l=!1,onBrushed:r})=>{const{euiTheme:o,colorMode:c}=Object(d.useEuiTheme)(),{timeBins:u,handleResize:m,getTimeBinByXValue:p,xDomain:E,intervalByWidth:g}=Ec({from:e,to:t}),h=Object(n.useMemo)((()=>function(e,t){return{grid:{cellHeight:{min:20},stroke:{width:0,color:"transparent"}},maxRowHeight:30,maxColumnWidth:17,cell:{maxWidth:"fill",maxHeight:3,label:{visible:!1},border:{stroke:"transparent",strokeWidth:.5}},xAxisLabel:{visible:!0,fontSize:10,fontFamily:e.font.family,fontWeight:e.font.weight.light,textColor:e.colors.subduedText},yAxisLabel:{visible:!1},brushTool:{visible:t,fill:e.colors.darkShade}}}(o,a)),[o,a]);return i.a.createElement(d.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(Jo,{from:e,to:t,brushable:a,periodCaption:s,showViewHistoryButton:l,onBrushed:r}),i.a.createElement(d.EuiResizeObserver,{onResize:m},(e=>{return i.a.createElement("div",{ref:e},i.a.createElement(hc,null,i.a.createElement(le.Settings,{showLegend:!1,xDomain:E,tooltip:{customTooltip:({values:e})=>{var t,a;return i.a.createElement(ic,{timeBin:p(null==e||null===(t=e[0])||void 0===t||null===(a=t.datum)||void 0===a?void 0:a.x)})}},theme:{heatmap:h},onBrushEnd:e=>{null==r||r(function(e){var t,a;const[n,i]=[Number(null===(t=e.x)||void 0===t?void 0:t[0]),Number(null===(a=e.x)||void 0===a?void 0:a[1])],[s,l]=[tt()(n).format(),tt()(i).format()];return{from:n,to:i,fromUtc:s,toUtc:l}}(e))}}),i.a.createElement(le.Heatmap,{id:"monitor-details-monitor-status-chart",colorScale:{type:"bands",bands:tc(o,c)},data:u,xAccessor:e=>e.end,yAccessor:()=>"T",valueAccessor:e=>e.value,valueFormatter:e=>e.toFixed(2),xAxisLabelFormatter:(t=g,e=>{const a=tt()(e),[n,i]=[a.hours(),a.minutes()],s=0===n&&i<=36,l=t>=1440;return tt()(e).format(s||l?"l":"HH:mm")}),timeZone:"UTC",xScale:{type:le.ScaleType.Time,interval:{type:"calendar",unit:"m",value:g}}})));var t})),i.a.createElement(dc,{brushable:a}))};var hc=lt()(le.Chart).withConfig({displayName:"_StyledChart",componentId:"sc-9be0nh-0"})({height:60});const bc=e=>{const{services:{observability:{ExploratoryViewEmbeddable:t}}}=Object(p.useKibana)(),a=Pn(),n=Object(g.useTheme)(),s=nn();return s&&a?i.a.createElement(i.a.Fragment,null,i.a.createElement(t,{reportType:g.ReportTypes.KPI,axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{seriesType:"area",time:e,name:"Monitor duration",dataType:"synthetics",selectedMetricField:"monitor.duration.us",reportDefinitions:{"monitor.id":[a],"observer.geo.name":[null==s?void 0:s.label]},color:n.eui.euiColorVis1}]})):null},fc=e=>{const{observability:t}=Object(p.useKibana)().services,{ExploratoryViewEmbeddable:a}=t,n=Pn(),s=nn();return s&&n?i.a.createElement(a,{customHeight:"240px",reportType:"kpi-over-time",attributes:Object.keys(Tc).map((t=>({dataType:"synthetics",time:e,name:Tc[t],selectedMetricField:"monitor.duration.us",reportDefinitions:{"monitor.id":[n],"observer.geo.name":[null==s?void 0:s.label]},seriesType:"line",operationType:t})))}):null},yc=r.i18n.translate("xpack.synthetics.durationTrend.min",{defaultMessage:"Min"}),vc=r.i18n.translate("xpack.synthetics.durationTrend.max",{defaultMessage:"Max"}),Sc=r.i18n.translate("xpack.synthetics.durationTrend.median",{defaultMessage:"Median"}),xc=r.i18n.translate("xpack.synthetics.durationTrend.percentile25",{defaultMessage:"25th"}),Tc={max:vc,"75th":r.i18n.translate("xpack.synthetics.durationTrend.percentile75",{defaultMessage:"75th"}),median:Sc,"25th":xc,min:yc},Mc=e=>{const{services:{observability:{ExploratoryViewEmbeddable:t}}}=Object(p.useKibana)(),a=nn(),n=Pn();return a&&n?i.a.createElement(t,{align:"left",customHeight:"70px",reportType:g.ReportTypes.SINGLE_METRIC,attributes:[{time:e,name:"Monitor availability",dataType:"synthetics",selectedMetricField:"monitor_availability",reportDefinitions:{"monitor.id":[n],"observer.geo.name":[null==a?void 0:a.label]}}]}):null},Cc=e=>{const{services:{observability:{ExploratoryViewEmbeddable:t}}}=Object(p.useKibana)(),a=nn(),n=Pn();return a&&n?i.a.createElement(t,{align:"left",customHeight:"70px",reportType:g.ReportTypes.SINGLE_METRIC,attributes:[{time:e,name:"Monitor duration",dataType:"synthetics",selectedMetricField:"monitor_duration",reportDefinitions:{"monitor.id":[n],"observer.geo.name":[null==a?void 0:a.label]}}]}):null},Oc=e=>{const{services:{observability:{ExploratoryViewEmbeddable:t}}}=Object(p.useKibana)(),a=Pn(),n=Object(g.useTheme)(),s=nn();return s&&a?i.a.createElement(t,{customHeight:"70px",reportType:g.ReportTypes.KPI,axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{seriesType:"area",time:e,name:"Monitor availability",dataType:"synthetics",selectedMetricField:"monitor_availability",reportDefinitions:{"monitor.id":[a],"observer.geo.name":[null==s?void 0:s.label]},color:n.eui.euiColorVis1}]}):null},kc=({ping:e,loading:t})=>{var a,n,s,l,r,o,c,u,m,p;const E=t||null==e||null===(a=e.resolve)||void 0===a?void 0:a.ip,g=t?NaN:null!==(n=null==e||null===(s=e.monitor)||void 0===s||null===(l=s.duration)||void 0===l?void 0:l.us)&&void 0!==n?n:NaN,h=t?NaN:null!==(r=null==e||null===(o=e.resolve)||void 0===o||null===(c=o.rtt)||void 0===c?void 0:c.us)&&void 0!==r?r:NaN,b=t||null==e||null===(u=e.url)||void 0===u?void 0:u.full,f=t||null==e||null===(m=e.http)||void 0===m||null===(p=m.response)||void 0===p?void 0:p.status_code;return i.a.createElement(d.EuiDescriptionList,{type:"column",compressed:!0},i.a.createElement(d.EuiDescriptionListTitle,null,"IP"),i.a.createElement(d.EuiDescriptionListDescription,null,E),i.a.createElement(d.EuiDescriptionListTitle,null,Ic),i.a.createElement(d.EuiDescriptionListDescription,null,isNaN(g)?"":xn(g)),i.a.createElement(d.EuiDescriptionListTitle,null,"rtt"),i.a.createElement(d.EuiDescriptionListDescription,null,isNaN(h)?"":xn(h)),i.a.createElement(d.EuiDescriptionListTitle,null,"URL"),i.a.createElement(d.EuiDescriptionListDescription,null,b),f?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiDescriptionListTitle,null,"Response status"),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(d.EuiBadge,null,f))):null)},Ic=r.i18n.translate("xpack.synthetics.monitor.duration.label",{defaultMessage:"Duration"}),wc=()=>{var e,t;const{euiTheme:a}=Object(d.useEuiTheme)(),{latestPing:n,loading:s}=sn(),{lastRefresh:l}=y(),{monitor:o}=en(),{data:c,loading:u}=Fn(null==n||null===(e=n.monitor)||void 0===e?void 0:e.check_group,l),m=u||s;return i.a.createElement(jc,{hasShadow:!1,hasBorder:!0},i.a.createElement(Rc,{monitor:o,latestPing:n,loading:m}),!m&&null!=n&&n.error?i.a.createElement(d.EuiCallOut,{"data-test-subj":"monitorTestRunErrorCallout",style:{marginTop:a.base,borderRadius:a.border.radius.medium,fontWeight:a.font.weight.semiBold},title:null==n?void 0:n.error.message,size:"s",color:"danger",iconType:"alert"},i.a.createElement(d.EuiButton,{"data-test-subj":"monitorTestRunViewErrorDetails",color:"danger"},r.i18n.translate("xpack.synthetics.monitorDetails.summary.viewErrorDetails",{defaultMessage:"View error details"}))):null,i.a.createElement(d.EuiSpacer,{size:"m"}),(null==o?void 0:o.type)===Y.f.BROWSER?i.a.createElement(On,{steps:null!==(t=null==c?void 0:c.steps)&&void 0!==t?t:[],loading:u,showStepNumber:!0}):i.a.createElement(kc,{ping:n,loading:m}))},Rc=({monitor:e,latestPing:t,loading:a})=>{var s;const{euiTheme:l}=Object(d.useEuiTheme)(),{basePath:o}=ne(),{monitorId:c}=Object(u.useParams)(),m=Jt(),p=Object(n.useMemo)((()=>null!=t&&t.timestamp?Tn(null==t?void 0:t.timestamp,m):""),[null==t?void 0:t.timestamp,m]),E=(null==e?void 0:e[Y.b.MONITOR_TYPE])===Y.f.BROWSER,g=i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,_c));return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!1},g),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Lc,{lines:1})),i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(d.EuiLoadingContent,{lines:1})),i.a.createElement(d.EuiFlexItem,null,E?i.a.createElement(d.EuiLoadingContent,{lines:1}):null))):t?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!1},g),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(gn,{status:hn((null==t||null===(s=t.summary)||void 0===s?void 0:s.down)>0?"fail":"success")})),i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(d.EuiText,{size:"xs",color:l.colors.darkShade},p)),E?i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{"data-test-subj":"monitorSummaryViewLastTestRun",size:"xs",iconType:"inspect",iconSide:"left",href:`${o}/app/synthetics/monitor/${c}/test-run/${null==t?void 0:t.monitor.check_group}`},r.i18n.translate("xpack.synthetics.monitorDetails.summary.viewTestRun",{defaultMessage:"View test run"}))):null)):i.a.createElement(i.a.Fragment,null,g)},_c=r.i18n.translate("xpack.synthetics.monitorDetails.summary.lastTestRunTitle",{defaultMessage:"Last test run"});var jc=lt()(d.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-hq8lwd-0"})({minHeight:356}),Lc=lt()(d.EuiLoadingContent).withConfig({displayName:"_StyledEuiLoadingContent",componentId:"sc-hq8lwd-1"})({width:52});const Fc=({isBrowserMonitor:e,timestamp:t,ping:a})=>{var n;const{euiTheme:s}=Object(d.useEuiTheme)(),{basePath:l}=ne(),r=Jt(),o=i.a.createElement(Pc,{size:"s",$_css:s.font.weight.medium},Tn(t,r));return e?i.a.createElement(d.EuiLink,{href:`${l}/app/synthetics/monitor/${null!==(n=null==a?void 0:a.config_id)&&void 0!==n?n:""}/test-run/${a.monitor.check_group}`},o):o};var Pc=lt()(d.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-49af59-0"})((e=>({fontWeight:e.$_css})));const Nc=({checkGroupId:e})=>{var t,a,s;const{loading:l,stepEnds:r}=Fn(e),o=r.map((e=>{var t,a,n;return null!==(t=null==e||null===(a=e.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.name)&&void 0!==t?t:""})),c=Object(n.useMemo)((()=>{const e=[...r];return e.sort(((e,t)=>Number(new Date(t["@timestamp"]))-Number(new Date(e["@timestamp"])))),e.find((e=>{var t,a,n;return"skipped"!==hn(null!==(t=null==e||null===(a=e.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.status)&&void 0!==t?t:"skipped")}))}),[r]);return i.a.createElement(Ht,{checkGroup:null==c?void 0:c.monitor.check_group,initialStepNo:null==c||null===(t=c.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index,stepStatus:null==c||null===(s=c.synthetics.payload)||void 0===s?void 0:s.status,allStepsLoaded:!l,stepLabels:o,retryFetchOnRevisit:!1})},Dc=({paginable:e=!0,from:t,to:a})=>{var s,l;const m=Object(u.useHistory)(),{monitorId:p}=Object(u.useParams)(),{basePath:E}=ne(),[g,h]=Object(n.useState)({index:0,size:10}),[b,f]=Object(n.useState)("timestamp"),[v,S]=Object(n.useState)("desc"),{lastRefresh:x}=y(),{pings:T,total:M,loading:C}=(e=>{const t=Object(c.useDispatch)(),{monitor:a}=en(),i=nn(),s=null==a?void 0:a.id,l=null==i?void 0:i.label;Object(n.useEffect)((()=>{s&&l&&t(U.s.get({monitorId:s,locationId:l,size:null==e?void 0:e.pageSize,pageIndex:null==e?void 0:e.pageIndex,from:null==e?void 0:e.from,to:null==e?void 0:e.to}))}),[t,s,l,null==e?void 0:e.lastRefresh,null==e?void 0:e.pageSize,null==e?void 0:e.pageIndex,null==e?void 0:e.from,null==e?void 0:e.to]);const{total:r,data:o,loading:u}=Object(c.useSelector)(U.E);return{loading:u,total:r,pings:o}})({from:t,to:a,lastRefresh:x,pageSize:g.size,pageIndex:g.index}),O=Object(n.useMemo)((()=>function(e,t,a){const n=[...e];return n.sort(((e,n)=>{var i,s;let l=null!==(i=Object(Yt.get)(e,t))&&void 0!==i?i:null,r=null!==(s=Object(Yt.get)(n,t))&&void 0!==s?s:null;return null===l||null===r?0:("timestamp"===t&&(l=new Date(l),r=new Date(r)),"monitor.status"===t&&(l="up"===l?-1:1,r="up"===r?-1:1),"string"==typeof l?"asc"===a?l.localeCompare(r):r.localeCompare(l):"asc"===a?l-r:r-l)})),n}(T,b,v)),[T,b,v]),k=Object(c.useSelector)(U.K),{monitor:I}=en(),w=(null==I?void 0:I[Y.b.MONITOR_TYPE])===Y.f.BROWSER,R={sort:{field:b,direction:v}},_=[...w?[{align:"left",field:"timestamp",name:Bc,render:(e,t)=>i.a.createElement(Nc,{checkGroupId:t.monitor.check_group})}]:[],{align:"left",valign:"middle",field:"timestamp",name:"@timestamp",sortable:!0,render:(e,t)=>i.a.createElement(Fc,{isBrowserMonitor:w,timestamp:e,ping:t})},{align:"left",valign:"middle",field:"monitor.status",name:zc,sortable:!0,render:e=>i.a.createElement(gn,{status:hn(null!=e?e:"skipped")})},{align:"left",field:"error.message",name:Uc,textOnly:!0,render:e=>i.a.createElement(d.EuiText,{size:"s"},(null==e?void 0:e.length)>0?e:"-")},{align:"right",valign:"middle",field:"monitor.duration.us",name:$c,sortable:!0,render:e=>i.a.createElement(d.EuiText,{size:"s"},xn(e))}],j=null!==(s=null==I?void 0:I[Y.b.CUSTOM_HEARTBEAT_ID])&&void 0!==s?s:null==I?void 0:I[Y.b.MONITOR_QUERY_ID];return i.a.createElement(Gc,{hasShadow:!1,hasBorder:!0},i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,e||(null==T?void 0:T.length)<10?Ac:Hc))),i.a.createElement(d.EuiFlexItem,{grow:!0}),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{size:"xs",iconType:"list",iconSide:"left","data-test-subj":"monitorSummaryViewLastTestRun",disabled:!j,href:`${E}/app/uptime/monitor/${btoa(null!=j?j:"")}`},r.i18n.translate("xpack.synthetics.monitorDetails.summary.viewHistory",{defaultMessage:"View History"})))),i.a.createElement(d.EuiBasicTable,{compressed:!1,loading:C,columns:_,error:null==k||null===(l=k.body)||void 0===l?void 0:l.message,items:O,noItemsMessage:C?r.i18n.translate("xpack.synthetics.monitorDetails.loadingTestRuns",{defaultMessage:"Loading test runs..."}):r.i18n.translate("xpack.synthetics.monitorDetails.noDataFound",{defaultMessage:"No data found"}),tableLayout:"auto",sorting:R,onChange:({page:e,sort:t})=>{void 0!==e&&h(e),void 0!==t&&(f(t.field),S(t.direction))},rowProps:e=>e.monitor.type!==o.x.BROWSER?{}:{height:"85px","data-test-subj":`row-${e.monitor.check_group}`,onClick:t=>{var a;const n=t.target;"IMG"===n.tagName||"path"===n.tagName||null!==(a=n.parentElement)&&void 0!==a&&a.classList.contains("euiLink")||m.push(`/monitor/${p}/test-run/${e.monitor.check_group}`)}},pagination:e?{pageIndex:g.index,pageSize:g.size,totalItemCount:M,pageSizeOptions:[10,20,50]}:void 0}))},Ac=r.i18n.translate("xpack.synthetics.monitorDetails.summary.testRuns",{defaultMessage:"Test Runs"}),Hc=r.i18n.translate("xpack.synthetics.monitorDetails.summary.lastTenTestRuns",{defaultMessage:"Last 10 Test Runs"}),Bc=r.i18n.translate("xpack.synthetics.monitorDetails.summary.screenshot",{defaultMessage:"Screenshot"}),zc=r.i18n.translate("xpack.synthetics.monitorDetails.summary.result",{defaultMessage:"Result"}),Uc=r.i18n.translate("xpack.synthetics.monitorDetails.summary.message",{defaultMessage:"Message"}),$c=r.i18n.translate("xpack.synthetics.monitorDetails.summary.duration",{defaultMessage:"Duration"});var Gc=lt()(d.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-kr3tj8-0"})({minHeight:200});const Vc=e=>{const{observability:t}=Object(p.useKibana)().services,{ExploratoryViewEmbeddable:a}=t,n=Pn(),s=nn();return s&&n?i.a.createElement(a,{align:"left",customHeight:"70px",reportType:g.ReportTypes.SINGLE_METRIC,attributes:[{time:e,reportDefinitions:{"monitor.id":[n],"observer.geo.name":[null==s?void 0:s.label]},dataType:"synthetics",selectedMetricField:"monitor_errors",name:"synthetics-series-1"}]}):null},qc=()=>{const{from:e}=(()=>{const{monitor:e,loading:t}=en();return Object(n.useMemo)((()=>null!=e&&e.created_at&&tt()(null==e?void 0:e.created_at).diff(tt()().subtract(30,"day"),"days")>0?{from:null==e?void 0:e.created_at,loading:t}:{from:"now-30d/d",loading:t}),[null==e?void 0:e.created_at,t])})(),{from:t,to:a}=x({from:e,to:"now"}),s="now-30d/d"===t?Xc:Wc;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(ln,null)),i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(Jc,{hasShadow:!1,hasBorder:!0,paddingSize:"m"},i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Kc))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{color:"subdued",size:"s"},s))),i.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Mc,{from:t,to:a})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Oc,{from:t,to:a})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Cc,{from:t,to:a})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(bc,{from:t,to:a})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Vc,{from:t,to:a})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Uo,{from:t,to:a})))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiPanel,{hasShadow:!1,paddingSize:"m",hasBorder:!0},i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Yc))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{color:"subdued",size:"s"},s))),i.a.createElement(fc,{from:t,to:a})))))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(gc,{from:"now-24h",to:"now",brushable:!1,showViewHistoryButton:!0}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(wc,null)),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Nn,null))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(g.LoadWhenInView,{placeholderTitle:Hc},i.a.createElement(Dc,{paginable:!1,from:t,to:a})))},Kc=r.i18n.translate("xpack.synthetics.detailsPanel.summary",{defaultMessage:"Summary"}),Wc=r.i18n.translate("xpack.synthetics.detailsPanel.toDate",{defaultMessage:"To date"}),Yc=r.i18n.translate("xpack.synthetics.detailsPanel.durationTrends",{defaultMessage:"Duration trends"}),Xc=r.i18n.translate("xpack.synthetics.detailsPanel.last30Days",{defaultMessage:"Last 30 days"});var Jc=lt()(d.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-oqymej-0"})({height:120});const Zc=({fullWidth:e})=>{const[t,a]=H(),{commonlyUsedRanges:s}=Object(n.useContext)(te),{refreshApp:l}=Object(n.useContext)(b),{data:r}=Object(n.useContext)(ue),c=null==r?void 0:r.query.timefilter.timefilter.getTime(),{autorefreshInterval:u,autorefreshIsPaused:m,dateRangeStart:p,dateRangeEnd:E}=t();Object(n.useEffect)((()=>{const{from:e,to:t}=null!=c?c:{};!((e,t)=>{const{DATE_RANGE_START:a,DATE_RANGE_END:n}=o.e;return e===a&&t===n})(p,E)||e===p&&t===E?e===p&&t===E||null==r||r.query.timefilter.timefilter.setTime({from:p,to:E}):a({dateRangeStart:e,dateRangeEnd:t})}),[]);const g=s?s.map((({from:e,to:t,display:a})=>({start:e,end:t,label:a}))):o.e.COMMONLY_USED_DATE_RANGES;return i.a.createElement(d.EuiSuperDatePicker,{width:e?"full":"auto",start:p,end:E,commonlyUsedRanges:g,isPaused:m,refreshInterval:u,onTimeChange:({start:e,end:t})=>{var n,i;null!=r&&null!==(n=r.query)&&void 0!==n&&null!==(i=n.timefilter)&&void 0!==i&&i.timefilter&&(null==r||r.query.timefilter.timefilter.setTime({from:e,to:t})),a({dateRangeStart:e,dateRangeEnd:t}),l()},onRefresh:l,onRefreshChange:({isPaused:e,refreshInterval:t})=>{a({autorefreshInterval:void 0===t?u:t,autorefreshIsPaused:e})}})},Qc=e=>{const{observability:t}=Object(p.useKibana)().services,{ExploratoryViewEmbeddable:a}=t,n=Pn(),s=nn();return n&&s?i.a.createElement(a,{align:"left",reportType:g.ReportTypes.SINGLE_METRIC,attributes:[{time:e,reportDefinitions:{"monitor.id":[n],"observer.geo.name":[s.label]},dataType:"synthetics",selectedMetricField:"monitor_complete",name:"synthetics-series-1"}]}):null},eu=e=>{const{observability:t}=Object(p.useKibana)().services,{ExploratoryViewEmbeddable:a}=t,n=Pn(),s=nn();return n&&s?i.a.createElement(a,{align:"left",reportType:g.ReportTypes.SINGLE_METRIC,attributes:[{time:e,reportDefinitions:{"monitor.id":[n],"observer.geo.name":[s.label]},dataType:"synthetics",selectedMetricField:"monitor_total_runs",name:"synthetics-series-1"}]}):null},tu=e=>{const{observability:t}=Object(p.useKibana)().services,{ExploratoryViewEmbeddable:a}=t,n=Pn(),s=nn(),{euiTheme:l}=Object(d.useEuiTheme)();return n&&s?i.a.createElement(a,{reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{seriesType:"area",time:e,reportDefinitions:{"monitor.id":[n],"observer.geo.name":[s.label]},dataType:"synthetics",selectedMetricField:"state.id",name:"Monitor complete",color:l.colors.success,operationType:"unique_count"}]}):null},au=()=>{const[e,t]=H(),{dateRangeStart:a,dateRangeEnd:s}=e(),{from:l,to:r}=x({from:a,to:s}),{elementRef:o,width:c}=function(){const[e,t]=Object(n.useState)(),a=Object(n.useRef)(),i=Object(n.useRef)(new ResizeObserver((e=>{e&&e[0]&&t({width:e[0].contentRect.width,height:e[0].contentRect.height})})));return Object(n.useEffect)((()=>{const e=a.current,t=i.current;return e&&t.observe(e),()=>{e&&t.unobserve(e)}}),[a.current,i.current]),{elementRef:a,...e}}(),u=c&&c<360?1:2,m=Object(n.useCallback)((({fromUtc:e,toUtc:a})=>{t({dateRangeStart:e,dateRangeEnd:a})}),[t]);return i.a.createElement(d.EuiFlexGroup,{direction:"column",gutterSize:"m"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Zc,{fullWidth:!0})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(d.EuiPanel,{hasShadow:!1,hasBorder:!0,panelRef:o},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,nu)),i.a.createElement(d.EuiFlexGrid,{columns:u,gutterSize:"s",responsive:!1},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Qc,{from:l,to:r})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(tu,{from:l,to:r})))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Mc,{from:l,to:r})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Oc,{from:l,to:r})))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Vc,{from:l,to:r})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Uo,{from:l,to:r})))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Cc,{from:l,to:r})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(bc,{from:l,to:r})))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(eu,{from:l,to:r}))))),i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(d.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,iu)),i.a.createElement(fc,{from:l,to:r}))))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(gc,{from:l,to:r,showViewHistoryButton:!1,periodCaption:"",brushable:!0,onBrushed:m})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Dc,{from:l,to:r})))},nu=r.i18n.translate("xpack.synthetics.historyPanel.stats",{defaultMessage:"Stats"}),iu=r.i18n.translate("xpack.synthetics.historyPanel.durationTrends",{defaultMessage:"Duration trends"}),su=e=>{const{observability:t}=Object(p.useKibana)().services,{ExploratoryViewEmbeddable:a}=t,n=Pn();return n?i.a.createElement(a,{reportType:"single-metric",attributes:[{time:e,reportDefinitions:{"monitor.id":[n]},dataType:"synthetics",selectedMetricField:"monitor_failed_tests",name:"synthetics-series-1"}]}):null},lu={terms:{"synthetics.type":["step/end"]}};var ru=a(211);const ou=()=>{var e;const[t,a]=Object(n.useState)(0),[s,l]=Object(n.useState)(10),[r,c]=Object(n.useState)("@timestamp"),[m,p]=Object(n.useState)("desc"),{errorStates:E,loading:h}=function(e){const{lastRefresh:t}=y(),{monitorId:a}=Object(u.useParams)(),{dateRangeStart:i,dateRangeEnd:s}=A(),{data:l,loading:r}=Object(g.useEsSearch)({index:o.G,body:{size:0,query:{bool:{filter:[V.c,V.b,{range:{"@timestamp":{gte:i,lte:s}}},{term:{"state.up":0}},{term:{config_id:a}}]}},sort:[{"@timestamp":"desc"}],aggs:{errorStates:{terms:{field:"state.id",size:1e3},aggs:{summary:{top_hits:{size:1,_source:["error","state","monitor"],sort:[{"@timestamp":"desc"}]}}}}}}},[t,a,e,i,s],{name:"getMonitorErrors"});return Object(n.useMemo)((()=>{var e,t;return{errorStates:(null!==(e=null==l||null===(t=l.aggregations)||void 0===t?void 0:t.errorStates.buckets)&&void 0!==e?e:[]).map((e=>{var t;return null===(t=e.summary.hits.hits)||void 0===t?void 0:t[0]._source})),loading:r}}),[l,r])}(),b=E.slice(t*s,t*s+s),f=Object(n.useMemo)((()=>E.slice(t*s,t*s+s).map((e=>e.monitor.check_group))),[E,t,s]),{failedSteps:v}=function(e){const{lastRefresh:t}=y(),{monitorId:a}=Object(u.useParams)(),{data:i,loading:s}=Object(g.useEsSearch)({index:(null==e?void 0:e.length)>0?o.G:"",body:{size:e.length,query:{bool:{filter:[lu,{exists:{field:"synthetics.error"}},{terms:{"monitor.check_group":e}}]}},sort:Object(ru.a)([{"synthetics.step.index":{order:"asc"}},{"@timestamp":{order:"asc"}}]),_source:["synthetics.step","synthetics.error","monitor.check_group"]}},[t,a,e],{name:"getMonitorErrorFailedStep"});return Object(n.useMemo)((()=>{var e;return{failedSteps:(null!==(e=null==i?void 0:i.hits.hits)&&void 0!==e?e:[]).map((e=>e._source)),loading:s}}),[i,s])}(f),S="browser"===(null===(e=E[0])||void 0===e?void 0:e.monitor.type),{basePath:x}=ne(),T=Object(u.useHistory)(),M=Jt(),C=[{field:"@timestamp",name:pu,sortable:!0,render:(e,t)=>{var a;return i.a.createElement(d.EuiLink,{href:`${x}/app/synthetics/error-details/${null===(a=t.state)||void 0===a?void 0:a.id}`},Tn(t.state.started_at,M))}},{field:"monitor.check_group",name:S?mu:du,truncateText:!0,render:(e,t)=>{var a,n,s,l,r,o;if(!S)return i.a.createElement(d.EuiText,{size:"s"},null!==(r=null===(o=t.error)||void 0===o?void 0:o.message)&&void 0!==r?r:"--");const c=v.find((t=>t.monitor.check_group===e));return c?i.a.createElement(d.EuiText,{size:"s"},null===(a=c.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index,". ",null===(s=c.synthetics)||void 0===s||null===(l=s.step)||void 0===l?void 0:l.name):i.a.createElement(i.a.Fragment,null,"--")}},{field:"state.duration_ms",name:uu,align:"right",render:e=>i.a.createElement(d.EuiText,null,xn(e,!0))}],O={pageIndex:t,pageSize:s,totalItemCount:E.length,pageSizeOptions:[3,5,8]};return i.a.createElement("div",null,i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiBasicTable,{tableCaption:cu,loading:h,items:b,columns:C,pagination:O,sorting:{sort:{field:r,direction:m}},onChange:({page:e={},sort:t={}})=>{const{index:n,size:i}=e,{field:s,direction:r}=t;a(n),l(i),c(s),p(r)},rowProps:e=>{const{state:t}=e;if(null!=t&&t.id)return{height:"85px","data-test-subj":`row-${t.id}`,onClick:e=>{T.push(`/error-details/${t.id}`)}}}}))},cu=r.i18n.translate("xpack.synthetics.errorsList.label",{defaultMessage:"Errors list"}),uu=r.i18n.translate("xpack.synthetics.errorDuration.label",{defaultMessage:"Error duration"}),du=r.i18n.translate("xpack.synthetics.errorMessage.label",{defaultMessage:"Error message"}),mu=r.i18n.translate("xpack.synthetics.failedStep.label",{defaultMessage:"Failed step"}),pu=r.i18n.translate("xpack.synthetics.timestamp.label",{defaultMessage:"@timestamp"}),Eu=({time:e})=>{const{observability:t}=Object(p.useKibana)().services,{ExploratoryViewEmbeddable:a}=t,n=Pn();return n?i.a.createElement(a,{customHeight:"120px",reportType:"heatmap",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,attributes:[{time:e,reportDefinitions:{"monitor.id":[n]},dataType:"synthetics",selectedMetricField:"failed_tests",name:"synthetics-series-1"}]}):null},gu=()=>{const{euiTheme:e}=Object(d.useEuiTheme)(),{dateRangeStart:t,dateRangeEnd:a}=A(),n=x({from:t,to:a});return i.a.createElement(i.a.Fragment,null,i.a.createElement(Zc,{fullWidth:!0}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement(vu,{$_css:e.size.s},bu)),i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Vc,{to:n.to,from:n.from})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(su,{from:n.from,to:n.to}))))),i.a.createElement(d.EuiFlexItem,{grow:3},i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement(Su,{$_css2:e.size.s},fu)),i.a.createElement(Eu,{time:n})))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement(xu,{$_css3:e.size.s},hu)),i.a.createElement(ou,null))),i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement(Tu,{$_css4:e.size.s},yu))))))},hu=r.i18n.translate("xpack.synthetics.errors.label",{defaultMessage:"Errors"}),bu=r.i18n.translate("xpack.synthetics.errors.overview",{defaultMessage:"Overview"}),fu=r.i18n.translate("xpack.synthetics.errors.failedTests",{defaultMessage:"Failed tests"}),yu=r.i18n.translate("xpack.synthetics.errors.failedTests.byStep",{defaultMessage:"Failed tests by step"});var vu=lt()("h3").withConfig({displayName:"_StyledH",componentId:"sc-ks2ae9-0"})((e=>({margin:e.$_css,marginBottom:0}))),Su=lt()("h3").withConfig({displayName:"_StyledH2",componentId:"sc-ks2ae9-1"})((e=>({margin:e.$_css2,marginBottom:0}))),xu=lt()("h3").withConfig({displayName:"_StyledH3",componentId:"sc-ks2ae9-2"})((e=>({margin:e.$_css3,marginBottom:0}))),Tu=lt()("h3").withConfig({displayName:"_StyledH4",componentId:"sc-ks2ae9-3"})((e=>({margin:e.$_css4,marginBottom:0})));const Mu=e=>{const{checkGroupId:t,stepIndex:a}=Object(u.useParams)();return[{term:{"monitor.check_group":null!=e?e:t}},{term:{"synthetics.step.index":Number(a)}}]},Cu=()=>{var e,t,a,n,i,s,l,r;const o=sa.NETWORK_TIMINGS_FIELDS.reduce(((e,t)=>({...e,[t]:{type:"double"}})),{}),c=sa.NETWORK_TIMINGS_FIELDS.reduce(((e,t)=>({...e,[t]:{sum:{field:t}}})),{}),{data:u}=Object(g.useEsSearch)({index:"synthetics-*",body:{size:0,runtime_mappings:o,query:{bool:{filter:[{term:{"synthetics.type":"journey/network_info"}},...Mu()]}},aggs:{...c,totalDuration:{sum:{field:sa.SYNTHETICS_STEP_DURATION}},dns:{sum:{field:sa.SYNTHETICS_DNS_TIMINGS}},ssl:{sum:{field:sa.SYNTHETICS_SSL_TIMINGS}},blocked:{sum:{field:sa.SYNTHETICS_BLOCKED_TIMINGS}},connect:{sum:{field:sa.SYNTHETICS_CONNECT_TIMINGS}},receive:{sum:{field:sa.SYNTHETICS_RECEIVE_TIMINGS}},send:{sum:{field:sa.SYNTHETICS_SEND_TIMINGS}},wait:{sum:{field:sa.SYNTHETICS_WAIT_TIMINGS}},total:{sum:{field:sa.SYNTHETICS_TOTAL_TIMINGS}}}}},[],{name:"networkTimings"}),d=null==u?void 0:u.aggregations,m={dns:null!==(e=null==d?void 0:d.dns.value)&&void 0!==e?e:0,connect:null!==(t=null==d?void 0:d.connect.value)&&void 0!==t?t:0,receive:null!==(a=null==d?void 0:d.receive.value)&&void 0!==a?a:0,send:null!==(n=null==d?void 0:d.send.value)&&void 0!==n?n:0,wait:null!==(i=null==d?void 0:d.wait.value)&&void 0!==i?i:0,blocked:null!==(s=null==d?void 0:d.blocked.value)&&void 0!==s?s:0,ssl:null!==(l=null==d?void 0:d.ssl.value)&&void 0!==l?l:0};return{timings:m,timingsWithLabels:[{value:m.dns,label:ku},{value:m.ssl,label:wu},{value:m.blocked,label:Ru},{value:m.connect,label:Ou},{value:m.receive,label:ju},{value:m.send,label:_u},{value:m.wait,label:Iu}].sort(((e,t)=>t.value-e.value)),totalDuration:null!==(r=null==d?void 0:d.totalDuration.value)&&void 0!==r?r:0}},Ou=r.i18n.translate("xpack.synthetics.connect.label",{defaultMessage:"Connect"}),ku=r.i18n.translate("xpack.synthetics.dns",{defaultMessage:"DNS"}),Iu=r.i18n.translate("xpack.synthetics.wait",{defaultMessage:"Wait"}),wu=r.i18n.translate("xpack.synthetics.ssl",{defaultMessage:"SSL"}),Ru=r.i18n.translate("xpack.synthetics.blocked",{defaultMessage:"Blocked"}),_u=r.i18n.translate("xpack.synthetics.send",{defaultMessage:"Send"}),ju=r.i18n.translate("xpack.synthetics.receive",{defaultMessage:"Receive"}),Lu={chartMargins:{top:0,bottom:0,left:0,right:0},partition:{linkLabel:{maximumSection:1/0,maxCount:0},idealFontSizeJump:1.1,outerSizeRatio:.9,emptySizeRatio:.6,circlePadding:5}},Fu=()=>{const e=Cu(),t=Object(g.useTheme)();return e?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Pu)),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(le.Chart,{size:{height:180}},i.a.createElement(le.Settings,{theme:[Lu,null!==le.LIGHT_THEME&&void 0!==le.LIGHT_THEME?le.LIGHT_THEME:{}],showLegend:!1}),i.a.createElement(le.Partition,{id:"spec_1",data:e.timingsWithLabels,layout:le.PartitionLayout.sunburst,valueAccessor:e=>null==e?void 0:e.value,valueFormatter:e=>Nu(e),layers:[{groupByRollup:e=>e.label,nodeLabel:e=>e,shape:{fillColor:(e,a)=>t.eui[`euiColorVis${a+1}`]}}]}))):i.a.createElement(d.EuiLoadingSpinner,{size:"xl"})},Pu=r.i18n.translate("xpack.synthetics.stepDetailsRoute.timingsBreakdown",{defaultMessage:"Timings breakdown"}),Nu=e=>e<1e3?`${e.toFixed(0)} ms`:`${(e/1e3).toFixed(1)} s`,Du=()=>{const e=Cu(),t=Object(g.useTheme)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"xxl"}),i.a.createElement(d.EuiFlexGroup,{direction:"column",gutterSize:"s"},e.timingsWithLabels.map((({label:e,value:a},n)=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(d.EuiHealth,{color:t.eui[`euiColorVis${n+1}`]},e)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"s"},Nu(a))))))))};var Au=a(166);const Hu=(e,t=3)=>Number(e).toFixed(t),Bu=({value:e,timing:t,mimeType:a})=>{let n=_e[t];return t===we.Receive&&a&&(n+=` (${Pe[Ne[a]]||a})`),`${n}: ${Hu(e)}ms`},zu=(e,t,a=[])=>{var n;if(!t&&0===(null==a?void 0:a.length))return!0;const i=!t||(null===(n=e.url)||void 0===n?void 0:n.includes(t)),s=!(a.length>0)||a.includes(Ne[e.mimeType]);return!(!i||!s)},Uu=({value:e,postFix:t})=>{if(void 0===e||-1===e)return;let a=Hu(e);return t&&(a=`${a} ${t}`),a},$u=(e,t)=>t&&e&&t>0?e-t:e,Gu=e=>{if(void 0!==e)return Object.keys(e).map((t=>({name:t,value:`${e[t]}`})))},Vu=({item:e,index:t,requestStart:a})=>{const{certificates:n,ip:i,mimeType:s,requestHeaders:l,responseHeaders:r,url:o,resourceSize:c,transferSize:u,status:d}=e,{dns:m,connect:p,ssl:E,wait:g,receive:h,total:b}=e.timings||{},f=h&&h>0?h:b;return{x:t,url:o,requestHeaders:Gu(l),responseHeaders:Gu(r),certificates:n?[{name:je[Re.CertificateIssuer],value:n.issuer},{name:je[Re.CertificateIssueDate],value:n.validFrom?tt()(n.validFrom).format("L LT"):void 0},{name:je[Re.CertificateExpiryDate],value:n.validTo?tt()(n.validTo).format("L LT"):void 0},{name:je[Re.CertificateSubject],value:n.subjectName}]:void 0,details:[{name:je[Re.Status],value:d?`${d}`:void 0},{name:je[Re.MimeType],value:s},{name:je[Re.RequestStart],value:Uu({value:a,postFix:"ms"})},{name:_e[we.Dns],value:Uu({value:m,postFix:"ms"})},{name:_e[we.Connect],value:Uu({value:$u(p,E),postFix:"ms"})},{name:_e[we.Ssl],value:Uu({value:E,postFix:"ms"})},{name:_e[we.Wait],value:Uu({value:g,postFix:"ms"})},{name:_e[we.Receive],value:Uu({value:f,postFix:"ms"})},{name:je[Re.ResourceSize],value:Uu({value:c?c/1e3:void 0,postFix:"KB"})},{name:je[Re.TransferSize],value:Uu({value:u?u/1e3:void 0,postFix:"KB"})},{name:je[Re.IP],value:i}]}},qu=Object(d.euiPaletteColorBlind)({rotations:2}),Ku=Object.values(we).reduce(((e,t)=>{switch(t){case we.Blocked:e[t]=qu[16];break;case we.Dns:e[t]=qu[0];break;case we.Connect:e[t]=qu[7];break;case we.Ssl:e[t]=qu[17];break;case we.Send:e[t]=qu[2];break;case we.Wait:e[t]=qu[11];break;case we.Receive:e[t]=qu[0]}return e}),{}),Wu=Object.values(Fe).reduce(((e,t)=>{switch(t){case Fe.Html:e[t]=qu[19];break;case Fe.Script:e[t]=qu[3];break;case Fe.Stylesheet:e[t]=qu[4];break;case Fe.Media:e[t]=qu[5];break;case Fe.Font:e[t]=qu[8];break;case Fe.XHR:case Fe.Other:e[t]=qu[9]}return e}),{}),Yu={...Ku,...Wu},Xu=(e,t)=>isNaN(e)?t:`${e}. ${t}`;var Ju=a(200),Zu=a.n(Ju);const Qu=Object(n.createContext)({}),ed=({children:e,data:t,markerItems:a,onElementClick:n,onProjectionClick:s,onSidebarClick:l,showOnlyHighlightedNetworkRequests:r,sidebarItems:o,legendItems:c,metadata:u,renderTooltipItem:d,totalNetworkRequests:m,highlightedNetworkRequests:p,fetchedNetworkRequests:E,activeStep:g})=>i.a.createElement(Qu.Provider,{value:{data:t,activeStep:g,markerItems:a,showOnlyHighlightedNetworkRequests:r,sidebarItems:o,legendItems:c,metadata:u,onElementClick:n,onProjectionClick:s,onSidebarClick:l,renderTooltipItem:d,totalNetworkRequests:m,highlightedNetworkRequests:p,fetchedNetworkRequests:E}},e),td=()=>Object(n.useContext)(Qu);var ad=a(199);const nd=24,id=E.euiStyled.div`
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object(ad.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }
`,sd=Object(E.euiStyled)(id)`
  height: ${e=>e.height?`${e.height}`:"auto"};
  overflow-y: ${e=>e.height?"scroll":"visible"};
  overflow-x: hidden;
`,ld=Object(E.euiStyled)(id)`
  position: sticky;
  top: 0;
  z-index: ${e=>e.theme.eui.euiZLevel4};
  overflow-y: scroll;
  overflow-x: hidden;
`,rd=Object(E.euiStyled)(d.EuiFlexItem)`
  margin-left: -16px;
`,od=Object(E.euiStyled)(d.EuiFlexGroup)`
`,cd=Object(E.euiStyled)(d.EuiPanel)`
  height: 100%;
  border-radius: 0 !important;
  border: none;
`,ud=E.euiStyled.div`
  && {
    padding: 16px;
    z-index: ${e=>e.theme.eui.euiZLevel5};
    border-bottom: 0.3px solid ${e=>e.theme.eui.euiColorLightShade};
  }
`,dd=E.euiStyled.div`
  z-index: ${e=>e.theme.eui.euiZLevel4};
  height: 100%;
  &&& {
    .echAnnotation__icon {
      top: 8px;
    }
  }
`,md=Object(E.euiStyled)(d.EuiFlexItem)`
  z-index: ${e=>e.theme.eui.euiZLevel5};
  min-width: 0;
`,pd=E.euiStyled.div`
  height: ${e=>`${e.height}px`};
  overflow-y: hidden;
  overflow-x: hidden;
`,Ed=Object(E.euiStyled)(d.EuiPanel)`
  border: 0;
  height: 100%;
`,gd=Object(E.euiStyled)(d.EuiFlexGroup)`
  height: 100%;
`,hd=Object(E.euiStyled)(d.EuiFlexItem)`
  min-width: 0;
  padding-right: ${e=>e.theme.eui.euiSizeS};
  justify-content: space-around;
`,bd=Object(E.euiStyled)(d.EuiFlexItem)`
  opacity: ${e=>e.isHighlighted?1:.4};
  height: 100%;
  .euiButtonEmpty {
    height: ${nd}px;
    font-size:${({theme:e})=>e.eui.euiFontSizeM};
  }
`,fd=E.euiStyled.div`
  width: 100%;
  height: ${e=>`${e.height+nd+4}px`};
  margin-top: -${28}px;
  z-index: ${e=>Math.round(e.theme.eui.euiZLevel3/(e.chartIndex+1))};
  background-color: ${e=>e.theme.eui.euiColorEmptyShade};

  &&& {
    .echCanvasRenderer {
      height: calc(100% + 0px) !important;
      }
  }
`,yd=E.euiStyled.div`
  position: sticky;
  bottom: 0;
  z-index: ${e=>e.theme.eui.euiZLevel5};
  background-color: ${e=>e.theme.eui.euiColorLightestShade};
  padding: ${e=>e.theme.eui.euiSizeXS};
  font-size: ${e=>e.theme.eui.euiFontSizeXS};
  box-shadow: 0px -1px 4px 0px ${e=>e.theme.eui.euiColorLightShade};
`,vd=E.euiStyled.div`
  margin-top: 16px;
  max-width: 90vw;
`,Sd=Object(E.euiStyled)(vd)`
  background-color: ${e=>e.theme.eui.euiColorDarkestShade};
  border-radius: ${e=>e.theme.eui.euiBorderRadius};
  color: ${e=>e.theme.eui.euiColorLightestShade};
  padding: ${e=>e.theme.eui.euiSizeS};
  .euiToolTip__arrow {
    background-color: ${e=>e.theme.eui.euiColorDarkestShade};
  }
`,xd=Object(E.euiStyled)(d.EuiText)`
  line-height: 28px;
  padding: 0 ${e=>e.theme.eui.euiSizeM};
  border-bottom: 0.3px solid ${e=>e.theme.eui.euiColorLightShade};
  z-index: ${e=>e.theme.eui.euiZLevel5};
`,Td=E.euiStyled.div`
    position: relative;
`,Md=({items:e,render:t})=>{const{onSidebarClick:a}=td(),s=Object(n.useMemo)((()=>a),[a]);return i.a.createElement(md,{grow:2},i.a.createElement(pd,{height:e.length*nd,"data-test-subj":"wfSidebarContainer"},i.a.createElement(Ed,{paddingSize:"none",hasBorder:!1,hasShadow:!1},i.a.createElement(gd,{direction:"column",gutterSize:"none",responsive:!1},e.map(((e,a)=>i.a.createElement(hd,{key:a},t(e,a,s))))))))},Cd=Object(E.euiStyled)(d.EuiFlexItem)`
  margin-right: ${e=>e.theme.eui.euiSizeM};
  max-width: 7%;
  min-width: 160px;
`,Od=({items:e,render:t})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"s",wrap:!0},e.map(((e,a)=>i.a.createElement(Cd,{key:a},t(e,a))))),kd=()=>{const[e]=Object(p.useUiSetting$)("theme:darkMode");return Object(n.useMemo)((()=>e?se.EUI_CHARTS_THEME_DARK.theme:se.EUI_CHARTS_THEME_LIGHT.theme),[e])},Id=Object(E.euiStyled)(d.EuiText)`
  font-weight: bold;
`,wd=Object(E.euiStyled)(d.EuiHorizontalRule)`
  background-color: ${e=>e.theme.eui.euiColorDarkShade};
`,Rd=({text:e,url:t})=>{const{data:a,renderTooltipItem:n,sidebarItems:s}=td(),l=a.filter((e=>{var a;return e.x===(null==s||null===(a=s.find((e=>e.url===t)))||void 0===a?void 0:a.index)&&e.config.tooltipProps&&e.config.showTooltip}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Id,null,e),i.a.createElement(wd,{margin:"none"}),i.a.createElement(d.EuiFlexGroup,{direction:"column",gutterSize:"none"},l.map(((e,t)=>i.a.createElement(d.EuiFlexItem,{key:t},n(e.config.tooltipProps))))))},_d=e=>{const t=e["@timestamp"],{lt:a,gte:n}=e.monitor.timespan,i=48*tt()(a).diff(tt()(n),"millisecond");return{to:t,from:tt()(t).subtract(i,"millisecond").toISOString()}};function jd({title:e,field:t,step:a}){var n,s,l,r;const{observability:o}=me(),c=o.ExploratoryViewEmbeddable,u=null===(n=Object(p.useKibana)().services.http)||void 0===n||null===(s=n.basePath)||void 0===s?void 0:s.get(),m=[{name:`${e}(${null===(l=a.synthetics.step)||void 0===l?void 0:l.name})`,selectedMetricField:t,time:_d(a),seriesType:"area",dataType:"synthetics",reportDefinitions:{"monitor.name":[a.monitor.name],"synthetics.step.name.keyword":[null===(r=a.synthetics.step)||void 0===r?void 0:r.name]},operationType:"last_value"}],E=Object(g.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:m},u);return i.a.createElement(Fd,null,i.a.createElement(c,{title:e,appendTitle:i.a.createElement(d.EuiButton,{iconType:"visArea",href:E,target:"_blank",size:"s"},Ld),reportType:"kpi-over-time",attributes:m,axisTitlesVisibility:{x:!1,yLeft:!1,yRight:!1},legendIsVisible:!1,dataTypesIndexPatterns:{synthetics:"synthetics-*"},withActions:!1}))}const Ld=r.i18n.translate("xpack.synthetics.synthetics.markers.explore",{defaultMessage:"Explore"}),Fd=E.euiStyled.div`
  height: 200px;
  width: 400px;
  &&& {
    .expExpressionRenderer__expression {
      padding-bottom: 0 !important;
    }
  }
`;function Pd({title:e,field:t}){const{activeStep:a}=td();return a?i.a.createElement(jd,{field:t,title:e,step:a}):null}function Nd({field:e,label:t}){const[a,s]=Object(n.useState)(!1);return e?i.a.createElement(d.EuiPopover,{isOpen:a,closePopover:()=>s(!1),anchorPosition:"downLeft",panelStyle:{paddingBottom:0,paddingLeft:4},zIndex:100,button:i.a.createElement(d.EuiButtonIcon,{"aria-label":r.i18n.translate("xpack.synthetics.synthetics.markers.openEmbeddableButton.label",{defaultMessage:"Use this icon button to show metrics for this annotation marker."}),iconType:"dot",iconSize:"l",color:"text",onClick:()=>s((e=>!e))})},i.a.createElement(Pd,{title:t,field:e})):i.a.createElement(d.EuiIcon,{"aria-label":r.i18n.translate("xpack.synthetics.synthetics.markers.noFieldIcon.label",{defaultMessage:"An icon indicating that this marker has no field associated with it"}),type:"dot",size:"l"})}function Dd(){const{markerItems:e}=td(),t=Object(g.useTheme)(),a=Object(n.useMemo)((()=>(null!=e?e:[]).reduce(((e,t)=>{var a;return e.set(t.offset,[...null!==(a=e.get(t.offset))&&void 0!==a?a:[],t]),e}),new Map)),[e]),s=Object(n.useMemo)((()=>Array.from(a.entries()).map((([e,a])=>{var n,i,s;let l=(null!=a?a:[]).map((({id:e})=>e)).filter(((e,t,a)=>a.indexOf(e)===t));l.length>1&&(l=l.filter((e=>"layoutShift"!==e)));const r=l.map((e=>{var a,n;return null!==(a=null===(n=Ad(e,t))||void 0===n?void 0:n.label)&&void 0!==a?a:e})).join(" / "),o=l[0],c=Ad(o,t);return{id:o,offset:e,label:r,field:null!==(n=null==c?void 0:c.field)&&void 0!==n?n:"",color:null!==(i=null==c?void 0:c.color)&&void 0!==i?i:t.eui.euiColorMediumShade,strokeWidth:null!==(s=null==c?void 0:c.strokeWidth)&&void 0!==s?s:1}}))),[a,t]);return e?i.a.createElement(Hd,null,s.map((({id:e,offset:t,label:a,field:n,color:s,strokeWidth:l})=>{const o=`${e}-${t}`;return i.a.createElement(le.LineAnnotation,{key:o,id:o,domainType:le.AnnotationDomainType.YDomain,dataValues:[{dataValue:t,details:a,header:r.i18n.translate("xpack.synthetics.synthetics.waterfall.offsetUnit",{defaultMessage:"{offset} ms",values:{offset:t}})}],marker:i.a.createElement(Nd,{field:n,label:a}),style:{line:{strokeWidth:l,stroke:s,opacity:1}}})}))):null}function Ad(e,t){switch(e){case"domContentLoaded":return{label:Gd,color:t.eui.euiColorVis0,field:"browser.experience.dcl.us",strokeWidth:2};case"firstContentfulPaint":return{label:Bd,color:t.eui.euiColorVis1,field:"browser.experience.fcp.us",strokeWidth:2};case"largestContentfulPaint":return{label:zd,color:t.eui.euiColorVis2,field:"browser.experience.lcp.us",strokeWidth:2};case"layoutShift":return{label:Ud,color:t.eui.euiColorVis6,field:"",strokeWidth:1};case"loadEvent":return{label:$d,color:t.eui.euiColorVis9,field:"browser.experience.load.us",strokeWidth:2}}}const Hd=E.euiStyled.span`
  &&& {
    > .echAnnotation__icon {
      top: 8px;
    }
  }
`,Bd=r.i18n.translate("xpack.synthetics.synthetics.waterfall.fcpLabel",{defaultMessage:"First contentful paint"}),zd=r.i18n.translate("xpack.synthetics.synthetics.waterfall.lcpLabel",{defaultMessage:"Largest contentful paint"}),Ud=r.i18n.translate("xpack.synthetics.synthetics.waterfall.layoutShiftLabel",{defaultMessage:"Layout shift"}),$d=r.i18n.translate("xpack.synthetics.synthetics.waterfall.loadEventLabel",{defaultMessage:"Load event"}),Gd=r.i18n.translate("xpack.synthetics.synthetics.waterfall.domContentLabel",{defaultMessage:"DOM Content Loaded"}),Vd=e=>{var t;const{data:a,sidebarItems:s}=td();return Object(n.useMemo)((()=>{const t=null==s?void 0:s.find((t=>{var a;return t.index===(null===(a=e.header)||void 0===a?void 0:a.value)}));return a.filter((t=>{var a;return t.x===(null===(a=e.header)||void 0===a?void 0:a.value)&&t.config.showTooltip&&t.config.tooltipProps})).length?i.a.createElement(Sd,null,t&&i.a.createElement(Rd,{text:Xu(t.index+1,t.url),url:t.url})):null}),[a,s,null===(t=e.header)||void 0===t?void 0:t.value])},qd=({chartData:e,tickFormat:t,domain:a,barStyleAccessor:s,index:l})=>{var r;const o=kd(),{onElementClick:c,onProjectionClick:u}=td(),d=Object(n.useMemo)((()=>c),[c]),m=Object(n.useMemo)((()=>u),[u]),p=Object(n.useCallback)(t,[t]);return i.a.createElement(fd,{height:(E=e,24*new Set(E.map((e=>e.x))).size),chartIndex:l,"data-test-subj":"wfDataOnlyBarChart"},i.a.createElement(le.Chart,{className:"data-chart"},i.a.createElement(le.Settings,{showLegend:!1,rotation:90,tooltip:{boundary:null!==(r=document.getElementById("app-fixed-viewport"))&&void 0!==r?r:void 0,customTooltip:Vd},theme:o,onProjectionClick:m,onElementClick:d}),i.a.createElement(le.Axis,{"aria-hidden":!0,id:"time",position:le.Position.Top,tickFormat:p,domain:a,showGridLines:!0,style:{axisLine:{visible:!1}}}),i.a.createElement(le.BarSeries,{id:"waterfallItems",xScaleType:le.ScaleType.Ordinal,yScaleType:le.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],y0Accessors:["y0"],styleAccessor:s,data:e}),i.a.createElement(Dd,null)));var E},Kd=({tickFormat:e,domain:t,barStyleAccessor:a})=>{const n=kd();return i.a.createElement(dd,null,i.a.createElement(le.Chart,{className:"axis-only-chart","data-test-subj":"axisOnlyChart"},i.a.createElement(le.Settings,{showLegend:!1,rotation:90,tooltip:{type:le.TooltipType.None},theme:n}),i.a.createElement(le.Axis,{id:"time",position:le.Position.Top,tickFormat:e,domain:t,showGridLines:!0}),i.a.createElement(le.BarSeries,{"aria-hidden":!0,id:"waterfallItems",xScaleType:le.ScaleType.Ordinal,yScaleType:le.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],y0Accessors:["y0"],styleAccessor:a,data:[{x:0,y0:0,y1:1},{x:1,y0:0,y1:1}]}),i.a.createElement(Dd,null)))},Wd=({totalNetworkRequests:e,fetchedNetworkRequests:t,highlightedNetworkRequests:a,showHighlightedNetworkRequests:n})=>i.a.createElement(xd,{size:"xs",color:"subdued"},i.a.createElement("strong",null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.requestsTotalMessage",defaultMessage:"{numNetworkRequests} network requests",values:{numNetworkRequests:e>t?i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.requestsTotalMessage.first",defaultMessage:"First {count}",values:{count:`${t}/${e}`}}):e}})," ",n&&a>=0&&i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.requestsHighlightedMessage",defaultMessage:"({numHighlightedRequests} match the filter)",values:{numHighlightedRequests:a}})),e>t&&i.a.createElement(d.EuiIconTip,{type:"iInCircle",content:r.i18n.translate("xpack.synthetics.synthetics.waterfall.requestsTotalMessage.info",{defaultMessage:"Waterfall view only shows up to 1000 requests"})})),Yd=({tickFormat:e,domain:t,barStyleAccessor:a,renderSidebarItem:s,renderLegendItem:l,renderFilter:r,renderFlyout:o,maxHeight:c="800px",fullHeight:u=!1})=>{const{data:m,showOnlyHighlightedNetworkRequests:p,sidebarItems:E,legendItems:g,totalNetworkRequests:h,highlightedNetworkRequests:b,fetchedNetworkRequests:f}=td(),{width:y}=Zu()(),v=Object(n.useRef)(null),S=Object(n.useRef)(null),[x,T]=Object(n.useState)(c),M=!(!E||!s),C=!!(g&&g.length>0&&l);Object(n.useEffect)((()=>{if(u&&v.current&&S.current){const e=v.current.getBoundingClientRect().top,t=S.current.getBoundingClientRect().height;T(`calc(190vh - ${e+33+t}px)`)}}),[v,u,S,y]);const O=(({data:e})=>{const[t,a]=Object(n.useState)([]);return Object(n.useEffect)((()=>{const t=[];if((null==e?void 0:e.length)>0){let a=0;const n=new Set;let i;e.forEach((e=>{150===n.size&&e.x>i&&(a++,n.clear()),n.add(e.x),i=e.x,t[a]?t[a].push(e):t.push([e])}))}a(t)}),[e]),t})({data:m});return i.a.createElement(Td,null,i.a.createElement(ld,null,i.a.createElement(od,{gutterSize:"none",responsive:!1},M&&i.a.createElement(md,{grow:2},i.a.createElement(cd,{paddingSize:"none",hasShadow:!1}),i.a.createElement(Wd,{totalNetworkRequests:h,highlightedNetworkRequests:b,fetchedNetworkRequests:f,showHighlightedNetworkRequests:p}),r&&i.a.createElement(ud,null,r())),i.a.createElement(rd,{grow:!M||8,"data-test-subj":"axisOnlyWrapper"},i.a.createElement(Kd,{domain:t,barStyleAccessor:a,tickFormat:e})))),i.a.createElement(sd,{height:x,"data-test-subj":"waterfallOuterContainer",ref:v},i.a.createElement(d.EuiFlexGroup,{gutterSize:"none",responsive:!1},M&&i.a.createElement(Md,{items:E,render:s}),i.a.createElement(rd,{grow:!M||8,"data-test-subj":"dataOnlyWrapper"},O.map(((n,s)=>i.a.createElement(qd,{index:s,key:s,chartData:n,domain:t,barStyleAccessor:a,tickFormat:e})))))),C&&i.a.createElement(yd,{ref:S},i.a.createElement(Od,{items:g,render:l})),o&&o())},Xd=E.euiStyled.span`
  position: relative;
  display: inline-flex;
  align-items: center;
  .euiToolTipAnchor {
    min-width: 0;
  }
`,Jd=E.euiStyled.span`
  overflow: hidden;
  display: flex;
  align-items: center;
`,Zd=Object(E.euiStyled)(d.EuiText)`
  font-family: ${e=>e.theme.eui.euiCodeFontFamily};
  margin-right: ${e=>e.theme.eui.euiSizeXS};
  line-height: ${nd}px;
  text-align: right;
  background-color: ${e=>e.theme.eui.euiColorLightestShade};
`,Qd=E.euiStyled.span`
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
  line-height: ${nd}px;
  text-align: left;
`,em=E.euiStyled.span`
  flex-shrink: 0;
  line-height: ${nd}px;
  text-align: left;
`,tm=Object(E.euiStyled)(d.EuiButtonEmpty)`
  &&& {
    border: none;

    .euiButtonContent {
      display: inline-block;
      padding: 0;
    }
  }
`,am=Object(E.euiStyled)(d.EuiIcon)`
  margin-right: ${e=>e.theme.eui.euiSizeXS};
`,nm=({index:e,ariaLabel:t,text:a,onClick:s,setButtonRef:l,url:o,highestIndex:c})=>{const u=a.startsWith("https://"),m=a.replace(/https:\/\/www.|http:\/\/www.|http:\/\/|https:\/\//,""),p=Object(n.useMemo)((()=>((e="")=>{const t=e.split(""),a=t.length-12>0?t.length-12:null,n=a?t.splice(a):[];return{first:t.join(""),last:n.join("")}})(m)),[m]);return i.a.createElement(Xd,{"aria-label":t,"data-test-subj":"middleTruncatedTextContainer"},i.a.createElement(d.EuiScreenReaderOnly,null,i.a.createElement("span",{"data-test-subj":"middleTruncatedTextSROnly"},a)),i.a.createElement(Sd,{as:d.EuiToolTip,content:i.a.createElement(Rd,{text:Xu(e,a),url:o}),"data-test-subj":"middleTruncatedTextToolTip",delay:"long",position:"top"},i.a.createElement(i.a.Fragment,null,s?i.a.createElement(tm,{onClick:s,"data-test-subj":`middleTruncatedTextButton${e}`,buttonRef:l,flush:"left"},i.a.createElement(Jd,null,i.a.createElement(Zd,{color:"subdued",size:"s",style:{minWidth:String(c).length+1+"ch"}},e+"."),u&&i.a.createElement(am,{type:"lock",size:"s",color:"success","aria-label":r.i18n.translate("xpack.synthetics.waterfallChart.sidebar.url.https",{defaultMessage:"https"})}),i.a.createElement(Qd,null,p.first),i.a.createElement(em,null,p.last))):i.a.createElement(Jd,{"aria-hidden":!0},i.a.createElement(Qd,null,e,". ",p.first),i.a.createElement(em,null,p.last)))),i.a.createElement("span",null,i.a.createElement(d.EuiLink,{href:o,external:!0,target:"_blank"},i.a.createElement(d.EuiScreenReaderOnly,null,i.a.createElement("span",null,i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.resource.externalLink",defaultMessage:"Open resource in new tab"}))))))},im=lt()(d.EuiText).withConfig({displayName:"StyledText",componentId:"sc-1a866my-0"})(["width:100%;"]);class waterfall_flyout_table_TableWithoutHeader extends d.EuiBasicTable{renderTableHead(){return i.a.createElement(i.a.Fragment,null)}}const sm=e=>{const{rows:t,title:a}=e,s=Object(n.useMemo)((()=>[{field:"name",name:"",sortable:!1,render:(e,t)=>i.a.createElement(d.EuiText,{size:"xs"},i.a.createElement("strong",null,t.name))},{field:"value",name:"",sortable:!1,render:(e,t)=>{var a;return i.a.createElement(im,{size:"xs",textAlign:"right"},null!==(a=t.value)&&void 0!==a?a:"--")}}]),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiText,null,i.a.createElement("h4",null,a)),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(waterfall_flyout_table_TableWithoutHeader,{tableLayout:"fixed",compressed:!0,responsive:!1,columns:s,items:t}))},lm=r.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.details",{defaultMessage:"Details"}),rm=r.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.certificates",{defaultMessage:"Certificate headers"}),om=r.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.requestHeaders",{defaultMessage:"Request headers"}),cm=r.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.responseHeaders",{defaultMessage:"Response headers"}),um=lt()(d.EuiFlyout).withConfig({displayName:"FlyoutContainer",componentId:"sc-rxkvq-0"})(["z-index:",";"],(e=>e.theme.eui.euiZLevel5)),dm=({flyoutData:e,isFlyoutVisible:t,onFlyoutClose:a})=>{const s=Object(n.useRef)(null),l=Object(g.useUiTracker)({app:"uptime"});if(Object(n.useEffect)((()=>{var a;t&&e&&s.current&&(null===(a=s.current)||void 0===a||a.focus())}),[e,t,s]),!e||!t)return null;const{x:r,url:o,details:c,certificates:u,requestHeaders:m,responseHeaders:p}=e;return l({metric:"waterfall_flyout",metricType:g.METRIC_TYPE.CLICK}),i.a.createElement("div",{"tab-index":-1,ref:s,"data-test-subj":"waterfallFlyout","aria-labelledby":"flyoutTitle"},i.a.createElement(um,{size:"s",onClose:a},i.a.createElement(d.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",{id:"flyoutTitle"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(nm,{index:r+1,text:o,url:o,ariaLabel:o,highestIndex:r+1}))))),i.a.createElement(d.EuiFlyoutBody,null,i.a.createElement(sm,{rows:c,title:lm}),!!m&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(sm,{rows:m,title:om})),!!p&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(sm,{rows:p,title:cm})),!!u&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(sm,{rows:u,title:rm})))))},mm=({item:e,highestIndex:t,renderFilterScreenReaderText:a,onClick:s})=>{const[l,r]=Object(n.useState)(),{status:o,offsetIndex:c,index:u,isHighlighted:m,url:p}=e,E=Object(n.useMemo)((()=>{if(s)return()=>s({buttonRef:l,networkItemIndex:u})}),[l,u,s]),g=Object(n.useCallback)((e=>r(e)),[r]),h=e.url,b=`${m&&a?`${Ie} `:""}${h}`;return i.a.createElement(bd,{isHighlighted:m,"data-test-subj":m?"sideBarHighlightedItem":"sideBarDimmedItem"},o&&((f=o)>=400&&f<=499||f>=500&&f<=599||301===f||307===f||308===f)?i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1,style:{minWidth:0}},i.a.createElement(nm,{index:c,text:h,url:p,ariaLabel:b,onClick:E,setButtonRef:g,highestIndex:t})),i.a.createElement(d.EuiFlexItem,{component:"span",grow:!1},i.a.createElement(d.EuiBadge,{color:"danger"},o))):i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1,style:{minWidth:0}},i.a.createElement(nm,{index:c,text:h,url:p,ariaLabel:b,onClick:E,setButtonRef:g,highestIndex:t}))));var f},pm=e=>i.a.createElement(d.EuiHealth,{color:e.colour,className:"eui-textNoWrap"},e.name),Em=({data:e,total:t,markerItems:a,activeStep:s})=>{const[l,r]=Object(n.useState)(""),[o,c]=Object(n.useState)([]),[u,m]=Object(n.useState)(!1),[p]=Object(n.useState)(e),E=o.length>0,{series:h,domain:b,metadata:f,totalHighlightedRequests:y}=Object(n.useMemo)((()=>((e,t=!1,a,n)=>{const i=e=>e.requestSentTime;let s=1/0;e.forEach((e=>s=Math.min(s,i(e))));const l=[],r=[];let o=0;e.forEach(((e,t)=>{const c=(e=>{const t=e&&Ne[e]?Ne[e]:Fe.Other;return Yu[t]})(e.mimeType);let u=i(e)-s;r.push(Vu({item:e,index:t,requestStart:u}));const d=zu(e,a,n);if(d&&o++,!e.timings)return void l.push({x:t,y0:0,y:0,config:{isHighlighted:d,showTooltip:!1}});let m=!1;if(Le.forEach((a=>{const n=((e,t)=>{if(e)return t===we.Connect?$u(e.connect,e.ssl):e[t]})(e.timings,a);if(n&&n>=0){m=!0;const i=a===we.Receive?c:Yu[a],s=u+n;l.push({x:t,y0:u,y:s,config:{id:t,colour:i,isHighlighted:d,showTooltip:!0,tooltipProps:{value:Bu({value:s-u,timing:a,mimeType:e.mimeType}),colour:i}}}),u=s}})),!m){const a=e.timings.total,n=-1!==a;l.push({x:t,y0:n?u:0,y:n?u+e.timings.total:0,config:{isHighlighted:d,colour:n?c:"",showTooltip:n,tooltipProps:n?{value:Bu({value:a,timing:we.Receive,mimeType:e.mimeType}),colour:c}:void 0}})}}));const c=l.map((e=>e.y)),u={min:0,max:Math.max(...c)};let d=l;return t&&(d=l.filter((e=>e.config.isHighlighted))),{series:d,domain:u,metadata:r,totalHighlightedRequests:o}})(p,u,l,o)),[p,l,o,u]),v=Object(n.useMemo)((()=>((e,t,a,n)=>{const i=e.map(((e,t)=>{const i=zu(e,a,n),s=t+1,{url:l,status:r,method:o}=e;return{url:l,status:r,method:o,isHighlighted:i,offsetIndex:s,index:t}}));return t?i.filter((e=>e.isHighlighted)):i})(p,u,l,o)),[p,l,o,u]),S=Object(n.useMemo)((()=>(()=>{let e=[];Object.values(we).forEach((t=>{t!==we.Receive&&(e=[...e,{name:_e[t],colour:Ku[t]}])}));let t=[];return Object.values(Fe).forEach((e=>{t=[...t,{name:Pe[e],colour:Wu[e]}]})),[...e,...t]})()),[]),{flyoutData:x,onBarClick:T,onProjectionClick:M,onSidebarClick:C,isFlyoutVisible:O,onFlyoutClose:k}=(e=>{const[t,a]=Object(n.useState)(!1),[i,s]=Object(n.useState)(void 0),[l,r]=Object(n.useState)(),o=Object(n.useCallback)((e=>{s(e),a(!0)}),[a,s]),c=Object(n.useCallback)((()=>{var e;a(!1),null==l||null===(e=l.current)||void 0===e||e.focus()}),[l,a]);return{flyoutData:i,onBarClick:Object(n.useCallback)((([t])=>{a(!1);const{datum:n}=t[0],i=e[n.config.id];o(i)}),[e,o]),onProjectionClick:Object(n.useCallback)((t=>{a(!1);const{x:n}=t;if("number"==typeof n&&n>=0){const t=e[n];o(t)}}),[e,o]),onSidebarClick:Object(n.useCallback)((({buttonRef:n,networkItemIndex:i})=>{if(t&&n===l)a(!1);else{const t=e[i];r(n),o(t)}}),[l,o,t,e,a]),isFlyoutVisible:t,onFlyoutClose:c}})(f),I=Object(n.useCallback)((()=>i.a.createElement(Ae,{query:l,setQuery:r,activeFilters:o,setActiveFilters:c,onlyHighlighted:u,setOnlyHighlighted:m})),[o,c,u,m,l,r]),w=Object(n.useCallback)((()=>i.a.createElement(dm,{flyoutData:x,onFlyoutClose:k,isFlyoutVisible:O})),[x,O,k]),R=Math.max(...h.map((e=>e.x))),_=Object(n.useCallback)((e=>i.a.createElement(mm,{item:e,renderFilterScreenReaderText:E&&!u,onClick:C,highestIndex:R})),[E,u,C,R]);return Object(g.useTrackMetric)({app:"uptime",metric:"waterfall_chart_view",metricType:g.METRIC_TYPE.COUNT}),Object(g.useTrackMetric)({app:"uptime",metric:"waterfall_chart_view",metricType:g.METRIC_TYPE.COUNT,delay:15e3}),i.a.createElement(ed,{activeStep:s,markerItems:a,totalNetworkRequests:t,fetchedNetworkRequests:p.length,highlightedNetworkRequests:y,data:h,onElementClick:Object(n.useCallback)(T,[T]),onProjectionClick:Object(n.useCallback)(M,[M]),onSidebarClick:C,showOnlyHighlightedNetworkRequests:u,sidebarItems:v,legendItems:S,metadata:f,renderTooltipItem:Object(n.useCallback)((e=>i.a.createElement(d.EuiHealth,{color:String(null==e?void 0:e.colour)},null==e?void 0:e.value)),[])},i.a.createElement(Yd,{tickFormat:Object(n.useCallback)((e=>`${Number(e).toFixed(0)} ms`),[]),domain:b,barStyleAccessor:Object(n.useCallback)((({datum:e})=>{var t,a;return null!==(t=e.config)&&void 0!==t&&t.isHighlighted?e.config.colour:{rect:{fill:null===(a=e.config)||void 0===a?void 0:a.colour,opacity:"0.1"}}}),[]),renderSidebarItem:_,renderLegendItem:pm,renderFlyout:w,renderFilter:I,fullHeight:!0}))},gm="browser.relative_trace.type",hm="browser.relative_trace.name",bm="browser.relative_trace.start.us",fm="navigationStart",ym=r.i18n.translate("xpack.synthetics.synthetics.stepDetail.waterfallNoData",{defaultMessage:"No waterfall data could be found for this step"}),vm=({checkGroup:e,stepIndex:t,activeStep:a})=>{var s,l;const o=Object(c.useDispatch)();Object(n.useEffect)((()=>{e&&t&&o(Object(Au.a)({checkGroup:e,stepIndex:t}))}),[o,t,e]);const u=null===(s=Object(c.useSelector)(He)[null!=e?e:""])||void 0===s?void 0:s[t],m=u&&!u.loading,p=null==u?void 0:u.isWaterfallSupported,E=(null==u||null===(l=u.events)||void 0===l?void 0:l.length)>0,{metrics:h}=(({checkGroup:e,hasNavigationRequest:t,stepIndex:a})=>{const{data:n,loading:i}=Object(g.useEsSearch)(t?Object(g.createEsParams)({index:"synthetics-*",body:{query:{bool:{filter:[{term:{"synthetics.step.index":a}},{term:{"monitor.check_group":e}},{term:{"synthetics.type":"step/metrics"}}]}},fields:["browser.*"],size:1e3,_source:!1}}):{},[e,t],{name:"getWaterfallStepMetrics"});if(!t)return{metrics:[],loading:!1};const s=[];if(n&&t){const e=n.hits.hits;let t=0,a=!1;e.forEach((({fields:e})=>{var n;if("mark"===(null===(n=e[gm])||void 0===n?void 0:n[0])){const{[hm]:n,[bm]:i}=e;(null==n?void 0:n[0])===fm&&(t=null==i?void 0:i[0],a=!0)}})),a&&e.forEach((({fields:e})=>{var a;if("mark"===(null===(a=e[gm])||void 0===a?void 0:a[0])){const{[hm]:a,[bm]:n}=e;(null==a?void 0:a[0])!==fm&&s.push({id:null==a?void 0:a[0],offset:((null==n?void 0:n[0])-t)/1e3})}}))}return{metrics:s,loading:i}})({checkGroup:e,stepIndex:t,hasNavigationRequest:null==u?void 0:u.hasNavigationRequest});return i.a.createElement(i.a.Fragment,null,!m&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLoadingChart,{size:"xl","aria-label":r.i18n.translate("xpack.synthetics.synthetics.stepDetail.waterfall.loading",{defaultMessage:"Waterfall chart loading"})}))),m&&!E&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{textAlign:"center"},i.a.createElement("p",null,ym)))),m&&E&&p&&i.a.createElement(Em,{data:(b=u.events,b.sort(((e,t)=>e.requestSentTime-t.requestSentTime))),markerItems:h,total:u.total,activeStep:a}),m&&E&&!p&&i.a.createElement(d.EuiCallOut,{title:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.waterfallUnsupported.title",defaultMessage:"Waterfall chart unavailable"}),color:"warning",iconType:"help"},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.waterfallUnsupported.description",defaultMessage:"The waterfall chart cannot be shown. You may be using an older version of the Synthetic Agent. Please check the version and consider upgrading."})));var b},Sm=({label:e,mimeType:t,percent:a,value:n,loading:s,labelWidth:l=40,valueWidth:r=60})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!1,style:{width:l}},i.a.createElement(d.EuiText,{size:"s"},e)),i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(xm,{mimeType:t,percent:isNaN(a)?0:a,loading:s})),i.a.createElement(d.EuiFlexItem,{grow:!1,style:{width:r,justifySelf:"flex-end"}},i.a.createElement(d.EuiText,{size:"s",style:{fontWeight:"bold",whiteSpace:"nowrap"},className:"eui-textRight"},n))),xm=({mimeType:e,percent:t,loading:a})=>{const{eui:s}=Object(g.useTheme)(),[l,r]=Object(n.useState)(0);return Object(n.useEffect)((()=>{setTimeout((()=>{l<t&&r(l+1)}),10)}),[t,l]),a?i.a.createElement(Tm,{lines:1}):i.a.createElement(d.EuiFlexGroup,{gutterSize:"none",style:{borderRadius:8,overflow:"hidden"}},i.a.createElement(d.EuiFlexItem,{grow:!0,style:{backgroundColor:s.euiColorLightShade}},i.a.createElement("span",{style:{backgroundColor:Yu[e],height:20,width:`${l}%`}})))},Tm=lt()(d.EuiLoadingContent).withConfig({displayName:"LoadingLine",componentId:"sc-1nv313o-0"})(["&&&{> span{height:20px;}}"]),Mm=()=>{const e=Be();return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Cm))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"s"},Om,":"," ",i.a.createElement("span",{style:{fontWeight:"bold"}},e.totalObjectsWeight)))),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement("div",null,e.items.map((({label:t,mimeType:a,weightPercent:n,weight:s})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(Sm,{label:t,mimeType:a,percent:n,value:s,loading:e.loading}),i.a.createElement(d.EuiSpacer,{size:"m"})," ")))))},Cm=r.i18n.translate("xpack.synthetics.stepDetails.objectWeight",{defaultMessage:"Object weight"}),Om=r.i18n.translate("xpack.synthetics.stepDetails.totalSize",{defaultMessage:"Total size"}),km=r.i18n.translate("xpack.synthetics.coreVitals.lcp.help",{defaultMessage:"Largest contentful paint measures loading performance. To provide a good user experience, LCP should occur within 2.5 seconds of when the page first starts loading."}),Im=r.i18n.translate("xpack.synthetics.coreVitals.cls.help",{defaultMessage:"Cumulative Layout Shift (CLS): measures visual stability. To provide a good user experience, pages should maintain a CLS of less than 0.1."}),wm=r.i18n.translate("xpack.synthetics.coreVitals.fcpTooltip",{defaultMessage:"First contentful paint (FCP) focuses on the initial rendering and measures the time from when the page starts loading to when any part of the pages content is displayed on the screen."}),Rm=r.i18n.translate("xpack.synthetics.coreVitals.dclTooltip",{defaultMessage:"Triggered when the browser completes parsing the document. Helpful when there are multiple listeners, or logic is executed: domContentLoadedEventEnd - domContentLoadedEventStart."}),_m=r.i18n.translate("xpack.synthetics.fieldLabels.lcp",{defaultMessage:"Largest contentful paint (LCP)"}),jm=r.i18n.translate("xpack.synthetics.fieldLabels.fcp",{defaultMessage:"First contentful paint (FCP)"}),Lm=r.i18n.translate("xpack.synthetics.fieldLabels.cls",{defaultMessage:"Cumulative layout shift (CLS)"}),Fm=r.i18n.translate("xpack.synthetics.fieldLabels.dcl",{defaultMessage:"DOMContentLoaded event (DCL)"}),Pm=[{title:jm,description:wm},{title:_m,description:km},{title:Lm,description:Im},{title:Fm,description:Rm}],Nm=()=>{const[e,t]=Object(n.useState)(!1);return i.a.createElement(d.EuiPopover,{button:i.a.createElement(d.EuiButtonEmpty,{iconType:"list",iconSide:"right",onClick:()=>t((e=>!e))},Dm),isOpen:e,closePopover:()=>t(!1),anchorPosition:"rightCenter"},i.a.createElement(d.EuiPopoverTitle,null,Dm),i.a.createElement("div",{style:{width:"350px"}},i.a.createElement(d.EuiDescriptionList,{listItems:Pm})))},Dm=r.i18n.translate("xpack.synthetics.stepDetailsRoute.definition",{defaultMessage:"Definitions"}),Am=e=>{const{checkGroupId:t,stepIndex:a}=Object(u.useParams)();return[{term:{"monitor.check_group":null!=e?e:t}},{term:{"synthetics.step.index":Number(a)}}]},Hm=(e=!0,t)=>{var a,n,i,s,l,r,c;const u=e?o.G:"",{data:d}=Object(g.useEsSearch)({index:u,body:{size:0,query:{bool:{filter:[{terms:{"synthetics.type":["step/metrics","step/end"]}},...Am(t)]}},aggs:{fcp:{sum:{field:"browser.experience.fcp.us"}},lcp:{sum:{field:"browser.experience.lcp.us"}},cls:{sum:{field:"browser.experience.cls"}},dcl:{sum:{field:"browser.experience.dcl.us"}},totalDuration:{sum:{field:"synthetics.step.duration.us"}}}}},[u],{name:t?"previousStepMetrics":"stepMetrics"}),{data:m}=Object(g.useEsSearch)({index:u,body:{size:0,runtime_mappings:{"synthetics.payload.transfer_size":{type:"double"},"synthetics.payload.resource_size":{type:"double"}},query:{bool:{filter:[{term:{"synthetics.type":"journey/network_info"}},...Am(t)]}},aggs:{transferSize:{sum:{field:"synthetics.payload.transfer_size"}},resourceSize:{sum:{field:"synthetics.payload.resource_size"}}}}},[u],{name:t?"previousStepMetricsFromNetworkInfos":"stepMetricsFromNetworkInfos"});return{...null!==(a=null==d?void 0:d.aggregations)&&void 0!==a?a:{},transferData:((null!==(n=null==m||null===(i=m.aggregations)||void 0===i||null===(s=i.transferSize)||void 0===s?void 0:s.value)&&void 0!==n?n:0)/1e6).toFixed(0),resourceSize:((null!==(l=null==m||null===(r=m.aggregations)||void 0===r||null===(c=r.resourceSize)||void 0===c?void 0:c.value)&&void 0!==l?l:0)/1e6).toFixed(0)}},Bm=(e,t)=>-1*(100-(null!=e?e:0)/(null!=t?t:0)*100),zm=e=>e<1e3?`${e.toFixed(0)} ms`:`${(e/1e3).toFixed(1)} s`,Um=()=>{var e,t,a,n,s,l,r,o,c,m;const p=Hm(),{fcpThreshold:E,lcpThreshold:g,clsThreshold:h,dclThreshold:b,totalThreshold:f}=(e=>{var t,a,n,i,s,l,r,o,c,d,m,p;const{checkGroupId:E}=Object(u.useParams)(),{data:g}=Fn(E),h=null==g||null===(t=g.details)||void 0===t||null===(a=t.previous)||void 0===a?void 0:a.checkGroup,b=Hm(Boolean(h),h);return{fcpThreshold:Bm(null==e||null===(n=e.fcp)||void 0===n?void 0:n.value,null==b||null===(i=b.fcp)||void 0===i?void 0:i.value),lcpThreshold:Bm(null==e||null===(s=e.lcp)||void 0===s?void 0:s.value,null==b||null===(l=b.lcp)||void 0===l?void 0:l.value),clsThreshold:Bm(null==e||null===(r=e.cls)||void 0===r?void 0:r.value,null==b||null===(o=b.cls)||void 0===o?void 0:o.value),dclThreshold:Bm(null==e||null===(c=e.dcl)||void 0===c?void 0:c.value,null==b||null===(d=b.dcl)||void 0===d?void 0:d.value),totalThreshold:Bm(null==e||null===(m=e.totalDuration)||void 0===m?void 0:m.value,null==b||null===(p=b.totalDuration)||void 0===p?void 0:p.value)}})(p);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Gm))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Nm,null))),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiFlexGrid,{gutterSize:"l",columns:3},i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{description:Vm,title:zm((null!==(e=null===(t=p.totalDuration)||void 0===t?void 0:t.value)&&void 0!==e?e:0)/1e3),threshold:f})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{description:"FCP",title:zm((null!==(a=null===(n=p.fcp)||void 0===n?void 0:n.value)&&void 0!==a?a:0)/1e3),threshold:E,helpText:wm})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{description:"LCP",title:zm((null!==(s=null===(l=p.lcp)||void 0===l?void 0:l.value)&&void 0!==s?s:0)/1e3),threshold:g,helpText:km})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{description:"CLS",title:null!==(r=null===(o=p.cls)||void 0===o?void 0:o.value)&&void 0!==r?r:0,threshold:h,helpText:Im})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{description:"DCL",title:zm((null!==(c=null===(m=p.dcl)||void 0===m?void 0:m.value)&&void 0!==c?c:0)/1e3),threshold:b,helpText:Rm})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiStat,{titleSize:"s",description:"Transfer size",title:p.transferData+" MB",reverse:!0})),i.a.createElement(d.EuiFlexItem,null)))},$m=({title:e,threshold:t,description:a,helpText:n})=>{const s=t>=5,l=!s&&!(t<5)||!isFinite(t);return i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiStat,he()({titleSize:"s"},l?{}:{titleColor:s?"danger":"success"},{description:i.a.createElement("span",null,a," ",n&&i.a.createElement(d.EuiIconTip,{content:n,position:"right"})),title:i.a.createElement(i.a.Fragment,null,e,i.a.createElement("span",{style:{marginLeft:5}},l?i.a.createElement(d.EuiIcon,{type:"minus",size:"l"}):i.a.createElement(d.EuiIcon,{type:s?"sortUp":"sortDown",size:"l"}))),reverse:!0}))))},Gm=r.i18n.translate("xpack.synthetics.stepDetailsRoute.metrics",{defaultMessage:"Metrics"}),Vm=r.i18n.translate("xpack.synthetics.totalDuration.metrics",{defaultMessage:"Step duration"}),qm=({monitorId:e})=>{const{observability:t}=Object(p.useKibana)().services,a=t.ExploratoryViewEmbeddable,{stepIndex:n}=Object(u.useParams)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Km)),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(a,{customHeight:"250px",reportType:g.ReportTypes.KPI,legendIsVisible:!1,axisTitlesVisibility:{x:!1,yLeft:!1,yRight:!1},attributes:[{operationType:"last_value",seriesType:"area_stacked",dataType:"synthetics",name:"Network timings",selectedMetricField:"network_timings",reportDefinitions:{"monitor.id":[e]},time:{from:"now-24h/h",to:"now"},filters:[{field:"synthetics.step.index",values:[n]}]}]}))},Km=r.i18n.translate("xpack.synthetics.stepDetailsRoute.last24Hours",{defaultMessage:"Last 24 hours"}),Wm=()=>{const e=Be();return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Ym))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,null,Xm,": ",i.a.createElement("span",{style:{fontWeight:"bold"}}," ",e.totalObjects)))),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement("div",null,e.items.map((({label:t,mimeType:a,percent:n,count:s})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(Sm,{label:t,mimeType:a,percent:n,value:String(s),valueWidth:30,loading:e.loading}),i.a.createElement(d.EuiSpacer,{size:"m"}))))))},Ym=r.i18n.translate("xpack.synthetics.stepDetails.objectCount",{defaultMessage:"Object count"}),Xm=r.i18n.translate("xpack.synthetics.stepDetails.total",{defaultMessage:"Total"}),Jm=({step:e})=>{var t,a,n,s;const{stepIndex:l}=Object(u.useParams)(),{data:r,loading:o}=Object(g.useFetcher)((()=>{var t,a;return Object(U.h)({timestamp:e["@timestamp"],monitorId:e.monitor.id,stepIndex:Number(l),location:null===(t=e.observer)||void 0===t||null===(a=t.geo)||void 0===a?void 0:a.name})}),[e._id,e["@timestamp"]]);return o||!r?i.a.createElement(dt,{isLoading:Boolean(o)}):i.a.createElement(i.a.Fragment,null,i.a.createElement(Ht,{checkGroup:null==r?void 0:r.monitor.check_group,initialStepNo:null==r||null===(t=r.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index,stepStatus:null==r||null===(n=r.synthetics)||void 0===n||null===(s=n.payload)||void 0===s?void 0:s.status,allStepsLoaded:!0,stepLabels:[],retryFetchOnRevisit:!1,asThumbnail:!1}),i.a.createElement(d.EuiSpacer,{size:"xs"}))},Zm=({step:e,ping:t,isFailed:a,stepLabels:s})=>{var l,r,o;const c=[{id:"received",label:tp},{id:"expected",label:ep}],[u,m]=Object(n.useState)("received");return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Qm)),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement("div",{className:"eui-textCenter"},"received"===u?i.a.createElement(Ht,{checkGroup:null==e?void 0:e.monitor.check_group,initialStepNo:null==e||null===(l=e.synthetics)||void 0===l||null===(r=l.step)||void 0===r?void 0:r.index,stepStatus:null==e||null===(o=e.synthetics.payload)||void 0===o?void 0:o.status,allStepsLoaded:!0,stepLabels:s,retryFetchOnRevisit:!1,asThumbnail:!1}):i.a.createElement(Jm,{step:t}),i.a.createElement(d.EuiSpacer,{size:"l"}),a&&i.a.createElement(d.EuiButtonGroup,{legend:"",options:c,idSelected:u,onChange:e=>{m(e)},buttonSize:"s",isFullWidth:!0})))},Qm=r.i18n.translate("xpack.synthetics.stepDetails.screenshot",{defaultMessage:"Screenshot"}),ep=r.i18n.translate("xpack.synthetics.stepDetails.expected",{defaultMessage:"Expected"}),tp=r.i18n.translate("xpack.synthetics.stepDetails.received",{defaultMessage:"Received"}),ap=r.i18n.translate("xpack.synthetics.monitorsPage.monitorsMCrumb",{defaultMessage:"Monitors"}),np=()=>{var e,t,a,n,s,l,r,c;const{checkGroupId:m,stepIndex:E}=Object(u.useParams)();Object(g.useTrackPageview)({app:"synthetics",path:"stepDetail"}),Object(g.useTrackPageview)({app:"synthetics",path:"stepDetail",delay:15e3});const{data:h,loading:b,isFailed:f,currentStep:y,stepLabels:v}=Fn(m),S=null==h||null===(e=h.steps)||void 0===e?void 0:e.find((e=>{var t,a;return(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index)===Number(E)}));return(e=>{var t,a;const n=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(B.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"";z([{text:ap,href:`${n}/${o.q}`},...null!=e?e:[]])})([{text:null!==(t=null==h||null===(a=h.details)||void 0===a?void 0:a.journey.monitor.name)&&void 0!==t?t:""}]),b?i.a.createElement("div",{className:"eui-textCenter"},i.a.createElement(d.EuiLoadingSpinner,{size:"xxl"})):i.a.createElement(i.a.Fragment,null,(null==h||null===(n=h.details)||void 0===n||null===(s=n.journey)||void 0===s?void 0:s.config_id)&&i.a.createElement(Vs,{configId:h.details.journey.config_id,name:h.details.journey.monitor.name}),i.a.createElement(d.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(d.EuiPanel,{hasShadow:!1,hasBorder:!0},(null==h||null===(l=h.details)||void 0===l?void 0:l.journey)&&y&&i.a.createElement(Zm,{ping:null==h||null===(r=h.details)||void 0===r?void 0:r.journey,step:y,isFailed:f,stepLabels:v}))),i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(d.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(Fu,null)),i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(Du,null)),i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(qm,{monitorId:null==h||null===(c=h.details)||void 0===c?void 0:c.journey.monitor.id})))))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(d.EuiPanel,null,i.a.createElement(Um,null))),i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(d.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(Mm,null)),i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(Wm,null)))))),i.a.createElement(d.EuiHorizontalRule,{margin:"s"}),h&&i.a.createElement("div",null,i.a.createElement(vm,{checkGroup:m,stepIndex:Number(E),activeStep:S})))},ip=r.i18n.translate("xpack.synthetics.routes.baseTitle",{defaultMessage:"Synthetics - Kibana"}),sp=(r.i18n.translate("xpack.synthetics.monitorManagement.heading",{defaultMessage:"Monitor Management"}),(e,t,a)=>{const n=Object(u.useRouteMatch)(o.w);if(!n)return{};const s=e.location.search,l=n.params.monitorId;return{pageTitle:i.a.createElement(cl,null),breadcrumbs:[{text:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiIcon,{size:"s",type:"arrowLeft"})," ",i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorSummaryRoute.monitorBreadcrumb",defaultMessage:"Monitors"})),color:"primary","aria-current":!1,href:`${t}${o.y}`}],rightSideItems:[i.a.createElement(wo,null),i.a.createElement(Bo,null),i.a.createElement(_o,null),i.a.createElement(Ao,null)],tabs:[{label:r.i18n.translate("xpack.synthetics.monitorOverviewTab.title",{defaultMessage:"Overview"}),isSelected:"overview"===a,href:`${t}${o.w.replace(":monitorId?",l)}${s}`},{label:r.i18n.translate("xpack.synthetics.monitorHistoryTab.title",{defaultMessage:"History"}),isSelected:"history"===a,href:`${t}${o.u.replace(":monitorId",l)}${s}`},{label:r.i18n.translate("xpack.synthetics.monitorErrorsTab.title",{defaultMessage:"Errors"}),prepend:i.a.createElement(d.EuiIcon,{type:"alert",color:"danger"}),isSelected:"errors"===a,href:`${t}${o.t.replace(":monitorId",l)}${s}`}]}}),lp=({path:e,title:t})=>(Object(n.useEffect)((()=>{document.title=t}),[e,t]),null),rp=()=>{const{services:e}=Object(p.useKibana)(),{addInspectorRequest:t}=Object(g.useInspectorContext)(),{euiTheme:a}=Object(d.useEuiTheme)(),n=(s=Object(u.useHistory)(),l=e.application.getUrlForApp(B.a.SYNTHETICS_PLUGIN_ID),[...Qe(0,l,ip),{title:r.i18n.translate("xpack.synthetics.gettingStartedRoute.title",{defaultMessage:"Synthetics Getting Started | {baseTitle}",values:{baseTitle:ip}}),path:o.l,component:Ol,dataTestSubj:"syntheticsGettingStartedPage",pageSectionProps:{alignment:"center",paddingSize:"none"}},{title:r.i18n.translate("xpack.synthetics.monitorDetails.title",{defaultMessage:"Synthetics Monitor Details | {baseTitle}",values:{baseTitle:ip}}),path:o.w,component:()=>i.a.createElement(ml,null,i.a.createElement(qc,null)),dataTestSubj:"syntheticsMonitorDetailsPage",pageHeader:sp(s,l,"overview")},{title:r.i18n.translate("xpack.synthetics.monitorHistory.title",{defaultMessage:"Synthetics Monitor History | {baseTitle}",values:{baseTitle:ip}}),path:o.u,component:()=>i.a.createElement(ml,null,i.a.createElement(au,null)),dataTestSubj:"syntheticsMonitorHistoryPage",pageHeader:sp(s,l,"history")},{title:r.i18n.translate("xpack.synthetics.monitorErrors.title",{defaultMessage:"Synthetics Monitor Errors | {baseTitle}",values:{baseTitle:ip}}),path:o.t,component:()=>i.a.createElement(ml,null,i.a.createElement(gu,null)),dataTestSubj:"syntheticsMonitorHistoryPage",pageHeader:sp(s,l,"errors")},{title:r.i18n.translate("xpack.synthetics.overviewRoute.title",{defaultMessage:"Synthetics Overview | {baseTitle}",values:{baseTitle:ip}}),path:o.y,component:zr,dataTestSubj:"syntheticsOverviewPage",pageHeader:{pageTitle:i.a.createElement(zl,null),rightSideItems:[i.a.createElement(Ul,null)],tabs:[{label:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorManagement.overviewTab.title",defaultMessage:"Overview"}),isSelected:!0},{label:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorsTab.title",defaultMessage:"Management"}),href:`${l}${o.q}`}]}},{title:r.i18n.translate("xpack.synthetics.monitorManagementRoute.title",{defaultMessage:"Monitor Management | {baseTitle}",values:{baseTitle:ip}}),path:o.q,component:Io,dataTestSubj:"syntheticsMonitorManagementPage",pageHeader:{pageTitle:i.a.createElement(zl,null),rightSideItems:[i.a.createElement(Ul,null)],tabs:[{label:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorManagement.overviewTab.title",defaultMessage:"Overview"}),href:`${l}${o.y}`},{label:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorsTab.title",defaultMessage:"Management"}),isSelected:!0}]}},{title:r.i18n.translate("xpack.synthetics.createMonitorRoute.title",{defaultMessage:"Create Monitor | {baseTitle}",values:{baseTitle:ip}}),path:o.r,component:Gs,dataTestSubj:"syntheticsMonitorAddPage",restrictWidth:!0,pageHeader:{pageTitle:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.createMonitor.pageHeader.title",defaultMessage:"Create Monitor"}),children:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.addMonitor.pageHeader.description",defaultMessage:"For more information about available monitor types and other options, see our {docs}.",values:{docs:i.a.createElement(d.EuiLink,{target:"_blank",href:"#"},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.addMonitor.pageHeader.docsLink",defaultMessage:"documentation"}))}})}},{title:r.i18n.translate("xpack.synthetics.editMonitorRoute.title",{defaultMessage:"Edit Monitor | {baseTitle}",values:{baseTitle:ip}}),path:o.s,component:Ws,dataTestSubj:"syntheticsMonitorEditPage",restrictWidth:!0,pageHeader:{pageTitle:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.editMonitor.pageHeader.title",defaultMessage:"Edit Monitor"}),rightSideItems:[i.a.createElement(be.b,{node:ps})],breadcrumbs:[{text:i.a.createElement(be.b,{node:Es})}]}},{title:r.i18n.translate("xpack.synthetics.stepDetailsRoute.title",{defaultMessage:"Step details | {baseTitle}",values:{baseTitle:ip}}),path:o.E,component:np,dataTestSubj:"syntheticsMonitorEditPage",pageHeader:{pageTitle:i.a.createElement(qn,null),rightSideItems:[],breadcrumbs:[{text:i.a.createElement(be.b,{node:Es})}]}},{title:r.i18n.translate("xpack.synthetics.errorDetailsRoute.title",{defaultMessage:"Error details | {baseTitle}",values:{baseTitle:ip}}),path:o.j,component:Vn,dataTestSubj:"syntheticsMonitorEditPage",pageHeader:{pageTitle:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.editMonitor.errorDetailsRoute.title",defaultMessage:"Error details"})}},{title:r.i18n.translate("xpack.synthetics.testRunDetailsRoute.title",{defaultMessage:"Test run details | {baseTitle}",values:{baseTitle:ip}}),path:o.J,component:Gn,dataTestSubj:"syntheticsMonitorTestRunDetailsPage",pageHeader:{pageTitle:i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.testRunDetailsRoute.page.title",defaultMessage:"Test run details"})}}]);var s,l;return Ue.a.addInspectorRequest=t,i.a.createElement(u.Switch,null,n.map((({title:e,path:t,component:a,dataTestSubj:n,pageHeader:s,...l})=>i.a.createElement(u.Route,{path:t,key:n,exact:!0},i.a.createElement("div",{className:m.APP_WRAPPER_CLASS,"data-test-subj":n},i.a.createElement(lp,{title:e,path:t}),i.a.createElement(Gr,he()({path:t,pageHeader:s},l),i.a.createElement(a,null)))))),i.a.createElement(u.Route,{component:Vr}))};function op(){const{services:{inspector:e,uiSettings:t}}=Object(p.useKibana)(),{isDev:a}=ne(),{inspectorAdapters:n}=Object(g.useInspectorContext)();return(null==t?void 0:t.get(g.enableInspectEsQueries))||a?i.a.createElement(d.EuiHeaderLink,{color:"primary",onClick:()=>{e.open(n)}},r.i18n.translate("xpack.synthetics.inspectButtonText",{defaultMessage:"Inspect"})):null}const cp=r.i18n.translate("xpack.synthetics.addDataButtonLabel",{defaultMessage:"Add data"}),up=r.i18n.translate("xpack.synthetics.analyzeDataButtonLabel",{defaultMessage:"Explore data"}),dp=r.i18n.translate("xpack.synthetics.analyzeDataButtonLabel.message",{defaultMessage:"Explore Data allows you to select and filter result data in any dimension and look for the cause or impact of performance problems."});function mp(){var e,t,a,n,s;const l=Object(p.useKibana)(),{basePath:c}=ne(),m=A(),{dateRangeStart:E,dateRangeEnd:h}=m,b=Object(u.useHistory)(),f={monitor:{id:void 0,name:"test"}},y=Object(u.useRouteMatch)(o.w),v=null==f||null===(e=f.monitor)||void 0===e?void 0:e.id,S=Object(g.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{dataType:"synthetics",seriesType:"area",selectedMetricField:"monitor.duration.us",time:{from:E,to:h},breakdown:v?"observer.geo.name":"monitor.type",reportDefinitions:{"monitor.name":null!=f&&null!==(t=f.monitor)&&void 0!==t&&t.name&&!0===(null==y?void 0:y.isExact)?[null==f||null===(a=f.monitor)||void 0===a?void 0:a.name]:[],"url.full":["ALL_VALUES"]},name:v?`${v}-response-duration`:"All monitors response duration"}]},c);return i.a.createElement(d.EuiHeaderLinks,{gutterSize:"xs"},i.a.createElement(d.EuiHeaderLink,{"aria-label":r.i18n.translate("xpack.synthetics.page_header.settingsLink.label",{defaultMessage:"Navigate to the Uptime settings page"}),color:"text","data-test-subj":"settings-page-link",href:b.createHref({pathname:o.A,search:Object(N.a)(m,!0)})},i.a.createElement(fe.FormattedMessage,{id:"xpack.synthetics.page_header.settingsLink",defaultMessage:"Settings"})),i.a.createElement(d.EuiToolTip,{position:"top",content:i.a.createElement("p",null,dp)},i.a.createElement(d.EuiHeaderLink,{"aria-label":r.i18n.translate("xpack.synthetics.page_header.analyzeData.label",{defaultMessage:'Navigate to the "Explore Data" view to visualize Synthetics/User data'}),href:S,color:"text",iconType:"visBarVerticalStacked","data-test-subj":"syntheticsExploreDataButton"},up)),i.a.createElement(d.EuiHeaderLink,{"aria-label":r.i18n.translate("xpack.synthetics.page_header.addDataLink.label",{defaultMessage:"Navigate to a tutorial about adding Uptime data"}),href:null===(n=l.services)||void 0===n||null===(s=n.application)||void 0===s?void 0:s.getUrlForApp("/home#/tutorial/uptimeMonitors"),color:"primary",iconType:"indexOpen"},cp),i.a.createElement(op,null))}const pp=({appMountParameters:e})=>i.a.createElement(g.HeaderMenuPortal,{setHeaderActionMenu:e.setHeaderActionMenu,theme$:e.theme$},i.a.createElement(mp,null)),Ep=e=>{const{basePath:t,canSave:a,core:s,darkMode:l,i18n:o,plugins:h,renderGlobalHelpControls:b,setBadge:y,startPlugins:v,appMountParameters:S}=e;return Object(n.useEffect)((()=>{b(),y(a?void 0:{text:r.i18n.translate("xpack.synthetics.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:r.i18n.translate("xpack.synthetics.badge.readOnly.tooltip",{defaultMessage:"Unable to save"}),iconType:"glasses"})}),[a,b,y]),Xt.a.core=s,Xt.a.theme=e.appMountParameters.theme$,U.T.dispatch(Object(U.P)(t)),i.a.createElement(d.EuiErrorBoundary,null,i.a.createElement(o.Context,null,i.a.createElement(p.KibanaThemeProvider,{theme$:e.appMountParameters.theme$,modify:{breakpoint:{xxl:1600,xxxl:2e3}}},i.a.createElement(c.Provider,{store:U.T},i.a.createElement(p.KibanaContextProvider,{services:{...s,...h,storage:U.S,data:v.data,inspector:v.inspector,triggersActionsUi:v.triggersActionsUi,observability:v.observability,cases:v.cases,spaces:v.spaces}},i.a.createElement(u.Router,{history:S.history},i.a.createElement(E.EuiThemeProvider,{darkMode:l},i.a.createElement(f,null,i.a.createElement(ae,e,i.a.createElement(Ee,{dataViews:v.dataViews},i.a.createElement(ce,{darkMode:l},i.a.createElement(de,v,i.a.createElement("div",{className:m.APP_WRAPPER_CLASS,"data-test-subj":"syntheticsApp"},i.a.createElement(p.RedirectAppLinks,{className:m.APP_WRAPPER_CLASS,application:s.application},i.a.createElement(g.InspectorContextProvider,null,i.a.createElement(rp,null),i.a.createElement(pp,{appMountParameters:S}))))))))))))))))},gp=e=>i.a.createElement(Ep,e);function hp(e,t,a,n,s){var c;const{application:{capabilities:u},chrome:{setBadge:d,setHelpExtension:m},docLinks:p,http:{basePath:E},i18n:g}=e,{apm:h,infrastructure:b,logs:f}=((e,t)=>t.reduce(((t,a)=>(t[a]=e[a]&&!0===e[a].show,t)),{}))(u,o.m),y={isDev:s,plugins:t,canSave:null!==(c=u.uptime.save)&&void 0!==c&&c,core:e,i18n:g,startPlugins:a,basePath:E.get(),darkMode:e.uiSettings.get(o.g),commonlyUsedRanges:e.uiSettings.get(o.h),isApmAvailable:h,isInfraAvailable:b,isLogsAvailable:f,renderGlobalHelpControls:()=>m({appName:r.i18n.translate("xpack.synthetics.header.appName",{defaultMessage:"Synthetics"}),links:[{linkType:"documentation",href:`${p.links.observability.monitorUptime}`},{linkType:"discuss",href:"https://discuss.elastic.co/c/uptime"}]}),setBadge:d,appMountParameters:n,setBreadcrumbs:e.chrome.setBreadcrumbs};return l.a.render(i.a.createElement(gp,y),n.element),()=>{l.a.unmountComponentAtNode(n.element)}}}}]);