/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.dataVisualizer_bundle_jsonpfunction=window.dataVisualizer_bundle_jsonpfunction||[]).push([[4],{154:function(e,t,s){"use strict";s.r(t),s.d(t,"EmbeddableWrapper",(function(){return w})),s.d(t,"IndexDataVisualizerViewWrapper",(function(){return z})),s.d(t,"DataVisualizerGridEmbeddable",(function(){return grid_embeddable_DataVisualizerGridEmbeddable}));var a=s(2),i=s.n(a),n=s(23),r=s(46),d=s.n(r),u=s(1),o=s(69),l=s.n(o),c=s(20),b=s(21),j=s(35),p=s(26),x=s(11),g=s(5);const h=()=>Object(g.jsx)(c.EuiText,{textAlign:"center"},Object(g.jsx)(c.EuiSpacer,{size:"l"}),Object(g.jsx)(c.EuiLoadingSpinner,{size:"l"}),Object(g.jsx)(c.EuiSpacer,{size:"l"}));var m=s(73),O=s(63),f=s(91),v=s(89);const E=Object(O.b)(),w=({input:e,onOutputChange:t})=>{const[s,a]=Object(u.useState)(E),i=Object(u.useCallback)((e=>{a({...s,...e}),t&&t(e)}),[s,t]),{configs:n,searchQueryLanguage:r,searchString:d,extendedColumns:o,progress:l,overallStatsProgress:j,setLastRefresh:p}=Object(v.a)(e,s);Object(u.useEffect)((()=>{p(Date.now())}),[null==e?void 0:e.lastReloadRequestTime,p]);const x=Object(u.useCallback)((function(t,s){return t.reduce(((t,a)=>{const i=s.find((e=>e.fieldName===a));return void 0!==i&&(t[a]=Object(g.jsx)(f.a,{item:i,dataView:e.dataView,combinedQuery:{searchQueryLanguage:r,searchString:d},onAddFilter:e.onAddFilter,totalDocuments:e.totalDocuments})),t}),{})}),[e,r,d]);return 100===l&&0===n.length?Object(g.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",flex:"1 0 100%",textAlign:"center"}},Object(g.jsx)(c.EuiText,{size:"xs",color:"subdued"},Object(g.jsx)(c.EuiIcon,{type:"visualizeApp",size:"m",color:"subdued"}),Object(g.jsx)(c.EuiSpacer,{size:"m"}),Object(g.jsx)(b.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableNoResultsMessage",defaultMessage:"No results found"}))):Object(g.jsx)(m.a,{items:n,pageState:s,updatePageState:i,getItemIdToExpandedRowMap:x,extendedColumns:o,showPreviewByDefault:null==e?void 0:e.showPreviewByDefault,onChange:t,loading:l<100,overallStatsRunning:j.isRunning})},z=e=>{const{embeddableInput:t,onOutputChange:s}=e,a=l()(t);return a&&a.dataView?Object(g.jsx)(w,{input:a,onOutputChange:s}):Object(g.jsx)(c.EuiEmptyPrompt,{iconType:"alert",iconColor:"danger",title:Object(g.jsx)("h2",null,Object(g.jsx)(b.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableErrorTitle",defaultMessage:"Error loading embeddable"})),body:Object(g.jsx)("p",null,Object(g.jsx)(b.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableErrorDescription",defaultMessage:"There was an error loading the embeddable. Please check if all the required input is valid."}))})};class grid_embeddable_DataVisualizerGridEmbeddable extends j.Embeddable{constructor(e,t,s){super(e,{},s),i()(this,"node",void 0),i()(this,"reload$",new n.Subject),i()(this,"type",x.a),this.services=t}render(e){super.render(e),this.node=e;const t=this.services[0].i18n.Context;d.a.render(Object(g.jsx)(t,null,Object(g.jsx)(p.KibanaThemeProvider,{theme$:this.services[0].theme.theme$},Object(g.jsx)(p.KibanaContextProvider,{services:{...this.services[0],...this.services[1]}},Object(g.jsx)(u.Suspense,{fallback:Object(g.jsx)(h,null)},Object(g.jsx)(z,{id:this.input.id,embeddableContext:this,embeddableInput:this.getInput$(),onOutputChange:e=>this.updateOutput(e)}))))),e)}destroy(){super.destroy(),this.node&&d.a.unmountComponentAtNode(this.node)}reload(){this.reload$.next()}supportedTriggers(){return[]}}}}]);