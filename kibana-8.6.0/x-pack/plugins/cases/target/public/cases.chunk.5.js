/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[5],Array(99).concat([function(e,t,a){e.exports=a(28)(1169)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,s,r;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(s=n;0!=s--;)if(!e(t[s],a[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(r=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(a,r[s]))return!1;for(s=n;0!=s--;){var i=r[s];if(!e(t[i],a[i]))return!1}return!0}return t!=t&&a!=a}},function(e,t,a){e.exports=a(28)(429)},function(e,t,a){"use strict";var n=a(241);e.exports=function(e,t){return t||0===e.length||s.test(e)||n(e,"(")!==n(e,")")?"<"+e+">":e};var s=/\s/},function(e,t,a){"use strict";e.exports=function(e){var t=-1===e.indexOf('"')?'"':"'";return t+e+t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){var a={utf8:{stringToBytes:function(e){return a.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(a.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],a=0;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},bytesToString:function(e){for(var t=[],a=0;a<e.length;a++)t.push(String.fromCharCode(e[a]));return t.join("")}}};e.exports=a},function(e,t,a){"use strict";e.exports=function(e){return e}},function(e,t,a){"use strict";e.exports={gfm:!0,commonmark:!1,pedantic:!1,entities:"false",setext:!1,closeAtx:!1,tableCellPadding:!0,tablePipeAlign:!0,stringLength:function(e){return e.length},incrementListMarker:!0,tightDefinitions:!1,fences:!1,fence:"`",bullet:"-",listItemIndent:"tab",rule:"*",ruleSpaces:!0,ruleRepetition:3,strong:"*",emphasis:"_"}},function(e,t,a){e.exports=a(28)(492)},function(e,t,a){"use strict";var n=a(216);e.exports=function(e){var t;return"&"!==e.charAt(0)?0:(t=e.split("&",2).join("&")).length-n(t).length}},function(e,t,a){"use strict";var n=a(99);e.exports=function(e,t){for(var a=e.split("\n"),s=a.length,r=n(" ",4*t);s--;)0!==a[s].length&&(a[s]=r+a[s]);return a.join("\n")}},function(e,t,a){"use strict";e.exports=function(e,t){var a,n,s=0,r=0;if("string"!=typeof t||1!==t.length)throw new Error("Expected character");for(a=n=(e=String(e)).indexOf(t);-1!==n;)s++,n===a?s>r&&(r=s):s=1,a=n+1,n=e.indexOf(t,a);return r}},function(e,t,a){"use strict";e.exports=function(e){var t=e.referenceType;return"shortcut"===t?"":"["+("collapsed"===t?"":e.label||e.identifier)+"]"}},,,,,,,function(e,t,a){var n,s,r,i,o;n=a(195),s=a(180).utf8,r=a(196),i=a(180).bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?i.stringToBytes(e):s.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var a=n.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,d=-1732584194,m=271733878,p=0;p<a.length;p++)a[p]=16711935&(a[p]<<8|a[p]>>>24)|4278255360&(a[p]<<24|a[p]>>>8);a[l>>>5]|=128<<l%32,a[14+(l+64>>>9<<4)]=l;var g=o._ff,b=o._gg,f=o._hh,E=o._ii;for(p=0;p<a.length;p+=16){var h=c,v=u,y=d,C=m;c=g(c,u,d,m,a[p+0],7,-680876936),m=g(m,c,u,d,a[p+1],12,-389564586),d=g(d,m,c,u,a[p+2],17,606105819),u=g(u,d,m,c,a[p+3],22,-1044525330),c=g(c,u,d,m,a[p+4],7,-176418897),m=g(m,c,u,d,a[p+5],12,1200080426),d=g(d,m,c,u,a[p+6],17,-1473231341),u=g(u,d,m,c,a[p+7],22,-45705983),c=g(c,u,d,m,a[p+8],7,1770035416),m=g(m,c,u,d,a[p+9],12,-1958414417),d=g(d,m,c,u,a[p+10],17,-42063),u=g(u,d,m,c,a[p+11],22,-1990404162),c=g(c,u,d,m,a[p+12],7,1804603682),m=g(m,c,u,d,a[p+13],12,-40341101),d=g(d,m,c,u,a[p+14],17,-1502002290),c=b(c,u=g(u,d,m,c,a[p+15],22,1236535329),d,m,a[p+1],5,-165796510),m=b(m,c,u,d,a[p+6],9,-1069501632),d=b(d,m,c,u,a[p+11],14,643717713),u=b(u,d,m,c,a[p+0],20,-373897302),c=b(c,u,d,m,a[p+5],5,-701558691),m=b(m,c,u,d,a[p+10],9,38016083),d=b(d,m,c,u,a[p+15],14,-660478335),u=b(u,d,m,c,a[p+4],20,-405537848),c=b(c,u,d,m,a[p+9],5,568446438),m=b(m,c,u,d,a[p+14],9,-1019803690),d=b(d,m,c,u,a[p+3],14,-187363961),u=b(u,d,m,c,a[p+8],20,1163531501),c=b(c,u,d,m,a[p+13],5,-1444681467),m=b(m,c,u,d,a[p+2],9,-51403784),d=b(d,m,c,u,a[p+7],14,1735328473),c=f(c,u=b(u,d,m,c,a[p+12],20,-1926607734),d,m,a[p+5],4,-378558),m=f(m,c,u,d,a[p+8],11,-2022574463),d=f(d,m,c,u,a[p+11],16,1839030562),u=f(u,d,m,c,a[p+14],23,-35309556),c=f(c,u,d,m,a[p+1],4,-1530992060),m=f(m,c,u,d,a[p+4],11,1272893353),d=f(d,m,c,u,a[p+7],16,-155497632),u=f(u,d,m,c,a[p+10],23,-1094730640),c=f(c,u,d,m,a[p+13],4,681279174),m=f(m,c,u,d,a[p+0],11,-358537222),d=f(d,m,c,u,a[p+3],16,-722521979),u=f(u,d,m,c,a[p+6],23,76029189),c=f(c,u,d,m,a[p+9],4,-640364487),m=f(m,c,u,d,a[p+12],11,-421815835),d=f(d,m,c,u,a[p+15],16,530742520),c=E(c,u=f(u,d,m,c,a[p+2],23,-995338651),d,m,a[p+0],6,-198630844),m=E(m,c,u,d,a[p+7],10,1126891415),d=E(d,m,c,u,a[p+14],15,-1416354905),u=E(u,d,m,c,a[p+5],21,-57434055),c=E(c,u,d,m,a[p+12],6,1700485571),m=E(m,c,u,d,a[p+3],10,-1894986606),d=E(d,m,c,u,a[p+10],15,-1051523),u=E(u,d,m,c,a[p+1],21,-2054922799),c=E(c,u,d,m,a[p+8],6,1873313359),m=E(m,c,u,d,a[p+15],10,-30611744),d=E(d,m,c,u,a[p+6],15,-1560198380),u=E(u,d,m,c,a[p+13],21,1309151649),c=E(c,u,d,m,a[p+4],6,-145523070),m=E(m,c,u,d,a[p+11],10,-1120210379),d=E(d,m,c,u,a[p+2],15,718787259),u=E(u,d,m,c,a[p+9],21,-343485551),c=c+h>>>0,u=u+v>>>0,d=d+y>>>0,m=m+C>>>0}return n.endian([c,u,d,m])})._ff=function(e,t,a,n,s,r,i){var o=e+(t&a|~t&n)+(s>>>0)+i;return(o<<r|o>>>32-r)+t},o._gg=function(e,t,a,n,s,r,i){var o=e+(t&n|a&~n)+(s>>>0)+i;return(o<<r|o>>>32-r)+t},o._hh=function(e,t,a,n,s,r,i){var o=e+(t^a^n)+(s>>>0)+i;return(o<<r|o>>>32-r)+t},o._ii=function(e,t,a,n,s,r,i){var o=e+(a^(t|~n))+(s>>>0)+i;return(o<<r|o>>>32-r)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var a=n.wordsToBytes(o(e,t));return t&&t.asBytes?a:t&&t.asString?i.bytesToString(a):n.bytesToHex(a)}},function(e,t){var a,n;a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],a=0,n=0;a<e.length;a++,n+=8)t[n>>>5]|=e[a]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],a=0;a<32*e.length;a+=8)t.push(e[a>>>5]>>>24-a%32&255);return t},bytesToHex:function(e){for(var t=[],a=0;a<e.length;a++)t.push((e[a]>>>4).toString(16)),t.push((15&e[a]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var s=e[n]<<16|e[n+1]<<8|e[n+2],r=0;r<4;r++)8*n+6*r<=8*e.length?t.push(a.charAt(s>>>6*(3-r)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,s=0;n<e.length;s=++n%4)0!=s&&t.push((a.indexOf(e.charAt(n-1))&Math.pow(2,-2*s+8)-1)<<2*s|a.indexOf(e.charAt(n))>>>6-2*s);return t}},e.exports=n},function(e,t){function a(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(a(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&a(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,a){"use strict";var n=a(198),s={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,r,i,o,l,c,u=!1;t||(t={}),a=t.debug||!1;try{if(i=n(),o=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=s[t.format]||s.default;window.clipboardData.setData(r,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(c),o.selectNodeContents(c),l.addRange(o),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(o):l.removeAllRanges()),c&&document.body.removeChild(c),i()}return u}},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,a){e.exports=a(28)(1883)},function(e,t,a){"use strict";var n=a(201),s=a(146),r=a(202);function i(e){var t=n(r);t.prototype.options=s(t.prototype.options,this.data("settings"),e),this.Compiler=t}e.exports=i,i.Compiler=r},function(e,t,a){e.exports=a(28)(3459)},function(e,t,a){"use strict";var n=a(146),s=a(203);function r(e,t){this.inLink=!1,this.inTable=!1,this.tree=e,this.file=t,this.options=n(this.options),this.setOptions({})}e.exports=r;var i=r.prototype;i.enterLink=s("inLink",!1),i.enterTable=s("inTable",!1),i.enterLinkReference=a(204),i.options=a(182),i.setOptions=a(205),i.compile=a(217),i.visit=a(220),i.all=a(221),i.block=a(222),i.visitOrderedItems=a(223),i.visitUnorderedItems=a(224),i.visitors={root:a(225),text:a(226),heading:a(227),paragraph:a(228),blockquote:a(229),list:a(230),listItem:a(231),inlineCode:a(232),code:a(233),html:a(234),thematicBreak:a(235),strong:a(236),emphasis:a(237),break:a(238),delete:a(239),link:a(240),linkReference:a(242),imageReference:a(244),definition:a(245),image:a(246),table:a(247),tableCell:a(249)}},function(e,t,a){e.exports=a(28)(3462)},function(e,t,a){"use strict";var n=a(181);e.exports=function(e,t){var a=e.encode,s=e.escape,r=e.enterLink();return"shortcut"!==t.referenceType&&"collapsed"!==t.referenceType?r:(e.escape=n,e.encode=n,function(){e.encode=a,e.escape=s,r()})}},function(e,t,a){"use strict";var n=a(146),s=a(206),r=a(182),i=a(212),o=a(181);e.exports=function(e){var t,a,d=this,m=d.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=n(e)}for(a in r)c[typeof r[a]](e,a,m[a],l[a]);return(t=e.ruleRepetition)&&t<3&&u(t,"options.ruleRepetition"),d.encode=function(e){var t={};return"false"===e?o:("true"===e&&(t.useNamedReferences=!0),"escape"===e&&(t.escapeOnly=!0,t.useNamedReferences=!0),function(e){return s(e,t)})}(String(e.entities)),d.escape=i(e),d.options=e,d};var l={entities:{true:!0,false:!0,numbers:!0,escape:!0},bullet:{"*":!0,"-":!0,"+":!0},rule:{"-":!0,_:!0,"*":!0},listItemIndent:{tab:!0,mixed:!0,1:!0},emphasis:{_:!0,"*":!0},strong:{_:!0,"*":!0},fence:{"`":!0,"~":!0}},c={boolean:function(e,t,a){var n=e[t];null==n&&(n=a),"boolean"!=typeof n&&u(n,"options."+t),e[t]=n},string:function(e,t,a,n){var s=e[t];null==s&&(s=a),(s=String(s))in n||u(s,"options."+t),e[t]=s},number:function(e,t,a){var n=e[t];null==n&&(n=a),isNaN(n)&&u(n,"options."+t),e[t]=n},function:function(e,t,a){var n=e[t];null==n&&(n=a),"function"!=typeof n&&u(n,"options."+t),e[t]=n}};function u(e,t){throw new Error("Invalid value `"+e+"` for setting `"+t+"`")}},function(e,t,a){"use strict";var n=a(207),s=a(208),r=a(209),i=a(183),o=a(210),l=a(211);e.exports=g,g.escape=function(e){return g(e,{escapeOnly:!0,useNamedReferences:!0})};var c={}.hasOwnProperty,u=function(){var e,t={};for(e in n)t[n[e]]=e;return t}(),d=E(['"',"'","<",">","&","`"]),m=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g;function g(e,t){var a=t||{},n=a.subset,r=n?E(n):d,i=a.escapeOnly,g=a.omitOptionalSemicolons;return e=e.replace(r,h),n||i?e:e.replace(m,(function(e,t,a){return b(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,a.charCodeAt(t+2),g)})).replace(p,h);function h(e,t,n){return function(e,t,a){var n,r,i,d,m=a.useShortestReferences,p=a.omitOptionalSemicolons;return(m||a.useNamedReferences)&&c.call(u,e)&&(n=function(e,t,a,n){var r="&"+e;return a&&c.call(s,e)&&-1===l.indexOf(e)&&(!n||t&&61!==t&&!o(t))?r:r+";"}(u[e],t,p,a.attribute)),!m&&n||(i=b(r=e.charCodeAt(0),t,p),m&&(d=f(r,t,p)).length<i.length&&(i=d)),n&&(!m||n.length<i.length)?n:i}(e,n.charCodeAt(t+1),a)}}function b(e,t,a){var n="&#x"+e.toString(16).toUpperCase();return a&&t&&!r(t)?n:n+";"}function f(e,t,a){var n="&#"+String(e);return a&&t&&!i(t)?n:n+";"}function E(e){return new RegExp("["+e.join("")+"]","g")}},function(e){e.exports=JSON.parse('{"nbsp":" ","iexcl":"¡","cent":"¢","pound":"£","curren":"¤","yen":"¥","brvbar":"¦","sect":"§","uml":"¨","copy":"©","ordf":"ª","laquo":"«","not":"¬","shy":"­","reg":"®","macr":"¯","deg":"°","plusmn":"±","sup2":"²","sup3":"³","acute":"´","micro":"µ","para":"¶","middot":"·","cedil":"¸","sup1":"¹","ordm":"º","raquo":"»","frac14":"¼","frac12":"½","frac34":"¾","iquest":"¿","Agrave":"À","Aacute":"Á","Acirc":"Â","Atilde":"Ã","Auml":"Ä","Aring":"Å","AElig":"Æ","Ccedil":"Ç","Egrave":"È","Eacute":"É","Ecirc":"Ê","Euml":"Ë","Igrave":"Ì","Iacute":"Í","Icirc":"Î","Iuml":"Ï","ETH":"Ð","Ntilde":"Ñ","Ograve":"Ò","Oacute":"Ó","Ocirc":"Ô","Otilde":"Õ","Ouml":"Ö","times":"×","Oslash":"Ø","Ugrave":"Ù","Uacute":"Ú","Ucirc":"Û","Uuml":"Ü","Yacute":"Ý","THORN":"Þ","szlig":"ß","agrave":"à","aacute":"á","acirc":"â","atilde":"ã","auml":"ä","aring":"å","aelig":"æ","ccedil":"ç","egrave":"è","eacute":"é","ecirc":"ê","euml":"ë","igrave":"ì","iacute":"í","icirc":"î","iuml":"ï","eth":"ð","ntilde":"ñ","ograve":"ò","oacute":"ó","ocirc":"ô","otilde":"õ","ouml":"ö","divide":"÷","oslash":"ø","ugrave":"ù","uacute":"ú","ucirc":"û","uuml":"ü","yacute":"ý","thorn":"þ","yuml":"ÿ","fnof":"ƒ","Alpha":"Α","Beta":"Β","Gamma":"Γ","Delta":"Δ","Epsilon":"Ε","Zeta":"Ζ","Eta":"Η","Theta":"Θ","Iota":"Ι","Kappa":"Κ","Lambda":"Λ","Mu":"Μ","Nu":"Ν","Xi":"Ξ","Omicron":"Ο","Pi":"Π","Rho":"Ρ","Sigma":"Σ","Tau":"Τ","Upsilon":"Υ","Phi":"Φ","Chi":"Χ","Psi":"Ψ","Omega":"Ω","alpha":"α","beta":"β","gamma":"γ","delta":"δ","epsilon":"ε","zeta":"ζ","eta":"η","theta":"θ","iota":"ι","kappa":"κ","lambda":"λ","mu":"μ","nu":"ν","xi":"ξ","omicron":"ο","pi":"π","rho":"ρ","sigmaf":"ς","sigma":"σ","tau":"τ","upsilon":"υ","phi":"φ","chi":"χ","psi":"ψ","omega":"ω","thetasym":"ϑ","upsih":"ϒ","piv":"ϖ","bull":"•","hellip":"…","prime":"′","Prime":"″","oline":"‾","frasl":"⁄","weierp":"℘","image":"ℑ","real":"ℜ","trade":"™","alefsym":"ℵ","larr":"←","uarr":"↑","rarr":"→","darr":"↓","harr":"↔","crarr":"↵","lArr":"⇐","uArr":"⇑","rArr":"⇒","dArr":"⇓","hArr":"⇔","forall":"∀","part":"∂","exist":"∃","empty":"∅","nabla":"∇","isin":"∈","notin":"∉","ni":"∋","prod":"∏","sum":"∑","minus":"−","lowast":"∗","radic":"√","prop":"∝","infin":"∞","ang":"∠","and":"∧","or":"∨","cap":"∩","cup":"∪","int":"∫","there4":"∴","sim":"∼","cong":"≅","asymp":"≈","ne":"≠","equiv":"≡","le":"≤","ge":"≥","sub":"⊂","sup":"⊃","nsub":"⊄","sube":"⊆","supe":"⊇","oplus":"⊕","otimes":"⊗","perp":"⊥","sdot":"⋅","lceil":"⌈","rceil":"⌉","lfloor":"⌊","rfloor":"⌋","lang":"〈","rang":"〉","loz":"◊","spades":"♠","clubs":"♣","hearts":"♥","diams":"♦","quot":"\\"","amp":"&","lt":"<","gt":">","OElig":"Œ","oelig":"œ","Scaron":"Š","scaron":"š","Yuml":"Ÿ","circ":"ˆ","tilde":"˜","ensp":" ","emsp":" ","thinsp":" ","zwnj":"‌","zwj":"‍","lrm":"‎","rlm":"‏","ndash":"–","mdash":"—","lsquo":"‘","rsquo":"’","sbquo":"‚","ldquo":"“","rdquo":"”","bdquo":"„","dagger":"†","Dagger":"‡","permil":"‰","lsaquo":"‹","rsaquo":"›","euro":"€"}')},function(e,t,a){e.exports=a(28)(3122)},function(e,t,a){e.exports=a(28)(3124)},function(e,t,a){e.exports=a(28)(3125)},function(e){e.exports=JSON.parse('["cent","copy","divide","gt","lt","not","para","times"]')},function(e,t,a){"use strict";var n=a(183),s=a(213),r=a(214),i=a(215),o=a(184);e.exports=function(e){return function(t,a,w){var A,k,S,T,F,D,M=this,L=e.gfm,N=e.commonmark,P=e.pedantic,R=N?[g,")"]:[g],V=w&&w.children,U=V&&V.indexOf(a),B=V&&V[U-1],$=V&&V[U+1],z=t.length,_=i(e),H=-1,G=[],q=G;for(A=B?I(B)&&j.test(B.value):!w||"root"===w.type||"paragraph"===w.type;++H<z;){if(D=!1,"\n"===(k=t.charAt(H)))A=!0;else if(k===f||"`"===k||k===p||"["===k||"<"===k||k===d&&o(t.slice(H))>0||"]"===k&&M.inLink||L&&k===h&&t.charAt(H+1)===h||L&&"|"===k&&(M.inTable||x(t,H))||k===E&&H>0&&H<z-1&&(P||!s(t.charAt(H-1))||!s(t.charAt(H+1)))||L&&!M.inLink&&k===b&&O(G.join("")))D=!0;else if(A)if(">"===k||"#"===k||k===p||"-"===k||"+"===k)D=!0;else if(n(k)){for(F=H+1;F<z&&n(t.charAt(F));)F++;-1!==R.indexOf(t.charAt(F))&&(($=t.charAt(F+1))&&$!==u&&$!==l&&$!==c||(G.push(t.slice(H,F)),H=F,k=t.charAt(H),D=!0))}A&&!r(k)&&(A=!1),G.push(D?Q(k):k)}if(V&&I(a)){if(B&&B.referenceType===C){for(H=-1,z=q.length;++H<z;)if((k=q[H])!==u&&k!==l){k!==m&&k!==b||(q[H]=Q(k));break}I($)&&H===z&&$.value.charAt(0)===m&&q.push(f)}L&&!M.inLink&&I(B)&&t.charAt(0)===b&&O(B.value.slice(-6))&&(q[0]=Q(b)),I($)&&t.charAt(z-1)===d&&0!==o(d+$.value)&&(q[q.length-1]=Q(d)),$&&"link"===$.type&&t.charAt(z-1)===v&&(q[q.length-1]=Q(v)),L&&I($)&&t.charAt(z-1)===h&&$.value.charAt(0)===h&&q.splice(-1,0,f),S=I(B)&&s(B.value.slice(-1)),T=I($)&&s($.value.charAt(0)),1===z?t!==E||!P&&S&&T||q.unshift(f):(t.charAt(0)!==E||!P&&S&&s(t.charAt(1))||q.unshift(f),t.charAt(z-1)!==E||!P&&T&&s(t.charAt(z-2))||q.splice(-1,0,f))}return q.join("");function Q(e){return-1===_.indexOf(e)?y[e]:f+e}}};var l="\t",c="\n",u=" ",d="&",m="(",p="*",g=".",b=":",f="\\",E="_",h="~",v="!",y={"<":"&lt;",":":"&#x3A;","&":"&amp;","|":"&#x7C;","~":"&#x7E;"},C="shortcut",j=/\n\s*$/;function x(e,t){var a,n=e.lastIndexOf(c,t),s=e.indexOf(c,t);for(s=-1===s?e.length:s;++n<s;)if((a=e.charAt(n))!==b&&"-"!==a&&a!==u&&"|"!==a)return!1;return!0}function I(e){return e&&"text"===e.type}function O(e){var t=e.slice(-6).toLowerCase();return"mailto"===t||"https"===t.slice(-5)||"http"===t.slice(-4)}},function(e,t,a){"use strict";e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return!/[^0-9a-z\xDF-\xFF]/.test(e.toLowerCase())}},function(e,t,a){e.exports=a(28)(334)},function(e,t,a){e.exports=a(28)(3468)},function(e,t,a){e.exports=a(28)(637)},function(e,t,a){"use strict";var n=a(218);e.exports=function(){return this.visit(n(this.tree,this.options.commonmark))}},function(e,t,a){"use strict";var n=a(219);function s(e,t){var a,n;return"text"===e.type?!e.position||(a=e.position.start,n=e.position.end,a.line!==n.line||n.column-a.column===e.value.length):t&&"blockquote"===e.type}e.exports=function(e,t){return n(e,(function(e,a,n){var r=n?n.children:[],i=a&&r[a-1];if(i&&e.type===i.type&&s(i,t)&&s(e,t))return e.value&&(i.value+=e.value),e.children&&(i.children=i.children.concat(e.children)),r.splice(a,1),i.position&&e.position&&(i.position.end=e.position.end),a})),e}},function(e,t,a){e.exports=a(28)(338)},function(e,t,a){"use strict";e.exports=function(e,t){var a=this,n=a.visitors;return"function"!=typeof n[e.type]&&a.file.fail(new Error("Missing compiler for node of type `"+e.type+"`: `"+e+"`"),e),n[e.type].call(a,e,t)}},function(e,t,a){"use strict";e.exports=function(e){for(var t=e.children,a=t.length,n=[],s=-1;++s<a;)n[s]=this.visit(t[s],e);return n}},function(e,t,a){"use strict";e.exports=function(e){for(var t,a,r=this.options,i=r.fences,o=r.commonmark?"\n\n\x3c!----\x3e\n\n":"\n\n\n",l=r.tightDefinitions?n:s,c=[],u=e.children,d=u.length,m=-1;++m<d;)t=a,a=u[m],t&&("list"===t.type&&("list"===a.type&&t.ordered===a.ordered||"code"===a.type&&!a.lang&&!i)?c.push(o):"definition"===t.type&&"definition"===a.type?c.push(l):c.push(s)),c.push(this.visit(a,e));return c.join("")};var n="\n",s="\n\n"},function(e,t,a){"use strict";e.exports=function(e){var t,a=this,n=a.visitors.listItem,s=a.options.incrementListMarker,r=[],i=e.start,o=e.children,l=o.length,c=-1;for(i=null==i?1:i;++c<l;)t=(s?i+c:i)+".",r[c]=n.call(a,o[c],e,c,t);return r.join(e.spread?"\n\n":"\n")}},function(e,t,a){"use strict";e.exports=function(e){for(var t=this,a=t.options.bullet,n=t.visitors.listItem,s=e.children,r=s.length,i=-1,o=[];++i<r;)o[i]=n.call(t,s[i],e,i,a);return o.join(e.spread?"\n\n":"\n")}},function(e,t,a){"use strict";e.exports=function(e){var t=this.block(e);return"\n"!==t.charAt(t.length-1)&&(t+="\n"),t}},function(e,t,a){"use strict";e.exports=function(e,t){return this.encode(this.escape(e.value,e,t),e)}},function(e,t,a){"use strict";var n=a(99);e.exports=function(e){var t,a=this,s=e.depth,r=a.options.setext,i=a.options.closeAtx,o=a.all(e).join("");return r&&s<3?o+"\n"+n(1===s?"=":"-",o.length):(t=n("#",e.depth))+" "+o+(i?" "+t:"")}},function(e,t,a){"use strict";e.exports=function(e){return this.all(e).join("")}},function(e,t,a){"use strict";e.exports=function(e){for(var t,a=this.block(e).split("\n"),n=[],s=a.length,r=-1;++r<s;)t=a[r],n[r]=(t?" ":"")+t;return">"+n.join("\n>")}},function(e,t,a){"use strict";e.exports=function(e){return(e.ordered?this.visitOrderedItems:this.visitUnorderedItems).call(this,e)}},function(e,t,a){"use strict";var n=a(99),s=a(185);e.exports=function(e,t,a,l){for(var c,u,d,m=this,p=m.options.listItemIndent,g=l||m.options.bullet,b=null==e.spread||e.spread,f=e.checked,E=e.children,h=E.length,v=[],y=-1;++y<h;)v[y]=m.visit(E[y],e);return c=v.join(b?"\n\n":r),"boolean"==typeof f&&(c="["+(f?"x":i)+"]"+i+c),"1"===p||"mixed"===p&&-1===c.indexOf(r)?(u=g.length+1,d=i):(u=4*o((g.length+1)/4),d=n(i,u-g.length)),c?g+d+s(c,u/4).slice(u):g};var r="\n",i=" ",o=Math.ceil},function(e,t,a){"use strict";var n=a(186),s=a(99);function r(e){return 10===e||32===e}e.exports=function(e){var t,a,i=e.value,o=s("`",n(i,"`")+1),l=o,c=o,u=i.charCodeAt(0),d=i.charCodeAt(i.length-1),m=!1;if(96===u||96===d)m=!0;else if(i.length>2&&r(u)&&r(d))for(t=1,a=i.length-1;++t<a;)if(!r(i.charCodeAt(t))){m=!0;break}return m&&(l+=" ",c=" "+c),l+i+c}},function(e,t,a){"use strict";var n=a(186),s=a(99),r=a(185);e.exports=function(e,t){var a,o=this,l=e.value,c=o.options,u=c.fence,d=e.lang||"";return d&&e.meta&&(d+=" "+e.meta),(d=o.encode(o.escape(d,e)))||c.fences||!l||l.charAt(0)===i||l.charAt(l.length-1)===i?("`"===u&&-1!==d.indexOf("`")&&(u="~"),(a=s(u,Math.max(n(l,u)+1,3)))+d+i+l+i+a):(t&&"listItem"===t.type&&"tab"!==c.listItemIndent&&c.pedantic&&o.file.fail("Cannot indent code properly. See https://git.io/fxKR8",e.position),r(l,1))};var i="\n"},function(e,t,a){"use strict";e.exports=function(e){return e.value}},function(e,t,a){"use strict";var n=a(99);e.exports=function(){var e=this.options,t=n(e.rule,e.ruleRepetition);return e.ruleSpaces?t.split("").join(" "):t}},function(e,t,a){"use strict";var n=a(99);e.exports=function(e){var t=n(this.options.strong,2);return t+this.all(e).join("")+t}},function(e,t,a){"use strict";e.exports=function(e){var t=this.options.emphasis,a=this.all(e).join("");return this.options.pedantic&&"_"===t&&-1!==a.indexOf(t)&&(t="*"),t+a+t}},function(e,t,a){"use strict";e.exports=function(){return this.options.commonmark?"\\\n":"  \n"}},function(e,t,a){"use strict";e.exports=function(e){return"~~"+this.all(e).join("")+"~~"}},function(e,t,a){"use strict";var n=a(147),s=a(148);e.exports=function(e){var t=this,a=t.encode(e.url||"",e),i=t.enterLink(),o=t.encode(t.escape(e.url||"",e)),l=t.all(e).join("");return i(),null==e.title&&r.test(a)&&o===l?n(t.encode(e.url),!0):(a=n(a),e.title&&(a+=" "+s(t.encode(t.escape(e.title,e),e))),"["+l+"]("+a+")")};var r=/^[a-z][a-z+.-]+:\/?/i},function(e,t,a){e.exports=a(28)(3492)},function(e,t,a){"use strict";var n=a(243),s=a(187);e.exports=function(e){var t=this,a=e.referenceType,r=t.enterLinkReference(t,e),i=t.all(e).join("");return r(),("shortcut"===a||"collapsed"===a)&&(i=n(i,e.label||e.identifier)),"["+i+"]"+s(e)}},function(e,t,a){"use strict";var n=a(184);e.exports=function(e,t){for(var a,r=e.length,i=t.length,o=[],l=0,c=0;c<r;){for(a=c;c<r&&!s.test(e.charAt(c));)c+=1;for(o.push(e.slice(a,c));l<i&&!s.test(t.charAt(l));)l+=1;for(a=l;l<i&&s.test(t.charAt(l));)"&"===t.charAt(l)&&(l+=n(t.slice(l))),l+=1;for(o.push(t.slice(a,l));c<r&&s.test(e.charAt(c));)c+=1}return o.join("")};var s=/[-!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~_]/},function(e,t,a){"use strict";var n=a(187);e.exports=function(e){return"!["+(this.encode(e.alt,e)||"")+"]"+n(e)}},function(e,t,a){"use strict";var n=a(147),s=a(148);e.exports=function(e){var t=n(e.url);return e.title&&(t+=" "+s(e.title)),"["+(e.label||e.identifier)+"]: "+t}},function(e,t,a){"use strict";var n=a(147),s=a(148);e.exports=function(e){var t=this,a=n(t.encode(e.url||"",e)),r=t.enterLink(),i=t.encode(t.escape(e.alt||"",e));return r(),e.title&&(a+=" "+s(t.encode(e.title,e))),"!["+i+"]("+a+")"}},function(e,t,a){"use strict";var n=a(248);e.exports=function(e){for(var t=this,a=t.options,s=a.tableCellPadding,r=a.tablePipeAlign,i=a.stringLength,o=e.children,l=o.length,c=t.enterTable(),u=[];l--;)u[l]=t.all(o[l]);return c(),n(u,{align:e.align,alignDelimiters:r,padding:s,stringLength:i})}},function(e,t,a){"use strict";var n=a(99);e.exports=function(e,t){for(var a,u,d,m,p,g,b,f,E,h,v,y,C=t||{},j=!1!==C.padding,x=!1!==C.delimiterStart,I=!1!==C.delimiterEnd,O=(C.align||[]).concat(),w=!1!==C.alignDelimiters,A=[],k=C.stringLength||l,S=-1,T=e.length,F=[],D=[],M=[],L=[],N=[],P=0;++S<T;){for(u=-1,M=[],L=[],(d=(a=e[S]).length)>P&&(P=d);++u<d;)g=null==(y=a[u])?"":String(y),!0===w&&(p=k(g),L[u]=p,(void 0===(m=N[u])||p>m)&&(N[u]=p)),M.push(g);F[S]=M,D[S]=L}if(u=-1,d=P,"object"==typeof O&&"length"in O)for(;++u<d;)A[u]=c(O[u]);else for(v=c(O);++u<d;)A[u]=v;for(u=-1,d=P,M=[],L=[];++u<d;)E="",h="",108===(v=A[u])?E=i:v===o?h=i:99===v&&(E=i,h=i),p=w?Math.max(1,N[u]-E.length-h.length):1,g=E+n("-",p)+h,!0===w&&((p=E.length+p+h.length)>N[u]&&(N[u]=p),L[u]=p),M[u]=g;for(F.splice(1,0,M),D.splice(1,0,L),S=-1,T=F.length,b=[];++S<T;){for(M=F[S],L=D[S],u=-1,d=P,f=[];++u<d;)g=M[u]||"",E="",h="",!0===w&&(p=N[u]-(L[u]||0),(v=A[u])===o?E=n(r,p):99===v?p%2==0?h=E=n(r,p/2):(E=n(r,p/2+.5),h=n(r,p/2-.5)):h=n(r,p)),!0===x&&0===u&&f.push("|"),!0!==j||!1===w&&""===g||!0!==x&&0===u||f.push(r),!0===w&&f.push(E),f.push(g),!0===w&&f.push(h),!0===j&&f.push(r),!0!==I&&u===d-1||f.push("|");f=f.join(""),!1===I&&(f=f.replace(s,"")),b.push(f)}return b.join("\n")};var s=/ +$/,r=" ",i=":",o=114;function l(e){return e.length}function c(e){var t="string"==typeof e?e.charCodeAt(0):0;return 76===t||108===t?108:82===t||t===o?o:67===t||99===t?99:0}},function(e,t,a){"use strict";e.exports=function(e){return this.all(e).join("").replace(n," ")};var n=/\r?\n/g},function(e,t,a){e.exports=a(28)(997)},,,,function(e,t,a){"use strict";a.r(t),a.d(t,"CaseViewLoading",(function(){return Er})),a.d(t,"CaseView",(function(){return hr})),a.d(t,"default",(function(){return hr}));var n=a(1),s=a.n(n),r=a(37),i=a.n(r),o=a(13),l=a(75),c=a(24),u=a(5),d=a(41),m=a(92),p=a(2),g=a(16),b=a(96);const f=p.i18n.translate("xpack.cases.caseView.actionLabel.addedField",{defaultMessage:"added"}),E=p.i18n.translate("xpack.cases.caseView.actionLabel.changededField",{defaultMessage:"changed"}),h=p.i18n.translate("xpack.cases.caseView.actionLabel.enabledSetting",{defaultMessage:"enabled"}),v=p.i18n.translate("xpack.cases.caseView.actionLabel.disableSetting",{defaultMessage:"disabled"}),y=p.i18n.translate("xpack.cases.caseView.actionLabel.removedThirdParty",{defaultMessage:"removed external incident management system"}),C=p.i18n.translate("xpack.cases.caseView.actionLabel.editedField",{defaultMessage:"edited"}),j=p.i18n.translate("xpack.cases.caseView.actionLabel.removedField",{defaultMessage:"removed"}),x=p.i18n.translate("xpack.cases.caseView.actionLabel.pushedNewIncident",{defaultMessage:"pushed as new incident"}),I=p.i18n.translate("xpack.cases.caseView.actionLabel.updateIncident",{defaultMessage:"updated incident"}),O=p.i18n.translate("xpack.cases.caseView.actionLabel.addDescription",{defaultMessage:"added description"}),w=p.i18n.translate("xpack.cases.caseView.edit.description",{defaultMessage:"Edit description"}),A=p.i18n.translate("xpack.cases.caseView.edit.quote",{defaultMessage:"Quote"}),k=p.i18n.translate("xpack.cases.caseView.edit.comment",{defaultMessage:"Edit comment"}),S=p.i18n.translate("xpack.cases.caseView.delete.comment",{defaultMessage:"Delete comment"}),T=p.i18n.translate("xpack.cases.caseView.deleteTitle.comment",{defaultMessage:"Delete this comment?"}),F=(p.i18n.translate("xpack.cases.caseView.actionLabel.on",{defaultMessage:"on"}),p.i18n.translate("xpack.cases.caseView.statusLabel",{defaultMessage:"Status"})),D=p.i18n.translate("xpack.cases.caseView.case",{defaultMessage:"case"}),M=p.i18n.translate("xpack.cases.caseView.comment",{defaultMessage:"comment"}),L=p.i18n.translate("xpack.cases.caseView.caseRefresh",{defaultMessage:"Refresh case"}),N=(p.i18n.translate("xpack.cases.caseView.activity",{defaultMessage:"Activity"}),p.i18n.translate("xpack.cases.caseView.fieldChanged",{defaultMessage:"changed connector field"}),p.i18n.translate("xpack.cases.caseView.syncAlertsLabel",{defaultMessage:"Sync alerts"})),P=p.i18n.translate("xpack.cases.caseView.syncAlertsLowercaseLabel",{defaultMessage:"sync alerts"}),R=p.i18n.translate("xpack.cases.caseView.doesNotExist.title",{defaultMessage:"This case does not exist"}),V=e=>p.i18n.translate("xpack.cases.caseView.doesNotExist.description",{values:{caseId:e},defaultMessage:"A case with id {caseId} could not be found. This likely means the case has been deleted, or the id is incorrect."}),U=p.i18n.translate("xpack.cases.caseView.doesNotExist.button",{defaultMessage:"Back to Cases"}),B=p.i18n.translate("xpack.cases.caseView.tabs.activity",{defaultMessage:"Activity"}),$=p.i18n.translate("xpack.cases.caseView.tabs.alerts",{defaultMessage:"Alerts"}),z=p.i18n.translate("xpack.cases.caseView.tabs.alerts.emptyDescription",{defaultMessage:"No alerts have been added to this case."}),_=p.i18n.translate("xpack.cases.caseView.editAssigneesAriaLabel",{defaultMessage:"click to edit assignees"}),H=p.i18n.translate("xpack.cases.caseView.noAssignees",{defaultMessage:"No users are assigned"}),G=p.i18n.translate("xpack.cases.caseView.assignUser",{defaultMessage:"Assign a user"}),q=p.i18n.translate("xpack.cases.caseView.spacedOrText",{defaultMessage:" or "}),Q=p.i18n.translate("xpack.cases.caseView.assignYourself",{defaultMessage:"assign yourself"});var W=a(141),K=a(17);const Y=s.a.memo((({caseId:e})=>{const{navigateToAllCases:t}=Object(K.i)();return s.a.createElement(o.EuiEmptyPrompt,{"data-test-subj":"case-view-does-not-exist",iconColor:"default",iconType:"casesApp",title:s.a.createElement("h2",null,R),titleSize:"xs",body:s.a.createElement("p",null,V(e)),actions:s.a.createElement(o.EuiButton,{onClick:t,size:"s",color:"primary",fill:!0},U)})}));Y.displayName="DoesNotExist";var X=a(20),J=a(47),Z=a(15),ee=a(155),te=a(150);const ae=p.i18n.translate("xpack.cases.caseView.editActionsLinkAria",{defaultMessage:"click to see all actions"}),ne="property-actions",se=s.a.memo((({disabled:e=!1,onClick:t,iconType:a,label:n})=>s.a.createElement(o.EuiButtonEmpty,{"aria-label":n,color:"text","data-test-subj":`${ne}-${a}`,iconSide:"left",iconType:a,isDisabled:e,onClick:t},n)));se.displayName="PropertyActionButton";const re=s.a.memo((({propertyActions:e})=>{const[t,a]=Object(n.useState)(!1),r=Object(n.useCallback)((()=>{a((e=>!e))}),[]),i=Object(n.useCallback)((e=>{a(!1),null!=e&&e()}),[]);return s.a.createElement(o.EuiPopover,{anchorPosition:"downRight","data-test-subj":ne,ownFocus:!0,button:s.a.createElement(o.EuiButtonIcon,{"data-test-subj":`${ne}-ellipses`,"aria-label":ae,iconType:"boxesHorizontal",onClick:r}),id:"settingsPopover",isOpen:t,closePopover:i,repositionOnScroll:!0},s.a.createElement(o.EuiFlexGroup,{alignItems:"flexStart","data-test-subj":`${ne}-group`,direction:"column",gutterSize:"none"},e.map(((e,t)=>s.a.createElement(o.EuiFlexItem,{grow:!1,key:`${e.label}${t}`},s.a.createElement("span",null,s.a.createElement(se,{disabled:e.disabled,iconType:e.iconType,label:e.label,onClick:()=>i(e.onClick)})))))))}));re.displayName="PropertyActions";const ie=({caseData:e,currentExternalIncident:t})=>{const{mutate:a}=Object(ee.a)(),{navigateToAllCases:r}=Object(K.i)(),{permissions:i}=Object(X.a)(),[l,c]=Object(n.useState)(!1),u=Object(n.useCallback)((()=>{c(!0)}),[]),d=Object(n.useCallback)((()=>{c(!1)}),[]),m=Object(n.useMemo)((()=>{var e,a;return[...i.delete?[{iconType:"trash",label:g.A(),onClick:u}]:[],...null==t||Object(Z.isEmpty)(null==t?void 0:t.externalUrl)?[]:[{iconType:"popout",label:(a=null!==(e=null==t?void 0:t.externalTitle)&&void 0!==e?e:"",p.i18n.translate("xpack.cases.caseView.actionLabel.viewIncident",{defaultMessage:"View {incidentNumber}",values:{incidentNumber:a}})),onClick:()=>window.open(null==t?void 0:t.externalUrl,"_blank")}]]}),[i.delete,u,t]),b=Object(n.useCallback)((()=>{c(!1),a({caseIds:[e.id],successToasterTitle:g.z(1)},{onSuccess:r})}),[e.id,a,r]);return 0===m.length?null:s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":"case-view-actions"},s.a.createElement(re,{propertyActions:m}),l?s.a.createElement(te.a,{totalCasesToBeDeleted:1,onCancel:d,onConfirm:b}):null)};ie.displayName="Actions";const oe=s.a.memo(ie);var le=a(145),ce=a.n(le),ue=a(4),de=a(48);const me=e=>e.reduce(((e,t)=>{var a,n;if((Object(de.b)(t)||Object(de.c)(t))&&(null===(a=t.payload)||void 0===a||null===(n=a.connector)||void 0===n?void 0:n.id)!==ue.q){const a=t.payload.connector;return{...e,[a.id]:[...e[a.id]||[],a.fields]}}return e}),{}),pe=(e,t)=>{const a=Object(u.i)(),n=new AbortController;return Object(l.useQuery)(m.d.userActions(e,t),(async()=>{const a=await Object(d.e)(e,n.signal),s=Object(Z.isEmpty)(a)?[]:Object(Z.uniqBy)("createdBy.username",a).map((e=>e.createdBy)),r=Object(Z.isEmpty)(a)?[]:a,i=((e,t)=>{const a=t=>{const a=[...e].reverse(),n=a.findIndex((e=>Object(de.d)(e)&&e.payload.externalService.connectorId===t));if(-1===n)return!0;const s=a.length-n-1,r=e.slice(0,s),i=e.slice(s+1,a.length),o=(({connectorFieldsBeforePush:e,connectorFieldsAfterPush:t,connectorId:a})=>{if(null==t||null==t[a])return!1;const n=t[a];if(null!=e&&null!=e[a]){const t=e[a];return!ce()(t[t.length-1],n[n.length-1])}return n.length>=2&&!ce()(n[n.length-2],n[n.length-1])})({connectorFieldsBeforePush:me(r),connectorFieldsAfterPush:me(i),connectorId:t});return i.some((e=>e.type!==ue.a.connector&&e.type!==ue.a.pushed))||o},n=e.reduce(((e,t,a)=>t.type===ue.a.comment&&null!=t.commentId?[...e,{commentId:t.commentId,commentIndex:a}]:e),[]);let s=e.reduce(((e,t,n)=>{if(!Object(de.d)(t))return e;const s=t.payload.externalService;return null===s?e:{...e,...null!=e[s.connectorId]?{[s.connectorId]:{...e[s.connectorId],...s,lastPushIndex:n,commentsToUpdate:[]}}:{[s.connectorId]:{...s,firstPushIndex:n,lastPushIndex:n,hasDataToPush:a(s.connectorId),commentsToUpdate:[]}}}}),{});return s=Object.keys(s).reduce(((e,t)=>({...e,[t]:{...s[t],commentsToUpdate:n.reduce(((e,a)=>a.commentIndex>s[t].lastPushIndex?e.indexOf(a.commentId)>-1?[...e.filter((e=>e!==a.commentId)),a.commentId]:[...e,a.commentId]:e),[])}})),{}),{hasDataToPush:null==s[t]||s[t].hasDataToPush,caseServices:s}})(r,t);return{caseUserActions:r,participants:s,profileUids:r.reduce(((e,t)=>{if(t.type===ue.a.assignees){const a=t.payload.assignees.map((e=>e.uid));for(const t of a)e.add(t)}return Object(de.d)(t)&&null!=t.payload.externalService.pushedBy.profileUid&&e.add(t.payload.externalService.pushedBy.profileUid),null!=t.createdBy.profileUid&&e.add(t.createdBy.profileUid),e}),new Set),...i}}),{onError:e=>{"AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.b})}})};var ge=a(25),be=a(109),fe=a(94);const Ee=({currentStatus:e,disabled:t=!1,isLoading:a=!1,onStatusChanged:r})=>{const[i,l]=Object(n.useState)(!1),c=Object(n.useCallback)((()=>l((e=>!e))),[]),u=Object(n.useCallback)((()=>l(!1)),[]),d=Object(n.useMemo)((()=>s.a.createElement(be.a,{disabled:t||a,status:e,onClick:c})),[t,e,c,a]),m=Object(n.useCallback)((t=>{u(),e!==t&&r(t)}),[u,e,r]),p=Object(n.useMemo)((()=>ue.t.map((t=>s.a.createElement(o.EuiContextMenuItem,{"data-test-subj":`case-view-status-dropdown-${t}`,icon:t===e?"check":"empty",key:t,onClick:()=>m(t)},s.a.createElement(ge.b,{status:t}))))),[e,m]);return t?s.a.createElement(ge.b,{status:e}):s.a.createElement(o.EuiPopover,{anchorPosition:"downLeft",button:d,closePopover:u,"data-test-subj":"case-view-status-dropdown",id:"caseStatusPopover",isOpen:i,panelPaddingSize:"none"},s.a.createElement(o.EuiContextMenuPanel,{title:fe.f,items:p}))};Ee.displayName="StatusContextMenu";const he=Object(n.memo)(Ee),ve=({disabled:e,isSynced:t=!0,showLabel:a=!1,onSwitchChange:r})=>{const[i,l]=Object(n.useState)(t),c=Object(n.useCallback)((()=>{r&&r(!i),l(!i)}),[i,r]);return s.a.createElement(o.EuiSwitch,{label:i?g.cb:g.bb,showLabel:a,checked:i,onChange:c,disabled:e,"data-test-subj":"sync-alerts-switch"})};ve.displayName="SyncAlertsSwitchComponent";const ye=Object(n.memo)(ve);var Ce=a(133);const je=()=>{const e=Object(l.useQueryClient)();return Object(n.useCallback)((()=>{e.invalidateQueries(m.d.caseView()),e.invalidateQueries(m.d.tags())}),[e])};var xe=a(101);const Ie=i()(o.EuiDescriptionList).withConfig({displayName:"MyDescriptionList",componentId:"sc-ns1eu-0"})(["",""],(({theme:e})=>Object(r.css)(["&{padding-right:",";border-right:",";@media only screen and (max-width:","){padding-right:0;border-right:0;}}"],e.eui.euiSizeL,e.eui.euiBorderThin,e.eui.euiBreakpoints.m))),Oe=({caseData:e,isLoading:t,onUpdateField:a})=>{const{permissions:r}=Object(X.a)(),{isSyncAlertsEnabled:i,metricsFeatures:l}=Object(xe.a)(),c=Object(n.useMemo)((()=>{return(t=e).status===ue.h.open?t.createdAt:t.status===ue.h["in-progress"]?t.updatedAt:t.status===ue.h.closed?t.closedAt:null;var t}),[e]),u=Object(n.useMemo)((()=>{return t=e.status,be.c[t].actionBar.title;var t}),[e.status]),d=je(),m=Object(n.useCallback)((e=>a({key:"status",value:e})),[a]),{data:p,isLoading:b}=pe(e.id,e.connector.id),f=Object(n.useMemo)((()=>null!=(null==p?void 0:p.caseServices)&&null!=p.caseServices[e.connector.id]?p.caseServices[e.connector.id]:null),[null==p?void 0:p.caseServices,e.connector]),E=Object(n.useCallback)((t=>a({key:"settings",value:{...e.settings,syncAlerts:t}})),[e.settings,a]);return s.a.createElement(o.EuiFlexGroup,{gutterSize:"l",justifyContent:"flexEnd","data-test-subj":"case-action-bar-wrapper"},b?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"case-view-action-bar-spinner",size:"l"})):s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Ie,{compressed:!0},s.a.createElement(o.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween"},s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":"case-view-status"},s.a.createElement(o.EuiDescriptionListTitle,null,F),s.a.createElement(o.EuiDescriptionListDescription,null,s.a.createElement(he,{currentStatus:e.status,disabled:!r.update,isLoading:t,onStatusChanged:m}))),l.includes("lifespan")?null:s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiDescriptionListTitle,null,u),s.a.createElement(o.EuiDescriptionListDescription,null,s.a.createElement(Ce.a,{"data-test-subj":"case-action-bar-status-date",value:c})))))),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiDescriptionList,{compressed:!0},s.a.createElement(o.EuiFlexGroup,{gutterSize:"l",alignItems:"center",responsive:!1,justifyContent:"spaceBetween"},r.update&&i&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiDescriptionListTitle,null,s.a.createElement(o.EuiFlexGroup,{component:"span",alignItems:"center",gutterSize:"xs",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement("span",null,N)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiIconTip,{content:g.ab})))),s.a.createElement(o.EuiDescriptionListDescription,null,s.a.createElement(ye,{disabled:t,isSynced:e.settings.syncAlerts,onSwitchChange:E}))),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement("span",null,s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"case-refresh",flush:"left",iconType:"refresh",onClick:d},L))),s.a.createElement(oe,{caseData:e,currentExternalIncident:f}))))))};Oe.displayName="CaseActionBar";const we=s.a.memo(Oe);var Ae=a(131),ke=a(3),Se=a(130),Te=a(179);const Fe=i()(o.EuiButtonIcon).withConfig({displayName:"MyEuiButtonIcon",componentId:"sc-4bg36g-0"})(["",""],(({theme:e})=>Object(r.css)(["margin-left:",";"],e.eui.euiSize))),De=i()(o.EuiLoadingSpinner).withConfig({displayName:"MySpinner",componentId:"sc-4bg36g-1"})(["",""],(({theme:e})=>Object(r.css)(["margin-left:",";"],e.eui.euiSize))),Me=({onSubmit:e,isLoading:t,title:a})=>{const{releasePhase:r,permissions:i}=Object(X.a)(),[l,c]=Object(n.useState)(!1),[u,d]=Object(n.useState)([]),[m,p]=Object(n.useState)(a),g=Object(n.useCallback)((()=>{c(!1),d([]),p(a)}),[a]),b=Object(n.useCallback)((()=>c(!0)),[]),f=Object(n.useCallback)((()=>{m.length>ke.O?d([Se.h("title",ke.O)]):(m!==a&&e(m),c(!1),d([]))}),[m,e,a]),E=Object(n.useCallback)((e=>p(e.target.value)),[]),h=u.length>0;return l?s.a.createElement(o.EuiFormRow,{isInvalid:h,error:u,fullWidth:!0},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",responsive:!0,gutterSize:"m",justifyContent:"spaceBetween"},s.a.createElement(o.EuiFlexItem,{grow:!0},s.a.createElement(o.EuiFieldText,{fullWidth:!0,onChange:E,value:`${m}`,"data-test-subj":"editable-title-input-field"})),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{color:"success","data-test-subj":"editable-title-submit-btn",fill:!0,iconType:"save",onClick:f,size:"s"},Se.i)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"editable-title-cancel-btn",iconType:"cross",onClick:g,size:"s"},Se.d)))):s.a.createElement(Te.a,{title:a,releasePhase:r},t&&s.a.createElement(De,{"data-test-subj":"editable-title-loading"}),!t&&i.update&&s.a.createElement(Fe,{"aria-label":Se.e(a),iconType:"pencil",onClick:b,"data-test-subj":"editable-title-edit-icon"}))};Me.displayName="EditableTitle";const Le=s.a.memo(Me);var Ne=a(140),Pe=a(128),Re=a(120),Ve=a(8),Ue=a(113),Be=a(167),$e=a(126),ze=a(76),_e=a(168),He=a(190);const Ge={connectorId:{type:ze.FIELD_TYPES.SUPER_SELECT}},qe=(e,t)=>{for(const a of[...t].reverse())if(Object(de.b)(a)||Object(de.c)(a)){const t=a.payload.connector;if(t&&e===t.id)return t.fields}return null},Qe=p.i18n.translate("xpack.cases.editConnector.editConnectorLinkAria",{defaultMessage:"click to edit connector"});var We=a(93),Ke=a(174),Ye=a(178),Xe=a(129);const Je=p.i18n.translate("xpack.cases.addConnector.title",{defaultMessage:"Add connector"}),Ze=p.i18n.translate("xpack.cases.caseView.pushToServiceDisableBecauseCaseClosedTitle",{defaultMessage:"Reopen the case"}),et=p.i18n.translate("xpack.cases.caseView.errorsPushServiceCallOutTitle",{defaultMessage:"Select an external connector"}),tt=({handleButtonClick:e,id:t,messages:a,type:r,hasLicenseError:i})=>{const l=Object(n.useCallback)((a=>e(a,t,r)),[e,t,r]),c=Object(n.useMemo)((()=>a.map((e=>e.id)).includes(Ye.a)),[a]);return Object(Z.isEmpty)(a)?null:s.a.createElement(o.EuiCallOut,{title:c?Ze:i?Xe.e:et,color:r,iconType:"gear","data-test-subj":`case-callout-${t}`,size:"s"},s.a.createElement(o.EuiDescriptionList,{"data-test-subj":`callout-messages-${t}`,listItems:a}),!c&&!i&&s.a.createElement(o.EuiButton,{"data-test-subj":`callout-onclick-${t}`,color:"success"===r?"success":r,onClick:l},Je))};tt.displayName="CallOut";const at=Object(n.memo)(tt);var nt=a(194),st=a.n(nt);const rt=({hasConnectors:e,hasLicenseError:t,onEditClick:a,messages:r=[]})=>{const{navigateToConfigureCases:i}=Object(K.l)(),l=Object(n.useCallback)((t=>{t.preventDefault(),e?a():i()}),[e,a,i]),c=Object(n.useMemo)((()=>r.reduce(((e,t)=>{var a,n,s,r;const i=null==t.errorType?"primary":t.errorType;return{...e,[i]:{messagesId:[...null!==(a=null===(n=e[i])||void 0===n?void 0:n.messagesId)&&void 0!==a?a:[],t.id],messages:[...null!==(s=null===(r=e[i])||void 0===r?void 0:r.messages)&&void 0!==s?s:[],t]}}}),{})),[r]);return s.a.createElement(s.a.Fragment,null,Object.keys(c).map((e=>{const a=((e,t="|")=>st()(e.join(t)))(c[e].messagesId);return s.a.createElement(s.a.Fragment,{key:a},s.a.createElement(at,{handleButtonClick:l,id:a,messages:c[e].messages,type:e,hasLicenseError:t}),s.a.createElement(o.EuiSpacer,null))})))};rt.displayName="CaseCallOut";const it=Object(n.memo)(rt);var ot=a(177),lt=a(176);const ct=i()(o.EuiFlexGroup).withConfig({displayName:"MyFlexGroup",componentId:"sc-cj1kee-0"})(["",""],(({theme:e})=>`\n    margin-top: ${e.eui.euiSizeM};\n    p {\n      font-size: ${e.eui.euiSizeM};\n    }\n  `)),ut=i()(o.EuiFlexItem).withConfig({displayName:"DisappearingFlexItem",componentId:"sc-cj1kee-1"})(["",""],(({$isHidden:e})=>e&&"\n      margin: 0 !important;\n      & .euiFlexItem {\n        margin: 0 !important;\n      }\n    ")),dt=(e,t)=>{switch(t.type){case"SET_CURRENT_CONNECTOR":return{...e,currentConnector:t.payload};case"SET_FIELDS":return{...e,fields:t.payload};case"SET_EDIT_CONNECTOR":return{...e,editConnector:t.payload};default:return e}},mt={currentConnector:null,fields:null,editConnector:!1},pt=s.a.memo((({caseData:e,caseServices:t,connectorName:a,connectors:r,hasDataToPush:i,isLoading:l,isValidConnector:c,onSubmit:d,userActions:m})=>{const{permissions:p}=Object(X.a)(),b=e.connector.fields,f=e.connector.id,{form:E}=Object(ze.useForm)({defaultValue:{connectorId:f},options:{stripEmptyFields:!1},schema:Ge}),{actions:h}=Object(u.b)(),v=h.read,[y,C]=Object(n.useState)(!1),{setFieldValue:j,submit:x}=E,[{currentConnector:I,fields:O,editConnector:w},A]=Object(n.useReducer)(dt,{...mt,fields:b});Object(n.useEffect)((()=>{const e=!(null===I&&f===ue.q)&&(null==I?void 0:I.id)!==f||!ce()(O,b);C(e)}),[b,I,O,f]),Object(n.useEffect)((()=>{l||(A({type:"SET_CURRENT_CONNECTOR",payload:Object(We.a)(e.connector.id,r)}),A({type:"SET_FIELDS",payload:b}))}),[e.connector.id,r,l,b]);const k=Object(n.useCallback)((e=>{(null==I?void 0:I.id)!==e&&(A({type:"SET_CURRENT_CONNECTOR",payload:Object(We.a)(e,r)}),A({type:"SET_FIELDS",payload:qe(e,null!=m?m:[])}))}),[I,m,r]),S=Object(n.useCallback)((e=>{ce()(e,O)||A({type:"SET_FIELDS",payload:e})}),[O,A]),T=Object(n.useCallback)((()=>{j("connectorId",f),A({type:"SET_EDIT_CONNECTOR",payload:!1})}),[A,j,f]),F=Object(n.useCallback)((()=>{j("connectorId",f),A({type:"SET_FIELDS",payload:b}),A({type:"SET_EDIT_CONNECTOR",payload:!1})}),[A,f,j,b]),D=Object(n.useCallback)((async()=>{const{isValid:e,data:t}=await x();e&&t.connectorId&&(d(t.connectorId,O,T,Z.noop),A({type:"SET_EDIT_CONNECTOR",payload:!1}))}),[A,x,O,d,T]),M=Object(n.useCallback)((()=>{A({type:"SET_EDIT_CONNECTOR",payload:!0})}),[A]),L=Object(We.c)({config:Ge.connectorId,connectors:r}),{pushButton:N,pushCallouts:P}=(({caseId:e,caseServices:t,caseStatus:a,connector:r,connectors:i,hasDataToPush:l,isValidConnector:c,onEditClick:u})=>{const{permissions:d}=Object(X.a)(),{isLoading:m,pushCaseToExternalService:p}=Object(Ke.a)(),{isLoading:g,data:b=null}=Object(lt.a)(),f=null!=b&&!b.enabledInLicense,E=je(),h=Object(n.useCallback)((async()=>{null!=r.id&&"none"!==r.id&&null!=await p({caseId:e,connector:r})&&E()}),[e,r,p,E]),v=Object(n.useMemo)((()=>{const e=[];return d.update?f?[Object(ot.f)()]:null==b||b.enabledInConfig?"none"!==r.id||g||f?c||g||f?a===ue.h.closed?[Object(ot.b)()]:e:[Object(ot.d)()]:[Object(ot.c)()]:[Object(ot.e)()]:e}),[b,a,i.length,r,g,d.update]),y=Object(n.useMemo)((()=>s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"push-to-external-service",iconType:"importAction",onClick:h,disabled:m||g||v.length>0||!d.push||!c||!l,isLoading:m},t[r.id]?Xe.i(r.name):Xe.h(r.name))),[r,i,v,h,l,m,g,d.push,c]);return Object(n.useMemo)((()=>({pushButton:v.length>0||!l||!d.push?s.a.createElement(o.EuiToolTip,{position:"top",title:v.length>0?v[0].title:Xe.g(r.name),content:s.a.createElement("p",null,v.length>0?v[0].description:Xe.f)},y):s.a.createElement(s.a.Fragment,null,y),pushCallouts:v.length>0?s.a.createElement(it,{hasConnectors:i.length>0,hasLicenseError:f,messages:v,onEditClick:u}):null})),[r.name,i.length,v,l,f,u,y,d.push])})({connector:{...e.connector,name:Object(Z.isEmpty)(a)?e.connector.name:a},caseServices:t,caseId:e.id,caseStatus:e.status,connectors:r,hasDataToPush:i,onEditClick:M,isValidConnector:c});return s.a.createElement(o.EuiText,null,s.a.createElement(ct,{alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween",responsive:!1,"data-test-subj":"case-view-edit-connector"},s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":"connector-edit-header"},s.a.createElement("h4",null,g.v)),l&&s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"connector-loading"}),!l&&!w&&p.push&&v&&s.a.createElement(o.EuiFlexItem,{"data-test-subj":"connector-edit",grow:!1},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":"connector-edit-button","aria-label":Qe,iconType:"pencil",onClick:M}))),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(ct,{"data-test-subj":"edit-connectors",direction:"column"},!l&&!w&&P&&v&&s.a.createElement(o.EuiFlexItem,{"data-test-subj":"push-callouts"},P),s.a.createElement(ut,{$isHidden:!w},s.a.createElement(ze.Form,{form:E},s.a.createElement(o.EuiFlexGroup,{gutterSize:"none",direction:"row"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(ze.UseField,{path:"connectorId",config:L,component:_e.a,componentProps:{connectors:r,dataTestSubj:"caseConnectors",defaultValue:f,disabled:!p.push,idAria:"caseConnectors",isEdit:w,isLoading:l},onChange:k}))))),s.a.createElement(o.EuiFlexItem,{"data-test-subj":"edit-connector-fields-form-flex-item"},!w&&!v&&s.a.createElement(o.EuiText,{"data-test-subj":"edit-connector-permissions-error-msg",size:"s"},s.a.createElement("span",null,g.R)),s.a.createElement(He.a,{connector:I,fields:O,isEdit:w,onChange:S})),w&&s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{disabled:!y,color:"success","data-test-subj":"edit-connectors-submit",fill:!0,iconType:"save",onClick:D,size:"s"},g.V)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"edit-connectors-cancel",iconType:"cross",onClick:F,size:"s"},g.k)))),null==P&&!l&&!w&&p.push&&v&&s.a.createElement(o.EuiFlexItem,{"data-test-subj":"has-data-to-push-button",grow:!1},s.a.createElement("span",null,N))))}));pt.displayName="EditConnector";var gt=a(110);const bt=({status:e,onStatusChanged:t,isLoading:a})=>{const r=Object(n.useMemo)((()=>ue.t.findIndex((t=>t===e))),[e]),i=Object(n.useMemo)((()=>(r+1)%ue.t.length),[r]),l=Object(n.useCallback)((()=>{t(ue.t[i])}),[i,t]);return s.a.createElement(o.EuiButton,{"data-test-subj":"case-view-status-action-button",iconType:gt.b[ue.t[i]].icon,isLoading:a,onClick:l},gt.b[ue.t[i]].button.label)};bt.displayName="StatusActionButton";const ft=Object(n.memo)(bt);var Et=a(79);const ht=p.i18n.translate("xpack.cases.caseView.editTagsLinkAria",{defaultMessage:"click to edit tags"});var vt=a(122);const yt=i()(o.EuiBadge).withConfig({displayName:"MyEuiBadge",componentId:"sc-g0rsz4-0"})(["max-width:200px;"]),Ct=({tags:e,color:t="default",gutterSize:a})=>s.a.createElement(s.a.Fragment,null,e.length>0&&s.a.createElement(o.EuiBadgeGroup,{gutterSize:a},e.map((e=>s.a.createElement(yt,{"data-test-subj":`tag-${e}`,color:t,key:e},e)))));Ct.displayName="Tags";const jt=Object(n.memo)(Ct),xt={tags:a(149).b},It=Object(ze.getUseField)({component:Et.Field}),Ot=i()(o.EuiFlexGroup).withConfig({displayName:"MyFlexGroup",componentId:"sc-1d60ok1-0"})(["",""],(({theme:e})=>Object(r.css)(["width:100%;margin-top:",";p{font-size:",";}"],e.eui.euiSizeM,e.eui.euiSizeM))),wt=i()(o.EuiFlexGroup).withConfig({displayName:"ColumnFlexGroup",componentId:"sc-1d60ok1-1"})(["",""],(({theme:e})=>Object(r.css)(["&{max-width:100%;@media only screen and (max-width:","){flex-direction:row;}}"],e.eui.euiBreakpoints.m))),At=s.a.memo((({isLoading:e,onSubmit:t,tags:a})=>{const{permissions:r}=Object(X.a)(),i={tags:a},{form:l}=Object(ze.useForm)({defaultValue:i,options:{stripEmptyFields:!1},schema:xt}),{submit:c}=l,[u,d]=Object(n.useState)(!1),m=Object(n.useCallback)((async()=>{const{isValid:e,data:a}=await c();e&&a.tags&&(t(a.tags),l.reset({defaultValue:a}),d(!1))}),[t,c]),{data:p=[]}=Object(vt.a)(),[b,f]=Object(n.useState)(p.map((e=>({label:e}))));return Object(n.useEffect)((()=>f(p.map((e=>({label:e}))))),[p]),s.a.createElement(o.EuiText,{"data-test-subj":"case-view-tag-list"},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement("h4",null,g.db)),e&&s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"tag-list-loading"}),!e&&r.update&&s.a.createElement(o.EuiFlexItem,{"data-test-subj":"tag-list-edit",grow:!1},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":"tag-list-edit-button","aria-label":ht,iconType:"pencil",onClick:d.bind(null,!0)}))),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(Ot,{gutterSize:"none","data-test-subj":"case-tags"},0===a.length&&!u&&s.a.createElement("p",{"data-test-subj":"no-tags"},g.K),!u&&s.a.createElement(o.EuiFlexItem,null,s.a.createElement(jt,{tags:a,color:"hollow"})),u&&s.a.createElement(wt,{"data-test-subj":"edit-tags",direction:"column"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(ze.Form,{form:l},s.a.createElement(It,{path:"tags",componentProps:{idAria:"caseTags","data-test-subj":"caseTags",euiFieldProps:{fullWidth:!0,placeholder:"",options:b,noSuggestions:!1,customOptionText:g.e}}}),s.a.createElement(ze.FormDataProvider,{pathsToWatch:"tags"},(({tags:e})=>{const t=b.map((e=>e.label)),a=e.reduce(((e,t)=>e.includes(t)?e:[...e,t]),t);return Object(Z.isEqual)(t,a)||f(a.map((e=>({label:e})))),null})))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{color:"success","data-test-subj":"edit-tags-submit",fill:!0,iconType:"save",onClick:m,size:"s"},g.V)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"edit-tags-cancel",iconType:"cross",onClick:d.bind(null,!1),size:"s"},g.k)))))))}));At.displayName="EditTags";var kt=a(49),St=a(118),Tt=a(81);const{emptyField:Ft}=Tt.fieldValidators,Dt={comment:{type:ze.FIELD_TYPES.TEXTAREA,validations:[{validator:Ft(g.t)}]}};var Mt=a(173);const Lt=i()(o.EuiLoadingSpinner).withConfig({displayName:"MySpinner",componentId:"sc-1b6ejct-0"})(["position:absolute;top:50%;left:50%;"]),Nt={comment:""},Pt=s.a.memo(Object(n.forwardRef)((({id:e,caseId:t,onCommentPosted:a,onCommentSaving:r,showLoading:i=!0,statusActionButton:l},c)=>{const u=Object(n.useRef)(null),[d,m]=Object(n.useState)(!1),{permissions:p,owner:b}=Object(X.a)(),{isLoading:f,createAttachments:E}=Object(kt.a)(),{form:h}=Object(ze.useForm)({defaultValue:Nt,options:{stripEmptyFields:!1},schema:Dt}),v="comment",{setFieldValue:y,reset:C,submit:j}=h,[{comment:x}]=Object(ze.useFormData)({form:h,watch:[v]}),I=Object(n.useCallback)((e=>{const t=`> ${e.replace(new RegExp("\r?\n","g"),"\n> ")} \n\n`;y(v,`${x}${x.length>0?"\n\n":""}${t}`),m(!0)}),[x,y]),O=Object(n.useCallback)((e=>{y(v,e)}),[y]);Object(n.useImperativeHandle)(c,(()=>({addQuote:I,setComment:O,editor:u.current})));const w=Object(n.useCallback)((async()=>{const{isValid:e,data:n}=await j();e&&(null!=r&&r(),E({caseId:t,caseOwner:b[0],data:[{...n,type:ue.n.user}],updateCase:a}),C())}),[j,r,E,t,b,a,C]);return Object(n.useEffect)((()=>{var e,t;Object(Ve.isEmpty)(x)||null===(e=u.current)||void 0===e||null===(t=e.textarea)||void 0===t||t.focus(),d&&m(!1)}),[d]),s.a.createElement("span",{id:"add-comment-permLink"},f&&i&&s.a.createElement(Lt,{"data-test-subj":"loading-spinner",size:"xl"}),p.create&&s.a.createElement(ze.Form,{form:h},s.a.createElement(ze.UseField,{path:v,component:St.a,componentProps:{ref:u,id:e,idAria:"caseComment",isDisabled:f,dataTestSubj:"add-comment",placeholder:g.c,bottomRightContent:s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"flexEnd",responsive:!1,wrap:!0},l&&s.a.createElement(o.EuiFlexItem,{grow:!1},l),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{"data-test-subj":"submit-comment",fill:!0,iconType:"plusInCircle",isDisabled:f,isLoading:f,onClick:w},g.b)))}}),s.a.createElement(Mt.a,{fieldName:"comment"})))})));Pt.displayName="AddComment";var Rt=a(135),Vt=a(107),Ut=a(77),Bt=a(153);const $t=e=>p.i18n.translate("xpack.cases.caseView.requiredUpdateToExternalService",{values:{externalService:e},defaultMessage:"Requires update to { externalService } incident"}),zt=p.i18n.translate("xpack.cases.caseView.copyCommentLinkAria",{defaultMessage:"Copy reference link"}),_t=p.i18n.translate("xpack.cases.caseView.moveToCommentAria",{defaultMessage:"Highlight the referenced comment"}),Ht=p.i18n.translate("xpack.cases.caseView.alertCommentLabelTitle",{defaultMessage:"added an alert from"}),Gt=p.i18n.translate("xpack.cases.caseView.showAlertTooltip",{defaultMessage:"Show alert details"}),qt=p.i18n.translate("xpack.cases.caseView.showAlertTableTooltip",{defaultMessage:"Show alerts"}),Qt=p.i18n.translate("xpack.cases.caseView.unknownRule.label",{defaultMessage:"Unknown rule"}),Wt=p.i18n.translate("xpack.cases.caseView.isolatedHost",{defaultMessage:"submitted isolate request on host"}),Kt=p.i18n.translate("xpack.cases.caseView.releasedHost",{defaultMessage:"submitted release request on host"}),Yt=p.i18n.translate("xpack.cases.caseView.delete.cancel",{defaultMessage:"Cancel"}),Xt=p.i18n.translate("xpack.cases.caseView.delete.confirm",{defaultMessage:"Delete"}),Jt=p.i18n.translate("xpack.cases.caseView.assigned",{defaultMessage:"assigned"}),Zt=p.i18n.translate("xpack.cases.caseView.unAssigned",{defaultMessage:"unassigned"}),ea=p.i18n.translate("xpack.cases.caseView.assignee.themselves",{defaultMessage:"themselves"}),ta=p.i18n.translate("xpack.cases.caseView.assignee.and",{defaultMessage:"and"}),aa=({createdAt:e,updatedAt:t})=>s.a.createElement(s.a.Fragment,null,s.a.createElement(Bt.a,{date:new Date(e)},s.a.createElement(Ut.FormattedRelative,{"data-test-subj":"user-action-title-creation-relative-time",value:e})),t&&s.a.createElement(o.EuiTextColor,{color:"subdued"}," (",C," ",s.a.createElement(Bt.a,{date:new Date(t)},s.a.createElement(Ut.FormattedRelative,{"data-test-subj":"user-action-title-edited-relative-time",value:t})),")"));aa.displayName="UserActionTimestamp";const na=Object(n.memo)(aa);var sa=a(197),ra=a.n(sa);const ia=({id:e})=>{const{getCaseViewUrl:t}=Object(K.j)(),{detailName:a}=Object(K.k)(),r=Object(n.useCallback)((()=>{ra()(t({detailName:a,commentId:e},!0))}),[a,e,t]);return s.a.createElement(o.EuiToolTip,{position:"top",content:s.a.createElement("p",null,zt)},s.a.createElement(o.EuiButtonIcon,{"aria-label":zt,"data-test-subj":`copy-link-${e}`,onClick:r,iconType:"link",id:`${e}-permLink`}))};ia.displayName="UserActionCopyLink";const oa=Object(n.memo)(ia),la=({id:e,outlineComment:t})=>{const a=Object(n.useCallback)((()=>{t(e)}),[e,t]);return s.a.createElement(o.EuiToolTip,{position:"top",content:s.a.createElement("p",null,_t)},s.a.createElement(o.EuiButtonIcon,{"aria-label":_t,"data-test-subj":`move-to-link-${e}`,onClick:a,iconType:"arrowUp"}))};la.displayName="UserActionMoveToReference";const ca=Object(n.memo)(la);var ua=a(164);const da=({userInfo:e,boldName:t=!1})=>{const a=Object(Rt.a)(null==e?void 0:e.user);return s.a.createElement(o.EuiText,{size:"s",className:"eui-textBreakWord","data-test-subj":"user-profile-username"},t?s.a.createElement("strong",{"data-test-subj":"user-profile-username-bolded"},a):s.a.createElement(s.a.Fragment,null,a))};da.displayName="Username";const ma=s.a.memo(da),pa=({userInfo:e,boldName:t})=>s.a.createElement(Vt.a,{userInfo:e},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(ua.a,{userInfo:e})),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(ma,{userInfo:e,boldName:t}))))));pa.displayName="HoverableUserWithAvatar";const ga=s.a.memo(pa),ba=(e,t)=>{const a=e.username;if(null!=e.profileUid){const n=null==t?void 0:t.get(e.profileUid);return null!=n?{key:n.uid,userInfo:n}:fa(a)?Ea(a,e):{key:e.profileUid,userInfo:{}}}if(fa(a))return Ea(a,e)},fa=e=>!Object(Ve.isEmpty)(e),Ea=(e,t)=>{var a,n;return{key:e,userInfo:{user:{username:e,full_name:null!==(a=t.fullName)&&void 0!==a?a:void 0,email:null!==(n=t.email)&&void 0!==n?n:void 0}}}},ha=({user:e,userProfiles:t,boldName:a=!0})=>{var n;const{userInfo:r}=null!==(n=ba(e,t))&&void 0!==n?n:{userInfo:void 0};return s.a.createElement(ga,{userInfo:r,boldName:a})};ha.displayName="HoverableUserResolver";const va=s.a.memo(ha),ya=(e,t)=>e===ue.b.update&&null!=t;s.a.memo((({userAction:e,handleOutlineComment:t})=>s.a.createElement(o.EuiFlexGroup,{responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(oa,{id:e.actionId})),ya(e.action,e.commentId)&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(ca,{id:e.commentId,outlineComment:t}))))).displayName="CommentListActions";const Ca=({userProfiles:e,userAction:t,label:a,icon:n,handleOutlineComment:r})=>({build:()=>[{username:s.a.createElement(va,{user:t.createdBy,userProfiles:e}),event:a,"data-test-subj":`${t.type}-${t.action}-action-${t.actionId}`,timestamp:s.a.createElement(na,{createdAt:t.createdAt}),timelineAvatar:n,actions:s.a.createElement(o.EuiFlexGroup,{responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(oa,{id:t.actionId})),ya(t.action,t.commentId)&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(ca,{id:t.commentId,outlineComment:r})))}]});var ja=a(163);const xa=({children:e,index:t,listSize:a})=>Oa(t,a)?s.a.createElement(s.a.Fragment,null,ta," ",e):Ia(t,a)?s.a.createElement(s.a.Fragment,null,e,","):e;xa.displayName="FormatListItem";const Ia=(e,t)=>t>2&&e!==t-1,Oa=(e,t)=>t>1&&e===t-1,wa=({index:e,numOfAssigness:t})=>s.a.createElement(xa,{index:e,listSize:t},s.a.createElement(s.a.Fragment,null,ea));wa.displayName="Themselves";const Aa=({assignee:e,index:t,numOfAssigness:a})=>{var n;return s.a.createElement(xa,{index:t,listSize:a},s.a.createElement(Vt.a,{userInfo:e.profile},s.a.createElement("strong",null,Object(Rt.a)(null===(n=e.profile)||void 0===n?void 0:n.user))))};Aa.displayName="Assignee";const ka=({assignees:e,createdByUser:t})=>s.a.createElement(s.a.Fragment,null,e.length>0&&s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",wrap:!0},e.map(((a,n)=>{const r=Object(ja.a)(a);return s.a.createElement(o.EuiFlexItem,{"data-test-subj":`ua-assignee-${r}`,grow:!1,key:a.uid},s.a.createElement(o.EuiText,{size:"s",className:"eui-textBreakWord"},Ta(a,t)?s.a.createElement(wa,{index:n,numOfAssigness:e.length}):s.a.createElement(Aa,{assignee:a,index:n,numOfAssigness:e.length})))}))));ka.displayName="Assignees";const Sa=Object(n.memo)(ka),Ta=(e,t)=>{var a;return e.uid===(null==t?void 0:t.profileUid)||(null==e||null===(a=e.profile)||void 0===a?void 0:a.user.username)===t.username},Fa=p.i18n.translate("xpack.cases.userActions.attachmentNotRegisteredErrorMsg",{defaultMessage:"Attachment type is not registered"}),Da=p.i18n.translate("xpack.cases.userActions.defaultEventAttachmentTitle",{defaultMessage:"added an attachment of type"}),Ma=p.i18n.translate("xpack.cases.userActions.attachment",{defaultMessage:"Attachment"});var La=a(80),Na=a.n(La);const{emptyField:Pa}=Tt.fieldValidators,Ra={content:{type:ze.FIELD_TYPES.TEXTAREA,validations:[{validator:Pa(g.U)}]}},Va=i.a.div.withConfig({displayName:"ContentWrapper",componentId:"sc-bgw87j-0"})(["padding:",";"],(({theme:e})=>`${e.eui.euiSizeM} ${e.eui.euiSizeL}`)),Ua=Object(n.forwardRef)((({id:e,content:t,isEditable:a,onChangeEditable:r,onSaveContent:i},l)=>{const c=Object(n.useRef)(),u={content:t},{form:d}=Object(ze.useForm)({defaultValue:u,options:{stripEmptyFields:!1},schema:Ra}),m="content",{setFieldValue:p,submit:b}=d,f=Object(n.useCallback)((()=>{r(e)}),[e,r]),E=Object(n.useCallback)((async()=>{const{isValid:a,data:n}=await b();a&&n.content!==t&&i(n.content),r(e)}),[t,e,r,i,b]),h=Object(n.useCallback)((e=>{p(m,e)}),[p]),v=Object(n.useMemo)((()=>s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"user-action-cancel-markdown",size:"s",onClick:f,iconType:"cross"},g.k)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{"data-test-subj":"user-action-save-markdown",color:"success",fill:!0,iconType:"save",onClick:E,size:"s"},g.V)))),[f,E]);return Object(n.useImperativeHandle)(l,(()=>({setComment:h,editor:c.current}))),a?s.a.createElement(ze.Form,{form:d,"data-test-subj":"user-action-markdown-form"},s.a.createElement(ze.UseField,{path:m,component:St.a,componentProps:{ref:c,"aria-label":"Cases markdown editor",value:t,id:e,bottomRightContent:v}})):s.a.createElement(Va,{className:"eui-xScroll","data-test-subj":"user-action-markdown"},s.a.createElement(St.b,null,t))}));Ua.displayName="UserActionMarkdownComponent";const Ba=s.a.memo(Ua),$a=({id:e,withCopyLinkAction:t=!0,children:a})=>s.a.createElement(o.EuiFlexGroup,{responsive:!1,alignItems:"center"},t?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(oa,{id:e})):null,a);$a.displayName="UserActionContentToolbar";const za=Object(n.memo)($a),_a=({user:e,userProfiles:t,boldName:a=!0})=>{var n;const{userInfo:r}=null!==(n=ba(e,t))&&void 0!==n?n:{userInfo:void 0};return s.a.createElement(Vt.a,{userInfo:r},s.a.createElement(ma,{userInfo:r,boldName:a}))};_a.displayName="HoverableUsernameResolver";const Ha=s.a.memo(_a);var Ga=a(151);const qa=({userInfo:e})=>s.a.createElement(Vt.a,{userInfo:e},s.a.createElement(Ga.a,{size:"m",userInfo:e}));qa.displayName="HoverableAvatar";const Qa=s.a.memo(qa),Wa=({user:e,userProfiles:t})=>{var a;const{userInfo:n}=null!==(a=ba(e,t))&&void 0!==a?a:{userInfo:void 0};return s.a.createElement(Qa,{userInfo:n})};Wa.displayName="HoverableUserResolver";const Ka=s.a.memo(Wa);var Ya=a(199),Xa=a.n(Ya),Ja=(a(200),a(250)),Za=a.n(Ja);const en="lens",tn=function(){const e=this.Parser,t=e.prototype.blockTokenizers,a=e.prototype.blockMethods;t.lens=function(e,t,a){if(!1===t.startsWith("!{lens"))return!0;const n=t[6];if("{"!==n&&"}"!==n)return!1;if(a)return!0;let s="!{lens",r={};if("{"===n){let a="",n=0;for(let e=6;e<t.length;e++){const s=t[e];if("{"===s)n++,a+=s;else if("}"===s){if(n--,-1===n)break;a+=s}else a+=s}s+=a;try{r=JSON.parse(a)}catch(t){const a=e.now();this.file.fail(`Unable to parse lens JSON configuration: ${t}`,{line:a.line,column:a.column+6})}}return s+="}",e(s)({type:en,...r})},a.splice(a.indexOf("text"),0,en)},an=p.i18n.translate("xpack.cases.markdownEditor.plugins.timeline.noParenthesesErrorMsg",{defaultMessage:"Expected left parentheses"}),nn="timeline",sn="[",rn=function(){const e=this.Parser,t=e.prototype.blockTokenizers,a=e.prototype.blockMethods,n=function(e,t,a){if(!1===t.startsWith(sn)||!0===t.startsWith(sn)&&!t.includes("timelines?timeline=(id"))return!1;let n=0;if(t[n]!==sn)return!1;if(a)return!0;function s(e,a){if(t[n]!==e)throw new Error(an);n++;let s="",r=0;for(;n<t.length;n++){const i=t[n];if(i===a&&0===r)return n++,s;i===a?r--:i===e&&r++,s+=i}return""}const r=`[${s(sn,"]")}](${s("(",")")})`;return e(r)({type:nn,match:r})};n.locator=(e,t)=>e.indexOf(sn,t),t.timeline=n,a.splice(a.indexOf("url"),0,nn)},on=p.i18n.translate("xpack.cases.userActions.deleteAttachment",{defaultMessage:"Delete attachment"}),ln=e=>p.i18n.translate("xpack.cases.caseView.alerts.removeAlerts",{values:{totalAlerts:e},defaultMessage:"Remove {totalAlerts, plural, =1 {alert} other {alerts}}"}),cn=p.i18n.translate("xpack.cases.caseView.alerts.remove",{defaultMessage:"Remove"}),un=({isLoading:e,propertyActions:t})=>0===t.length?null:s.a.createElement(o.EuiFlexItem,{grow:!1},e?s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"user-action-title-loading"}):s.a.createElement(re,{propertyActions:t}));un.displayName="UserActionPropertyActions";const dn=s.a.memo(un),mn=({title:e,confirmButtonText:t,onConfirm:a,onCancel:n})=>s.a.createElement(o.EuiConfirmModal,{title:e,onCancel:n,onConfirm:a,cancelButtonText:Yt,confirmButtonText:t,buttonColor:"danger",defaultFocusedButton:"confirm","data-test-subj":"property-actions-confirm-modal"});mn.displayName="DeleteAttachmentConfirmationModal";const pn=s.a.memo(mn),gn=({onDelete:e})=>{const[t,a]=Object(n.useState)(!1);return{showDeletionModal:t,onModalOpen:Object(n.useCallback)((()=>{a(!0)}),[]),onConfirm:Object(n.useCallback)((()=>{a(!1),e()}),[e]),onCancel:Object(n.useCallback)((()=>{a(!1)}),[])}},bn=({isLoading:e,commentContent:t,onEdit:a,onDelete:r,onQuote:i})=>{const{permissions:o}=Object(X.a)(),{showDeletionModal:l,onModalOpen:c,onConfirm:d,onCancel:m}=gn({onDelete:r}),{canUseEditor:g,actionConfig:b}=(({comment:e})=>{var t;const a=(e=>Za()().use([[Xa.a,{}],tn,rn]).parse(e))(e),s=(e=>null!=e&&e.length?Object(Ve.filter)(e,{type:en}):[])(null!==(t=null==a?void 0:a.children)&&void 0!==t?t:[]),{lens:{navigateToPrefilledEditor:r,canUseEditor:i}}=Object(u.f)().services,o=Object(n.useCallback)((()=>{r({id:"",timeRange:s[0].timeRange,attributes:s[0].attributes},{openInNewTab:!0})}),[s,r]);return{canUseEditor:i(),actionConfig:s.length?{iconType:"lensApp",label:p.i18n.translate("xpack.cases.markdownEditor.plugins.lens.openVisualizationButtonLabel",{defaultMessage:"Open visualization"}),onClick:o}:null}})({comment:null!=t?t:""}),f=Object(n.useMemo)((()=>{const e=o.update,t=o.delete,n=o.create,s=o.update&&g&&b;return[...e?[{iconType:"pencil",label:k,onClick:a}]:[],...t?[{iconType:"trash",label:S,onClick:c}]:[],...n?[{iconType:"quote",label:A,onClick:i}]:[],...s?[b]:[]]}),[o.update,o.delete,o.create,g,b,a,c,i]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(dn,{isLoading:e,propertyActions:f}),l?s.a.createElement(pn,{title:T,confirmButtonText:Xt,onCancel:m,onConfirm:d}):null)};bn.displayName="UserCommentPropertyActions";const fn=s.a.memo(bn);var En=a(31),hn=a(98);const vn=Object(n.memo)((({onRuleDetailsClick:e,getRuleDetailsHref:t,ruleId:a,ruleName:r,loadingAlertData:i,actionId:l})=>{const c=Object(n.useCallback)((t=>{t.preventDefault(),e&&e(a,t)}),[a,e]),u=null==t?void 0:t(a),d=null!=r?r:Qt;return i?s.a.createElement(o.EuiLoadingSpinner,{size:"m","data-test-subj":`alert-loading-spinner-${l}`}):Object(Ve.isEmpty)(a)||null==u?s.a.createElement(s.a.Fragment,null,d):s.a.createElement(hn.c,{onClick:c,href:u,"data-test-subj":`alert-rule-link-${l}`},d)}));vn.displayName="RuleLink";const yn=({actionId:e,getRuleDetailsHref:t,loadingAlertData:a=!1,onRuleDetailsClick:n,ruleId:r,ruleName:i})=>s.a.createElement("span",{"data-test-subj":`single-alert-user-action-${e}`},`${Ht} `,s.a.createElement(vn,{actionId:e,ruleId:r,ruleName:i,getRuleDetailsHref:t,onRuleDetailsClick:n,loadingAlertData:a}));yn.displayName="SingleAlertCommentEvent";const Cn=Object(n.memo)(yn),jn=({actionId:e,getRuleDetailsHref:t,loadingAlertData:a=!1,onRuleDetailsClick:n,ruleId:r,ruleName:i,totalAlerts:o})=>s.a.createElement("span",{"data-test-subj":`multiple-alerts-user-action-${e}`},`${(e=>p.i18n.translate("xpack.cases.caseView.generatedAlertCommentLabelTitle",{values:{totalAlerts:e},defaultMessage:"added {totalAlerts} alerts from"}))(o)}`," ",s.a.createElement(vn,{actionId:e,ruleId:r,ruleName:i,getRuleDetailsHref:t,onRuleDetailsClick:n,loadingAlertData:a}));jn.displayName="MultipleAlertsCommentEvent";const xn=Object(n.memo)(jn),In=({id:e,alertId:t,index:a,onShowAlertDetails:r})=>{const i=Object(n.useCallback)((()=>r(t,a)),[t,a,r]);return s.a.createElement(o.EuiToolTip,{position:"top",content:s.a.createElement("p",null,Gt)},s.a.createElement(o.EuiButtonIcon,{"aria-label":Gt,"data-test-subj":`comment-action-show-alert-${e}`,onClick:i,iconType:"arrowRight",id:`${e}-show-alert`}))};In.displayName="UserActionShowAlert";const On=Object(n.memo)(In),wn=()=>{const{navigateToCaseView:e}=Object(K.j)(),{detailName:t}=Object(K.k)(),a=Object(n.useCallback)((()=>{e({detailName:t,tabId:J.a.ALERTS})}),[e,t]);return s.a.createElement(o.EuiToolTip,{position:"top",content:s.a.createElement("p",null,qt)},s.a.createElement(o.EuiButtonIcon,{"aria-label":qt,"data-test-subj":`comment-action-show-alerts-${t}`,onClick:a,iconType:"inspect",id:`${t}-show-alerts`}))};wn.displayName="ShowAlertTableLink";const An=({isLoading:e,totalAlerts:t,onDelete:a})=>{const{permissions:r}=Object(X.a)(),{showDeletionModal:i,onModalOpen:o,onConfirm:l,onCancel:c}=gn({onDelete:a}),u=Object(n.useMemo)((()=>[...r.delete?[{iconType:"minusInCircle",label:ln(t),onClick:o}]:[]]),[r.delete,t,o]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(dn,{isLoading:e,propertyActions:u}),i?s.a.createElement(pn,{title:ln(t),confirmButtonText:cn,onCancel:c,onConfirm:l}):null)};An.displayName="AlertPropertyActions";const kn=s.a.memo(An),Sn=e=>({build:()=>{const{comment:t}=e;return 1===(Array.isArray(t.alertId)?t.alertId:[t.alertId]).length?(({userAction:e,userProfiles:t,comment:a,alertData:n,loadingAlertData:r,loadingCommentIds:i,getRuleDetailsHref:l,onRuleDetailsClick:c,onShowAlertDetails:u,handleDeleteComment:d})=>{const m=Mn(a.alertId),p=Mn(a.index);if(!m||!p)return[];const g=n[m],b=Tn(a,g),f=Fn(a,g);return[{username:s.a.createElement(va,{user:e.createdBy,userProfiles:t}),className:"comment-alert",event:s.a.createElement(Cn,{actionId:e.actionId,getRuleDetailsHref:l,loadingAlertData:r,onRuleDetailsClick:c,ruleId:b,ruleName:f}),"data-test-subj":`user-action-alert-${e.type}-${e.action}-action-${e.actionId}`,timestamp:s.a.createElement(na,{createdAt:e.createdAt}),timelineAvatar:"bell",actions:s.a.createElement(za,{id:a.id},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(On,{id:e.actionId,alertId:m,index:p,onShowAlertDetails:u})),s.a.createElement(kn,{onDelete:()=>d(a.id),isLoading:i.includes(a.id),totalAlerts:1}))}]})(e):(({userAction:e,userProfiles:t,comment:a,alertData:n,loadingAlertData:r,loadingCommentIds:i,getRuleDetailsHref:l,onRuleDetailsClick:c,handleDeleteComment:u})=>{if(!Array.isArray(a.alertId))return[];const d=a.alertId.length,{ruleId:m,ruleName:p}=function(e,t){const a=Mn(e.alertId);if(!a)return{ruleId:null,ruleName:null};const n=t[a];return{ruleId:Tn(e,n),ruleName:Fn(e,n)}}(a,n);return[{username:s.a.createElement(va,{user:e.createdBy,userProfiles:t}),className:"comment-alert",event:s.a.createElement(xn,{actionId:e.actionId,loadingAlertData:r,totalAlerts:d,ruleId:m,ruleName:p,getRuleDetailsHref:l,onRuleDetailsClick:c}),"data-test-subj":`user-action-alert-${e.type}-${e.action}-action-${e.actionId}`,timestamp:s.a.createElement(na,{createdAt:e.createdAt}),timelineAvatar:"bell",actions:s.a.createElement(za,{id:a.id},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(wn,null)),s.a.createElement(kn,{onDelete:()=>u(a.id),isLoading:i.includes(a.id),totalAlerts:d}))}]})(e)}}),Tn=(e,t)=>{var a;return Dn({commentRuleField:null==e||null===(a=e.rule)||void 0===a?void 0:a.id,alertData:t,signalRuleFieldPath:"signal.rule.id",kibanaAlertFieldPath:En.b})},Fn=(e,t)=>{var a;return Dn({commentRuleField:null==e||null===(a=e.rule)||void 0===a?void 0:a.name,alertData:t,signalRuleFieldPath:"signal.rule.name",kibanaAlertFieldPath:En.a})},Dn=({commentRuleField:e,alertData:t,signalRuleFieldPath:a,kibanaAlertFieldPath:n})=>{var s,r;return null!==(s=null!==(r=Mn(e))&&void 0!==r?r:Mn(Object(Ve.get)(t,a)))&&void 0!==s?s:Mn(Object(Ve.get)(t,n))};function Mn(e){const t=(a=e,Array.isArray(a)?a[0]:null!=a?a:null);var a;return null==t||Object(Ve.isEmpty)(t)?null:t}const Ln=({type:e,endpoints:t,href:a,onClick:r})=>{const i=a?a(t[0].endpointId):"",o=Object(n.useCallback)((e=>{e.preventDefault(),r&&r(t[0].endpointId,e)}),[r,t]);return s.a.createElement(s.a.Fragment,null,"isolate"===e?`${Wt} `:`${Kt} `,s.a.createElement(hn.c,{onClick:o,href:i,"data-test-subj":`actions-link-${t[0].endpointId}`},t[0].hostname),t.length>1&&(e=>p.i18n.translate("xpack.cases.caseView.otherEndpoints",{values:{endpoints:e},defaultMessage:" and {endpoints} {endpoints, plural, =1 {other} other {others}}"}))(t.length-1))};Ln.displayName="HostIsolationCommentEvent";const Nn=Object(n.memo)(Ln),Pn=({isLoading:e,onDelete:t})=>{const{permissions:a}=Object(X.a)(),{showDeletionModal:r,onModalOpen:i,onConfirm:o,onCancel:l}=gn({onDelete:t}),c=Object(n.useMemo)((()=>[...a.delete?[{iconType:"trash",label:on,onClick:i}]:[]]),[a.delete,i]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(dn,{isLoading:e,propertyActions:c}),r?s.a.createElement(pn,{title:on,confirmButtonText:Xt,onCancel:l,onConfirm:o}):null)};Pn.displayName="RegisteredAttachmentsPropertyActions";const Rn=s.a.memo(Pn),Vn=Object(Ve.memoize)((e=>{const t=e.getAttachmentViewObject();let a;return e=>{if(t.children)return a=a?s.a.cloneElement(a,e):s.a.createElement(t.children,e),s.a.createElement(n.Suspense,{fallback:s.a.createElement(o.EuiLoadingSpinner,null)},a)}})),Un=({userAction:e,userProfiles:t,comment:a,registry:n,caseData:r,isLoading:i,getId:l,getAttachmentViewProps:c,handleDeleteComment:u})=>({build:()=>{const d=l();if(!n.has(d))return[{username:s.a.createElement(va,{user:a.createdBy,userProfiles:t}),event:s.a.createElement(s.a.Fragment,null,`${Da} `,s.a.createElement(o.EuiCode,null,d)),className:`comment-${a.type}-not-found`,"data-test-subj":`comment-${a.type}-not-found`,timestamp:s.a.createElement(na,{createdAt:e.createdAt}),children:s.a.createElement(o.EuiCallOut,{title:Fa,color:"danger",iconType:"alert"})}];const m=n.get(d),p=Vn(m),g=m.getAttachmentViewObject(),b={...c(),caseData:{id:r.id,title:r.title}};return[{username:s.a.createElement(va,{user:a.createdBy,userProfiles:t}),className:`comment-${a.type}-attachment-${d}`,event:g.event,"data-test-subj":`comment-${a.type}-${d}`,timestamp:s.a.createElement(na,{createdAt:e.createdAt}),timelineAvatar:g.timelineAvatar,actions:s.a.createElement(za,{id:a.id},g.actions,s.a.createElement(Rn,{isLoading:i,onDelete:()=>u(a.id)})),children:p(b)}]}}),Bn=({isLoading:e,onEdit:t,onQuote:a})=>{const{permissions:r}=Object(X.a)(),i=Object(n.useMemo)((()=>{const e=r.update,n=r.create;return[...e?[{iconType:"pencil",label:w,onClick:t}]:[],...n?[{iconType:"quote",label:A,onClick:a}]:[]]}),[r.update,r.create,t,a]);return s.a.createElement(dn,{isLoading:e,propertyActions:i})};Bn.displayName="DescriptionPropertyActions";const $n=s.a.memo(Bn),zn="description";function _n(e){return e.payload.settings.syncAlerts?`${h} ${P}`:`${v} ${P}`}var Hn=a(97),Gn=a(100);const qn={connector:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>{const t=e.payload.connector;return null==t?"":t.id===ue.q?y:(a=t.name,p.i18n.translate("xpack.cases.caseView.actionLabel.selectedThirdParty",{values:{thirdParty:a},defaultMessage:"selected { thirdParty } as incident management system"}));var a})(e);return Ca({userProfiles:t,userAction:e,handleOutlineComment:a,label:n,icon:"dot"}).build()}}),tags:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>{var t;const a=null!==(t=e.payload.tags)&&void 0!==t?t:[];return s.a.createElement(o.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs",component:"span",responsive:!1},s.a.createElement(o.EuiFlexItem,{"data-test-subj":"ua-tags-label",grow:!1},e.action===ue.b.add&&f,e.action===ue.b.delete&&j," ",g.db.toLowerCase()),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(jt,{tags:a,gutterSize:"xs"})))})(e);return Ca({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"tag"}).build()}}),title:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>`${E.toLowerCase()} ${g.n.toLowerCase()} ${g.hb} "${e.payload.title}"`)(e);return Ca({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"dot"}).build()}}),status:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>{var t;const a=null!==(t=e.payload.status)&&void 0!==t?t:"";return(e=>Object.prototype.hasOwnProperty.call(be.c,e))(a)?s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":`${e.actionId}-user-action-status-title`,responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},g.F),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(ge.b,{status:a}))):s.a.createElement(s.a.Fragment,null)})(e);return Ca({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"folderClosed"}).build()}}),severity:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>{const t=e.payload.severity,a=Gn.a[t];return void 0===a?null:s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":`${e.actionId}-user-action-severity-title`,responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},Hn.n),s.a.createElement(o.EuiFlexItem,{"data-test-subj":`${e.actionId}-user-action-severity-title-${t}`},s.a.createElement(o.EuiHealth,{color:a.color},a.label)))})(e);return Ca({userProfiles:t,userAction:e,handleOutlineComment:a,label:n,icon:"dot"}).build()}}),pushed:({userAction:e,userProfiles:t,caseServices:a,index:n,handleOutlineComment:r})=>({build:()=>{const i=e,{firstPush:l,parsedConnectorId:c,parsedConnectorName:u}=((e,t,a)=>{var n;return null!=t&&t.connectorId!==ue.q?{firstPush:(null===(n=e[t.connectorId])||void 0===n?void 0:n.firstPushIndex)===a,parsedConnectorId:t.connectorId,parsedConnectorName:t.connectorName}:{firstPush:!1,parsedConnectorId:ue.q,parsedConnectorName:ue.q}})(a,i.payload.externalService,n);if(c===ue.q)return[];const d=(({userAction:e,caseServices:t,connectorId:a,connectorName:n,index:s})=>{var r,i;const o=e.action===ue.b.push_to_service&&s===(null===(r=t[a])||void 0===r?void 0:r.lastPushIndex),l=e.action===ue.b.push_to_service&&s===(null===(i=t[a])||void 0===i?void 0:i.lastPushIndex)&&t[a].hasDataToPush;let c=[];var u;return o&&(c=[...c,{username:"",event:(u=`${n}`,p.i18n.translate("xpack.cases.caseView.alreadyPushedToExternalService",{values:{externalService:u},defaultMessage:"Already pushed to { externalService } incident"})),timelineAvatar:"sortUp","data-test-subj":"top-footer"}]),l&&(c=[...c,{username:"",event:$t(`${n}`),timelineAvatar:"sortDown","data-test-subj":"bottom-footer"}]),c})({userAction:i,caseServices:a,connectorId:c,connectorName:u,index:n}),m=((e,t)=>{const a=e.payload.externalService;return s.a.createElement(o.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs","data-test-subj":"pushed-service-label-title",responsive:!1},s.a.createElement(o.EuiFlexItem,{"data-test-subj":"pushed-label"},`${t?x:I} ${null==a?void 0:a.connectorName}`),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiLink,{"data-test-subj":"pushed-value",href:null==a?void 0:a.externalUrl,target:"_blank"},null==a?void 0:a.externalTitle)))})(i,l);return[...Ca({userProfiles:t,userAction:e,handleOutlineComment:r,label:m,icon:"dot"}).build(),...d]}}),comment:({caseData:e,userProfiles:t,externalReferenceAttachmentTypeRegistry:a,persistableStateAttachmentTypeRegistry:n,userAction:r,commentRefs:i,manageMarkdownEditIds:o,selectedOutlineCommentId:l,loadingCommentIds:c,loadingAlertData:u,alertData:d,getRuleDetailsHref:m,onRuleDetailsClick:g,onShowAlertDetails:b,handleManageMarkdownEditId:f,handleSaveComment:E,handleDeleteComment:h,handleManageQuote:v,handleOutlineComment:y,actionsNavigation:x})=>({build:()=>{const I=r;if(I.action===ue.b.delete)return(({userAction:e,userProfiles:t,handleOutlineComment:a})=>{const n=(e=>{const{comment:t}=e.payload;if(t.type===ue.n.alert){const e=(a=Array.isArray(t.alertId)?t.alertId.length:1,p.i18n.translate("xpack.cases.caseView.alerts.multipleAlerts",{values:{totalAlerts:a},defaultMessage:"{totalAlerts, plural, =1 {one} other {{totalAlerts}}} {totalAlerts, plural, =1 {alert} other {alerts}}"}));return`${j} ${e}`}var a;return t.type===ue.n.externalReference||t.type===ue.n.persistableState?`${j} ${Ma.toLowerCase()}`:`${j} ${M.toLowerCase()}`})(e);return Ca({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"cross"}).build()})({userAction:I,handleOutlineComment:y,userProfiles:t});const O=e.comments.find((e=>e.id===I.commentId));if(null==O)return[];if(I.action===ue.b.create)return(({userAction:e,userProfiles:t,caseData:a,externalReferenceAttachmentTypeRegistry:n,persistableStateAttachmentTypeRegistry:r,comment:i,commentRefs:o,manageMarkdownEditIds:l,selectedOutlineCommentId:c,loadingCommentIds:u,handleManageMarkdownEditId:d,handleSaveComment:m,handleManageQuote:p,handleDeleteComment:g,getRuleDetailsHref:b,loadingAlertData:f,onRuleDetailsClick:E,alertData:h,onShowAlertDetails:v,actionsNavigation:y})=>{switch(i.type){case ue.n.user:const C=(({comment:e,userProfiles:t,outlined:a,isEdit:n,isLoading:r,commentRefs:i,handleManageMarkdownEditId:o,handleSaveComment:l,handleManageQuote:c,handleDeleteComment:u})=>({build:()=>[{username:s.a.createElement(Ha,{user:e.createdBy,userProfiles:t}),"data-test-subj":`comment-create-action-${e.id}`,timestamp:s.a.createElement(na,{createdAt:e.createdAt,updatedAt:e.updatedAt}),className:Na()("userAction__comment",{outlined:a,isEdit:n}),children:s.a.createElement(Ba,{key:n?e.id:void 0,ref:t=>i.current[e.id]=t,id:e.id,content:e.comment,isEditable:n,onChangeEditable:o,onSaveContent:l.bind(null,{id:e.id,version:e.version})}),timelineAvatar:s.a.createElement(Ka,{user:e.createdBy,userProfiles:t}),actions:s.a.createElement(za,{id:e.id},s.a.createElement(fn,{isLoading:r,commentContent:e.comment,onEdit:()=>o(e.id),onDelete:()=>u(e.id),onQuote:()=>c(e.comment)}))}]}))({userProfiles:t,comment:i,outlined:i.id===c,isEdit:l.includes(i.id),commentRefs:o,isLoading:u.includes(i.id),handleManageMarkdownEditId:d,handleSaveComment:m,handleManageQuote:p,handleDeleteComment:g});return C.build();case ue.n.alert:return Sn({userProfiles:t,alertData:h,comment:i,userAction:e,getRuleDetailsHref:b,loadingAlertData:f,onRuleDetailsClick:E,onShowAlertDetails:v,handleDeleteComment:g,loadingCommentIds:u}).build();case ue.n.actions:const j=(({userAction:e,userProfiles:t,comment:a,actionsNavigation:n})=>({build:()=>[{username:s.a.createElement(va,{user:a.createdBy,userProfiles:t}),className:Na()("comment-action",{"empty-comment":0===a.comment.trim().length}),event:s.a.createElement(Nn,{type:a.actions.type,endpoints:a.actions.targets,href:null==n?void 0:n.href,onClick:null==n?void 0:n.onClick}),"data-test-subj":"endpoint-action",timestamp:s.a.createElement(na,{createdAt:e.createdAt}),timelineAvatar:"isolate"===a.actions.type?"lock":"lockOpen",actions:s.a.createElement(oa,{id:a.id}),children:a.comment.trim().length>0&&s.a.createElement(Va,{"data-test-subj":"user-action-markdown"},s.a.createElement(St.b,null,a.comment))}]}))({userProfiles:t,userAction:e,comment:i,actionsNavigation:y});return j.build();case ue.n.externalReference:const x=(({userAction:e,userProfiles:t,comment:a,externalReferenceAttachmentTypeRegistry:n,caseData:s,isLoading:r,handleDeleteComment:i})=>Un({userAction:e,userProfiles:t,comment:a,registry:n,caseData:s,handleDeleteComment:i,isLoading:r,getId:()=>a.externalReferenceAttachmentTypeId,getAttachmentViewProps:()=>({externalReferenceId:a.externalReferenceId,externalReferenceMetadata:a.externalReferenceMetadata})}))({userAction:e,userProfiles:t,comment:i,externalReferenceAttachmentTypeRegistry:n,caseData:a,isLoading:u.includes(i.id),handleDeleteComment:g});return x.build();case ue.n.persistableState:const I=(({userAction:e,userProfiles:t,comment:a,persistableStateAttachmentTypeRegistry:n,caseData:s,isLoading:r,handleDeleteComment:i})=>Un({userAction:e,userProfiles:t,comment:a,registry:n,caseData:s,handleDeleteComment:i,isLoading:r,getId:()=>a.persistableStateAttachmentTypeId,getAttachmentViewProps:()=>({persistableStateAttachmentTypeId:a.persistableStateAttachmentTypeId,persistableStateAttachmentState:a.persistableStateAttachmentState})}))({userAction:e,userProfiles:t,comment:i,persistableStateAttachmentTypeRegistry:r,caseData:a,isLoading:u.includes(i.id),handleDeleteComment:g});return I.build();default:return[]}})({caseData:e,userProfiles:t,userAction:I,externalReferenceAttachmentTypeRegistry:a,persistableStateAttachmentTypeRegistry:n,comment:O,commentRefs:i,manageMarkdownEditIds:o,selectedOutlineCommentId:l,loadingCommentIds:c,loadingAlertData:u,alertData:d,getRuleDetailsHref:m,onRuleDetailsClick:g,onShowAlertDetails:b,handleManageMarkdownEditId:f,handleSaveComment:E,handleDeleteComment:h,handleManageQuote:v,actionsNavigation:x});const w=`${C} ${M.toLowerCase()}`;return Ca({userAction:r,userProfiles:t,handleOutlineComment:y,label:w,icon:"dot"}).build()}}),description:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=`${C} ${g.B.toLowerCase()}`;return Ca({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"dot"}).build()}}),settings:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{var n,s;const r=e;return void 0!==(null==r||null===(n=r.payload)||void 0===n||null===(s=n.settings)||void 0===s?void 0:s.syncAlerts)?Ca({userProfiles:t,userAction:e,handleOutlineComment:a,label:_n(r),icon:"gear"}).build():[]}}),assignees:({userAction:e,handleOutlineComment:t,userProfiles:a})=>({build:()=>{const n=((e,t)=>{const a=e.payload.assignees.map((e=>{const a=null==t?void 0:t.get(e.uid);return{uid:e.uid,profile:a}}));return s.a.createElement(o.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs",component:"span",responsive:!1},s.a.createElement(o.EuiFlexItem,{"data-test-subj":"ua-assignees-label",grow:!1},e.action===ue.b.add&&Jt,e.action===ue.b.delete&&Zt),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Sa,{createdByUser:e.createdBy,assignees:a})))})(e,a);return Ca({userAction:e,userProfiles:a,handleOutlineComment:t,label:n,icon:"userAvatar"}).build()}})},Qn=Object.keys(Object(Ve.omit)(ue.a,["create_case","delete_case"])),Wn="newComment";var Kn=a(142);const Yn=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoadingIds:[...e.isLoadingIds,t.payload],isError:!1};case"FETCH_SUCCESS":return{...e,isLoadingIds:e.isLoadingIds.filter((e=>t.payload.commentId!==e)),isError:!1};case"FETCH_FAILURE":return{...e,isLoadingIds:e.isLoadingIds.filter((e=>t.payload!==e)),isError:!0};default:return e}},Xn=(e,t)=>{switch(t.type){case"FETCH_INIT":case"FETCH_SUCCESS":return{...e,isError:!1};case"FETCH_FAILURE":return{...e,isError:!0};default:return e}},Jn=e=>null!=(null==e?void 0:e.addQuote),Zn=i()(o.EuiFlexGroup).withConfig({displayName:"MyEuiFlexGroup",componentId:"sc-15a8kb6-0"})(["margin-bottom:8px;"]),es=i()(o.EuiCommentList).withConfig({displayName:"MyEuiCommentList",componentId:"sc-15a8kb6-1"})(["",""],(({theme:e})=>`\n    & .userAction__comment.outlined .euiCommentEvent {\n      outline: solid 5px ${e.eui.euiColorVis1_behindText};\n      margin: 0.5em;\n      transition: 0.8s;\n    }\n\n    & .euiComment.isEdit {\n      & .euiCommentEvent {\n        border: none;\n        box-shadow: none;\n      }\n\n      & .euiCommentEvent__body {\n        padding: 0;\n      }\n\n      & .euiCommentEvent__header {\n        display: none;\n      }\n    }\n\n    & .comment-alert .euiCommentEvent {\n      background-color: ${e.eui.euiColorLightestShade};\n      border: ${e.eui.euiBorderThin};\n      padding: ${e.eui.euiSizeS};\n      border-radius: ${e.eui.euiSizeXS};\n    }\n\n    & .comment-alert .euiCommentEvent__headerData {\n      flex-grow: 1;\n    }\n\n    & .comment-action.empty-comment [class*="euiCommentEvent-regular"] {\n      box-shadow: none;\n      .euiCommentEvent__header {\n        padding: ${e.eui.euiSizeM} ${e.eui.euiSizeS};\n        border-bottom: 0;\n      }\n    }\n  `)),ts=s.a.memo((({caseServices:e,caseUserActions:t,userProfiles:a,currentUserProfile:r,data:i,getRuleDetailsHref:l,actionsNavigation:m,isLoadingDescription:p,isLoadingUserActions:g,onRuleDetailsClick:b,onShowAlertDetails:f,onUpdateField:E,statusActionButton:h,useFetchAlertData:v})=>{const{detailName:y,commentId:C}=Object(K.k)(),[j,x]=Object(n.useState)(!0),{externalReferenceAttachmentTypeRegistry:I,persistableStateAttachmentTypeRegistry:w}=Object(X.a)(),A=Object(n.useMemo)((()=>(e=>{const t=e.reduce(((e,t)=>t.type===ue.n.alert&&Object(Ve.isEmpty)(t.rule.id)?((Array.isArray(t.alertId)?t.alertId:[t.alertId]).forEach((t=>e.add(t))),e):e),new Set);return Array.from(t)})(i.comments)),[i.comments]),[k,S]=v(A),{loadingCommentIds:T,commentRefs:F,selectedOutlineCommentId:D,manageMarkdownEditIds:M,handleManageMarkdownEditId:L,handleOutlineComment:N,handleSaveComment:P,handleManageQuote:R,handleDeleteComment:V,handleUpdate:U}=(()=>{const{detailName:e}=Object(K.k)(),{clearDraftComment:t,draftComment:a,hasIncomingLensState:s,openLensModal:r}=Object(Kn.a)(),i=Object(n.useRef)(0),{isLoadingIds:o,patchComment:l}=(()=>{const[e,t]=Object(n.useReducer)(Yn,{isLoadingIds:[],isError:!1}),a=Object(u.i)(),s=Object(n.useRef)(!1),r=Object(n.useRef)(new AbortController),i=Object(X.a)().owner[0],o=je(),l=Object(n.useCallback)((async({caseId:e,commentId:n,commentUpdate:l,version:u})=>{try{s.current=!1,r.current.abort(),r.current=new AbortController,t({type:"FETCH_INIT",payload:n}),await Object(d.k)({caseId:e,commentId:n,commentUpdate:l,version:u,signal:r.current.signal,owner:i}),s.current||(o(),t({type:"FETCH_SUCCESS",payload:{commentId:n}}))}catch(e){s.current||("AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.b}),t({type:"FETCH_FAILURE",payload:n}))}}),[i,o,a]);return Object(n.useEffect)((()=>()=>{s.current=!0,r.current.abort()}),[]),{...e,patchComment:l}})(),{deleteComment:m}=(()=>{const[e,t]=Object(n.useReducer)(Xn,{isError:!1}),a=Object(u.i)(),s=Object(n.useRef)(!1),r=Object(n.useRef)(new AbortController),i=je(),o=Object(n.useCallback)((async({caseId:e,commentId:n})=>{try{s.current=!1,r.current.abort(),r.current=new AbortController,t({type:"FETCH_INIT",payload:n}),await Object(d.c)({caseId:e,commentId:n,signal:r.current.signal}),s.current||(i(),t({type:"FETCH_SUCCESS",payload:{commentId:n}}))}catch(e){s.current||("AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.b}),t({type:"FETCH_FAILURE",payload:n}))}}),[]);return Object(n.useEffect)((()=>()=>{s.current=!0,r.current.abort()}),[]),{...e,deleteComment:o}})(),[p,g]=Object(n.useState)(""),[b,f]=Object(n.useState)([]),E=je(),h=Object(n.useRef)({}),v=Object(n.useCallback)((e=>{t(),f((t=>t.includes(e)?t.filter((t=>e!==t)):t.concat(e)))}),[t]),y=Object(n.useCallback)((({id:t,version:a},n)=>{l({caseId:e,commentId:t,commentUpdate:n,version:a})}),[e,l]),C=Object(n.useCallback)((t=>{m({caseId:e,commentId:t})}),[e,m]),j=Object(n.useCallback)((e=>{const t=document.getElementById(`${e}-permLink`);if(null!=t){const a=-120,n=t.getBoundingClientRect().top+window.pageYOffset+a;window.scrollTo({top:n,behavior:"smooth"}),"add-comment"===e&&t.getElementsByTagName("textarea")[0].focus()}window.clearTimeout(i.current),g(e),i.current=window.setTimeout((()=>{g(""),window.clearTimeout(i.current)}),2400)}),[i]),x=Object(n.useCallback)((e=>{const t=null==h?void 0:h.current.newComment;Jn(t)&&t.addQuote(e),j("add-comment")}),[j]);return Object(n.useEffect)((()=>{if(null!=a&&a.commentId){var e,n;f((e=>Wn===(null==a?void 0:a.commentId)||e.includes(null==a?void 0:a.commentId)?e:[null==a?void 0:a.commentId]));const i=null==h||null===(e=h.current)||void 0===e?void 0:e[a.commentId];Jn(i)&&null!==(n=i.editor)&&void 0!==n&&n.textarea&&(i.setComment(a.comment),s?r({editorRef:i.editor}):t())}}),[t,a,s,r]),{loadingCommentIds:o,selectedOutlineCommentId:p,manageMarkdownEditIds:b,commentRefs:h,handleManageMarkdownEditId:v,handleOutlineComment:j,handleSaveComment:y,handleDeleteComment:C,handleManageQuote:x,handleUpdate:E}})(),B=Object(n.useMemo)((()=>s.a.createElement(Pt,{id:Wn,caseId:y,ref:e=>F.current.newComment=e,onCommentPosted:U,onCommentSaving:L.bind(null,Wn),showLoading:!1,statusActionButton:h})),[y,U,L,h,F]);Object(n.useEffect)((()=>{j&&!g&&0===T.length&&(x(!1),null!=C&&N(C))}),[C,j,g,T,N]);const $=Object(n.useMemo)((()=>(({userProfiles:e,caseData:t,commentRefs:a,manageMarkdownEditIds:n,isLoadingDescription:r,onUpdateField:i,handleManageMarkdownEditId:o,handleManageQuote:l})=>{const c=n.includes(zn);return{username:s.a.createElement(Ha,{user:t.createdBy,userProfiles:e}),event:O,"data-test-subj":"description-action",timestamp:s.a.createElement(na,{createdAt:t.createdAt}),children:s.a.createElement(Ba,{key:c?zn:void 0,ref:e=>a.current.description=e,id:zn,content:t.description,isEditable:c,onSaveContent:e=>{i({key:zn,value:e})},onChangeEditable:o}),timelineAvatar:s.a.createElement(Ka,{user:t.createdBy,userProfiles:e}),className:Na()({isEdit:n.includes(zn)}),actions:s.a.createElement(za,{id:zn},s.a.createElement($n,{isLoading:r,onEdit:()=>o(zn),onQuote:()=>l(t.description)}))}})({userProfiles:a,caseData:i,commentRefs:F,manageMarkdownEditIds:M,isLoadingDescription:p,onUpdateField:E,handleManageMarkdownEditId:L,handleManageQuote:R})),[a,i,F,M,p,E,L,R]),z=Object(n.useMemo)((()=>t.reduce(((t,n,s)=>{if(o=n.type,!Qn.includes(o))return t;var o;const c=qn[n.type];if(null==c)return t;const u=c({caseData:i,externalReferenceAttachmentTypeRegistry:I,persistableStateAttachmentTypeRegistry:w,userAction:n,userProfiles:a,currentUserProfile:r,caseServices:e,comments:i.comments,index:s,commentRefs:F,manageMarkdownEditIds:M,selectedOutlineCommentId:D,loadingCommentIds:T,loadingAlertData:k,alertData:S,handleOutlineComment:N,handleManageMarkdownEditId:L,handleDeleteComment:V,handleSaveComment:P,handleManageQuote:R,onShowAlertDetails:f,actionsNavigation:m,getRuleDetailsHref:l,onRuleDetailsClick:b});return[...t,...u.build()]}),[$])),[t,a,r,I,w,$,i,e,F,M,D,T,k,S,N,L,V,P,R,f,m,l,b]),{permissions:_}=Object(X.a)(),H=[...z,..._.create?[{username:s.a.createElement(Vt.a,{userInfo:r},s.a.createElement(ma,{userInfo:r})),"data-test-subj":"add-comment",timelineAvatar:s.a.createElement(Qa,{userInfo:r}),className:"isEdit",children:B}]:[]];return s.a.createElement(s.a.Fragment,null,s.a.createElement(es,{comments:H,"data-test-subj":"user-actions"}),(g||T.includes(Wn))&&s.a.createElement(Zn,{justifyContent:"center",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"user-actions-loading",size:"l"}))))}));ts.displayName="UserActions";const as=i()(o.EuiFlexGroup).withConfig({displayName:"MyFlexGroup",componentId:"sc-4eugrl-0"})(["",""],(({theme:e})=>Object(r.css)(["margin-top:",";"],e.eui.euiSizeM))),ns=s.a.memo((({email:e,headline:t,loading:a,users:r,userProfiles:i,dataTestSubj:l})=>{const c=Object(n.useCallback)((t=>{t&&null!=t&&window.open(`mailto:${t}?subject=${e.subject}&body=${e.body}`,"_blank")}),[e.body,e.subject]),u=ss(r,null!=i?i:new Map);return 0===u.length?null:s.a.createElement(o.EuiText,{"data-test-subj":l},s.a.createElement("h4",null,t),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),a&&s.a.createElement(o.EuiFlexGroup,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiLoadingSpinner,null))),((e,t)=>e.map(((e,a)=>{var n,r,i,l,c,u,d;return s.a.createElement(as,{key:a,justifyContent:"spaceBetween",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(ga,{userInfo:e})),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":"user-list-email-button",onClick:t.bind(null,null===(n=e.user)||void 0===n?void 0:n.email),iconType:"email","aria-label":(d=null!==(r=e.user)&&void 0!==r&&r.full_name?null===(i=e.user)||void 0===i?void 0:i.full_name:null!==(l=null===(c=e.user)||void 0===c?void 0:c.username)&&void 0!==l?l:"",p.i18n.translate("xpack.cases.caseView.sendEmalLinkAria",{values:{user:d},defaultMessage:"click to send an email to {user}"})),isDisabled:Object(Z.isEmpty)(null===(u=e.user)||void 0===u?void 0:u.email)})))})))(u,c))}));ns.displayName="UserList";const ss=(e,t)=>{const a=e.reduce(((e,a)=>{const n=ba(a,t);return null!=n&&e.set(n.key,n.userInfo),e}),new Map);return Array.from(a.values())};var rs=a(12);const is=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoading:!0,isError:!1,updateKey:t.payload};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,updateKey:null};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0,updateKey:null};default:return e}},os=({caseData:e,caseId:t})=>{const{isLoading:a,updateKey:s,updateCaseProperty:r}=(()=>{const[e,t]=Object(n.useReducer)(is,{isLoading:!1,isError:!1,updateKey:null}),a=Object(u.i)(),s=Object(n.useRef)(!1),r=Object(n.useRef)(new AbortController),i=je(),o=Object(n.useCallback)((async({updateKey:e,updateValue:n,caseData:o,onSuccess:l,onError:u})=>{try{s.current=!1,r.current.abort(),r.current=new AbortController,t({type:"FETCH_INIT",payload:e});const c=await Object(d.j)(o.id,{[e]:n},o.version,r.current.signal);s.current||(i(),t({type:"FETCH_SUCCESS"}),a.addSuccess(Object(rs.d)(o,c[0],e,n)),l&&l())}catch(e){s.current||("AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.b}),t({type:"FETCH_FAILURE"}),u&&u())}}),[]);return Object(n.useEffect)((()=>()=>{s.current=!0,r.current.abort()}),[]),{...e,updateCaseProperty:o}})();return{onUpdateField:Object(n.useCallback)((({key:t,value:a,onSuccess:n,onError:s})=>{const i=(t,a)=>r({updateKey:t,updateValue:a,caseData:e,onSuccess:n,onError:s});switch(t){case"title":const t=Object(rs.l)(a);t.length>0&&i("title",t);break;case"connector":const n=Object(rs.l)(a);null!=n&&i("connector",n);break;case"description":const s=Object(rs.l)(a);s.length>0&&i("description",s);break;case"tags":i("tags",Object(rs.l)(a));break;case"status":const r=Object(rs.l)(a);e.status!==a&&i("status",r);break;case"settings":const o=Object(rs.l)(a);e.settings!==a&&i("settings",o);break;case"severity":const l=Object(rs.l)(a);e.severity!==a&&i("severity",l);break;case"assignees":const c=Object(rs.l)(a);ce()(e.assignees,a)||i("assignees",c);break;default:return null}}),[r,e]),isLoading:a,loadingKey:s}};var ls=a(143),cs=a(175),us=a(121);const ds=({selectedSeverity:e,onSeverityChange:t,isLoading:a,isDisabled:n})=>s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,null,s.a.createElement("h4",null,us.f)),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(cs.a,{isLoading:a,selectedSeverity:e,onSeverityChange:t,isDisabled:n}),s.a.createElement(o.EuiSpacer,{size:"m"}));ds.displayName="SeveritySidebarSelector";var ms=a(159);const ps=({title:e})=>s.a.createElement(o.EuiTitle,{size:"xs"},s.a.createElement("h2",null,e));ps.displayName="SidebarTitle";const gs=s.a.memo(ps),bs=({assignee:e,onRemoveAssignee:t})=>{var a,r;const{permissions:i}=Object(X.a)(),[l,c]=Object(n.useState)(!1),u=Object(n.useCallback)((()=>t(e.uid)),[t,e.uid]),d=Object(n.useCallback)((()=>c(!0)),[]),m=Object(n.useCallback)((()=>c(!1)),[]),p=null!==(a=null===(r=e.profile)||void 0===r?void 0:r.user.username)&&void 0!==a?a:e.uid;return s.a.createElement(o.EuiFlexGroup,{onMouseEnter:d,onMouseLeave:m,alignItems:"center",gutterSize:"s",justifyContent:"spaceBetween","data-test-subj":`user-profile-assigned-user-group-${p}`},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(ga,{userInfo:e.profile})),i.update&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiToolTip,{position:"left",content:b.h,"data-test-subj":`user-profile-assigned-user-cross-tooltip-${p}`},s.a.createElement(Es,{onFocus:d,onBlur:m,"data-test-subj":`user-profile-assigned-user-cross-${p}`,"aria-label":b.j,iconType:"cross",color:"danger",iconSize:"m",onClick:u,$_css:l?1:0}))))};bs.displayName="RemovableUser";const fs=s.a.memo(bs);var Es=i()(o.EuiButtonIcon).withConfig({displayName:"_StyledEuiButtonIcon",componentId:"sc-6n677s-0"})((e=>({opacity:e.$_css}))),hs=a(108),vs=a(136),ys=a(125),Cs=a(161),js=a(162);const xs=({togglePopover:e,isDisabled:t})=>s.a.createElement(o.EuiToolTip,{position:"left",content:b.b},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":"case-view-assignees-edit-button","aria-label":_,iconType:"pencil",onClick:e,disabled:t}));xs.displayName="PopoverButton";const Is=({assignedUsersWithProfiles:e,currentUserProfile:t,isLoading:a,isPopoverOpen:r,onUsersChange:i,togglePopover:o,onClosePopover:l})=>{const{owner:c}=Object(X.a)(),[u,d]=Object(n.useState)(""),m=Object(n.useMemo)((()=>Object(ys.a)(t,e.map((e=>({...e.profile}))))),[e,t]),[g,f]=Object(n.useState)(),[E,h]=Object(n.useState)(!1),v=Object(n.useCallback)((e=>{const a=Object(ys.a)(t,e);f(a),i(null!=a?a:[])}),[t,i]),y=Object(n.useCallback)((e=>{return t=e,p.i18n.translate("xpack.cases.caseView.totalUsersAssigned",{defaultMessage:"{total} assigned",values:{total:t}});var t}),[]),C=Object(n.useCallback)((e=>b.e(e)),[]),j=Object(n.useCallback)((()=>h(!1)),[]),{data:x,isLoading:I,isFetching:O}=Object(vs.a)({name:u,owners:c,onDebounce:j}),w=I||a||O||E,A=a,k=Object(n.useMemo)((()=>Object(ys.a)(t,x)),[t,x]);return s.a.createElement(hs.b,{title:b.b,button:s.a.createElement(xs,{togglePopover:o,isDisabled:A}),isOpen:r,closePopover:l,panelStyle:{minWidth:520},selectableProps:{onChange:v,onSearchChange:e=>{d(e),Object(Ve.isEmpty)(e)||h(!0)},selectedStatusMessage:y,options:k,selectedOptions:null!=g?g:m,isLoading:w,height:"full",limit:ke.N,limitReachedMessage:C,searchPlaceholder:b.k,clearButtonLabel:b.i,emptyMessage:s.a.createElement(Cs.a,null),noMatchesMessage:w?s.a.createElement(Cs.a,null):s.a.createElement(js.a,null)}})};Is.displayName="SuggestUsersPopover";const Os=s.a.memo(Is),ws=({assignees:e,currentUserProfile:t,permissions:a,assignSelf:n,togglePopOver:r,onAssigneeRemoved:i})=>s.a.createElement(s.a.Fragment,null,0===e.length?s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{size:"s",color:"subdued"},s.a.createElement("p",null,H,a.update&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement(o.EuiLink,{"data-test-subj":"case-view-assign-users-link",onClick:r},G)),t&&a.update&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",null,q),s.a.createElement(o.EuiLink,{"data-test-subj":"case-view-assign-yourself-link",onClick:n},Q)))))):s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s"},e.map((e=>s.a.createElement(o.EuiFlexItem,{key:e.uid,grow:!1},s.a.createElement(fs,{assignee:e,onRemoveAssignee:i}))))));ws.displayName="AssigneesList";const As=({caseAssignees:e,userProfiles:t,currentUserProfile:a,onAssigneesChanged:r,isLoading:i})=>{const{assigneesWithProfiles:l,assigneesWithoutProfiles:c,allAssignees:u}=Object(ms.a)({caseAssignees:e,userProfiles:t}),[d,m]=Object(n.useState)(),[p,g]=Object(n.useState)(!1),[f,E]=Object(n.useState)(!1),h=Object(n.useCallback)((()=>{E((e=>!e)),g(!0)}),[]),v=Object(n.useCallback)((()=>{g(!0),E(!1)}),[]),y=Object(n.useCallback)((e=>{const t=u.filter((t=>t.uid!==e));m(t),g(!0)}),[u]),C=Object(n.useCallback)((e=>{e.length>0?m([...e,...c]):m([])}),[c]),j=Object(n.useCallback)((()=>{if(!a)return;const e=[a,...u];m(e),g(!0)}),[a,u]),{permissions:x}=Object(X.a)();return Object(n.useEffect)((()=>{!1===f&&p&&d&&(g(!1),r(d))}),[f,p,r,d]),s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":"case-view-assignees"},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(gs,{title:b.a})),i&&s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"case-view-assignees-button-loading"}),!i&&x.update&&s.a.createElement(o.EuiFlexItem,{"data-test-subj":"case-view-assignees-edit",grow:!1},s.a.createElement(Os,{assignedUsersWithProfiles:l,currentUserProfile:a,isLoading:i,isPopoverOpen:f,onUsersChange:C,onClosePopover:v,togglePopover:h}))),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(ws,{assignees:u,currentUserProfile:a,permissions:x,assignSelf:j,togglePopOver:h,onAssigneeRemoved:y}))};As.displayName="AssignUsers";const ks=s.a.memo(As),Ss=({ruleDetailsNavigation:e,caseData:t,actionsNavigation:a,showAlertDetails:r,useFetchAlertData:i})=>{var l,c;const{permissions:u}=Object(X.a)(),{getCaseViewUrl:d}=Object(K.j)(),{caseAssignmentAuthorized:m,pushToServiceAuthorized:b}=Object(xe.a)(),{data:f,isLoading:E}=pe(t.id,t.connector.id),h=Object(n.useMemo)((()=>t.assignees.map((e=>e.uid))),[t.assignees]),v=Array.from(null!==(l=null==f||null===(c=f.profileUids)||void 0===c?void 0:c.values())&&void 0!==l?l:[]),y=Object(Ve.uniq)([...v,...h]),{data:C,isFetching:j}=Object(Be.a)({uids:y}),{data:x,isFetching:I}=Object(Ue.a)(),O=Object(n.useCallback)(((e,t)=>{r&&r(e,t)}),[r]),{onUpdateField:w,isLoading:A,loadingKey:k}=os({caseId:t.id,caseData:t}),S=A&&"assignees"===k||j||I,T=Object(n.useCallback)((e=>w({key:"status",value:e})),[w]),F=Object(n.useMemo)((()=>{return{subject:(a=t.title,p.i18n.translate("xpack.cases.caseView.emailSubject",{values:{caseTitle:a},defaultMessage:"Security Case - {caseTitle}"})),body:(e=d({detailName:t.id}),p.i18n.translate("xpack.cases.caseView.emailBody",{values:{caseUrl:e},defaultMessage:"Case reference: {caseUrl}"}))};var e,a}),[t.title,d,t.id]),D=Object(n.useCallback)((e=>w({key:"tags",value:e})),[w]),M=Object(n.useCallback)((e=>w({key:"severity",value:e})),[w]),L=Object(n.useCallback)((e=>{const t=e.map((e=>({uid:e.uid})));Object(Ve.isEqual)(t.sort(),h.sort())||w({key:"assignees",value:t})}),[h,w]),{isLoading:N,data:P=[]}=Object($e.a)(),[R,V]=Object(n.useMemo)((()=>{var e;const a=P.find((e=>e.id===t.connector.id));return[null!==(e=null==a?void 0:a.name)&&void 0!==e?e:"",!!a]}),[P,t.connector]),U=Object(n.useCallback)(((e,t,a,n)=>{const s=Object(We.a)(e,P),r=s?Object(ls.b)(s):Object(ls.a)();w({key:"connector",value:{...r,fields:t},onSuccess:n,onError:a})}),[w,P]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexItem,{grow:6},E&&s.a.createElement(o.EuiLoadingContent,{lines:8,"data-test-subj":"case-view-loading-content"}),!E&&f&&C&&s.a.createElement(o.EuiFlexGroup,{direction:"column",responsive:!1,"data-test-subj":"case-view-activity"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(ts,{userProfiles:C,currentUserProfile:x,getRuleDetailsHref:null==e?void 0:e.href,onRuleDetailsClick:null==e?void 0:e.onClick,caseServices:f.caseServices,caseUserActions:f.caseUserActions,data:t,actionsNavigation:a,isLoadingDescription:A&&"description"===k,isLoadingUserActions:E,onShowAlertDetails:O,onUpdateField:w,statusActionButton:u.update?s.a.createElement(ft,{status:t.status,onStatusChanged:T,isLoading:A&&"status"===k}):null,useFetchAlertData:i})))),s.a.createElement(o.EuiFlexItem,{grow:2},m?s.a.createElement(s.a.Fragment,null,s.a.createElement(ks,{caseAssignees:t.assignees,currentUserProfile:x,onAssigneesChanged:L,isLoading:S,userProfiles:null!=C?C:new Map}),s.a.createElement(o.EuiSpacer,{size:"m"})):null,s.a.createElement(ds,{isDisabled:!u.update,isLoading:A,selectedSeverity:t.severity,onSeverityChange:M}),s.a.createElement(ns,{dataTestSubj:"case-view-user-list-reporter",email:F,headline:g.T,users:[t.createdBy],userProfiles:C}),null!=f&&f.participants?s.a.createElement(ns,{dataTestSubj:"case-view-user-list-participants",email:F,headline:g.Q,loading:E,users:f.participants,userProfiles:C}):null,s.a.createElement(At,{tags:t.tags,onSubmit:D,isLoading:A&&"tags"===k}),b&&f?s.a.createElement(pt,{caseData:t,caseServices:f.caseServices,connectorName:R,connectors:P,hasDataToPush:f.hasDataToPush,isLoading:N||A&&"connector"===k,isValidConnector:!!N||V,onSubmit:U,userActions:f.caseUserActions}):null))};Ss.displayName="CaseViewActivity";const Ts=e=>{const t=e.reduce(((e,t)=>t.type===ue.n.alert?((Array.isArray(t.alertId)?t.alertId:[t.alertId]).forEach((t=>e.add(t))),e):e),new Set);return Array.from(t)},Fs={isLoading:!0,alertFeatureIds:[],isError:!1},Ds=()=>s.a.createElement(o.EuiEmptyPrompt,{"data-test-subj":"caseViewAlertsEmpty",iconType:"casesApp",iconColor:"default",titleSize:"xs",body:s.a.createElement("p",null,z)});Ds.displayName="CaseViewAlertsEmpty";const Ms=({caseData:e})=>{const{triggersActionsUi:t}=Object(u.f)().services,a=Object(n.useMemo)((()=>({ids:{values:Ts(e.comments)}})),[e.comments]),r=Object(n.useMemo)((()=>(e=>{const t=e.reduce(((e,t)=>t.type===ue.n.alert?((Array.isArray(t.index)?t.index:[t.index]).forEach((t=>{if(t.startsWith(".siem-signals"))e.add("security");else{const a=(e=>{const t=e.match(/\.alerts-(.*?).alerts/);return t&&t.length>1?`${t[1]}`:null})(t);a&&e.add(a)}})),e):e),new Set);return Array.from(t)})(e.comments)),[e.comments]),{isLoading:i,alertFeatureIds:l}=(e=>{const t=Object(u.i)(),a=Object(n.useRef)(!1),s=Object(n.useRef)(new AbortController),[r,i]=Object(n.useState)(Fs),o=Object(n.useCallback)((async e=>{i({isLoading:!0,alertFeatureIds:[],isError:!1});try{a.current=!1,s.current.abort(),s.current=new AbortController;const t={registrationContext:e},n=await Object(d.g)(t,s.current.signal);a.current||i({isLoading:!1,alertFeatureIds:n,isError:!1})}catch(e){a.current||(i({isLoading:!1,alertFeatureIds:[],isError:!0}),"AbortError"!==e.name&&t.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.b}))}}),[t]);return Object(n.useEffect)((()=>(o(e),()=>{a.current=!0,s.current.abort()})),e),r})(r),m={alertsTableConfigurationRegistry:t.alertsTableConfigurationRegistry,configurationId:e.owner,id:`case-details-alerts-${e.owner}`,flyoutSize:l.includes("siem")?"m":"s",featureIds:l,query:a,showExpandToDetails:l.includes("siem")};return 0===a.ids.values.length?s.a.createElement(Ds,null):i?s.a.createElement(o.EuiFlexGroup,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiProgress,{size:"xs",color:"primary"}))):t.getAlertsStateTable(m)};Ms.displayName="CaseViewAlerts";var Ls=a(78);const Ns=p.i18n.translate("xpack.cases.caseView.metrics.totalAlerts",{defaultMessage:"Total alerts"}),Ps=p.i18n.translate("xpack.cases.caseView.metrics.associatedUsers",{defaultMessage:"Associated users"}),Rs=p.i18n.translate("xpack.cases.caseView.metrics.associatedHosts",{defaultMessage:"Associated hosts"}),Vs=p.i18n.translate("xpack.cases.caseView.metrics.isolatedHosts",{defaultMessage:"Isolated hosts"}),Us=p.i18n.translate("xpack.cases.caseView.metrics.totalConnectors",{defaultMessage:"Total connectors"}),Bs=p.i18n.translate("xpack.cases.caseView.metrics.lifespan.caseCreated",{defaultMessage:"Case created"}),$s=p.i18n.translate("xpack.cases.caseView.metrics.lifespan.inProgressDuration",{defaultMessage:"In progress duration"}),zs=p.i18n.translate("xpack.cases.caseView.metrics.lifespan.openDuration",{defaultMessage:"Open duration"}),_s=p.i18n.translate("xpack.cases.caseView.metrics.lifespan.openToCloseDuration",{defaultMessage:"Duration from creation to close"}),Hs=p.i18n.translate("xpack.cases.caseView.metrics.lifespan.reopened",{defaultMessage:"(reopened)"}),Gs=p.i18n.translate("xpack.cases.caseView.metrics.lifespan.reopenedOn",{defaultMessage:"Reopened "}),qs=s.a.memo((({metrics:e,features:t})=>{const a=Ws(e,t);return s.a.createElement(s.a.Fragment,null,a.map((({id:e,title:t,value:a})=>s.a.createElement(o.EuiFlexItem,{key:t,"data-test-subj":`case-metrics-totals-${e}`},s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},s.a.createElement(o.EuiFlexItem,null,t),s.a.createElement(Qs,null,a))))))}));qs.displayName="CaseViewMetricItems";const Qs=Object(Ls.euiStyled)(o.EuiFlexItem)`
  font-size: ${({theme:e})=>e.eui.euiSizeL};
  font-weight: bold;
`,Ws=(e,t)=>{var a,s,r,i,o,l;const{alerts:c,actions:u,connectors:d}=null!=e?e:{},m=null!==(a=null==d?void 0:d.total)&&void 0!==a?a:0,p=null!==(s=null==c?void 0:c.count)&&void 0!==s?s:0,g=null!==(r=null==c||null===(i=c.users)||void 0===i?void 0:i.total)&&void 0!==r?r:0,b=null!==(o=null==c||null===(l=c.hosts)||void 0===l?void 0:l.total)&&void 0!==o?o:0,f=Ks(u);return Object(n.useMemo)((()=>[["alerts.count",{title:Ns,value:p}],["alerts.users",{title:Ps,value:g}],["alerts.hosts",{title:Rs,value:b}],["actions.isolateHost",{title:Vs,value:f}],["connectors",{title:Us,value:m}]].reduce(((e,[a,n])=>[...e,...t.includes(a)?[{id:a,...n}]:[]]),[])),[t,p,g,b,f,m])},Ks=e=>null!=e&&e.isolateHost?Math.max(e.isolateHost.isolate.total-e.isolateHost.unisolate.total,0):0;var Ys=a(165),Xs=a.n(Ys),Js=a(154),Zs=a(132);const er=s.a.memo((({metrics:e,features:t})=>{const a=tr(e,t);if(!a)return null;const n=[{key:"case-created",component:s.a.createElement(or,{title:Bs,value:s.a.createElement(ar,{date:a.creationDate})}),dataTestSubject:"case-metrics-lifespan-item-creation-date"},{key:"in-progress-duration",component:s.a.createElement(or,{title:$s,value:nr(a.statusInfo.inProgressDuration)}),dataTestSubject:"case-metrics-lifespan-item-inProgress-duration"},{key:"open-duration",component:s.a.createElement(or,{title:zs,value:sr(a.statusInfo.openDuration)}),dataTestSubject:"case-metrics-lifespan-item-open-duration"},{key:"duration-from-creation-to-close",component:s.a.createElement(lr,{title:_s,value:rr(a.creationDate,a.closeDate),reopens:a.statusInfo.reopenDates}),dataTestSubject:"case-metrics-lifespan-item-open-to-close-duration"}];return s.a.createElement(o.EuiFlexItem,{grow:3},s.a.createElement(o.EuiFlexGrid,{columns:2,gutterSize:"s",responsive:!1},n.map((({component:e,dataTestSubject:t,key:a})=>s.a.createElement(o.EuiFlexItem,{"data-test-subj":t,key:a},e)))))}));er.displayName="CaseStatusMetrics";const tr=(e,t)=>Object(n.useMemo)((()=>{var a;const n=null!==(a=null==e?void 0:e.lifespan)&&void 0!==a?a:{closeDate:"",creationDate:"",statusInfo:{inProgressDuration:0,reopenDates:[],openDuration:0}};if(t.includes("lifespan"))return n}),[t,e]),ar=s.a.memo((({date:e})=>Object(Js.a)(e).isValid()?s.a.createElement(Ce.a,{"data-test-subj":"case-metrics-lifespan-creation-date",value:e,stripMs:!0}):Object(Zs.a)()));ar.displayName="CreationDate";const nr=e=>e<=0?Object(Zs.a)():sr(e),sr=e=>Xs()(e,{compact:!0,verbose:!0}),rr=(e,t)=>{if(null==t)return;const a=Object(Js.a)(e),n=Object(Js.a)(t);return a.isValid()&&n.isValid()?sr(n.diff(a)):void 0},ir=Object(Ls.euiStyled)(o.EuiFlexItem)`
  font-size: ${({theme:e})=>e.eui.euiSizeM};
  font-weight: bold;
`,or=s.a.memo((({title:e,value:t})=>s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},s.a.createElement(ir,null,e),s.a.createElement(o.EuiFlexItem,null,t))));or.displayName="CaseStatusMetricsItem";const lr=s.a.memo((({title:e,value:t,reopens:a})=>{const n=cr(t,a);return s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},s.a.createElement(ir,null,e),null!=t&&ur(a)?s.a.createElement(dr,{value:n,explanationValues:a}):s.a.createElement(o.EuiFlexItem,null,n))}));lr.displayName="OpenCloseDuration";const cr=(e,t)=>null==e?Object(Zs.a)():t.length>0?`${e} ${Hs}`:e,ur=e=>e.length>0,dr=s.a.memo((({value:e,explanationValues:t})=>{const a=s.a.createElement(s.a.Fragment,null,Gs,t.map(((e,a)=>s.a.createElement(s.a.Fragment,{key:`explanation-value-${a}`},s.a.createElement(Ce.a,{"data-test-subj":`case-metrics-lifespan-reopen-${a}`,value:e,stripMs:!0}),mr(a,t.length)?s.a.createElement(o.EuiSpacer,{size:"xs"}):null))));return s.a.createElement(o.EuiFlexItem,{"data-test-subj":"case-metrics-lifespan-reopen-icon"},s.a.createElement(o.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},e),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiIconTip,{content:a,position:"right"}))))}));dr.displayName="ValueWithExplanationIcon";const mr=(e,t)=>e+1<t,pr=s.a.memo((({caseId:e})=>{const{metricsFeatures:t}=Object(xe.a)(),{data:a,isLoading:n}=((e,t)=>{const a=Object(u.i)(),n=new AbortController;return Object(l.useQuery)(m.d.caseMetrics(e,t),(async()=>({metrics:await Object(d.h)(e,t,n.signal)})),{onError:e=>{"AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.b})}})})(e,t);return 0===t.length?null:s.a.createElement(o.EuiPanel,{"data-test-subj":"case-view-metrics-panel",hasShadow:!1,hasBorder:!0},s.a.createElement(o.EuiFlexGroup,{gutterSize:"xl",wrap:!0,responsive:!1,alignItems:"center"},n||!a?s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"case-view-metrics-spinner",size:"l"})):s.a.createElement(s.a.Fragment,null,s.a.createElement(qs,{metrics:a.metrics,features:t}),s.a.createElement(er,{metrics:a.metrics,features:t}))))}));pr.displayName="CaseViewMetrics";const gr=i()(o.EuiBetaBadge).withConfig({displayName:"ExperimentalBadge",componentId:"sc-rjwjtx-0"})(["margin-left:5px;"]),br=s.a.memo((({caseData:e,caseId:t,onComponentInitialized:a,refreshRef:r,ruleDetailsNavigation:i,actionsNavigation:l,showAlertDetails:c,useFetchAlertData:u})=>{var d;const{features:m}=Object(X.a)(),{navigateToCaseView:p}=Object(K.j)(),{urlParams:g}=Object(K.n)(),b=je();Object(Pe.b)(e.title);const f=Object(n.useMemo)((()=>g.tabId&&Object.values(J.a).includes(g.tabId)?g.tabId:J.a.ACTIVITY),[g.tabId]),E=Object(n.useRef)(!0),h=null===(d=Object(Ne.a)())||void 0===d?void 0:d.ui,{onUpdateField:v,isLoading:y,loadingKey:C}=os({caseId:t,caseData:e});Object(n.useEffect)((()=>{let e=!1;if(r)return r.current={refreshCase:async()=>{e||y||b()}},()=>{e=!0,r.current=null}}),[y,r,b]);const j=Object(n.useCallback)((e=>v({key:"title",value:e})),[v]);Object(n.useEffect)((()=>{E.current&&(E.current=!1,a&&a())}),[a]);const x=Object(n.useMemo)((()=>[{id:J.a.ACTIVITY,name:B,content:s.a.createElement(Ss,{ruleDetailsNavigation:i,caseData:e,actionsNavigation:l,showAlertDetails:c,useFetchAlertData:u})},...m.alerts.enabled?[{id:J.a.ALERTS,name:s.a.createElement(s.a.Fragment,null,$,m.alerts.isExperimental?s.a.createElement(gr,{label:Se.g,size:"s",iconType:"beaker",tooltipContent:Se.f,tooltipPosition:"bottom","data-test-subj":"case-view-alerts-table-experimental-badge"}):null),content:s.a.createElement(Ms,{caseData:e})}]:[]]),[l,e,m.alerts.enabled,m.alerts.isExperimental,i,c,u]),I=Object(n.useMemo)((()=>{var e;return null===(e=x.find((e=>e.id===f)))||void 0===e?void 0:e.content}),[f,x]),O=Object(n.useCallback)((()=>x.map(((e,a)=>s.a.createElement(o.EuiTab,{"data-test-subj":`case-view-tab-title-${e.id}`,key:a,onClick:()=>p({detailName:t,tabId:e.id}),isSelected:e.id===f},e.name)))),[f,t,p,x]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ae.a,{border:!1,showBackButton:!0,"data-test-subj":"case-view-title",titleNode:s.a.createElement(Le,{isLoading:y&&"title"===C,title:e.title,onSubmit:j}),title:e.title},s.a.createElement(we,{caseData:e,isLoading:y&&("status"===C||"settings"===C),onUpdateField:v})),s.a.createElement(Re.d,null,s.a.createElement(o.EuiFlexGroup,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(pr,{"data-test-subj":"case-view-metrics",caseId:e.id}))),s.a.createElement(o.EuiSpacer,{size:"xs"}),s.a.createElement(o.EuiTabs,null,O()),s.a.createElement(o.EuiSpacer,{size:"l"}),s.a.createElement(o.EuiFlexGroup,{"data-test-subj":`case-view-tab-content-${f}`},I)),null!=h&&h.renderTimelineDetailsPanel?h.renderTimelineDetailsPanel():null)}));br.displayName="CaseViewPage";const fr=i()(o.EuiFlexGroup).withConfig({displayName:"MyEuiFlexGroup",componentId:"sc-bqd51x-0"})(["height:100%;"]),Er=()=>s.a.createElement(fr,{gutterSize:"none",justifyContent:"center",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"case-view-loading",size:"xl"}))),hr=s.a.memo((({onComponentInitialized:e,actionsNavigation:t,ruleDetailsNavigation:a,showAlertDetails:r,timelineIntegration:i,useFetchAlertData:o,refreshRef:p})=>{const{spaces:g}=Object(u.f)().services,{detailName:b}=Object(K.k)(),{basePath:f}=Object(X.a)(),{data:E,isLoading:h,isError:v,refetch:y}=(e=>{const t=Object(u.i)();return Object(l.useQuery)(m.d.case(e),(()=>{const t=new AbortController;return Object(d.n)(e,!0,t.signal)}),{onError:e=>{"AbortError"!==e.name&&t.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.b})}})})(b);Object(n.useEffect)((()=>{if(g&&"aliasMatch"===(null==E?void 0:E.outcome)&&null!=E.aliasTargetId){const e=`${f}${Object(K.c)({detailName:E.aliasTargetId})}`;g.ui.redirectLegacyUrl({path:`${e}${window.location.search}${window.location.hash}`,aliasPurpose:E.aliasPurpose,objectNoun:D})}}),[f,E,g]);const C=Object(n.useCallback)((()=>{if(E&&g&&"conflict"===E.outcome&&null!=E.aliasTargetId){const e=`${f}${Object(K.c)({detailName:E.aliasTargetId})}${window.location.search}${window.location.hash}`;return g.ui.components.getLegacyUrlConflict({objectNoun:D,currentObjectId:E.case.id,otherObjectId:E.aliasTargetId,otherObjectPath:e})}return null}),[f,E,g]);return v?s.a.createElement(Y,{caseId:b}):h?s.a.createElement(Er,null):E?s.a.createElement(W.b,{timelineIntegration:i},C(),s.a.createElement(br,{caseData:E.case,caseId:b,fetchCase:y,onComponentInitialized:e,actionsNavigation:t,ruleDetailsNavigation:a,showAlertDetails:r,useFetchAlertData:o,refreshRef:p})):null}));Er.displayName="CaseViewLoading",hr.displayName="CaseView"}])]);