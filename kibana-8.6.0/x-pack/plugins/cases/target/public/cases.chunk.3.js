/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[3],{102:function(e,t,n){"use strict";n.d(t,"s",(function(){return r})),n.d(t,"q",(function(){return c})),n.d(t,"r",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"p",(function(){return g})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return y})),n.d(t,"n",(function(){return E})),n.d(t,"o",(function(){return C})),n.d(t,"x",(function(){return h})),n.d(t,"w",(function(){return O})),n.d(t,"j",(function(){return j})),n.d(t,"i",(function(){return v})),n.d(t,"h",(function(){return w})),n.d(t,"b",(function(){return x}));var a=n(2),s=n(16);n.d(t,"t",(function(){return s.E})),n.d(t,"u",(function(){return s.J})),n.d(t,"v",(function(){return s.R}));const r=a.i18n.translate("xpack.cases.configureCases.incidentManagementSystemTitle",{defaultMessage:"External incident management system"}),c=a.i18n.translate("xpack.cases.configureCases.incidentManagementSystemDesc",{defaultMessage:"Connect your cases to an external incident management system. You can then push case data as an incident in a third-party system."}),i=a.i18n.translate("xpack.cases.configureCases.incidentManagementSystemLabel",{defaultMessage:"Incident management system"}),o=a.i18n.translate("xpack.cases.configureCases.addNewConnector",{defaultMessage:"Add new connector"}),l=a.i18n.translate("xpack.cases.configureCases.caseClosureOptionsTitle",{defaultMessage:"Case closures"}),u=a.i18n.translate("xpack.cases.configureCases.caseClosureOptionsDesc",{defaultMessage:"Define how to close your cases. Automatic closures require an established connection to an external incident management system."}),d=a.i18n.translate("xpack.cases.configureCases.caseClosureOptionsLabel",{defaultMessage:"Case closure options"}),p=a.i18n.translate("xpack.cases.configureCases.caseClosureOptionsManual",{defaultMessage:"Manually close cases"}),m=a.i18n.translate("xpack.cases.configureCases.caseClosureOptionsNewIncident",{defaultMessage:"Automatically close cases when pushing new incident to external system"}),g=e=>a.i18n.translate("xpack.cases.configureCases.fieldMappingTitle",{values:{thirdPartyName:e},defaultMessage:"{ thirdPartyName } field mappings"}),b=e=>a.i18n.translate("xpack.cases.configureCases.fieldMappingDesc",{values:{thirdPartyName:e},defaultMessage:"Map Case fields to { thirdPartyName } fields when pushing data to { thirdPartyName }. Field mappings require an established connection to { thirdPartyName }."}),f=e=>a.i18n.translate("xpack.cases.configureCases.fieldMappingDescErr",{values:{thirdPartyName:e},defaultMessage:"Failed to retrieve mappings for { thirdPartyName }."}),y=a.i18n.translate("xpack.cases.configureCases.fieldMappingFirstCol",{defaultMessage:"Kibana case field"}),E=e=>a.i18n.translate("xpack.cases.configureCases.fieldMappingSecondCol",{values:{thirdPartyName:e},defaultMessage:"{ thirdPartyName } field"}),C=a.i18n.translate("xpack.cases.configureCases.fieldMappingThirdCol",{defaultMessage:"On edit and update"}),h=(a.i18n.translate("xpack.cases.configureCases.cancelButton",{defaultMessage:"Cancel"}),a.i18n.translate("xpack.cases.configureCases.saveButton",{defaultMessage:"Save"}),a.i18n.translate("xpack.cases.configureCases.warningTitle",{defaultMessage:"Warning"})),O=(a.i18n.translate("xpack.cases.configureCases.commentMapping",{defaultMessage:"Comments"}),e=>a.i18n.translate("xpack.cases.configureCases.updateSelectedConnector",{values:{connectorName:e},defaultMessage:"Update { connectorName }"})),j=a.i18n.translate("xpack.cases.configureCases.deprecatedTooltipText",{defaultMessage:"deprecated"}),v=a.i18n.translate("xpack.cases.configureCases.deprecatedTooltipContent",{defaultMessage:"This connector is deprecated. Update it, or create a new one."}),w=a.i18n.translate("xpack.cases.configureCases.headerTitle",{defaultMessage:"Configure cases"}),x=a.i18n.translate("xpack.cases.configureCases.casesWebhookMappings",{defaultMessage:"Webhook - Case Management field mappings are configured in the connector settings in the third-party REST API JSON."})},103:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"j",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return m}));var a=n(2);const s=a.i18n.translate("xpack.cases.connectors.jira.unableToGetIssueTypesMessage",{defaultMessage:"Unable to get issue types"}),r=a.i18n.translate("xpack.cases.connectors.jira.unableToGetFieldsMessage",{defaultMessage:"Unable to get connectors"}),c=a.i18n.translate("xpack.cases.connectors.jira.unableToGetIssuesMessage",{defaultMessage:"Unable to get issues"}),i=e=>a.i18n.translate("xpack.cases.connectors.jira.unableToGetIssueMessage",{defaultMessage:"Unable to get issue with id {id}",values:{id:e}}),o=a.i18n.translate("xpack.cases.connectors.jira.searchIssuesComboBoxAriaLabel",{defaultMessage:"Type to search"}),l=a.i18n.translate("xpack.cases.connectors.jira.searchIssuesComboBoxPlaceholder",{defaultMessage:"Type to search"}),u=a.i18n.translate("xpack.cases.connectors.jira.searchIssuesLoading",{defaultMessage:"Loading..."}),d=a.i18n.translate("xpack.cases.connectors.jira.prioritySelectFieldLabel",{defaultMessage:"Priority"}),p=a.i18n.translate("xpack.cases.connectors.jira.issueTypesSelectFieldLabel",{defaultMessage:"Issue type"}),m=a.i18n.translate("xpack.cases.connectors.jira.parentIssueSearchLabel",{defaultMessage:"Parent issue"})},116:function(e,t,n){"use strict";n.d(t,"m",(function(){return s})),n.d(t,"j",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"i",(function(){return g})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var a=n(2);const s=a.i18n.translate("xpack.cases.connectors.serviceNow.urgencySelectFieldLabel",{defaultMessage:"Urgency"}),r=a.i18n.translate("xpack.cases.connectors.serviceNow.severitySelectFieldLabel",{defaultMessage:"Severity"}),c=a.i18n.translate("xpack.cases.connectors.serviceNow.impactSelectFieldLabel",{defaultMessage:"Impact"}),i=a.i18n.translate("xpack.cases.connectors.serviceNow.unableToGetChoicesMessage",{defaultMessage:"Unable to get choices"}),o=a.i18n.translate("xpack.cases.connectors.serviceNow.malwareURLTitle",{defaultMessage:"Malware URLs"}),l=a.i18n.translate("xpack.cases.connectors.serviceNow.malwareHashTitle",{defaultMessage:"Malware Hashes"}),u=a.i18n.translate("xpack.cases.connectors.serviceNow.categoryTitle",{defaultMessage:"Category"}),d=a.i18n.translate("xpack.cases.connectors.serviceNow.subcategoryTitle",{defaultMessage:"Subcategory"}),p=a.i18n.translate("xpack.cases.connectors.serviceNow.sourceIPTitle",{defaultMessage:"Source IPs"}),m=a.i18n.translate("xpack.cases.connectors.serviceNow.destinationIPTitle",{defaultMessage:"Destination IPs"}),g=a.i18n.translate("xpack.cases.connectors.serviceNow.prioritySelectFieldTitle",{defaultMessage:"Priority"}),b=a.i18n.translate("xpack.cases.connectors.serviceNow.alertFieldsTitle",{defaultMessage:"Select Observables to push"}),f=a.i18n.translate("xpack.cases.connectors.serviceNow.alertFieldEnabledText",{defaultMessage:"Yes"})},127:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return o}));var a=n(2);const s=a.i18n.translate("xpack.cases.connectors.resilient.unableToGetIncidentTypesMessage",{defaultMessage:"Unable to get incident types"}),r=a.i18n.translate("xpack.cases.connectors.resilient.unableToGetSeverityMessage",{defaultMessage:"Unable to get severity"}),c=a.i18n.translate("xpack.cases.connectors.resilient.incidentTypesPlaceholder",{defaultMessage:"Choose types"}),i=a.i18n.translate("xpack.cases.connectors.resilient.incidentTypesLabel",{defaultMessage:"Incident Types"}),o=a.i18n.translate("xpack.cases.connectors.resilient.severityLabel",{defaultMessage:"Severity"})},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c}));var a=n(4);const s=()=>({id:"none",name:"none",type:a.o.none,fields:null}),r=(e,t=null)=>{const n={type:e.actionTypeId,fields:t};return{id:e.id,name:e.name,...n}},c=(e,t)=>{var n;return null!==(n=e.find((e=>e.id===t.id)))&&void 0!==n?n:null}},149:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var a=n(76),s=n(81),r=n(3);const c=e=>""===e.trim();var i=n(97),o=n(171),l=n(121);const{emptyField:u,maxLengthField:d}=s.fieldValidators,p={type:a.FIELD_TYPES.COMBO_BOX,label:i.x,helpText:i.z,labelAppend:o.a,validations:[{validator:({value:e})=>{if(!Array.isArray(e)&&c(e)||Array.isArray(e)&&e.length>0&&e.find(c))return{message:i.y}},type:a.VALIDATION_TYPES.ARRAY_ITEM,isBlocking:!1}]},m={title:{type:a.FIELD_TYPES.TEXT,label:i.m,validations:[{validator:u(i.A)},{validator:d({length:r.O,message:i.l("title",r.O)})}]},description:{label:i.i,validations:[{validator:u(i.j)}]},selectedOwner:{label:i.o,type:a.FIELD_TYPES.RADIO_GROUP,validations:[{validator:u(i.p)}]},tags:p,severity:{label:l.f},connectorId:{type:a.FIELD_TYPES.SUPER_SELECT,label:i.f,defaultValue:"none"},fields:{defaultValue:null},syncAlerts:{helpText:i.t,type:a.FIELD_TYPES.TOGGLE,defaultValue:!0},assignees:{}}},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(1),s=n.n(a),r=n(15),c=n(13),i=n(37),o=n.n(i),l=n(76),u=n(169);const d=o()(c.EuiFormRow).withConfig({displayName:"EuiFormRowWrapper",componentId:"sc-1yy69el-0"})([".euiFormErrorText{display:none;}"]),p=({connectors:e,dataTestSubj:t,disabled:n=!1,field:c,idAria:i,isEdit:o=!0,isLoading:p=!1,handleChange:m})=>{const{isInvalid:g,errorMessage:b}=Object(l.getFieldValidityAndErrorMessage)(c),f=Object(a.useCallback)((e=>{m&&m(e),c.setValue(e)}),[m,c]);return o?s.a.createElement(d,{"data-test-subj":t,describedByIds:i?[i]:void 0,error:b,fullWidth:!0,helpText:c.helpText,isInvalid:g,label:c.label,labelAppend:c.labelAppend},s.a.createElement(u.a,{connectors:e,disabled:n,isLoading:p,onChange:f,selectedConnector:Object(r.isEmpty)(c.value)?"none":c.value})):null};p.displayName="ConnectorSelector"},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(1),s=n.n(a),r=n(13),c=n(37),i=n.n(c),o=n(78),l=n(102),u=n(5),d=n(93);const p=i()(r.EuiIcon).withConfig({displayName:"EuiIconExtended",componentId:"sc-12z1pzb-0"})(["margin-right:13px;margin-bottom:0 !important;"]),m={value:"none",inputDisplay:s.a.createElement(r.EuiFlexGroup,{gutterSize:"none",alignItems:"center",responsive:!1},s.a.createElement(r.EuiFlexItem,{grow:!1},s.a.createElement(p,{type:"minusInCircle",size:"m"})),s.a.createElement(r.EuiFlexItem,null,s.a.createElement("span",{"data-test-subj":"dropdown-connector-no-connector"},l.u))),"data-test-subj":"dropdown-connector-no-connector"},g={value:"add-connector",inputDisplay:s.a.createElement("span",{className:"euiButtonEmpty euiButtonEmpty--primary euiButtonEmpty--xSmall euiButtonEmpty--flushLeft"},l.a),"data-test-subj":"dropdown-connector-add-connector"},b=Object(o.euiStyled)(r.EuiIconTip)`
  margin-left: ${({theme:e})=>e.eui.euiSizeS}
  margin-bottom: 0 !important;
`,f=({connectors:e,disabled:t,isLoading:n,onChange:c,selectedConnector:i,appendAddConnectorButton:o=!1})=>{const{triggersActionsUi:f}=Object(u.f)().services,y=Object(a.useMemo)((()=>{const t=e.reduce(((e,t)=>[...e,{value:t.id,inputDisplay:s.a.createElement(r.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},s.a.createElement(r.EuiFlexItem,{grow:!1},s.a.createElement(p,{type:Object(d.b)(f,t.actionTypeId),size:"m"})),s.a.createElement(r.EuiFlexItem,{grow:!1},s.a.createElement("span",null,t.name,Object(d.d)(t)&&` (${l.j})`)),Object(d.d)(t)&&s.a.createElement(r.EuiFlexItem,{grow:!1},s.a.createElement(b,{"aria-label":l.i,size:"m",type:"alert",color:"warning",content:l.i}))),"data-test-subj":`dropdown-connector-${t.id}`}]),[m]);return o?[...t,g]:t}),[e]);return s.a.createElement(r.EuiSuperSelect,{"aria-label":l.r,"data-test-subj":"dropdown-connectors",disabled:t,fullWidth:!0,isLoading:n,onChange:c,options:y,valueOfSelected:i})};f.displayName="ConnectorsDropdown";const y=s.a.memo(f)},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o}));var a=n(2);a.i18n.translate("xpack.cases.connectors.swimlane.alertSourceLabel",{defaultMessage:"Alert Source"});const s=a.i18n.translate("xpack.cases.connectors.swimlane.caseIdLabel",{defaultMessage:"Case Id"}),r=a.i18n.translate("xpack.cases.connectors.swimlane.caseNameLabel",{defaultMessage:"Case Name"}),c=a.i18n.translate("xpack.cases.connectors.swimlane.severityLabel",{defaultMessage:"Severity"}),i=a.i18n.translate("xpack.cases.connectors.swimlane.emptyMappingWarningTitle",{defaultMessage:"This connector has missing field mappings"}),o=a.i18n.translate("xpack.cases.connectors.swimlane.emptyMappingWarningDesc",{defaultMessage:"This connector cannot be selected because it is missing the required case field mappings. You can edit this connector to add required field mappings or select a connector of type Cases."})},171:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(13),s=n(1),r=n.n(s),c=n(16);const i=r.a.createElement(a.EuiText,{color:"subdued",size:"xs","data-test-subj":"form-optional-field-label"},c.O)},172:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1),s=n(139),r=n(166),c=n(4),i=n(5),o=n(20);const l=(e,t)=>{switch(t.type){case"setLoading":return{...e,loading:t.payload};case"setFirstLoad":return{...e,firstLoad:t.payload};case"setPersistLoading":return{...e,persistLoading:t.payload};case"setVersion":return{...e,version:t.payload};case"setID":return{...e,id:t.payload};case"setCurrentConfiguration":return{...e,currentConfiguration:{...t.currentConfiguration}};case"setConnector":return{...e,connector:t.connector};case"setClosureType":return{...e,closureType:t.closureType};case"setMappings":return{...e,mappings:t.mappings};default:return e}},u={closureType:"close-by-user",connector:{fields:null,id:"none",name:"none",type:c.o.none},currentConfiguration:{closureType:"close-by-user",connector:{fields:null,id:"none",name:"none",type:c.o.none}},firstLoad:!1,loading:!0,mappings:[],persistLoading:!1,version:"",id:""},d=()=>{const{owner:e}=Object(o.a)(),[t,n]=Object(a.useReducer)(l,u),c=Object(i.i)(),d=Object(a.useCallback)((e=>{n({currentConfiguration:e,type:"setCurrentConfiguration"})}),[]),p=Object(a.useCallback)((e=>{n({connector:e,type:"setConnector"})}),[]),m=Object(a.useCallback)((e=>{n({closureType:e,type:"setClosureType"})}),[]),g=Object(a.useCallback)((e=>{n({mappings:e,type:"setMappings"})}),[]),b=Object(a.useCallback)((e=>{n({payload:e,type:"setLoading"})}),[]),f=Object(a.useCallback)((e=>{n({payload:e,type:"setFirstLoad"})}),[]),y=Object(a.useCallback)((e=>{n({payload:e,type:"setPersistLoading"})}),[]),E=Object(a.useCallback)((e=>{n({payload:e,type:"setVersion"})}),[]),C=Object(a.useCallback)((e=>{n({payload:e,type:"setID"})}),[]),h=Object(a.useRef)(!1),O=Object(a.useRef)(new AbortController),j=Object(a.useRef)(!1),v=Object(a.useRef)(new AbortController),w=Object(a.useCallback)((async()=>{try{h.current=!1,O.current.abort(),O.current=new AbortController,b(!0);const n=await Object(s.c)({signal:O.current.signal,owner:e});h.current||(null!=n&&(p(n.connector),null!=m&&m(n.closureType),E(n.version),C(n.id),g(n.mappings),t.firstLoad||(f(!0),null!=d&&d({closureType:n.closureType,connector:{...n.connector}})),null!=n.error&&c.addError(new Error(n.error),{title:r.a})),b(!1))}catch(e){h.current||("AbortError"!==e.name&&c.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:r.a}),b(!1))}}),[t.firstLoad]),x=Object(a.useCallback)((async({connector:n,closureType:a})=>{try{j.current=!1,v.current.abort(),v.current=new AbortController,y(!0);const i={connector:n,closure_type:a},o=0===t.version.length?await Object(s.e)({...i,owner:e[0]},v.current.signal):await Object(s.d)(t.id,{...i,version:t.version},v.current.signal);j.current||(p(o.connector),m&&m(o.closureType),E(o.version),C(o.id),g(o.mappings),null!=d&&d({closureType:o.closureType,connector:{...o.connector}}),null!=o.error&&c.addError(new Error(o.error),{title:r.a}),c.addSuccess(r.b),y(!1))}catch(e){j.current||("AbortError"!==e.name&&c.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:r.a}),p(t.currentConfiguration.connector),y(!1))}}),[y,t.version,t.id,t.currentConfiguration.connector,e,p,m,E,C,g,d,c]);return Object(a.useEffect)((()=>(w(),()=>{h.current=!0,O.current.abort(),j.current=!0,v.current.abort()})),[]),{...t,refetchCaseConfigure:w,persistCaseConfigure:x,setCurrentConfiguration:d,setConnector:p,setClosureType:m,setMappings:g}}},173:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1),s=n(76),r=n(140);const c=({fieldName:e})=>{var t,n;const{setFieldValue:c,getFormData:i}=Object(s.useFormContext)(),o=null===(t=Object(r.a)())||void 0===t?void 0:t.hooks,l=i(),u=Object(a.useCallback)((t=>c(e,t)),[e,c]);return null==o||o.useInsertTimeline(null!==(n=l[e])&&void 0!==n?n:"",u),null}},174:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1),s=n(41),r=n(24),c=n(5);const i=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoading:!0,isError:!1};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};default:return e}},o=()=>{const[e,t]=Object(a.useReducer)(i,{isLoading:!1,isError:!1}),n=Object(c.i)(),o=Object(a.useRef)(!1),l=Object(a.useRef)(new AbortController),u=Object(a.useCallback)((async({caseId:e,connector:a})=>{try{l.current.abort(),o.current=!1,l.current=new AbortController,t({type:"FETCH_INIT"});const c=await Object(s.m)(e,a.id,l.current.signal);return o.current||(t({type:"FETCH_SUCCESS"}),n.addSuccess(r.e(a.name))),c}catch(e){o.current||("AbortError"!==e.name&&n.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:r.b}),t({type:"FETCH_FAILURE"}))}}),[]);return Object(a.useEffect)((()=>()=>{l.current.abort(),o.current=!0}),[]),{...e,pushCaseToExternalService:u}}},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(13),s=n(1),r=n.n(s),c=n(100);const i=({selectedSeverity:e,onSeverityChange:t,isLoading:n,isDisabled:s})=>{const i=Object.keys(c.a).map((e=>{const t=c.a[e];return{value:e,inputDisplay:r.a.createElement(a.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",responsive:!1,"data-test-subj":`case-severity-selection-${e}`},r.a.createElement(a.EuiFlexItem,{grow:!1},r.a.createElement(a.EuiHealth,{color:t.color},t.label)))}}));return r.a.createElement(a.EuiSuperSelect,{disabled:s,fullWidth:!0,isLoading:n,options:i,valueOfSelected:e,onChange:t,"data-test-subj":"case-severity-selection"})};i.displayName="SeveritySelector"},189:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ie}));var a=n(1),s=n.n(a),r=n(13),c=n(37),i=n.n(c),o=n(76),l=n(79);const u=Object(o.getUseField)({component:l.Field}),d=({isLoading:e})=>s.a.createElement(u,{path:"title",componentProps:{idAria:"caseTitle","data-test-subj":"caseTitle",euiFieldProps:{autoFocus:!0,fullWidth:!0,disabled:e}}});d.displayName="TitleComponent";const p=Object(a.memo)(d);var m=n(118),g=n(142),b=n(42);const f="description",y=({isLoading:e})=>{const{draftComment:t,hasIncomingLensState:n,openLensModal:r,clearDraftComment:c}=Object(g.a)(),{setFieldValue:i}=Object(o.useFormContext)(),[{title:l,tags:u}]=Object(o.useFormData)({watch:["title","tags"]}),d=Object(a.useRef)(),p=[b.b];return Object(a.useEffect)((()=>{(null==t?void 0:t.commentId)===f&&d.current&&(i(f,t.comment),t.caseTitle&&i("title",t.caseTitle),t.caseTags&&t.caseTags.length>0&&i("tags",t.caseTags),n?r({editorRef:d.current}):c())}),[c,t,n,r,i]),s.a.createElement(o.UseField,{path:f,component:m.a,componentProps:{id:f,ref:d,dataTestSubj:"caseDescription",idAria:"caseDescription",isDisabled:e,caseTitle:l,caseTags:u,disabledUiPlugins:p}})};y.displayName="DescriptionComponent";const E=Object(a.memo)(y);var C=n(122),h=n(97);const O=Object(o.getUseField)({component:l.Field}),j=({isLoading:e})=>{const{data:t=[],isLoading:n}=Object(C.a)(),r=Object(a.useMemo)((()=>t.map((e=>({label:e})))),[t]);return s.a.createElement(O,{path:"tags",componentProps:{idAria:"caseTags","data-test-subj":"caseTags",euiFieldProps:{fullWidth:!0,placeholder:"",disabled:e||n,options:r,noSuggestions:!1,customOptionText:h.a}}})};j.displayName="TagsComponent";const v=Object(a.memo)(j);var w=n(168),x=n(190),T=n(149),S=n(172),M=n(93),F=n(5),k=n(16);const I=({connectors:e,isEdit:t,field:n,setErrors:a})=>{var r;const[{connectorId:c}]=Object(o.useFormData)({watch:["connectorId"]}),{setValue:i}=n,l=null!==(r=Object(M.a)(c,e))&&void 0!==r?r:null;return s.a.createElement(x.a,{connector:l,fields:n.value,isEdit:t,onChange:i})};I.displayName="ConnectorFields";const L=({connectors:e,isLoading:t,isLoadingConnectors:n})=>{const{getFields:c,setFieldValue:i}=Object(o.useFormContext)(),{connector:l}=Object(S.a)(),{actions:u}=Object(F.b)(),d=Object(a.useCallback)((()=>{const{fields:e}=c();e.setValue(null)}),[c]),p=Object(a.useMemo)((()=>e.some((e=>e.id===l.id))?l.id:"none"),[l.id,e]);Object(a.useEffect)((()=>i("connectorId",p)),[p,i]);const m=Object(M.c)({config:T.a.connectorId,connectors:e});return u.read?s.a.createElement(r.EuiFlexGroup,null,s.a.createElement(r.EuiFlexItem,null,s.a.createElement(o.UseField,{path:"connectorId",config:m,component:w.a,defaultValue:p,componentProps:{connectors:e,handleChange:d,dataTestSubj:"caseConnectors",disabled:t||n,idAria:"caseConnectors",isLoading:t||n}})),s.a.createElement(r.EuiFlexItem,null,s.a.createElement(o.UseField,{path:"fields",component:I,componentProps:{connectors:e,isEdit:!0}}))):s.a.createElement(r.EuiText,{"data-test-subj":"create-case-connector-permissions-error-msg",size:"s"},s.a.createElement("span",null,k.R))};L.displayName="ConnectorComponent";const A=Object(a.memo)(L),N=Object(o.getUseField)({component:l.Field}),R=({isLoading:e})=>{const[{syncAlerts:t}]=Object(o.useFormData)({watch:["syncAlerts"]});return s.a.createElement(N,{path:"syncAlerts",componentProps:{idAria:"caseSyncAlerts","data-test-subj":"caseSyncAlerts",label:h.u,euiFieldProps:{disabled:e,label:t?h.w:h.v}}})};R.displayName="SyncAlertsToggleComponent";const P=Object(a.memo)(R);var D=n(141),U=n(173);const _=()=>{const{submit:e,isSubmitting:t}=Object(o.useFormContext)();return s.a.createElement(r.EuiButton,{"tour-step":"create-case-submit","data-test-subj":"create-case-submit",fill:!0,iconType:"plusInCircle",isDisabled:t,isLoading:t,onClick:e},h.g)};_.displayName="SubmitCaseButton";const z=Object(a.memo)(_);var V=n(143),B=n(41),W=n(24);const G=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoading:!0,isError:!1};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};default:return e}};var H=n(174),Y=n(4),q=n(49),$=n(20),K=n(101),X=n(126),J=n(54);const Z={description:"",tags:[],title:"",severity:Y.g.LOW,connectorId:Y.q,fields:null,syncAlerts:!0,selectedOwner:null,assignees:[]},Q=({afterCaseCreated:e,children:t,onSuccess:n,attachments:r,initialValue:c})=>{const{data:i=[],isLoading:l}=Object(X.a)(),{owner:u,appId:d}=Object($.a)(),{isSyncAlertsEnabled:p}=Object(K.a)(),{postCase:m}=(()=>{const[e,t]=Object(a.useReducer)(G,{isLoading:!1,isError:!1}),n=Object(F.i)(),s=Object(a.useRef)(!1),r=Object(a.useRef)(new AbortController),c=Object(a.useCallback)((async e=>{try{s.current=!1,r.current.abort(),r.current=new AbortController,t({type:"FETCH_INIT"});const n=await Object(B.l)(e,r.current.signal);return s.current||t({type:"FETCH_SUCCESS"}),n}catch(e){s.current||("AbortError"!==e.name&&n.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:W.b}),t({type:"FETCH_FAILURE"}))}}),[]);return Object(a.useEffect)((()=>()=>{s.current=!0,r.current.abort()}),[]),{...e,postCase:c}})(),{createAttachments:g}=Object(q.a)(),{pushCaseToExternalService:b}=Object(H.a)(),{startTransaction:f}=Object(J.b)(),y=Object(a.useCallback)((async({connectorId:t,fields:a,syncAlerts:s=p,...c},o)=>{if(o){const{selectedOwner:o,...l}=c,p=Object(M.a)(t,i);f({appId:d,attachments:r});const y=p?Object(V.b)(p,a):Object(V.a)(),E=await m({...l,connector:y,settings:{syncAlerts:s},owner:null!=o?o:u[0]});E&&Array.isArray(r)&&r.length>0&&await g({caseId:E.id,caseOwner:E.owner,data:r}),e&&E&&await e(E,g),null!=E&&E.id&&"none"!==y.id&&await b({caseId:E.id,connector:y}),n&&E&&await n(E)}}),[d,f,p,i,m,u,e,n,r,g,b]),{form:E}=Object(o.useForm)({defaultValue:{...Z,...c},options:{stripEmptyFields:!1},schema:T.a,onSubmit:y}),C=Object(a.useMemo)((()=>null!=t?s.a.Children.map(t,(e=>s.a.cloneElement(e,{connectors:i,isLoadingConnectors:l}))):null),[t,i,l]);return s.a.createElement(o.Form,{onKeyDown:e=>{"Enter"===e.key&&e.stopPropagation()},form:E},C)};Q.displayName="FormContext";var ee=n(78),te=n(14),ne=n(3);const ae=Object.keys(ne.R),se=Object(ee.euiStyled)(r.EuiKeyPadMenu)`
  width: 100%;
`,re=Object(ee.euiStyled)(r.EuiKeyPadMenuItem)`

  width: 100%;
`,ce=({availableOwners:e,field:t,isLoading:n=!1})=>{const{errorMessage:c,isInvalid:i}=Object(o.getFieldValidityAndErrorMessage)(t),l=Object(r.useGeneratedHtmlId)({prefix:"caseOwnerRadioGroup"}),u=Object(a.useCallback)((e=>t.setValue(e)),[t]);return Object(a.useEffect)((()=>{t.value||u(e.includes(te.SECURITY_SOLUTION_OWNER)?te.SECURITY_SOLUTION_OWNER:e[0])}),[e,t.value,u]),s.a.createElement(r.EuiFormRow,{"data-test-subj":"caseOwnerSelector",fullWidth:!0,isInvalid:i,error:c,helpText:t.helpText,label:t.label,labelAppend:t.labelAppend},s.a.createElement(se,{checkable:{ariaLegend:h.b}},s.a.createElement(r.EuiFlexGroup,null,ae.map((a=>s.a.createElement(r.EuiFlexItem,{key:a},s.a.createElement(re,{"data-test-subj":`${a}RadioButton`,onChange:u,checkable:"single",name:l,id:a,label:ne.R[a].label,isSelected:t.value===a,isDisabled:n||!e.includes(a)},s.a.createElement(r.EuiIcon,{type:ne.R[a].iconType,size:"xl"}))))))))};ce.displayName="OwnerSelector";const ie=({availableOwners:e,isLoading:t})=>s.a.createElement(o.UseField,{path:"selectedOwner",component:ce,componentProps:{availableOwners:e,isLoading:t}});ie.displayName="CaseOwnerSelectionComponent";const oe=Object(a.memo)(ie);var le=n(105),ue=n(175),de=n(121);const pe=({isLoading:e})=>{const{setFieldValue:t}=Object(o.useFormContext)(),[{severity:n}]=Object(o.useFormData)({watch:["severity"]});return s.a.createElement(r.EuiFormRow,{"data-test-subj":"caseSeverity",fullWidth:!0,label:de.f},s.a.createElement(ue.a,{isLoading:e,isDisabled:e,selectedSeverity:null!=n?n:Y.g.LOW,onSeverityChange:e=>{t("severity",e)}}))};pe.displayName="SeverityFieldForm";const me=({isLoading:e})=>s.a.createElement(o.UseField,{path:"severity",component:pe,componentProps:{isLoading:e}});me.displayName="SeverityComponent";const ge=Object(a.memo)(me);var be=n(8),fe=n(108),ye=n(136),Ee=n(113),Ce=n(171),he=n(125),Oe=n(106);const je=e=>({label:Object(fe.c)(e.user),value:e.uid,key:e.uid,user:e.user,data:e.data}),ve=e=>({uid:e.value}),we=s.a.memo((({field:e,isLoading:t,isDisabled:n,options:c,currentUserProfile:i,selectedOptions:l,setSelectedOptions:u,onSearchComboChange:d})=>{const{setValue:p}=e,{isInvalid:m,errorMessage:g}=Object(o.getFieldValidityAndErrorMessage)(e),b=Object(a.useCallback)((e=>{u(e),p(e.map((e=>ve(e))))}),[u,p]),f=Object(a.useCallback)((()=>{var e;i&&(u((e=>[...null!=e?e:[],je(i)])),p([...null!==(e=null==l?void 0:l.map((e=>ve(e))))&&void 0!==e?e:[],{uid:i.uid}]))}),[i,l,u,p]),y=Object(a.useCallback)(((e,t,n)=>{const{user:a,data:c,value:i}=e;return s.a.createElement(r.EuiSelectableListItem,{key:i,prepend:s.a.createElement(fe.a,{user:a,avatar:c.avatar,size:"s"}),className:n,append:s.a.createElement(r.EuiTextColor,{color:"subdued"},a.email)},Object(fe.c)(a))}),[]),E=Boolean(null==l?void 0:l.find((e=>e.value===(null==i?void 0:i.uid))));return s.a.createElement(r.EuiFormRow,{id:"createCaseAssignees",fullWidth:!0,label:h.c,labelAppend:Ce.a,helpText:i?s.a.createElement(r.EuiLink,{"data-test-subj":"create-case-assign-yourself-link",onClick:f,disabled:E},h.d):void 0,isInvalid:m,error:g},s.a.createElement(r.EuiComboBox,{fullWidth:!0,async:!0,isLoading:t,options:c,"data-test-subj":"createCaseAssigneesComboBox",selectedOptions:l,isDisabled:n,onChange:b,onSearchChange:d,renderOption:y}))}));we.displayName="AssigneesFieldComponent";const xe=({isLoading:e})=>{var t,n;const{owner:r}=Object($.a)(),c=Object(le.a)(Object(Oe.b)("delete")),[i,l]=Object(a.useState)(""),[u,d]=Object(a.useState)(),[p,m]=Object(a.useState)(!1),g=r.length>0,{data:b,isLoading:f}=Object(Ee.a)(),y=Object(a.useCallback)((()=>m(!1)),[]),{data:E,isLoading:C,isFetching:O}=Object(ye.a)({name:i,owners:g?r:c,onDebounce:y}),j=null!==(t=null===(n=Object(he.a)(b,E))||void 0===n?void 0:n.map((e=>je(e))))&&void 0!==t?t:[],v=e||f||C||O||p,w=e||f;return s.a.createElement(o.UseField,{path:"assignees",config:{label:h.c,defaultValue:[],validations:[{validator:({value:e})=>{if(e.length>ne.N)return{message:h.k}}}]},component:we,componentProps:{isLoading:v,isDisabled:w,selectedOptions:u,setSelectedOptions:d,options:j,onSearchComboChange:e=>{Object(be.isEmpty)(e)||(l(e),m(!0))},currentUserProfile:b,isUserTyping:p}})};xe.displayName="AssigneesComponent";const Te=Object(a.memo)(xe),Se=i.a.div.attrs((e=>e)).withConfig({displayName:"Container",componentId:"sc-ui4n0f-0"})(["",""],(({big:e,theme:t})=>{var n,a,s,r;return Object(c.css)(["margin-top:",";"],e?null!==(n=null===(a=t.eui)||void 0===a?void 0:a.euiSizeXL)&&void 0!==n?n:"32px":null!==(s=null===(r=t.eui)||void 0===r?void 0:r.euiSize)&&void 0!==s?s:"16px")})),Me=i()(r.EuiLoadingSpinner).withConfig({displayName:"MySpinner",componentId:"sc-ui4n0f-1"})(["position:absolute;top:50%;left:50%;z-index:99;"]),Fe=[],ke=s.a.memo((({connectors:e,isLoadingConnectors:t,withSteps:n})=>{const{isSubmitting:c}=Object(o.useFormContext)(),{isSyncAlertsEnabled:i,caseAssignmentAuthorized:l}=Object(K.a)(),{owner:u}=Object($.a)(),d=Object(le.a)(),m=!u.length&&d.length,g=Object(a.useMemo)((()=>({title:h.q,children:s.a.createElement(s.a.Fragment,null,s.a.createElement(p,{isLoading:c}),l?s.a.createElement(Se,null,s.a.createElement(Te,{isLoading:c})):null,s.a.createElement(Se,null,s.a.createElement(v,{isLoading:c})),s.a.createElement(Se,null,s.a.createElement(ge,{isLoading:c})),m&&s.a.createElement(Se,{big:!0},s.a.createElement(oe,{availableOwners:d,isLoading:c})),s.a.createElement(Se,{big:!0},s.a.createElement(E,{isLoading:c})),s.a.createElement(Se,null))})),[c,l,m,d]),b=Object(a.useMemo)((()=>({title:h.s,children:s.a.createElement(Se,null,s.a.createElement(P,{isLoading:c}))})),[c]),f=Object(a.useMemo)((()=>({title:h.r,children:s.a.createElement(Se,null,s.a.createElement(A,{connectors:e,isLoadingConnectors:t,isLoading:c}))})),[e,t,c]),y=Object(a.useMemo)((()=>[g,...i?[b]:[],f]),[i,g,b,f]);return s.a.createElement(s.a.Fragment,null,c&&s.a.createElement(Me,{"data-test-subj":"create-case-loading-spinner",size:"xl"}),n?s.a.createElement(r.EuiSteps,{headingElement:"h2",steps:y,"data-test-subj":"case-creation-form-steps"}):s.a.createElement(s.a.Fragment,null,g.children,i&&b.children,f.children))}));ke.displayName="CreateCaseFormFields";const Ie=s.a.memo((({withSteps:e=!0,afterCaseCreated:t,onCancel:n,onSuccess:a,timelineIntegration:c,attachments:i,initialValue:o})=>s.a.createElement(D.b,{timelineIntegration:c},s.a.createElement(Q,{afterCaseCreated:t,onSuccess:a,attachments:i,initialValue:o},s.a.createElement(ke,{connectors:Fe,isLoadingConnectors:!1,withSteps:e}),s.a.createElement(Se,null,s.a.createElement(r.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",gutterSize:"xs",responsive:!1},s.a.createElement(r.EuiFlexItem,{grow:!1},s.a.createElement(r.EuiButtonEmpty,{"data-test-subj":"create-case-cancel",iconType:"cross",onClick:n,size:"s"},h.e)),s.a.createElement(r.EuiFlexItem,{grow:!1},s.a.createElement(z,null)))),s.a.createElement(U.a,{fieldName:f})))));Ie.displayName="CreateCaseForm"},190:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(1),s=n.n(a),r=n(13),c=n(9),i=n.n(c),o=n(2);var l=n(4),u=n(103);u.d,u.g,u.f;var d=n(170);d.a,d.b,d.e;var p=n(127);p.b,p.e;var m=n(116);m.f,m.j,m.m;const g=new class connectors_CaseConnectors{constructor(){i()(this,"caseConnectorsRegistry",void 0),this.caseConnectorsRegistry=(()=>{const e=new Map;return{has:t=>e.has(t),register:t=>{if(e.has(t.id))throw new Error(o.i18n.translate("xpack.cases.connecors.register.duplicateCaseConnectorErrorMessage",{defaultMessage:'Object type "{id}" is already registered.',values:{id:t.id}}));e.set(t.id,t)},get:t=>{const n=e.get(t);return function(e,t){if(!e)throw new Error(o.i18n.translate("xpack.cases.connecors.get.missingCaseConnectorErrorMessage",{defaultMessage:'Object type "{id}" is not registered.',values:{id:t}}))}(n,t),n},list:()=>Array.from(e).map((([e,t])=>t))}})(),this.init()}init(){this.caseConnectorsRegistry.register({id:l.o.jira,fieldsComponent:Object(a.lazy)((()=>n.e(10).then(n.bind(null,255))))}),this.caseConnectorsRegistry.register({id:l.o.resilient,fieldsComponent:Object(a.lazy)((()=>n.e(11).then(n.bind(null,257))))}),this.caseConnectorsRegistry.register({id:l.o.serviceNowITSM,fieldsComponent:Object(a.lazy)((()=>n.e(8).then(n.bind(null,252))))}),this.caseConnectorsRegistry.register({id:l.o.serviceNowSIR,fieldsComponent:Object(a.lazy)((()=>n.e(9).then(n.bind(null,253))))}),this.caseConnectorsRegistry.register({id:l.o.swimlane,fieldsComponent:Object(a.lazy)((()=>n.e(14).then(n.bind(null,251))))}),this.caseConnectorsRegistry.register({id:l.o.casesWebhook,fieldsComponent:Object(a.lazy)((()=>n.e(13).then(n.bind(null,259))))})}registry(){return this.caseConnectorsRegistry}},b=({connector:e,isEdit:t,onChange:n,fields:c})=>{const{caseConnectorsRegistry:i}={caseConnectorsRegistry:g.registry()};if(null==e||null==e.actionTypeId||".none"===e.actionTypeId)return null;const{fieldsComponent:o}=i.get(e.actionTypeId);return s.a.createElement(s.a.Fragment,null,null!=o?s.a.createElement(a.Suspense,{fallback:s.a.createElement(r.EuiFlexGroup,{justifyContent:"center"},s.a.createElement(r.EuiFlexItem,{grow:!1},s.a.createElement(r.EuiLoadingSpinner,{size:"m"})))},s.a.createElement("div",{"data-test-subj":"connector-fields"},s.a.createElement(o,{isEdit:t,fields:c,connector:e,onChange:n}))):null)};b.displayName="ConnectorFieldsForm";const f=Object(a.memo)(b)},97:function(e,t,n){"use strict";n.d(t,"q",(function(){return c})),n.d(t,"s",(function(){return i})),n.d(t,"r",(function(){return o})),n.d(t,"u",(function(){return l})),n.d(t,"d",(function(){return u}));var a=n(2),s=n(16);n.d(t,"a",(function(){return s.e})),n.d(t,"b",(function(){return s.i})),n.d(t,"e",(function(){return s.k})),n.d(t,"f",(function(){return s.v})),n.d(t,"g",(function(){return s.x})),n.d(t,"h",(function(){return s.y})),n.d(t,"i",(function(){return s.B})),n.d(t,"j",(function(){return s.C})),n.d(t,"l",(function(){return s.H})),n.d(t,"m",(function(){return s.I})),n.d(t,"n",(function(){return s.X})),n.d(t,"o",(function(){return s.Y})),n.d(t,"p",(function(){return s.Z})),n.d(t,"t",(function(){return s.ab})),n.d(t,"v",(function(){return s.bb})),n.d(t,"w",(function(){return s.cb})),n.d(t,"x",(function(){return s.db})),n.d(t,"y",(function(){return s.eb})),n.d(t,"z",(function(){return s.fb})),n.d(t,"A",(function(){return s.gb}));var r=n(96);n.d(t,"c",(function(){return r.a})),n.d(t,"k",(function(){return r.c}));const c=a.i18n.translate("xpack.cases.create.stepOneTitle",{defaultMessage:"Case fields"}),i=a.i18n.translate("xpack.cases.create.stepTwoTitle",{defaultMessage:"Case settings"}),o=a.i18n.translate("xpack.cases.create.stepThreeTitle",{defaultMessage:"External Connector Fields"}),l=a.i18n.translate("xpack.cases.create.syncAlertsLabel",{defaultMessage:"Sync alert status with case status"}),u=a.i18n.translate("xpack.cases.create.assignYourself",{defaultMessage:"Assign yourself"})}}]);