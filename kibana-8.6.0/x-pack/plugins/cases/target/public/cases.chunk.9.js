/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[9],{104:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=({connector_id:e,service_message:t,...a})=>({...a,actionId:e,...t&&{serviceMessage:t}})},117:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(1),l=a.n(n),c=a(13),r=a(2);const i=r.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningTitle",{defaultMessage:"This connector type is deprecated"}),o=r.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningDesc",{defaultMessage:"Update this connector, or create a new one."}),s=({type:e="warning"})=>l.a.createElement(c.EuiCallOut,{title:i,color:e,iconType:"alert","data-test-subj":"deprecated-connector-warning-callout"},o);s.displayName="DeprecatedCallout";const u=l.a.memo(s)},144:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=e=>e.map((e=>({value:e.value,text:e.label})))},152:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(1),l=a(29),c=a(104),r=a(116);const i=({http:e,connector:t,toastNotifications:a,fields:i,onSuccess:o})=>{const[s,u]=Object(n.useState)(!1),[d,m]=Object(n.useState)([]),b=Object(n.useRef)(!1),p=Object(n.useRef)(new AbortController);return Object(n.useEffect)((()=>(b.current=!1,p.current.abort(),(async()=>{if(t)try{p.current=new AbortController,u(!0);const E=await async function({http:e,signal:t,connectorId:a,fields:n}){const r=await e.post(Object(l.d)(a),{body:JSON.stringify({params:{subAction:"getChoices",subActionParams:{fields:n}}}),signal:t});return Object(c.a)(r)}({http:e,signal:p.current.signal,connectorId:t.id,fields:i});var n,s;if(!b.current)if(u(!1),m(null!==(n=E.data)&&void 0!==n?n:[]),E.status&&"error"===E.status)a.addDanger({title:r.d,text:`${null!==(s=E.serviceMessage)&&void 0!==s?s:E.message}`});else if(o){var d;o(null!==(d=E.data)&&void 0!==d?d:[])}}catch(e){b.current||(u(!1),"AbortError"!==e.name&&a.addDanger({title:r.d,text:e.message}))}else u(!1)})(),()=>{b.current=!0,p.current.abort()})),[e,t,a,i]),{choices:d,isLoading:s}}},253:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var n=a(1),l=a.n(n),c=a(13),r=a(4),i=a(5),o=a(95),s=a(152),u=a(144),d=a(116),m=a(117);const b=["category","subcategory","priority"],p={category:[],subcategory:[],priority:[]},E=({isEdit:e=!0,fields:t,connector:a,onChange:E})=>{const g=Object(n.useRef)(!0),{category:h=null,destIp:f=!0,malwareHash:y=!0,malwareUrl:x=!0,priority:v=null,sourceIp:j=!0,subcategory:I=null}=null!=t?t:{},{http:C,notifications:w}=Object(i.f)().services,[F,k]=Object(n.useState)(p),O=a.isDeprecated,S=Object(n.useCallback)(((e,a)=>{E({...t,[e]:a})}),[t,E]),{isLoading:N}=Object(s.a)({http:C,toastNotifications:w.toasts,connector:a,fields:b,onSuccess:e=>{k(e.reduce(((e,t)=>({...e,[t.element]:[...null!=e[t.element]?e[t.element]:[],t]})),p))}}),M=Object(n.useMemo)((()=>Object(u.a)(F.category)),[F.category]),R=Object(n.useMemo)((()=>Object(u.a)(F.priority)),[F.priority]),W=Object(n.useMemo)((()=>Object(u.a)(F.subcategory.filter((e=>e.dependent_value===h)))),[F.subcategory,h]),G=Object(n.useMemo)((()=>{var e,t,a;return[...null!=f&&f?[{title:d.e,description:d.b}]:[],...null!=j&&j?[{title:d.k,description:d.b}]:[],...null!=x&&x?[{title:d.h,description:d.b}]:[],...null!=y&&y?[{title:d.g,description:d.b}]:[],...null!=v&&v.length>0?[{title:d.i,description:null===(e=R.find((e=>`${e.value}`===v)))||void 0===e?void 0:e.text}]:[],...null!=h&&h.length>0?[{title:d.c,description:null===(t=M.find((e=>`${e.value}`===h)))||void 0===t?void 0:t.text}]:[],...null!=I&&I.length>0?[{title:d.l,description:null===(a=W.find((e=>`${e.value}`===I)))||void 0===a?void 0:a.text}]:[]]}),[h,M,f,y,x,v,R,j,I,W]);return Object(n.useEffect)((()=>{g.current&&(g.current=!1,E({category:h,destIp:f,malwareHash:y,malwareUrl:x,priority:v,sourceIp:j,subcategory:I}))}),[h,f,y,x,E,v,j,I]),l.a.createElement(l.a.Fragment,null,O&&l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(m.a,null))),e?l.a.createElement("div",{"data-test-subj":"connector-fields-sn-sir"},l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFormRow,{fullWidth:!0,label:d.a},l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiCheckbox,{id:"destIpCheckbox","data-test-subj":"destIpCheckbox",label:d.e,checked:null!=f&&f,compressed:!0,onChange:e=>S("destIp",e.target.checked)})),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiCheckbox,{id:"sourceIpCheckbox","data-test-subj":"sourceIpCheckbox",label:d.k,checked:null!=j&&j,compressed:!0,onChange:e=>S("sourceIp",e.target.checked)}))),l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiCheckbox,{id:"malwareUrlCheckbox","data-test-subj":"malwareUrlCheckbox",label:d.h,checked:null!=x&&x,compressed:!0,onChange:e=>S("malwareUrl",e.target.checked)})),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiCheckbox,{id:"malwareHashCheckbox","data-test-subj":"malwareHashCheckbox",label:d.g,checked:null!=y&&y,compressed:!0,onChange:e=>S("malwareHash",e.target.checked)}))))))),l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFormRow,{fullWidth:!0,label:d.i},l.a.createElement(c.EuiSelect,{fullWidth:!0,"data-test-subj":"prioritySelect",hasNoInitialSelection:!0,isLoading:N,disabled:N,options:R,value:null!=v?v:void 0,onChange:e=>S("priority",e.target.value)})))),l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFormRow,{fullWidth:!0,label:d.c},l.a.createElement(c.EuiSelect,{fullWidth:!0,"data-test-subj":"categorySelect",options:M,value:null!=h?h:void 0,isLoading:N,disabled:N,hasNoInitialSelection:!0,onChange:e=>E({...t,category:e.target.value,subcategory:null})}))),l.a.createElement(c.EuiFlexItem,null,(null==W?void 0:W.length)>0?l.a.createElement(c.EuiFormRow,{fullWidth:!0,label:d.l},l.a.createElement(c.EuiSelect,{fullWidth:!0,"data-test-subj":"subcategorySelect",options:W,value:null!=I?I:"",isLoading:N,disabled:N,hasNoInitialSelection:!0,onChange:e=>S("subcategory",e.target.value)})):null))):l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(o.a,{connectorType:r.o.serviceNowSIR,title:a.name,listItems:G,isLoading:!1}))))};E.displayName="ServiceNowSIRFieldsComponent"},95:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(1),l=a.n(n),c=a(13),r=a(37),i=a.n(r),o=a(5),s=a(93);const u=i.a.span.withConfig({displayName:"StyledText",componentId:"sc-10fyrf5-0"})(["span{display:block;}"]),d=({connectorType:e,title:t,listItems:a,isLoading:r})=>{const{triggersActionsUi:i}=Object(o.f)().services,d=Object(n.useMemo)((()=>l.a.createElement(u,null,a.length>0&&a.map(((e,t)=>l.a.createElement("span",{"data-test-subj":"card-list-item",key:`${e.title}-${t}`},l.a.createElement("strong",null,`${e.title}: `),e.description))))),[a]),m=Object(n.useMemo)((()=>l.a.createElement(c.EuiIcon,{size:"xl",type:Object(s.b)(i,e)})),[e]);return l.a.createElement(l.a.Fragment,null,r&&l.a.createElement(c.EuiLoadingSpinner,{"data-test-subj":"connector-card-loading"}),!r&&l.a.createElement(c.EuiFlexGroup,{direction:"row"},l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiCard,{"data-test-subj":"connector-card",description:d,display:"plain",layout:"horizontal",paddingSize:"none",title:t,titleSize:"xs"})),l.a.createElement(c.EuiFlexItem,{grow:!1},m)))};d.displayName="ConnectorCardDisplay";const m=Object(n.memo)(d)}}]);