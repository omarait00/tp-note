/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.fleet_bundle_jsonpfunction=window.fleet_bundle_jsonpfunction||[]).push([[2],Array(140).concat([function(e,t,a){e.exports=a(36)(258)},function(e,t,a){e.exports=a(36)(1546)},,,,,,,,,function(e,t,a){e.exports=a(36)(1169)},,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(36)(1136)},function(e,t,a){e.exports=a(36)(3065)},function(e,t,a){var n=a(246);e.exports=function(e){return e==e&&!n(e)}},function(e,t){e.exports=function(e,t){return function(a){return null!=a&&a[e]===t&&(void 0!==t||e in Object(a))}}},function(e,t,a){e.exports=a(36)(3394)},,,,,,,,,,,,,,function(e,t){e.exports=function(e,t,a){for(var n,i,l,r=e.children||[],s=[],o=-1,c=a.before;++o<r.length;)l=r[o],o+1<r.length?((i=t.handle.handlers[r[o+1].type])&&i.peek&&(i=i.peek),n=i?i(r[o+1],e,t,{before:"",after:""}).charAt(0):""):n=a.after,s.push(t.handle(l,e,t,{before:c,after:n})),c=s[s.length-1].slice(-1);return s.join("")}},function(e,t,a){"use strict";var n,i=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),l=[];function r(e){for(var t=-1,a=0;a<l.length;a++)if(l[a].identifier===e){t=a;break}return t}function s(e,t){for(var a={},n=[],i=0;i<e.length;i++){var s=e[i],o=t.base?s[0]+t.base:s[0],c=a[o]||0,u="".concat(o," ").concat(c);a[o]=c+1;var m=r(u),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==m?(l[m].references++,l[m].updater(d)):l.push({identifier:u,updater:f(d,t),references:1}),n.push(u)}return n}function o(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var l=a.nc;l&&(n.nonce=l)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function m(e,t,a,n){var i=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var l=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(l,r[t]):e.appendChild(l)}}function d(e,t,a){var n=a.css,i=a.media,l=a.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),l&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var g=null,p=0;function f(e,t){var a,n,i;if(t.singleton){var l=p++;a=g||(g=o(t)),n=m.bind(null,a,l,!1),i=m.bind(null,a,l,!0)}else a=o(t),n=d.bind(null,a,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var a=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var i=r(a[n]);l[i].references--}for(var o=s(e,t),c=0;c<a.length;c++){var u=r(a[c]);0===l[u].references&&(l[u].updater(),l.splice(u,1))}a=o}}}},function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,n,i,l=e[1]||"",r=e[3];if(!r)return l;if(t&&"function"==typeof btoa){var s=(a=r,n=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(i," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[l].concat(o).concat([s]).join("\n")}return[l].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var l=0;l<this.length;l++){var r=this[l][0];null!=r&&(i[r]=!0)}for(var s=0;s<e.length;s++){var o=[].concat(e[s]);n&&i[o[0]]||(a&&(o[2]?o[2]="".concat(a," and ").concat(o[2]):o[2]=a),t.push(o))}},t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(232)((function(e,t,a){e[a?0:1].push(t)}),(function(){return[[],[]]}));e.exports=n},function(e,t,a){var n=a(233),i=a(234),l=a(241),r=a(140);e.exports=function(e,t){return function(a,s){var o=r(a)?n:i,c=t?t():{};return o(a,e,l(s,2),c)}}},function(e,t){e.exports=function(e,t,a,n){for(var i=-1,l=null==e?0:e.length;++i<l;){var r=e[i];t(n,r,a(r),e)}return n}},function(e,t,a){var n=a(235);e.exports=function(e,t,a,i){return n(e,(function(e,n,l){t(i,e,a(e),l)})),i}},function(e,t,a){var n=a(236),i=a(239)(n);e.exports=i},function(e,t,a){var n=a(237),i=a(168);e.exports=function(e,t){return e&&n(e,t,i)}},function(e,t,a){var n=a(238)();e.exports=n},function(e,t){e.exports=function(e){return function(t,a,n){for(var i=-1,l=Object(t),r=n(t),s=r.length;s--;){var o=r[e?s:++i];if(!1===a(l[o],o,l))break}return t}}},function(e,t,a){var n=a(240);e.exports=function(e,t){return function(a,i){if(null==a)return a;if(!n(a))return e(a,i);for(var l=a.length,r=t?l:-1,s=Object(a);(t?r--:++r<l)&&!1!==i(s[r],r,s););return a}}},function(e,t,a){e.exports=a(36)(1141)},function(e,t,a){var n=a(242),i=a(247),l=a(256),r=a(140),s=a(257);e.exports=function(e){return"function"==typeof e?e:null==e?l:"object"==typeof e?r(e)?i(e[0],e[1]):n(e):s(e)}},function(e,t,a){var n=a(243),i=a(245),l=a(171);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?l(t[0][0],t[0][1]):function(a){return a===e||n(a,e,t)}}},function(e,t,a){var n=a(244),i=a(169);e.exports=function(e,t,a,l){var r=a.length,s=r,o=!l;if(null==e)return!s;for(e=Object(e);r--;){var c=a[r];if(o&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<s;){var u=(c=a[r])[0],m=e[u],d=c[1];if(o&&c[2]){if(void 0===m&&!(u in e))return!1}else{var g=new n;if(l)var p=l(m,d,u,e,t,g);if(!(void 0===p?i(d,m,3,l,g):p))return!1}}return!0}},function(e,t,a){e.exports=a(36)(1493)},function(e,t,a){var n=a(170),i=a(168);e.exports=function(e){for(var t=i(e),a=t.length;a--;){var l=t[a],r=e[l];t[a]=[l,r,n(r)]}return t}},function(e,t,a){e.exports=a(36)(336)},function(e,t,a){var n=a(169),i=a(248),l=a(249),r=a(172),s=a(170),o=a(171),c=a(141);e.exports=function(e,t){return r(e)&&s(t)?o(c(e),t):function(a){var r=i(a,e);return void 0===r&&r===t?l(a,e):n(t,r,3)}}},function(e,t,a){e.exports=a(36)(1812)},function(e,t,a){var n=a(250),i=a(251);e.exports=function(e,t){return null!=e&&i(e,t,n)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,a){var n=a(252),i=a(253),l=a(140),r=a(254),s=a(255),o=a(141);e.exports=function(e,t,a){for(var c=-1,u=(t=n(t,e)).length,m=!1;++c<u;){var d=o(t[c]);if(!(m=null!=e&&a(e,d)))break;e=e[d]}return m||++c!=u?m:!!(u=null==e?0:e.length)&&s(u)&&r(d,u)&&(l(e)||i(e))}},function(e,t,a){e.exports=a(36)(1155)},function(e,t,a){e.exports=a(36)(1502)},function(e,t,a){e.exports=a(36)(1503)},function(e,t,a){e.exports=a(36)(1505)},function(e,t,a){e.exports=a(36)(1542)},function(e,t,a){var n=a(258),i=a(259),l=a(172),r=a(141);e.exports=function(e){return l(e)?n(r(e)):i(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,a){var n=a(260);e.exports=function(e){return function(t){return n(t,e)}}},function(e,t,a){e.exports=a(36)(1544)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n,i=a(321),l=a(330),r=a(340);e.exports=function(e){var t=this.data();function a(e,a){t[e]?t[e].push(a):t[e]=[a]}!n&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(n=!0,console.warn("[remark-gfm] Warning: please upgrade to remark 13 to use this plugin")),a("micromarkExtensions",i(e)),a("fromMarkdownExtensions",l),a("toMarkdownExtensions",r(e))}},function(e,t,a){e.exports=a(322)},function(e,t,a){var n=a(177),i=a(323),l=a(325),r=a(326),s=a(328);e.exports=function(e){return n([i,l(e),r,s])}},function(e,t,a){e.exports=a(324)},function(e,t,a){var n=a(128),i=a(119),l=a(148),r=a(94),s=a(146),o=a(147),c={tokenize:function(e,t,a){return function(t){return e.consume(t),n};function n(t){return 87===t||t-32==87?(e.consume(t),i):a(t)}function i(t){return 87===t||t-32==87?(e.consume(t),l):a(t)}function l(t){return 46===t?(e.consume(t),s):a(t)}function s(e){return null===e||r(e)?a(e):t(e)}},partial:!0},u={tokenize:function(e,t,a){var n,i;return r;function r(t){return 38===t?e.check(g,u,c)(t):46===t||95===t?e.check(d,u,c)(t):l(t)||o(t)||45!==t&&s(t)?u(t):(e.consume(t),r)}function c(t){return 46===t?(i=n,n=void 0,e.consume(t),r):(95===t&&(n=!0),e.consume(t),r)}function u(e){return i||n?a(e):t(e)}},partial:!0},m={tokenize:function(e,t){var a=0;return n;function n(r){return 38===r?e.check(g,t,i)(r):(40===r&&a++,41===r?e.check(d,l,i)(r):v(r)?t(r):k(r)?e.check(d,t,i)(r):(e.consume(r),n))}function i(t){return e.consume(t),n}function l(e){return--a<0?t(e):i(e)}},partial:!0},d={tokenize:function(e,t,a){return function(t){return e.consume(t),n};function n(i){return k(i)?(e.consume(i),n):v(i)?t(i):a(i)}},partial:!0},g={tokenize:function(e,t,a){return function(t){return e.consume(t),i};function i(t){return n(t)?(e.consume(t),i):59===t?(e.consume(t),l):a(t)}function l(e){return v(e)?t(e):a(e)}},partial:!0},p={tokenize:function(e,t,a){var n=this;return function(t){return 87!==t&&t-32!=87||!y(n.previous)||j(n.events)?a(t):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(c,e.attempt(u,e.attempt(m,i),a),a)(t))};function i(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}},previous:y},f={tokenize:function(e,t,a){var n=this;return function(t){return 72!==t&&t-32!=72||!M(n.previous)||j(n.events)?a(t):(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(t),i)};function i(t){return 84===t||t-32==84?(e.consume(t),r):a(t)}function r(t){return 84===t||t-32==84?(e.consume(t),c):a(t)}function c(t){return 80===t||t-32==80?(e.consume(t),d):a(t)}function d(t){return 83===t||t-32==83?(e.consume(t),g):g(t)}function g(t){return 58===t?(e.consume(t),p):a(t)}function p(t){return 47===t?(e.consume(t),f):a(t)}function f(t){return 47===t?(e.consume(t),E):a(t)}function E(t){return l(t)||o(t)||s(t)?a(t):e.attempt(u,e.attempt(m,h),a)(t)}function h(a){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(a)}},previous:M},E={tokenize:function(e,t,a){var n,l=this;return function(t){return x(t)&&C(l.previous)&&!j(l.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),r(t)):a(t)};function r(t){return x(t)?(e.consume(t),r):64===t?(e.consume(t),s):a(t)}function s(t){return 46===t?e.check(d,m,o)(t):45===t||95===t?e.check(d,a,c)(t):i(t)?(e.consume(t),s):m(t)}function o(t){return e.consume(t),n=!0,s}function c(t){return e.consume(t),u}function u(t){return 46===t?e.check(d,a,o)(t):s(t)}function m(i){return n?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(i)):a(i)}},previous:C},h={};t.text=h;for(var b=48;b<123;)h[b]=E,58==++b?b=65:91===b&&(b=97);function k(e){return 33===e||34===e||39===e||41===e||42===e||44===e||46===e||58===e||59===e||60===e||63===e||95===e||126===e}function v(e){return null===e||e<0||32===e||60===e}function x(e){return 43===e||45===e||46===e||95===e||i(e)}function y(e){return null===e||e<0||32===e||40===e||42===e||95===e||126===e}function M(e){return null===e||!n(e)}function C(e){return 47!==e&&M(e)}function j(e){for(var t=e.length;t--;)if(("labelLink"===e[t][1].type||"labelImage"===e[t][1].type)&&!e[t][1]._balanced)return!0}h[43]=E,h[45]=E,h[46]=E,h[95]=E,h[72]=[E,f],h[104]=[E,f],h[87]=[E,p],h[119]=[E,p]},function(e,t,a){e.exports=function(e){var t=(e||{}).singleTilde,a={tokenize:function(e,a,i){var l=this.previous,r=this.events,s=0;return function(t){return 126!==t||126===l&&"characterEscape"!==r[r.length-1][1].type?i(t):(e.enter("strikethroughSequenceTemporary"),o(t))};function o(r){var c,u,m=n(l);return 126===r?s>1?i(r):(e.consume(r),s++,o):s<2&&!t?i(r):(c=e.exit("strikethroughSequenceTemporary"),u=n(r),c._open=!u||2===u&&m,c._close=!m||2===m&&u,a(r))}},resolveAll:function(e,t){for(var a,n,s,o,c=-1;++c<e.length;)if("enter"===e[c][0]&&"strikethroughSequenceTemporary"===e[c][1].type&&e[c][1]._close)for(s=c;s--;)if("exit"===e[s][0]&&"strikethroughSequenceTemporary"===e[s][1].type&&e[s][1]._open&&e[c][1].end.offset-e[c][1].start.offset==e[s][1].end.offset-e[s][1].start.offset){e[c][1].type="strikethroughSequence",e[s][1].type="strikethroughSequence",a={type:"strikethrough",start:r(e[s][1].start),end:r(e[c][1].end)},n={type:"strikethroughText",start:r(e[s][1].end),end:r(e[c][1].start)},o=[["enter",a,t],["enter",e[s][1],t],["exit",e[s][1],t],["enter",n,t]],i(o,o.length,0,l(t.parser.constructs.insideSpan.null,e.slice(s+1,c),t)),i(o,o.length,0,[["exit",n,t],["enter",e[c][1],t],["exit",e[c][1],t],["exit",a,t]]),i(e,s-1,c-s+3,o),c=s+o.length-2;break}return function(e){for(var t=-1,a=e.length;++t<a;)"strikethroughSequenceTemporary"===e[t][1].type&&(e[t][1].type="data");return e}(e)}};return null==t&&(t=!0),{text:{126:a},insideSpan:{null:a}}};var n=a(178),i=a(101),l=a(127),r=a(110)},function(e,t,a){e.exports=a(327)},function(e,t,a){t.flow={null:{tokenize:function(e,t,a){var r,s,o=[],c=0;return function(t){return null===t||-5===t||-4===t||-3===t?a(t):(e.enter("table")._align=o,e.enter("tableHead"),e.enter("tableRow"),124===t?u(t):(c++,e.enter("temporaryTableCellContent"),g(t)))};function u(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,m}function m(t){return null===t||-5===t||-4===t||-3===t?function(t){return null===t?a(t):(e.exit("tableRow"),e.exit("tableHead"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.check(i,a,n(e,f,"linePrefix",4)))}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),d):(r&&(r=void 0,c++),124===t?u(t):(e.enter("temporaryTableCellContent"),g(t)))}function d(t){return-2===t||-1===t||32===t?(e.consume(t),d):(e.exit("whitespace"),m(t))}function g(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),m(t)):(e.consume(t),92===t?p:g)}function p(t){return 92===t||124===t?(e.consume(t),g):g(t)}function f(t){return null===t||t<0||32===t?a(t):(e.enter("tableDelimiterRow"),E(t))}function E(t){return null===t||-5===t||-4===t||-3===t?x(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),h):45===t?(e.enter("tableDelimiterFiller"),e.consume(t),s=!0,o.push(null),b):58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),o.push("left"),k):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),E):a(t)}function h(t){return-2===t||-1===t||32===t?(e.consume(t),h):(e.exit("whitespace"),E(t))}function b(t){return 45===t?(e.consume(t),b):(e.exit("tableDelimiterFiller"),58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),o[o.length-1]="left"===o[o.length-1]?"center":"right",v):E(t))}function k(t){return 45===t?(e.enter("tableDelimiterFiller"),e.consume(t),s=!0,b):a(t)}function v(t){return null===t||-5===t||-4===t||-3===t?x(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),h):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),E):a(t)}function x(t){return e.exit("tableDelimiterRow"),s&&c===o.length?null===t?y(t):e.check(l,y,M)(t):a(t)}function y(a){return e.exit("table"),t(a)}function M(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),n(e,C,"linePrefix",4)}function C(t){return e.enter("tableBody"),j(t)}function j(t){return e.enter("tableRow"),124===t?O(t):(e.enter("temporaryTableCellContent"),P(t))}function O(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),w}function w(t){return null===t||-5===t||-4===t||-3===t?function(t){return e.exit("tableRow"),null===t?T(t):e.check(l,T,S)(t)}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),F):124===t?O(t):(e.enter("temporaryTableCellContent"),P(t))}function F(t){return-2===t||-1===t||32===t?(e.consume(t),F):(e.exit("whitespace"),w(t))}function P(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),w(t)):(e.consume(t),92===t?I:P)}function I(t){return 92===t||124===t?(e.consume(t),P):P(t)}function T(t){return e.exit("tableBody"),y(t)}function S(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),n(e,j,"linePrefix",4)}},resolve:function(e,t){for(var a,n,i,l,r,s,o,c,u,m,d=e.length,g=-1;++g<d;)a=e[g][1],l&&("temporaryTableCellContent"===a.type&&(c=c||g,u=g),"tableCellDivider"!==a.type&&"tableRow"!==a.type||!u||(o={type:"chunkText",start:(s={type:"tableContent",start:e[c][1].start,end:e[u][1].end}).start,end:s.end,contentType:"text"},e.splice(c,u-c+1,["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t]),g-=u-c-3,d=e.length,c=void 0,u=void 0)),"exit"===e[g][0]&&m&&m+1<g&&("tableCellDivider"===a.type||"tableRow"===a.type&&(m+3<g||"whitespace"!==e[m][1].type))&&(r={type:i?"tableDelimiter":n?"tableHeader":"tableData",start:e[m][1].start,end:e[g][1].end},e.splice(g+("tableCellDivider"===a.type?1:0),0,["exit",r,t]),e.splice(m,0,["enter",r,t]),g+=2,d=e.length,m=g+1),"tableRow"===a.type&&(l="enter"===e[g][0])&&(m=g+1),"tableDelimiterRow"===a.type&&(i="enter"===e[g][0])&&(m=g+1),"tableHead"===a.type&&(n="enter"===e[g][0]);return e},interruptible:!0}};var n=a(95),i={tokenize:function(e,t,a){return function(t){return 45!==t?a(t):(e.enter("setextUnderline"),n(t))};function n(t){return 45===t?(e.consume(t),n):i(t)}function i(n){return-2===n||-1===n||32===n?(e.consume(n),i):null===n||-5===n||-4===n||-3===n?t(n):a(n)}},partial:!0},l={tokenize:function(e,t,a){var n=0;return function(t){return e.enter("check"),e.consume(t),i};function i(l){return-1===l||32===l?(e.consume(l),4==++n?t:i):null===l||l<0?t(l):a(l)}},partial:!0}},function(e,t,a){e.exports=a(329)},function(e,t,a){var n=a(102),i=a(95),l=a(118),r={tokenize:function(e,t,a){var n=this;return function(t){return 91===t&&null===n.previous&&n._gfmTasklistFirstContentOfListItem?(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i):a(t)};function i(t){return-2===t||32===t?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),l):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),l):a(t)}function l(n){return 93===n?(e.enter("taskListCheckMarker"),e.consume(n),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:s},t,a)):a(n)}}};function s(e,t,a){var r=this;return i(e,(function(e){return l(r.events,"whitespace")&&null!==e&&!n(e)?t(e):a(e)}),"whitespace")}t.text={91:r}},function(e,t,a){var n=a(331),i=a(337),l=a(338),r=a(339),s={}.hasOwnProperty;function o(e,t){var a,n,i;for(a in t)n=s.call(e,a)?e[a]:e[a]={},i=t[a],"canContainEols"===a||"transforms"===a?e[a]=[].concat(n,i):Object.assign(n,i)}e.exports=function(e){for(var t={transforms:[],canContainEols:[]},a=e.length,n=-1;++n<a;)o(t,e[n]);return t}([n,i,l,r])},function(e,t,a){var n=a(332),i=a(333),l=a(146),r=a(147);function s(e){this.config.enter.autolinkProtocol.call(this,e)}function o(e,t,a,i,l){var r,s,o="";return!!u(l)&&(/^w/i.test(t)&&(a=t+a,t="",o="http://"),!!function(e){var t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}(a)&&!!(r=function(e){var t,a,i,l=/[!"&'),.:;<>?\]}]+$/.exec(e);if(l)for(e=e.slice(0,l.index),t=(l=l[0]).indexOf(")"),a=n(e,"("),i=n(e,")");-1!==t&&a>i;)e+=l.slice(0,t+1),t=(l=l.slice(t+1)).indexOf(")"),i++;return[e,l]}(a+i))[0]&&(s={type:"link",title:null,url:o+t+r[0],children:[{type:"text",value:t+r[0]}]},r[1]&&(s=[s,{type:"text",value:r[1]}]),s))}function c(e,t,a,n){return!(!u(n,!0)||/[_-]$/.test(a))&&{type:"link",title:null,url:"mailto:"+t+"@"+a,children:[{type:"text",value:t+"@"+a}]}}function u(e,t){var a=e.input.charCodeAt(e.index-1);return(a!=a||r(a)||l(a))&&(!t||47!==a)}t.transforms=[function(e){i(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/i,o],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/,c]],{ignore:["link","linkReference"]})}],t.enter={literalAutolink:function(e){this.enter({type:"link",title:null,url:"",children:[]},e)},literalAutolinkEmail:s,literalAutolinkHttp:s,literalAutolinkWww:s},t.exit={literalAutolink:function(e){this.exit(e)},literalAutolinkEmail:function(e){this.config.exit.autolinkEmail.call(this,e)},literalAutolinkHttp:function(e){this.config.exit.autolinkProtocol.call(this,e)},literalAutolinkWww:function(e){this.config.exit.data.call(this,e),this.stack[this.stack.length-1].url="http://"+this.sliceSerialize(e)}}},function(e,t,a){e.exports=a(36)(3492)},function(e,t,a){"use strict";e.exports=function(e,t,a,n){var i,l;return"string"==typeof t||t&&"function"==typeof t.exec?l=[[t,a]]:(l=t,n=a),s(e,i=n||{},function e(t){var a=t[0];return function(n,l){var o,c,u,m,d=a[0],g=a[1],p=[],f=0,E=l.children.indexOf(n);for(d.lastIndex=0,c=d.exec(n.value);c&&(o=c.index,!1!==(m=g.apply(null,[].concat(c,{index:c.index,input:c.input})))&&(f!==o&&p.push({type:"text",value:n.value.slice(f,o)}),"string"==typeof m&&m.length>0&&(m={type:"text",value:m}),m&&(p=[].concat(p,m)),f=o+c[0].length),d.global);)c=d.exec(n.value);if(void 0===o?(p=[n],E--):(f<n.value.length&&p.push({type:"text",value:n.value.slice(f)}),p.unshift(E,1),r.apply(l.children,p)),t.length>1)for(u=e(t.slice(1)),o=-1;++o<p.length;)"text"===(n=p[o]).type?u(n,l):s(n,i,u);return E+p.length+1}}(function(e){var t,a,n=[];if("object"!=typeof e)throw new Error("Expected array or object as schema");if("length"in e)for(a=-1;++a<e.length;)n.push([o(e[a][0]),c(e[a][1])]);else for(t in e)n.push([o(t),c(e[t])]);return n}(l))),e};var n=a(334),i=a(335),l=a(336),r=[].splice;function s(e,t,a){var l=i(t.ignore||[]);return n(e,"text",(function(e,t){for(var n,i,r=-1;++r<t.length;){if(n=t[r],l(n,i?i.children.indexOf(n):void 0,i))return;i=n}return a(e,i)})),[]}function o(e){return"string"==typeof e?new RegExp(l(e),"g"):e}function c(e){return"function"==typeof e?e:function(){return e}}},function(e,t,a){e.exports=a(36)(3472)},function(e,t,a){e.exports=a(36)(1626)},function(e,t,a){"use strict";e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},function(e,t){t.canContainEols=["delete"],t.enter={strikethrough:function(e){this.enter({type:"delete",children:[]},e)}},t.exit={strikethrough:function(e){this.exit(e)}}},function(e,t){function a(e){this.exit(e)}function n(e){this.enter({type:"tableCell",children:[]},e)}function i(e,t){return"|"===t?t:e}t.enter={table:function(e){this.enter({type:"table",align:e._align,children:[]},e),this.setData("inTable",!0)},tableData:n,tableHeader:n,tableRow:function(e){this.enter({type:"tableRow",children:[]},e)}},t.exit={codeText:function(e){var t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,i)),this.stack[this.stack.length-1].value=t,this.exit(e)},table:function(e){this.exit(e),this.setData("inTable")},tableData:a,tableHeader:a,tableRow:a}},function(e,t){function a(e){this.stack[this.stack.length-2].checked="taskListCheckValueChecked"===e.type}t.exit={taskListCheckValueChecked:a,taskListCheckValueUnchecked:a,paragraph:function(e){var t,a=this.stack[this.stack.length-2],n=this.stack[this.stack.length-1],i=a.children,l=n.children[0],r=-1;if(a&&"listItem"===a.type&&"boolean"==typeof a.checked&&l&&"text"===l.type){for(;++r<i.length;)if("paragraph"===i[r].type){t=i[r];break}t===n&&(l.value=l.value.slice(1),0===l.value.length?n.children.shift():(l.position.start.column++,l.position.start.offset++,n.position.start=Object.assign({},l.position.start)))}this.exit(e)}}},function(e,t,a){var n=a(341),i=a(342),l=a(343),r=a(346),s=a(352);e.exports=function(e){var t=s({handlers:{},join:[],unsafe:[],options:{}},{extensions:[n,i,l(e),r]});return Object.assign(t.options,{handlers:t.handlers,join:t.join,unsafe:t.unsafe})}},function(e,t){var a="phrasing",n=["autolink","link","image","label"];t.unsafe=[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:a,notInConstruct:n},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:a,notInConstruct:n},{character:":",before:"[ps]",after:"\\/",inConstruct:a,notInConstruct:n}]},function(e,t,a){var n=a(186);function i(e,t,a){var i=a.enter("emphasis"),l=n(e,a,{before:"~",after:"~"});return i(),"~~"+l+"~~"}t.unsafe=[{character:"~",inConstruct:"phrasing"}],t.handlers={delete:i},i.peek=function(){return"~"}},function(e,t,a){var n=a(186),i=a(344),l=a(345);e.exports=function(e){var t=e||{},a=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,o=a?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:function(e,t,a){return u(function(e,t){for(var a=e.children,n=-1,i=a.length,l=[],r=t.enter("table");++n<i;)l[n]=m(a[n],t);return r(),l}(e,a),e.align)},tableRow:function(e,t,a){var n=u([m(e,a)]);return n.slice(0,n.indexOf("\n"))},tableCell:c,inlineCode:function(e,t,a){var n=i(e,t,a);return-1!==a.stack.indexOf("tableCell")&&(n=n.replace(/\|/g,"\\$&")),n}}};function c(e,t,a){var i=a.enter("tableCell"),l=n(e,a,{before:o,after:o});return i(),l}function u(e,t){return l(e,{align:t,alignDelimiters:r,padding:a,stringLength:s})}function m(e,t){for(var a=e.children,n=-1,i=a.length,l=[],r=t.enter("tableRow");++n<i;)l[n]=c(a[n],0,t);return r(),l}}},function(e,t){function a(e){for(var t=e.value||"",a="`",n="";new RegExp("(^|[^`])"+a+"([^`]|$)").test(t);)a+="`";return/[^ \r\n]/.test(t)&&(/[ \r\n`]/.test(t.charAt(0))||/[ \r\n`]/.test(t.charAt(t.length-1)))&&(n=" "),a+n+t+n+a}e.exports=a,a.peek=function(){return"`"}},function(e,t,a){"use strict";var n=a(150);e.exports=function(e,t){for(var a,u,m,d,g,p,f,E,h,b,k,v,x=t||{},y=!1!==x.padding,M=!1!==x.delimiterStart,C=!1!==x.delimiterEnd,j=(x.align||[]).concat(),O=!1!==x.alignDelimiters,w=[],F=x.stringLength||o,P=-1,I=e.length,T=[],S=[],L=[],_=[],A=[],N=0;++P<I;){for(u=-1,L=[],_=[],(m=(a=e[P]).length)>N&&(N=m);++u<m;)p=null==(v=a[u])?"":String(v),!0===O&&(g=F(p),_[u]=g,(void 0===(d=A[u])||g>d)&&(A[u]=g)),L.push(p);T[P]=L,S[P]=_}if(u=-1,m=N,"object"==typeof j&&"length"in j)for(;++u<m;)w[u]=c(j[u]);else for(k=c(j);++u<m;)w[u]=k;for(u=-1,m=N,L=[],_=[];++u<m;)h="",b="",108===(k=w[u])?h=r:k===s?b=r:99===k&&(h=r,b=r),g=O?Math.max(1,A[u]-h.length-b.length):1,p=h+n("-",g)+b,!0===O&&((g=h.length+g+b.length)>A[u]&&(A[u]=g),_[u]=g),L[u]=p;for(T.splice(1,0,L),S.splice(1,0,_),P=-1,I=T.length,f=[];++P<I;){for(L=T[P],_=S[P],u=-1,m=N,E=[];++u<m;)p=L[u]||"",h="",b="",!0===O&&(g=A[u]-(_[u]||0),(k=w[u])===s?h=n(l,g):99===k?g%2==0?b=h=n(l,g/2):(h=n(l,g/2+.5),b=n(l,g/2-.5)):b=n(l,g)),!0===M&&0===u&&E.push("|"),!0!==y||!1===O&&""===p||!0!==M&&0===u||E.push(l),!0===O&&E.push(h),E.push(p),!0===O&&E.push(b),!0===y&&E.push(l),!0!==C&&u===m-1||E.push("|");E=E.join(""),!1===C&&(E=E.replace(i,"")),f.push(E)}return f.join("\n")};var i=/ +$/,l=" ",r=":",s=114;function o(e){return e.length}function c(e){var t="string"==typeof e?e.charCodeAt(0):0;return 76===t||108===t?108:82===t||t===s?s:67===t||99===t?99:0}},function(e,t,a){var n=a(347);t.unsafe=[{atBreak:!0,character:"-",after:"[:|-]"}],t.handlers={listItem:function(e,t,a){var i=n(e,t,a),l=e.children[0];return"boolean"==typeof e.checked&&l&&"paragraph"===l.type&&(i=i.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(t){return t+"["+(e.checked?"x":" ")+"] "}))),i}}},function(e,t,a){e.exports=function(e,t,a){var o,c,u,m=i(a),d=l(a);return t&&t.ordered&&(m=(t.start>-1?t.start:1)+(!1===a.options.incrementListMarker?0:t.children.indexOf(e))+"."),o=m.length+1,("tab"===d||"mixed"===d&&(t&&t.spread||e.spread))&&(o=4*Math.ceil(o/4)),u=a.enter("listItem"),c=s(r(e,a),(function(e,t,a){return t?(a?"":n(" ",o))+e:(a?m:m+n(" ",o-m.length))+e})),u(),c};var n=a(150),i=a(348),l=a(349),r=a(350),s=a(351)},function(e,t){e.exports=function(e){var t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}},function(e,t){e.exports=function(e){var t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}},function(e,t,a){e.exports=function(e,t){for(var a,i=e.children||[],l=[],r=-1;++r<i.length;)a=i[r],l.push(t.handle(a,e,t,{before:"\n",after:"\n"})),r+1<i.length&&l.push(s(a,i[r+1]));return l.join("");function s(a,i){for(var l,r=-1;++r<t.join.length&&!0!==(l=t.join[r](a,i,e,t))&&1!==l;){if("number"==typeof l)return n("\n",1+Number(l));if(!1===l)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}};var n=a(150)},function(e,t){e.exports=function(e,t){for(var n,i=[],l=0,r=0;n=a.exec(e);)s(e.slice(l,n.index)),i.push(n[0]),l=n.index+n[0].length,r++;return s(e.slice(l)),i.join("");function s(e){i.push(t(e,r,!e))}};var a=/\r?\n|\r/g},function(e,t){e.exports=function e(t,a){var n,i=-1;if(a.extensions)for(;++i<a.extensions.length;)e(t,a.extensions[i]);for(n in a)"extensions"===n||("unsafe"===n||"join"===n?t[n]=t[n].concat(a[n]||[]):"handlers"===n?t[n]=Object.assign(t[n],a[n]||{}):t.options[n]=a[n]);return t}},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(354);case"v8light":return a(356)}},function(e,t,a){var n=a(187),i=a(355);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,a){(t=a(188)(!1)).push([e.i,".fleet__epm__shiftNavTabs{margin-left:184px}",""]),e.exports=t},function(e,t,a){var n=a(187),i=a(357);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,a){(t=a(188)(!1)).push([e.i,".fleet__epm__shiftNavTabs{margin-left:184px}",""]),e.exports=t},,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"ProtectedRoute",(function(){return Jt})),a.d(t,"renderApp",(function(){return Zt})),a.d(t,"teardownIntegrations",(function(){return ea}));var n=a(0),i=a.n(n),l=a(77),r=a.n(l),s=a(16),o=a(12),c=a(6),u=a(54),m=a.n(u),d=a(23),g=a(78),p=a(84),f=a(91),E=a(92),h=a(97),b=a(46),k=a(1),v=a(121),x=a(8),y=a(75),M=a.n(y);const C=M()(c.EuiBadge).withConfig({displayName:"TabBadge",componentId:"sc-vjua6b-0"})(["padding:0 1px;margin-left:4px;"]),j=Object(n.memo)((({title:e,hasWarning:t})=>i.a.createElement(i.a.Fragment,null,e,t&&i.a.createElement(C,{color:"warning",iconType:"alert"})))),O=Object(n.memo)((({section:e,children:t,sectionsWithWarning:a})=>{const{getHref:n}=Object(o.gc)(),l=[{name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.appNavigation.integrationsAllLinkText",defaultMessage:"Browse integrations"}),section:"browse",href:n("integrations_all")},{name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.appNavigation.integrationsInstalledLinkText",defaultMessage:"Installed integrations"}),section:"manage",href:n("integrations_installed")}];return i.a.createElement(v.a,{leftColumn:i.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"none",justifyContent:"center"},i.a.createElement(c.EuiText,null,i.a.createElement("h1",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrationsHeaderTitle",defaultMessage:"Integrations"}))),i.a.createElement(c.EuiSpacer,{size:"s"}),i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiText,{size:"s",color:"subdued"},i.a.createElement("p",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.pageSubtitle",defaultMessage:"Choose an integration to start collecting and analyzing your data."}))))),tabs:l.map((t=>({name:i.a.createElement(j,{title:t.name,hasWarning:!(null==a||!a.includes(t.section))}),href:t.href,isSelected:e===t.section})))},t)}));var w=a(106),F=a(26),P=a.n(F),I=a(4),T=a(93),S=a.n(T),L=(a(86),a(98)),_=a(231),A=a.n(_),N=a(82);const z=function(e,t,a){const n=e[a];if(!n)return t;const[i,l]=A()(t,(e=>n.includes(e.name)));return[...n.map((e=>i.find((({name:t})=>t===e)))).filter((e=>e)),...l]}.bind(null,N.FEATURED_INTEGRATIONS_BY_CATEGORY);var D=a(87),R=a(131);const B=M()(c.EuiCard).withConfig({displayName:"Card",componentId:"sc-1xgrkpq-0"})(["min-height:127px;"]);function U({description:e,name:t,title:a,version:n,icons:l,integration:r,url:s,release:o,id:u,fromIntegrations:m,isUnverified:d,showLabels:g=!0}){let p=null;o&&"ga"!==o&&(p=i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiSpacer,{size:"xs"}),i.a.createElement("span",null,i.a.createElement(L.i,{release:o}))));let f=null;d&&g&&(f=i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiSpacer,{size:"xs"}),i.a.createElement("span",null,i.a.createElement(c.EuiBadge,{color:"warning"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.packageCard.unverifiedLabel",defaultMessage:"Unverified"})))));const{application:b}=Object(E.S)(),k=Object(E.J)(t),v=`integration-card:${u}`;return i.a.createElement(L.m,{packageKey:t,isTourVisible:k,tourType:"integrationCard",tourOffset:10},i.a.createElement(D.TrackApplicationView,{viewId:v},i.a.createElement(B,{"data-test-subj":v,layout:"horizontal",title:a||"",titleSize:"xs",description:e,hasBorder:!0,icon:i.a.createElement(R.a,{icons:l,packageName:t,integrationName:r,version:n,size:"xl"}),onClick:()=>{s.startsWith(h.c)?b.navigateToApp(h.d,{path:s.slice(h.c.length),state:{fromIntegrations:m}}):s.startsWith("http")||s.startsWith("https")?window.open(s,"_blank"):b.navigateToUrl(s)}},i.a.createElement(c.EuiFlexGroup,{gutterSize:"xs"},f,p))))}const $=({isLoading:e,controls:t,title:a,list:l,initialSearch:r,onSearchChange:s,selectedCategory:o,setSelectedCategory:u,categories:m,showMissingIntegrationMessage:d=!1,callout:g,showCardLabels:p=!0})=>{var f;const[h,b]=Object(n.useState)(r||""),k=Object(E.M)(l),v=Object(n.useRef)(null),[x,y]=Object(n.useState)(!1),[M]=Object(n.useState)(window.scrollY),{euiTheme:C}=Object(c.useEuiTheme)();Object(n.useEffect)((()=>{const e=v.current,t=()=>{e&&y((null==e?void 0:e.getBoundingClientRect().top)<110)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)}),[M,x]);const j=o?null===(f=m.find((e=>e.id===o)))||void 0===f?void 0:f.title:void 0,O=Object(n.useMemo)((()=>{if(e)return[];const t=h?l.filter((e=>k.current.search(h).map((e=>e[E.h])).includes(e[E.h]))):l;return z(t,o)}),[e,l,k,h,o]),w=i.a.createElement(H,{title:a,controls:t,sticky:x});let F;return F=e||!k.current?i.a.createElement(L.k,null):i.a.createElement(G,{list:O,showMissingIntegrationMessage:d,showCardLabels:p}),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:v},i.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"xl","data-test-subj":"epmList.integrationCards"},i.a.createElement(c.EuiFlexItem,{grow:1,className:x?"kbnStickyMenu":""},w),i.a.createElement(c.EuiFlexItem,{grow:5},i.a.createElement(c.EuiFieldSearch,{"data-test-subj":"epmList.searchBar",placeholder:I.i18n.translate("xpack.fleet.epmList.searchPackagesPlaceholder",{defaultMessage:"Search for integrations"}),value:h,onChange:e=>(e=>{const t=e.target.value;b(t),s(t)})(e),isClearable:!0,incremental:!0,fullWidth:!0,prepend:j?i.a.createElement(c.EuiText,{"data-test-subj":"epmList.categoryBadge",size:"xs",style:{display:"flex",alignItems:"center",fontWeight:C.font.weight.bold,backgroundColor:C.colors.lightestShade}},i.a.createElement(c.EuiScreenReaderOnly,null,i.a.createElement("span",null,"Searching category: ")),j,i.a.createElement("button",{"data-test-subj":"epmList.categoryBadge.closeBtn",onClick:()=>{u("")},"aria-label":"Remove filter",style:{padding:C.size.xs,paddingTop:"2px"}},i.a.createElement(c.EuiIcon,{type:"cross",color:"text",size:"s",style:{width:"auto",padding:0,backgroundColor:C.colors.lightestShade}}))):void 0}),g?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiSpacer,null),g):null,i.a.createElement(c.EuiSpacer,null),F,d&&i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiSpacer,null),i.a.createElement(V,{resetQuery:()=>{b("")},setSelectedCategory:u}))))))};function H({controls:e,title:t,sticky:a}){let n;return t&&(n=i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiTitle,{size:"s"},i.a.createElement("h2",null,t)),i.a.createElement(c.EuiSpacer,{size:"l"}))),i.a.createElement(c.EuiFlexGroup,{direction:"column",className:a?"kbnStickyMenu":"",gutterSize:"none"},n,e)}function G({list:e,showMissingIntegrationMessage:t=!1,showCardLabels:a=!1}){return i.a.createElement(c.EuiFlexGrid,{gutterSize:"l",columns:3},e.length?e.map((e=>i.a.createElement(W,{key:e.id},i.a.createElement(U,S()({},e,{showLabels:a}))))):i.a.createElement(c.EuiFlexItem,{grow:3},i.a.createElement(c.EuiText,null,i.a.createElement("p",null,t?i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epmList.missingIntegrationPlaceholder",defaultMessage:"We didn't find any integrations matching your search term. Please try another keyword or browse using the categories on the left."}):i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epmList.noPackagesFoundPlaceholder",defaultMessage:"No integrations found"})))))}function V({resetQuery:e,setSelectedCategory:t}){const a=Object(n.useCallback)((()=>{e(),t("custom")}),[e,t]);return i.a.createElement(c.EuiText,{size:"s",color:"subdued"},i.a.createElement("p",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.missing",defaultMessage:"Don't see an integration? Collect any logs or metrics using our {customInputsLink}. Request new integrations in our {forumLink}.",values:{customInputsLink:i.a.createElement(c.EuiLink,{onClick:a},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.customInputsLink",defaultMessage:"custom inputs"})),forumLink:i.a.createElement(c.EuiLink,{href:"https://discuss.elastic.co/tag/integrations",external:!0,target:"_blank"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.discussForumLink",defaultMessage:"forum"}))}})))}var W=M()(c.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-9u85ob-0"})(["& > .euiPopover,& > .euiPopover > .euiPopover__anchor,& > .euiPopover > .euiPopover__anchor > .euiCard{height:100%;}"]);const q="updates_available",K={id:"",title:I.i18n.translate("xpack.fleet.epmList.allPackagesFilterLinkText",{defaultMessage:"All categories"})},Y={id:"",title:I.i18n.translate("xpack.fleet.epmList.allPackagesInstalledFilterLinkText",{defaultMessage:"All installed"})},X={id:q,title:I.i18n.translate("xpack.fleet.epmList.updatesAvailableFilterLinkText",{defaultMessage:"Updates available"})};function J({isLoading:e,categories:t,selectedCategory:a,onCategoryChange:n}){return i.a.createElement(c.EuiFacetGroup,null,e?i.a.createElement(L.k,null):t.map((e=>i.a.createElement(c.EuiFacetButton,{"data-test-subj":`epmList.categories.${e.id}`,isSelected:e.id===a,key:e.id,id:e.id,quantity:e.count,onClick:()=>n(e)},e.title))))}const Q=()=>{const{docLinks:e}=Object(E.S)();return i.a.createElement(c.EuiLink,{href:e.links.fleet.learnMoreBlog,target:"_blank"},I.i18n.translate("xpack.fleet.epmList.availableCalloutBlogText",{defaultMessage:"announcement blog post"}))},Z=()=>i.a.createElement(c.EuiCallOut,{title:I.i18n.translate("xpack.fleet.epmList.availableCalloutTitle",{defaultMessage:"Only installed Elastic Agent Integrations are displayed."}),iconType:"iInCircle"},i.a.createElement("p",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epmList.availableCalloutIntroText",defaultMessage:"To learn more about integrations and the Elastic Agent, read our {link}",values:{link:i.a.createElement(Q,null)}}))),ee=()=>{const{docLinks:e}=Object(E.S)();return i.a.createElement(c.EuiCallOut,{title:I.i18n.translate("xpack.fleet.epmList.verificationWarningCalloutTitle",{defaultMessage:"Integrations not verified"}),iconType:"alert",color:"warning"},i.a.createElement("p",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epmList.verificationWarningCalloutIntroText",defaultMessage:"One or more of the installed integrations contain an unsigned package of unknown authenticity. Learn more about {learnMoreLink}.",values:{learnMoreLink:i.a.createElement(c.EuiLink,{target:"_blank",external:!0,href:e.links.fleet.packageSignatures},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.learnMoreLink",defaultMessage:"package signatures"}))}})))},te=({installedPackages:e,isLoading:t})=>{Object(E.r)("integrations_installed");const{packageVerificationKeyId:a}=Object(E.v)(),{getHref:l,getAbsolutePath:r}=Object(E.K)(),{selectedCategory:o,searchParam:c}=Ee(Object(s.useParams)(),Object(s.useLocation)().search),{http:u}=Object(E.S)(),m=u.basePath.prepend,d=Object(s.useHistory)();function g(e){const t=h.k.integrations_installed({category:e,searchTerm:c})[1];d.push(t)}const p=Object(n.useMemo)((()=>e.filter((e=>"savedObject"in e&&P()(e.savedObject.attributes.version,e.version)))),[e]),f=Object(n.useMemo)((()=>[{...Y,count:e.length},{...X,count:p.length}]),[e.length,p.length]);if(!he(o,f))return d.replace(h.k.integrations_installed({category:"",searchTerm:c})[1]),null;const b=i.a.createElement(J,{categories:f,selectedCategory:o,onCategoryChange:({id:e})=>g(e)}),k=(o===q?p:e).map((e=>be({getAbsolutePath:r,getHref:l,addBasePath:m,item:e,selectedCategory:o||"installed",packageVerificationKeyId:a}))),v=k.some((e=>e.isUnverified))?ee:Z,x=o===q||t?null:i.a.createElement(v,null);return i.a.createElement($,{isLoading:t,controls:b,callout:x,categories:f,selectedCategory:o,setSelectedCategory:g,onSearchChange:function(e){d.replace(h.k.integrations_installed({searchTerm:e,selectedCategory:o})[1])},initialSearch:c,list:k})};var ae=a(11),ne=a.n(ae),ie=a(5),le=a(83);const re=i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.recommendedTooltip",defaultMessage:"We recommend Elastic Agent integrations when they are generally available."}),se=M()(c.EuiFlexItem).withConfig({displayName:"Item",componentId:"sc-3a25e0-0"})(["padding-left:",";"],(e=>e.theme.eui.euiSizeXS)),oe=M()(c.EuiSwitch).withConfig({displayName:"EuiSwitchNoWrap",componentId:"sc-3a25e0-1"})(["white-space:nowrap;"]),ce=[{type:"recommended",label:i.a.createElement(c.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},i.a.createElement(c.EuiFlexItem,{grow:!1},I.i18n.translate("xpack.fleet.epm.integrationPreference.recommendedLabel",{defaultMessage:"Recommended"})),i.a.createElement(se,null,i.a.createElement(c.EuiIconTip,{content:re})))},{type:"agent",label:I.i18n.translate("xpack.fleet.epm.integrationPreference.elasticAgentLabel",{defaultMessage:"Elastic Agent only"})},{type:"beats",label:I.i18n.translate("xpack.fleet.epm.integrationPreference.beatsLabel",{defaultMessage:"Beats only"})}],ue=({initialType:e,onChange:t,onPrereleaseEnabledChange:a})=>{const[l,r]=i.a.useState(e),{docLinks:s}=Object(E.S)(),[o,u]=i.a.useState(void 0),{data:m,error:d}=Object(E.G)();Object(n.useEffect)((()=>{const e=Boolean(null==m?void 0:m.item.prerelease_integrations_enabled);null!=m&&m.item?u(e):d&&u(!1)}),[null==m?void 0:m.item,d]),Object(n.useEffect)((()=>{void 0!==o&&a(o)}),[a,o]);const g=Object(n.useCallback)((async e=>{const t=await Object(E.l)({prerelease_integrations_enabled:e});if(t.error)throw t.error}),[]),p=i.a.createElement(c.EuiLink,{href:s.links.fleet.beatsAgentComparison},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.titleLink",defaultMessage:"Elastic Agent and Beats"})),f=i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.title",defaultMessage:"If an integration is available for {link}, show:",values:{link:p}}),h=ce.map((e=>({id:e.type,value:e.type,label:e.label})));return i.a.createElement(c.EuiPanel,{hasShadow:!1,paddingSize:"none"},void 0!==o&&i.a.createElement(oe,{label:"Display beta integrations",checked:o,onChange:e=>{const t=e.target.checked;u(t),g(t)}}),i.a.createElement(c.EuiSpacer,{size:"l"}),i.a.createElement(c.EuiText,{size:"s"},f),i.a.createElement(c.EuiSpacer,{size:"m"}),i.a.createElement(c.EuiForm,null,i.a.createElement(c.EuiRadioGroup,{options:h,idSelected:l,onChange:(e,a)=>{r(e),t(a)},name:"preference"})),i.a.createElement(c.EuiSpacer,{size:"m"}))},me=({statusCode:e})=>{let t,a;return 502===e?(t=I.i18n.translate("xpack.fleet.epmList.eprUnavailableBadGatewayCalloutTitle",{defaultMessage:"Kibana cannot reach the Elastic Package Registry, which provides Elastic Agent integrations\n"}),a=i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epmList.eprUnavailableCallouBdGatewaytTitleMessage",defaultMessage:"To view these integrations, configure a  {registryproxy} or host {onpremregistry}.",values:{registryproxy:i.a.createElement(de,null),onpremregistry:i.a.createElement(ge,null)}})):(t=I.i18n.translate("xpack.fleet.epmList.eprUnavailable400500CalloutTitle",{defaultMessage:"Kibana cannot connect to the Elastic Package Registry, which provides Elastic Agent integrations\n"}),a=i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epmList.eprUnavailableCallout400500TitleMessage",defaultMessage:"Ensure the {registryproxy} or {onpremregistry} is configured correctly, or try again later.",values:{registryproxy:i.a.createElement(de,null),onpremregistry:i.a.createElement(ge,null)}})),i.a.createElement(c.EuiCallOut,{title:t,iconType:"iInCircle",color:"warning"},i.a.createElement("p",null,a))};function de(){const{docLinks:e}=Object(E.S)();return i.a.createElement(c.EuiLink,{href:e.links.fleet.settingsFleetServerProxySettings,target:"_blank"},I.i18n.translate("xpack.fleet.epmList.proxyLinkSnippedText",{defaultMessage:"proxy server"}))}function ge(){const{docLinks:e}=Object(E.S)();return i.a.createElement(c.EuiLink,{href:e.links.fleet.onPremRegistry,target:"_blank"},I.i18n.translate("xpack.fleet.epmList.onPremLinkSnippetText",{defaultMessage:"your own registry"}))}function pe(e){var t;if(!Object(w.c)(e))return e.categories;const a=null===(t=e.policy_templates)||void 0===t?void 0:t.reduce(((e,t)=>Object(ie.D)(t)?e:[...e,...t.categories||[]]),e.categories||[]);return ne.a.uniq(a)}const fe=({})=>{const[e,t]=Object(n.useState)("recommended"),[a,l]=i.a.useState(void 0);Object(E.r)("integrations_all");const{http:r}=Object(E.S)(),o=r.basePath.prepend,{selectedCategory:u,searchParam:m}=Ee(Object(s.useParams)(),Object(s.useLocation)().search),[d,g]=Object(n.useState)(u),p=Object(s.useHistory)(),{getHref:f,getAbsolutePath:b}=Object(E.K)();function v(e){g(e);const t=h.k.integrations_all({category:e,searchTerm:m})[1];p.push(t)}const{data:x,isLoading:y,error:M}=Object(E.P)(a);null!=x&&x.items&&x.items.forEach((function(e){"kubernetes"===e.id&&(e.policy_templates=[])}));const C=Object(n.useMemo)((()=>((null==x?void 0:x.items)||[]).reduce(((e,t)=>{const{policy_templates:a=[],categories:n=[],...i}=t;return[...e,{...i,categories:pe(t)},...Object(w.c)(t)?a.map((e=>{const{name:t,title:a,description:l,icons:r}=e,s=Object(ie.E)(e)&&e.categories?e.categories:[],o=[...n,...s];return{...i,id:`${i.id}-${t}`,integration:t,title:a,description:l,icons:r||i.icons,categories:ne.a.uniq(o)}})):[]]}),[])),[x]),{value:j}=Object(E.F)(),{loading:O,value:F}=Object(E.x)(),P=(z="beats"===e?[]:C,D="agent"===e?[]:j||[],Object(n.useMemo)((()=>{const e=[],t=D,a=z.filter((e=>e.name!==k.x));a.forEach((a=>{const n=function(e,t,a){return"ga"===a?[]:Object(le.filterCustomIntegrations)(e,{eprPackageName:t})}(t,a.name,a.release);n.length?n.forEach((t=>{e.find((({id:e})=>e===t.id))||e.push(t)})):e.push(a)}));const n=t.filter((e=>!a.find((t=>t.name===e.eprOverlap))));return e.push(...n),e}),[z,D])),I=Object(n.useMemo)((()=>[...P,...F||[]].map((e=>be({getAbsolutePath:b,getHref:f,item:e,addBasePath:o}))).sort(((e,t)=>e.title.localeCompare(t.title)))),[o,F,b,f,P]),T=Object(n.useMemo)((()=>I.filter((e=>""===d||e.categories.includes(d)))),[I,d]),{data:S,isLoading:L,error:_}=Object(E.s)(a),A=Object(n.useMemo)((()=>{const e=L?[]:function(e,t){const a=[],n=(e,t,n)=>{const i=a.find((t=>t.id===e));i?i.count+=t:a.push({id:e,count:t,title:n})};e.forEach((e=>{n(e.id,0,e.title)})),t.forEach((e=>{e.categories.forEach((e=>{const t=N.INTEGRATION_CATEGORY_DISPLAY[e]?N.INTEGRATION_CATEGORY_DISPLAY[e]:e;n(e,1,t)}))}));const i=a.filter((e=>e.count>0));return i.sort(((e,t)=>e.id.localeCompare(t.id))),i}(S?S.items:[],I);return[{...K,count:I.length},...e||[]]}),[I,S,L]);var z,D;if(!L&&!he(u,A))return p.replace(h.k.integrations_all({category:"",searchTerm:m})[1]),null;let R,B=[i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiHorizontalRule,{margin:"m"}),i.a.createElement(ue,{initialType:e,onChange:t,onPrereleaseEnabledChange:e=>{l(e)}}))];if(A&&(B=[i.a.createElement(c.EuiFlexItem,{className:"eui-yScrollWithShadows"},i.a.createElement(J,{isLoading:L||y||O,categories:A,selectedCategory:d,onCategoryChange:({id:e})=>{v(e)}})),...B]),M||_){const e=M||_;R=i.a.createElement(me,{statusCode:null==e?void 0:e.statusCode})}return i.a.createElement($,{isLoading:y||O,controls:B,initialSearch:m,list:T,selectedCategory:d,setSelectedCategory:v,categories:A,onSearchChange:function(e){p.replace(h.k.integrations_all({searchTerm:e,category:d})[1])},showMissingIntegrationMessage:!0,callout:R,showCardLabels:!1})},Ee=(e,t)=>{const{category:a}=e;return{selectedCategory:a||"",searchParam:new URLSearchParams(t).get(h.f)||""}},he=(e,t)=>t.some((t=>t.id===e)),be=({getAbsolutePath:e,getHref:t,item:a,addBasePath:n,packageVerificationKeyId:i,selectedCategory:l})=>{let r,s=!1,o="version"in a&&a.version||"";"ui_link"===a.type?r=a.id.includes("language_client.")?n(a.uiInternalPath):a.uiExternalLink||e(a.uiInternalPath):(["updates_available","installed"].includes(null!=l?l:"")&&"savedObject"in a&&(o=a.savedObject.attributes.version||a.version,s=Object(w.e)(a,i)),r=t("integration_details_overview",{pkgkey:`${a.name}-${o}`,...a.integration?{integration:a.integration}:{}}));const c=Object(b.a)(o);return{id:`${"ui_link"===a.type?"ui_link":"epr"}:${a.id}`,description:a.description,icons:a.icons&&a.icons.length?a.icons:[],title:a.title,url:r,fromIntegrations:l,integration:"integration"in a&&a.integration||"",name:"name"in a?a.name:a.id,version:o,release:c,categories:(a.categories||[]).filter((e=>!!e)),isUnverified:s}},ke=()=>{const{data:e,isLoading:t}=Object(E.E)({prerelease:!0}),a=Object(n.useMemo)((()=>((null==e?void 0:e.response)||[]).filter((e=>e.status===k.eb.Installed))),[null==e?void 0:e.response]),l=a.some((e=>"savedObject"in e&&"unverified"===e.savedObject.attributes.verification_status))?["manage"]:[];return i.a.createElement(s.Switch,null,i.a.createElement(s.Route,{path:h.e.integrations_installed},i.a.createElement(O,{section:"manage",sectionsWithWarning:l},i.a.createElement(te,{installedPackages:a,isLoading:t}))),i.a.createElement(s.Route,{path:h.e.integrations_all},i.a.createElement(O,{section:"browse",sectionsWithWarning:l},i.a.createElement(fe,null))))};var ve=a(37);const xe=["apm","cloud_security_posture","dga","fleet_server","osquery_manager","problemchild","security_detection_engine","synthetics"];function ye(e){const{userCanInstallPackages:t,missingSecurityConfiguration:a,packageName:n,href:l,onClick:r}=e,s=t?void 0:{content:a?i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.addPackagePolicyButtonSecurityRequiredTooltip",defaultMessage:"To add Elastic Agent Integrations, you must have security enabled and have the All privilege for Fleet. Contact your administrator."}):i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.addPackagePolicyButtonPrivilegesRequiredTooltip",defaultMessage:"Elastic Agent Integrations require the All privilege for Fleet and All privilege for Integrations. Contact your administrator."})};return i.a.createElement(L.f,{fill:!0,isDisabled:!t,iconType:"plusInCircle",href:l,onClick:e=>r(e),"data-test-subj":"addIntegrationPolicyButton",tooltip:s},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.addPackagePolicyButtonText",defaultMessage:"Add {packageName}",values:{packageName:n}}))}const Me=({size:e="m"})=>i.a.createElement(c.EuiIconTip,{"aria-label":I.i18n.translate("xpack.fleet.epm.updateAvailableTooltip",{defaultMessage:"Update available"}),size:e,type:"alert",color:"warning",content:I.i18n.translate("xpack.fleet.epm.updateAvailableTooltip",{defaultMessage:"Update available"})}),Ce=Object(n.memo)((({packageName:e})=>{var t;const{data:a}=Object(E.D)(e);return i.a.createElement(i.a.Fragment,null,null!==(t=null==a?void 0:a.response.agent_policy_count)&&void 0!==t?t:0)})),je=M()(c.EuiPanel).withConfig({displayName:"Panel",componentId:"sc-536qps-0"})(["padding:",";width:","px;svg,img{height:","px;width:","px;}.euiFlexItem{height:","px;justify-content:center;}"],(e=>e.theme.eui.euiSizeXL),(e=>6*parseFloat(e.theme.eui.euiSize)+2*parseFloat(e.theme.eui.euiSizeXL)),(e=>6*parseFloat(e.theme.eui.euiSize)),(e=>6*parseFloat(e.theme.eui.euiSize)),(e=>6*parseFloat(e.theme.eui.euiSize)));function Oe({packageName:e,integrationName:t,version:a,icons:n}){const l=Object(E.N)({packageName:e,integrationName:t,version:a,icons:n});return i.a.createElement(je,null,i.a.createElement(c.EuiIcon,{type:l,size:"original"}))}function we(){return i.a.createElement(je,null,i.a.createElement(L.k,null))}const Fe=({checked:e,disabled:t=!1,onChange:a})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiSwitch,{label:I.i18n.translate("xpack.fleet.integrations.settings.keepIntegrationPoliciesUpToDateLabel",{defaultMessage:"Keep integration policies up to date automatically"}),checked:e,onChange:a,disabled:t}),i.a.createElement(c.EuiSpacer,{size:"s"}),i.a.createElement(c.EuiText,{color:"subdued",size:"xs"},i.a.createElement(c.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiIcon,{type:"iInCircle"})),i.a.createElement(c.EuiFlexItem,{grow:!1},t?i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.keepIntegrationPoliciesUpToDateDisabledDescription",defaultMessage:"This integration requires Fleet to automatically upgrade its integration policies"}):i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.keepIntegrationPoliciesUpToDateDescription",defaultMessage:"When enabled, Fleet will attempt to upgrade and deploy integration policies automatically"}))))),Pe=[ve.c.dashboard,ve.c.search,ve.c.visualization];var Ie=a(55);const Te=({savedObjects:e,type:t})=>{const{http:a}=Object(E.S)(),n=t===ve.c.dashboard;return i.a.createElement(c.EuiAccordion,{initialIsOpen:n,buttonContent:i.a.createElement(c.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"s",responsive:!1},i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiText,{size:"m"},i.a.createElement("h3",null,Ie.a[t]))),i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiNotificationBadge,{color:"subdued",size:"m"},i.a.createElement("h3",null,e.length)))),id:t},i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiSpacer,{size:"m"}),i.a.createElement(c.EuiSplitPanel.Outer,{hasBorder:!0,hasShadow:!1},e.map((({id:n,attributes:{title:l,description:r}},s)=>{if("view"===t)return;const o=Object(E.g)({http:a,id:n,type:t});return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiSplitPanel.Inner,{grow:!1,key:s},i.a.createElement(c.EuiText,{size:"m"},i.a.createElement("p",null,o?i.a.createElement(c.EuiLink,{href:o},l):l)),r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiSpacer,{size:"s"}),i.a.createElement(c.EuiText,{size:"s",color:"subdued"},i.a.createElement("p",null,r)))),s+1<e.length&&i.a.createElement(c.EuiHorizontalRule,{margin:"none"}))})))))},Se=new Set(Pe),Le=({packageInfo:e})=>{const{name:t,version:a}=e,l=`${t}-${a}`,{spaces:r,savedObjects:{client:o}}=Object(E.S)(),u=Object(E.T)(e.name,"package-detail-assets"),{getPath:m}=Object(E.K)(),d=Object(E.B)()(e.name),[g,p]=Object(n.useState)(!0),[f,h]=Object(n.useState)(),[b,k]=Object(n.useState)(),[v,y]=Object(n.useState)(!0),[M,C]=Object(n.useState)(!1);if(Object(n.useEffect)((()=>{(async()=>{if("savedObject"in e){if(r){const{id:t}=await r.getActiveSpace(),a=e.savedObject.attributes.installed_kibana_space_id;if(a&&a!==t)return p(!1),void y(!1)}const{savedObject:{attributes:t}}=e;if(!t.installed_kibana||0===t.installed_kibana.length)return void y(!1);try{const e=t.installed_kibana.map((({id:e,type:t})=>({id:e,type:t}))),a=await Promise.all(Object.entries(Object(ae.groupBy)(e,"type")).map((([e,t])=>o.bulkResolve(t).catch((e=>{var t;if(403===(null==e||null===(t=e.body)||void 0===t?void 0:t.statusCode))return C(!0),{resolved_objects:[]};throw e})).then((({resolved_objects:e})=>e.map((({saved_object:e})=>e)).filter((e=>{var t;return 404!==(null==e||null===(t=e.error)||void 0===t?void 0:t.statusCode)&&Se.has(e.type)})))))));h(a.flat())}catch(e){k(e)}finally{y(!1)}}else y(!1)})()}),[o,e,r]),d.status!==ve.b.installed)return i.a.createElement(s.Redirect,{to:m("integration_details_overview",{pkgkey:l})});let j;return j=v?i.a.createElement(L.k,null):b?i.a.createElement(L.e,{title:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.fetchAssetsErrorTitle",defaultMessage:"Error loading assets"}),error:b}):g?M?i.a.createElement(c.EuiCallOut,{color:"warning",title:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.assetsPermissionErrorTitle",defaultMessage:"Permission errors"})},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.assetsPermissionError",defaultMessage:"You do not have permission to retrieve the Kibana saved object for that integration. Contact your administrator."})):void 0===f||0===f.length?u?i.a.createElement(L.g,null,i.a.createElement(u.Component,null)):i.a.createElement(c.EuiTitle,null,i.a.createElement("h2",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.noAssetsFoundLabel",defaultMessage:"No assets found"}))):[...Pe.map((e=>{const t=f.filter((t=>t.type===e));return t.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(Te,{savedObjects:t,type:e}),i.a.createElement(c.EuiSpacer,{size:"l"})):null})),u?i.a.createElement(L.g,null,i.a.createElement(u.Component,null)):null]:i.a.createElement(c.EuiTitle,null,i.a.createElement("h2",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.assetsNotAvailableInCurrentSpace",defaultMessage:"This integration is installed, but no assets are available in this space"}))),i.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},i.a.createElement(c.EuiFlexItem,{grow:1}),i.a.createElement(c.EuiFlexItem,{grow:6},j))};var _e=a(2);const Ae=M()(c.EuiPagination).withConfig({displayName:"Pagination",componentId:"sc-1fbln0a-0"})(["max-width:130px;"]),Ne=Object(n.memo)((({images:e,packageName:t,version:a})=>{const{toPackageImage:l}=Object(E.L)(),[r,s]=Object(n.useState)(0),o=Object(n.useMemo)((()=>e.length-1),[e.length]),u=Object(n.useMemo)((()=>l(e[r],t,a)),[r,e,t,l,a]);return i.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"s"},i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween"},i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiText,null,i.a.createElement("h4",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.screenshotsTitle",defaultMessage:"Screenshots"})))),i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(Ae,{"aria-label":I.i18n.translate("xpack.fleet.epm.screenshotPaginationAriaLabel",{defaultMessage:"{packageName} screenshot pagination",values:{packageName:t}}),pageCount:o+1,activePage:r,onPageClick:e=>s(e),compressed:!0})))),i.a.createElement(c.EuiFlexItem,null,u?i.a.createElement(c.EuiImage,{allowFullScreen:!0,hasShadow:!0,alt:e[r].title||I.i18n.translate("xpack.fleet.epm.screenshotAltText",{defaultMessage:"{packageName} screenshot #{imageNumber}",values:{packageName:t,imageNumber:r+1}}),title:e[r].title,url:u}):i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.screenshotErrorText",defaultMessage:"Unable to load this screenshot"})))}));var ze=a(142),De=a.n(ze),Re=a(320),Be=a.n(Re);const Ue={$json:"json",$yml:"yml"},$e={table:({children:e})=>i.a.createElement("table",{className:"euiTable euiTable--responsive"},e),tr:({children:e})=>i.a.createElement(c.EuiTableRow,null,e),th:({children:e})=>i.a.createElement(c.EuiTableHeaderCell,null,e),td:({children:e})=>i.a.createElement(c.EuiTableRowCell,null,e),h1:({children:e})=>i.a.createElement("h3",null,e),h2:({children:e})=>i.a.createElement("h4",null,e),h3:({children:e})=>i.a.createElement("h5",null,e),h4:({children:e})=>i.a.createElement("h6",null,e),h5:({children:e})=>i.a.createElement("h6",null,e),h6:({children:e})=>i.a.createElement("h6",null,e),link:({children:e,href:t})=>i.a.createElement(c.EuiLink,{href:t,target:"_blank",rel:"noopener nofollow noreferrer"},e),code:({className:e,children:t,inline:a})=>{var n,l;let r=null!==(n=null===(l=/language-(\w+)/.exec(e||""))||void 0===l?void 0:l[1])&&void 0!==n?n:"";const s=r?Ue[r]:void 0;return s&&(r=s),a?i.a.createElement(c.EuiCode,null,t):i.a.createElement(c.EuiCodeBlock,{language:r,isCopyable:!0},t)}};function He({readmePath:e,packageName:t,version:a}){const[l,r]=Object(n.useState)(void 0),{toRelativeImage:s}=Object(E.L)(),o=i.a.useCallback((e=>0!==e.indexOf("http://")&&0!==e.indexOf("https://")?s({packageName:t,version:a,path:e}):e),[s,t,a]);return Object(n.useEffect)((()=>{Object(E.k)(e).then((e=>{r(e.data||"")}))}),[e]),i.a.createElement(n.Fragment,null,void 0!==l?i.a.createElement(c.EuiText,{grow:!0},i.a.createElement(De.a,{transformImageUri:o,components:$e,remarkPlugins:[Be.a]},l)):i.a.createElement(c.EuiText,null,i.a.createElement("p",null,i.a.createElement(c.EuiLoadingContent,{lines:5})),i.a.createElement("p",null,i.a.createElement(c.EuiLoadingContent,{lines:6})),i.a.createElement("p",null,i.a.createElement(c.EuiLoadingContent,{lines:4}))))}const Ge=({noticePath:e,onClose:t})=>{const{notifications:a}=Object(E.S)(),[l,r]=Object(n.useState)(void 0);return Object(n.useEffect)((()=>{!async function(){try{const{data:t}=await Object(E.k)(e);r(t||"")}catch(e){a.toasts.addError(e,{title:I.i18n.translate("xpack.fleet.epm.errorLoadingNotice",{defaultMessage:"Error loading NOTICE.txt"})})}}()}),[e,a]),i.a.createElement(c.EuiModal,{maxWidth:!0,onClose:t},i.a.createElement(c.EuiModalHeader,null,i.a.createElement(c.EuiModalHeaderTitle,null,i.a.createElement("h1",null,"NOTICE.txt"))),i.a.createElement(c.EuiModalBody,null,i.a.createElement(c.EuiCodeBlock,{overflowHeight:360},l||i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement(c.EuiLoadingContent,{lines:5})),i.a.createElement("p",null,i.a.createElement(c.EuiLoadingContent,{lines:6}))))),i.a.createElement(c.EuiModalFooter,null,i.a.createElement(c.EuiButton,{color:"primary",fill:!0,onClick:t},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.noticeModalCloseBtn",defaultMessage:"Close"}))))},Ve=({licenseName:e="LICENSE.txt",licensePath:t,onClose:a})=>{const{notifications:l}=Object(E.S)(),[r,s]=Object(n.useState)(void 0);return Object(n.useEffect)((()=>{!async function(){try{const{data:e}=await Object(E.k)(t);s(e||"")}catch(e){l.toasts.addError(e,{title:I.i18n.translate("xpack.fleet.epm.errorLoadingLicense",{defaultMessage:"Error loading license information"})})}}()}),[t,l]),i.a.createElement(c.EuiModal,{maxWidth:!0,onClose:a},i.a.createElement(c.EuiModalHeader,null,i.a.createElement(c.EuiModalHeaderTitle,null,i.a.createElement("h1",null,e))),i.a.createElement(c.EuiModalBody,null,i.a.createElement(c.EuiCodeBlock,{overflowHeight:360},r||i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement(c.EuiLoadingContent,{lines:5})),i.a.createElement("p",null,i.a.createElement(c.EuiLoadingContent,{lines:6}))))),i.a.createElement(c.EuiModalFooter,null,i.a.createElement(c.EuiButton,{color:"primary",fill:!0,onClick:a},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.licenseModalCloseBtn",defaultMessage:"Close"}))))},We=Object(le.withSuspense)(le.LazyReplacementCard),qe=Object(g.euiStyled)(c.EuiFlexItem)`
  margin: 0;

  & .euiAccordion {
    padding-top: ${({theme:e})=>2*parseInt(e.eui.euiSizeL,10)}px;

    &::before {
      content: '';
      display: block;
      border-top: 1px solid ${({theme:e})=>e.eui.euiColorLightShade};
      position: relative;
      top: -${({theme:e})=>e.eui.euiSizeL};
      margin: 0 ${({theme:e})=>e.eui.euiSizeXS};
    }
  }
`,Ke=Object(n.memo)((({packageInfo:e})=>{var t,a,l,r;const{data:s,isLoading:o}=Object(E.y)(),u=Object(n.useMemo)((()=>!o&&s&&s.response?s.response.filter((t=>{var a;return null===(a=e.categories)||void 0===a?void 0:a.includes(t.id)})).map((e=>e.title)):[]),[s,o,e.categories]),[m,d]=Object(n.useState)(!1),g=Object(n.useCallback)((()=>{d(!m)}),[m]),[p,f]=Object(n.useState)(!1),h=Object(n.useCallback)((()=>{f(!p)}),[p]),b=Object(n.useMemo)((()=>{var t,a,n,l;const r=[{title:i.a.createElement(c.EuiTextColor,{color:"subdued"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.versionLabel",defaultMessage:"Version"})),description:e.version},{title:i.a.createElement(c.EuiTextColor,{color:"subdued"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.categoryLabel",defaultMessage:"Category"})),description:u.join(", ")}];Object(ve.d)(e.assets).forEach((([e,t])=>{const a=Object(ve.d)(t).reduce(((t,[a,n])=>(Ie.b[e].includes(a)&&(t[a]=n),t)),{});Object.entries(a).length&&r.push({title:i.a.createElement(c.EuiTextColor,{color:"subdued"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.assetGroupTitle",defaultMessage:"{assetType} assets",values:{assetType:Ie.c[e]}})),description:i.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(ve.d)(a).map((([e,t],a)=>{const n=e;return i.a.createElement(c.EuiFlexItem,{key:`item-${a}`},i.a.createElement(c.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",justifyContent:"spaceBetween"},i.a.createElement(c.EuiFlexItem,{grow:!1},Ie.a[n]),i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiNotificationBadge,{color:"subdued"},t.length))))})))})}));const s=[...new Set((null===(t=e.data_streams)||void 0===t?void 0:t.map((e=>e.type)))||[])];var o,m;return s.length&&r.push({title:i.a.createElement(c.EuiTextColor,{color:"subdued"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.featuresLabel",defaultMessage:"Features"})),description:s.join(", ")}),r.push({title:i.a.createElement(c.EuiTextColor,{color:"subdued"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.subscriptionLabel",defaultMessage:"Subscription"})),description:i.a.createElement("p",null,(null===(a=e.conditions)||void 0===a||null===(n=a.elastic)||void 0===n?void 0:n.subscription)||e.license||"-")}),(e.licensePath||null!==(l=e.source)&&void 0!==l&&l.license||e.notice)&&r.push({title:i.a.createElement(c.EuiTextColor,{color:"subdued"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.licenseLabel",defaultMessage:"License"})),description:i.a.createElement(i.a.Fragment,null,e.licensePath?i.a.createElement("p",null,i.a.createElement(c.EuiLink,{onClick:h},(null===(o=e.source)||void 0===o?void 0:o.license)||"LICENSE.txt")):i.a.createElement("p",null,(null===(m=e.source)||void 0===m?void 0:m.license)||"-"),e.notice&&i.a.createElement("p",null,i.a.createElement(c.EuiLink,{onClick:g},"NOTICE.txt")))}),r}),[u,e.assets,null===(t=e.conditions)||void 0===t||null===(a=t.elastic)||void 0===a?void 0:a.subscription,e.data_streams,e.license,e.licensePath,e.notice,null===(l=e.source)||void 0===l?void 0:l.license,e.version,h,g]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiPortal,null,m&&e.notice&&i.a.createElement(Ge,{noticePath:e.notice,onClose:g})),i.a.createElement(c.EuiPortal,null,p&&e.licensePath&&i.a.createElement(Ve,{licenseName:null===(r=e.source)||void 0===r?void 0:r.license,licensePath:e.licensePath,onClose:h})),i.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"m"},i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiText,null,i.a.createElement("h4",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.detailsTitle",defaultMessage:"Details"})))),i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiDescriptionList,{type:"column",compressed:!0,listItems:b})),i.a.createElement(qe,null,i.a.createElement(We,{eprPackageName:e.name}))))})),Ye=M()(c.EuiFlexItem).withConfig({displayName:"LeftColumn",componentId:"sc-uj4rsg-0"})(["&&&{margin-top:77px;}"]),Xe=()=>{const{docLinks:e}=Object(o.oc)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiCallOut,{title:I.i18n.translate("xpack.fleet.epm.verificationWarningCalloutTitle",{defaultMessage:"Integration not verified"}),iconType:"alert",color:"warning"},i.a.createElement("p",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.verificationWarningCalloutIntroText",defaultMessage:"This integration contains an unsigned package of unknown authenticity. Learn more about {learnMoreLink}.",values:{learnMoreLink:i.a.createElement(c.EuiLink,{target:"_blank",external:!0,href:e.links.fleet.packageSignatures},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.verificationWarningCalloutLearnMoreLink",defaultMessage:"package signatures"}))}}))),i.a.createElement(c.EuiSpacer,{size:"l"}))},Je=({packageName:e,packageTitle:t,latestGAVersion:a})=>{const{getHref:n}=Object(o.gc)(),l=n("integration_details_overview",{pkgkey:`${e}-${a}`});return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiCallOut,{"data-test-subj":"prereleaseCallout",title:I.i18n.translate("xpack.fleet.epm.prereleaseWarningCalloutTitle",{defaultMessage:"This is a pre-release version of {packageTitle} integration.",values:{packageTitle:t}}),iconType:"iInCircle",color:"warning"},a&&i.a.createElement("p",null,i.a.createElement(c.EuiButton,{href:l,color:"warning","data-test-subj":"switchToGABtn"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.prereleaseWarningCalloutSwitchToGAButton",defaultMessage:"Switch to latest GA version"})))),i.a.createElement(c.EuiSpacer,{size:"l"}))},Qe=Object(n.memo)((({packageInfo:e,integrationInfo:t,latestGAVersion:a})=>{const l=Object(n.useMemo)((()=>(null==t?void 0:t.screenshots)||e.screenshots||[]),[t,e.screenshots]),{packageVerificationKeyId:r}=Object(o.Db)(),s=Object(_e.t)(e,r),u=Object(_e.s)(e.version);return i.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},i.a.createElement(Ye,{grow:2}),i.a.createElement(c.EuiFlexItem,{grow:9,className:"eui-textBreakWord"},s&&i.a.createElement(Xe,null),u&&i.a.createElement(Je,{packageName:e.name,packageTitle:e.title,latestGAVersion:a}),e.readme?i.a.createElement(He,{readmePath:t&&Object(ie.E)(t)&&null!=t&&t.readme?null==t?void 0:t.readme:e.readme,packageName:e.name,version:e.version}):null),i.a.createElement(c.EuiFlexItem,{grow:3},i.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"l",alignItems:"flexStart"},l.length?i.a.createElement(c.EuiFlexItem,null,i.a.createElement(Ne,{images:l,packageName:e.name,version:e.version})):null,i.a.createElement(c.EuiFlexItem,null,i.a.createElement(Ke,{packageInfo:e})))))}));var Ze=a(21);const et=({onAddAgent:e})=>i.a.createElement(c.EuiButton,{iconType:"plusInCircle","data-test-subj":"addAgentButton",onClick:e,size:"s"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.addAgent",defaultMessage:"Add agent"})),tt=({onAddAgent:e})=>{const[t,a]=Object(n.useState)(!0),l=i.a.createElement(et,{onAddAgent:()=>{a(!1),e()}});return i.a.createElement(L.a,{button:l,isOpen:t,closePopover:()=>a(!1)})},at=({agentPolicy:e,agentCount:t=0,onAddAgent:a,hasHelpPopover:n=!1})=>t>0||e.is_managed?i.a.createElement(L.j,{count:t,agentPolicyId:e.id,className:"eui-textTruncate"}):n?i.a.createElement(tt,{onAddAgent:a}):i.a.createElement(et,{onAddAgent:a}),nt={minWidth:0},it=Object(n.memo)((({name:e,className:t,"data-test-subj":a,title:l,...r})=>{const s=Object(n.useCallback)((e=>{if(a)return`${a}-${e}`}),[a]);return i.a.createElement(c.EuiFlexGroup,{gutterSize:"s",alignItems:"baseline",style:nt,className:t,"data-test-subj":a,title:l,responsive:!1},i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiAvatar,S()({name:e,"data-test-subj":s("avatar")},r))),i.a.createElement(c.EuiFlexItem,{grow:!1,className:"eui-textTruncate"},i.a.createElement(c.EuiText,{size:"s",className:"eui-textTruncate","data-test-subj":s("name")},e)))})),lt=Object(n.memo)((({packagePolicy:e})=>{const{getHref:t}=Object(E.K)();return i.a.createElement(c.EuiLink,{className:"eui-textTruncate","data-test-subj":"integrationNameLink",title:e.name,href:t("integration_policy_edit",{packagePolicyId:e.id})},e.name)})),rt=()=>i.a.createElement(c.EuiText,{color:"subdued",size:"xs",className:"eui-textNoWrap"},i.a.createElement(c.EuiIcon,{size:"m",type:"alert",color:"warning"}),"",i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.agentPolicyDeletedWarning",defaultMessage:"Policy not found"})),st=({name:e,version:t})=>{var a,l,r,o;const{search:u}=Object(s.useLocation)(),m=Object(s.useHistory)(),d=Object(n.useMemo)((()=>new URLSearchParams(u)),[u]),g=Object(n.useMemo)((()=>d.get("addAgentToPolicyId")),[d]),p=Object(n.useMemo)((()=>d.get("showAddAgentHelpForPolicyId")),[d]),[f,b]=Object(n.useState)(g),{getPath:k,getHref:v}=Object(E.K)(),y=Object(E.B)()(e),{pagination:M,pageSizeOptions:C,setPagination:j}=Object(E.V)(),{data:O,isLoading:F,resendRequest:P}=(e=>{const{data:t,error:a,isLoading:i,resendRequest:l}=Object(E.C)(e),r=Object(n.useMemo)((()=>null!=t&&t.items.length?Array.from(new Set(t.items.map((e=>e.policy_id))).values()):[]),[t]),{data:s,isLoading:o}=Object(E.t)({path:w.b.getBulkGetPath(),method:"post",body:{ids:r,full:!0,ignoreMissing:!0},shouldSendRequest:r.length>0}),[c,u]=Object(n.useState)();return Object(n.useEffect)((()=>{if(i||o)return;if(null==t||!t.items)return void u(void 0);const e={};if(null!=s&&s.items)for(const t of s.items)e[t.id]=t;const a=t.items.map((t=>({packagePolicy:t,agentPolicy:e[t.policy_id]})));u({...t,items:a})}),[o,i,t,s]),{data:c,error:a,isLoading:i||o,resendRequest:l}})({page:M.currentPage,perPage:M.pageSize,kuery:`${h.h}.package.name: ${e}`}),{updatableIntegrations:T}=Object(E.O)(),S=Object(E.q)().integrations.writeIntegrationPolicies,_=Object(n.useMemo)((()=>{if(null==O||!O.items)return[];const e=O.items.map((({agentPolicy:e,packagePolicy:t})=>{var a,n;const i=T.get(null!==(a=null===(n=t.package)||void 0===n?void 0:n.name)&&void 0!==a?a:""),l=!!i&&i.policiesToUpgrade.some((({pkgPolicyId:e})=>e===t.id));return{agentPolicy:e,packagePolicy:{...t,hasUpgrade:l}}}));return e}),[null==O?void 0:O.items,T]),A=null===(a=_.find((({agentPolicy:e})=>(null==e?void 0:e.id)===p)))||void 0===a||null===(l=a.packagePolicy)||void 0===l?void 0:l.id;Object(n.useEffect)((()=>{const e=m.listen((e=>{const t=new URLSearchParams(e.search).get("addAgentToPolicyId");t&&b(t)}));return()=>e()}),[m]);const N=Object(n.useCallback)((({page:e})=>{j({currentPage:e.index+1,pageSize:e.size})}),[j]),z=Object(n.useMemo)((()=>[{field:"packagePolicy.name",name:I.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.name",{defaultMessage:"Integration policy"}),render:(e,{packagePolicy:t})=>i.a.createElement(lt,{packagePolicy:t})},{field:"packagePolicy.package.version",name:I.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.version",{defaultMessage:"Version"}),render:(e,{agentPolicy:t,packagePolicy:a})=>i.a.createElement(c.EuiFlexGroup,{gutterSize:"s",alignItems:"center",wrap:!0},i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiText,{size:"s",className:"eui-textNoWrap","data-test-subj":"packageVersionText"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.packageVersion",defaultMessage:"v{version}",values:{version:e}}))),t&&a.hasUpgrade&&i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiButton,{size:"s",minWidth:"0",href:`${v("upgrade_package_policy",{policyId:t.id,packagePolicyId:a.id})}?from=integrations-policy-list`,"data-test-subj":"integrationPolicyUpgradeBtn",isDisabled:!S},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.upgradeButton",defaultMessage:"Upgrade"}))))},{field:"packagePolicy.policy_id",name:I.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.agentPolicy",{defaultMessage:"Agent policy"}),truncateText:!0,render:(e,{agentPolicy:t})=>t?i.a.createElement(L.c,{policy:t}):i.a.createElement(rt,null)},{field:"packagePolicy.updated_by",name:I.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.updatedBy",{defaultMessage:"Last updated by"}),truncateText:!0,render:e=>i.a.createElement(it,{size:"s",name:e,title:e})},{field:"packagePolicy.updated_at",name:I.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.updatedAt",{defaultMessage:"Last updated"}),truncateText:!0,render:e=>i.a.createElement("span",{className:"eui-textTruncate",title:e},i.a.createElement(x.FormattedRelative,{value:e}))},{field:"",name:I.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.agentCount",{defaultMessage:"Agents"}),render:({agentPolicy:e,packagePolicy:t})=>e?i.a.createElement(at,{agentPolicy:e,agentCount:e.agents,onAddAgent:()=>b(e.id),hasHelpPopover:A===t.id}):null},{field:"",name:I.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.actions",{defaultMessage:"Actions"}),width:"8ch",align:"right",render:({agentPolicy:e,packagePolicy:t})=>i.a.createElement(L.l,{agentPolicy:e,packagePolicy:t,showAddAgent:!0,upgradePackagePolicyHref:e?`${v("upgrade_package_policy",{policyId:e.id,packagePolicyId:t.id})}?from=integrations-policy-list`:void 0})}]),[v,A,S]),D=Object(n.useMemo)((()=>F?i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.loadingPoliciesMessage",defaultMessage:"Loading integration policies"}):void 0),[F]),R=Object(n.useMemo)((()=>{var e;return{pageIndex:M.currentPage-1,pageSize:M.pageSize,totalItemCount:null!==(e=null==O?void 0:O.total)&&void 0!==e?e:0,pageSizeOptions:C}}),[null==O?void 0:O.total,C,M.currentPage,M.pageSize]);if(y.status!==ve.b.installed)return i.a.createElement(s.Redirect,{to:k("integration_details_overview",{pkgkey:`${e}-${t}`})});const B=_.find((({agentPolicy:e})=>(null==e?void 0:e.id)===f)),U=null==B?void 0:B.agentPolicy,$=null==B?void 0:B.packagePolicy;return i.a.createElement(E.b.Provider,{value:{refresh:P}},i.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},i.a.createElement(c.EuiFlexItem,{grow:1}),i.a.createElement(c.EuiFlexItem,{grow:6},i.a.createElement(c.EuiBasicTable,{items:_||[],columns:z,loading:F,"data-test-subj":"integrationPolicyTable",pagination:R,onChange:N,noItemsMessage:D}))),f&&U&&!F&&i.a.createElement(L.b,{onClose:()=>{b(null);const{addAgentToPolicyId:e,...t}=Object(Ze.parse)(u);m.replace({search:Object(Ze.stringify)(t)})},agentPolicy:U,isIntegrationFlow:!0,installedPackagePolicy:{name:(null==$||null===(r=$.package)||void 0===r?void 0:r.name)||"",version:(null==$||null===(o=$.package)||void 0===o?void 0:o.version)||""}}))},ot=e=>{const{onCancel:t,onConfirm:a,packageName:n,numOfAssets:l}=e;return i.a.createElement(c.EuiConfirmModal,{title:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installTitle",defaultMessage:"Install {packageName}",values:{packageName:n}}),onCancel:t,onConfirm:a,cancelButtonText:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installButtonLabel",defaultMessage:"Install {packageName}",values:{packageName:n}}),defaultFocusedButton:"confirm"},i.a.createElement(c.EuiCallOut,{iconType:"iInCircle",title:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installCalloutTitle",defaultMessage:"This action will install {numOfAssets} assets",values:{numOfAssets:l}})}),i.a.createElement(c.EuiSpacer,{size:"l"}),i.a.createElement("p",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installDescription",defaultMessage:"Kibana assets will be installed in the current Space (Default) and will only be accessible to users who have permission to view this Space. Elasticsearch assets are installed globally and will be accessible to all Kibana users."})))};function ct(e){const{name:t,numOfAssets:a,title:l,version:r}=e,s=Object(E.q)().integrations.installPackages,o=Object(E.H)(),u=Object(E.B)(),{status:m}=u(t),d=m===ve.b.installing,[g,p]=Object(n.useState)(!1),f=Object(n.useCallback)((()=>{p(!g)}),[g]),h=Object(n.useCallback)((()=>{o({name:t,version:r,title:l}),f()}),[o,t,l,f,r]),b=i.a.createElement(ot,{numOfAssets:a,packageName:l,onCancel:f,onConfirm:h});return s?i.a.createElement(n.Fragment,null,i.a.createElement(c.EuiButton,{iconType:"importAction",isLoading:d,onClick:f,"data-test-subj":"installAssetsButton"},d?i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.installingPackageButtonLabel",defaultMessage:"Installing {title} assets",values:{title:l}}):i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.installPackageButtonLabel",defaultMessage:"Install {title} assets",values:{title:l}})),g&&b):null}function ut(e){const{name:t,title:a,version:l}=e,r=Object(E.q)().integrations.installPackages,s=Object(E.H)(),o=Object(E.B)(),{status:u}=o(t),m=u===ve.b.reinstalling,d=Object(n.useCallback)((()=>{s({name:t,version:l,title:a,isReinstall:!0})}),[s,t,a,l]);return r?i.a.createElement(n.Fragment,null,i.a.createElement(c.EuiButton,{iconType:"refresh",isLoading:m,onClick:d},m?i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.reinstallingPackageButtonLabel",defaultMessage:"Reinstalling {title}",values:{title:a}}):i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.reinstallPackageButtonLabel",defaultMessage:"Reinstall {title}",values:{title:a}}))):null}const mt=({dryRunData:e,isUpgradingPackagePolicies:t=!1,name:a,packagePolicyIds:l=[],setIsUpgradingPackagePolicies:r=(()=>{}),title:o,version:u,theme$:m})=>{const g=Object(s.useHistory)(),{getPath:p}=Object(E.K)(),{notifications:f}=Object(E.S)(),b=Object(E.q)().integrations.upgradePackages,k=Object(E.H)(),v=Object(E.B)(),{status:y}=v(a),M=y===ve.b.installing,[C,j]=Object(n.useState)(!1),[O,w]=Object(n.useState)(!0),[F,P]=Object(n.useState)();Object(n.useEffect)((()=>{(async()=>{if(l&&l.length>0){const{data:e}=await Object(E.i)({perPage:h.j,page:1,kuery:`${h.a}.package_policies:${l.map((e=>`"${e}"`)).join(" or ")}`});P(e)}})()}),[l]);const T=Object(n.useMemo)((()=>l.length),[l]),S=Object(n.useMemo)((()=>null!=F&&F.items?F.items.reduce(((e,t)=>{var a;return e+((null!=t&&t.package_policies?(a=t.package_policies,Array.isArray(a)&&a.every((e=>"string"==typeof e))?t.package_policies.filter((e=>l.includes(e))):t.package_policies.filter((e=>l.includes(e.id)))):[]).length>0&&null!=t&&t.agents?null==t?void 0:t.agents:0)}),0):0),[F,l]),L=Object(n.useMemo)((()=>null==e?void 0:e.filter((e=>e.hasErrors)).length),[e]),_=Object(n.useCallback)((()=>{w((e=>!e))}),[]),A=Object(n.useCallback)((()=>{if(!g.location.pathname.match(p("integration_details_settings",{pkgkey:`${a}-.*`})))return;const e=p("integration_details_settings",{pkgkey:`${a}-${u}`});g.push(e)}),[g,p,a,u]),N=Object(n.useCallback)((async()=>{await k({name:a,version:u,title:o,fromUpdate:!0})}),[k,a,o,u]),z=Object(n.useCallback)((async()=>{t||(j(!1),r(!0),await k({name:a,version:u,title:o}),await Object(E.n)(l.filter((t=>{var a;return!(null!=e&&null!==(a=e.find((e=>{var a;return(null===(a=e.diff)||void 0===a?void 0:a[0].id)===t})))&&void 0!==a&&a.hasErrors)}))),r(!1),f.toasts.addSuccess({title:Object(d.toMountPoint)(i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageUpdateSuccessTitle",defaultMessage:"Updated {title} and upgraded policies",values:{title:o}}),{theme$:m}),text:Object(d.toMountPoint)(i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageUpdateSuccessDescription",defaultMessage:"Successfully updated {title} and upgraded policies",values:{title:o}}),{theme$:m})}),A())}),[e,k,t,a,A,f.toasts,l,r,o,u,m]),D=i.a.createElement(c.EuiConfirmModal,{isLoading:t,maxWidth:568,onCancel:()=>{j(!1)},cancelButtonText:I.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.cancel",{defaultMessage:"Cancel"}),onConfirm:z,confirmButtonText:I.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.confirm",{defaultMessage:"Upgrade {packageName} and policies",values:{packageName:o}}),title:I.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.updateTitle",{defaultMessage:"Upgrade {packageName} and policies",values:{packageName:o}})},i.a.createElement(i.a.Fragment,null,L&&L>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiCallOut,{color:"warning",iconType:"alert",title:I.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.conflictCallOut.title",{defaultMessage:"Some integration policies have conflicts"})},i.a.createElement("strong",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUpdateModal.conflictCallOut.integrationPolicyCount",defaultMessage:"{conflictCount, plural, one { # integration policy} other { # integration policies}}",values:{conflictCount:L}}))," ",i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUpdateModal.conflictCallOut.body",defaultMessage:"{conflictCount, plural, one { has} other { have}} conflicts and will not be upgraded automatically. You can manually resolve these conflicts via agent policy settings in Fleet after performing this upgrade.",values:{conflictCount:L}})),i.a.createElement(c.EuiSpacer,{size:"l"})):null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUpdateModal.body",defaultMessage:"This action will deploy updates to all agents which use these policies. Fleet has detected that {packagePolicyCountText} {packagePolicyCount, plural, one { is} other { are}} ready to be upgraded and {packagePolicyCount, plural, one { is} other { are}} already in use by {agentCountText}.",values:{packagePolicyCount:T,packagePolicyCountText:i.a.createElement("strong",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.confirmUpdateModal.body.policyCount",defaultMessage:"{packagePolicyCount, plural, one {# integration policy} other {# integration policies}}",values:{packagePolicyCount:T}})),agentCountText:i.a.createElement("strong",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.confirmUpdateModal.body.agentCount",defaultMessage:"{agentCount, plural, one {# agent} other {# agents}}",values:{agentCount:S}}))}})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiFlexGroup,{alignItems:"center"},i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiButton,{isLoading:M||t,onClick:O?()=>j(!0):N,"data-test-subj":"updatePackageBtn",isDisabled:!b},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.updatePackage.updatePackageButtonLabel",defaultMessage:"Upgrade to latest version"}))),T>0&&i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiCheckbox,{compressed:!0,labelProps:{style:{display:"flex"}},id:"upgradePoliciesCheckbox","data-test-subj":"epmDetails.upgradePoliciesCheckbox",disabled:!b,checked:O,onChange:_,label:I.i18n.translate("xpack.fleet.integrations.updatePackage.upgradePoliciesCheckboxLabel",{defaultMessage:"Upgrade integration policies"})}))),C&&D)},dt=e=>{const{onCancel:t,onConfirm:a,packageName:n,numOfAssets:l}=e;return i.a.createElement(c.EuiConfirmModal,{title:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallTitle",defaultMessage:"Uninstall {packageName}",values:{packageName:n}}),onCancel:t,onConfirm:a,cancelButtonText:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallButtonLabel",defaultMessage:"Uninstall {packageName}",values:{packageName:n}}),defaultFocusedButton:"confirm",buttonColor:"danger"},i.a.createElement(c.EuiCallOut,{color:"danger",title:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallCallout.title",defaultMessage:"This action will remove {numOfAssets} assets",values:{numOfAssets:l}})},i.a.createElement("p",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallCallout.description",defaultMessage:"Kibana and Elasticsearch assets that were created by this integration will be removed. Agents policies and any data sent by your agents will not be effected."}))),i.a.createElement(c.EuiSpacer,{size:"l"}),i.a.createElement("p",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallDescription",defaultMessage:"This action cannot be undone. Are you sure you wish to continue?"})))},gt=({disabled:e=!1,latestVersion:t,name:a,numOfAssets:l,title:r,version:s})=>{const o=Object(E.q)().integrations.removePackages,u=Object(E.U)(),m=Object(E.B)(),{status:d}=m(a),g=d===ve.b.uninstalling,[p,f]=Object(n.useState)(!1),h=Object(n.useCallback)((()=>{u({name:a,version:s,title:r,redirectToVersion:null!=t?t:s}),f(!1)}),[u,a,r,s,t]),b=i.a.createElement(dt,{numOfAssets:l,packageName:r,onCancel:()=>f(!1),onConfirm:h});return o?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiButton,{"data-test-subj":"uninstallAssetsButton",iconType:"trash",isLoading:g,onClick:()=>f(!0),color:"danger",disabled:!(!e&&!g)},g?i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.uninstallPackage.uninstallingPackageButtonLabel",defaultMessage:"Uninstalling {title}",values:{title:r}}):i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.uninstallPackage.uninstallPackageButtonLabel",defaultMessage:"Uninstall {title}",values:{title:r}})),p&&b):null},pt=M.a.td.withConfig({displayName:"SettingsTitleCell",componentId:"sc-1lbna4d-0"})(["padding-right:",";padding-bottom:",";"],(e=>e.theme.eui.euiSizeXL),(e=>e.theme.eui.euiSizeM)),ft=()=>i.a.createElement("strong",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallNoteDescription.packageUninstallNoteLabel",defaultMessage:"Note:"})),Et=({latestVersion:e})=>i.a.createElement(c.EuiCallOut,{color:"warning",iconType:"alert",title:I.i18n.translate("xpack.fleet.integrations.settings.versionInfo.updatesAvailable",{defaultMessage:"New version available"})},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integration.settings.versionInfo.updatesAvailableBody",defaultMessage:"Upgrade to version {latestVersion} to get the latest features",values:{latestVersion:e}})),ht=({name:e,version:t})=>{const{getHref:a}=Object(E.K)(),n=a("integration_details_settings",{pkgkey:`${e}-${t}`});return i.a.createElement(c.EuiLink,{href:n},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageLatestVersionLink",defaultMessage:"latest version"}))},bt=Object(n.memo)((({packageInfo:e,theme$:t})=>{const{name:a,title:l,latestVersion:r,version:s,keepPoliciesUpToDate:o}=e,[u,m]=Object(n.useState)(),[d,g]=Object(n.useState)(!1),p=Object(E.B)(),{data:f}=Object(E.C)({perPage:h.j,page:1,kuery:`${h.h}.package.name:${a}`}),{notifications:b}=Object(E.S)(),k=Object(n.useMemo)((()=>h.g.some((e=>e.name===a))),[a]),v=Object(n.useMemo)((()=>h.b.some((e=>e.name===a))),[a]),[y,M]=Object(n.useState)(null!=o&&o),C=Object(n.useCallback)((()=>{(async()=>{try{M((e=>!e)),await Object(E.m)(e.name,e.version,{keepPoliciesUpToDate:!y}),b.toasts.addSuccess({title:I.i18n.translate("xpack.fleet.integrations.integrationSaved",{defaultMessage:"Integration settings saved"}),text:y?I.i18n.translate("xpack.fleet.integrations.keepPoliciesUpToDateDisabledSuccess",{defaultMessage:"Fleet will not automatically keep integration policies up to date for {title}",values:{title:l}}):I.i18n.translate("xpack.fleet.integrations.keepPoliciesUpToDateEnabledSuccess",{defaultMessage:"Fleet will automatically keep integration policies up to date for {title}",values:{title:l}})})}catch(e){b.toasts.addError(e,{title:I.i18n.translate("xpack.fleet.integrations.integrationSavedError",{defaultMessage:"Error saving integration settings"}),toastMessage:I.i18n.translate("xpack.fleet.integrations.keepPoliciesUpToDateError",{defaultMessage:"Error saving integration settings for {title}",values:{title:l}})})}})()}),[y,b.toasts,e.name,e.version,l]),{status:j,version:O}=p(a),w=!(null==f||!f.total),F=Object(n.useMemo)((()=>null==f?void 0:f.items.map((({id:e})=>e))),[f]);Object(n.useEffect)((()=>{(async()=>{if(F&&F.length){const{data:e}=await Object(E.o)(F,r);m(e)}})()}),[r,F]);const T=!(!O||!P()(O,r)),L=s<r,_=j===ve.b.notInstalled&&L||j===ve.b.installed&&O!==s,A=j===ve.b.installing&&O,N=Object(n.useMemo)((()=>Object.entries(e.assets).reduce(((e,[t,a])=>e+Object.entries(a).reduce(((e,[t,a])=>e+a.length),0)),0)),[e.assets]);return i.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},i.a.createElement(c.EuiFlexItem,{grow:1}),i.a.createElement(c.EuiFlexItem,{grow:6},i.a.createElement(c.EuiText,null,i.a.createElement(c.EuiTitle,null,i.a.createElement("h3",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageSettingsTitle",defaultMessage:"Settings"}))),i.a.createElement(c.EuiSpacer,{size:"s"}),null!==O&&i.a.createElement("div",null,i.a.createElement(c.EuiTitle,null,i.a.createElement("h4",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageVersionTitle",defaultMessage:"{title} version",values:{title:l}}))),i.a.createElement(c.EuiSpacer,{size:"s"}),i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement(pt,null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.versionInfo.installedVersion",defaultMessage:"Installed version"})),i.a.createElement("td",null,i.a.createElement(c.EuiTitle,{size:"xs","data-test-subj":"epmSettings.installedVersionTitle"},i.a.createElement("span",null,O)))),i.a.createElement("tr",null,i.a.createElement(pt,null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.versionInfo.latestVersion",defaultMessage:"Latest version"})),i.a.createElement("td",null,i.a.createElement(c.EuiTitle,{size:"xs","data-test-subj":"epmSettings.latestVersionTitle"},i.a.createElement("span",null,r)))))),k&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Fe,{checked:y,onChange:C,disabled:v}),i.a.createElement(c.EuiSpacer,{size:"l"})),(T||d)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Et,{latestVersion:r}),i.a.createElement(c.EuiSpacer,{size:"l"}),i.a.createElement("p",null,i.a.createElement(mt,S()({},e,{version:r,packagePolicyIds:F,dryRunData:u,isUpgradingPackagePolicies:d,setIsUpgradingPackagePolicies:g,theme$:t}))))),!_&&!A&&i.a.createElement("div",null,i.a.createElement(c.EuiSpacer,{size:"s"}),j===ve.b.notInstalled||j===ve.b.installing?i.a.createElement("div",null,i.a.createElement(c.EuiTitle,null,i.a.createElement("h4",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageInstallTitle",defaultMessage:"Install {title}",values:{title:l}}))),i.a.createElement(c.EuiSpacer,{size:"s"}),i.a.createElement("p",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageInstallDescription",defaultMessage:"Install this integration to setup Kibana and Elasticsearch assets designed for {title} data.",values:{title:l}})),i.a.createElement(c.EuiFlexGroup,null,i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement("p",null,i.a.createElement(ct,S()({},e,{numOfAssets:N,disabled:!f||w})))))):i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"m"},i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiTitle,null,i.a.createElement("h4",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallTitle",defaultMessage:"Uninstall"})))),i.a.createElement(c.EuiFlexItem,null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallDescription",defaultMessage:"Remove Kibana and Elasticsearch assets that were installed by this integration."})),i.a.createElement(c.EuiFlexItem,null,i.a.createElement("div",null,i.a.createElement(gt,S()({},e,{numOfAssets:N,latestVersion:r,disabled:!f||w})))),w&&i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiText,{color:"subdued",size:"s"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallNoteDescription.packageUninstallNoteDetail",defaultMessage:"{strongNote} {title} cannot be uninstalled because there are active agents that use this integration. To uninstall, remove all {title} integrations from your agent policies.",values:{title:l,strongNote:i.a.createElement(ft,null)}})))),i.a.createElement(c.EuiSpacer,{size:"l"}),i.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"m"},i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiTitle,null,i.a.createElement("h4",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageReinstallTitle",defaultMessage:"Reinstall"})))),i.a.createElement(c.EuiFlexItem,null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageReinstallDescription",defaultMessage:"Reinstall Kibana and Elasticsearch assets for this integration."})),i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement("div",null,i.a.createElement(ut,e)))))),_&&L&&!A&&i.a.createElement("div",null,i.a.createElement(c.EuiSpacer,{size:"s"}),i.a.createElement("div",null,i.a.createElement(c.EuiTitle,null,i.a.createElement("h4",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageInstallTitle",defaultMessage:"Install {title}",values:{title:l}}))),i.a.createElement(c.EuiSpacer,{size:"s"}),i.a.createElement("p",null,i.a.createElement(c.EuiText,{color:"subdued"},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageSettingsOldVersionMessage",defaultMessage:"Version {version} is out of date. The {latestVersion} of this integration is available to be installed.",values:{version:s,latestVersion:i.a.createElement(ht,{name:a,version:r})}}))))))))})),kt=Object(n.memo)((({packageInfo:e})=>{const t=Object(E.T)(e.name,"package-detail-custom"),{getPath:a}=Object(E.K)(),l=Object(n.useMemo)((()=>Object(w.g)(e)),[e]);return t?i.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},i.a.createElement(c.EuiFlexItem,{grow:1}),i.a.createElement(c.EuiFlexItem,{grow:6},i.a.createElement(L.g,null,i.a.createElement(t.Component,{pkgkey:l,packageInfo:e})))):i.a.createElement(s.Redirect,{to:a("integration_details_overview",{pkgkey:l})})})),vt=({packageInfo:e,integration:t})=>{const{docLinks:a}=Object(o.oc)(),n=i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiFlexGroup,{gutterSize:"m",justifyContent:"spaceBetween"},i.a.createElement(c.EuiFlexItem,{grow:6},i.a.createElement(c.EuiText,null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.description",defaultMessage:"This documents all the inputs, streams, and variables available to use this integration programmatically via the Fleet Kibana API. {learnMore}",values:{learnMore:i.a.createElement(c.EuiLink,{href:a.links.fleet.guide},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.learnMoreLink",defaultMessage:"Learn more"}))}}))),i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiBetaBadge,{label:"beta"}))),i.a.createElement(c.EuiSpacer,{size:"m"}),i.a.createElement(Mt,{vars:e.vars}),i.a.createElement(yt,{packageInfo:e,integration:t}),i.a.createElement(c.EuiSpacer,{size:"m"}));return i.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},i.a.createElement(c.EuiFlexItem,{grow:1}),i.a.createElement(c.EuiFlexItem,{grow:6},n))},xt=({streams:e})=>0===e.length?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiTitle,{size:"xs"},i.a.createElement("h6",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.streamsTitle",defaultMessage:"Streams"}))),i.a.createElement(c.EuiSpacer,{size:"m"}),e.map((e=>i.a.createElement(c.EuiAccordion,{key:e.data_stream.type+e.data_stream.dataset,id:e.data_stream.type+e.data_stream.dataset,buttonContent:i.a.createElement(c.EuiText,null,i.a.createElement(c.EuiCode,null,e.data_stream.dataset),"(",e.title,")"),initialIsOpen:!1,paddingSize:"m"},i.a.createElement(c.EuiText,null,e.description),e.vars?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiSpacer,{size:"m"}),i.a.createElement(Ct,{vars:e.vars})):null)))),yt=({packageInfo:e,integration:t})=>{var a;const l=Object(n.useMemo)((()=>{var a;return null===(a=e.policy_templates)||void 0===a?void 0:a.reduce(((a,n)=>t&&n.name!==t?a:"inputs"in n&&n.inputs?[...a,...n.inputs.map((t=>({key:`${n.name}-${t.type}`,...t,streams:Object(ie.A)(t.type,e,[])})))]:a),[])}),[e,t]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiSpacer,{size:"m"}),i.a.createElement(c.EuiTitle,{size:"xs"},i.a.createElement("h4",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.inputsTitle",defaultMessage:"Inputs"}))),i.a.createElement(c.EuiSpacer,{size:"s"}),null!==(a=null==l?void 0:l.map((e=>i.a.createElement(c.EuiAccordion,{key:e.key,id:e.key,buttonContent:i.a.createElement(c.EuiText,null,i.a.createElement(c.EuiCode,null,e.key),"(",e.title,")"),initialIsOpen:!1,paddingSize:"m"},i.a.createElement(c.EuiText,null,e.description),e.vars?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiSpacer,{size:"m"}),i.a.createElement(Ct,{vars:e.vars})):null,i.a.createElement(c.EuiSpacer,{size:"m"}),i.a.createElement(xt,{streams:e.streams})))))&&void 0!==a?a:null)},Mt=({vars:e})=>e?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiTitle,{size:"xs"},i.a.createElement("h4",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.globalVariablesTitle",defaultMessage:"Package variables"}))),i.a.createElement(c.EuiSpacer,{size:"m"}),i.a.createElement(Ct,{vars:e}),i.a.createElement(c.EuiSpacer,{size:"m"})):null,Ct=({vars:e})=>{const t=Object(n.useMemo)((()=>[{field:"name",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.columnKeyName",defaultMessage:"Key"}),render:e=>i.a.createElement(c.EuiCode,null,e)},{field:"title",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.columnTitleName",defaultMessage:"Title"})},{field:"type",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.columnTypeName",defaultMessage:"Type"})},{field:"required",width:"70px",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.columnRequiredName",defaultMessage:"Required"})},{field:"multi",width:"70px",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.columnMultidName",defaultMessage:"Multi"})}]),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiTitle,{size:"xxs"},i.a.createElement("h6",null,i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.variableTableTitle",defaultMessage:"Variables"}))),i.a.createElement(c.EuiBasicTable,{columns:t,items:e}))};a(353);const jt=M.a.div.withConfig({displayName:"Divider",componentId:"sc-1xcdwih-0"})(["width:0;height:100%;border-left:",";"],(e=>e.theme.eui.euiBorderThin)),Ot=M()(c.EuiFlexItem).withConfig({displayName:"FlexItemWithMinWidth",componentId:"sc-1xcdwih-1"})(["min-width:0px;"]),wt=M()(c.EuiFlexItem).withConfig({displayName:"FlexItemWithMaxHeight",componentId:"sc-1xcdwih-2"})(["@media (min-width:768px){max-height:60px;}"]);function Ft({packageTitle:e}){return Object(E.r)("integration_details_overview",{pkgTitle:e}),null}function Pt(){var e,t,a,l,r,o;const{getId:u}=Object(E.p)(),{getFromIntegrations:m}=Object(E.I)(),{pkgkey:d,panel:g}=Object(s.useParams)(),{getHref:p,getPath:f}=Object(E.K)(),y=Object(E.q)().integrations.installPackages,M=Object(E.q)().integrations.readPackageSettings,C=Object(E.q)().integrations.readIntegrationPolicies,j=Object(E.Q)(),O=!(null!==(e=j.data)&&void 0!==e&&e.success)&&"MISSING_SECURITY"===(null===(t=j.data)||void 0===t?void 0:t.error),F=y&&(null===(a=j.data)||void 0===a?void 0:a.success),T=Object(s.useHistory)(),{pathname:S,search:_,hash:A}=Object(s.useLocation)(),N=Object(n.useMemo)((()=>new URLSearchParams(_)),[_]),z=Object(n.useMemo)((()=>N.get("integration")),[N]),D=Object(E.S)(),R=!(null==D||null===(l=D.cloud)||void 0===l||!l.cloudId),{createPackagePolicyMultiPageLayout:B}=w.a.get(),U=u(),$="overview"===g,[H,G]=Object(n.useState)(null),V=Object(E.R)(),W=Object(E.B)(),q=Object(E.T)(null!==(r=null==H?void 0:H.name)&&void 0!==r?r:"","package-detail-assets"),K=Object(n.useMemo)((()=>{if(null!==H&&H.name)return W(H.name).status}),[H,W]),Y=Object(n.useMemo)((()=>K===ve.b.installed||K===ve.b.reinstalling),[K]),X=H&&"savedObject"in H&&H.savedObject&&P()(H.savedObject.attributes.version,H.latestVersion),[J,Q]=i.a.useState(),{data:Z}=Object(E.G)();Object(n.useEffect)((()=>{const e=Boolean(null==Z?void 0:Z.item.prerelease_integrations_enabled);Q(e)}),[null==Z?void 0:Z.item.prerelease_integrations_enabled]);const{pkgName:ee,pkgVersion:te}=Object(ie.M)(d),{data:ae,error:ne,isLoading:le,isInitialRequest:re,resendRequest:se}=Object(E.A)(ee,te,{prerelease:J}),[oe,ce]=Object(n.useState)(),[ue,me]=Object(n.useState)(),{data:de}=Object(E.A)(ee,"",{prerelease:!1});Object(n.useEffect)((()=>{const e=null==de?void 0:de.item;e&&!Object(w.d)(e.version)&&ce(e.version)}),[null==de?void 0:de.item]);const{data:ge}=Object(E.A)(ee,"",{prerelease:!0});Object(n.useEffect)((()=>{me(null==ge?void 0:ge.item.version)}),[null==ge?void 0:ge.item.version]);const{isFirstTimeAgentUser:pe=!1,isLoading:fe}=(()=>{const[e,t]=Object(n.useState)({isLoading:!0});return Object(n.useEffect)((()=>{e.isLoading&&(async()=>{const{data:e}=await Object(E.i)({full:!0}),a=((null==e?void 0:e.items)||[]).filter((e=>Object(w.h)(e))).map((e=>`policy_id:${e.id}`)).join(" or "),n='not (_exists_:"unenrolled_at")'+(a.length?` and not (${a})`:""),{data:i}=await Object(E.j)({page:1,perPage:1,showInactive:!0,kuery:n});t({isLoading:!1,isFirstTimeAgentUser:0===(null==i?void 0:i.total)})})()}),[e]),e})(),Ee=Object(E.J)(ee),[he,be]=Object(n.useState)(K);Object(n.useEffect)((()=>{"not_installed"===K&&be(K),"not_installed"===he&&"installed"===K&&(be(K),se())}),[K,he,se]);const ke=le&&!re||j.isLoading||fe,je=void 0!==Object(E.T)(null!==(o=null==ae?void 0:ae.item.name)&&void 0!==o?o:"","package-detail-custom");Object(n.useEffect)((()=>{if(null!=ae&&ae.item){const e=ae.item;let t;G(e);const{name:a}=ae.item;"savedObject"in e&&(t=e.savedObject.attributes.version);const n=null==e?void 0:e.status;a&&V({name:a,status:n,version:t||null})}}),[ae,V,G]);const Fe=Object(n.useMemo)((()=>{var e;return z?null==H||null===(e=H.policy_templates)||void 0===e?void 0:e.find((e=>e.name===z)):void 0}),[z,H]),Pe=m(),Ie=p("updates_available"===Pe?"integrations_installed_updates_available":"installed"===Pe?"integrations_installed":"integrations_all"),Te=Object(n.useMemo)((()=>i.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"m"},i.a.createElement(c.EuiFlexItem,null,i.a.createElement("div",null,i.a.createElement(c.EuiButtonEmpty,{iconType:"arrowLeft",size:"xs",flush:"left",href:Ie},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.browseAllButtonText",defaultMessage:"Back to integrations"})))),i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiFlexGroup,{gutterSize:"l"},i.a.createElement(wt,{grow:!1},ke||!H?i.a.createElement(we,null):i.a.createElement(Oe,{packageName:H.name,integrationName:null==Fe?void 0:Fe.name,version:H.version,icons:(null==Fe?void 0:Fe.icons)||H.icons})),i.a.createElement(Ot,{grow:!0},i.a.createElement(c.EuiFlexGroup,{direction:"column",justifyContent:"flexStart",gutterSize:"xs"},i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiText,null,i.a.createElement("h1",null,(null==Fe?void 0:Fe.title)||(null==H?void 0:H.title)||""))),i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiBadge,{color:"default"},I.i18n.translate("xpack.fleet.epm.elasticAgentBadgeLabel",{defaultMessage:"Elastic Agent"}))),null!=H&&H.release&&"ga"!==H.release?i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(L.h,{release:Object(b.a)(H.version)})):null)))))))),[Fe,ke,H,Ie]),Se=Object(n.useCallback)((e=>{e.preventDefault();const t=T.createHref({pathname:S,search:_,hash:A}),a=(({currentPath:e,integration:t,agentPolicyId:a,pkgkey:n,isFirstTimeAgentUser:i,isCloud:l,isExperimentalAddIntegrationPageEnabled:r,isGuidedOnboardingActive:s})=>{const o=t?{integration:t}:{},c=(e=>xe.some((t=>e.startsWith(t))))(n),u=r&&l&&(i||s)&&!c,m=h.k.add_integration_to_policy({pkgkey:n,useMultiPageLayout:u,...o,...a?{agentPolicyId:a}:{}})[1];let d,g;a?(d=[h.i,{path:h.k.policy_details({policyId:a})[1]}],g={showAddAgentHelp:!0,openEnrollmentFlyout:!0}):(d=[h.d,{path:h.k.integration_details_policies({pkgkey:n,...o})[1]}],g={showAddAgentHelp:{renameKey:"showAddAgentHelpForPolicyId",policyIdAsValue:!0},openEnrollmentFlyout:{renameKey:"addAgentToPolicyId",policyIdAsValue:!0}});const p={onSaveNavigateTo:d,onSaveQueryParams:g,onCancelNavigateTo:[h.d,{path:h.k.integration_details_overview({pkgkey:n,...o})[1]}],onCancelUrl:e};return[h.i,{path:m,state:p}]})({agentPolicyId:U,currentPath:t,integration:z,isCloud:R,isExperimentalAddIntegrationPageEnabled:B,isFirstTimeAgentUser:pe,isGuidedOnboardingActive:Ee,pkgkey:d});D.application.navigateToApp(...a)}),[U,A,T,z,R,B,pe,Ee,S,d,_,D.application]),_e=Object(n.useMemo)((()=>J&&oe&&ue&&oe!==ue&&(!(null!=H&&H.version)||H.version===oe||H.version===ue)),[J,oe,ue,null==H?void 0:H.version]),Ae=Object(n.useMemo)((()=>[{value:ue,text:ue},{value:oe,text:oe}]),[ue,oe]),Ne=I.i18n.translate("xpack.fleet.epm.versionLabel",{defaultMessage:"Version"}),ze=Object(n.useCallback)(((e,t)=>{const a=f("integration_details_overview",{pkgkey:`${t}-${e}`});T.push(a)}),[f,T]),De=Object(n.useMemo)((()=>H?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiSpacer,{size:"l"}),i.a.createElement(c.EuiFlexGroup,{justifyContent:"flexEnd",direction:"row"},[{label:_e?void 0:Ne,content:i.a.createElement(c.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(c.EuiFlexItem,null,_e?i.a.createElement(c.EuiSelect,{"data-test-subj":"versionSelect",prepend:Ne,options:Ae,value:H.version,onChange:e=>ze(e.target.value,H.name)}):i.a.createElement("div",{"data-test-subj":"versionText"},H.version)),X?i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(Me,null)):null)},...Y?[{isDivider:!0},{label:I.i18n.translate("xpack.fleet.epm.usedByLabel",{defaultMessage:"Agent policies"}),"data-test-subj":"agentPolicyCount",content:i.a.createElement(Ce,{packageName:H.name})}]:[],{isDivider:!0},{content:i.a.createElement(L.m,{packageKey:d,tourType:"addIntegrationButton",isTourVisible:$&&Ee,tourOffset:10},i.a.createElement(ye,{userCanInstallPackages:F,href:p("add_integration_to_policy",{pkgkey:d,...z?{integration:z}:{},...U?{agentPolicyId:U}:{}}),missingSecurityConfiguration:O,packageName:(null==Fe?void 0:Fe.title)||H.title,onClick:Se}))}].map(((e,t)=>{var a;return i.a.createElement(c.EuiFlexItem,{grow:!1,key:t,"data-test-subj":e["data-test-subj"]},null!==(a=e.isDivider)&&void 0!==a&&a?i.a.createElement(jt,null):e.label?i.a.createElement(c.EuiDescriptionList,{className:"eui-textRight",compressed:!0,textStyle:"reverse"},i.a.createElement(c.EuiDescriptionListTitle,null,e.label),i.a.createElement(c.EuiDescriptionListDescription,null,e.content)):e.content)})))):void 0),[H,X,Y,d,$,Ee,F,p,z,U,O,null==Fe?void 0:Fe.title,Se,ze,_e,Ne,Ae]),Re=Object(n.useMemo)((()=>{if(!H)return[];const e=Object(w.g)(H),t=[{id:"overview",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.overviewLinkText",defaultMessage:"Overview"}),isSelected:"overview"===g,"data-test-subj":"tab-overview",href:p("integration_details_overview",{pkgkey:e,...z?{integration:z}:{}})}];return C&&Y&&t.push({id:"policies",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.packagePoliciesLinkText",defaultMessage:"Integration policies"}),isSelected:"policies"===g,"data-test-subj":"tab-policies",href:p("integration_details_policies",{pkgkey:e,...z?{integration:z}:{}})}),Y&&(H.assets||q)&&t.push({id:"assets",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.packageAssetsLinkText",defaultMessage:"Assets"}),isSelected:"assets"===g,"data-test-subj":"tab-assets",href:p("integration_details_assets",{pkgkey:e,...z?{integration:z}:{}})}),M&&t.push({id:"settings",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.settingsLinkText",defaultMessage:"Settings"}),isSelected:"settings"===g,"data-test-subj":"tab-settings",href:p("integration_details_settings",{pkgkey:e,...z?{integration:z}:{}})}),M&&je&&t.push({id:"custom",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.packageCustomLinkText",defaultMessage:"Advanced"}),isSelected:"custom"===g,"data-test-subj":"tab-custom",href:p("integration_details_custom",{pkgkey:e,...z?{integration:z}:{}})}),k.K.includes(H.name)||t.push({id:"api-reference",name:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.documentationLinkText",defaultMessage:"API reference"}),isSelected:"api-reference"===g,"data-test-subj":"tab-api-reference",href:p("integration_details_api_reference",{pkgkey:e,...z?{integration:z}:{}})}),t}),[H,g,p,z,C,Y,q,M,je]),Be=O?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.EuiCallOut,{color:"warning",iconType:"lock",title:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsSecurityRequiredCalloutTitle",defaultMessage:"Security needs to be enabled in order to add Elastic Agent integrations"})},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsSecurityRequiredCalloutDescription",defaultMessage:"In order to fully use Fleet, you must enable Elasticsearch and Kibana security features. Follow the {guideLink} to enable security.",values:{guideLink:i.a.createElement("a",{href:D.http.basePath.prepend("/app/fleet")},i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsSecurityRequiredCalloutDescriptionGuideLink",defaultMessage:"steps in this guide"}))}})),i.a.createElement(c.EuiSpacer,null)):void 0;return i.a.createElement(v.a,{leftColumn:Te,rightColumn:De,rightColumnGrow:!1,topContent:Be,tabs:Re,tabsClassName:"fleet__epm__shiftNavTabs"},Fe||H?i.a.createElement(Ft,{packageTitle:(null==Fe?void 0:Fe.title)||(null==H?void 0:H.title)||""}):null,ne?i.a.createElement(L.e,{title:i.a.createElement(x.FormattedMessage,{id:"xpack.fleet.epm.loadingIntegrationErrorTitle",defaultMessage:"Error loading integration details"}),error:ne}):ke||!H?i.a.createElement(L.k,null):i.a.createElement(s.Switch,null,i.a.createElement(s.Route,{path:h.e.integration_details_overview},i.a.createElement(Qe,{packageInfo:H,integrationInfo:Fe,latestGAVersion:oe})),i.a.createElement(s.Route,{path:h.e.integration_details_settings},i.a.createElement(bt,{packageInfo:H,theme$:D.theme.theme$})),i.a.createElement(s.Route,{path:h.e.integration_details_assets},i.a.createElement(Le,{packageInfo:H})),i.a.createElement(s.Route,{path:h.e.integration_details_policies},i.a.createElement(st,{name:H.name,version:H.version})),i.a.createElement(s.Route,{path:h.e.integration_details_custom},i.a.createElement(kt,{packageInfo:H})),i.a.createElement(s.Route,{path:h.e.integration_details_api_reference},i.a.createElement(vt,{packageInfo:H,integration:null==Fe?void 0:Fe.name})),i.a.createElement(s.Redirect,{to:h.e.integration_details_overview})))}var It=a(151);const Tt=Object(n.memo)((()=>{var e,t,a,n;const{params:{packagePolicyId:l}}=Object(s.useRouteMatch)(),r=Object(E.z)(l),o=Object(E.T)(null!==(e=null===(t=r.data)||void 0===t||null===(a=t.item)||void 0===a||null===(n=a.package)||void 0===n?void 0:n.name)&&void 0!==e?e:"","package-policy-edit");return i.a.createElement(It.a,{packagePolicyId:l,from:"package-edit",forceUpgrade:null==o?void 0:o.useLatestPackageVersion})}));var St=a(25);const Lt=()=>{const{pkgkey:e}=Object(s.useParams)(),{getPath:t}=Object(E.K)();Object(E.r)("integration_details_overview",{pkgTitle:Object(ae.capitalize)(e)});const a=Object(St.b)().languageClientsUiComponents[e];return a?i.a.createElement(a,null):i.a.createElement(s.Redirect,{to:t("integrations_all")})},_t=()=>(Object(E.r)("integrations"),i.a.createElement(s.Switch,null,i.a.createElement(s.Route,{path:h.e.integration_policy_edit},i.a.createElement(Tt,null)),i.a.createElement(s.Route,{path:h.e.integration_details},i.a.createElement(E.d,null,i.a.createElement(Pt,null))),i.a.createElement(s.Route,{path:h.e.integration_details_language_clients},i.a.createElement(E.d,null,i.a.createElement(i.a.Suspense,{fallback:i.a.createElement(c.EuiLoadingContent,null)},i.a.createElement(Lt,null)))),i.a.createElement(s.Route,{path:h.e.integrations},i.a.createElement(ke,null))));var At,Nt=(At=function(e,t){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},At(e,t)},function(e,t){function a(){this.constructor=e}At(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),zt="html",Dt="svg",Rt=function(e,t){var a,n,i,l={};if(e===zt)i=document.createElement("div");else{if(e!==Dt)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');i=document.createElementNS("http://www.w3.org/2000/svg","g")}if(t&&"object"==typeof t)for(var r=0,s=Object.entries(t.attributes);r<s.length;r++){var o=s[r],c=o[0],u=o[1];i.setAttribute(c,u)}var m={element:i,elementType:e,setPortalProps:function(e){l=e},getInitialPortalProps:function(){return l},mount:function(t,i){if(i!==n){if(m.unmount(),t!==a&&!function(e,t){if(t===zt)return e instanceof HTMLElement;if(t===Dt)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(t,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+t.tagName+">.");t.replaceChild(m.element,i),a=t,n=i}},unmount:function(e){e&&e!==n||a&&n&&(a.replaceChild(n,m.element),a=void 0,n=void 0)}};return m},Bt=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return Nt(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,i=t.node;return l.createPortal(n.Children.map(a,(function(t){return n.isValidElement(t)?n.cloneElement(t,e.state.nodeProps):t})),i.element)},t}(n.PureComponent),Ut=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=n.createRef(),a.passPropsThroughPortal(),a}return Nt(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=e);var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return n.createElement("div",{ref:this.placeholderNode})},t}(n.PureComponent),$t=Rt.bind(null,zt);Rt.bind(null,Dt);const Ht=({children:e,setHeaderActionMenu:t,theme$:a})=>{const l=Object(n.useMemo)((()=>$t()),[]);return Object(n.useEffect)((()=>(t((e=>Object(d.toMountPoint)(i.a.createElement(Ut,{node:l}),{theme$:a})(e))),()=>{l.unmount(),t(void 0)})),[l,t,a]),i.a.createElement(Bt,{node:l},e)},Gt=M()(c.EuiText).withConfig({displayName:"Description",componentId:"sc-kml9g-0"})(["margin-bottom:",";"],(({theme:e})=>e.eui.euiSizeL)),Vt=({cloudId:e,learnMoreUrl:t,managementUrl:a})=>{const[n,l]=i.a.useState(!1),r=i.a.createElement(c.EuiHeaderLink,{onClick:()=>l(!n),iconType:"iInCircle",iconSide:"left",isActive:!0},I.i18n.translate("xpack.fleet.integrations.deploymentButton",{defaultMessage:"View deployment details"})),s=a?i.a.createElement(c.EuiFormRow,{label:"API keys",fullWidth:!0},i.a.createElement(c.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiButton,{href:a},"Create and manage API keys")),i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiLink,{external:!0,href:t,target:"_blank"},"Learn more")))):null;return i.a.createElement(c.EuiPopover,{isOpen:n,closePopover:()=>l(!1),button:r,anchorPosition:"downCenter"},i.a.createElement("div",{style:{width:450}},i.a.createElement(Gt,null,I.i18n.translate("xpack.fleet.integrations.deploymentDescription",{defaultMessage:"Send data to Elastic from your applications by referencing your deployment."})),i.a.createElement(c.EuiForm,{component:"div"},i.a.createElement(c.EuiFormRow,{label:"Cloud ID",fullWidth:!0},i.a.createElement(c.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(c.EuiFlexItem,null,i.a.createElement(c.EuiFieldText,{value:e,fullWidth:!0,disabled:!0})),i.a.createElement(c.EuiFlexItem,{grow:!1},i.a.createElement(c.EuiCopy,{textToCopy:e},(e=>i.a.createElement(c.EuiButtonIcon,{onClick:e,iconType:"copyClipboard",display:"base",size:"m"})))))),s)))},Wt=()=>{var e;const{share:t,cloud:a,docLinks:n}=Object(E.S)();if(!a)return null;const{isCloudEnabled:l,cloudId:r}=a;if(!l||!r)return null;const s=null===(e=t.url.locators.get("MANAGEMENT_APP_LOCATOR"))||void 0===e?void 0:e.useUrl({sectionId:"security",appId:"api_keys"}),o=n.links.fleet.apiKeysLearnMore;return i.a.createElement(Vt,{cloudId:r,managementUrl:s,learnMoreUrl:o})},qt=({setHeaderActionMenu:e,theme$:t})=>i.a.createElement(Ht,{setHeaderActionMenu:e,theme$:t},i.a.createElement(c.EuiHeaderSection,{grow:!1},i.a.createElement(c.EuiHeaderSectionItem,null,i.a.createElement(c.EuiHeaderLinks,null,i.a.createElement(Wt,null))))),Kt=()=>i.a.createElement(i.a.Fragment,null),Yt=Object(n.memo)((({children:e,startServices:t,config:a,history:n,kibanaVersion:l,extensions:r,setHeaderActionMenu:u,theme$:f})=>{var h;const b=m()(t.uiSettings.get$("theme:darkMode")),k=(null===(h=t.cloud)||void 0===h?void 0:h.CloudContextProvider)||Kt;return i.a.createElement(d.RedirectAppLinks,{application:t.application},i.a.createElement(t.i18n.Context,null,i.a.createElement(d.KibanaContextProvider,{services:{...t}},i.a.createElement(c.EuiErrorBoundary,null,i.a.createElement(o.b.Provider,{value:a},i.a.createElement(o.e.Provider,{value:l},i.a.createElement(d.KibanaThemeProvider,{theme$:f},i.a.createElement(g.EuiThemeProvider,{darkMode:b},i.a.createElement(E.f.Provider,{value:r},i.a.createElement(o.c,null,i.a.createElement(t.customIntegrations.ContextProvider,null,i.a.createElement(k,null,i.a.createElement(s.Router,{history:n},i.a.createElement(E.a,null,i.a.createElement(E.e,{notifications:t.notifications,theme$:f},i.a.createElement(E.c,null,i.a.createElement(qt,{setHeaderActionMenu:u,theme$:f}),e,i.a.createElement(p.Chat,null)))))))))))))))))})),Xt=Object(n.memo)((()=>{var e;const t=Object(E.w)(),a=Object(o.Db)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Switch,null,i.a.createElement(s.Route,{path:h.e.integrations},i.a.createElement(_t,null)),i.a.createElement(s.Route,{render:({location:e})=>{if(!(""===e.pathname&&e.hash.length>0))return i.a.createElement(s.Redirect,{to:h.k.integrations_all({})[1]});const t=e.hash.replace(/^#/,"");return i.a.createElement(s.Redirect,{to:{...e,pathname:t,hash:void 0}})}})),t.isEnrollmentFlyoutOpen&&i.a.createElement(c.EuiPortal,null,i.a.createElement(L.b,{defaultMode:a.isReady&&null!==(e=a.missingRequirements)&&void 0!==e&&e.includes("fleet_server")?"managed":"standalone",isIntegrationFlow:!0,onClose:()=>t.closeEnrollmentFlyout()})),t.isFleetServerFlyoutOpen&&i.a.createElement(c.EuiPortal,null,i.a.createElement(f.l,{onClose:()=>t.closeFleetServerFlyout()})))})),Jt=({isAllowed:e=!1,restrictedPath:t="/",...a})=>e?i.a.createElement(s.Route,a):i.a.createElement(s.Redirect,{to:{pathname:t}}),Qt=({basepath:e,startServices:t,config:a,history:n,kibanaVersion:l,extensions:r,setHeaderActionMenu:s,theme$:o})=>i.a.createElement(Yt,{basepath:e,startServices:t,config:a,history:n,kibanaVersion:l,extensions:r,setHeaderActionMenu:s,theme$:o},i.a.createElement(Xt,null));function Zt(e,{element:t,appBasePath:a,history:n,setHeaderActionMenu:l,theme$:s},o,c,u,m){return r.a.render(i.a.createElement(m,null,i.a.createElement(Qt,{basepath:a,startServices:e,config:o,history:n,kibanaVersion:c,extensions:u,setHeaderActionMenu:l,theme$:s})),t),()=>{r.a.unmountComponentAtNode(t)}}const ea=e=>{e.chrome.docTitle.reset(),e.chrome.setBreadcrumbs([]),o.j.stop()}}])]);