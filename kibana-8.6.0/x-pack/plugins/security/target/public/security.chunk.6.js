/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.security_bundle_jsonpfunction=window.security_bundle_jsonpfunction||[]).push([[6],{120:function(e,t,r){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=a(r(121)),s=a(r(122)),o=a(r(123)),u=a(r(124)),l=a(r(125)),c=a(r(133)),d=a(r(134)),p=a(r(135));function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function v(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)t.indexOf(r=i[a])>=0||(n[r]=e[r]);return n}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){return Array.isArray(e)&&0===e.length},b=function(e){return"function"==typeof e},j=function(e){return null!==e&&"object"==typeof e},y=function(e){return String(Math.floor(Number(e)))===e},x=function(e){return"[object String]"===Object.prototype.toString.call(e)},O=function(e){return 0===n.Children.count(e)},E=function(e){return j(e)&&b(e.then)};function F(e,t,r,a){void 0===a&&(a=0);for(var n=l(t);e&&a<n.length;)e=e[n[a++]];return void 0===e?r:e}function S(e,t,r){for(var a=u(e),n=a,i=0,s=l(t);i<s.length-1;i++){var o=s[i],c=F(e,s.slice(0,i+1));if(c&&(j(c)||Array.isArray(c)))n=n[o]=u(c);else{var d=s[i+1];n=n[o]=y(d)&&Number(d)>=0?[]:{}}}return(0===i?e:n)[s[i]]===r?e:(void 0===r?delete n[s[i]]:n[s[i]]=r,0===i&&void 0===r&&delete a[s[i]],a)}function w(e,t,r,a){void 0===r&&(r=new WeakMap),void 0===a&&(a={});for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n],o=e[s];j(o)?r.get(o)||(r.set(o,!0),a[s]=Array.isArray(o)?[]:{},w(o,t,r,a[s])):a[s]=t}return a}var M=n.createContext(void 0);M.displayName="FormikContext";var T=M.Provider,k=M.Consumer;function P(){var e=n.useContext(M);return e||c(!1),e}function _(e,t){switch(t.type){case"SET_VALUES":return f({},e,{values:t.payload});case"SET_TOUCHED":return f({},e,{touched:t.payload});case"SET_ERRORS":return i(e.errors,t.payload)?e:f({},e,{errors:t.payload});case"SET_STATUS":return f({},e,{status:t.payload});case"SET_ISSUBMITTING":return f({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return f({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return f({},e,{values:S(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return f({},e,{touched:S(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return f({},e,{errors:S(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return f({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return f({},e,{touched:w(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return f({},e,{isSubmitting:!1});default:return e}}var C={},I={};function R(e){var t=e.validateOnChange,r=void 0===t||t,a=e.validateOnBlur,o=void 0===a||a,u=e.validateOnMount,l=void 0!==u&&u,c=e.isInitialValid,d=e.enableReinitialize,p=void 0!==d&&d,m=e.onSubmit,g=v(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),h=f({validateOnChange:r,validateOnBlur:o,validateOnMount:l,onSubmit:m},g),y=n.useRef(h.initialValues),O=n.useRef(h.initialErrors||C),w=n.useRef(h.initialTouched||I),M=n.useRef(h.initialStatus),T=n.useRef(!1),k=n.useRef({});n.useEffect((function(){return T.current=!0,function(){T.current=!1}}),[]);var P=n.useReducer(_,{values:h.initialValues,errors:h.initialErrors||C,touched:h.initialTouched||I,status:h.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),R=P[0],A=P[1],L=n.useCallback((function(e,t){return new Promise((function(r,a){var n=h.validate(e,t);null==n?r(C):E(n)?n.then((function(e){r(e||C)}),(function(e){a(e)})):r(n)}))}),[h.validate]),B=n.useCallback((function(e,t){var r=h.validationSchema,a=b(r)?r(t):r,n=t&&a.validateAt?a.validateAt(t,e):D(e,a);return new Promise((function(e,t){n.then((function(){e(C)}),(function(r){"ValidationError"===r.name?e(U(r)):t(r)}))}))}),[h.validationSchema]),G=n.useCallback((function(e,t){return new Promise((function(r){return r(k.current[e].validate(t))}))}),[]),W=n.useCallback((function(e){var t=Object.keys(k.current).filter((function(e){return b(k.current[e].validate)})),r=t.length>0?t.map((function(t){return G(t,F(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(r).then((function(e){return e.reduce((function(e,r,a){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===r||r&&(e=S(e,t[a],r)),e}),{})}))}),[G]),z=n.useCallback((function(e){return Promise.all([W(e),h.validationSchema?B(e):{},h.validate?L(e):{}]).then((function(e){return s.all([e[0],e[1],e[2]],{arrayMerge:V})}))}),[h.validate,h.validationSchema,W,L,B]),H=N((function(e){return void 0===e&&(e=R.values),A({type:"SET_ISVALIDATING",payload:!0}),z(e).then((function(e){return T.current&&(A({type:"SET_ISVALIDATING",payload:!1}),A({type:"SET_ERRORS",payload:e})),e}))}));n.useEffect((function(){l&&!0===T.current&&i(y.current,h.initialValues)&&H(y.current)}),[l,H]);var q=n.useCallback((function(e){var t=e&&e.values?e.values:y.current,r=e&&e.errors?e.errors:O.current?O.current:h.initialErrors||{},a=e&&e.touched?e.touched:w.current?w.current:h.initialTouched||{},n=e&&e.status?e.status:M.current?M.current:h.initialStatus;y.current=t,O.current=r,w.current=a,M.current=n;var i=function(){A({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:r,touched:a,status:n,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"==typeof e.submitCount?e.submitCount:0}})};if(h.onReset){var s=h.onReset(R.values,de);E(s)?s.then(i):i()}else i()}),[h.initialErrors,h.initialStatus,h.initialTouched]);n.useEffect((function(){!0!==T.current||i(y.current,h.initialValues)||(p&&(y.current=h.initialValues,q()),l&&H(y.current))}),[p,h.initialValues,q,l,H]),n.useEffect((function(){p&&!0===T.current&&!i(O.current,h.initialErrors)&&(O.current=h.initialErrors||C,A({type:"SET_ERRORS",payload:h.initialErrors||C}))}),[p,h.initialErrors]),n.useEffect((function(){p&&!0===T.current&&!i(w.current,h.initialTouched)&&(w.current=h.initialTouched||I,A({type:"SET_TOUCHED",payload:h.initialTouched||I}))}),[p,h.initialTouched]),n.useEffect((function(){p&&!0===T.current&&!i(M.current,h.initialStatus)&&(M.current=h.initialStatus,A({type:"SET_STATUS",payload:h.initialStatus}))}),[p,h.initialStatus,h.initialTouched]);var K=N((function(e){if(k.current[e]&&b(k.current[e].validate)){var t=F(R.values,e),r=k.current[e].validate(t);return E(r)?(A({type:"SET_ISVALIDATING",payload:!0}),r.then((function(e){return e})).then((function(t){A({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),A({type:"SET_ISVALIDATING",payload:!1})}))):(A({type:"SET_FIELD_ERROR",payload:{field:e,value:r}}),Promise.resolve(r))}return h.validationSchema?(A({type:"SET_ISVALIDATING",payload:!0}),B(R.values,e).then((function(e){return e})).then((function(t){A({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),A({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),$=n.useCallback((function(e,t){k.current[e]={validate:t.validate}}),[]),Y=n.useCallback((function(e){delete k.current[e]}),[]),X=N((function(e,t){return A({type:"SET_TOUCHED",payload:e}),(void 0===t?o:t)?H(R.values):Promise.resolve()})),J=n.useCallback((function(e){A({type:"SET_ERRORS",payload:e})}),[]),Q=N((function(e,t){var a=b(e)?e(R.values):e;return A({type:"SET_VALUES",payload:a}),(void 0===t?r:t)?H(a):Promise.resolve()})),Z=n.useCallback((function(e,t){A({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),ee=N((function(e,t,a){return A({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===a?r:a)?H(S(R.values,e,t)):Promise.resolve()})),te=n.useCallback((function(e,t){var r,a=t,n=e;if(!x(e)){e.persist&&e.persist();var i=e.target?e.target:e.currentTarget,s=i.type,o=i.value,u=i.checked,l=i.options,c=i.multiple;a=t||i.name||i.id,n=/number|range/.test(s)?(r=parseFloat(o),isNaN(r)?"":r):/checkbox/.test(s)?function(e,t,r){if("boolean"==typeof e)return Boolean(t);var a=[],n=!1,i=-1;if(Array.isArray(e))a=e,n=(i=e.indexOf(r))>=0;else if(!r||"true"==r||"false"==r)return Boolean(t);return t&&r&&!n?a.concat(r):n?a.slice(0,i).concat(a.slice(i+1)):a}(F(R.values,a),u,o):l&&c?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(l):o}a&&ee(a,n)}),[ee,R.values]),re=N((function(e){if(x(e))return function(t){return te(t,e)};te(e)})),ae=N((function(e,t,r){return void 0===t&&(t=!0),A({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===r?o:r)?H(R.values):Promise.resolve()})),ne=n.useCallback((function(e,t){e.persist&&e.persist();var r=e.target;ae(t||r.name||r.id,!0)}),[ae]),ie=N((function(e){if(x(e))return function(t){return ne(t,e)};ne(e)})),se=n.useCallback((function(e){b(e)?A({type:"SET_FORMIK_STATE",payload:e}):A({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),oe=n.useCallback((function(e){A({type:"SET_STATUS",payload:e})}),[]),ue=n.useCallback((function(e){A({type:"SET_ISSUBMITTING",payload:e})}),[]),le=N((function(){return A({type:"SUBMIT_ATTEMPT"}),H().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var r;try{if(void 0===(r=pe()))return}catch(e){throw e}return Promise.resolve(r).then((function(e){return T.current&&A({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(T.current)throw A({type:"SUBMIT_FAILURE"}),e}))}if(T.current&&(A({type:"SUBMIT_FAILURE"}),t))throw e}))})),ce=N((function(e){e&&e.preventDefault&&b(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&b(e.stopPropagation)&&e.stopPropagation(),le().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),de={resetForm:q,validateForm:H,validateField:K,setErrors:J,setFieldError:Z,setFieldTouched:ae,setFieldValue:ee,setStatus:oe,setSubmitting:ue,setTouched:X,setValues:Q,setFormikState:se,submitForm:le},pe=N((function(){return m(R.values,de)})),fe=N((function(e){e&&e.preventDefault&&b(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&b(e.stopPropagation)&&e.stopPropagation(),q()})),me=n.useCallback((function(e){return{value:F(R.values,e),error:F(R.errors,e),touched:!!F(R.touched,e),initialValue:F(y.current,e),initialTouched:!!F(w.current,e),initialError:F(O.current,e)}}),[R.errors,R.touched,R.values]),ve=n.useCallback((function(e){return{setValue:function(t,r){return ee(e,t,r)},setTouched:function(t,r){return ae(e,t,r)},setError:function(t){return Z(e,t)}}}),[ee,ae,Z]),ge=n.useCallback((function(e){var t=j(e),r=t?e.name:e,a=F(R.values,r),n={name:r,value:a,onChange:re,onBlur:ie};if(t){var i=e.type,s=e.value,o=e.as,u=e.multiple;"checkbox"===i?void 0===s?n.checked=!!a:(n.checked=!(!Array.isArray(a)||!~a.indexOf(s)),n.value=s):"radio"===i?(n.checked=a===s,n.value=s):"select"===o&&u&&(n.value=n.value||[],n.multiple=!0)}return n}),[ie,re,R.values]),he=n.useMemo((function(){return!i(y.current,R.values)}),[y.current,R.values]),be=n.useMemo((function(){return void 0!==c?he?R.errors&&0===Object.keys(R.errors).length:!1!==c&&b(c)?c(h):c:R.errors&&0===Object.keys(R.errors).length}),[c,he,R.errors,h]);return f({},R,{initialValues:y.current,initialErrors:O.current,initialTouched:w.current,initialStatus:M.current,handleBlur:ie,handleChange:re,handleReset:fe,handleSubmit:ce,resetForm:q,setErrors:J,setFormikState:se,setFieldTouched:ae,setFieldValue:ee,setFieldError:Z,setStatus:oe,setSubmitting:ue,setTouched:X,setValues:Q,submitForm:le,validateForm:H,validateField:K,isValid:be,dirty:he,unregisterField:Y,registerField:$,getFieldProps:ge,getFieldMeta:me,getFieldHelpers:ve,validateOnBlur:o,validateOnChange:r,validateOnMount:l})}function A(e){var t=R(e),r=e.component,a=e.children,i=e.render;return n.useImperativeHandle(e.innerRef,(function(){return t})),n.createElement(T,{value:t},r?n.createElement(r,t):i?i(t):a?b(a)?a(t):O(a)?null:n.Children.only(a):null)}function U(e){var t={};if(e.inner){if(0===e.inner.length)return S(t,e.path,e.message);var r=e.inner,a=Array.isArray(r),n=0;for(r=a?r:r[Symbol.iterator]();;){var i;if(a){if(n>=r.length)break;i=r[n++]}else{if((n=r.next()).done)break;i=n.value}var s=i;F(t,s.path)||(t=S(t,s.path,s.message))}}return t}function D(e,t,r,a){void 0===r&&(r=!1),void 0===a&&(a={});var n=L(e);return t[r?"validateSync":"validate"](n,{abortEarly:!1,context:a})}function L(e){var t=Array.isArray(e)?[]:{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=String(r);t[a]=!0===Array.isArray(e[a])?e[a].map((function(e){return!0===Array.isArray(e)||o(e)?L(e):""!==e?e:void 0})):o(e[a])?L(e[a]):""!==e[a]?e[a]:void 0}return t}function V(e,t,r){var a=e.slice();return t.forEach((function(t,n){if(void 0===a[n]){var i=!1!==r.clone&&r.isMergeableObject(t);a[n]=i?s(Array.isArray(t)?[]:{},t,r):t}else r.isMergeableObject(t)?a[n]=s(e[n],t,r):-1===e.indexOf(t)&&a.push(t)})),a}var B="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect;function N(e){var t=n.useRef(e);return B((function(){t.current=e})),n.useCallback((function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.current.apply(void 0,r)}),[])}var G=n.forwardRef((function(e,t){var r=e.action,a=v(e,["action"]),i=null!=r?r:"#",s=P();return n.createElement("form",Object.assign({onSubmit:s.handleSubmit,ref:t,onReset:s.handleReset,action:i},a))}));function W(e){var t=function(t){return n.createElement(k,null,(function(r){return r||c(!1),n.createElement(e,Object.assign({},t,{formik:r}))}))},r=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t.WrappedComponent=e,t.displayName="FormikConnect("+r+")",d(t,e)}G.displayName="Form";var z=function(e,t,r){var a=$(e),n=a[t];return a.splice(t,1),a.splice(r,0,n),a},H=function(e,t,r){var a=$(e),n=a[t];return a[t]=a[r],a[r]=n,a},q=function(e,t,r){var a=$(e);return a.splice(t,0,r),a},K=function(e,t,r){var a=$(e);return a[t]=r,a},$=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(f({},e,{length:t+1}))}return[]},Y=function(e){function t(t){var r;return(r=e.call(this,t)||this).updateArrayField=function(e,t,a){var n=r.props,i=n.name;(0,n.formik.setFormikState)((function(r){var n="function"==typeof a?a:e,s="function"==typeof t?t:e,o=S(r.values,i,e(F(r.values,i))),u=a?n(F(r.errors,i)):void 0,l=t?s(F(r.touched,i)):void 0;return h(u)&&(u=void 0),h(l)&&(l=void 0),f({},r,{values:o,errors:a?S(r.errors,i,u):r.errors,touched:t?S(r.touched,i,l):r.touched})}))},r.push=function(e){return r.updateArrayField((function(t){return[].concat($(t),[p(e)])}),!1,!1)},r.handlePush=function(e){return function(){return r.push(e)}},r.swap=function(e,t){return r.updateArrayField((function(r){return H(r,e,t)}),!0,!0)},r.handleSwap=function(e,t){return function(){return r.swap(e,t)}},r.move=function(e,t){return r.updateArrayField((function(r){return z(r,e,t)}),!0,!0)},r.handleMove=function(e,t){return function(){return r.move(e,t)}},r.insert=function(e,t){return r.updateArrayField((function(r){return q(r,e,t)}),(function(t){return q(t,e,null)}),(function(t){return q(t,e,null)}))},r.handleInsert=function(e,t){return function(){return r.insert(e,t)}},r.replace=function(e,t){return r.updateArrayField((function(r){return K(r,e,t)}),!1,!1)},r.handleReplace=function(e,t){return function(){return r.replace(e,t)}},r.unshift=function(e){var t=-1;return r.updateArrayField((function(r){var a=r?[e].concat(r):[e];return t<0&&(t=a.length),a}),(function(e){var r=e?[null].concat(e):[null];return t<0&&(t=r.length),r}),(function(e){var r=e?[null].concat(e):[null];return t<0&&(t=r.length),r})),t},r.handleUnshift=function(e){return function(){return r.unshift(e)}},r.handleRemove=function(e){return function(){return r.remove(e)}},r.handlePop=function(){return function(){return r.pop()}},r.remove=r.remove.bind(g(r)),r.pop=r.pop.bind(g(r)),r}m(t,e);var r=t.prototype;return r.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!i(F(e.formik.values,e.name),F(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},r.remove=function(e){var t;return this.updateArrayField((function(r){var a=r?$(r):[];return t||(t=a[e]),b(a.splice)&&a.splice(e,1),a}),!0,!0),t},r.pop=function(){var e;return this.updateArrayField((function(t){var r=t;return e||(e=r&&r.pop&&r.pop()),r}),!0,!0),e},r.render=function(){var e=this.props,t=e.component,r=e.render,a=e.children,i=e.name,s=f({},{push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},{form:v(e.formik,["validate","validationSchema"]),name:i});return t?n.createElement(t,s):r?r(s):a?"function"==typeof a?a(s):O(a)?null:n.Children.only(a):null},t}(n.Component);Y.defaultProps={validateOnChange:!0};var X=W(Y),J=W(function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var r=t.prototype;return r.shouldComponentUpdate=function(e){return F(this.props.formik.errors,this.props.name)!==F(e.formik.errors,this.props.name)||F(this.props.formik.touched,this.props.name)!==F(e.formik.touched,this.props.name)||Object.keys(this.props).length!==Object.keys(e).length},r.render=function(){var e=this.props,t=e.component,r=e.formik,a=e.render,i=e.children,s=e.name,o=v(e,["component","formik","render","children","name"]),u=F(r.touched,s),l=F(r.errors,s);return u&&l?a?b(a)?a(l):null:i?b(i)?i(l):null:t?n.createElement(t,o,l):l:null},t}(n.Component)),Q=W(function(e){function t(t){var r;r=e.call(this,t)||this;var a=t.render,n=t.children,i=t.component,s=t.as;return a&&c(!1),i&&a&&c(!1),s&&n&&b(n)&&c(!1),i&&n&&b(n)&&c(!1),a&&n&&!O(n)&&c(!1),r}m(t,e);var r=t.prototype;return r.shouldComponentUpdate=function(e){return this.props.shouldUpdate?this.props.shouldUpdate(e,this.props):e.name!==this.props.name||F(e.formik.values,this.props.name)!==F(this.props.formik.values,this.props.name)||F(e.formik.errors,this.props.name)!==F(this.props.formik.errors,this.props.name)||F(e.formik.touched,this.props.name)!==F(this.props.formik.touched,this.props.name)||Object.keys(this.props).length!==Object.keys(e).length||e.formik.isSubmitting!==this.props.formik.isSubmitting},r.componentDidMount=function(){this.props.formik.registerField(this.props.name,{validate:this.props.validate})},r.componentDidUpdate=function(e){this.props.name!==e.name&&(this.props.formik.unregisterField(e.name),this.props.formik.registerField(this.props.name,{validate:this.props.validate})),this.props.validate!==e.validate&&this.props.formik.registerField(this.props.name,{validate:this.props.validate})},r.componentWillUnmount=function(){this.props.formik.unregisterField(this.props.name)},r.render=function(){var e=this.props,t=e.name,r=e.render,a=e.as,i=e.children,s=e.component,o=e.formik,u=v(e,["validate","name","render","as","children","component","shouldUpdate","formik"]),l=v(o,["validate","validationSchema"]),c=o.getFieldProps(f({name:t},u)),d={field:c,meta:{value:F(o.values,t),error:F(o.errors,t),touched:!!F(o.touched,t),initialValue:F(o.initialValues,t),initialTouched:!!F(o.initialTouched,t),initialError:F(o.initialErrors,t)},form:l};if(r)return r(d);if(b(i))return i(d);if(s){if("string"==typeof s){var p=u.innerRef,m=v(u,["innerRef"]);return n.createElement(s,f({ref:p},c,m),i)}return n.createElement(s,f({field:c,form:o},u),i)}var g=a||"input";if("string"==typeof g){var h=u.innerRef,j=v(u,["innerRef"]);return n.createElement(g,f({ref:h},c,j),i)}return n.createElement(g,f({},c,u),i)},t}(n.Component));t.ErrorMessage=J,t.FastField=Q,t.Field=function(e){var t=e.validate,r=e.name,a=e.render,i=e.children,s=e.as,o=e.component,u=v(e,["validate","name","render","children","as","component"]),l=v(P(),["validate","validationSchema"]),c=l.registerField,d=l.unregisterField;n.useEffect((function(){return c(r,{validate:t}),function(){d(r)}}),[c,d,r,t]);var p=l.getFieldProps(f({name:r},u)),m=l.getFieldMeta(r),g={field:p,form:l};if(a)return a(f({},g,{meta:m}));if(b(i))return i(f({},g,{meta:m}));if(o){if("string"==typeof o){var h=u.innerRef,j=v(u,["innerRef"]);return n.createElement(o,f({ref:h},p,j),i)}return n.createElement(o,f({field:p,form:l},u),i)}var y=s||"input";if("string"==typeof y){var x=u.innerRef,O=v(u,["innerRef"]);return n.createElement(y,f({ref:x},p,O),i)}return n.createElement(y,f({},p,u),i)},t.FieldArray=X,t.Form=G,t.Formik=A,t.FormikConsumer=k,t.FormikContext=M,t.FormikProvider=T,t.connect=W,t.getActiveElement=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}},t.getIn=F,t.insert=q,t.isEmptyArray=h,t.isEmptyChildren=O,t.isFunction=b,t.isInputEvent=function(e){return e&&j(e)&&j(e.target)},t.isInteger=y,t.isNaN=function(e){return e!=e},t.isObject=j,t.isPromise=E,t.isString=x,t.move=z,t.prepareDataForValidation=L,t.replace=K,t.setIn=S,t.setNestedObjectValues=w,t.swap=H,t.useField=function(e){var t=P(),r=t.getFieldProps,a=t.getFieldMeta,i=t.getFieldHelpers,s=t.registerField,o=t.unregisterField,u=j(e)?e:{name:e},l=u.name,d=u.validate;return n.useEffect((function(){return l&&s(l,{validate:d}),function(){l&&o(l)}}),[s,o,l,d]),l||c(!1),[r(u),a(l),i(l)]},t.useFormik=R,t.useFormikContext=P,t.validateYupSchema=D,t.withFormik=function(e){var t=e.mapPropsToValues,r=void 0===t?function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&"function"!=typeof e[r]&&(t[r]=e[r]);return t}:t,a=v(e,["mapPropsToValues"]);return function(e){var t=e.displayName||e.name||e.constructor&&e.constructor.name||"Component",i=function(t){function i(){var r;return(r=t.apply(this,arguments)||this).validate=function(e){return a.validate(e,r.props)},r.validationSchema=function(){return b(a.validationSchema)?a.validationSchema(r.props):a.validationSchema},r.handleSubmit=function(e,t){return a.handleSubmit(e,f({},t,{props:r.props}))},r.renderFormComponent=function(t){return n.createElement(e,Object.assign({},r.props,t))},r}return m(i,t),i.prototype.render=function(){var e=v(this.props,["children"]);return n.createElement(A,Object.assign({},e,a,{validate:a.validate&&this.validate,validationSchema:a.validationSchema&&this.validationSchema,initialValues:r(this.props),initialStatus:a.mapPropsToStatus&&a.mapPropsToStatus(this.props),initialErrors:a.mapPropsToErrors&&a.mapPropsToErrors(this.props),initialTouched:a.mapPropsToTouched&&a.mapPropsToTouched(this.props),onSubmit:this.handleSubmit,children:this.renderFormComponent}))},i}(n.Component);return i.displayName="WithFormik("+t+")",d(i,e)}},t.yupToFormErrors=U},121:function(e,t,r){"use strict";var a=Array.isArray,n=Object.keys,i=Object.prototype.hasOwnProperty,s="undefined"!=typeof Element;function o(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,u,l,c=a(e),d=a(t);if(c&&d){if((u=e.length)!=t.length)return!1;for(r=u;0!=r--;)if(!o(e[r],t[r]))return!1;return!0}if(c!=d)return!1;var p=e instanceof Date,f=t instanceof Date;if(p!=f)return!1;if(p&&f)return e.getTime()==t.getTime();var m=e instanceof RegExp,v=t instanceof RegExp;if(m!=v)return!1;if(m&&v)return e.toString()==t.toString();var g=n(e);if((u=g.length)!==n(t).length)return!1;for(r=u;0!=r--;)if(!i.call(t,g[r]))return!1;if(s&&e instanceof Element&&t instanceof Element)return e===t;for(r=u;0!=r--;)if(!("_owner"===(l=g[r])&&e.$$typeof||o(e[l],t[l])))return!1;return!0}return e!=e&&t!=t}e.exports=function(e,t){try{return o(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}},122:function(e,t,r){"use strict";var a=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function s(e,t,r){return e.concat(t).map((function(e){return i(e,r)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function u(e,t){try{return t in e}catch(e){return!1}}function l(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||s,r.isMergeableObject=r.isMergeableObject||a,r.cloneUnlessOtherwiseSpecified=i;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):function(e,t,r){var a={};return r.isMergeableObject(e)&&o(e).forEach((function(t){a[t]=i(e[t],r)})),o(t).forEach((function(n){(function(e,t){return u(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,n)||(u(e,n)&&r.isMergeableObject(t[n])?a[n]=function(e,t){if(!t.customMerge)return l;var r=t.customMerge(e);return"function"==typeof r?r:l}(n,r)(e[n],t[n],r):a[n]=i(t[n],r))})),a}(e,t,r):i(t,r)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return l(e,r,t)}),{})};var c=l;e.exports=c},123:function(e,t,r){e.exports=r(16)(3426)},124:function(e,t,r){var a=r(98);e.exports=function(e){return a(e,4)}},125:function(e,t,r){var a=r(126),n=r(127),i=r(128),s=r(129),o=r(130),u=r(131),l=r(132);e.exports=function(e){return i(e)?a(e,u):s(e)?[e]:n(o(l(e)))}},126:function(e,t,r){e.exports=r(16)(1545)},127:function(e,t,r){e.exports=r(16)(3406)},128:function(e,t,r){e.exports=r(16)(258)},129:function(e,t,r){e.exports=r(16)(770)},130:function(e,t,r){e.exports=r(16)(3395)},131:function(e,t,r){e.exports=r(16)(1546)},132:function(e,t,r){e.exports=r(16)(3397)},133:function(e,t,r){"use strict";e.exports=function(e,t){}},134:function(e,t,r){e.exports=r(16)(264)},135:function(e,t,r){var a=r(98);e.exports=function(e){return a(e,5)}},136:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),n=r(137);t.default=function(e,t){var r=n.useFirstMountState();a.useEffect((function(){if(!r)return e()}),t)}},137:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFirstMountState=void 0;var a=r(3);t.useFirstMountState=function(){var e=a.useRef(!0);return e.current?(e.current=!1,!0):e.current}},301:function(e,t,r){"use strict";r.r(t),r.d(t,"AccountManagementPage",(function(){return A}));var a=r(2),n=r(3),i=r.n(n),s=r(4),o=r(5),u=r(21),l=r(15),c=r(8),d=r(72),p=r(136),f=r.n(p),m=r(7),v=r(31);const g=Object(n.createContext)(void 0),h=g.Provider;function b(){const e=Object(n.useContext)(g);if(!e)throw new Error("FormChanges context is undefined, please verify you are calling useFormChangesContext() as child of a <FormChanges> component.");return e}var j=r(12),y=r.n(j),x=r(0);function O({as:e,validate:t,onBlur:r,...n}){const i=e||a.EuiFieldText,[s,o,u]=Object(d.useField)({name:n.name,validate:"object"==typeof t?(l=t,e=>l.required&&"number"!=typeof e&&!e?l.required:l.pattern&&!l.pattern.value.test(e)?l.pattern.message:l.minLength&&(!e||("object"==typeof e||"string"==typeof e)&&e.length<l.minLength.value)?l.minLength.message:l.maxLength&&e&&("object"==typeof e||"string"==typeof e)&&e.length>l.maxLength.value?l.maxLength.message:l.min&&(isNaN(e)||e<l.min.value)?l.min.message:l.max&&(isNaN(e)||e>l.max.value)?l.max.message:void 0):t});var l;return Object(x.jsx)(i,y()({isInvalid:o.touched&&!!o.error},s,n,{onBlur:e=>{u.setTouched(!0),null==r||r(e)}}))}const E=e=>{const t=Object(d.useFormikContext)(),{report:r}=b(),s=t.getFieldMeta(e.for),o=s.value===s.initialValue;return Object(n.useEffect)((()=>r(o)),[o]),Object(x.jsx)(i.a.Fragment,null,e.children," ",o?void 0:Object(x.jsx)(a.EuiIcon,{type:"dot",color:"success",size:"s"}))},F=e=>{var t;const r=Object(d.useFormikContext)(),i=n.Children.only(e.children),s=null!==(t=e.name)&&void 0!==t?t:i.props.name;if(!s)throw new Error("name prop is undefined, please verify you are either rendering <FormRow> itself or its child with a name prop.");const o=r.getFieldMeta(s);return Object(x.jsx)(a.EuiFormRow,y()({error:o.error,isInvalid:o.touched&&!!o.error},e),i)},S=()=>Object(x.jsx)(a.EuiText,{size:"xs",color:"subdued"},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.formRow.optionalText",defaultMessage:"Optional"}));var w=r(80),M=r(69);const T=["image/svg+xml","image/jpeg","image/png","image/gif"];const k=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;function P({user:e}){const{services:t}=Object(o.useKibana)();return Object(u.a)(e,t.application.capabilities)?Object(x.jsx)(a.EuiDescribedFormGroup,{fullWidth:!0,title:Object(x.jsx)("h2",null,Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.detailsGroupTitle",defaultMessage:"Details"})),description:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.detailsGroupDescription",defaultMessage:"Provide some basic information about yourself."})},Object(x.jsx)(F,{label:Object(x.jsx)(E,{for:"user.full_name"},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.fullNameLabel",defaultMessage:"Full name"})),labelAppend:Object(x.jsx)(S,null),fullWidth:!0},Object(x.jsx)(O,{name:"user.full_name",fullWidth:!0})),Object(x.jsx)(F,{label:Object(x.jsx)(E,{for:"user.email"},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.emailLabel",defaultMessage:"Email address"})),labelAppend:Object(x.jsx)(S,null),fullWidth:!0},Object(x.jsx)(O,{type:"email",name:"user.email",fullWidth:!0}))):null}function _({user:e,formik:t}){const{euiTheme:r}=Object(a.useEuiTheme)();if(!t.values.data)return null;const n=Object(M.c)(e);return Object(x.jsx)(a.EuiDescribedFormGroup,{fullWidth:!0,fieldFlexItemProps:{style:{alignSelf:"flex-start"}},title:Object(x.jsx)("h2",null,Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.avatarGroupTitle",defaultMessage:"Avatar"})),description:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.avatarGroupDescription",defaultMessage:"Provide your initials or upload an image to represent yourself."})},Object(x.jsx)(a.EuiFlexGroup,{responsive:!1},Object(x.jsx)(a.EuiFlexItem,{grow:!1},"image"!==t.values.avatarType||t.values.data.avatar.imageUrl?Object(x.jsx)(v.a,{user:{username:e.username,full_name:t.values.user.full_name},avatar:{imageUrl:"image"===t.values.avatarType?t.values.data.avatar.imageUrl:void 0,initials:t.values.data.avatar.initials||"?",color:k.test(t.values.data.avatar.color)?t.values.data.avatar.color:void 0},size:"xl"}):Object(x.jsx)(v.a,{size:"xl"})),Object(x.jsx)(a.EuiFlexItem,null,Object(x.jsx)(F,{name:"avatarType",label:Object(x.jsx)(E,{for:"avatarType"},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.avatarTypeGroupDescription",defaultMessage:"Avatar type"})),fullWidth:!0},Object(x.jsx)(a.EuiButtonGroup,{legend:s.i18n.translate("xpack.security.accountManagement.userProfile.avatarTypeGroupDescription",{defaultMessage:"Avatar type"}),buttonSize:"m",idSelected:t.values.avatarType,options:[{id:"initials",label:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.initialsAvatarTypeLabel",defaultMessage:"Initials"})},{id:"image",label:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.imageAvatarTypeLabel",defaultMessage:"Image"}),iconType:"image"}],onChange:e=>t.setFieldValue("avatarType",e),isFullWidth:!0})))),Object(x.jsx)(a.EuiSpacer,null),"image"===t.values.avatarType?Object(x.jsx)(F,{label:Object(x.jsx)(E,{for:"data.avatar.imageUrl"},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.imageUrlLabel",defaultMessage:"Image"})),fullWidth:!0},Object(x.jsx)(O,{as:a.EuiFilePicker,name:"data.avatar.imageUrl",value:void 0,initialPromptText:t.values.data.avatar.imageUrl?Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.prepopulatedImageUrlPromptText",defaultMessage:"Select or drag and drop a replacement image"}):Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.imageUrlPromptText",defaultMessage:"Select or drag and drop an image"}),onChange:(i=e=>{t.setFieldValue("data.avatar.imageUrl",null!=e?e:"")},async e=>{if(!e||!e.length)return void i(void 0);const t=e[0];if(-1!==T.indexOf(t.type)){const e=await(r=t,new Promise(((e,t)=>{const a=new FileReader;a.onloadend=()=>e(a.result),a.onerror=t,a.readAsDataURL(r)}))),a=await function(e,t){return new Promise(((r,a)=>{const n=new Image;n.onload=()=>{if(n.width<=t&&n.height<=t)return r(e);try{const e=document.createElement("canvas"),a=e.getContext("2d");if(a){n.width>=n.height?(e.width=t,e.height=Math.floor(n.height*t/n.width)):(e.height=t,e.width=Math.floor(n.width*t/n.height)),a.drawImage(n,0,0,e.width,e.height);const i=e.toDataURL();return r(i)}}catch(e){return a(e)}return a()},n.onerror=a,n.src=e}))}(e,64);i(a)}var r}),validate:{required:s.i18n.translate("xpack.security.accountManagement.userProfile.imageUrlRequiredError",{defaultMessage:"Upload an image."})},accept:T.join(","),display:"default",fullWidth:!0})):Object(x.jsx)(a.EuiFlexGroup,{responsive:!1},Object(x.jsx)(a.EuiFlexItem,{grow:!1,style:{width:64}},Object(x.jsx)(F,{label:Object(x.jsx)(E,{for:"data.avatar.initials"},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.initialsLabel",defaultMessage:"Initials"})),fullWidth:!0},Object(x.jsx)(O,{name:"data.avatar.initials",maxLength:2,validate:{required:s.i18n.translate("xpack.security.accountManagement.userProfile.initialsRequiredError",{defaultMessage:"Add initials"}),maxLength:{value:2,message:s.i18n.translate("xpack.security.accountManagement.userProfile.initialsMaxLengthError",{defaultMessage:"Enter no more than 2 characters."})}},fullWidth:!0}))),Object(x.jsx)(a.EuiFlexItem,null,Object(x.jsx)(F,{label:Object(x.jsx)(E,{for:"data.avatar.color"},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.colorLabel",defaultMessage:"Color"})),labelAppend:n?null:Object(x.jsx)(a.EuiButtonEmpty,{onClick:()=>t.setFieldValue("data.avatar.color","#"+String(Math.floor(16777215*Math.random()).toString(16)).padStart(6,"0")),size:"xs",flush:"right",style:{height:r.base}},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.randomizeButton",defaultMessage:"Randomize"})),fullWidth:!0},Object(x.jsx)(O,{as:a.EuiColorPicker,name:"data.avatar.color",color:t.values.data.avatar.color,validate:{required:s.i18n.translate("xpack.security.accountManagement.userProfile.colorRequiredError",{defaultMessage:"Select a color."}),pattern:{value:k,message:s.i18n.translate("xpack.security.accountManagement.userProfile.colorPatternError",{defaultMessage:"Enter a valid HEX color code."})}},onChange:e=>{t.setFieldValue("data.avatar.color",e)},fullWidth:!0})))));var i}function C({user:e,onShowPasswordForm:t}){return Object(u.b)(e)?Object(x.jsx)(a.EuiDescribedFormGroup,{fullWidth:!0,title:Object(x.jsx)("h2",null,Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.passwordGroupTitle",defaultMessage:"Password"})),description:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.passwordGroupDescription",defaultMessage:"Protect your data with a strong password."})},Object(x.jsx)(a.EuiFormRow,{label:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.passwordLabel",defaultMessage:"Password"}),fullWidth:!0},Object(x.jsx)(a.EuiButton,{onClick:t,iconType:"lock","data-test-subj":"openChangePasswordForm"},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.changePasswordButton",defaultMessage:"Change password"})))):null}const I=({user:e,data:t})=>{const{euiTheme:r}=Object(a.useEuiTheme)(),{services:i}=Object(o.useKibana)(),p=function({user:e,data:t}){var r,a,i,c,p,m,v;const{services:g}=Object(o.useKibana)(),{userProfiles:h,users:b}=Object(l.d)(),[j,y]=Object(n.useState)({user:{full_name:e.full_name||"",email:e.email||""},data:t?{avatar:{initials:(null===(r=t.avatar)||void 0===r?void 0:r.initials)||Object(u.g)(e),color:(null===(a=t.avatar)||void 0===a?void 0:a.color)||Object(u.f)(e),imageUrl:(null===(i=t.avatar)||void 0===i?void 0:i.imageUrl)||""}}:void 0,avatarType:null!=t&&null!==(c=t.avatar)&&void 0!==c&&c.imageUrl?"image":"initials"}),[x,O]=Object(n.useState)(!1),E=Object(d.useFormik)({onSubmit:async t=>{const r=[];if(Object(u.a)(e,g.application.capabilities)&&r.push(b.saveUser({username:e.username,roles:e.roles,enabled:e.enabled,full_name:t.user.full_name,email:t.user.email})),t.data&&r.push(h.update("image"===t.avatarType?t.data:{...t.data,avatar:{...t.data.avatar,imageUrl:null}})),0!==r.length){try{await Promise.all(r)}catch(e){return void g.notifications.toasts.addError(e,{title:s.i18n.translate("xpack.security.accountManagement.userProfile.submitErrorTitle",{defaultMessage:"Couldn't update profile"})})}y(t),g.notifications.toasts.addSuccess(s.i18n.translate("xpack.security.accountManagement.userProfile.submitSuccessTitle",{defaultMessage:"Profile updated"}))}},initialValues:j,enableReinitialize:!0,validateOnBlur:x,validateOnChange:x});E.submitCount>0&&!x?O(!0):0===E.submitCount&&x&&O(!1);const F=Object(n.useRef)(!(null==t||null===(p=t.avatar)||void 0===p||!p.initials)&&(null===(m=t.avatar)||void 0===m?void 0:m.initials)!==Object(u.g)(e));return f()((()=>{if(!F.current){const t=Object(u.g)({username:e.username,full_name:E.values.user.full_name});E.setFieldValue("data.avatar.initials",t)}}),[E.values.user.full_name]),f()((()=>{if(!F.current&&E.values.data){const t=Object(u.g)({username:e.username,full_name:E.values.user.full_name});F.current=E.values.data.avatar.initials!==t}}),[null===(v=E.values.data)||void 0===v?void 0:v.avatar.initials]),E}({user:e,data:t}),v=(()=>{const[e,t]=Object(n.useState)(0);return{count:e,report:e=>{if(!e)return t((e=>e+1)),()=>t((e=>e-1))}}})(),g=Object(a.useGeneratedHtmlId)(),[b,j]=Object(n.useState)(!1),y=Object(u.a)(e,i.application.capabilities),O=e.elastic_cloud_user,E=[{title:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.usernameLabel",defaultMessage:"Username"}),description:e.username,helpText:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.usernameHelpText",defaultMessage:"User name cannot be changed after account creation."}),testSubj:"username"}];return y||(E.push({title:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.fullNameLabel",defaultMessage:"Full name"}),description:e.full_name,helpText:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.fullNameHelpText",defaultMessage:"Please contact an administrator to change your full name."}),testSubj:"full_name"}),E.push({title:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.emailLabel",defaultMessage:"Email address"}),description:e.email,helpText:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.emailHelpText",defaultMessage:"Please contact an administrator to change your email address."}),testSubj:"email"})),Object(x.jsx)(d.FormikProvider,{value:p},Object(x.jsx)(h,{value:v},Object(x.jsx)(c.a,{text:s.i18n.translate("xpack.security.accountManagement.userProfile.title",{defaultMessage:"Profile"})},b?Object(x.jsx)(w.a,{username:e.username,onCancel:()=>j(!1),onSuccess:()=>j(!1)}):null,Object(x.jsx)(a.EuiPageTemplate_Deprecated,{className:"eui-fullHeight",pageHeader:{pageTitle:Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.title",defaultMessage:"Profile"}),pageTitleProps:{id:g},rightSideItems:E.reverse().map((e=>Object(x.jsx)(a.EuiDescriptionList,{textStyle:"reverse",listItems:[{title:Object(x.jsx)(a.EuiText,{color:r.colors.darkestShade,size:"s"},Object(x.jsx)(a.EuiFlexGroup,{responsive:!1,alignItems:"center",gutterSize:"none"},Object(x.jsx)(a.EuiFlexItem,{grow:!1},e.title),Object(x.jsx)(a.EuiFlexItem,{grow:!1,style:{marginLeft:"0.33em"}},Object(x.jsx)(a.EuiIconTip,{type:"questionInCircle",content:e.helpText})))),description:Object(x.jsx)("span",{"data-test-subj":e.testSubj},e.description||Object(x.jsx)(a.EuiText,{color:r.colors.disabledText,size:"s"},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.noneProvided",defaultMessage:"None provided"})))}],compressed:!0})))},bottomBar:v.count>0?Object(x.jsx)(R,null):null,bottomBarProps:{paddingSize:"m",position:"fixed"},restrictWidth:1e3},Object(x.jsx)(d.Form,{"aria-labelledby":g},Object(x.jsx)(P,{user:e}),O?null:Object(x.jsx)(_,{user:e,formik:p}),Object(x.jsx)(C,{user:e,onShowPasswordForm:()=>j(!0)})),Object(x.jsx)(a.EuiSpacer,null)))))},R=()=>{const e=Object(d.useFormikContext)(),{count:t}=b();return Object(x.jsx)(a.EuiFlexGroup,{alignItems:"center",style:{width:"100%"},responsive:!1},Object(x.jsx)(a.EuiFlexItem,null,Object(x.jsx)(a.EuiFlexGroup,{responsive:!1,gutterSize:"xs"},Object(x.jsx)(a.EuiFlexItem,{grow:!1},Object(x.jsx)(a.EuiIcon,{type:"dot",color:"success"})),Object(x.jsx)(a.EuiFlexItem,{grow:!1},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.unsavedChangesMessage",defaultMessage:"{count, plural, one {# unsaved change} other {# unsaved changes}}",values:{count:t}})))),Object(x.jsx)(a.EuiFlexItem,{grow:!1},Object(x.jsx)(a.EuiButtonEmpty,{onClick:e.handleReset,color:"ghost"},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.discardChangesButton",defaultMessage:"Discard"}))),Object(x.jsx)(a.EuiFlexItem,{grow:!1},Object(x.jsx)(a.EuiButton,{onClick:e.submitForm,isLoading:e.isSubmitting,isDisabled:e.submitCount>0&&!e.isValid,color:"success",iconType:"save",fill:!0},Object(x.jsx)(m.FormattedMessage,{id:"xpack.security.accountManagement.userProfile.saveChangesButton",defaultMessage:"{isSubmitting, select, true{Saving changesâ€¦} other{Save changes}}",values:{isSubmitting:e.isSubmitting}}))))},A=()=>{var e;const{services:t}=Object(o.useKibana)(),r=Object(l.c)(),n=Object(l.e)("avatar"),i=n.error&&r.value&&Object(u.c)(r.value)?n.error:void 0,d=r.error||i;return d?Object(x.jsx)(a.EuiEmptyPrompt,{iconType:"alert",title:Object(x.jsx)("h2",null,d.message)}):!r.value||Object(u.c)(r.value)&&!n.value?null:Object(x.jsx)(c.a,{text:s.i18n.translate("xpack.security.accountManagement.userSettingsBreadcrumbRootLabel",{defaultMessage:"User settings"}),href:t.http.basePath.prepend("/security/account")},Object(x.jsx)(I,{user:r.value,data:null===(e=n.value)||void 0===e?void 0:e.data}))}},66:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(25),n=r(3),i=r(28),s=r.n(i);function o(e){const t=function({onSubmit:e,validate:t,defaultValues:r}){const[i,o]=Object(n.useState)(r),[l,c]=Object(n.useState)({}),[d,p]=Object(n.useState)({}),[f,m]=Object(n.useState)(0),[v,g]=s()((async e=>{const r=await t(e);return c(r),0===Object.keys(r).length&&m(0),r}),[t]),[h,b]=s()((async t=>{const r=await g(t);if(p(function(e,t){return Object(a.cloneDeepWith)(e,(e=>{if("object"!=typeof e&&null!==e)return true}))}(t)),m(f+1),0===Object.keys(r).length)return e(t)}),[g,e]);return{setValue:async(e,t)=>{const r=u(i,e,t);o(r),await g(r)},setTouched:async(e,t=!0)=>{p(u(d,e,t)),await g(i)},setError:(e,t)=>{c(u(l,e,t)),p(u(d,e,!0))},reset:e=>{o(e),c({}),p({}),m(0)},submit:()=>b(i),values:i,errors:l,touched:d,isValidating:v.loading,isSubmitting:h.loading,submitError:h.error,isInvalid:Object.keys(l).length>0,isSubmitted:f>0}}(e),r={onSubmit:e=>{e.preventDefault(),t.submit()},onChange:e=>{const{name:r,type:a,checked:n,value:i}=e.target;r&&t.setValue(r,"checkbox"===a?n:i)},onBlur:e=>{const{name:r}=e.target;r&&t.setTouched(e.target.name)}};return[t,r]}function u(e,t,r){return Object(a.get)(e,t)!==r?Object(a.set)(Object(a.cloneDeep)(e),t,r):e}},68:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(3);function n(e=[]){const t=Object(a.useRef)(null);return Object(a.useEffect)((()=>{t.current&&t.current.focus()}),e),t}},69:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return s}));var a=r(4);const n=e=>{var t,r;return null!==(t=null===(r=e.metadata)||void 0===r?void 0:r._reserved)&&void 0!==t&&t},i=e=>{var t,r;return null!==(t=null===(r=e.metadata)||void 0===r?void 0:r._deprecated)&&void 0!==t&&t},s=e=>{var t,r;const n=null!==(t=null===(r=e.metadata)||void 0===r?void 0:r._deprecated_reason)&&void 0!==t?t:"";return a.i18n.translate("xpack.security.management.users.extendedUserDeprecationNotice",{defaultMessage:"The {username} user is deprecated. {reason}",values:{username:e.username,reason:n}})}},72:function(e,t,r){"use strict";e.exports=r(120)},80:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r(12),n=r.n(a),i=r(2),s=r(3),o=r.n(s),u=r(4),l=r(7),c=r(5),d=r(48),p=r(17),f=r(66),m=r(68),v=r(26),g=r(0);const h=({username:e,defaultValues:t={current_password:"",password:"",confirm_password:""},onSuccess:r,onCancel:a})=>{const{services:s}=Object(c.useKibana)(),{value:h,loading:b}=Object(p.b)(),j=(null==h?void 0:h.username)===e,y="kibana"===e||"kibana_system"===e,[x,O]=Object(f.a)({onSubmit:async t=>{try{await new v.UserAPIClient(s.http).changePassword(e,t.password,t.current_password),s.notifications.toasts.addSuccess(u.i18n.translate("xpack.security.management.users.changePasswordForm.successMessage",{defaultMessage:"Password successfully changed"})),null==r||r()}catch(e){var a,n;if(403!==(null===(a=e.body)||void 0===a?void 0:a.statusCode))throw s.notifications.toasts.addDanger({title:u.i18n.translate("xpack.security.management.users.changePasswordForm.errorMessage",{defaultMessage:"Could not change password"}),text:(null===(n=e.body)||void 0===n?void 0:n.message)||e.message}),e;x.setError("current_password",u.i18n.translate("xpack.security.management.users.changePasswordForm.currentPasswordInvalidError",{defaultMessage:"Invalid password."}))}},validate:async e=>((e,t)=>{const r={};return t&&(e.current_password||(r.current_password=u.i18n.translate("xpack.security.management.users.changePasswordForm.currentPasswordRequiredError",{defaultMessage:"Enter your current password."}))),e.password?e.password.length<6?r.password=u.i18n.translate("xpack.security.management.users.changePasswordForm.passwordInvalidError",{defaultMessage:"Enter at least 6 characters."}):e.password!==e.confirm_password&&(r.confirm_password=u.i18n.translate("xpack.security.management.users.changePasswordForm.confirmPasswordInvalidError",{defaultMessage:"Passwords do not match."})):r.password=u.i18n.translate("xpack.security.management.users.changePasswordForm.passwordRequiredError",{defaultMessage:"Enter a new password."}),r})(e,j),defaultValues:t}),E=Object(m.a)([b]),F=Object(i.useGeneratedHtmlId)({prefix:"modalForm"});return Object(g.jsx)(i.EuiModal,{onClose:a},Object(g.jsx)(i.EuiModalHeader,null,Object(g.jsx)(i.EuiModalHeaderTitle,{"data-test-subj":"confirmModalTitleText"},Object(g.jsx)(l.FormattedMessage,{id:"xpack.security.management.users.changePasswordForm.title",defaultMessage:"Change password"}))),Object(g.jsx)(i.EuiModalBody,null,b?Object(g.jsx)(i.EuiLoadingContent,null):Object(g.jsx)(i.EuiForm,n()({id:F,component:"form",noValidate:!0},O),y?Object(g.jsx)(o.a.Fragment,null,Object(g.jsx)(i.EuiCallOut,{title:u.i18n.translate("xpack.security.management.users.changePasswordForm.systemUserTitle",{defaultMessage:"Kibana will lose connection to Elasticsearch"}),color:"danger",iconType:"alert",style:{maxWidth:d.euiThemeVars.euiFormMaxWidth}},Object(g.jsx)("p",null,Object(g.jsx)(l.FormattedMessage,{id:"xpack.security.management.users.changePasswordForm.systemUserWarning",defaultMessage:"After changing the password for the {username} user, Kibana will be unusable.",values:{username:e}})),Object(g.jsx)("p",null,Object(g.jsx)(l.FormattedMessage,{id:"xpack.security.management.users.changePasswordForm.systemUserDescription",defaultMessage:"To regain access, update your config file with the new password and restart Kibana."}))),Object(g.jsx)(i.EuiSpacer,null)):void 0,j?Object(g.jsx)(o.a.Fragment,null,Object(g.jsx)(i.EuiFormRow,{label:u.i18n.translate("xpack.security.management.users.changePasswordForm.currentPasswordLabel",{defaultMessage:"Current password"}),error:x.errors.current_password,isInvalid:x.touched.current_password&&!!x.errors.current_password},Object(g.jsx)(i.EuiFieldPassword,{name:"current_password",type:"dual",defaultValue:x.values.current_password,isInvalid:x.touched.current_password&&!!x.errors.current_password,autoComplete:"current-password",inputRef:E,"data-test-subj":"editUserChangePasswordCurrentPasswordInput"}))):Object(g.jsx)(i.EuiFormRow,{label:u.i18n.translate("xpack.security.management.users.changePasswordForm.userLabel",{defaultMessage:"User"})},Object(g.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(g.jsx)(i.EuiFlexItem,{grow:!1},Object(g.jsx)(i.EuiIcon,{type:"user"})),Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiSpacer,{size:"xs"}),Object(g.jsx)(i.EuiText,null,e),Object(g.jsx)(i.EuiSpacer,{size:"xs"})))),Object(g.jsx)(i.EuiFormRow,{label:u.i18n.translate("xpack.security.management.users.changePasswordForm.passwordLabel",{defaultMessage:"New password"}),helpText:u.i18n.translate("xpack.security.management.users.changePasswordForm.passwordHelpText",{defaultMessage:"Password must be at least 6 characters."}),error:x.errors.password,isInvalid:x.touched.password&&!!x.errors.password},Object(g.jsx)(i.EuiFieldPassword,{name:"password",type:"dual",defaultValue:x.values.password,isInvalid:x.touched.password&&!!x.errors.password,autoComplete:"new-password",inputRef:j?void 0:E,"data-test-subj":"editUserChangePasswordNewPasswordInput"})),Object(g.jsx)(i.EuiFormRow,{label:u.i18n.translate("xpack.security.management.users.changePasswordForm.confirmPasswordLabel",{defaultMessage:"Confirm password"}),error:x.errors.confirm_password,isInvalid:x.touched.confirm_password&&!!x.errors.confirm_password},Object(g.jsx)(i.EuiFieldPassword,{name:"confirm_password",type:"dual",defaultValue:x.values.confirm_password,isInvalid:x.touched.confirm_password&&!!x.errors.confirm_password,autoComplete:"new-password","data-test-subj":"editUserChangePasswordConfirmPasswordInput"})))),Object(g.jsx)(i.EuiModalFooter,null,Object(g.jsx)(i.EuiButtonEmpty,{"data-test-subj":"changePasswordFormCancelButton",isDisabled:x.isSubmitting,onClick:a},Object(g.jsx)(l.FormattedMessage,{id:"xpack.security.changePasswordForm.cancelButton",defaultMessage:"Cancel"})),Object(g.jsx)(i.EuiButton,{iconType:"lock",type:"submit",form:F,"data-test-subj":"changePasswordFormSubmitButton",isLoading:x.isSubmitting,isDisabled:b||x.isSubmitted&&x.isInvalid,color:y?"danger":void 0,fill:!0},Object(g.jsx)(l.FormattedMessage,{id:"xpack.security.changePasswordForm.confirmButton",defaultMessage:"{isSubmitting, select, true{Changing passwordâ€¦} other{Change password}}",values:{isSubmitting:x.isSubmitting}}))))}},98:function(e,t,r){e.exports=r(16)(3399)}}]);